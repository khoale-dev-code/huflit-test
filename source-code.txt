This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.firebaserc
.gitignore
Backend/.git/objects/1c/931beec90738c48d2eb9158919ebbe532e5490
Backend/.git/objects/23/96f913c0cd1a98460075141a697595cb90b64a
Backend/.git/objects/24/3f80ef5dbd7d622bb029ded5e5ac358226da65
Backend/.git/objects/31/bf66b348a7ed1257783186e78a6da5d4f43809
Backend/.git/objects/4a/f0e2a19273dc7cbee8f4a90403f62f5b62c79f
Backend/.git/objects/5a/6c20f356e7140b1d2f5258a5b07d78b480a586
Backend/.git/objects/61/7ea120dd77a65c250a3dcbe1225ff606ed96ce
Backend/.git/objects/7c/91974b11a0ff5e68a0a426af7fad912f63db18
Backend/.git/objects/82/725f538bea1f7fb356c0ffeaa06d24b9fda9a3
Backend/.git/objects/8a/dd4ccaddc9a8bd22245404f84932f7bd9c36c8
Backend/.git/objects/c3/87ba5345654ed3a90452cb4b6702e05f73cf6e
Backend/.git/objects/c5/9c84435cf72486d82e82d90dc8782e4e84de00
Backend/.git/objects/c8/d70a8a2c571ec36a8d77507395f5de1d607fd6
Backend/.gitignore
Backend/chat-server.js
Backend/controllers/chatController.js
Backend/firebase-config.js
Backend/index.js
Backend/nodemon.json
Backend/package.json
Backend/routes/chat.js
Backend/vercel.json
dataconnect/dataconnect.yaml
dataconnect/example/connector.yaml
dataconnect/example/queries.gql
dataconnect/schema/schema.gql
dataconnect/seed_data.gql
eslint.config.js
et --hard 5c4fce2
firebase.json
firestore.indexes.json
firestore.rules
functions/.eslintrc.js
functions/.gitignore
functions/index.js
functions/package.json
huflit-test.git/config
huflit-test.git/description
huflit-test.git/HEAD
huflit-test.git/hooks/applypatch-msg.sample
huflit-test.git/hooks/commit-msg.sample
huflit-test.git/hooks/fsmonitor-watchman.sample
huflit-test.git/hooks/post-update.sample
huflit-test.git/hooks/pre-applypatch.sample
huflit-test.git/hooks/pre-commit.sample
huflit-test.git/hooks/pre-merge-commit.sample
huflit-test.git/hooks/pre-push.sample
huflit-test.git/hooks/pre-rebase.sample
huflit-test.git/hooks/pre-receive.sample
huflit-test.git/hooks/prepare-commit-msg.sample
huflit-test.git/hooks/push-to-checkout.sample
huflit-test.git/hooks/sendemail-validate.sample
huflit-test.git/hooks/update.sample
huflit-test.git/info/exclude
huflit-test.git/objects/pack/pack-232e5c89f598674b9fb6bc5badfac703622bb898.idx
huflit-test.git/objects/pack/pack-232e5c89f598674b9fb6bc5badfac703622bb898.pack
huflit-test.git/objects/pack/pack-232e5c89f598674b9fb6bc5badfac703622bb898.rev
huflit-test.git/packed-refs
index.html
package.json
postcss.config.js
public/data/audio/exam1/listening/full.mp3
public/data/audio/exam1/listening/part1.mp3
public/data/audio/exam1/listening/part2.mp3
public/data/audio/exam1/listening/part3.mp3
public/data/audio/exam1/listening/part4.mp3
public/index.html
public/vite.svg
README.md
scripts/createAdmin.js
scripts/createFirstAdmin.js
scripts/migrateData.js
scripts/uploadAllData.js
scripts/uploadData.js
scripts/uploadExamData.js
scripts/uploadGrammarData.js
scripts/uploadRealData.js
scripts/uploadvocabularyData.js
src/admin/AdminApp.jsx
src/admin/components/AdminLogsViewer.jsx
src/admin/components/AdminSetup.jsx
src/admin/components/ExamManagement.jsx
src/admin/components/GrammarManagement.jsx
src/admin/components/UserManagement.jsx
src/admin/components/VocabularyManagement.jsx
src/admin/config/adminAuth.js
src/admin/hooks/useAdminAuth.js
src/admin/pages/AdminDashboard.jsx
src/admin/pages/AdminLogin.jsx
src/admin/services/adminCloudFunctionService.js
src/admin/services/adminManagementService.js
src/App.css
src/App.jsx
src/assets/logo.png
src/assets/react.svg
src/components/Audio/AudioControls.css
src/components/Audio/AudioControls.jsx
src/components/Auth/AuthModal.jsx
src/components/Auth/ClerkAuth.jsx
src/components/Auth/CombinedAuth.jsx
src/components/Auth/FirebaseAuthButtons.jsx
src/components/Auth/UserProfile.jsx
src/components/Chat/ChatApp.jsx
src/components/common/Badge.jsx
src/components/common/Button.jsx
src/components/common/Card.jsx
src/components/common/CollapsibleSection.jsx
src/components/common/InfoCard.jsx
src/components/common/LoadingSpinner.css
src/components/common/LoadingSpinner.jsx
src/components/common/StatBox.jsx
src/components/ConfettiEffect.jsx
src/components/Display/ContentDisplay.jsx
src/components/Display/ExplanationDisplay.jsx
src/components/Display/PartSelector.jsx
src/components/Display/PreviousResults.jsx
src/components/Display/QuestionDisplay.jsx
src/components/Display/ReadingPart6Display.jsx
src/components/Display/ReadingPart7Display.jsx
src/components/Display/ReadingPart8Display.jsx
src/components/Display/ResultsDisplay.jsx
src/components/Display/ScriptDisplay.jsx
src/components/footer/Footer.css
src/components/footer/Footer.jsx
src/components/footer/ScrollToTopButton.jsx
src/components/FullExam/FullExamMode.jsx
src/components/Grama/GrammarReview.jsx
src/components/Grama/GrammarTopicPage.jsx
src/components/hooks/useAdvancedVoice.js
src/components/hooks/useLocalStorage.js
src/components/hooks/useOnlineUsers.js
src/components/hooks/usePresence.js
src/components/hooks/useScriptParser.js
src/components/hooks/useSpeech.js
src/components/hooks/useStreak.js
src/components/hooks/useTextToSpeech.js
src/components/hooks/useTextToSpeechWithExpression.js
src/components/hooks/useVoiceExpression.js
src/components/hooks/useVoices.js
src/components/layout/MainLayout.jsx
src/components/Navbar.jsx
src/components/Online/OnlineIndicator.css
src/components/Online/OnlineIndicator.jsx
src/components/Online/OnlineStats.jsx
src/components/pages/EmotionSelector.jsx
src/components/pages/ExamAnswersPage.jsx
src/components/pages/NotFoundPage.jsx
src/components/sections/HeaderSection.jsx
src/components/sections/InstructionsSection.jsx
src/components/styles/FullExamMode.css
src/components/styles/GrammarReview.css
src/components/styles/GrammarTopicPage.css
src/components/styles/Navbar.module.css
src/components/styles/UserProfile.module.css
src/components/utils/scriptUtils.js
src/components/utils/sounds.js
src/components/Voca/VocabularyPractice.jsx
src/components/VoiceMetricsBadge.jsx
src/config/firebase.js
src/config/routes.js
src/config/voiceConfig.js
src/config/voiceExpression.js
src/constants/config.js
src/contexts/AuthContext.jsx
src/contexts/ClerkUserContext.jsx
src/data/advancedData.js
src/data/beginnerData.js
src/data/examData.js
src/data/exams/exam1.js
src/data/exams/exam10.js
src/data/exams/exam11.js
src/data/exams/exam12.js
src/data/exams/exam13.js
src/data/exams/exam14.js
src/data/exams/exam15.js
src/data/exams/exam16.js
src/data/exams/exam17.js
src/data/exams/exam18.js
src/data/exams/exam19.js
src/data/exams/exam2.js
src/data/exams/exam20.js
src/data/exams/exam21.js
src/data/exams/exam22.js
src/data/exams/exam3.js
src/data/exams/exam4.js
src/data/exams/exam5.js
src/data/exams/exam6.js
src/data/exams/exam7.js
src/data/exams/exam8.js
src/data/exams/exam9.js
src/data/grammarData.js
src/data/intermediateData.js
src/data/vocabulary/vocabularyDataLevel1.js
src/data/vocabulary/vocabularyDataLevel2.js
src/data/vocabulary/vocabularyDataLevel3.js
src/data/vocabulary/vocabularyDataLevel4.js
src/data/vocabulary/vocabularyDataLevel5.js
src/data/vocabularyData.js
src/data/vocabularyHelpers.js
src/dataconnect-generated/.guides/config.json
src/dataconnect-generated/.guides/setup.md
src/dataconnect-generated/.guides/usage.md
src/dataconnect-generated/esm/index.esm.js
src/dataconnect-generated/esm/package.json
src/dataconnect-generated/index.cjs.js
src/dataconnect-generated/index.d.ts
src/dataconnect-generated/package.json
src/dataconnect-generated/react/esm/index.esm.js
src/dataconnect-generated/react/esm/package.json
src/dataconnect-generated/react/index.cjs.js
src/dataconnect-generated/react/index.d.ts
src/dataconnect-generated/react/package.json
src/dataconnect-generated/react/README.md
src/dataconnect-generated/README.md
src/hooks/useAppNavigation.js
src/hooks/useAppState.js
src/hooks/useAudio.js
src/hooks/useAudioPlayer.js
src/hooks/useAutoSaveProgress.js
src/hooks/useClerkAuth.js
src/hooks/useClerkFirebaseSync.js
src/hooks/useFirebaseAuth.js
src/hooks/useFirebaseUserSync.js
src/hooks/useFirestore.js
src/hooks/useFirestoreData.js
src/hooks/useOnlineUsers.js
src/hooks/usePresence.js
src/hooks/usePreviousAttempts.js
src/hooks/useResponsiveTTS.js
src/hooks/useSplashScreen.js
src/hooks/useUnifiedAuth.js
src/hooks/useUserProgress.js
src/hooks/useVoices.js
src/index.css
src/main.jsx
src/pages/HomePage.jsx
src/styles/animations.css
src/utils/helpers.js
src/views/CategoriesView.jsx
src/views/FlashcardsView.jsx
src/views/QuizView.jsx
src/views/StatsView.jsx
tailwind.config.js
vercel.json
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="src/hooks/useAudioPlayer.js">
import { useState, useCallback, useRef, useEffect } from 'react';

/**
 * Hook quản lý audio player
 * Hỗ trợ play, pause, stop, seek, volume control
 */
export const useAudioPlayer = (audioUrl) => {
  const [isPlaying, setIsPlaying] = useState(false);
  const [isPaused, setIsPaused] = useState(false);
  const [currentTime, setCurrentTime] = useState(0);
  const [duration, setDuration] = useState(0);
  const [volume, setVolume] = useState(1);
  const [error, setError] = useState(null);
  const [isLoading, setIsLoading] = useState(false);
  
  const audioRef = useRef(null);

  // Khởi tạo audio element
  useEffect(() => {
    if (!audioUrl) return;

    const audio = new Audio(audioUrl);
    audioRef.current = audio;

    const handleLoadedMetadata = () => {
      setDuration(audio.duration);
      setIsLoading(false);
    };

    const handleTimeUpdate = () => {
      setCurrentTime(audio.currentTime);
    };

    const handleEnded = () => {
      setIsPlaying(false);
      setIsPaused(false);
      setCurrentTime(0);
    };

    const handleError = (e) => {
      setError('Failed to load audio');
      setIsPlaying(false);
      console.error('Audio error:', e);
    };

    const handlePlay = () => {
      setIsPlaying(true);
      setIsPaused(false);
    };

    const handlePause = () => {
      setIsPlaying(false);
      setIsPaused(true);
    };

    audio.addEventListener('loadedmetadata', handleLoadedMetadata);
    audio.addEventListener('timeupdate', handleTimeUpdate);
    audio.addEventListener('ended', handleEnded);
    audio.addEventListener('error', handleError);
    audio.addEventListener('play', handlePlay);
    audio.addEventListener('pause', handlePause);

    audio.volume = volume;

    return () => {
      audio.pause();
      audio.currentTime = 0;
      audio.removeEventListener('loadedmetadata', handleLoadedMetadata);
      audio.removeEventListener('timeupdate', handleTimeUpdate);
      audio.removeEventListener('ended', handleEnded);
      audio.removeEventListener('error', handleError);
      audio.removeEventListener('play', handlePlay);
      audio.removeEventListener('pause', handlePause);
    };
  }, [audioUrl, volume]);

  const play = useCallback(() => {
    if (audioRef.current && !isPlaying) {
      setIsLoading(true);
      setError(null);
      try {
        const playPromise = audioRef.current.play();
        if (playPromise !== undefined) {
          playPromise
            .then(() => {
              setIsLoading(false);
            })
            .catch((err) => {
              setError('Failed to play audio');
              setIsLoading(false);
              console.error('Play error:', err);
            });
        }
      } catch (err) {
        setError('Failed to play audio');
        setIsLoading(false);
      }
    }
  }, [isPlaying]);

  const pause = useCallback(() => {
    if (audioRef.current) {
      audioRef.current.pause();
    }
  }, []);

  const stop = useCallback(() => {
    if (audioRef.current) {
      audioRef.current.pause();
      audioRef.current.currentTime = 0;
      setCurrentTime(0);
      setIsPlaying(false);
      setIsPaused(false);
    }
  }, []);

  const seek = useCallback((time) => {
    if (audioRef.current) {
      audioRef.current.currentTime = Math.max(0, Math.min(time, duration));
      setCurrentTime(audioRef.current.currentTime);
    }
  }, [duration]);

  const handleVolumeChange = useCallback((newVolume) => {
    setVolume(newVolume);
    if (audioRef.current) {
      audioRef.current.volume = newVolume;
    }
  }, []);

  const formatTime = (seconds) => {
    if (!seconds || isNaN(seconds)) return '0:00';
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  };

  return {
    isPlaying,
    isPaused,
    isLoading,
    currentTime,
    duration,
    volume,
    error,
    play,
    pause,
    stop,
    seek,
    setVolume: handleVolumeChange,
    formatTime,
  };
};
</file>

<file path=".firebaserc">
{
  "projects": {
    "default": "huflit-test-4ce25"
  }
}
</file>

<file path="Backend/nodemon.json">
{
  "watch": ["index.js", "chat-server.js", "routes", "controllers"],
  "ext": "js,mjs,cjs,json",
  "ignore": ["node_modules", ".git"],
  "exec": "node index.js",
  "delay": 500
}
</file>

<file path="Backend/routes/chat.js">
// backend/routes/chat.js
import express from 'express';
import {
  getAllMessages,
  getAllUsers,
  clearMessages,
  clearUsers,
} from '../controllers/chatController.js';

const router = express.Router();

/**
 * GET /api/chat/messages
 * Get all chat messages from Firestore
 */
router.get('/messages', async (req, res) => {
  try {
    const messages = await getAllMessages();
    res.json({
      success: true,
      data: messages,
      count: messages.length,
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message,
    });
  }
});

/**
 * GET /api/chat/users
 * Get all online users
 */
router.get('/users', (req, res) => {
  try {
    const users = getAllUsers();
    res.json({
      success: true,
      data: users,
      count: users.length,
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message,
    });
  }
});

/**
 * GET /api/chat/stats
 * Get chat statistics
 */
router.get('/stats', async (req, res) => {
  try {
    const messages = await getAllMessages();
    const users = getAllUsers();

    res.json({
      success: true,
      stats: {
        totalMessages: messages.length,
        onlineUsers: users.length,
        timestamp: new Date(),
      },
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message,
    });
  }
});

/**
 * DELETE /api/chat/messages (Admin only)
 * Clear all messages
 */
router.delete('/messages', async (req, res) => {
  try {
    const adminKey = req.headers['x-admin-key'];
    
    if (adminKey !== process.env.ADMIN_KEY) {
      return res.status(403).json({
        success: false,
        error: 'Unauthorized',
      });
    }

    await clearMessages();
    res.json({
      success: true,
      message: 'All messages cleared',
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message,
    });
  }
});

/**
 * DELETE /api/chat/users (Admin only)
 * Clear all users
 */
router.delete('/users', (req, res) => {
  try {
    const adminKey = req.headers['x-admin-key'];
    
    if (adminKey !== process.env.ADMIN_KEY) {
      return res.status(403).json({
        success: false,
        error: 'Unauthorized',
      });
    }

    clearUsers();
    res.json({
      success: true,
      message: 'All users cleared',
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message,
    });
  }
});

/**
 * Export route factory function
 */
export default (io) => {
  return router;
};
</file>

<file path="Backend/vercel.json">
{
  "version": 2,
  "builds": [
    {
      "src": "index.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "index.js"
    }
  ],
  "env": {
    "NODE_ENV": "production"
  }
}
</file>

<file path="dataconnect/dataconnect.yaml">
specVersion: "v1"
serviceId: "listening"
location: "us-east4"
schema:
  source: "./schema"
  datasource:
    postgresql:
      database: "fdcdb"
      cloudSql:
        instanceId: "listening-fdc"
        # schemaValidation: "STRICT"     # STRICT mode makes Postgres schema match Data Connect exactly.
        # schemaValidation: "COMPATIBLE" # COMPATIBLE mode makes Postgres schema compatible with Data Connect.
connectorDirs: ["./example"]
</file>

<file path="dataconnect/example/connector.yaml">
connectorId: example
generate:
  javascriptSdk:
    - outputDir: ..\..\src\dataconnect-generated
      package: "@dataconnect/generated"
      packageJsonDir: ..\..
      react: true
      angular: false
</file>

<file path="dataconnect/example/queries.gql">
mutation CreateNewList($name: String!, $description: String, $isPublic: Boolean) @auth(level: USER) {
  list_insert(data: {
    name: $name,
    description: $description,
    isPublic: $isPublic,
    userId_expr: "auth.uid",
    createdAt_expr: "request.time",
    updatedAt_expr: "request.time"
  })
}

query GetMyLists @auth(level: USER) {
  lists(where: {userId: {eq_expr: "auth.uid"}}) {
    id
    name
    description
    isPublic
    createdAt
    updatedAt
  }
}

mutation AddMovieToList($listId: UUID!, $movieId: UUID!, $note: String, $position: Int!) @auth(level: USER) {
  listItem_insert(data: {
    listId: $listId,
    movieId: $movieId,
    note: $note,
    position: $position
  })
}

query GetMoviesInList($listId: UUID!) @auth(level: USER) {
  list(id: $listId) {
    movies_via_ListItem {
      id
      title
      year
      summary
      runtime
      genres
    }
  }
}
</file>

<file path="dataconnect/schema/schema.gql">
type User @table {
  displayName: String!
  createdAt: Timestamp!
  email: String
  photoUrl: String
}

type Movie @table {
  title: String!
  year: Int!
  createdAt: Timestamp!
  summary: String
  genres: [String]
  runtime: Int
}

type Watch @table {
  user: User!
  movie: Movie!
  createdAt: Timestamp!
  watchDate: Date!
  location: String
}

type Review @table {
  user: User!
  movie: Movie!
  watch: Watch!
  rating: Int!
  createdAt: Timestamp!
  updatedAt: Timestamp!
  reviewText: String
  isPublic: Boolean
  shareLink: String
}

type List @table {
  user: User!
  name: String!
  isPublic: Boolean
  createdAt: Timestamp!
  updatedAt: Timestamp!
  description: String
}

type ListItem @table(key: ["list", "movie"]) {
  list: List!
  movie: Movie!
  position: Int!
  note: String
}
</file>

<file path="dataconnect/seed_data.gql">
mutation CreateDemoData @transaction @auth(level: USER, insecureReason: "This mutation is safe to expose to all logged in users.") {
  user_insertMany(
    data: [
      {
        id: "550e8400-e29b-41d4-a716-446655440000"
        createdAt: "2024-04-03T00:00:00Z"
        displayName: "demouser1"
      }
      {
        id: "550e8400-e29b-41d4-a716-446655440001"
        createdAt: "2024-04-03T00:00:00Z"
        displayName: "demouser2"
      }
    ]
  )
  movie_insertMany(
    data: [
      {
        id: "550e8400-e29b-41d4-a716-446655440002"
        createdAt: "2024-04-03T00:00:00Z"
        title: "Example Movie 1"
        year: 2023
      }
      {
        id: "550e8400-e29b-41d4-a716-446655440003"
        createdAt: "2024-04-03T00:00:00Z"
        title: "Example Movie 2"
        year: 2024
      }
    ]
  )
  list_insertMany(
    data: [
      {
        id: "550e8400-e29b-41d4-a716-446655440004"
        userId: "550e8400-e29b-41d4-a716-446655440000"
        createdAt: "2024-04-03T00:00:00Z"
        name: "Example List 1"
        updatedAt: "2024-04-03T00:00:00Z"
      }
      {
        id: "550e8400-e29b-41d4-a716-446655440005"
        userId: "550e8400-e29b-41d4-a716-446655440001"
        createdAt: "2024-04-03T00:00:00Z"
        name: "Example List 2"
        updatedAt: "2024-04-03T00:00:00Z"
      }
    ]
  )
  listItem_insertMany(
    data: [
      {
        listId: "550e8400-e29b-41d4-a716-446655440004"
        movieId: "550e8400-e29b-41d4-a716-446655440002"
        position: 1
      }
      {
        listId: "550e8400-e29b-41d4-a716-446655440005"
        movieId: "550e8400-e29b-41d4-a716-446655440003"
        position: 1
      }
    ]
  )
  watch_insertMany(
    data: [
      {
        id: "550e8400-e29b-41d4-a716-446655440006"
        movieId: "550e8400-e29b-41d4-a716-446655440002"
        userId: "550e8400-e29b-41d4-a716-446655440000"
        createdAt: "2024-04-03T00:00:00Z"
        watchDate: "2024-04-03"
      }
      {
        id: "550e8400-e29b-41d4-a716-446655440007"
        movieId: "550e8400-e29b-41d4-a716-446655440003"
        userId: "550e8400-e29b-41d4-a716-446655440001"
        createdAt: "2024-04-03T00:00:00Z"
        watchDate: "2024-04-03"
      }
    ]
  )
  review_insertMany(
    data: [
      {
        id: "550e8400-e29b-41d4-a716-446655440008"
        movieId: "550e8400-e29b-41d4-a716-446655440002"
        userId: "550e8400-e29b-41d4-a716-446655440000"
        watchId: "550e8400-e29b-41d4-a716-446655440006"
        createdAt: "2024-04-03T00:00:00Z"
        rating: 5
      }
      {
        id: "550e8400-e29b-41d4-a716-446655440009"
        movieId: "550e8400-e29b-41d4-a716-446655440003"
        userId: "550e8400-e29b-41d4-a716-446655440001"
        watchId: "550e8400-e29b-41d4-a716-446655440007"
        createdAt: "2024-04-03T00:00:00Z"
        rating: 4
      }
    ]
  )
}
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])
</file>

<file path="et --hard 5c4fce2">

</file>

<file path="firestore.indexes.json">
{
  "indexes": [],
  "fieldOverrides": []
}
</file>

<file path="firestore.rules">
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // ============================================
    // PUBLIC DATA - Everyone can read
    // ============================================
    
    // Exam Data - public read
    match /examData/{document=**} {
      allow read: if true;
      allow write: if false;
    }
    
    // Vocabulary Data - public read
    match /vocabularyData/{document=**} {
      allow read: if true;
      allow write: if false;
    }
    
    // Grammar Data - public read
    match /grammarData/{document=**} {
      allow read: if true;
      allow write: if false;
    }
    
    // Metadata - public read
    match /metadata/{document=**} {
      allow read: if true;
      allow write: if false;
    }
    
    // ============================================
    // PRIVATE DATA - User Progress
    // ============================================
    
    // Users collection (Clerk webhook creates these)
    match /users/{userId} {
      allow read: if true;  // Allow read for now
      allow write: if false; // Only webhook can write
    }
    
    // User Progress - OPEN FOR DEVELOPMENT
    // TODO: Add proper security after Clerk-Firebase integration
    match /userProgress/{docId} {
      // TEMPORARY: Allow all authenticated reads/writes
      allow read, write, create, update, delete: if true;
    }
    
    // ============================================
    // FALLBACK - Deny everything else
    // ============================================
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
</file>

<file path="functions/.eslintrc.js">
module.exports = {
  env: {
    es6: true,
    node: true,
  },
  parserOptions: {
    "ecmaVersion": 2018,
  },
  extends: [
    "eslint:recommended",
    "google",
  ],
  rules: {
    "no-restricted-globals": ["error", "name", "length"],
    "prefer-arrow-callback": "error",
    "quotes": ["error", "double", {"allowTemplateLiterals": true}],
  },
  overrides: [
    {
      files: ["**/*.spec.*"],
      env: {
        mocha: true,
      },
      rules: {},
    },
  ],
  globals: {},
};
</file>

<file path="functions/.gitignore">
node_modules/
*.local
</file>

<file path="functions/index.js">
/**
 * Import function triggers from their respective submodules:
 *
 * const {onCall} = require("firebase-functions/v2/https");
 * const {onDocumentWritten} = require("firebase-functions/v2/firestore");
 *
 * See a full list of supported triggers at https://firebase.google.com/docs/functions
 */

const {setGlobalOptions} = require("firebase-functions");
const {onRequest} = require("firebase-functions/https");
const logger = require("firebase-functions/logger");

// For cost control, you can set the maximum number of containers that can be
// running at the same time. This helps mitigate the impact of unexpected
// traffic spikes by instead downgrading performance. This limit is a
// per-function limit. You can override the limit for each function using the
// `maxInstances` option in the function's options, e.g.
// `onRequest({ maxInstances: 5 }, (req, res) => { ... })`.
// NOTE: setGlobalOptions does not apply to functions using the v1 API. V1
// functions should each use functions.runWith({ maxInstances: 10 }) instead.
// In the v1 API, each function can only serve one request per container, so
// this will be the maximum concurrent request count.
setGlobalOptions({ maxInstances: 10 });

// Create and deploy your first functions
// https://firebase.google.com/docs/functions/get-started

// exports.helloWorld = onRequest((request, response) => {
//   logger.info("Hello logs!", {structuredData: true});
//   response.send("Hello from Firebase!");
// });
</file>

<file path="functions/package.json">
{
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "24"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^13.6.0",
    "firebase-functions": "^7.0.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.4.1"
  },
  "private": true
}
</file>

<file path="huflit-test.git/config">
[core]
	repositoryformatversion = 0
	filemode = false
	bare = true
	symlinks = false
	ignorecase = true
[remote "origin"]
	url = https://github.com/khoale-dev-code/huflit-test.git
	fetch = +refs/*:refs/*
	mirror = true
</file>

<file path="huflit-test.git/description">
Unnamed repository; edit this file 'description' to name the repository.
</file>

<file path="huflit-test.git/HEAD">
ref: refs/heads/main
</file>

<file path="huflit-test.git/hooks/applypatch-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message taken by
# applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.  The hook is
# allowed to edit the commit message file.
#
# To enable this hook, rename this file to "applypatch-msg".

. git-sh-setup
commitmsg="$(git rev-parse --git-path hooks/commit-msg)"
test -x "$commitmsg" && exec "$commitmsg" ${1+"$@"}
:
</file>

<file path="huflit-test.git/hooks/commit-msg.sample">
#!/bin/sh
#
# An example hook script to check the commit log message.
# Called by "git commit" with one argument, the name of the file
# that has the commit message.  The hook should exit with non-zero
# status after issuing an appropriate message if it wants to stop the
# commit.  The hook is allowed to edit the commit message file.
#
# To enable this hook, rename this file to "commit-msg".

# Uncomment the below to add a Signed-off-by line to the message.
# Doing this in a hook is a bad idea in general, but the prepare-commit-msg
# hook is more suited to it.
#
# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"

# This example catches duplicate Signed-off-by lines.

test "" = "$(grep '^Signed-off-by: ' "$1" |
	 sort | uniq -c | sed -e '/^[ 	]*1[ 	]/d')" || {
	echo >&2 Duplicate Signed-off-by lines.
	exit 1
}
</file>

<file path="huflit-test.git/hooks/fsmonitor-watchman.sample">
#!/usr/bin/perl

use strict;
use warnings;
use IPC::Open2;

# An example hook script to integrate Watchman
# (https://facebook.github.io/watchman/) with git to speed up detecting
# new and modified files.
#
# The hook is passed a version (currently 2) and last update token
# formatted as a string and outputs to stdout a new update token and
# all files that have been modified since the update token. Paths must
# be relative to the root of the working tree and separated by a single NUL.
#
# To enable this hook, rename this file to "query-watchman" and set
# 'git config core.fsmonitor .git/hooks/query-watchman'
#
my ($version, $last_update_token) = @ARGV;

# Uncomment for debugging
# print STDERR "$0 $version $last_update_token\n";

# Check the hook interface version
if ($version ne 2) {
	die "Unsupported query-fsmonitor hook version '$version'.\n" .
	    "Falling back to scanning...\n";
}

my $git_work_tree = get_working_dir();

my $retry = 1;

my $json_pkg;
eval {
	require JSON::XS;
	$json_pkg = "JSON::XS";
	1;
} or do {
	require JSON::PP;
	$json_pkg = "JSON::PP";
};

launch_watchman();

sub launch_watchman {
	my $o = watchman_query();
	if (is_work_tree_watched($o)) {
		output_result($o->{clock}, @{$o->{files}});
	}
}

sub output_result {
	my ($clockid, @files) = @_;

	# Uncomment for debugging watchman output
	# open (my $fh, ">", ".git/watchman-output.out");
	# binmode $fh, ":utf8";
	# print $fh "$clockid\n@files\n";
	# close $fh;

	binmode STDOUT, ":utf8";
	print $clockid;
	print "\0";
	local $, = "\0";
	print @files;
}

sub watchman_clock {
	my $response = qx/watchman clock "$git_work_tree"/;
	die "Failed to get clock id on '$git_work_tree'.\n" .
		"Falling back to scanning...\n" if $? != 0;

	return $json_pkg->new->utf8->decode($response);
}

sub watchman_query {
	my $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'watchman -j --no-pretty')
	or die "open2() failed: $!\n" .
	"Falling back to scanning...\n";

	# In the query expression below we're asking for names of files that
	# changed since $last_update_token but not from the .git folder.
	#
	# To accomplish this, we're using the "since" generator to use the
	# recency index to select candidate nodes and "fields" to limit the
	# output to file names only. Then we're using the "expression" term to
	# further constrain the results.
	my $last_update_line = "";
	if (substr($last_update_token, 0, 1) eq "c") {
		$last_update_token = "\"$last_update_token\"";
		$last_update_line = qq[\n"since": $last_update_token,];
	}
	my $query = <<"	END";
		["query", "$git_work_tree", {$last_update_line
			"fields": ["name"],
			"expression": ["not", ["dirname", ".git"]]
		}]
	END

	# Uncomment for debugging the watchman query
	# open (my $fh, ">", ".git/watchman-query.json");
	# print $fh $query;
	# close $fh;

	print CHLD_IN $query;
	close CHLD_IN;
	my $response = do {local $/; <CHLD_OUT>};

	# Uncomment for debugging the watch response
	# open ($fh, ">", ".git/watchman-response.json");
	# print $fh $response;
	# close $fh;

	die "Watchman: command returned no output.\n" .
	"Falling back to scanning...\n" if $response eq "";
	die "Watchman: command returned invalid output: $response\n" .
	"Falling back to scanning...\n" unless $response =~ /^\{/;

	return $json_pkg->new->utf8->decode($response);
}

sub is_work_tree_watched {
	my ($output) = @_;
	my $error = $output->{error};
	if ($retry > 0 and $error and $error =~ m/unable to resolve root .* directory (.*) is not watched/) {
		$retry--;
		my $response = qx/watchman watch "$git_work_tree"/;
		die "Failed to make watchman watch '$git_work_tree'.\n" .
		    "Falling back to scanning...\n" if $? != 0;
		$output = $json_pkg->new->utf8->decode($response);
		$error = $output->{error};
		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		# Uncomment for debugging watchman output
		# open (my $fh, ">", ".git/watchman-output.out");
		# close $fh;

		# Watchman will always return all files on the first query so
		# return the fast "everything is dirty" flag to git and do the
		# Watchman query just to get it over with now so we won't pay
		# the cost in git to look up each individual file.
		my $o = watchman_clock();
		$error = $output->{error};

		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		output_result($o->{clock}, ("/"));
		$last_update_token = $o->{clock};

		eval { launch_watchman() };
		return 0;
	}

	die "Watchman: $error.\n" .
	"Falling back to scanning...\n" if $error;

	return 1;
}

sub get_working_dir {
	my $working_dir;
	if ($^O =~ 'msys' || $^O =~ 'cygwin') {
		$working_dir = Win32::GetCwd();
		$working_dir =~ tr/\\/\//;
	} else {
		require Cwd;
		$working_dir = Cwd::cwd();
	}

	return $working_dir;
}
</file>

<file path="huflit-test.git/hooks/post-update.sample">
#!/bin/sh
#
# An example hook script to prepare a packed repository for use over
# dumb transports.
#
# To enable this hook, rename this file to "post-update".

exec git update-server-info
</file>

<file path="huflit-test.git/hooks/pre-applypatch.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed
# by applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-applypatch".

. git-sh-setup
precommit="$(git rev-parse --git-path hooks/pre-commit)"
test -x "$precommit" && exec "$precommit" ${1+"$@"}
:
</file>

<file path="huflit-test.git/hooks/pre-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git commit" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message if
# it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-commit".

if git rev-parse --verify HEAD >/dev/null 2>&1
then
	against=HEAD
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)
fi

# If you want to allow non-ASCII filenames set this variable to true.
allownonascii=$(git config --type=bool hooks.allownonascii)

# Redirect output to stderr.
exec 1>&2

# Cross platform projects tend to avoid non-ASCII filenames; prevent
# them from being added to the repository. We exploit the fact that the
# printable range starts at the space character and ends with tilde.
if [ "$allownonascii" != "true" ] &&
	# Note that the use of brackets around a tr range is ok here, (it's
	# even required, for portability to Solaris 10's /usr/bin/tr), since
	# the square bracket bytes happen to fall in the designated range.
	test $(git diff-index --cached --name-only --diff-filter=A -z $against |
	  LC_ALL=C tr -d '[ -~]\0' | wc -c) != 0
then
	cat <<\EOF
Error: Attempt to add a non-ASCII file name.

This can cause problems if you want to work with people on other platforms.

To be portable it is advisable to rename the file.

If you know what you are doing you can disable this check using:

  git config hooks.allownonascii true
EOF
	exit 1
fi

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against --
</file>

<file path="huflit-test.git/hooks/pre-merge-commit.sample">
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git merge" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message to
# stderr if it wants to stop the merge commit.
#
# To enable this hook, rename this file to "pre-merge-commit".

. git-sh-setup
test -x "$GIT_DIR/hooks/pre-commit" &&
        exec "$GIT_DIR/hooks/pre-commit"
:
</file>

<file path="huflit-test.git/hooks/pre-push.sample">
#!/bin/sh

# An example hook script to verify what is about to be pushed.  Called by "git
# push" after it has checked the remote status, but before anything has been
# pushed.  If this script exits with a non-zero status nothing will be pushed.
#
# This hook is called with the following parameters:
#
# $1 -- Name of the remote to which the push is being done
# $2 -- URL to which the push is being done
#
# If pushing without using a named remote those arguments will be equal.
#
# Information about the commits which are being pushed is supplied as lines to
# the standard input in the form:
#
#   <local ref> <local oid> <remote ref> <remote oid>
#
# This sample shows how to prevent push of commits where the log message starts
# with "WIP" (work in progress).

remote="$1"
url="$2"

zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')

while read local_ref local_oid remote_ref remote_oid
do
	if test "$local_oid" = "$zero"
	then
		# Handle delete
		:
	else
		if test "$remote_oid" = "$zero"
		then
			# New branch, examine all commits
			range="$local_oid"
		else
			# Update to existing branch, examine new commits
			range="$remote_oid..$local_oid"
		fi

		# Check for WIP commit
		commit=$(git rev-list -n 1 --grep '^WIP' "$range")
		if test -n "$commit"
		then
			echo >&2 "Found WIP commit in $local_ref, not pushing"
			exit 1
		fi
	fi
done

exit 0
</file>

<file path="huflit-test.git/hooks/pre-rebase.sample">
#!/bin/sh
#
# Copyright (c) 2006, 2008 Junio C Hamano
#
# The "pre-rebase" hook is run just before "git rebase" starts doing
# its job, and can prevent the command from running by exiting with
# non-zero status.
#
# The hook is called with the following parameters:
#
# $1 -- the upstream the series was forked from.
# $2 -- the branch being rebased (or empty when rebasing the current branch).
#
# This sample shows how to prevent topic branches that are already
# merged to 'next' branch from getting rebased, because allowing it
# would result in rebasing already published history.

publish=next
basebranch="$1"
if test "$#" = 2
then
	topic="refs/heads/$2"
else
	topic=`git symbolic-ref HEAD` ||
	exit 0 ;# we do not interrupt rebasing detached HEAD
fi

case "$topic" in
refs/heads/??/*)
	;;
*)
	exit 0 ;# we do not interrupt others.
	;;
esac

# Now we are dealing with a topic branch being rebased
# on top of master.  Is it OK to rebase it?

# Does the topic really exist?
git show-ref -q "$topic" || {
	echo >&2 "No such branch $topic"
	exit 1
}

# Is topic fully merged to master?
not_in_master=`git rev-list --pretty=oneline ^master "$topic"`
if test -z "$not_in_master"
then
	echo >&2 "$topic is fully merged to master; better remove it."
	exit 1 ;# we could allow it, but there is no point.
fi

# Is topic ever merged to next?  If so you should not be rebasing it.
only_next_1=`git rev-list ^master "^$topic" ${publish} | sort`
only_next_2=`git rev-list ^master           ${publish} | sort`
if test "$only_next_1" = "$only_next_2"
then
	not_in_topic=`git rev-list "^$topic" master`
	if test -z "$not_in_topic"
	then
		echo >&2 "$topic is already up to date with master"
		exit 1 ;# we could allow it, but there is no point.
	else
		exit 0
	fi
else
	not_in_next=`git rev-list --pretty=oneline ^${publish} "$topic"`
	/usr/bin/perl -e '
		my $topic = $ARGV[0];
		my $msg = "* $topic has commits already merged to public branch:\n";
		my (%not_in_next) = map {
			/^([0-9a-f]+) /;
			($1 => 1);
		} split(/\n/, $ARGV[1]);
		for my $elem (map {
				/^([0-9a-f]+) (.*)$/;
				[$1 => $2];
			} split(/\n/, $ARGV[2])) {
			if (!exists $not_in_next{$elem->[0]}) {
				if ($msg) {
					print STDERR $msg;
					undef $msg;
				}
				print STDERR " $elem->[1]\n";
			}
		}
	' "$topic" "$not_in_next" "$not_in_master"
	exit 1
fi

<<\DOC_END

This sample hook safeguards topic branches that have been
published from being rewound.

The workflow assumed here is:

 * Once a topic branch forks from "master", "master" is never
   merged into it again (either directly or indirectly).

 * Once a topic branch is fully cooked and merged into "master",
   it is deleted.  If you need to build on top of it to correct
   earlier mistakes, a new topic branch is created by forking at
   the tip of the "master".  This is not strictly necessary, but
   it makes it easier to keep your history simple.

 * Whenever you need to test or publish your changes to topic
   branches, merge them into "next" branch.

The script, being an example, hardcodes the publish branch name
to be "next", but it is trivial to make it configurable via
$GIT_DIR/config mechanism.

With this workflow, you would want to know:

(1) ... if a topic branch has ever been merged to "next".  Young
    topic branches can have stupid mistakes you would rather
    clean up before publishing, and things that have not been
    merged into other branches can be easily rebased without
    affecting other people.  But once it is published, you would
    not want to rewind it.

(2) ... if a topic branch has been fully merged to "master".
    Then you can delete it.  More importantly, you should not
    build on top of it -- other people may already want to
    change things related to the topic as patches against your
    "master", so if you need further changes, it is better to
    fork the topic (perhaps with the same name) afresh from the
    tip of "master".

Let's look at this example:

		   o---o---o---o---o---o---o---o---o---o "next"
		  /       /           /           /
		 /   a---a---b A     /           /
		/   /               /           /
	       /   /   c---c---c---c B         /
	      /   /   /             \         /
	     /   /   /   b---b C     \       /
	    /   /   /   /             \     /
    ---o---o---o---o---o---o---o---o---o---o---o "master"


A, B and C are topic branches.

 * A has one fix since it was merged up to "next".

 * B has finished.  It has been fully merged up to "master" and "next",
   and is ready to be deleted.

 * C has not merged to "next" at all.

We would want to allow C to be rebased, refuse A, and encourage
B to be deleted.

To compute (1):

	git rev-list ^master ^topic next
	git rev-list ^master        next

	if these match, topic has not merged in next at all.

To compute (2):

	git rev-list master..topic

	if this is empty, it is fully merged to "master".

DOC_END
</file>

<file path="huflit-test.git/hooks/pre-receive.sample">
#!/bin/sh
#
# An example hook script to make use of push options.
# The example simply echoes all push options that start with 'echoback='
# and rejects all pushes when the "reject" push option is used.
#
# To enable this hook, rename this file to "pre-receive".

if test -n "$GIT_PUSH_OPTION_COUNT"
then
	i=0
	while test "$i" -lt "$GIT_PUSH_OPTION_COUNT"
	do
		eval "value=\$GIT_PUSH_OPTION_$i"
		case "$value" in
		echoback=*)
			echo "echo from the pre-receive-hook: ${value#*=}" >&2
			;;
		reject)
			exit 1
		esac
		i=$((i + 1))
	done
fi
</file>

<file path="huflit-test.git/hooks/prepare-commit-msg.sample">
#!/bin/sh
#
# An example hook script to prepare the commit log message.
# Called by "git commit" with the name of the file that has the
# commit message, followed by the description of the commit
# message's source.  The hook's purpose is to edit the commit
# message file.  If the hook fails with a non-zero status,
# the commit is aborted.
#
# To enable this hook, rename this file to "prepare-commit-msg".

# This hook includes three examples. The first one removes the
# "# Please enter the commit message..." help message.
#
# The second includes the output of "git diff --name-status -r"
# into the message, just before the "git status" output.  It is
# commented because it doesn't cope with --amend or with squashed
# commits.
#
# The third example adds a Signed-off-by line to the message, that can
# still be edited.  This is rarely a good idea.

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

/usr/bin/perl -i.bak -ne 'print unless(m/^. Please enter the commit message/..m/^#$/)' "$COMMIT_MSG_FILE"

# case "$COMMIT_SOURCE,$SHA1" in
#  ,|template,)
#    /usr/bin/perl -i.bak -pe '
#       print "\n" . `git diff --cached --name-status -r`
# 	 if /^#/ && $first++ == 0' "$COMMIT_MSG_FILE" ;;
#  *) ;;
# esac

# SOB=$(git var GIT_COMMITTER_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# git interpret-trailers --in-place --trailer "$SOB" "$COMMIT_MSG_FILE"
# if test -z "$COMMIT_SOURCE"
# then
#   /usr/bin/perl -i.bak -pe 'print "\n" if !$first_line++' "$COMMIT_MSG_FILE"
# fi
</file>

<file path="huflit-test.git/hooks/push-to-checkout.sample">
#!/bin/sh

# An example hook script to update a checked-out tree on a git push.
#
# This hook is invoked by git-receive-pack(1) when it reacts to git
# push and updates reference(s) in its repository, and when the push
# tries to update the branch that is currently checked out and the
# receive.denyCurrentBranch configuration variable is set to
# updateInstead.
#
# By default, such a push is refused if the working tree and the index
# of the remote repository has any difference from the currently
# checked out commit; when both the working tree and the index match
# the current commit, they are updated to match the newly pushed tip
# of the branch. This hook is to be used to override the default
# behaviour; however the code below reimplements the default behaviour
# as a starting point for convenient modification.
#
# The hook receives the commit with which the tip of the current
# branch is going to be updated:
commit=$1

# It can exit with a non-zero status to refuse the push (when it does
# so, it must not modify the index or the working tree).
die () {
	echo >&2 "$*"
	exit 1
}

# Or it can make any necessary changes to the working tree and to the
# index to bring them to the desired state when the tip of the current
# branch is updated to the new commit, and exit with a zero status.
#
# For example, the hook can simply run git read-tree -u -m HEAD "$1"
# in order to emulate git fetch that is run in the reverse direction
# with git push, as the two-tree form of git read-tree -u -m is
# essentially the same as git switch or git checkout that switches
# branches while keeping the local changes in the working tree that do
# not interfere with the difference between the branches.

# The below is a more-or-less exact translation to shell of the C code
# for the default behaviour for git's push-to-checkout hook defined in
# the push_to_deploy() function in builtin/receive-pack.c.
#
# Note that the hook will be executed from the repository directory,
# not from the working tree, so if you want to perform operations on
# the working tree, you will have to adapt your code accordingly, e.g.
# by adding "cd .." or using relative paths.

if ! git update-index -q --ignore-submodules --refresh
then
	die "Up-to-date check failed"
fi

if ! git diff-files --quiet --ignore-submodules --
then
	die "Working directory has unstaged changes"
fi

# This is a rough translation of:
#
#   head_has_history() ? "HEAD" : EMPTY_TREE_SHA1_HEX
if git cat-file -e HEAD 2>/dev/null
then
	head=HEAD
else
	head=$(git hash-object -t tree --stdin </dev/null)
fi

if ! git diff-index --quiet --cached --ignore-submodules $head --
then
	die "Working directory has staged changes"
fi

if ! git read-tree -u -m "$commit"
then
	die "Could not update working tree to new HEAD"
fi
</file>

<file path="huflit-test.git/hooks/sendemail-validate.sample">
#!/bin/sh

# An example hook script to validate a patch (and/or patch series) before
# sending it via email.
#
# The hook should exit with non-zero status after issuing an appropriate
# message if it wants to prevent the email(s) from being sent.
#
# To enable this hook, rename this file to "sendemail-validate".
#
# By default, it will only check that the patch(es) can be applied on top of
# the default upstream branch without conflicts in a secondary worktree. After
# validation (successful or not) of the last patch of a series, the worktree
# will be deleted.
#
# The following config variables can be set to change the default remote and
# remote ref that are used to apply the patches against:
#
#   sendemail.validateRemote (default: origin)
#   sendemail.validateRemoteRef (default: HEAD)
#
# Replace the TODO placeholders with appropriate checks according to your
# needs.

validate_cover_letter () {
	file="$1"
	# TODO: Replace with appropriate checks (e.g. spell checking).
	true
}

validate_patch () {
	file="$1"
	# Ensure that the patch applies without conflicts.
	git am -3 "$file" || return
	# TODO: Replace with appropriate checks for this patch
	# (e.g. checkpatch.pl).
	true
}

validate_series () {
	# TODO: Replace with appropriate checks for the whole series
	# (e.g. quick build, coding style checks, etc.).
	true
}

# main -------------------------------------------------------------------------

if test "$GIT_SENDEMAIL_FILE_COUNTER" = 1
then
	remote=$(git config --default origin --get sendemail.validateRemote) &&
	ref=$(git config --default HEAD --get sendemail.validateRemoteRef) &&
	worktree=$(mktemp --tmpdir -d sendemail-validate.XXXXXXX) &&
	git worktree add -fd --checkout "$worktree" "refs/remotes/$remote/$ref" &&
	git config --replace-all sendemail.validateWorktree "$worktree"
else
	worktree=$(git config --get sendemail.validateWorktree)
fi || {
	echo "sendemail-validate: error: failed to prepare worktree" >&2
	exit 1
}

unset GIT_DIR GIT_WORK_TREE
cd "$worktree" &&

if grep -q "^diff --git " "$1"
then
	validate_patch "$1"
else
	validate_cover_letter "$1"
fi &&

if test "$GIT_SENDEMAIL_FILE_COUNTER" = "$GIT_SENDEMAIL_FILE_TOTAL"
then
	git config --unset-all sendemail.validateWorktree &&
	trap 'git worktree remove -ff "$worktree"' EXIT &&
	validate_series
fi
</file>

<file path="huflit-test.git/hooks/update.sample">
#!/bin/sh
#
# An example hook script to block unannotated tags from entering.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# To enable this hook, rename this file to "update".
#
# Config
# ------
# hooks.allowunannotated
#   This boolean sets whether unannotated tags will be allowed into the
#   repository.  By default they won't be.
# hooks.allowdeletetag
#   This boolean sets whether deleting tags will be allowed in the
#   repository.  By default they won't be.
# hooks.allowmodifytag
#   This boolean sets whether a tag may be modified after creation. By default
#   it won't be.
# hooks.allowdeletebranch
#   This boolean sets whether deleting branches will be allowed in the
#   repository.  By default they won't be.
# hooks.denycreatebranch
#   This boolean sets whether remotely creating branches will be denied
#   in the repository.  By default this is allowed.
#

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
	echo "Don't run this script from the command line." >&2
	echo " (if you want, you could supply GIT_DIR then run" >&2
	echo "  $0 <ref> <oldrev> <newrev>)" >&2
	exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
	echo "usage: $0 <ref> <oldrev> <newrev>" >&2
	exit 1
fi

# --- Config
allowunannotated=$(git config --type=bool hooks.allowunannotated)
allowdeletebranch=$(git config --type=bool hooks.allowdeletebranch)
denycreatebranch=$(git config --type=bool hooks.denycreatebranch)
allowdeletetag=$(git config --type=bool hooks.allowdeletetag)
allowmodifytag=$(git config --type=bool hooks.allowmodifytag)

# check for no description
projectdesc=$(sed -e '1q' "$GIT_DIR/description")
case "$projectdesc" in
"Unnamed repository"* | "")
	echo "*** Project description file hasn't been set" >&2
	exit 1
	;;
esac

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')
if [ "$newrev" = "$zero" ]; then
	newrev_type=delete
else
	newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
	refs/tags/*,commit)
		# un-annotated tag
		short_refname=${refname##refs/tags/}
		if [ "$allowunannotated" != "true" ]; then
			echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
			echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
			exit 1
		fi
		;;
	refs/tags/*,delete)
		# delete tag
		if [ "$allowdeletetag" != "true" ]; then
			echo "*** Deleting a tag is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/tags/*,tag)
		# annotated tag
		if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
		then
			echo "*** Tag '$refname' already exists." >&2
			echo "*** Modifying a tag is not allowed in this repository." >&2
			exit 1
		fi
		;;
	refs/heads/*,commit)
		# branch
		if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
			echo "*** Creating a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/heads/*,delete)
		# delete branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/remotes/*,commit)
		# tracking branch
		;;
	refs/remotes/*,delete)
		# delete tracking branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a tracking branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	*)
		# Anything else (is there anything else?)
		echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
		exit 1
		;;
esac

# --- Finished
exit 0
</file>

<file path="huflit-test.git/info/exclude">
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~
</file>

<file path="huflit-test.git/packed-refs">
# pack-refs with: peeled fully-peeled sorted 
661cb70a0ab75d3f66e9f7a2a858c975730667f0 refs/heads/main
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KỲ THI NĂNG LỰC NGOẠI NGỮ NỘI BỘ HUFLIT</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
</file>

<file path="postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="public/index.html">
<script
src="https://code.responsivevoice.org/responsivevoice.js?key=arMTNtOF"></script>
</file>

<file path="public/vite.svg">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="2048px" height="2048px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
<g><path style="opacity:0.789" fill="#284b97" d="M 2047.5,1003.5 C 2047.5,1016.83 2047.5,1030.17 2047.5,1043.5C 2040.48,1146.07 2006.65,1238.74 1946,1321.5C 1904.28,1378.22 1855.45,1428.05 1799.5,1471C 1708.4,1539.9 1608.4,1593.23 1499.5,1631C 1311.58,1694.78 1118.58,1719.78 920.5,1706C 763.761,1696.15 613.094,1660.81 468.5,1600C 361.551,1554.74 265.885,1492.74 181.5,1414C 125.51,1360.02 80.3436,1298.19 46,1228.5C 18.711,1169.68 3.21095,1108.01 -0.5,1043.5C -0.5,1030.17 -0.5,1016.83 -0.5,1003.5C 6.52052,900.929 40.3539,808.262 101,725.5C 142.716,668.783 191.549,618.95 247.5,576C 338.604,507.099 438.604,453.766 547.5,416C 735.422,352.218 928.422,327.218 1126.5,341C 1283.24,350.853 1433.91,386.186 1578.5,447C 1685.48,492.275 1781.15,554.275 1865.5,633C 1921.49,686.981 1966.66,748.814 2001,818.5C 2028.29,877.323 2043.79,938.99 2047.5,1003.5 Z"/></g>
<g><path style="opacity:1" fill="#fbda01" d="M 960.5,343.5 C 1115.93,337.609 1268.6,355.109 1418.5,396C 1530.1,427.142 1634.76,473.475 1732.5,535C 1804.24,580.711 1867.4,636.545 1922,702.5C 1963.74,753.79 1995.58,810.957 2017.5,874C 2056.03,994.215 2048.86,1111.72 1996,1226.5C 1960.11,1299.42 1912.27,1363.58 1852.5,1419C 1767.32,1495.7 1671.32,1556.04 1564.5,1600C 1410.67,1662.42 1250.67,1696.76 1084.5,1703C 889.012,1711.73 699.679,1682.07 516.5,1614C 411.204,1574.18 315.204,1519.18 228.5,1449C 168.538,1399.06 118.038,1341.23 77,1275.5C 6.32538,1157.11 -12.008,1031.11 22,897.5C 42.4772,829.203 74.4772,767.203 118,711.5C 177.746,637.45 247.912,575.617 328.5,526C 447.724,453.914 575.724,403.581 712.5,375C 794.46,357.755 877.127,347.255 960.5,343.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1077.5,436.5 C 1077.5,437.5 1077.5,438.5 1077.5,439.5C 1072.83,439.5 1068.17,439.5 1063.5,439.5C 1062.15,433.98 1058.82,430.147 1053.5,428C 1032.61,424.036 1021.94,432.869 1021.5,454.5C 1023.16,479.31 1035.49,487.477 1058.5,479C 1062.55,475.027 1064.55,470.194 1064.5,464.5C 1058.5,464.5 1052.5,464.5 1046.5,464.5C 1046.5,460.833 1046.5,457.167 1046.5,453.5C 1057.17,453.5 1067.83,453.5 1078.5,453.5C 1078.5,457.5 1078.5,461.5 1078.5,465.5C 1077.25,480.851 1069.25,490.684 1054.5,495C 1023.97,498.476 1008.31,484.809 1007.5,454C 1006.95,435.586 1014.95,422.586 1031.5,415C 1047.74,410.53 1061.57,414.363 1073,426.5C 1075.32,429.48 1076.82,432.813 1077.5,436.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 982.5,414.5 C 984.833,414.5 987.167,414.5 989.5,414.5C 990.533,441.498 991.533,468.498 992.5,495.5C 988.154,495.666 983.821,495.499 979.5,495C 966,477.5 952.5,460 939,442.5C 939.222,456.492 939.722,470.492 940.5,484.5C 940.5,488.833 940.5,493.167 940.5,497.5C 937.287,497.19 934.287,497.523 931.5,498.5C 929.833,498.5 928.167,498.5 926.5,498.5C 925.498,471.476 924.165,444.476 922.5,417.5C 927.214,417.173 931.88,417.507 936.5,418.5C 949.751,435.35 962.751,452.35 975.5,469.5C 975.56,470.043 975.893,470.376 976.5,470.5C 977.808,466.685 977.808,463.019 976.5,459.5C 975.977,447.506 975.643,435.506 975.5,423.5C 975.5,420.833 975.5,418.167 975.5,415.5C 978.059,415.802 980.393,415.468 982.5,414.5 Z"/></g>
<g><path style="opacity:1" fill="#30306d" d="M 1120.5,416.5 C 1144.93,413.108 1160.43,423.108 1167,446.5C 1168.53,459.111 1166.53,471.111 1161,482.5C 1150.55,496.54 1136.72,501.706 1119.5,498C 1104.83,492.997 1096.33,482.83 1094,467.5C 1090.65,449.894 1095.48,435.061 1108.5,423C 1112.43,420.536 1116.43,418.369 1120.5,416.5 Z"/></g>
<g><path style="opacity:1" fill="#605754" d="M 982.5,414.5 C 980.393,415.468 978.059,415.802 975.5,415.5C 975.5,418.167 975.5,420.833 975.5,423.5C 974.523,420.713 974.19,417.713 974.5,414.5C 977.167,414.5 979.833,414.5 982.5,414.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 874.5,476.5 C 877.082,476.025 879.082,476.692 880.5,478.5C 878.229,494.273 869.229,503.773 853.5,507C 827.888,509.593 813.055,498.093 809,472.5C 805.085,451.529 812.585,436.363 831.5,427C 848.003,421.787 861.836,425.621 873,438.5C 875.072,441.971 876.572,445.638 877.5,449.5C 872.463,450.259 867.463,450.259 862.5,449.5C 860.632,444.132 856.965,440.632 851.5,439C 830.269,437.234 820.769,447.067 823,468.5C 823.751,478.843 828.251,487.01 836.5,493C 852.019,497.907 862.353,492.74 867.5,477.5C 869.747,476.626 872.08,476.292 874.5,476.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1206.5,424.5 C 1212.89,424.646 1219.23,425.313 1225.5,426.5C 1231.5,454.167 1237.5,481.833 1243.5,509.5C 1238.23,509.362 1233.06,508.695 1228,507.5C 1227,500.512 1225.5,493.679 1223.5,487C 1213.2,485.689 1202.87,484.855 1192.5,484.5C 1190.53,490.614 1187.86,496.448 1184.5,502C 1179.48,502.074 1174.48,501.574 1169.5,500.5C 1182.22,475.315 1194.56,449.982 1206.5,424.5 Z"/></g>
<g><path style="opacity:1" fill="#f9d706" d="M 1123.5,429.5 C 1137.42,427.205 1146.92,432.538 1152,445.5C 1153.3,455.431 1152.3,465.097 1149,474.5C 1140.58,487.288 1129.74,489.788 1116.5,482C 1105.86,468.379 1104.7,453.879 1113,438.5C 1116.1,434.886 1119.6,431.886 1123.5,429.5 Z"/></g>
<g><path style="opacity:1" fill="#2d2f6e" d="M 1269.5,511.5 C 1265.14,512.189 1260.8,511.689 1256.5,510C 1260.61,488.258 1264.44,466.425 1268,444.5C 1268.8,441.961 1268.63,439.628 1267.5,437.5C 1267.5,435.833 1267.5,434.167 1267.5,432.5C 1272.11,433.554 1276.77,434.221 1281.5,434.5C 1277.83,460.214 1273.83,485.881 1269.5,511.5 Z"/></g>
<g><path style="opacity:1" fill="#6a614d" d="M 1077.5,436.5 C 1078.43,437.568 1078.77,438.901 1078.5,440.5C 1073.31,440.821 1068.31,440.487 1063.5,439.5C 1068.17,439.5 1072.83,439.5 1077.5,439.5C 1077.5,438.5 1077.5,437.5 1077.5,436.5 Z"/></g>
<g><path style="opacity:1" fill="#30316d" d="M 747.5,439.5 C 778.365,437.691 794.365,452.358 795.5,483.5C 792.969,512.131 777.302,524.631 748.5,521C 734.189,515.266 725.355,504.766 722,489.5C 716.548,465.4 725.048,448.733 747.5,439.5 Z"/></g>
<g><path style="opacity:1" fill="#f2d10f" d="M 1220.5,472.5 C 1219.45,474.256 1217.78,474.923 1215.5,474.5C 1210.17,474.167 1204.83,473.833 1199.5,473.5C 1203.41,462.353 1208.41,451.686 1214.5,441.5C 1217.01,451.74 1219.01,462.073 1220.5,472.5 Z"/></g>
<g><path style="opacity:1" fill="#2e306e" d="M 1342.5,446.5 C 1349.62,463.686 1356.45,481.019 1363,498.5C 1363.55,500.76 1364.72,502.426 1366.5,503.5C 1367.79,505.255 1368.79,507.255 1369.5,509.5C 1374.61,492.044 1378.95,474.377 1382.5,456.5C 1387.24,457.185 1391.91,458.185 1396.5,459.5C 1390.71,485.547 1384.71,511.547 1378.5,537.5C 1374.14,536.993 1369.81,536.327 1365.5,535.5C 1357.89,514.279 1349.72,493.279 1341,472.5C 1336.36,490.068 1332.19,507.735 1328.5,525.5C 1324.09,525.147 1319.75,524.314 1315.5,523C 1314.92,522.107 1314.59,521.107 1314.5,520C 1319.85,495.386 1325.69,470.886 1332,446.5C 1332.31,445.692 1332.81,445.025 1333.5,444.5C 1336.48,445.275 1339.48,445.941 1342.5,446.5 Z"/></g>
<g><path style="opacity:1" fill="#f9d804" d="M 749.5,452.5 C 766.065,450.235 776.232,457.235 780,473.5C 780.667,480.167 780.667,486.833 780,493.5C 774.954,505.866 765.788,510.699 752.5,508C 744.413,504.352 739.246,498.185 737,489.5C 735.076,481.144 735.076,472.811 737,464.5C 739.744,458.921 743.911,454.921 749.5,452.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 692.5,452.5 C 695.388,452.22 696.888,453.553 697,456.5C 702.882,480.589 709.048,504.589 715.5,528.5C 715.182,529.647 714.516,530.481 713.5,531C 709.486,531.837 705.486,532.671 701.5,533.5C 699.531,522.79 696.864,512.29 693.5,502C 690.134,501.67 686.801,502.003 683.5,503C 674.798,505.175 666.132,507.342 657.5,509.5C 659.383,520.7 662.05,531.7 665.5,542.5C 660.967,544.805 656.301,545.805 651.5,545.5C 644.916,520.333 638.25,495.167 631.5,470C 631.833,469.5 632.167,469 632.5,468.5C 636.775,466.67 641.109,466.003 645.5,466.5C 647.88,477.357 650.88,488.023 654.5,498.5C 665.96,494.718 677.627,491.718 689.5,489.5C 687.937,478.247 685.27,467.247 681.5,456.5C 685.142,454.915 688.808,453.581 692.5,452.5 Z"/></g>
<g><path style="opacity:1" fill="#3d3868" d="M 1342.5,446.5 C 1344.89,447.219 1346.39,448.885 1347,451.5C 1353.81,468.753 1360.31,486.086 1366.5,503.5C 1364.72,502.426 1363.55,500.76 1363,498.5C 1356.45,481.019 1349.62,463.686 1342.5,446.5 Z"/></g>
<g><path style="opacity:1" fill="#827541" d="M 1046.5,453.5 C 1057.32,452.505 1068.32,452.172 1079.5,452.5C 1079.82,457.032 1079.48,461.366 1078.5,465.5C 1078.5,461.5 1078.5,457.5 1078.5,453.5C 1067.83,453.5 1057.17,453.5 1046.5,453.5 Z"/></g>
<g><path style="opacity:1" fill="#7c7045" d="M 976.5,459.5 C 977.808,463.019 977.808,466.685 976.5,470.5C 975.893,470.376 975.56,470.043 975.5,469.5C 976.479,466.375 976.813,463.042 976.5,459.5 Z"/></g>
<g><path style="opacity:1" fill="#3e3868" d="M 1267.5,437.5 C 1268.63,439.628 1268.8,441.961 1268,444.5C 1264.44,466.425 1260.61,488.258 1256.5,510C 1260.8,511.689 1265.14,512.189 1269.5,511.5C 1269.5,512.5 1269.5,513.5 1269.5,514.5C 1264.48,513.942 1259.48,513.275 1254.5,512.5C 1258.53,487.32 1262.86,462.32 1267.5,437.5 Z"/></g>
<g><path style="opacity:1" fill="#958439" d="M 1220.5,472.5 C 1221.4,473.209 1221.74,474.209 1221.5,475.5C 1219.26,475.795 1217.26,475.461 1215.5,474.5C 1217.78,474.923 1219.45,474.256 1220.5,472.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1475.5,500.5 C 1476.05,504.012 1475.39,507.012 1473.5,509.5C 1469.79,508.708 1466.12,507.708 1462.5,506.5C 1460.93,495.267 1454.6,488.6 1443.5,486.5C 1440.04,485.135 1436.71,485.469 1433.5,487.5C 1426.12,491.049 1420.96,496.715 1418,504.5C 1415.1,512.716 1414.76,521.049 1417,529.5C 1424.79,542.763 1435.63,545.929 1449.5,539C 1451.8,536.901 1453.46,534.401 1454.5,531.5C 1455.25,530.469 1455.92,529.302 1456.5,528C 1451.06,526.899 1445.89,525.066 1441,522.5C 1440.13,517.876 1441.96,515.543 1446.5,515.5C 1454.89,517.63 1463.22,519.964 1471.5,522.5C 1468.23,546.617 1454.56,557.45 1430.5,555C 1408.38,548.936 1398.54,534.436 1401,511.5C 1404.02,491.835 1414.85,479.001 1433.5,473C 1449.65,471.659 1462.48,477.492 1472,490.5C 1473.87,493.605 1475.03,496.938 1475.5,500.5 Z"/></g>
<g><path style="opacity:1" fill="#91823b" d="M 874.5,476.5 C 876.607,475.532 878.941,475.198 881.5,475.5C 881.737,476.791 881.404,477.791 880.5,478.5C 879.082,476.692 877.082,476.025 874.5,476.5 Z"/></g>
<g><path style="opacity:1" fill="#31316c" d="M 1525.5,480.5 C 1529.79,480.035 1533.79,480.868 1537.5,483C 1539.82,486.323 1542.49,489.323 1545.5,492C 1548.79,492.746 1551.29,491.58 1553,488.5C 1560.62,490.352 1561.45,493.852 1555.5,499C 1549.98,502.443 1544.64,502.276 1539.5,498.5C 1537.52,495.391 1535.19,492.557 1532.5,490C 1528.79,488.776 1526.12,489.942 1524.5,493.5C 1521.68,492.905 1519.35,491.572 1517.5,489.5C 1519.5,485.834 1522.17,482.834 1525.5,480.5 Z"/></g>
<g><path style="opacity:1" fill="#30316d" d="M 580.5,484.5 C 581.496,484.414 582.329,484.748 583,485.5C 591.5,510.5 600,535.5 608.5,560.5C 604.094,561.969 599.761,563.636 595.5,565.5C 586.448,540.678 577.781,515.678 569.5,490.5C 569.833,489.833 570.167,489.167 570.5,488.5C 574.013,487.336 577.346,486.002 580.5,484.5 Z"/></g>
<g><path style="opacity:1" fill="#a69239" d="M 1443.5,486.5 C 1440.14,486.616 1436.81,486.949 1433.5,487.5C 1436.71,485.469 1440.04,485.135 1443.5,486.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1559.5,527.5 C 1558.96,527.56 1558.62,527.893 1558.5,528.5C 1560.3,529.788 1561.97,529.788 1563.5,528.5C 1565.37,528.141 1566.87,527.141 1568,525.5C 1569.67,522.833 1571.33,520.167 1573,517.5C 1575.59,519.196 1578.42,520.196 1581.5,520.5C 1577.84,534.183 1568.84,540.183 1554.5,538.5C 1549.94,549.949 1545.11,561.282 1540,572.5C 1529.28,584.624 1516.45,587.457 1501.5,581C 1484.2,573.568 1477.7,560.734 1482,542.5C 1489,526.33 1495.5,509.996 1501.5,493.5C 1506.35,494.26 1511.01,495.594 1515.5,497.5C 1509.5,513.996 1503,530.33 1496,546.5C 1493.57,560.564 1499.4,568.564 1513.5,570.5C 1518.64,570.509 1523.14,568.842 1527,565.5C 1534.9,548.189 1542.4,530.689 1549.5,513C 1553.84,513.742 1558.01,515.242 1562,517.5C 1561.52,520.839 1560.68,524.173 1559.5,527.5 Z"/></g>
<g><path style="opacity:1" fill="#90813c" d="M 940.5,484.5 C 941.486,488.97 941.819,493.637 941.5,498.5C 938.167,498.5 934.833,498.5 931.5,498.5C 934.287,497.523 937.287,497.19 940.5,497.5C 940.5,493.167 940.5,488.833 940.5,484.5 Z"/></g>
<g><path style="opacity:1" fill="#a59231" d="M 1475.5,500.5 C 1476.48,503.625 1476.81,506.958 1476.5,510.5C 1475.21,510.737 1474.21,510.404 1473.5,509.5C 1475.39,507.012 1476.05,504.012 1475.5,500.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 528.5,583.5 C 528.721,586.279 528.388,588.946 527.5,591.5C 524.673,592.108 522.007,593.108 519.5,594.5C 517.883,595.038 516.216,595.371 514.5,595.5C 514.823,588.978 514.49,582.645 513.5,576.5C 512.825,554.495 512.325,532.495 512,510.5C 517.31,507.841 522.81,506.008 528.5,505C 547.02,526.019 565.353,547.186 583.5,568.5C 579.142,570.505 574.809,572.505 570.5,574.5C 565.5,569.167 560.5,563.833 555.5,558.5C 546.793,561.902 538.127,565.402 529.5,569C 528.531,573.737 528.197,578.57 528.5,583.5 Z"/></g>
<g><path style="opacity:1" fill="#30316d" d="M 1201.5,511.5 C 1211.62,511.431 1214.62,515.931 1210.5,525C 1201.48,528.949 1196.98,526.116 1197,516.5C 1198.02,514.313 1199.52,512.646 1201.5,511.5 Z"/></g>
<g><path style="opacity:1" fill="#453d65" d="M 1446.5,515.5 C 1441.96,515.543 1440.13,517.876 1441,522.5C 1445.89,525.066 1451.06,526.899 1456.5,528C 1455.92,529.302 1455.25,530.469 1454.5,531.5C 1454.59,530.504 1454.25,529.671 1453.5,529C 1448.74,527.801 1444.07,526.301 1439.5,524.5C 1437.98,520.269 1438.81,516.603 1442,513.5C 1443.73,513.899 1445.23,514.566 1446.5,515.5 Z"/></g>
<g><path style="opacity:1" fill="#f2d20e" d="M 528.5,556.5 C 527.833,554.167 527.167,551.833 526.5,549.5C 525.735,540.812 525.735,532.146 526.5,523.5C 533.846,531.516 540.846,539.849 547.5,548.5C 541.34,551.554 535.006,554.221 528.5,556.5 Z"/></g>
<g><path style="opacity:1" fill="#30316d" d="M 764.5,526.5 C 772.712,525.226 776.546,528.559 776,536.5C 773.459,541.069 769.625,542.569 764.5,541C 759.214,536.169 759.214,531.335 764.5,526.5 Z"/></g>
<g><path style="opacity:1" fill="#87793f" d="M 1559.5,527.5 C 1560.57,528.434 1561.9,528.768 1563.5,528.5C 1561.97,529.788 1560.3,529.788 1558.5,528.5C 1558.62,527.893 1558.96,527.56 1559.5,527.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 449.5,539.5 C 469.777,538.612 483.61,547.612 491,566.5C 498.274,584.232 494.774,599.398 480.5,612C 469.99,617.755 459.323,623.255 448.5,628.5C 442.34,618.185 436.674,607.518 431.5,596.5C 431.167,596.167 430.833,595.833 430.5,595.5C 427.276,596.695 424.109,598.029 421,599.5C 419.14,597.625 417.64,595.458 416.5,593C 420.04,591.069 423.374,588.902 426.5,586.5C 422.106,576.711 417.439,567.045 412.5,557.5C 424.242,550.128 436.575,544.128 449.5,539.5 Z"/></g>
<g><path style="opacity:1" fill="#f8d607" d="M 448.5,552.5 C 460.367,551.516 469.201,556.183 475,566.5C 481.364,576.527 482.031,586.86 477,597.5C 475.167,599.333 473.333,601.167 471.5,603C 466.04,605.564 460.706,608.397 455.5,611.5C 451.456,604.377 447.789,597.044 444.5,589.5C 447.493,587.336 450.493,585.169 453.5,583C 452.836,580.146 451.336,577.979 449,576.5C 446.106,577.697 443.273,579.03 440.5,580.5C 437.04,574.413 433.706,568.246 430.5,562C 436.435,558.535 442.435,555.368 448.5,552.5 Z"/></g>
<g><path style="opacity:1" fill="#7d7044" d="M 526.5,549.5 C 527.167,551.833 527.833,554.167 528.5,556.5C 528.44,557.043 528.107,557.376 527.5,557.5C 526.52,554.914 526.187,552.247 526.5,549.5 Z"/></g>
<g><path style="opacity:1" fill="#b59f30" d="M 1174.5,560.5 C 1179.73,560.444 1184.73,561.111 1189.5,562.5C 1184.27,562.556 1179.27,561.889 1174.5,560.5 Z"/></g>
<g><path style="opacity:1" fill="#30316d" d="M 1606.5,577.5 C 1617.76,582.257 1628.42,588.09 1638.5,595C 1637.7,599.403 1635.37,602.07 1631.5,603C 1621.92,598.402 1612.58,593.402 1603.5,588C 1602.98,587.439 1602.64,586.772 1602.5,586C 1604.24,583.357 1605.57,580.523 1606.5,577.5 Z"/></g>
<g><path style="opacity:1" fill="#a49131" d="M 528.5,583.5 C 529.156,584.622 529.489,585.955 529.5,587.5C 529.415,589.333 528.748,590.666 527.5,591.5C 528.388,588.946 528.721,586.279 528.5,583.5 Z"/></g>
<g><path style="opacity:1" fill="#33326c" d="M 552.5,587.5 C 561.61,587.772 564.443,592.105 561,600.5C 553.662,605.61 548.829,603.944 546.5,595.5C 547.357,591.977 549.357,589.31 552.5,587.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1697.5,589.5 C 1715.46,601.153 1733.12,613.32 1750.5,626C 1748.53,629.433 1746.2,632.6 1743.5,635.5C 1736.83,630.833 1730.17,626.167 1723.5,621.5C 1710.15,640.204 1696.82,658.871 1683.5,677.5C 1679.69,674.858 1676.02,672.025 1672.5,669C 1685.57,650.931 1698.24,632.598 1710.5,614C 1710.24,612.739 1709.57,611.739 1708.5,611C 1702.91,607.29 1697.41,603.457 1692,599.5C 1691.68,598.092 1692.02,596.759 1693,595.5C 1694.75,593.649 1696.25,591.649 1697.5,589.5 Z"/></g>
<g><path style="opacity:1" fill="#bca52a" d="M 513.5,576.5 C 514.49,582.645 514.823,588.978 514.5,595.5C 516.216,595.371 517.883,595.038 519.5,594.5C 518.01,596.28 516.01,596.946 513.5,596.5C 513.5,589.833 513.5,583.167 513.5,576.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 352.5,593.5 C 363.229,593.075 372.562,596.409 380.5,603.5C 376.772,606.559 372.772,609.226 368.5,611.5C 355.444,604.122 344.944,606.788 337,619.5C 333.787,639.236 341.287,653.403 359.5,662C 368.988,662.948 376.822,659.781 383,652.5C 387.373,645.72 387.539,638.886 383.5,632C 377.89,634.387 372.557,637.554 367.5,641.5C 365.5,638.5 363.5,635.5 361.5,632.5C 369.672,626.505 378.005,620.671 386.5,615C 387.996,614.493 389.163,614.993 390,616.5C 401.856,631.379 402.523,646.712 392,662.5C 375.622,677.991 358.122,679.491 339.5,667C 322.312,651.418 317.812,632.918 326,611.5C 332.602,602.123 341.435,596.123 352.5,593.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 289.5,634.5 C 307.624,654.468 325.29,674.968 342.5,696C 338.989,698.847 335.489,701.68 332,704.5C 311.305,698.993 290.639,693.326 270,687.5C 269.5,687.833 269,688.167 268.5,688.5C 279.833,702.167 291.167,715.833 302.5,729.5C 299.172,732.658 295.672,735.658 292,738.5C 274.358,718.538 257.192,698.204 240.5,677.5C 243.024,673.467 246.524,670.8 251,669.5C 271.865,675.066 292.698,680.733 313.5,686.5C 313.833,686.167 314.167,685.833 314.5,685.5C 302.833,671.5 291.167,657.5 279.5,643.5C 282.906,640.483 286.24,637.483 289.5,634.5 Z"/></g>
<g><path style="opacity:1" fill="#30316d" d="M 1763.5,637.5 C 1767.21,639.785 1770.71,642.452 1774,645.5C 1774.67,646.5 1774.67,647.5 1774,648.5C 1757.62,667.877 1741.62,687.543 1726,707.5C 1725.28,708.451 1724.45,708.617 1723.5,708C 1720.83,706 1718.17,704 1715.5,702C 1713.99,701.163 1713.49,699.996 1714,698.5C 1730.99,678.503 1747.49,658.169 1763.5,637.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1791.5,660.5 C 1796.25,662.916 1799.58,666.583 1801.5,671.5C 1797.67,692.97 1794.34,714.303 1791.5,735.5C 1804.13,722.374 1816.96,709.374 1830,696.5C 1833.35,699.682 1836.52,703.015 1839.5,706.5C 1821.48,726.022 1802.98,745.022 1784,763.5C 1780.17,761 1777,757.833 1774.5,754C 1778.67,732.504 1782,711.004 1784.5,689.5C 1772.37,702.126 1760.04,714.626 1747.5,727C 1746.83,727.667 1746.17,727.667 1745.5,727C 1742.5,724 1739.5,721 1736.5,718C 1755.04,698.964 1773.37,679.798 1791.5,660.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 232.5,707.5 C 231.115,708.947 231.448,709.947 233.5,710.5C 248.303,716.134 259.137,726.134 266,740.5C 270.497,762.339 262.664,777.839 242.5,787C 218.854,790.593 201.354,781.76 190,760.5C 182.602,737.123 190.102,720.289 212.5,710C 216.095,709.416 219.595,708.582 223,707.5C 223.826,701.483 221.659,696.816 216.5,693.5C 218.192,691.641 219.692,689.641 221,687.5C 222.049,686.483 223.216,686.316 224.5,687C 230.928,692.357 233.594,699.19 232.5,707.5 Z"/></g>
<g><path style="opacity:1" fill="#8f7f3d" d="M 232.5,707.5 C 232.557,708.609 232.89,709.609 233.5,710.5C 231.448,709.947 231.115,708.947 232.5,707.5 Z"/></g>
<g><path style="opacity:1" fill="#31316d" d="M 174.5,707.5 C 181.112,708.734 187.445,710.734 193.5,713.5C 191.322,717.026 188.322,719.359 184.5,720.5C 178.4,719.843 172.4,718.676 166.5,717C 169.754,714.253 172.42,711.086 174.5,707.5 Z"/></g>
<g><path style="opacity:1" fill="#f9d805" d="M 216.5,722.5 C 233.492,723.084 245.658,731.084 253,746.5C 255.167,767 246,776.167 225.5,774C 213.974,769.141 205.808,760.974 201,749.5C 199.243,736.443 204.41,727.443 216.5,722.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1875.5,749.5 C 1879.3,752.538 1882.3,756.371 1884.5,761C 1876.21,767.483 1867.55,773.483 1858.5,779C 1857.98,779.561 1857.64,780.228 1857.5,781C 1863.96,791.409 1870.79,801.575 1878,811.5C 1887.51,805.414 1896.84,799.081 1906,792.5C 1908.63,796.265 1911.13,800.098 1913.5,804C 1892.11,819.876 1870.11,835.043 1847.5,849.5C 1844.64,845.805 1841.97,841.971 1839.5,838C 1848.7,831.305 1858.03,824.805 1867.5,818.5C 1860.75,807.994 1853.75,797.66 1846.5,787.5C 1837.17,793.833 1827.83,800.167 1818.5,806.5C 1815.62,802.794 1812.96,798.961 1810.5,795C 1832.2,779.821 1853.87,764.655 1875.5,749.5 Z"/></g>
<g><path style="opacity:1" fill="#30306d" d="M 158.5,761.5 C 164.43,764.262 168.93,768.595 172,774.5C 172.539,779.625 172.205,784.625 171,789.5C 180.581,796.042 190.414,802.209 200.5,808C 211.513,817.047 214.347,828.214 209,841.5C 202.035,860.057 188.868,867.89 169.5,865C 152,855.42 135,845.087 118.5,834C 120.81,829.867 123.476,826.034 126.5,822.5C 142.167,832 157.833,841.5 173.5,851C 187.839,852.508 195.839,846.008 197.5,831.5C 197.033,825.738 194.367,821.238 189.5,818C 174.75,809.543 160.25,800.71 146,791.5C 147.038,786.756 149.205,782.423 152.5,778.5C 155.571,780.898 158.905,782.898 162.5,784.5C 163.641,782.579 163.808,780.579 163,778.5C 160.264,774.943 157.431,771.61 154.5,768.5C 155.576,766.014 156.909,763.681 158.5,761.5 Z"/></g>
<g><path style="opacity:1" fill="#30306d" d="M 1902.5,836.5 C 1925.44,835.612 1939.6,846.279 1945,868.5C 1946.3,885.077 1939.8,897.577 1925.5,906C 1914.66,912.501 1903,914.835 1890.5,913C 1875.48,908.305 1866.31,898.138 1863,882.5C 1861.29,866.078 1867.46,853.578 1881.5,845C 1888.19,841.057 1895.19,838.224 1902.5,836.5 Z"/></g>
<g><path style="opacity:1" fill="#f9d805" d="M 1901.5,851.5 C 1922.52,848.691 1932.35,857.691 1931,878.5C 1928.82,884.038 1925.32,888.538 1920.5,892C 1911.29,897.85 1901.29,900.183 1890.5,899C 1879.59,894.015 1874.75,885.515 1876,873.5C 1877.58,867.914 1880.75,863.414 1885.5,860C 1890.64,856.685 1895.98,853.851 1901.5,851.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 160.5,937.5 C 161.953,936.175 161.619,935.342 159.5,935C 139.425,928.197 119.425,921.197 99.5,914C 97.5273,913.505 95.5273,913.338 93.5,913.5C 91.0523,913.915 89.7189,912.915 89.5,910.5C 93.2631,897.704 98.0965,885.371 104,873.5C 113.878,862.323 125.378,860.49 138.5,868C 145.304,872.303 148.97,878.47 149.5,886.5C 161.442,884.293 173.442,882.793 185.5,882C 183.137,886.59 181.47,891.423 180.5,896.5C 169.48,897.781 158.48,899.281 147.5,901C 144.678,905.77 143.344,910.77 143.5,916C 151.726,919.279 160.059,922.279 168.5,925C 168.957,925.414 169.291,925.914 169.5,926.5C 168.167,930.167 166.833,933.833 165.5,937.5C 163.833,938.666 162.166,938.666 160.5,937.5 Z"/></g>
<g><path style="opacity:1" fill="#f6d508" d="M 118.5,878.5 C 131.229,877.398 137.063,883.064 136,895.5C 133.983,900.713 132.483,906.046 131.5,911.5C 122.83,908.999 114.33,905.999 106,902.5C 106.864,892.713 111.031,884.713 118.5,878.5 Z"/></g>
<g><path style="opacity:1" fill="#31316d" d="M 1850.5,888.5 C 1860.41,889.221 1863.41,894.055 1859.5,903C 1849.32,906.66 1845.15,903.16 1847,892.5C 1848.38,891.295 1849.54,889.962 1850.5,888.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1923.5,922.5 C 1940.23,919.905 1954.06,924.905 1965,937.5C 1975.34,955.465 1973.17,971.632 1958.5,986C 1955.78,988.027 1952.78,989.527 1949.5,990.5C 1948.36,985.995 1947.36,981.495 1946.5,977C 1961.31,966.192 1962.31,954.192 1949.5,941C 1932.96,933.344 1918.12,935.844 1905,948.5C 1898.98,960.102 1900.81,970.269 1910.5,979C 1913.54,981.006 1916.87,981.84 1920.5,981.5C 1921.04,986.186 1921.7,990.853 1922.5,995.5C 1907.33,995.655 1896.83,988.655 1891,974.5C 1884.29,946.255 1895.13,928.922 1923.5,922.5 Z"/></g>
<g><path style="opacity:1" fill="#403a67" d="M 93.5,913.5 C 95.5273,913.338 97.5273,913.505 99.5,914C 119.425,921.197 139.425,928.197 159.5,935C 161.619,935.342 161.953,936.175 160.5,937.5C 137.94,929.871 115.607,921.871 93.5,913.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 82.5,934.5 C 86.4809,935.021 90.4809,935.354 94.5,935.5C 93.6641,944.187 92.6641,952.854 91.5,961.5C 114.269,964.181 136.936,967.515 159.5,971.5C 158.462,975.769 157.795,980.102 157.5,984.5C 135.661,981.582 113.827,978.582 92,975.5C 90.6739,975.755 89.6739,976.422 89,977.5C 87.8371,984.803 87.0037,992.136 86.5,999.5C 83.1501,999.665 79.8168,999.498 76.5,999C 75.4216,998.326 74.7549,997.326 74.5,996C 77.1222,975.479 79.7889,954.979 82.5,934.5 Z"/></g>
<g><path style="opacity:1" fill="#bfa72d" d="M 220.5,1051.5 C 221.972,1055.92 222.638,1060.59 222.5,1065.5C 221.028,1061.08 220.362,1056.41 220.5,1051.5 Z"/></g>
<g><path style="opacity:1" fill="#bfa72d" d="M 1826.5,1051.5 C 1826.64,1056.41 1825.97,1061.08 1824.5,1065.5C 1824.36,1060.59 1825.03,1055.92 1826.5,1051.5 Z"/></g>
<g><path style="opacity:1" fill="#37346a" d="M 1174.5,560.5 C 1179.27,561.889 1184.27,562.556 1189.5,562.5C 1299.91,575.852 1406.24,604.352 1508.5,648C 1581.05,679.745 1646.72,721.745 1705.5,774C 1752.53,817.027 1787.7,868.193 1811,927.5C 1825.05,967.707 1830.22,1009.04 1826.5,1051.5C 1825.03,1055.92 1824.36,1060.59 1824.5,1065.5C 1811.99,1131.19 1783.49,1188.86 1739,1238.5C 1697.38,1283.81 1650.22,1321.98 1597.5,1353C 1511.07,1402.71 1419.07,1438.71 1321.5,1461C 1285.62,1469.08 1249.62,1475.91 1213.5,1481.5C 1208.27,1481.44 1203.27,1482.11 1198.5,1483.5C 1195.39,1483.26 1192.39,1483.6 1189.5,1484.5C 1184.27,1484.44 1179.27,1485.11 1174.5,1486.5C 1006.41,1505.25 840.745,1492.75 677.5,1449C 583.389,1423.43 495.722,1384.1 414.5,1331C 379.025,1306.54 346.192,1278.71 316,1247.5C 280.858,1209.97 254.192,1166.97 236,1118.5C 230.37,1100.98 225.87,1083.31 222.5,1065.5C 222.638,1060.59 221.972,1055.92 220.5,1051.5C 215.712,991.653 227.546,935.32 256,882.5C 279.119,841.688 307.952,805.188 342.5,773C 405.906,716.594 477.24,672.26 556.5,640C 669.067,594.284 786.067,566.617 907.5,557C 996.603,550.263 1085.6,551.429 1174.5,560.5 Z"/></g>
<g><path style="opacity:1" fill="#fad903" d="M 624.5,1328.5 C 625.873,1328.34 627.207,1328.51 628.5,1329C 668.221,1365.01 712.554,1394.34 761.5,1417C 729.594,1423.31 698.261,1431.48 667.5,1441.5C 613.534,1426.13 561.534,1405.96 511.5,1381C 534.726,1365.72 559.393,1353.05 585.5,1343C 598.588,1338.11 611.588,1333.28 624.5,1328.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 1419.5,1326.5 C 1461.64,1338.57 1501.64,1355.57 1539.5,1377.5C 1540.83,1378.17 1540.83,1378.83 1539.5,1379.5C 1486.67,1405.22 1432.01,1426.22 1375.5,1442.5C 1342.18,1432.42 1308.51,1423.75 1274.5,1416.5C 1318.84,1397.51 1360.17,1373.68 1398.5,1345C 1405.99,1339.34 1412.99,1333.17 1419.5,1326.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 838.5,1384.5 C 843.964,1390.46 849.63,1396.3 855.5,1402C 846.536,1403.56 837.536,1404.72 828.5,1405.5C 808.121,1408.67 787.788,1411.84 767.5,1415C 717.932,1392.39 672.932,1363.05 632.5,1327C 669.417,1314.69 707.084,1305.02 745.5,1298C 754.82,1296.22 764.154,1294.89 773.5,1294C 791.143,1327.14 812.81,1357.31 838.5,1384.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 1268.5,1414.5 C 1243.86,1411.04 1219.19,1407.71 1194.5,1404.5C 1194.39,1403.88 1194.06,1403.38 1193.5,1403C 1225.79,1371.04 1252.29,1334.88 1273,1294.5C 1274.23,1293.89 1275.56,1293.56 1277,1293.5C 1323.75,1300.55 1369.58,1311.21 1414.5,1325.5C 1384.73,1351.74 1352.06,1373.91 1316.5,1392C 1300.53,1399.82 1284.53,1407.32 1268.5,1414.5 Z"/></g>
<g><path style="opacity:1" fill="#fcda01" d="M 1072.5,1274.5 C 1138.17,1276.4 1203.51,1282.06 1268.5,1291.5C 1251.64,1327.03 1229.64,1359.03 1202.5,1387.5C 1197.6,1394.25 1191.44,1399.25 1184,1402.5C 1132.35,1396.43 1080.52,1393.1 1028.5,1392.5C 1028.22,1361.17 1027.89,1329.83 1027.5,1298.5C 1027.5,1290.5 1027.5,1282.5 1027.5,1274.5C 1042.5,1274.5 1057.5,1274.5 1072.5,1274.5 Z"/></g>
<g><path style="opacity:1" fill="#fcda01" d="M 970.5,1274.5 C 987.5,1274.5 1004.5,1274.5 1021.5,1274.5C 1021.18,1279.69 1021.51,1284.69 1022.5,1289.5C 1023.14,1323.83 1023.8,1358.17 1024.5,1392.5C 970.315,1392.35 916.315,1395.35 862.5,1401.5C 859.895,1400.23 857.562,1398.56 855.5,1396.5C 824.243,1366.31 798.576,1331.97 778.5,1293.5C 787.523,1290.55 796.856,1288.88 806.5,1288.5C 811.731,1288.56 816.731,1287.89 821.5,1286.5C 826.731,1286.56 831.731,1285.89 836.5,1284.5C 843.279,1283.02 850.279,1282.35 857.5,1282.5C 862.414,1282.64 867.081,1281.97 871.5,1280.5C 877.329,1280.03 882.996,1279.36 888.5,1278.5C 892.167,1278.5 895.833,1278.5 899.5,1278.5C 909.699,1278.57 919.699,1277.9 929.5,1276.5C 943.123,1275.27 956.79,1274.61 970.5,1274.5 Z"/></g>
<g><path style="opacity:1" fill="#36336b" d="M 1059.5,654.5 C 1049.86,655.325 1040.19,655.658 1030.5,655.5C 1029.65,695.163 1028.99,734.83 1028.5,774.5C 1051.83,774.204 1075.17,773.87 1098.5,773.5C 1101.64,774.321 1104.97,774.821 1108.5,775C 1104.61,775.419 1100.94,776.252 1097.5,777.5C 1074.18,778.333 1050.84,778.666 1027.5,778.5C 1027.5,793.833 1027.5,809.167 1027.5,824.5C 1026.17,824.5 1024.83,824.5 1023.5,824.5C 1023.5,809.167 1023.5,793.833 1023.5,778.5C 1012.83,778.5 1002.17,778.5 991.5,778.5C 980.019,777.235 968.352,776.402 956.5,776C 954.833,775.667 953.167,775.333 951.5,775C 954.695,774.819 957.695,774.319 960.5,773.5C 969.167,773.5 977.833,773.5 986.5,773.5C 998.989,774.495 1011.66,774.829 1024.5,774.5C 1024.5,765.833 1024.5,757.167 1024.5,748.5C 1024.7,723.831 1025.04,699.165 1025.5,674.5C 1026.49,668.021 1026.82,661.354 1026.5,654.5C 1013.17,654.5 999.833,654.5 986.5,654.5C 999.983,653.167 1013.82,652.501 1028,652.5C 1041.83,652.667 1055.67,652.833 1069.5,653C 1065.97,653.179 1062.64,653.679 1059.5,654.5 Z"/></g>
<g><path style="opacity:1" fill="#6c624e" d="M 983.5,654.5 C 984.5,654.5 985.5,654.5 986.5,654.5C 999.833,654.5 1013.17,654.5 1026.5,654.5C 1026.82,661.354 1026.49,668.021 1025.5,674.5C 1025.5,668.167 1025.5,661.833 1025.5,655.5C 1011.32,655.829 997.323,655.496 983.5,654.5 Z"/></g>
<g><path style="opacity:1" fill="#fcda00" d="M 991.5,778.5 C 1002.17,778.5 1012.83,778.5 1023.5,778.5C 1023.5,793.833 1023.5,809.167 1023.5,824.5C 1024.83,824.5 1026.17,824.5 1027.5,824.5C 1027.5,809.167 1027.5,793.833 1027.5,778.5C 1050.84,778.666 1074.18,778.333 1097.5,777.5C 1127.88,776.077 1158.21,774.077 1188.5,771.5C 1193.73,771.556 1198.73,770.889 1203.5,769.5C 1210.12,768.397 1216.79,767.73 1223.5,767.5C 1228.73,767.556 1233.73,766.889 1238.5,765.5C 1243.73,765.556 1248.73,764.889 1253.5,763.5C 1259.14,762.19 1264.97,761.19 1271,760.5C 1272.44,760.559 1273.77,760.892 1275,761.5C 1284.85,780.527 1293.02,800.194 1299.5,820.5C 1303.07,820.592 1304.24,818.926 1303,815.5C 1295.7,796.24 1287.87,777.24 1279.5,758.5C 1327.48,751.453 1374.64,740.786 1421,726.5C 1452.99,753.813 1480.66,784.813 1504,819.5C 1506.97,818.01 1507.3,816.01 1505,813.5C 1482.64,781.298 1456.81,751.964 1427.5,725.5C 1461,713.935 1493.67,700.101 1525.5,684C 1532.17,680 1538.83,676 1545.5,672C 1614.76,704.093 1675.93,747.926 1729,803.5C 1761.54,838.752 1786.87,878.752 1805,923.5C 1835.21,1010.47 1827.21,1093.8 1781,1173.5C 1750.59,1222.73 1712.42,1265.23 1666.5,1301C 1628.77,1329.53 1588.77,1354.69 1546.5,1376.5C 1507.92,1354.04 1467.25,1336.21 1424.5,1323C 1452.45,1298.06 1477.12,1270.4 1498.5,1240C 1497.42,1239.04 1496.25,1238.21 1495,1237.5C 1475.21,1265.48 1452.71,1291.32 1427.5,1315C 1424.61,1317.39 1421.61,1319.56 1418.5,1321.5C 1371.87,1307.62 1324.53,1296.95 1276.5,1289.5C 1285.74,1268.44 1294.41,1247.11 1302.5,1225.5C 1301.18,1223.73 1299.68,1223.4 1298,1224.5C 1290.89,1245.82 1282.23,1266.48 1272,1286.5C 1271.33,1287.25 1270.5,1287.59 1269.5,1287.5C 1188.95,1275.59 1107.95,1269.59 1026.5,1269.5C 1026.5,1264.17 1026.5,1258.83 1026.5,1253.5C 1026.5,1243.5 1026.5,1233.5 1026.5,1223.5C 1024.59,1223.22 1022.92,1223.55 1021.5,1224.5C 1021.5,1234.83 1021.5,1245.17 1021.5,1255.5C 1021.5,1259.83 1021.5,1264.17 1021.5,1268.5C 1010.65,1268.17 999.987,1268.51 989.5,1269.5C 952.442,1270.48 915.442,1272.48 878.5,1275.5C 873.269,1275.44 868.269,1276.11 863.5,1277.5C 834.038,1280.4 804.704,1283.9 775.5,1288C 764.828,1267.49 755.662,1246.32 748,1224.5C 746.951,1222.89 745.451,1222.23 743.5,1222.5C 746.132,1232.77 749.632,1242.77 754,1252.5C 759.518,1264.87 765.018,1277.2 770.5,1289.5C 722.372,1297.32 675.205,1308.66 629,1323.5C 600.664,1297.84 575.998,1269.18 555,1237.5C 550.692,1236.15 549.692,1237.48 552,1241.5C 572.686,1271.37 596.186,1299.04 622.5,1324.5C 581.554,1338.48 542.554,1356.48 505.5,1378.5C 428.116,1341.88 360.949,1291.55 304,1227.5C 266.55,1183.6 241.55,1133.26 229,1076.5C 216.533,1006.44 227.866,940.44 263,878.5C 293.91,827.243 333.076,783.076 380.5,746C 420.024,715.857 462.191,689.69 507,667.5C 543.199,690.348 581.699,708.514 622.5,722C 592.292,749.513 566.626,780.513 545.5,815C 545.613,816.28 546.28,817.113 547.5,817.5C 560.726,798.765 574.559,780.432 589,762.5C 601.378,748.622 614.545,735.622 628.5,723.5C 675.314,738.286 722.98,749.786 771.5,758C 772.517,759.049 772.684,760.216 772,761.5C 761.095,781.214 751.928,801.714 744.5,823C 745.722,825.965 747.222,826.132 749,823.5C 756.999,801.667 766.499,780.5 777.5,760C 807.164,763.416 836.831,767.083 866.5,771C 908.11,774.496 949.777,776.996 991.5,778.5 Z"/></g>
<g><path style="opacity:1" fill="#c2aa2a" d="M 821.5,1286.5 C 816.731,1287.89 811.731,1288.56 806.5,1288.5C 811.269,1287.11 816.269,1286.44 821.5,1286.5 Z"/></g>
<g><path style="opacity:1" fill="#bca52c" d="M 836.5,1284.5 C 831.731,1285.89 826.731,1286.56 821.5,1286.5C 826.269,1285.11 831.269,1284.44 836.5,1284.5 Z"/></g>
<g><path style="opacity:1" fill="#bca52c" d="M 871.5,1280.5 C 867.081,1281.97 862.414,1282.64 857.5,1282.5C 861.919,1281.03 866.586,1280.36 871.5,1280.5 Z"/></g>
<g><path style="opacity:1" fill="#584e5a" d="M 878.5,1275.5 C 876.735,1276.46 874.735,1276.79 872.5,1276.5C 869.609,1277.4 866.609,1277.74 863.5,1277.5C 868.269,1276.11 873.269,1275.44 878.5,1275.5 Z"/></g>
<g><path style="opacity:1" fill="#cbb21e" d="M 1072.5,1274.5 C 1057.5,1274.5 1042.5,1274.5 1027.5,1274.5C 1027.5,1282.5 1027.5,1290.5 1027.5,1298.5C 1026.51,1290.35 1026.17,1282.02 1026.5,1273.5C 1042.01,1273.17 1057.34,1273.5 1072.5,1274.5 Z"/></g>
<g><path style="opacity:1" fill="#b8a22a" d="M 970.5,1274.5 C 987.659,1273.5 1004.99,1273.17 1022.5,1273.5C 1022.5,1278.83 1022.5,1284.17 1022.5,1289.5C 1021.51,1284.69 1021.18,1279.69 1021.5,1274.5C 1004.5,1274.5 987.5,1274.5 970.5,1274.5 Z"/></g>
<g><path style="opacity:1" fill="#90803b" d="M 1021.5,1255.5 C 1022.49,1259.97 1022.82,1264.64 1022.5,1269.5C 1011.5,1269.5 1000.5,1269.5 989.5,1269.5C 999.987,1268.51 1010.65,1268.17 1021.5,1268.5C 1021.5,1264.17 1021.5,1259.83 1021.5,1255.5 Z"/></g>
<g><path style="opacity:1" fill="#b39e2a" d="M 1021.5,1224.5 C 1022.92,1223.55 1024.59,1223.22 1026.5,1223.5C 1026.5,1233.5 1026.5,1243.5 1026.5,1253.5C 1025.51,1244.01 1025.17,1234.35 1025.5,1224.5C 1024.17,1224.5 1022.83,1224.5 1021.5,1224.5 Z"/></g>
<g><path style="opacity:1" fill="#ef9b0f" d="M 587.5,911.5 C 588.499,985.665 588.833,1060 588.5,1134.5C 565.994,1134.83 543.66,1134.5 521.5,1133.5C 543.5,1133.5 565.5,1133.5 587.5,1133.5C 587.5,1059.83 587.5,986.167 587.5,912.5C 587.5,912.167 587.5,911.833 587.5,911.5 Z"/></g>
<g><path style="opacity:1" fill="#f1a40d" d="M 1194.5,973.5 C 1195.5,1012.33 1195.83,1051.33 1195.5,1090.5C 1232,1090.17 1268.34,1090.5 1304.5,1091.5C 1267.83,1091.5 1231.17,1091.5 1194.5,1091.5C 1194.5,1052.17 1194.5,1012.83 1194.5,973.5 Z"/></g>
<g><path style="opacity:1" fill="#eb8b14" d="M 1431.5,911.5 C 1432.5,985.665 1432.83,1060 1432.5,1134.5C 1409.66,1134.83 1386.99,1134.5 1364.5,1133.5C 1364.83,1133.5 1365.17,1133.5 1365.5,1133.5C 1387.5,1133.5 1409.5,1133.5 1431.5,1133.5C 1431.5,1059.83 1431.5,986.167 1431.5,912.5C 1431.5,912.167 1431.5,911.833 1431.5,911.5 Z"/></g>
<g><path style="opacity:1" fill="#eb8a14" d="M 983.5,995.5 C 1017.17,995.5 1050.83,995.5 1084.5,995.5C 1084.5,1010.17 1084.5,1024.83 1084.5,1039.5C 1050.17,1039.5 1015.83,1039.5 981.5,1039.5C 981.832,1071 981.498,1102.34 980.5,1133.5C 980.5,1101.83 980.5,1070.17 980.5,1038.5C 1014.83,1038.5 1049.17,1038.5 1083.5,1038.5C 1083.5,1024.5 1083.5,1010.5 1083.5,996.5C 1050,996.832 1016.66,996.498 983.5,995.5 Z"/></g>
<g><path style="opacity:1" fill="#e77719" d="M 587.5,911.5 C 587.5,911.833 587.5,912.167 587.5,912.5C 565.833,912.5 544.167,912.5 522.5,912.5C 522.5,940.5 522.5,968.5 522.5,996.5C 491.662,996.831 460.995,996.498 430.5,995.5C 460.833,995.5 491.167,995.5 521.5,995.5C 521.5,967.5 521.5,939.5 521.5,911.5C 543.5,911.5 565.5,911.5 587.5,911.5 Z"/></g>
<g><path style="opacity:1" fill="#e15920" d="M 1431.5,911.5 C 1431.5,911.833 1431.5,912.167 1431.5,912.5C 1409.5,912.5 1387.5,912.5 1365.5,912.5C 1365.5,986.167 1365.5,1059.83 1365.5,1133.5C 1365.17,1133.5 1364.83,1133.5 1364.5,1133.5C 1364.5,1059.5 1364.5,985.5 1364.5,911.5C 1386.83,911.5 1409.17,911.5 1431.5,911.5 Z"/></g>
<g><path style="opacity:1" fill="#f0a20d" d="M 1487.5,953.5 C 1513.5,953.5 1539.5,953.5 1565.5,953.5C 1565.5,1013.83 1565.5,1074.17 1565.5,1134.5C 1564.5,1074.67 1564.17,1014.67 1564.5,954.5C 1538.66,954.831 1512.99,954.498 1487.5,953.5 Z"/></g>
<g><path style="opacity:1" fill="#e4691b" d="M 1487.5,912.5 C 1562.33,911.501 1637.33,911.167 1712.5,911.5C 1712.5,925.833 1712.5,940.167 1712.5,954.5C 1686.17,954.5 1659.83,954.5 1633.5,954.5C 1659.33,953.502 1685.33,953.169 1711.5,953.5C 1711.5,939.833 1711.5,926.167 1711.5,912.5C 1636.83,912.5 1562.17,912.5 1487.5,912.5 Z"/></g>
<g><path style="opacity:1" fill="#dc4325" d="M 1487.5,912.5 C 1562.17,912.5 1636.83,912.5 1711.5,912.5C 1711.5,926.167 1711.5,939.833 1711.5,953.5C 1685.33,953.169 1659.33,953.502 1633.5,954.5C 1633.5,1014.5 1633.5,1074.5 1633.5,1134.5C 1610.83,1134.5 1588.17,1134.5 1565.5,1134.5C 1565.5,1074.17 1565.5,1013.83 1565.5,953.5C 1539.5,953.5 1513.5,953.5 1487.5,953.5C 1487.5,939.833 1487.5,926.167 1487.5,912.5 Z"/></g>
<g><path style="opacity:1" fill="#dc4225" d="M 1431.5,912.5 C 1431.5,986.167 1431.5,1059.83 1431.5,1133.5C 1409.5,1133.5 1387.5,1133.5 1365.5,1133.5C 1365.5,1059.83 1365.5,986.167 1365.5,912.5C 1387.5,912.5 1409.5,912.5 1431.5,912.5 Z"/></g>
<g><path style="opacity:1" fill="#dd4325" d="M 1194.5,973.5 C 1194.5,1012.83 1194.5,1052.17 1194.5,1091.5C 1231.17,1091.5 1267.83,1091.5 1304.5,1091.5C 1304.5,1105.5 1304.5,1119.5 1304.5,1133.5C 1245.5,1133.5 1186.5,1133.5 1127.5,1133.5C 1127.5,1059.83 1127.5,986.167 1127.5,912.5C 1149.83,912.5 1172.17,912.5 1194.5,912.5C 1194.5,932.833 1194.5,953.167 1194.5,973.5 Z"/></g>
<g><path style="opacity:1" fill="#dc4325" d="M 1015.5,911.5 C 1040.66,912.498 1065.99,912.831 1091.5,912.5C 1091.5,926.167 1091.5,939.833 1091.5,953.5C 1055.5,953.5 1019.5,953.5 983.5,953.5C 983.5,967.5 983.5,981.5 983.5,995.5C 1016.66,996.498 1050,996.832 1083.5,996.5C 1083.5,1010.5 1083.5,1024.5 1083.5,1038.5C 1049.17,1038.5 1014.83,1038.5 980.5,1038.5C 980.5,1070.17 980.5,1101.83 980.5,1133.5C 958.5,1133.5 936.5,1133.5 914.5,1133.5C 914.5,1059.5 914.5,985.5 914.5,911.5C 948.167,911.5 981.833,911.5 1015.5,911.5 Z"/></g>
<g><path style="opacity:1" fill="#dd4325" d="M 639.5,911.5 C 661.833,911.5 684.167,911.5 706.5,911.5C 706.042,962.19 706.542,1012.86 708,1063.5C 709.831,1076.33 716.998,1084.5 729.5,1088C 746.115,1093.26 762.448,1092.6 778.5,1086C 786.974,1081.22 792.14,1074.05 794,1064.5C 795.453,1013.52 795.953,962.522 795.5,911.5C 819.5,911.5 843.5,911.5 867.5,911.5C 867.667,955.835 867.5,1000.17 867,1044.5C 866.179,1056.23 864.845,1067.89 863,1079.5C 859.159,1094.34 850.992,1106.17 838.5,1115C 825.064,1125.59 809.731,1131.26 792.5,1132C 765.494,1133.97 738.494,1133.97 711.5,1132C 694.389,1129.61 678.723,1123.61 664.5,1114C 648.612,1099.38 640.445,1081.22 640,1059.5C 639.5,1010.17 639.333,960.834 639.5,911.5 Z"/></g>
<g><path style="opacity:1" fill="#dd4325" d="M 430.5,995.5 C 460.995,996.498 491.662,996.831 522.5,996.5C 522.5,968.5 522.5,940.5 522.5,912.5C 544.167,912.5 565.833,912.5 587.5,912.5C 587.5,986.167 587.5,1059.83 587.5,1133.5C 565.5,1133.5 543.5,1133.5 521.5,1133.5C 521.5,1101.83 521.5,1070.17 521.5,1038.5C 491.167,1038.5 460.833,1038.5 430.5,1038.5C 430.5,1070.17 430.5,1101.83 430.5,1133.5C 408.167,1133.5 385.833,1133.5 363.5,1133.5C 363.5,1059.5 363.5,985.5 363.5,911.5C 385.833,911.5 408.167,911.5 430.5,911.5C 430.5,939.5 430.5,967.5 430.5,995.5 Z"/></g>
<g><path style="opacity:1" fill="#e6701a" d="M 1015.5,911.5 C 1041.17,911.5 1066.83,911.5 1092.5,911.5C 1092.83,925.677 1092.5,939.677 1091.5,953.5C 1091.5,939.833 1091.5,926.167 1091.5,912.5C 1065.99,912.831 1040.66,912.498 1015.5,911.5 Z"/></g>
<g><path style="opacity:1" fill="#b9a22c" d="M 1203.5,769.5 C 1198.73,770.889 1193.73,771.556 1188.5,771.5C 1193.27,770.111 1198.27,769.444 1203.5,769.5 Z"/></g>
<g><path style="opacity:1" fill="#988737" d="M 1024.5,748.5 C 1024.5,757.167 1024.5,765.833 1024.5,774.5C 1011.66,774.829 998.989,774.495 986.5,773.5C 998.833,773.5 1011.17,773.5 1023.5,773.5C 1023.17,764.983 1023.51,756.65 1024.5,748.5 Z"/></g>
<g><path style="opacity:1" fill="#baa32d" d="M 1238.5,765.5 C 1233.73,766.889 1228.73,767.556 1223.5,767.5C 1228.27,766.111 1233.27,765.444 1238.5,765.5 Z"/></g>
<g><path style="opacity:1" fill="#b8a130" d="M 1253.5,763.5 C 1248.73,764.889 1243.73,765.556 1238.5,765.5C 1243.27,764.111 1248.27,763.444 1253.5,763.5 Z"/></g>
<g><path style="opacity:1" fill="#ac9735" d="M 826.5,761.5 C 831.731,761.444 836.731,762.111 841.5,763.5C 836.269,763.556 831.269,762.889 826.5,761.5 Z"/></g>
<g><path style="opacity:1" fill="#b9a22c" d="M 1176.5,647.5 C 1171.73,648.889 1166.73,649.556 1161.5,649.5C 1166.27,648.111 1171.27,647.444 1176.5,647.5 Z"/></g>
<g><path style="opacity:1" fill="#fbda01" d="M 983.5,654.5 C 997.323,655.496 1011.32,655.829 1025.5,655.5C 1025.5,661.833 1025.5,668.167 1025.5,674.5C 1025.04,699.165 1024.7,723.831 1024.5,748.5C 1023.51,756.65 1023.17,764.983 1023.5,773.5C 1011.17,773.5 998.833,773.5 986.5,773.5C 977.833,773.5 969.167,773.5 960.5,773.5C 920.652,771.726 880.985,768.392 841.5,763.5C 836.731,762.111 831.731,761.444 826.5,761.5C 810.993,760.249 795.66,757.915 780.5,754.5C 802.618,714.528 830.285,678.695 863.5,647C 884.519,648.068 905.519,649.735 926.5,652C 945.491,653.124 964.491,653.958 983.5,654.5 Z"/></g>
<g><path style="opacity:1" fill="#fbda01" d="M 1098.5,773.5 C 1075.17,773.87 1051.83,774.204 1028.5,774.5C 1028.99,734.83 1029.65,695.163 1030.5,655.5C 1040.19,655.658 1049.86,655.325 1059.5,654.5C 1076.84,654.382 1094.18,653.882 1111.5,653C 1128.16,651.59 1144.82,650.423 1161.5,649.5C 1166.73,649.556 1171.73,648.889 1176.5,647.5C 1181.45,646.441 1186.45,646.274 1191.5,647C 1221.61,676.063 1246.78,708.897 1267,745.5C 1269.07,748.971 1270.57,752.638 1271.5,756.5C 1213.96,764.872 1156.3,770.538 1098.5,773.5 Z"/></g>
<g><path style="opacity:1" fill="#ad9735" d="M 850.5,639.5 C 855.731,639.444 860.731,640.111 865.5,641.5C 860.269,641.556 855.269,640.889 850.5,639.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 1263.5,634.5 C 1266.52,634.335 1269.52,634.502 1272.5,635C 1325.75,656.66 1374.09,685.994 1417.5,723C 1371.42,737.603 1324.42,747.937 1276.5,754C 1255.79,713.918 1229.45,677.918 1197.5,646C 1219.59,642.394 1241.59,638.561 1263.5,634.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 766.5,630.5 C 797.101,636.211 827.768,641.378 858.5,646C 825.615,677.365 798.282,712.865 776.5,752.5C 773.216,753.657 769.882,753.824 766.5,753C 728.415,746.153 690.749,737.486 653.5,727C 646.212,725.183 639.212,722.683 632.5,719.5C 672.762,683.357 717.428,653.691 766.5,630.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 1377.5,606.5 C 1434.46,621.321 1489.13,642.155 1541.5,669C 1504.02,692.16 1464.02,709.493 1421.5,721C 1378.78,684.51 1331.44,655.01 1279.5,632.5C 1297.41,628.021 1315.41,623.855 1333.5,620C 1348.42,615.968 1363.09,611.468 1377.5,606.5 Z"/></g>
<g><path style="opacity:1" fill="#fad903" d="M 668.5,604.5 C 698.469,613.805 728.802,621.972 759.5,629C 711.024,652.888 666.691,682.721 626.5,718.5C 593.94,707.814 562.607,694.314 532.5,678C 525.564,674.06 518.897,669.727 512.5,665C 562.91,640.624 614.91,620.457 668.5,604.5 Z"/></g>
<g><path style="opacity:1" fill="#bea72c" d="M 854.5,567.5 C 847.399,569.228 840.066,570.228 832.5,570.5C 839.601,568.772 846.934,567.772 854.5,567.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 865.5,641.5 C 860.731,640.111 855.731,639.444 850.5,639.5C 792.212,632.844 735.212,620.51 679.5,602.5C 729.694,588.105 780.694,577.439 832.5,570.5C 840.066,570.228 847.399,569.228 854.5,567.5C 1009.26,547.989 1162.93,555.156 1315.5,589C 1334.71,593.22 1353.71,598.22 1372.5,604C 1298.42,626.293 1222.75,640.293 1145.5,646C 1061.81,652.276 978.139,651.943 894.5,645C 884.763,643.996 875.096,642.829 865.5,641.5 Z"/></g>
<g><path style="opacity:1" fill="#38356a" d="M 1021.5,1224.5 C 1022.83,1224.5 1024.17,1224.5 1025.5,1224.5C 1025.17,1234.35 1025.51,1244.01 1026.5,1253.5C 1026.5,1258.83 1026.5,1264.17 1026.5,1269.5C 1107.95,1269.59 1188.95,1275.59 1269.5,1287.5C 1270.88,1288.8 1272.38,1288.8 1274,1287.5C 1274.37,1288.42 1274.87,1289.25 1275.5,1290C 1274.07,1290.47 1272.9,1291.3 1272,1292.5C 1270.99,1291.66 1269.82,1291.33 1268.5,1291.5C 1203.51,1282.06 1138.17,1276.4 1072.5,1274.5C 1057.34,1273.5 1042.01,1273.17 1026.5,1273.5C 1026.17,1282.02 1026.51,1290.35 1027.5,1298.5C 1027.89,1329.83 1028.22,1361.17 1028.5,1392.5C 1080.52,1393.1 1132.35,1396.43 1184,1402.5C 1191.44,1399.25 1197.6,1394.25 1202.5,1387.5C 1203.55,1387.35 1204.55,1387.52 1205.5,1388C 1200.32,1393.01 1195.32,1398.18 1190.5,1403.5C 1191.69,1404.43 1193.02,1404.76 1194.5,1404.5C 1219.19,1407.71 1243.86,1411.04 1268.5,1414.5C 1270.17,1414.5 1271.83,1414.5 1273.5,1414.5C 1273.5,1415.83 1273.5,1417.17 1273.5,1418.5C 1269.66,1417.66 1265.99,1417.66 1262.5,1418.5C 1238.45,1414.83 1214.45,1411.16 1190.5,1407.5C 1185.73,1406.11 1180.73,1405.44 1175.5,1405.5C 1102.68,1397.79 1029.68,1395.29 956.5,1398C 935.15,1399.39 913.817,1400.89 892.5,1402.5C 887.269,1402.44 882.269,1403.11 877.5,1404.5C 873.069,1404.23 868.735,1404.56 864.5,1405.5C 859.269,1405.44 854.269,1406.11 849.5,1407.5C 843.123,1407.79 836.79,1408.46 830.5,1409.5C 828.958,1408.84 827.291,1408.17 825.5,1407.5C 826.602,1406.82 827.602,1406.16 828.5,1405.5C 837.536,1404.72 846.536,1403.56 855.5,1402C 849.63,1396.3 843.964,1390.46 838.5,1384.5C 838.897,1383.47 839.563,1383.31 840.5,1384C 844.5,1388 848.5,1392 852.5,1396C 853.448,1396.48 854.448,1396.65 855.5,1396.5C 857.562,1398.56 859.895,1400.23 862.5,1401.5C 916.315,1395.35 970.315,1392.35 1024.5,1392.5C 1023.8,1358.17 1023.14,1323.83 1022.5,1289.5C 1022.5,1284.17 1022.5,1278.83 1022.5,1273.5C 1004.99,1273.17 987.659,1273.5 970.5,1274.5C 956.79,1274.61 943.123,1275.27 929.5,1276.5C 919.301,1276.43 909.301,1277.1 899.5,1278.5C 895.833,1278.5 892.167,1278.5 888.5,1278.5C 882.729,1279.11 877.396,1278.45 872.5,1276.5C 874.735,1276.79 876.735,1276.46 878.5,1275.5C 915.442,1272.48 952.442,1270.48 989.5,1269.5C 1000.5,1269.5 1011.5,1269.5 1022.5,1269.5C 1022.82,1264.64 1022.49,1259.97 1021.5,1255.5C 1021.5,1245.17 1021.5,1234.83 1021.5,1224.5 Z"/></g>
<g><path style="opacity:1" fill="#d0b623" d="M 929.5,1276.5 C 919.699,1277.9 909.699,1278.57 899.5,1278.5C 909.301,1277.1 919.301,1276.43 929.5,1276.5 Z"/></g>
<g><path style="opacity:1" fill="#fbd902" d="M 1175.5,1405.5 C 1180.27,1406.89 1185.27,1407.56 1190.5,1407.5C 1214.45,1411.16 1238.45,1414.83 1262.5,1418.5C 1297.27,1425.11 1331.6,1433.78 1365.5,1444.5C 1341.6,1452.06 1317.27,1458.23 1292.5,1463C 1147.25,1492.32 1001.25,1497.82 854.5,1479.5C 850.081,1478.03 845.414,1477.36 840.5,1477.5C 788.205,1471.24 736.872,1460.91 686.5,1446.5C 684.594,1445.52 682.594,1444.52 680.5,1443.5C 681.602,1442.82 682.602,1442.16 683.5,1441.5C 728.221,1427.83 773.888,1417.83 820.5,1411.5C 830.4,1410.89 840.066,1409.56 849.5,1407.5C 854.731,1407.56 859.731,1406.89 864.5,1405.5C 868.735,1404.56 873.069,1404.23 877.5,1404.5C 882.731,1404.56 887.731,1403.89 892.5,1402.5C 913.817,1400.89 935.15,1399.39 956.5,1398C 1029.68,1395.29 1102.68,1397.79 1175.5,1405.5 Z"/></g>
<g><path style="opacity:1" fill="#b6a02e" d="M 892.5,1402.5 C 887.731,1403.89 882.731,1404.56 877.5,1404.5C 882.269,1403.11 887.269,1402.44 892.5,1402.5 Z"/></g>
<g><path style="opacity:1" fill="#5b505a" d="M 1175.5,1405.5 C 1180.73,1405.44 1185.73,1406.11 1190.5,1407.5C 1185.27,1407.56 1180.27,1406.89 1175.5,1405.5 Z"/></g>
<g><path style="opacity:1" fill="#b29c31" d="M 864.5,1405.5 C 859.731,1406.89 854.731,1407.56 849.5,1407.5C 854.269,1406.11 859.269,1405.44 864.5,1405.5 Z"/></g>
<g><path style="opacity:1" fill="#c8af27" d="M 849.5,1407.5 C 840.066,1409.56 830.4,1410.89 820.5,1411.5C 823.656,1410.57 826.989,1409.9 830.5,1409.5C 836.79,1408.46 843.123,1407.79 849.5,1407.5 Z"/></g>
<g><path style="opacity:1" fill="#bfa72e" d="M 683.5,1441.5 C 682.602,1442.16 681.602,1442.82 680.5,1443.5C 682.594,1444.52 684.594,1445.52 686.5,1446.5C 682.926,1446.31 679.593,1445.31 676.5,1443.5C 678.608,1442.06 680.941,1441.39 683.5,1441.5 Z"/></g>
<g><path style="opacity:1" fill="#c1a92c" d="M 840.5,1477.5 C 845.414,1477.36 850.081,1478.03 854.5,1479.5C 849.586,1479.64 844.919,1478.97 840.5,1477.5 Z"/></g>
<g><path style="opacity:1" fill="#c2a92b" d="M 1213.5,1481.5 C 1208.73,1482.89 1203.73,1483.56 1198.5,1483.5C 1203.27,1482.11 1208.27,1481.44 1213.5,1481.5 Z"/></g>
<g><path style="opacity:1" fill="#bca52b" d="M 1189.5,1484.5 C 1184.73,1485.89 1179.73,1486.56 1174.5,1486.5C 1179.27,1485.11 1184.27,1484.44 1189.5,1484.5 Z"/></g>
<g><path style="opacity:1" fill="#3e3868" d="M 1470.5,1498.5 C 1469.13,1498.14 1468.13,1497.31 1467.5,1496C 1466.69,1493.24 1465.69,1490.57 1464.5,1488C 1460.7,1487.88 1457.36,1489.05 1454.5,1491.5C 1457.93,1501.3 1461.27,1511.13 1464.5,1521C 1464.16,1522.03 1463.5,1522.53 1462.5,1522.5C 1459.38,1511.79 1456.04,1501.12 1452.5,1490.5C 1452.83,1489.83 1453.17,1489.17 1453.5,1488.5C 1457.17,1487.17 1460.83,1485.83 1464.5,1484.5C 1467.06,1488.84 1469.06,1493.51 1470.5,1498.5 Z"/></g>
<g><path style="opacity:1" fill="#2d2f6e" d="M 574.5,1571.5 C 572.388,1569.66 570.054,1567.99 567.5,1566.5C 571.86,1555.43 575.193,1544.09 577.5,1532.5C 578.497,1532.53 579.164,1532.03 579.5,1531C 582.575,1522.44 585.241,1513.78 587.5,1505C 587.167,1503.83 586.833,1502.67 586.5,1501.5C 579.843,1499.17 573.177,1496.84 566.5,1494.5C 567.123,1491.88 567.123,1489.21 566.5,1486.5C 566.47,1485.5 566.97,1484.84 568,1484.5C 587.463,1491.27 606.963,1497.93 626.5,1504.5C 627.023,1507.51 626.523,1510.51 625,1513.5C 624.481,1514.52 623.647,1515.18 622.5,1515.5C 614.875,1512.96 607.208,1510.62 599.5,1508.5C 592.975,1529.57 586.142,1550.57 579,1571.5C 577.384,1572.8 575.884,1572.8 574.5,1571.5 Z"/></g>
<g><path style="opacity:1" fill="#2d2f6e" d="M 1470.5,1498.5 C 1470.5,1498.83 1470.5,1499.17 1470.5,1499.5C 1475.37,1519.63 1481.37,1539.46 1488.5,1559C 1487.57,1560.08 1486.9,1561.24 1486.5,1562.5C 1483.51,1564.07 1480.51,1564.74 1477.5,1564.5C 1474.23,1555.2 1471.07,1545.87 1468,1536.5C 1467.65,1534.82 1466.65,1533.82 1465,1533.5C 1454.5,1537 1444,1540.5 1433.5,1544C 1432.24,1544.42 1431.58,1545.25 1431.5,1546.5C 1430.78,1546.08 1430.28,1545.42 1430,1544.5C 1432.13,1555.24 1435.3,1565.74 1439.5,1576C 1438.75,1576.67 1438.41,1577.5 1438.5,1578.5C 1435.01,1580.11 1431.35,1581.11 1427.5,1581.5C 1419.77,1556.31 1411.44,1531.31 1402.5,1506.5C 1406.43,1504.35 1410.6,1502.69 1415,1501.5C 1420.3,1511.56 1424.13,1522.23 1426.5,1533.5C 1438.37,1529.43 1450.37,1525.76 1462.5,1522.5C 1463.5,1522.53 1464.16,1522.03 1464.5,1521C 1461.27,1511.13 1457.93,1501.3 1454.5,1491.5C 1457.36,1489.05 1460.7,1487.88 1464.5,1488C 1465.69,1490.57 1466.69,1493.24 1467.5,1496C 1468.13,1497.31 1469.13,1498.14 1470.5,1498.5 Z"/></g>
<g><path style="opacity:1" fill="#3e3868" d="M 566.5,1486.5 C 567.123,1489.21 567.123,1491.88 566.5,1494.5C 573.177,1496.84 579.843,1499.17 586.5,1501.5C 586.833,1502.67 587.167,1503.83 587.5,1505C 585.241,1513.78 582.575,1522.44 579.5,1531C 579.164,1532.03 578.497,1532.53 577.5,1532.5C 580.092,1523.06 583.092,1513.72 586.5,1504.5C 579.318,1501.38 571.985,1498.55 564.5,1496C 563.798,1492.59 564.465,1489.42 566.5,1486.5 Z"/></g>
<g><path style="opacity:1" fill="#4a4064" d="M 1470.5,1499.5 C 1477.67,1519.66 1484.67,1539.99 1491.5,1560.5C 1489.98,1561.56 1488.31,1562.23 1486.5,1562.5C 1486.9,1561.24 1487.57,1560.08 1488.5,1559C 1481.37,1539.46 1475.37,1519.63 1470.5,1499.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 639.5,1508.5 C 653.042,1511.63 666.375,1515.46 679.5,1520C 692.87,1530.74 695.037,1543.58 686,1558.5C 678.068,1568.12 667.901,1571.29 655.5,1568C 650.446,1566.49 645.446,1565.15 640.5,1564C 637.78,1572.38 635.446,1580.88 633.5,1589.5C 629.453,1588.98 625.453,1588.15 621.5,1587C 620.484,1586.48 619.818,1585.65 619.5,1584.5C 626.489,1559.21 633.156,1533.87 639.5,1508.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1384.5,1510.5 C 1385.5,1510.5 1386.5,1510.5 1387.5,1510.5C 1394,1536.48 1400.16,1562.48 1406,1588.5C 1401.91,1589.9 1397.74,1590.73 1393.5,1591C 1377.31,1576.65 1360.98,1562.48 1344.5,1548.5C 1344.17,1549 1343.83,1549.5 1343.5,1550C 1348.41,1567.05 1352.74,1584.21 1356.5,1601.5C 1351.83,1602.5 1347.17,1603.5 1342.5,1604.5C 1336,1578.5 1329.83,1552.5 1324,1526.5C 1327.62,1525.29 1331.28,1524.29 1335,1523.5C 1352,1538.17 1369,1552.83 1386,1567.5C 1382.71,1549.85 1378.55,1532.35 1373.5,1515C 1373.91,1514.05 1374.57,1513.39 1375.5,1513C 1378.74,1512.59 1381.74,1511.76 1384.5,1510.5 Z"/></g>
<g><path style="opacity:1" fill="#35336b" d="M 849.5,1522.5 C 852.976,1521.36 856.642,1521.19 860.5,1522C 863.167,1527 865.833,1532 868.5,1537C 865.442,1537.46 862.442,1537.12 859.5,1536C 856.024,1531.52 852.69,1527.02 849.5,1522.5 Z"/></g>
<g><path style="opacity:1" fill="#f5d40b" d="M 650.5,1524.5 C 656.902,1525.52 663.235,1527.02 669.5,1529C 675.364,1532.57 677.53,1537.73 676,1544.5C 674.311,1552.36 669.478,1556.36 661.5,1556.5C 655.73,1555.64 650.064,1554.31 644.5,1552.5C 644.167,1552 643.833,1551.5 643.5,1551C 646.072,1542.21 648.405,1533.38 650.5,1524.5 Z"/></g>
<g><path style="opacity:1" fill="#32326c" d="M 1143.5,1527.5 C 1146.57,1527.18 1149.57,1527.52 1152.5,1528.5C 1149.33,1534.17 1146.17,1539.83 1143,1545.5C 1139.54,1546.79 1136.04,1546.79 1132.5,1545.5C 1134.57,1540.13 1136.74,1534.79 1139,1529.5C 1140.62,1528.9 1142.12,1528.23 1143.5,1527.5 Z"/></g>
<g><path style="opacity:1" fill="#2b2e6e" d="M 1306.5,1601.5 C 1306.5,1600.83 1306.5,1600.17 1306.5,1599.5C 1303.28,1578.38 1299.28,1557.38 1294.5,1536.5C 1294.82,1535.35 1295.48,1534.52 1296.5,1534C 1299.37,1532.72 1302.2,1532.56 1305,1533.5C 1309.92,1558.09 1315.08,1582.59 1320.5,1607C 1317.01,1608.62 1313.35,1609.46 1309.5,1609.5C 1309.69,1606.19 1308.69,1603.52 1306.5,1601.5 Z"/></g>
<g><path style="opacity:1" fill="#453c65" d="M 577.5,1532.5 C 575.193,1544.09 571.86,1555.43 567.5,1566.5C 570.054,1567.99 572.388,1569.66 574.5,1571.5C 571.689,1571.17 569.022,1570.34 566.5,1569C 565.941,1568.28 565.608,1567.44 565.5,1566.5C 568.938,1554.85 572.938,1543.51 577.5,1532.5 Z"/></g>
<g><path style="opacity:1" fill="#35336b" d="M 879.5,1533.5 C 883.163,1533.95 886.83,1534.45 890.5,1535C 894.833,1539.33 899.167,1543.67 903.5,1548C 899.449,1548.52 895.449,1548.18 891.5,1547C 889.689,1544.02 887.356,1541.52 884.5,1539.5C 881.696,1541.14 879.029,1542.97 876.5,1545C 872.459,1545.83 868.459,1545.66 864.5,1544.5C 869.745,1541.06 874.745,1537.39 879.5,1533.5 Z"/></g>
<g><path style="opacity:1" fill="#2d2f6e" d="M 1248.5,1622.5 C 1245.55,1623.01 1242.72,1623.01 1240,1622.5C 1230.82,1606.81 1221.66,1591.14 1212.5,1575.5C 1213.17,1571.32 1211.67,1569.99 1208,1571.5C 1209.89,1588.87 1212.39,1606.21 1215.5,1623.5C 1215.39,1624.44 1215.06,1625.28 1214.5,1626C 1212.26,1626.05 1210.59,1626.88 1209.5,1628.5C 1207.86,1628.29 1206.36,1628.62 1205,1629.5C 1200.04,1602.98 1195.88,1576.31 1192.5,1549.5C 1196.98,1548.79 1201.48,1548.12 1206,1547.5C 1208.03,1547.35 1209.7,1548.02 1211,1549.5C 1221.01,1566.87 1231.51,1583.87 1242.5,1600.5C 1246.05,1587.9 1249.38,1575.24 1252.5,1562.5C 1253.6,1561 1254.6,1559.34 1255.5,1557.5C 1256.58,1552.42 1257.91,1547.42 1259.5,1542.5C 1263.08,1540.81 1266.91,1539.81 1271,1539.5C 1272.11,1539.59 1273.11,1539.92 1274,1540.5C 1278.05,1565.48 1281.88,1590.48 1285.5,1615.5C 1282.14,1615.62 1278.81,1615.95 1275.5,1616.5C 1272.96,1599.85 1270.46,1583.19 1268,1566.5C 1267.73,1562.87 1266.06,1561.87 1263,1563.5C 1258.28,1583.68 1253.45,1603.35 1248.5,1622.5 Z"/></g>
<g><path style="opacity:1" fill="#2c2f6e" d="M 777.5,1540.5 C 779.308,1541.92 779.975,1543.92 779.5,1546.5C 777.523,1555.7 776.189,1565.04 775.5,1574.5C 787.153,1576.26 798.819,1577.93 810.5,1579.5C 811.568,1580.43 812.901,1580.77 814.5,1580.5C 815.672,1570.13 817.172,1559.79 819,1549.5C 822.418,1548.73 825.918,1548.73 829.5,1549.5C 825.646,1574.81 821.98,1600.14 818.5,1625.5C 814.821,1625.28 811.154,1624.94 807.5,1624.5C 809.334,1613.17 810.834,1601.83 812,1590.5C 811.667,1591.5 811.333,1592.5 811,1593.5C 810.722,1592.58 810.222,1591.92 809.5,1591.5C 806.455,1591.49 803.455,1591.16 800.5,1590.5C 798.821,1589.06 796.821,1588.06 794.5,1587.5C 787.189,1586.11 779.856,1585.28 772.5,1585C 769.903,1595.66 767.903,1606.49 766.5,1617.5C 762.812,1617.22 759.145,1616.72 755.5,1616C 759.822,1590.92 763.822,1565.75 767.5,1540.5C 770.833,1540.5 774.167,1540.5 777.5,1540.5 Z"/></g>
<g><path style="opacity:1" fill="#463d65" d="M 1431.5,1546.5 C 1434.92,1556.27 1438.26,1566.1 1441.5,1576C 1441.25,1577.75 1440.25,1578.58 1438.5,1578.5C 1438.41,1577.5 1438.75,1576.67 1439.5,1576C 1435.3,1565.74 1432.13,1555.24 1430,1544.5C 1430.28,1545.42 1430.78,1546.08 1431.5,1546.5 Z"/></g>
<g><path style="opacity:1" fill="#9f8c39" d="M 777.5,1540.5 C 777.5,1540.17 777.5,1539.83 777.5,1539.5C 778.5,1539.5 779.5,1539.5 780.5,1539.5C 780.802,1542.06 780.468,1544.39 779.5,1546.5C 779.975,1543.92 779.308,1541.92 777.5,1540.5 Z"/></g>
<g><path style="opacity:1" fill="#3d3868" d="M 1248.5,1622.5 C 1253.45,1603.35 1258.28,1583.68 1263,1563.5C 1266.06,1561.87 1267.73,1562.87 1268,1566.5C 1270.46,1583.19 1272.96,1599.85 1275.5,1616.5C 1278.81,1615.95 1282.14,1615.62 1285.5,1615.5C 1281.88,1590.48 1278.05,1565.48 1274,1540.5C 1273.11,1539.92 1272.11,1539.59 1271,1539.5C 1266.91,1539.81 1263.08,1540.81 1259.5,1542.5C 1257.91,1547.42 1256.58,1552.42 1255.5,1557.5C 1254.6,1559.34 1253.6,1561 1252.5,1562.5C 1254.32,1554.87 1255.99,1547.21 1257.5,1539.5C 1263.75,1538.11 1270.08,1537.44 1276.5,1537.5C 1280.07,1563.84 1283.74,1590.18 1287.5,1616.5C 1283.65,1617.03 1279.82,1617.69 1276,1618.5C 1275.05,1618.09 1274.39,1617.43 1274,1616.5C 1271.63,1598.97 1268.63,1581.64 1265,1564.5C 1259.55,1583.63 1255.05,1602.96 1251.5,1622.5C 1250.5,1622.5 1249.5,1622.5 1248.5,1622.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 871.5,1552.5 C 903.481,1551.31 918.314,1566.65 916,1598.5C 912.572,1624.6 897.739,1636.76 871.5,1635C 855.795,1630.63 846.295,1620.46 843,1604.5C 840.167,1587.31 844.667,1572.47 856.5,1560C 861.045,1556.39 866.045,1553.89 871.5,1552.5 Z"/></g>
<g><path style="opacity:1" fill="#2f306d" d="M 1131.5,1554.5 C 1136.17,1554.5 1140.83,1554.5 1145.5,1554.5C 1147.83,1581.17 1150.17,1607.83 1152.5,1634.5C 1147.51,1634.92 1142.51,1635.25 1137.5,1635.5C 1135.55,1608.5 1133.55,1581.5 1131.5,1554.5 Z"/></g>
<g><path style="opacity:1" fill="#393669" d="M 1306.5,1601.5 C 1308.69,1603.52 1309.69,1606.19 1309.5,1609.5C 1313.35,1609.46 1317.01,1608.62 1320.5,1607C 1315.08,1582.59 1309.92,1558.09 1305,1533.5C 1302.2,1532.56 1299.37,1532.72 1296.5,1534C 1295.48,1534.52 1294.82,1535.35 1294.5,1536.5C 1299.28,1557.38 1303.28,1578.38 1306.5,1599.5C 1301.31,1577.4 1296.64,1555.06 1292.5,1532.5C 1297.12,1531.51 1301.78,1530.85 1306.5,1530.5C 1311.83,1556.83 1317.17,1583.17 1322.5,1609.5C 1317.85,1610.47 1313.19,1610.97 1308.5,1611C 1307.39,1607.95 1306.72,1604.78 1306.5,1601.5 Z"/></g>
<g><path style="opacity:1" fill="#30306d" d="M 1099.5,1557.5 C 1104.17,1557.5 1108.83,1557.5 1113.5,1557.5C 1113.26,1558.79 1113.6,1559.79 1114.5,1560.5C 1115.29,1586.18 1116.29,1611.84 1117.5,1637.5C 1113.83,1637.5 1110.17,1637.5 1106.5,1637.5C 1105.5,1637.5 1104.5,1637.5 1103.5,1637.5C 1103.78,1635.59 1103.45,1633.92 1102.5,1632.5C 1102.26,1623.16 1101.92,1613.83 1101.5,1604.5C 1094.5,1604.5 1087.5,1604.5 1080.5,1604.5C 1074.83,1604.5 1069.17,1604.5 1063.5,1604.5C 1063.19,1608.04 1063.52,1611.38 1064.5,1614.5C 1064.5,1620.5 1064.5,1626.5 1064.5,1632.5C 1064.5,1634.83 1064.5,1637.17 1064.5,1639.5C 1061.29,1639.19 1058.29,1639.52 1055.5,1640.5C 1053.83,1640.5 1052.17,1640.5 1050.5,1640.5C 1049.68,1613.49 1048.68,1586.49 1047.5,1559.5C 1052.17,1559.5 1056.83,1559.5 1061.5,1559.5C 1061.91,1565.16 1062.24,1570.83 1062.5,1576.5C 1062.5,1582.17 1062.5,1587.83 1062.5,1593.5C 1066.37,1593.81 1070.04,1593.48 1073.5,1592.5C 1082.5,1592.5 1091.5,1592.5 1100.5,1592.5C 1100.44,1580.82 1100.11,1569.16 1099.5,1557.5 Z"/></g>
<g><path style="opacity:1" fill="#938339" d="M 1099.5,1557.5 C 1104.31,1556.51 1109.31,1556.18 1114.5,1556.5C 1114.5,1557.83 1114.5,1559.17 1114.5,1560.5C 1113.6,1559.79 1113.26,1558.79 1113.5,1557.5C 1108.83,1557.5 1104.17,1557.5 1099.5,1557.5 Z"/></g>
<g><path style="opacity:1" fill="#30316d" d="M 1017.5,1614.5 C 1022.17,1614.5 1026.83,1614.5 1031.5,1614.5C 1031.5,1615.83 1031.5,1617.17 1031.5,1618.5C 1025.73,1633.74 1014.56,1641.4 998,1641.5C 973.074,1638.56 960.908,1624.39 961.5,1599C 962.792,1571.37 977.125,1558.03 1004.5,1559C 1020.82,1561.82 1030.16,1571.32 1032.5,1587.5C 1027.82,1587.67 1023.15,1587.5 1018.5,1587C 1014.44,1574.4 1005.78,1569.4 992.5,1572C 984.507,1575.33 979.341,1581.16 977,1589.5C 976.333,1596.17 976.333,1602.83 977,1609.5C 981.172,1625 991.005,1630.83 1006.5,1627C 1012.14,1624.53 1015.81,1620.36 1017.5,1614.5 Z"/></g>
<g><path style="opacity:1" fill="#f8d707" d="M 873.5,1565.5 C 894.538,1565.04 904.038,1575.38 902,1596.5C 900.247,1613.93 890.747,1622.43 873.5,1622C 863.622,1618.77 858.122,1611.93 857,1601.5C 855.112,1588.83 858.612,1578 867.5,1569C 869.727,1568.06 871.727,1566.89 873.5,1565.5 Z"/></g>
<g><path style="opacity:1" fill="#3f3967" d="M 1212.5,1575.5 C 1211.69,1574.57 1210.85,1573.57 1210,1572.5C 1209.83,1573.33 1209.67,1574.17 1209.5,1575C 1212.96,1592.39 1215.63,1609.89 1217.5,1627.5C 1214.83,1627.83 1212.17,1628.17 1209.5,1628.5C 1210.59,1626.88 1212.26,1626.05 1214.5,1626C 1215.06,1625.28 1215.39,1624.44 1215.5,1623.5C 1212.39,1606.21 1209.89,1588.87 1208,1571.5C 1211.67,1569.99 1213.17,1571.32 1212.5,1575.5 Z"/></g>
<g><path style="opacity:1" fill="#3e3868" d="M 777.5,1539.5 C 777.5,1539.83 777.5,1540.17 777.5,1540.5C 774.167,1540.5 770.833,1540.5 767.5,1540.5C 763.822,1565.75 759.822,1590.92 755.5,1616C 759.145,1616.72 762.812,1617.22 766.5,1617.5C 767.903,1606.49 769.903,1595.66 772.5,1585C 779.856,1585.28 787.189,1586.11 794.5,1587.5C 796.821,1588.06 798.821,1589.06 800.5,1590.5C 791.198,1588.95 781.865,1587.62 772.5,1586.5C 771.058,1597.49 769.724,1608.49 768.5,1619.5C 764.766,1619.68 761.099,1619.34 757.5,1618.5C 756.791,1617.6 755.791,1617.26 754.5,1617.5C 754.5,1616.17 754.5,1614.83 754.5,1613.5C 758.058,1588.48 761.725,1563.48 765.5,1538.5C 769.5,1538.83 773.5,1539.17 777.5,1539.5 Z"/></g>
<g><path style="opacity:1" fill="#32316c" d="M 696.5,1589.5 C 704.472,1589.64 707.972,1593.64 707,1601.5C 704.103,1606.15 699.937,1607.65 694.5,1606C 688.674,1599.62 689.341,1594.12 696.5,1589.5 Z"/></g>
<g><path style="opacity:1" fill="#948439" d="M 1062.5,1576.5 C 1063.49,1581.64 1063.82,1586.97 1063.5,1592.5C 1066.83,1592.5 1070.17,1592.5 1073.5,1592.5C 1070.04,1593.48 1066.37,1593.81 1062.5,1593.5C 1062.5,1587.83 1062.5,1582.17 1062.5,1576.5 Z"/></g>
<g><path style="opacity:1" fill="#3b3769" d="M 820.5,1622.5 C 820.028,1624.53 819.028,1626.2 817.5,1627.5C 813.481,1627.35 809.481,1627.02 805.5,1626.5C 806.833,1614.83 808.167,1603.17 809.5,1591.5C 810.222,1591.92 810.722,1592.58 811,1593.5C 811.333,1592.5 811.667,1591.5 812,1590.5C 810.834,1601.83 809.334,1613.17 807.5,1624.5C 811.154,1624.94 814.821,1625.28 818.5,1625.5C 821.98,1600.14 825.646,1574.81 829.5,1549.5C 825.918,1548.73 822.418,1548.73 819,1549.5C 817.172,1559.79 815.672,1570.13 814.5,1580.5C 812.901,1580.77 811.568,1580.43 810.5,1579.5C 811.649,1579.21 812.316,1578.38 812.5,1577C 814.007,1567.12 815.674,1557.29 817.5,1547.5C 822.087,1547.11 826.754,1547.11 831.5,1547.5C 827.927,1572.51 824.26,1597.51 820.5,1622.5 Z"/></g>
<g><path style="opacity:1" fill="#857841" d="M 1017.5,1614.5 C 1022.31,1613.51 1027.31,1613.18 1032.5,1613.5C 1032.78,1615.41 1032.45,1617.08 1031.5,1618.5C 1031.5,1617.17 1031.5,1615.83 1031.5,1614.5C 1026.83,1614.5 1022.17,1614.5 1017.5,1614.5 Z"/></g>
<g><path style="opacity:1" fill="#7e7145" d="M 1080.5,1604.5 C 1075.36,1605.49 1070.03,1605.82 1064.5,1605.5C 1064.5,1608.5 1064.5,1611.5 1064.5,1614.5C 1063.52,1611.38 1063.19,1608.04 1063.5,1604.5C 1069.17,1604.5 1074.83,1604.5 1080.5,1604.5 Z"/></g>
<g><path style="opacity:1" fill="#72664b" d="M 754.5,1613.5 C 754.5,1614.83 754.5,1616.17 754.5,1617.5C 755.791,1617.26 756.791,1617.6 757.5,1618.5C 756.167,1618.5 754.833,1618.5 753.5,1618.5C 753.216,1616.59 753.549,1614.92 754.5,1613.5 Z"/></g>
<g><path style="opacity:1" fill="#a79335" d="M 820.5,1622.5 C 820.5,1624.5 820.5,1626.5 820.5,1628.5C 819.209,1628.74 818.209,1628.4 817.5,1627.5C 819.028,1626.2 820.028,1624.53 820.5,1622.5 Z"/></g>
<g><path style="opacity:1" fill="#675e50" d="M 1102.5,1632.5 C 1103.45,1633.92 1103.78,1635.59 1103.5,1637.5C 1104.5,1637.5 1105.5,1637.5 1106.5,1637.5C 1105.43,1638.43 1104.1,1638.77 1102.5,1638.5C 1102.5,1636.5 1102.5,1634.5 1102.5,1632.5 Z"/></g>
<g><path style="opacity:1" fill="#857840" d="M 1064.5,1632.5 C 1065.47,1634.95 1065.81,1637.61 1065.5,1640.5C 1062.17,1640.5 1058.83,1640.5 1055.5,1640.5C 1058.29,1639.52 1061.29,1639.19 1064.5,1639.5C 1064.5,1637.17 1064.5,1634.83 1064.5,1632.5 Z"/></g>
</svg>
</file>

<file path="scripts/createAdmin.js">
// scripts/createAdmin.js
import admin from 'firebase-admin';
import { readFileSync } from 'fs';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

// ====================================
// INITIALIZE FIREBASE ADMIN SDK
// ====================================
const serviceAccount = JSON.parse(
  readFileSync(join(__dirname, 'serviceAccountKey.json'), 'utf8')
);

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  databaseURL: `https://${serviceAccount.project_id}.firebaseio.com`
});

const db = admin.firestore();
const auth = admin.auth();

// ====================================
// CONFIG - THAY ĐỔI THÔNG TIN NÀY
// ====================================
const ADMIN_CONFIG = {
  uid: 'nxd50HYmtQXkaezI4c8b1bkhDug2', // UID từ Firebase Auth
  email: 'admin@huflit.edu.vn',          // ✅ THAY email thật của bạn
  password: 'Admin@123456',            // ✅ THAY password mạnh
  displayName: 'Super Admin',
  role: 'super_admin',
  permissions: [
    'manage_users',
    'manage_exams',
    'manage_grammar',
    'manage_vocabulary',
    'view_logs',
    'manage_admins'
  ],
  status: 'active',
  disabled: false
};

// ====================================
// MAIN FUNCTION
// ====================================
async function createSuperAdmin() {
  try {
    console.log('🚀 Starting admin creation process...\n');

    // ====================================
    // 1. Check if user exists in Auth
    // ====================================
    let userExists = false;
    try {
      const existingUser = await auth.getUser(ADMIN_CONFIG.uid);
      userExists = true;
      console.log('✅ User already exists in Firebase Auth');
      console.log(`   Current email: ${existingUser.email}`);
    } catch (error) {
      if (error.code === 'auth/user-not-found') {
        console.log('📝 User not found, will create new user');
      } else {
        throw error;
      }
    }

    // ====================================
    // 2. Create or Update Auth User
    // ====================================
    if (!userExists) {
      console.log('🔄 Creating Firebase Auth user...');
      
      await auth.createUser({
        uid: ADMIN_CONFIG.uid,
        email: ADMIN_CONFIG.email,
        password: ADMIN_CONFIG.password,
        displayName: ADMIN_CONFIG.displayName,
        emailVerified: true,
        disabled: false
      });
      
      console.log('✅ Firebase Auth user created');
      console.log(`   📧 Email: ${ADMIN_CONFIG.email}`);
      console.log(`   🆔 UID: ${ADMIN_CONFIG.uid}`);
    } else {
      console.log('🔄 Updating existing Firebase Auth user...');
      
      await auth.updateUser(ADMIN_CONFIG.uid, {
        email: ADMIN_CONFIG.email,
        displayName: ADMIN_CONFIG.displayName,
        emailVerified: true,
        disabled: false,
        password: ADMIN_CONFIG.password
      });
      
      console.log('✅ Firebase Auth user updated');
      console.log('✅ Password updated');
    }

    // ====================================
    // 3. Create Admin Document in Firestore
    // ====================================
    console.log('\n🔄 Creating admin document in Firestore...');
    
    const adminData = {
      email: ADMIN_CONFIG.email,
      role: ADMIN_CONFIG.role,
      permissions: ADMIN_CONFIG.permissions,
      status: ADMIN_CONFIG.status,
      disabled: ADMIN_CONFIG.disabled,
      createdAt: admin.firestore.FieldValue.serverTimestamp(),
      createdBy: 'script',
      updatedAt: admin.firestore.FieldValue.serverTimestamp()
    };

    await db.collection('admin_accounts').doc(ADMIN_CONFIG.uid).set(adminData, { merge: true });
    
    console.log('✅ Admin document created in Firestore');
    console.log(`   📦 Collection: admin_accounts`);
    console.log(`   🆔 Document ID: ${ADMIN_CONFIG.uid}`);

    // ====================================
    // 4. Set Custom Claims (Optional)
    // ====================================
    console.log('\n🔄 Setting custom claims...');
    
    await auth.setCustomUserClaims(ADMIN_CONFIG.uid, {
      admin: true,
      role: ADMIN_CONFIG.role,
      permissions: ADMIN_CONFIG.permissions
    });
    
    console.log('✅ Custom claims set');

    // ====================================
    // 5. Verify creation
    // ====================================
    console.log('\n🔍 Verifying...');
    
    const adminDoc = await db.collection('admin_accounts').doc(ADMIN_CONFIG.uid).get();
    if (adminDoc.exists) {
      console.log('✅ Admin document verified in Firestore');
    }
    
    const userRecord = await auth.getUser(ADMIN_CONFIG.uid);
    console.log('✅ Auth user verified');
    console.log(`   Email verified: ${userRecord.emailVerified}`);

    // ====================================
    // 6. Summary
    // ====================================
    console.log('\n' + '='.repeat(60));
    console.log('🎉 SUPER ADMIN CREATED SUCCESSFULLY!');
    console.log('='.repeat(60));
    console.log('\n📋 Admin Details:');
    console.log(`   Email:       ${ADMIN_CONFIG.email}`);
    console.log(`   Password:    ${ADMIN_CONFIG.password}`);
    console.log(`   UID:         ${ADMIN_CONFIG.uid}`);
    console.log(`   Role:        ${ADMIN_CONFIG.role}`);
    console.log(`   Status:      ${ADMIN_CONFIG.status}`);
    console.log(`   Permissions: ${ADMIN_CONFIG.permissions.join(', ')}`);
    console.log('\n🔗 Next Steps:');
    console.log('   1. Go to: http://localhost:5173/admin/login');
    console.log(`   2. Login with: ${ADMIN_CONFIG.email}`);
    console.log(`   3. Password: ${ADMIN_CONFIG.password}`);
    console.log('\n⚠️  IMPORTANT:');
    console.log('   - Change password after first login!');
    console.log('   - Delete /admin/setup route from AdminApp.jsx');
    console.log('   - Keep serviceAccountKey.json secure (already in .gitignore)');
    console.log('='.repeat(60) + '\n');

    process.exit(0);
  } catch (error) {
    console.error('\n❌ ERROR:', error.message);
    if (error.code) {
      console.error(`   Error code: ${error.code}`);
    }
    console.error('\n📋 Troubleshooting:');
    console.error('   1. Check if serviceAccountKey.json is valid');
    console.error('   2. Check Firebase project permissions');
    console.error('   3. Make sure UID format is correct');
    console.error('\nFull error:', error);
    process.exit(1);
  }
}

// ====================================
// RUN SCRIPT
// ====================================
console.log('⚡ Firebase Admin Script');
console.log('📦 Project: huflit-test-4ce25\n');

createSuperAdmin();
</file>

<file path="scripts/createFirstAdmin.js">
// scripts/createAdmin.js
import admin from 'firebase-admin';
import { readFileSync } from 'fs';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';
import dotenv from 'dotenv';

// Load env
dotenv.config();

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

// ====================================
// INITIALIZE FIREBASE ADMIN SDK
// ====================================
const serviceAccount = JSON.parse(
  readFileSync(join(__dirname, 'serviceAccountKey.json'), 'utf8')
);

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  databaseURL: `https://${serviceAccount.project_id}.firebaseio.com`
});

const db = admin.firestore();
const auth = admin.auth();

// ====================================
// CONFIG - THAY ĐỔI THÔNG TIN NÀY
// ====================================
const ADMIN_CONFIG = {
  uid: 'nxd50HYmtQXkaezI4c8b1bkhDug2', // UID từ Firebase Auth
  email: 'admin@huflit.edu.vn',          // ✅ THAY email thật
  password: 'Admin@123456',            // ✅ THAY password mạnh
  displayName: 'Super Admin',
  role: 'super_admin',
  permissions: [
    'manage_users',
    'manage_exams',
    'manage_grammar',
    'manage_vocabulary',
    'view_logs',
    'manage_admins'
  ],
  status: 'active',
  disabled: false
};

// ====================================
// MAIN FUNCTION
// ====================================
async function createSuperAdmin() {
  try {
    console.log('🚀 Starting admin creation process...\n');

    // ====================================
    // 1. Check if user exists in Auth
    // ====================================
    let userExists = false;
    try {
      await auth.getUser(ADMIN_CONFIG.uid);
      userExists = true;
      console.log('✅ User already exists in Firebase Auth');
    } catch (error) {
      if (error.code === 'auth/user-not-found') {
        console.log('📝 User not found, will create new user');
      } else {
        throw error;
      }
    }

    // ====================================
    // 2. Create or Update Auth User
    // ====================================
    if (!userExists) {
      console.log('🔄 Creating Firebase Auth user...');
      
      await auth.createUser({
        uid: ADMIN_CONFIG.uid,
        email: ADMIN_CONFIG.email,
        password: ADMIN_CONFIG.password,
        displayName: ADMIN_CONFIG.displayName,
        emailVerified: true,
        disabled: false
      });
      
      console.log('✅ Firebase Auth user created');
      console.log(`   📧 Email: ${ADMIN_CONFIG.email}`);
      console.log(`   🆔 UID: ${ADMIN_CONFIG.uid}`);
    } else {
      console.log('🔄 Updating existing Firebase Auth user...');
      
      await auth.updateUser(ADMIN_CONFIG.uid, {
        email: ADMIN_CONFIG.email,
        displayName: ADMIN_CONFIG.displayName,
        emailVerified: true,
        disabled: false
      });
      
      // Update password if needed
      if (ADMIN_CONFIG.password) {
        await auth.updateUser(ADMIN_CONFIG.uid, {
          password: ADMIN_CONFIG.password
        });
        console.log('✅ Password updated');
      }
      
      console.log('✅ Firebase Auth user updated');
    }

    // ====================================
    // 3. Create Admin Document in Firestore
    // ====================================
    console.log('\n🔄 Creating admin document in Firestore...');
    
    const adminData = {
      email: ADMIN_CONFIG.email,
      role: ADMIN_CONFIG.role,
      permissions: ADMIN_CONFIG.permissions,
      status: ADMIN_CONFIG.status,
      disabled: ADMIN_CONFIG.disabled,
      createdAt: admin.firestore.FieldValue.serverTimestamp(),
      createdBy: 'script',
      updatedAt: admin.firestore.FieldValue.serverTimestamp()
    };

    await db.collection('admin_accounts').doc(ADMIN_CONFIG.uid).set(adminData);
    
    console.log('✅ Admin document created in Firestore');
    console.log(`   📦 Collection: admin_accounts`);
    console.log(`   🆔 Document ID: ${ADMIN_CONFIG.uid}`);

    // ====================================
    // 4. Set Custom Claims (Optional)
    // ====================================
    console.log('\n🔄 Setting custom claims...');
    
    await auth.setCustomUserClaims(ADMIN_CONFIG.uid, {
      admin: true,
      role: ADMIN_CONFIG.role,
      permissions: ADMIN_CONFIG.permissions
    });
    
    console.log('✅ Custom claims set');

    // ====================================
    // 5. Summary
    // ====================================
    console.log('\n' + '='.repeat(60));
    console.log('🎉 SUPER ADMIN CREATED SUCCESSFULLY!');
    console.log('='.repeat(60));
    console.log('\n📋 Admin Details:');
    console.log(`   Email:       ${ADMIN_CONFIG.email}`);
    console.log(`   Password:    ${ADMIN_CONFIG.password}`);
    console.log(`   UID:         ${ADMIN_CONFIG.uid}`);
    console.log(`   Role:        ${ADMIN_CONFIG.role}`);
    console.log(`   Status:      ${ADMIN_CONFIG.status}`);
    console.log(`   Permissions: ${ADMIN_CONFIG.permissions.join(', ')}`);
    console.log('\n🔗 Next Steps:');
    console.log('   1. Go to: http://localhost:5173/admin/login');
    console.log(`   2. Login with: ${ADMIN_CONFIG.email}`);
    console.log(`   3. Password: ${ADMIN_CONFIG.password}`);
    console.log('\n⚠️  IMPORTANT: Change password after first login!');
    console.log('='.repeat(60) + '\n');

    process.exit(0);
  } catch (error) {
    console.error('\n❌ ERROR:', error.message);
    console.error('\nFull error:', error);
    process.exit(1);
  }
}

// ====================================
// RUN SCRIPT
// ====================================
createSuperAdmin();
</file>

<file path="scripts/migrateData.js">
import { initializeApp } from 'firebase/app';
import { 
  getFirestore, 
  collection, 
  setDoc, 
  doc, 
  serverTimestamp 
} from 'firebase/firestore';

const firebaseConfig = {
  apiKey: "AIzaSyC5HDCOZFBzI-t-ysuJ88YMHP9q_LxcNcQ",
  authDomain: "huflit-test-4ce25.firebaseapp.com",
  projectId: "huflit-test-4ce25",
  storageBucket: "huflit-test-4ce25.firebasestorage.app",
  messagingSenderId: "839404304249",
  appId: "1:839404304249:web:c9cc8830cd6b42bafc21a8"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Import dữ liệu từ file
import EXAM_DATA from '../src/data/examData.js';

async function migrateExamData() {
  try {
    console.log('🚀 Bắt đầu migrate dữ liệu exam...');

    const examCollection = collection(db, 'examData');
    let totalDocs = 0;

    // Duyệt qua tất cả exams
    for (const [examKey, examData] of Object.entries(EXAM_DATA)) {
      console.log(`📝 Processing ${examKey}...`);

      // Lưu exam metadata
      await setDoc(doc(examCollection, examKey), {
        id: examKey,
        title: examData.title || 'Exam',
        description: examData.description || '',
        createdAt: serverTimestamp(),
        updatedAt: serverTimestamp(),
      });

      // Lưu từng part
      if (examData.parts) {
        for (const [partKey, partData] of Object.entries(examData.parts)) {
          const partDocId = `${examKey}_${partKey}`;
          
          await setDoc(doc(examCollection, partDocId), {
            examId: examKey,
            partId: partKey,
            title: partData.title || `Part ${partKey}`,
            description: partData.description || '',
            type: partData.type || 'listening',
            script: partData.script || '',
            questions: partData.questions || [],
            questionsCount: partData.questions?.length || 0,
            createdAt: serverTimestamp(),
            updatedAt: serverTimestamp(),
          });

          totalDocs++;
          console.log(`  ✅ ${partDocId} uploaded`);
        }
      }
    }

    console.log(`\n✨ Migrate thành công! Tổng ${totalDocs} documents đã được upload.`);
    process.exit(0);
  } catch (error) {
    console.error('❌ Lỗi khi migrate:', error);
    process.exit(1);
  }
}

migrateExamData();
</file>

<file path="scripts/uploadAllData.js">
/**
 * Upload ALL Data (Exam, Vocabulary, Grammar) to Firebase
 * File: scripts/uploadAllData.js
 * Run: node scripts/uploadAllData.js
 * Or add to package.json: "upload:all": "node scripts/uploadAllData.js"
 * 
 * NO SHEBANG - Windows Compatible!
 */

import admin from 'firebase-admin';
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ============================================
// Initialize Firebase
// ============================================

const serviceAccountPath = path.join(__dirname, 'serviceAccountKey.json');

if (!fs.existsSync(serviceAccountPath)) {
  console.error('\n❌ ERROR: serviceAccountKey.json not found!');
  console.error('📍 Expected: scripts/serviceAccountKey.json\n');
  console.error('📝 How to fix:');
  console.error('   1. Go to Firebase Console');
  console.error('   2. Project Settings → Service Accounts');
  console.error('   3. Click "Generate New Private Key"');
  console.error('   4. Save it as: scripts/serviceAccountKey.json\n');
  process.exit(1);
}

const serviceAccount = JSON.parse(fs.readFileSync(serviceAccountPath, 'utf8'));

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  projectId: 'huflit-test-4ce25'
});

const db = admin.firestore();

// ============================================
// Import Data - With Error Handling
// ============================================

let EXAM_DATA = {};
let VOCABULARY_DATA = {};
let GRAMMAR_DATA = {};

try {
  console.log('📋 Loading data files...\n');
  
  try {
    const examModule = await import('../src/data/examData.js');
    EXAM_DATA = examModule.EXAM_DATA || examModule.default || {};
    if (Object.keys(EXAM_DATA).length > 0) {
      console.log('✅ Exam data loaded:', Object.keys(EXAM_DATA).length, 'exams');
    } else {
      console.log('⚠️  Exam data is empty');
    }
  } catch (e) {
    console.log('⚠️  Could not load exam data:', e.message);
  }

  try {
    const vocabModule = await import('../src/data/vocabularyData.js');
    VOCABULARY_DATA = vocabModule.VOCABULARY_DATA || vocabModule.default || {};
    if (Object.keys(VOCABULARY_DATA).length > 0) {
      console.log('✅ Vocabulary data loaded:', Object.keys(VOCABULARY_DATA).length, 'levels');
    } else {
      console.log('⚠️  Vocabulary data is empty');
    }
  } catch (e) {
    console.log('⚠️  Could not load vocabulary data:', e.message);
  }

  try {
    const grammarModule = await import('../src/data/grammarData.js');
    GRAMMAR_DATA = grammarModule.GRAMMAR_DATA || grammarModule.default || {};
    if (Object.keys(GRAMMAR_DATA).length > 0) {
      console.log('✅ Grammar data loaded:', Object.keys(GRAMMAR_DATA).length, 'levels');
    } else {
      console.log('⚠️  Grammar data is empty');
    }
  } catch (e) {
    console.log('⚠️  Could not load grammar data:', e.message);
  }

  if (Object.keys(EXAM_DATA).length === 0 && Object.keys(VOCABULARY_DATA).length === 0 && Object.keys(GRAMMAR_DATA).length === 0) {
    throw new Error('No data loaded! Check your data files.');
  }

} catch (error) {
  console.error('\n❌ Fatal error loading data:', error.message);
  process.exit(1);
}

// ============================================
// Utility Functions
// ============================================

function cleanData(obj, maxDepth = 3, currentDepth = 0) {
  if (currentDepth > maxDepth) return '[Data truncated]';
  if (obj === null || obj === undefined) return null;
  if (typeof obj !== 'object') return obj;

  if (Array.isArray(obj)) {
    return obj.map(item => cleanData(item, maxDepth, currentDepth + 1)).filter(item => item !== null);
  }

  const cleaned = {};
  for (const [key, value] of Object.entries(obj)) {
    if (value !== undefined && value !== null) {
      cleaned[key] = cleanData(value, maxDepth, currentDepth + 1);
    }
  }
  return cleaned;
}

function logSection(title) {
  console.log(`\n${'═'.repeat(70)}`);
  console.log(`  ${title}`);
  console.log(`${'═'.repeat(70)}\n`);
}

function logSuccess(msg, details = '') {
  console.log(`  ✅ ${msg}${details ? ` - ${details}` : ''}`);
}

function logInfo(msg) {
  console.log(`  ℹ️  ${msg}`);
}

function logError(msg) {
  console.log(`  ❌ ${msg}`);
}

// ============================================
// Upload Exam Data
// ============================================

async function uploadExamData() {
  logSection('📚 Uploading Exam Data');

  if (!EXAM_DATA || Object.keys(EXAM_DATA).length === 0) {
    logInfo('No exam data to upload');
    return 0;
  }

  let totalParts = 0;

  for (const [examId, examData] of Object.entries(EXAM_DATA)) {
    console.log(`  📖 ${examId}:`);

    try {
      // Upload exam metadata
      await db.collection('examData').doc(examId).set(
        cleanData({
          id: examId,
          title: examData.title || examId,
          description: examData.description || '',
          type: 'exam',
          partsCount: Object.keys(examData.parts || {}).length,
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${examId} metadata`);

      // Upload parts
      if (examData.parts) {
        for (const [partId, partData] of Object.entries(examData.parts)) {
          const docId = `${examId}__${partId}`;
          const questionCount = (partData.questions || []).length;

          await db.collection('examData').doc(docId).set(
            cleanData({
              examId,
              partId,
              title: partData.title || partId,
              description: partData.description || '',
              type: 'part',
              testType: partData.testType || 'listening',
              script: partData.script || '',
              content: partData.content || '',
              questions: partData.questions || [],
              questionsCount: questionCount,
              createdAt: new Date()
            }),
            { merge: true }
          );

          totalParts++;
          logSuccess(`${partId}`, `${questionCount} questions`);
        }
      }
    } catch (error) {
      logError(`${examId}: ${error.message}`);
    }
  }

  console.log(`\n  📊 Total exam parts: ${totalParts}`);
  return totalParts;
}

// ============================================
// Upload Vocabulary Data
// ============================================

async function uploadVocabularyData() {
  logSection('📖 Uploading Vocabulary Data');

  if (!VOCABULARY_DATA || Object.keys(VOCABULARY_DATA).length === 0) {
    logInfo('No vocabulary data to upload');
    return 0;
  }

  let totalCategories = 0;
  let totalWords = 0;

  for (const [levelId, levelData] of Object.entries(VOCABULARY_DATA)) {
    console.log(`  📚 Level: ${levelId}`);

    try {
      // Upload level metadata
      await db.collection('vocabularyData').doc(levelId).set(
        cleanData({
          id: levelId,
          level: levelData.level || levelId,
          type: 'level',
          categoriesCount: Object.keys(levelData.categories || {}).length,
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${levelId} metadata`);

      // Upload categories
      if (levelData.categories) {
        for (const [catId, catData] of Object.entries(levelData.categories)) {
          const docId = `${levelId}__${catId}`;
          const wordCount = (catData.words || []).length;

          await db.collection('vocabularyData').doc(docId).set(
            cleanData({
              level: levelId,
              levelName: levelData.level,
              categoryId: catId,
              title: catData.title || catId,
              description: catData.description || '',
              type: 'category',
              wordsCount: wordCount,
              words: (catData.words || []).map(w => ({
                id: w.id,
                word: w.word,
                pronunciation: w.pronunciation || '',
                definition: w.definition,
                example: w.example || '',
                vietnamese: w.vietnamese,
                alternatives: w.alternatives || []
              })),
              createdAt: new Date()
            }),
            { merge: true }
          );

          totalCategories++;
          totalWords += wordCount;
          logSuccess(`${catData.title}`, `${wordCount} words`);
        }
      }
    } catch (error) {
      logError(`${levelId}: ${error.message}`);
    }
  }

  console.log(`\n  📊 Total categories: ${totalCategories} | Total words: ${totalWords}`);
  return { categories: totalCategories, words: totalWords };
}

// ============================================
// Upload Grammar Data
// ============================================

async function uploadGrammarData() {
  logSection('📝 Uploading Grammar Data');

  if (!GRAMMAR_DATA || Object.keys(GRAMMAR_DATA).length === 0) {
    logInfo('No grammar data to upload');
    return 0;
  }

  let totalTopics = 0;
  let totalLessons = 0;
  let totalExercises = 0;

  for (const [levelId, levelData] of Object.entries(GRAMMAR_DATA)) {
    console.log(`  📚 Level: ${levelId}`);

    try {
      // Upload level metadata
      await db.collection('grammarData').doc(levelId).set(
        cleanData({
          id: levelId,
          level: levelData.level || levelId,
          description: levelData.description || '',
          type: 'level',
          topicsCount: Object.keys(levelData.topics || {}).length,
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${levelId} metadata`);

      // Upload topics
      if (levelData.topics) {
        for (const [topicId, topicData] of Object.entries(levelData.topics)) {
          const docId = `${levelId}__${topicId}`;

          const cleanLessons = (topicData.lessons || [])
            .map(lesson => ({
              lessonId: lesson.lessonId || '',
              title: lesson.title || '',
              duration: lesson.duration || '',
              content: (lesson.content || '').substring(0, 5000),
              examples: lesson.examples || []
            }))
            .filter(l => l.title);

          const cleanExercises = (topicData.exercises || [])
            .map(ex => ({
              exerciseId: ex.exerciseId || '',
              type: ex.type || '',
              difficulty: ex.difficulty || 'Easy',
              question: ex.question || '',
              options: ex.options || [],
              correctAnswer: ex.correctAnswer || '',
              hints: ex.hints || [],
              explanation: ex.explanation || ''
            }))
            .filter(e => e.question);

          await db.collection('grammarData').doc(docId).set(
            cleanData({
              level: levelId,
              levelName: levelData.level,
              topicId,
              title: topicData.title || topicId,
              description: topicData.description || '',
              difficulty: topicData.difficulty || 'Beginner',
              icon: topicData.icon || '📚',
              type: 'topic',
              lessonsCount: cleanLessons.length,
              exercisesCount: cleanExercises.length,
              lessons: cleanLessons,
              exercises: cleanExercises,
              vocabulary: topicData.vocabulary || [],
              createdAt: new Date()
            }),
            { merge: true }
          );

          totalTopics++;
          totalLessons += cleanLessons.length;
          totalExercises += cleanExercises.length;
          logSuccess(`${topicData.title}`, `${cleanLessons.length}L ${cleanExercises.length}E`);
        }
      }
    } catch (error) {
      logError(`${levelId}: ${error.message}`);
    }
  }

  console.log(`\n  📊 Total topics: ${totalTopics} | Lessons: ${totalLessons} | Exercises: ${totalExercises}`);
  return { topics: totalTopics, lessons: totalLessons, exercises: totalExercises };
}

// ============================================
// Upload Statistics
// ============================================

async function uploadStatistics(examStats, vocabStats, grammarStats) {
  logSection('📊 Uploading Statistics');

  try {
    const stats = {
      exam: {
        totalParts: examStats || 0
      },
      vocabulary: {
        totalCategories: vocabStats.categories || 0,
        totalWords: vocabStats.words || 0
      },
      grammar: {
        totalTopics: grammarStats.topics || 0,
        totalLessons: grammarStats.lessons || 0,
        totalExercises: grammarStats.exercises || 0
      },
      updatedAt: new Date()
    };

    await db.collection('metadata').doc('allStatistics').set(stats, { merge: true });

    logSuccess('Statistics updated');
    console.log(`   📚 Exam parts: ${stats.exam.totalParts}`);
    console.log(`   📖 Vocabulary categories: ${stats.vocabulary.totalCategories} (${stats.vocabulary.totalWords} words)`);
    console.log(`   📝 Grammar topics: ${stats.grammar.totalTopics} (${stats.grammar.totalLessons}L ${stats.grammar.totalExercises}E)`);
  } catch (error) {
    logError(`Statistics: ${error.message}`);
  }
}

// ============================================
// Main
// ============================================

async function main() {
  logSection('🚀 Firebase - Upload All Data (HUFLIT)');
  logInfo('Uploading Exam, Vocabulary, and Grammar data...');

  try {
    const examParts = await uploadExamData();
    const vocabData = await uploadVocabularyData();
    const grammarData = await uploadGrammarData();
    await uploadStatistics(examParts, vocabData, grammarData);

    logSection('✨ Upload Complete!');
    console.log(`\n🎉 All data successfully uploaded to Firebase Firestore!\n`);
    console.log(`📍 View your data:`);
    console.log(`   https://console.firebase.google.com/u/0/project/huflit-test-4ce25/firestore\n`);
    console.log(`📊 Summary:`);
    console.log(`   ✅ Exam data: ${examParts} parts`);
    console.log(`   ✅ Vocabulary: ${vocabData.categories} categories, ${vocabData.words} words`);
    console.log(`   ✅ Grammar: ${grammarData.topics} topics, ${grammarData.lessons} lessons, ${grammarData.exercises} exercises\n`);

    process.exit(0);
  } catch (error) {
    logSection('❌ Upload Failed!');
    console.error('\n🔴 Fatal error:', error.message);
    console.error(error.stack);
    process.exit(1);
  } finally {
    // Close Firebase connection
    await admin.app().delete();
  }
}

// Run
main();
</file>

<file path="scripts/uploadData.js">

</file>

<file path="scripts/uploadGrammarData.js">
#!/usr/bin/env node

/**
 * Upload Grammar Data to Firebase Firestore
 * File: scripts/uploadGrammarData.js
 * Run: node scripts/uploadGrammarData.js
 * Or add to package.json: "upload:grammar": "node scripts/uploadGrammarData.js"
 */

import admin from 'firebase-admin';
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';
import { GRAMMAR_DATA, COMMON_MISTAKES, STUDY_TIPS, REAL_WORLD_EXAMPLES, GRAMMAR_QUIZZES } from '../src/data/grammarData.js';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ============================================
// Configuration
// ============================================

const FIREBASE_CONFIG = {
  projectId: 'huflit-test-4ce25',
  databaseURL: 'https://huflit-test-4ce25.firebaseio.com'
};

const SERVICE_ACCOUNT_PATH = path.join(__dirname, 'serviceAccountKey.json');

// ============================================
// Initialize Firebase
// ============================================

function initializeFirebase() {
  if (!fs.existsSync(SERVICE_ACCOUNT_PATH)) {
    console.error('\n❌ ERROR: serviceAccountKey.json not found!');
    console.error(`📍 Expected path: ${SERVICE_ACCOUNT_PATH}\n`);
    console.error('📝 Steps to fix:');
    console.error('   1. Go to Firebase Console');
    console.error('   2. Project Settings → Service Accounts');
    console.error('   3. Click "Generate New Private Key"');
    console.error('   4. Save it as: scripts/serviceAccountKey.json\n');
    process.exit(1);
  }

  try {
    const serviceAccount = JSON.parse(fs.readFileSync(SERVICE_ACCOUNT_PATH, 'utf8'));
    
    admin.initializeApp({
      credential: admin.credential.cert(serviceAccount),
      projectId: FIREBASE_CONFIG.projectId
    });

    console.log('✅ Firebase initialized successfully\n');
    return admin.firestore();
  } catch (error) {
    console.error('❌ Firebase initialization failed:', error.message);
    process.exit(1);
  }
}

// ============================================
// Utility Functions
// ============================================

function logSection(title) {
  console.log(`\n${'═'.repeat(70)}`);
  console.log(`  ${title}`);
  console.log(`${'═'.repeat(70)}\n`);
}

function logSuccess(msg, details = '') {
  console.log(`  ✅ ${msg}${details ? ` - ${details}` : ''}`);
}

function logInfo(msg) {
  console.log(`  ℹ️  ${msg}`);
}

function logError(msg) {
  console.log(`  ❌ ${msg}`);
}

function logWarning(msg) {
  console.log(`  ⚠️  ${msg}`);
}

function cleanData(obj, maxDepth = 3, currentDepth = 0) {
  if (currentDepth > maxDepth) return '[Data truncated]';
  if (obj === null || obj === undefined) return null;
  if (typeof obj !== 'object') return obj;
  
  if (Array.isArray(obj)) {
    return obj
      .map(item => cleanData(item, maxDepth, currentDepth + 1))
      .filter(item => item !== null);
  }

  const cleaned = {};
  for (const [key, value] of Object.entries(obj)) {
    if (value !== undefined && value !== null) {
      cleaned[key] = cleanData(value, maxDepth, currentDepth + 1);
    }
  }
  return cleaned;
}

function truncateString(str, maxLength = 5000) {
  if (typeof str !== 'string') return str;
  return str.length > maxLength ? str.substring(0, maxLength) + '...' : str;
}

// ============================================
// Upload Grammar Data
// ============================================

async function uploadGrammarTopics(db) {
  logSection('📚 Uploading Grammar Topics');

  let totalTopics = 0;
  let totalLessons = 0;
  let totalExercises = 0;

  for (const [levelKey, levelData] of Object.entries(GRAMMAR_DATA)) {
    const level = levelData.level || levelKey;
    console.log(`\n  📖 Level: ${level}`);

    try {
      const topics = levelData.topics || {};

      for (const [topicKey, topicData] of Object.entries(topics)) {
        const docId = `${level}_${topicData.id}`;

        // Process lessons
        const lessons = (topicData.lessons || []).map(lesson => ({
          lessonId: lesson.lessonId || '',
          title: lesson.title || '',
          duration: lesson.duration || '',
          content: truncateString(lesson.content || ''),
          examples: (lesson.examples || []).slice(0, 10), // Limit to 10 examples
          // Omit vocabulary field to save space
        }));

        // Process exercises
        const exercises = (topicData.exercises || []).map(exercise => ({
          exerciseId: exercise.exerciseId || '',
          type: exercise.type || 'multiple_choice',
          difficulty: exercise.difficulty || 'Easy',
          question: exercise.question || '',
          options: (exercise.options || []).slice(0, 6),
          correctAnswer: exercise.correctAnswer || '',
          hints: exercise.hints || [],
          explanation: truncateString(exercise.explanation || '', 1000),
        }));

        // Upload topic
        const topicDoc = {
          level: level,
          levelKey: levelKey,
          topicId: topicData.id,
          title: topicData.title || '',
          description: topicData.description || '',
          difficulty: topicData.difficulty || 'Beginner',
          icon: topicData.icon || '📚',
          lessonsCount: lessons.length,
          exercisesCount: exercises.length,
          lessons: lessons,
          exercises: exercises,
          createdAt: new Date(),
          updatedAt: new Date(),
          // Metadata
          type: 'grammar_topic',
          searchKeywords: [
            (topicData.title || '').toLowerCase(),
            (level).toLowerCase(),
            (topicData.difficulty || 'beginner').toLowerCase()
          ]
        };

        await db.collection('grammarData').doc(docId).set(cleanData(topicDoc), { merge: true });

        totalTopics++;
        totalLessons += lessons.length;
        totalExercises += exercises.length;

        logSuccess(
          `${topicData.title}`,
          `${lessons.length} lessons, ${exercises.length} exercises`
        );
      }
    } catch (error) {
      logError(`Failed to upload ${level} topics: ${error.message}`);
    }
  }

  console.log(`\n  📊 Summary:`);
  console.log(`     • Topics: ${totalTopics}`);
  console.log(`     • Lessons: ${totalLessons}`);
  console.log(`     • Exercises: ${totalExercises}`);

  return { totalTopics, totalLessons, totalExercises };
}

// ============================================
// Upload Common Mistakes
// ============================================

async function uploadCommonMistakes(db) {
  logSection('⚠️  Uploading Common Mistakes');

  if (!COMMON_MISTAKES || COMMON_MISTAKES.length === 0) {
    logWarning('No common mistakes data found');
    return 0;
  }

  try {
    const mistakes = COMMON_MISTAKES.map((mistake, index) => ({
      id: mistake.id || `mistake_${index}`,
      mistake: mistake.mistake || '',
      correct: mistake.correct || '',
      explanation: truncateString(mistake.explanation || '', 2000),
      topic: mistake.topic || '',
      createdAt: new Date(),
      type: 'common_mistake'
    }));

    for (const mistake of mistakes) {
      await db.collection('grammarData').doc(`mistake_${mistake.id}`).set(
        cleanData(mistake),
        { merge: true }
      );
    }

    logSuccess(`${mistakes.length} common mistakes uploaded`);
    return mistakes.length;
  } catch (error) {
    logError(`Failed to upload common mistakes: ${error.message}`);
    return 0;
  }
}

// ============================================
// Upload Study Tips
// ============================================

async function uploadStudyTips(db) {
  logSection('💡 Uploading Study Tips');

  if (!STUDY_TIPS || STUDY_TIPS.length === 0) {
    logWarning('No study tips data found');
    return 0;
  }

  try {
    const tips = STUDY_TIPS.map((tip, index) => ({
      id: tip.id || `tip_${index}`,
      title: tip.title || '',
      description: truncateString(tip.description || '', 2000),
      relatedTopics: tip.relatedTopics || [],
      createdAt: new Date(),
      type: 'study_tip'
    }));

    for (const tip of tips) {
      await db.collection('grammarData').doc(`tip_${tip.id}`).set(
        cleanData(tip),
        { merge: true }
      );
    }

    logSuccess(`${tips.length} study tips uploaded`);
    return tips.length;
  } catch (error) {
    logError(`Failed to upload study tips: ${error.message}`);
    return 0;
  }
}

// ============================================
// Upload Real World Examples
// ============================================

async function uploadRealWorldExamples(db) {
  logSection('🌍 Uploading Real World Examples');

  if (!REAL_WORLD_EXAMPLES || REAL_WORLD_EXAMPLES.length === 0) {
    logWarning('No real world examples found');
    return 0;
  }

  try {
    const examples = REAL_WORLD_EXAMPLES.map((example, index) => ({
      id: example.id || `example_${index}`,
      context: example.context || '',
      original: example.original || '',
      explanation: truncateString(example.explanation || '', 2000),
      topic: example.topic || '',
      createdAt: new Date(),
      type: 'real_world_example'
    }));

    for (const example of examples) {
      await db.collection('grammarData').doc(`example_${example.id}`).set(
        cleanData(example),
        { merge: true }
      );
    }

    logSuccess(`${examples.length} real world examples uploaded`);
    return examples.length;
  } catch (error) {
    logError(`Failed to upload real world examples: ${error.message}`);
    return 0;
  }
}

// ============================================
// Upload Grammar Quizzes
// ============================================

async function uploadGrammarQuizzes(db) {
  logSection('🎯 Uploading Grammar Quizzes');

  if (!GRAMMAR_QUIZZES || GRAMMAR_QUIZZES.length === 0) {
    logWarning('No grammar quizzes found');
    return 0;
  }

  try {
    const quizzes = GRAMMAR_QUIZZES.map((quiz, index) => ({
      id: quiz.quizId || `quiz_${index}`,
      quizId: quiz.quizId || `quiz_${index}`,
      title: quiz.title || '',
      difficulty: quiz.difficulty || 'Beginner',
      duration: quiz.duration || 0,
      passingScore: quiz.passingScore || 70,
      topics: quiz.topics || [],
      questions: (quiz.questions || []).map(q => ({
        id: q.id || '',
        question: q.question || '',
        type: q.type || 'multiple_choice',
        options: q.options || [],
        explanation: truncateString(q.explanation || '', 1000)
      })).slice(0, 50), // Limit to 50 questions
      questionsCount: (quiz.questions || []).length,
      createdAt: new Date(),
      type: 'grammar_quiz'
    }));

    for (const quiz of quizzes) {
      await db.collection('grammarData').doc(`quiz_${quiz.id}`).set(
        cleanData(quiz),
        { merge: true }
      );
    }

    logSuccess(`${quizzes.length} grammar quizzes uploaded`);
    return quizzes.length;
  } catch (error) {
    logError(`Failed to upload grammar quizzes: ${error.message}`);
    return 0;
  }
}

// ============================================
// Upload Statistics
// ============================================

async function uploadStatistics(db, stats) {
  logSection('📊 Uploading Statistics');

  try {
    const statistics = {
      grammarTopics: stats.totalTopics || 0,
      grammarLessons: stats.totalLessons || 0,
      grammarExercises: stats.totalExercises || 0,
      commonMistakes: stats.commonMistakes || 0,
      studyTips: stats.studyTips || 0,
      realWorldExamples: stats.realWorldExamples || 0,
      grammarQuizzes: stats.grammarQuizzes || 0,
      updatedAt: new Date(),
      uploadedAt: new Date()
    };

    await db.collection('metadata').doc('grammarStatistics').set(
      statistics,
      { merge: true }
    );

    logSuccess('Statistics metadata uploaded');
    console.log(`\n  📈 Data Summary:`);
    console.log(`     • Topics: ${statistics.grammarTopics}`);
    console.log(`     • Lessons: ${statistics.grammarLessons}`);
    console.log(`     • Exercises: ${statistics.grammarExercises}`);
    console.log(`     • Common Mistakes: ${statistics.commonMistakes}`);
    console.log(`     • Study Tips: ${statistics.studyTips}`);
    console.log(`     • Real World Examples: ${statistics.realWorldExamples}`);
    console.log(`     • Quizzes: ${statistics.grammarQuizzes}\n`);

    return statistics;
  } catch (error) {
    logError(`Failed to upload statistics: ${error.message}`);
  }
}

// ============================================
// Main Upload Function
// ============================================

async function main() {
  logSection('🚀 Firebase Grammar Data Upload');
  
  console.log('📋 Initializing Firebase...\n');
  const db = initializeFirebase();

  try {
    const stats = {
      totalTopics: 0,
      totalLessons: 0,
      totalExercises: 0,
      commonMistakes: 0,
      studyTips: 0,
      realWorldExamples: 0,
      grammarQuizzes: 0
    };

    // Upload all data
    const topicStats = await uploadGrammarTopics(db);
    stats.totalTopics = topicStats.totalTopics;
    stats.totalLessons = topicStats.totalLessons;
    stats.totalExercises = topicStats.totalExercises;

    stats.commonMistakes = await uploadCommonMistakes(db);
    stats.studyTips = await uploadStudyTips(db);
    stats.realWorldExamples = await uploadRealWorldExamples(db);
    stats.grammarQuizzes = await uploadGrammarQuizzes(db);

    // Upload statistics
    await uploadStatistics(db, stats);

    logSection('✨ Upload Complete!');
    console.log(`🎉 All grammar data successfully uploaded to Firebase Firestore!\n`);
    console.log(`📍 View your data:`);
    console.log(`   https://console.firebase.google.com/u/0/project/${FIREBASE_CONFIG.projectId}/firestore\n`);
    console.log(`📝 Collection: grammarData`);
    console.log(`   Documents: ${Object.keys(GRAMMAR_DATA).reduce((sum, level) => sum + Object.keys(GRAMMAR_DATA[level].topics || {}).length, 0)} topics\n`);

    process.exit(0);
  } catch (error) {
    logSection('❌ Upload Failed!');
    console.error('\n🔴 Fatal error:', error.message);
    console.error(error);
    process.exit(1);
  } finally {
    await admin.app().delete();
  }
}

// Run the upload
main();
</file>

<file path="scripts/uploadRealData.js">
#!/usr/bin/env node

/**
 * Upload REAL Data from Local Files to Firebase
 * File: scripts/uploadRealData.js
 * Run: npm run upload:real
 */

import admin from 'firebase-admin';
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ============================================
// Initialize Firebase
// ============================================
const serviceAccountPath = path.join(__dirname, 'serviceAccountKey.json');

if (!fs.existsSync(serviceAccountPath)) {
  console.error('\n❌ ERROR: serviceAccountKey.json not found!');
  console.error('📍 Expected: scripts/serviceAccountKey.json\n');
  process.exit(1);
}

const serviceAccount = JSON.parse(fs.readFileSync(serviceAccountPath, 'utf8'));

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  projectId: 'huflit-test-4ce25'
});

const db = admin.firestore();

// ============================================
// Import Real Data
// ============================================

// Dynamically import data files
let EXAM_DATA = {};
let VOCABULARY_DATA = {};
let GRAMMAR_DATA = {};

try {
  const examModule = await import('../src/data/examData.js');
  EXAM_DATA = examModule.EXAM_DATA || examModule.default || {};
  console.log('✅ Exam data loaded');
} catch (e) {
  console.warn('⚠️  Could not load exam data:', e.message);
}

try {
  const vocabModule = await import('../src/data/vocabularyData.js');
  VOCABULARY_DATA = vocabModule.VOCABULARY_DATA || vocabModule.default || {};
  console.log('✅ Vocabulary data loaded');
} catch (e) {
  console.warn('⚠️  Could not load vocabulary data:', e.message);
}

try {
  const grammarModule = await import('../src/data/grammarData.js');
  GRAMMAR_DATA = grammarModule.GRAMMAR_DATA || grammarModule.default || {};
  console.log('✅ Grammar data loaded');
} catch (e) {
  console.warn('⚠️  Could not load grammar data:', e.message);
}

// ============================================
// Utility Functions
// ============================================

function cleanData(obj) {
  if (obj === null || obj === undefined) return null;
  if (Array.isArray(obj)) {
    return obj.map(item => cleanData(item)).filter(item => item !== null);
  }
  if (typeof obj !== 'object') return obj;
  
  const cleaned = {};
  for (const [key, value] of Object.entries(obj)) {
    if (value !== undefined && value !== null) {
      if (typeof value === 'object') {
        cleaned[key] = cleanData(value);
      } else {
        cleaned[key] = value;
      }
    }
  }
  return cleaned;
}

function logSection(title) {
  console.log(`\n${'='.repeat(60)}`);
  console.log(title);
  console.log(`${'='.repeat(60)}`);
}

function logSuccess(msg) {
  console.log(`  ✅ ${msg}`);
}

function logInfo(msg) {
  console.log(`  ℹ️  ${msg}`);
}

function logError(msg) {
  console.log(`  ❌ ${msg}`);
}

// ============================================
// Upload Functions
// ============================================

async function uploadExamData() {
  logSection('📚 Uploading Exam Data');

  if (!EXAM_DATA || Object.keys(EXAM_DATA).length === 0) {
    logInfo('No exam data to upload');
    return 0;
  }

  let totalParts = 0;

  for (const [examId, examData] of Object.entries(EXAM_DATA)) {
    console.log(`\n  📖 ${examId}:`);

    try {
      // Upload exam metadata
      await db.collection('examData').doc(examId).set(
        cleanData({
          id: examId,
          title: examData.title || examId,
          description: examData.description || '',
          type: 'exam',
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${examId} metadata`);

      // Upload parts
      if (examData.parts) {
        for (const [partId, partData] of Object.entries(examData.parts)) {
          const docId = `${examId}__${partId}`;

          await db.collection('examData').doc(docId).set(
            cleanData({
              examId,
              partId,
              title: partData.title || partId,
              description: partData.description || '',
              type: 'part',
              testType: partData.testType || 'listening',
              script: partData.script || '',
              content: partData.content || '',
              questions: partData.questions || [],
              questionsCount: (partData.questions || []).length,
              createdAt: new Date()
            }),
            { merge: true }
          );

          totalParts++;
          logSuccess(`${partId} (${(partData.questions || []).length} questions)`);
        }
      }
    } catch (error) {
      logError(`${examId}: ${error.message}`);
    }
  }

  console.log(`\n✨ Total exam parts uploaded: ${totalParts}`);
  return totalParts;
}

async function uploadVocabularyData() {
  logSection('📖 Uploading Vocabulary Data');

  if (!VOCABULARY_DATA || Object.keys(VOCABULARY_DATA).length === 0) {
    logInfo('No vocabulary data to upload');
    return 0;
  }

  let totalCategories = 0;

  for (const [levelId, levelData] of Object.entries(VOCABULARY_DATA)) {
    console.log(`\n  📚 Level: ${levelId}`);

    try {
      // Upload level metadata
      await db.collection('vocabularyData').doc(levelId).set(
        cleanData({
          id: levelId,
          level: levelData.level || levelId,
          type: 'level',
          categoriesCount: Object.keys(levelData.categories || {}).length,
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${levelId} metadata`);

      // Upload categories
      if (levelData.categories) {
        for (const [catId, catData] of Object.entries(levelData.categories)) {
          const docId = `${levelId}__${catId}`;

          await db.collection('vocabularyData').doc(docId).set(
            cleanData({
              level: levelId,
              levelName: levelData.level,
              categoryId: catId,
              title: catData.title || catId,
              description: catData.description || '',
              type: 'category',
              wordsCount: (catData.words || []).length,
              words: (catData.words || []).map(w => ({
                id: w.id,
                word: w.word,
                pronunciation: w.pronunciation || '',
                definition: w.definition,
                example: w.example || '',
                vietnamese: w.vietnamese,
                alternatives: w.alternatives || []
              })),
              createdAt: new Date()
            }),
            { merge: true }
          );

          totalCategories++;
          logSuccess(`${catData.title} (${(catData.words || []).length} words)`);
        }
      }
    } catch (error) {
      logError(`${levelId}: ${error.message}`);
    }
  }

  console.log(`\n✨ Total vocabulary categories uploaded: ${totalCategories}`);
  return totalCategories;
}

async function uploadGrammarData() {
  logSection('📝 Uploading Grammar Data');

  if (!GRAMMAR_DATA || Object.keys(GRAMMAR_DATA).length === 0) {
    logInfo('No grammar data to upload');
    return 0;
  }

  let totalTopics = 0;

  for (const [levelId, levelData] of Object.entries(GRAMMAR_DATA)) {
    console.log(`\n  📚 Level: ${levelId}`);

    try {
      // Upload level metadata
      await db.collection('grammarData').doc(levelId).set(
        cleanData({
          id: levelId,
          level: levelData.level || levelId,
          description: levelData.description || '',
          type: 'level',
          topicsCount: Object.keys(levelData.topics || {}).length,
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${levelId} metadata`);

      // Upload topics
      if (levelData.topics) {
        for (const [topicId, topicData] of Object.entries(levelData.topics)) {
          const docId = `${levelId}__${topicId}`;

          const cleanLessons = (topicData.lessons || [])
            .map(lesson => ({
              lessonId: lesson.lessonId || '',
              title: lesson.title || '',
              duration: lesson.duration || '',
              content: (lesson.content || '').substring(0, 5000),
              examples: lesson.examples || []
            }))
            .filter(l => l.title);

          const cleanExercises = (topicData.exercises || [])
            .map(ex => ({
              exerciseId: ex.exerciseId || '',
              type: ex.type || '',
              difficulty: ex.difficulty || 'Easy',
              question: ex.question || '',
              options: ex.options || [],
              correctAnswer: ex.correctAnswer || '',
              hints: ex.hints || [],
              explanation: ex.explanation || ''
            }))
            .filter(e => e.question);

          await db.collection('grammarData').doc(docId).set(
            cleanData({
              level: levelId,
              levelName: levelData.level,
              topicId,
              title: topicData.title || topicId,
              description: topicData.description || '',
              difficulty: topicData.difficulty || 'Beginner',
              icon: topicData.icon || '📚',
              type: 'topic',
              lessonsCount: cleanLessons.length,
              exercisesCount: cleanExercises.length,
              lessons: cleanLessons,
              exercises: cleanExercises,
              vocabulary: topicData.vocabulary || [],
              createdAt: new Date()
            }),
            { merge: true }
          );

          totalTopics++;
          logSuccess(`${topicData.title} (${cleanLessons.length} lessons, ${cleanExercises.length} exercises)`);
        }
      }
    } catch (error) {
      logError(`${levelId}: ${error.message}`);
    }
  }

  console.log(`\n✨ Total grammar topics uploaded: ${totalTopics}`);
  return totalTopics;
}

async function uploadMetadata() {
  logSection('📊 Uploading Statistics');

  try {
    const stats = {
      totalExams: Object.keys(EXAM_DATA).length,
      totalExamParts: Object.values(EXAM_DATA).reduce(
        (acc, exam) => acc + Object.keys(exam.parts || {}).length, 0
      ),
      totalVocabularyLevels: Object.keys(VOCABULARY_DATA).length,
      totalVocabularyCategories: Object.values(VOCABULARY_DATA).reduce(
        (acc, level) => acc + Object.keys(level.categories || {}).length, 0
      ),
      totalVocabularyWords: Object.values(VOCABULARY_DATA).reduce((acc, level) => {
        return acc + Object.values(level.categories || {}).reduce(
          (catAcc, cat) => catAcc + (cat.words || []).length, 0
        );
      }, 0),
      totalGrammarLevels: Object.keys(GRAMMAR_DATA).length,
      totalGrammarTopics: Object.values(GRAMMAR_DATA).reduce(
        (acc, level) => acc + Object.keys(level.topics || {}).length, 0
      ),
      updatedAt: new Date()
    };

    await db.collection('metadata').doc('statistics').set(stats, { merge: true });
    
    logSuccess('Statistics updated');
    console.log(`   📈 Exams: ${stats.totalExams}`);
    console.log(`   📝 Exam Parts: ${stats.totalExamParts}`);
    console.log(`   📖 Vocabulary Categories: ${stats.totalVocabularyCategories}`);
    console.log(`   📚 Vocabulary Words: ${stats.totalVocabularyWords}`);
    console.log(`   🎓 Grammar Topics: ${stats.totalGrammarTopics}`);
  } catch (error) {
    logError(`Statistics: ${error.message}`);
  }
}

// ============================================
// Main
// ============================================

async function main() {
  logSection('🚀 Firebase Real Data Upload');
  logInfo('This will upload ALL your local data to Firebase');

  try {
    console.log('\n📋 Loading data files...\n');

    const exams = await uploadExamData();
    const vocab = await uploadVocabularyData();
    const grammar = await uploadGrammarData();
    await uploadMetadata();

    logSection('✨ Upload Complete!');
    console.log(`\n📊 Summary:`);
    console.log(`   📚 Exam parts: ${exams}`);
    console.log(`   📖 Vocabulary categories: ${vocab}`);
    console.log(`   📝 Grammar topics: ${grammar}`);
    console.log(`\n🎉 All data successfully uploaded to Firebase Firestore!`);
    console.log(`\n📍 View your data:`);
    console.log(`   https://console.firebase.google.com/u/0/project/huflit-test-4ce25/firestore\n`);

    process.exit(0);
  } catch (error) {
    console.error('\n❌ Fatal error:', error.message);
    console.error(error);
    process.exit(1);
  }
}

main();
</file>

<file path="scripts/uploadvocabularyData.js">
#!/usr/bin/env node

/**
 * Upload Vocabulary Data to Firebase
 * File: scripts/uploadvocabularyData.js
 * Run: node scripts/uploadvocabularyData.js
 * or add to package.json: "upload:vocabulary": "node scripts/uploadvocabularyData.js"
 */

import admin from 'firebase-admin';
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ============================================
// Initialize Firebase
// ============================================
const serviceAccountPath = path.join(__dirname, 'serviceAccountKey.json');

if (!fs.existsSync(serviceAccountPath)) {
  console.error('\n❌ ERROR: serviceAccountKey.json not found!');
  console.error('📍 Expected: scripts/serviceAccountKey.json\n');
  process.exit(1);
}

const serviceAccount = JSON.parse(fs.readFileSync(serviceAccountPath, 'utf8'));

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  projectId: 'huflit-test-4ce25'
});

const db = admin.firestore();

// ============================================
// Import Real Vocabulary Data
// ============================================
let VOCABULARY_DATA = {};

try {
  const vocabModule = await import('../src/data/vocabularyData.js');
  VOCABULARY_DATA = vocabModule.VOCABULARY_DATA || vocabModule.default || {};
  console.log('✅ Vocabulary data loaded');
} catch (e) {
  console.error('❌ Could not load vocabulary data:', e.message);
  process.exit(1);
}

if (Object.keys(VOCABULARY_DATA).length === 0) {
  console.error('❌ No vocabulary data found in vocabularyData.js');
  process.exit(1);
}

// ============================================
// Utility Functions
// ============================================
function cleanData(obj) {
  if (obj === null || obj === undefined) return null;
  if (Array.isArray(obj)) {
    return obj.map(item => cleanData(item)).filter(item => item !== null);
  }
  if (typeof obj !== 'object') return obj;
  
  const cleaned = {};
  for (const [key, value] of Object.entries(obj)) {
    if (value !== undefined && value !== null) {
      if (typeof value === 'object') {
        cleaned[key] = cleanData(value);
      } else {
        cleaned[key] = value;
      }
    }
  }
  return cleaned;
}

function logSection(title) {
  console.log(`\n${'='.repeat(60)}`);
  console.log(title);
  console.log(`${'='.repeat(60)}`);
}

function logSuccess(msg) {
  console.log(`  ✅ ${msg}`);
}

function logInfo(msg) {
  console.log(`  ℹ️  ${msg}`);
}

function logError(msg) {
  console.log(`  ❌ ${msg}`);
}

// ============================================
// Upload Functions
// ============================================
async function uploadVocabularyLevels() {
  logSection('📖 Uploading Vocabulary Levels');

  let totalLevels = 0;

  for (const [levelId, levelData] of Object.entries(VOCABULARY_DATA)) {
    console.log(`\n  📚 Level: ${levelId}`);

    try {
      // Upload level metadata
      await db.collection('vocabularyData').doc(levelId).set(
        cleanData({
          id: levelId,
          level: levelData.level || levelId,
          description: levelData.description || '',
          type: 'level',
          categoriesCount: Object.keys(levelData.categories || {}).length,
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${levelId} metadata`);

      totalLevels++;
    } catch (error) {
      logError(`${levelId}: ${error.message}`);
    }
  }

  console.log(`\n✨ Total vocabulary levels uploaded/updated: ${totalLevels}`);
  return totalLevels;
}

async function uploadVocabularyCategories() {
  logSection('📂 Uploading Vocabulary Categories');

  let totalCategories = 0;

  for (const [levelId, levelData] of Object.entries(VOCABULARY_DATA)) {
    if (!levelData.categories) continue;

    for (const [catId, catData] of Object.entries(levelData.categories)) {
      const docId = `${levelId}__${catId}`;

      try {
        // Clean words array
        const cleanWords = (catData.words || []).map(word => ({
          id: word.id,
          word: word.word || '',
          pronunciation: word.pronunciation || '',
          definition: word.definition || '',
          example: word.example || '',
          vietnamese: word.vietnamese || '',
          alternatives: word.alternatives || []
        })).filter(w => w.word); // Only keep if word exists

        await db.collection('vocabularyData').doc(docId).set(
          cleanData({
            level: levelId,
            levelName: levelData.level,
            categoryId: catId,
            title: catData.title || catId,
            description: catData.description || '',
            type: 'category',
            wordsCount: cleanWords.length,
            words: cleanWords,
            createdAt: new Date()
          }),
          { merge: true }
        );

        totalCategories++;
        logSuccess(`${catData.title || catId} (${cleanWords.length} words)`);
      } catch (error) {
        logError(`${docId}: ${error.message}`);
      }
    }
  }

  console.log(`\n✨ Total vocabulary categories uploaded/updated: ${totalCategories}`);
  return totalCategories;
}

async function uploadVocabularyMetadata() {
  logSection('📊 Uploading Vocabulary Statistics');

  try {
    let totalWords = 0;
    let totalCategories = 0;
    let totalLevels = Object.keys(VOCABULARY_DATA).length;

    for (const levelData of Object.values(VOCABULARY_DATA)) {
      for (const catData of Object.values(levelData.categories || {})) {
        totalCategories++;
        totalWords += (catData.words || []).length;
      }
    }

    const stats = {
      totalLevels,
      totalCategories,
      totalWords,
      updatedAt: new Date()
    };

    await db.collection('metadata').doc('vocabularyStats').set(stats, { merge: true });
    
    logSuccess('Vocabulary statistics updated');
    console.log(`   📚 Levels: ${totalLevels}`);
    console.log(`   📂 Categories: ${totalCategories}`);
    console.log(`   📖 Words: ${totalWords}`);
  } catch (error) {
    logError(`Statistics: ${error.message}`);
  }
}

// ============================================
// Main
// ============================================
async function main() {
  logSection('🚀 Firebase Vocabulary Data Upload');
  logInfo('This will upload ALL vocabulary data to Firebase');

  try {
    console.log('\n📋 Loading vocabulary data...\n');

    const levels = await uploadVocabularyLevels();
    const categories = await uploadVocabularyCategories();
    await uploadVocabularyMetadata();

    logSection('✨ Upload Complete!');
    console.log(`\n📊 Summary:`);
    console.log(`   📚 Levels: ${levels}`);
    console.log(`   📂 Categories: ${categories}`);
    console.log(`\n🎉 All vocabulary data successfully uploaded to Firebase Firestore!`);
    console.log(`\n📍 View your data:`);
    console.log(`   https://console.firebase.google.com/u/0/project/huflit-test-4ce25/firestore (collection: vocabularyData)\n`);

    process.exit(0);
  } catch (error) {
    console.error('\n❌ Fatal error:', error.message);
    process.exit(1);
  }
}

main();
</file>

<file path="src/admin/components/AdminLogsViewer.jsx">

</file>

<file path="src/admin/components/ExamManagement.jsx">

</file>

<file path="src/admin/components/GrammarManagement.jsx">

</file>

<file path="src/admin/components/UserManagement.jsx">

</file>

<file path="src/admin/components/VocabularyManagement.jsx">

</file>

<file path="src/admin/config/adminAuth.js">
// src/admin/config/adminAuth.js
import { 
  signInWithEmailAndPassword, 
  signOut,
  setPersistence,
  browserLocalPersistence 
} from 'firebase/auth';
import { doc, getDoc } from 'firebase/firestore';
import { auth, db } from '../../config/firebase';

/**
 * Kiểm tra user có phải admin không
 */
export const checkAdminRole = async (uid) => {
  try {
    // ✅ Sửa collection name từ 'admins' → 'admin_accounts'
    const adminRef = doc(db, 'admin_accounts', uid);
    const adminSnap = await getDoc(adminRef);
    
    if (!adminSnap.exists()) {
      return { isAdmin: false, error: 'Không có quyền admin' };
    }
    
    const adminData = adminSnap.data();
    
    // Kiểm tra admin có bị disable không
    if (adminData.disabled || adminData.status !== 'active') {
      return { isAdmin: false, error: 'Tài khoản admin đã bị khóa' };
    }
    
    return { 
      isAdmin: true, 
      adminData: {
        uid,
        email: adminData.email,
        role: adminData.role || 'admin',
        permissions: adminData.permissions || [],
        status: adminData.status,
        createdAt: adminData.createdAt
      }
    };
  } catch (error) {
    console.error('❌ Error checking admin role:', error);
    return { isAdmin: false, error: error.message };
  }
};

/**
 * Đăng nhập admin
 */
export const adminSignIn = async (email, password) => {
  try {
    // Set persistence
    await setPersistence(auth, browserLocalPersistence);
    
    // Đăng nhập
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;
    
    // Kiểm tra quyền admin
    const { isAdmin, adminData, error } = await checkAdminRole(user.uid);
    
    if (!isAdmin) {
      // Nếu không phải admin, đăng xuất luôn
      await signOut(auth);
      throw new Error(error || 'Không có quyền truy cập Admin');
    }
    
    console.log('✅ Admin signed in:', adminData.email);
    
    return { 
      success: true, 
      admin: adminData 
    };
  } catch (error) {
    console.error('❌ Admin sign in error:', error);
    return { 
      success: false, 
      error: error.message 
    };
  }
};

/**
 * Đăng xuất admin
 */
export const adminSignOut = async () => {
  try {
    await signOut(auth);
    console.log('✅ Admin signed out');
    return { success: true };
  } catch (error) {
    console.error('❌ Admin sign out error:', error);
    return { success: false, error: error.message };
  }
};
</file>

<file path="src/admin/hooks/useAdminAuth.js">
// src/admin/hooks/useAdminAuth.js
import { useState, useEffect } from 'react';
import { onAuthStateChanged } from 'firebase/auth';
import { auth } from '../../config/firebase';
import { checkAdminRole, adminSignIn, adminSignOut } from '../config/adminAuth';

export const useAdminAuth = () => {
  const [admin, setAdmin] = useState(null);
  const [isAdmin, setIsAdmin] = useState(false);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, async (user) => {
      if (!user) {
        setAdmin(null);
        setIsAdmin(false);
        setLoading(false);
        return;
      }

      // Kiểm tra quyền admin
      const { isAdmin: hasAdminRole, adminData, error: checkError } = 
        await checkAdminRole(user.uid);

      if (hasAdminRole) {
        setAdmin(adminData);
        setIsAdmin(true);
        setError(null);
      } else {
        setAdmin(null);
        setIsAdmin(false);
        setError(checkError);
        // Tự động đăng xuất nếu không phải admin
        await adminSignOut();
      }
      
      setLoading(false);
    });

    return unsubscribe;
  }, []);

  const signIn = async (email, password) => {
    setLoading(true);
    setError(null);
    
    const result = await adminSignIn(email, password);
    
    if (result.success) {
      setAdmin(result.admin);
      setIsAdmin(true);
    } else {
      setError(result.error);
    }
    
    setLoading(false);
    return result;
  };

  const signOut = async () => {
    setLoading(true);
    const result = await adminSignOut();
    
    if (result.success) {
      setAdmin(null);
      setIsAdmin(false);
      setError(null);
    }
    
    setLoading(false);
    return result;
  };

  return {
    admin,
    isAdmin,
    loading,
    error,
    signIn,
    signOut
  };
};

export default useAdminAuth;
</file>

<file path="src/admin/services/adminCloudFunctionService.js">

</file>

<file path="src/admin/services/adminManagementService.js">

</file>

<file path="src/App.css">

</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/components/Auth/AuthModal.jsx">
import React, { useState } from 'react';
import { X, Mail, Lock, User, Eye, EyeOff, Loader } from 'lucide-react';
import { useAuth } from '../../contexts/AuthContext';

const AuthModal = ({ onClose }) => {
  const [isLogin, setIsLogin] = useState(true);
  const [showPassword, setShowPassword] = useState(false);
  const [loading, setLoading] = useState(false);
  const [formData, setFormData] = useState({
    email: '',
    password: '',
    displayName: '',
  });

  const { signin, signup, signInWithGoogle, error, clearError } = useAuth();

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value,
    }));
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    clearError();

    try {
      if (isLogin) {
        await signin(formData.email, formData.password);
      } else {
        await signup(formData.email, formData.password, formData.displayName);
      }
      onClose();
    } catch (err) {
      console.error('Auth error:', err);
    } finally {
      setLoading(false);
    }
  };

  const handleGoogleSignIn = async () => {
    setLoading(true);
    clearError();

    try {
      await signInWithGoogle();
      onClose();
    } catch (err) {
      console.error('Google sign-in error:', err);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden">
        {/* Header */}
        <div className="bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4 flex items-center justify-between">
          <h2 className="text-2xl font-bold text-white">
            {isLogin ? '🔐 Đăng Nhập' : '📝 Đăng Ký'}
          </h2>
          <button
            onClick={onClose}
            className="text-white hover:bg-orange-700 p-2 rounded-lg transition-all"
            aria-label="Close"
          >
            <X className="w-5 h-5" />
          </button>
        </div>

        {/* Content */}
        <div className="p-6">
          {/* Error Message */}
          {error && (
            <div className="mb-4 p-3 bg-red-100 border-l-4 border-red-500 text-red-700 rounded text-sm">
              <p className="font-semibold">❌ Lỗi</p>
              <p>{error}</p>
            </div>
          )}

          {/* Form */}
          <form onSubmit={handleSubmit} className="space-y-4">
            {/* Email Input */}
            <div className="relative">
              <label className="block text-sm font-semibold text-gray-700 mb-2">
                Email
              </label>
              <div className="relative">
                <Mail className="absolute left-3 top-3.5 w-5 h-5 text-gray-400" />
                <input
                  type="email"
                  name="email"
                  value={formData.email}
                  onChange={handleInputChange}
                  placeholder="your@email.com"
                  required
                  className="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 transition-all"
                />
              </div>
            </div>

            {/* Display Name Input (Only for signup) */}
            {!isLogin && (
              <div className="relative">
                <label className="block text-sm font-semibold text-gray-700 mb-2">
                  Tên hiển thị
                </label>
                <div className="relative">
                  <User className="absolute left-3 top-3.5 w-5 h-5 text-gray-400" />
                  <input
                    type="text"
                    name="displayName"
                    value={formData.displayName}
                    onChange={handleInputChange}
                    placeholder="Tên của bạn"
                    className="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 transition-all"
                  />
                </div>
              </div>
            )}

            {/* Password Input */}
            <div className="relative">
              <label className="block text-sm font-semibold text-gray-700 mb-2">
                Mật khẩu
              </label>
              <div className="relative">
                <Lock className="absolute left-3 top-3.5 w-5 h-5 text-gray-400" />
                <input
                  type={showPassword ? 'text' : 'password'}
                  name="password"
                  value={formData.password}
                  onChange={handleInputChange}
                  placeholder="••••••••"
                  required
                  className="w-full pl-10 pr-12 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 transition-all"
                />
                <button
                  type="button"
                  onClick={() => setShowPassword(!showPassword)}
                  className="absolute right-3 top-3.5 text-gray-400 hover:text-gray-600"
                >
                  {showPassword ? (
                    <EyeOff className="w-5 h-5" />
                  ) : (
                    <Eye className="w-5 h-5" />
                  )}
                </button>
              </div>
            </div>

            {/* Submit Button */}
            <button
              type="submit"
              disabled={loading}
              className="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2"
            >
              {loading && <Loader className="w-4 h-4 animate-spin" />}
              {isLogin ? 'Đăng Nhập' : 'Đăng Ký'}
            </button>
          </form>

          {/* Divider */}
          <div className="relative my-6">
            <div className="absolute inset-0 flex items-center">
              <div className="w-full border-t-2 border-gray-300"></div>
            </div>
            <div className="relative flex justify-center text-sm">
              <span className="px-2 bg-white text-gray-600 font-semibold">HOẶC</span>
            </div>
          </div>

          {/* Google Sign In */}
          <button
            type="button"
            onClick={handleGoogleSignIn}
            disabled={loading}
            className="w-full border-2 border-gray-300 hover:border-orange-500 text-gray-700 font-bold py-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 disabled:opacity-50"
          >
            <svg
              className="w-5 h-5"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4" />
              <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853" />
              <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05" />
              <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335" />
            </svg>
            <span>Google</span>
          </button>

          {/* Toggle Sign In/Sign Up */}
          <div className="mt-6 text-center">
            <p className="text-gray-600 text-sm">
              {isLogin ? 'Chưa có tài khoản? ' : 'Đã có tài khoản? '}
              <button
                type="button"
                onClick={() => {
                  setIsLogin(!isLogin);
                  clearError();
                  setFormData({ email: '', password: '', displayName: '' });
                }}
                className="text-orange-600 hover:text-orange-700 font-bold transition-all"
              >
                {isLogin ? 'Đăng ký ngay' : 'Đăng nhập'}
              </button>
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

export default AuthModal;
</file>

<file path="src/components/Auth/ClerkAuth.jsx">
import React from 'react';
import {
  SignedIn,
  SignedOut,
  SignInButton,
  SignUpButton,
  UserButton,
} from '@clerk/clerk-react';
import { LogIn, UserPlus } from 'lucide-react';

export default function ClerkAuth() {
  return (
    <div className="flex items-center">
      <SignedOut>
        <div className="flex items-center gap-2 sm:gap-3">
          {/* Sign In Button */}
          <SignInButton mode="modal">
            <button className="group relative overflow-hidden px-4 sm:px-5 py-2 sm:py-2.5 bg-white rounded-xl font-semibold text-sm sm:text-base text-gray-700 transition-all duration-300 shadow-sm hover:shadow-lg border border-orange-200/50 hover:border-orange-300 hover:scale-105">
              {/* Gradient overlay on hover */}
              <div className="absolute inset-0 bg-gradient-to-r from-orange-400/10 to-amber-400/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              
              <div className="relative flex items-center gap-2">
                <LogIn className="w-4 h-4 transition-transform duration-300 group-hover:scale-110" />
                <span className="hidden sm:inline">Đăng Nhập</span>
                <span className="sm:hidden">Đăng Nhập</span>
              </div>
            </button>
          </SignInButton>

          {/* Sign Up Button */}
          <SignUpButton mode="modal">
            <button className="group relative overflow-hidden px-4 sm:px-5 py-2 sm:py-2.5 rounded-xl font-semibold text-sm sm:text-base text-white transition-all duration-300 shadow-md hover:shadow-xl hover:scale-105">
              {/* Gradient background */}
              <div className="absolute inset-0 bg-gradient-to-r from-orange-500 via-amber-500 to-orange-500 bg-size-200 bg-pos-0 group-hover:bg-pos-100 transition-all duration-500"></div>
              
              {/* Shine effect */}
              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-700"></div>
              
              <div className="relative flex items-center gap-2">
                <UserPlus className="w-4 h-4 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12" />
                <span className="hidden sm:inline">Đăng Ký</span>
                <span className="sm:hidden">Đăng Ký</span>
              </div>
            </button>
          </SignUpButton>
        </div>
      </SignedOut>

      <SignedIn>
        <div className="group relative">
          {/* Decorative glow */}
          <div className="absolute -inset-1 bg-gradient-to-r from-orange-400 to-amber-400 rounded-2xl blur opacity-0 group-hover:opacity-30 transition-opacity duration-500"></div>
          
          {/* User button container */}
          <div className="relative flex items-center gap-3 px-3 sm:px-4 py-2 bg-gradient-to-r from-white to-amber-50 rounded-xl shadow-sm border border-orange-200/50 transition-all duration-300 group-hover:shadow-lg">
            <UserButton 
              appearance={{
                elements: {
                  avatarBox: 'w-9 h-9 sm:w-10 sm:h-10 ring-2 ring-orange-200 ring-offset-2 transition-all duration-300 hover:ring-orange-400',
                  userButtonPopoverCard: 'shadow-2xl border-orange-100',
                  userButtonPopoverActionButton: 'hover:bg-orange-50',
                }
              }}
              afterSignOutUrl="/"
            />
            
            {/* Welcome indicator */}
            <div className="hidden sm:flex items-center gap-2">
              <div className="w-2 h-2 rounded-full bg-gradient-to-r from-orange-500 to-amber-500 animate-pulse shadow-sm"></div>
              <span className="text-sm font-medium text-gray-700">Profile</span>
            </div>
          </div>
        </div>
      </SignedIn>
    </div>
  );
}
</file>

<file path="src/components/Auth/CombinedAuth.jsx">
import React from 'react';
import ClerkAuth from './ClerkAuth';
import FirebaseAuthButtons from './FirebaseAuthButtons';
import { useClerkAuthentication } from '../../hooks/useClerkAuth';
import { useFirebaseAuth } from '../../hooks/useFirebaseAuth';

export default function CombinedAuth() {
  const clerkAuth = useClerkAuthentication();
  const firebaseAuth = useFirebaseAuth();

  // Nếu đã đăng nhập bằng Clerk, chỉ hiển thị Clerk
  if (clerkAuth.isSignedIn) {
    return (
      <div className="flex items-center gap-2">
        <ClerkAuth />
        <div className="hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-orange-50 rounded-lg border border-orange-200">
          <span className="text-xs font-semibold text-orange-700">Clerk</span>
        </div>
      </div>
    );
  }

  // Nếu đã đăng nhập bằng Firebase, chỉ hiển thị Firebase
  if (firebaseAuth.isSignedIn) {
    return (
      <div className="flex items-center gap-2">
        <FirebaseAuthButtons />
        <div className="hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 rounded-lg border border-blue-200">
          <span className="text-xs font-semibold text-blue-700">Firebase</span>
        </div>
      </div>
    );
  }

  // Chưa đăng nhập - Hiển thị cả 2 option
  return (
    <div className="flex items-center gap-2 sm:gap-3">
      {/* Clerk Auth Buttons */}
      <ClerkAuth />
      
      {/* Divider */}
      <div className="h-8 w-px bg-gray-300"></div>
      
      {/* Firebase Google Sign In */}
      <FirebaseAuthButtons />
    </div>
  );
}
</file>

<file path="src/components/Auth/FirebaseAuthButtons.jsx">
import React, { useState, useEffect, useRef } from 'react';
import { LogOut, User as UserIcon, CheckCircle, ChevronDown, Loader2 } from 'lucide-react';
import { useFirebaseAuth } from '../../hooks/useFirebaseAuth';

// Google Logo SVG Component (Giữ nguyên)
const GoogleLogo = () => (
  <svg className="w-5 h-5" viewBox="0 0 24 24">
    <path
      fill="#4285F4"
      d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
    />
    <path
      fill="#34A853"
      d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
    />
    <path
      fill="#FBBC05"
      d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
    />
    <path
      fill="#EA4335"
      d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
    />
  </svg>
);

export default function FirebaseAuthButtons() {
  const { user, isSignedIn, loading, signInWithGoogle, signOut } = useFirebaseAuth();
  const [showDropdown, setShowDropdown] = useState(false);
  const dropdownRef = useRef(null);

  // Xử lý click ngoài để đóng dropdown
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setShowDropdown(false);
      }
    };
    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  const handleSignIn = async () => {
    // Logik đăng nhập được giữ lại
    const result = await signInWithGoogle();
    if (result.success) {
      console.log('✅ Đăng nhập Firebase thành công!');
    } else {
      console.error('❌ Đăng nhập thất bại:', result.error);
    }
  };

  const handleSignOut = async () => {
    // Logik đăng xuất được giữ lại
    const result = await signOut();
    if (result.success) {
      console.log('✅ Đăng xuất thành công!');
      setShowDropdown(false);
    }
  };

  // ----------------------------------------------------------------------
  // Signed Out State (Chưa đăng nhập) - Nút Google Sign In
  // ----------------------------------------------------------------------
  if (!isSignedIn) {
    return (
      <button
        onClick={handleSignIn}
        disabled={loading}
        className="group relative overflow-hidden px-4 sm:px-6 py-2 sm:py-2.5 bg-white rounded-full font-bold text-sm sm:text-base text-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-200 hover:border-blue-500/50 hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-md"
      >
        {/* Gradient background on hover for "pop" effect */}
        <div className="absolute inset-0 bg-gradient-to-r from-blue-50/50 via-white to-red-50/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-full"></div>
        
        <div className="relative flex items-center gap-2 sm:gap-3">
          {loading ? (
            <Loader2 className="w-5 h-5 text-blue-600 animate-spin" />
          ) : (
            <GoogleLogo />
          )}
          <span className="hidden sm:inline font-bold">Đăng nhập với Google</span>
          <span className="sm:hidden font-bold">Google</span>
        </div>
      </button>
    );
  }

  // ----------------------------------------------------------------------
  // Signed In State (Đã đăng nhập) - User Profile Widget
  // ----------------------------------------------------------------------
  const displayName = user?.displayName || user?.email?.split('@')[0] || 'User';
  const userInitial = displayName[0]?.toUpperCase() || 'U';

  return (
    <div className="relative" ref={dropdownRef}>
      {/* User Button */}
      <button
        onClick={() => setShowDropdown(!showDropdown)}
        className="flex items-center gap-2 sm:gap-3 px-2 py-1 bg-white rounded-full shadow-lg border border-blue-100/70 hover:shadow-xl transition-all duration-300 hover:border-blue-400/50 focus:outline-none focus:ring-4 focus:ring-blue-100"
      >
        {/* Avatar */}
        <div className="w-10 h-10 rounded-full ring-2 ring-white/50 ring-offset-1 ring-offset-blue-400/50 transition-all duration-300 overflow-hidden bg-gradient-to-br from-blue-400 to-purple-500 shadow-md">
          {user?.photoURL ? (
            <img
              src={user.photoURL}
              alt={displayName}
              className="w-full h-full object-cover"
            />
          ) : (
            <div className="w-full h-full flex items-center justify-center text-white font-bold text-lg">
              {userInitial}
            </div>
          )}
        </div>

        {/* Name & Dropdown Icon */}
        <div className='hidden sm:flex items-center gap-1.5'>
          <span className="text-sm font-bold text-gray-800 truncate max-w-[100px]">{displayName}</span>
          <ChevronDown className={`w-4 h-4 text-gray-500 transition-transform duration-300 ${showDropdown ? 'rotate-180' : ''}`} />
        </div>
      </button>

      {/* Dropdown Menu */}
      {showDropdown && (
        <div className="absolute right-0 mt-3 w-64 md:w-72 bg-white rounded-xl shadow-2xl border border-blue-200/50 py-2 z-50 origin-top-right transform scale-100 opacity-100 transition-all duration-300">
          {/* User Info Header */}
          <div className="px-4 py-3 border-b border-gray-100 bg-blue-50/50">
            <div className="flex items-center gap-2 mb-2">
              <GoogleLogo />
              <span className="text-xs font-semibold text-white bg-gradient-to-r from-blue-500 to-purple-500 px-2 py-0.5 rounded-full shadow-sm">
                Đã đăng nhập
              </span>
            </div>
            <p className="text-base font-extrabold text-gray-900 truncate">
              {user?.displayName || 'Tài khoản của bạn'}
            </p>
            <p className="text-xs text-gray-500 truncate mt-1">
              {user?.email}
            </p>
          </div>

          {/* Menu Items */}
          <div className="py-1">
            {/* Profile Link */}
            <button
              className="w-full px-4 py-3 text-left text-sm font-medium text-gray-700 hover:bg-blue-50 transition-colors flex items-center gap-3"
              onClick={() => { setShowDropdown(false); /* Thêm logic chuyển trang Profile ở đây */ }}
            >
              <UserIcon className="w-5 h-5 text-blue-600" />
              Thông tin cá nhân
            </button>
            
            {/* Sign Out Button */}
            <button
              onClick={handleSignOut}
              disabled={loading}
              className="w-full px-4 py-3 text-left text-sm font-medium text-red-600 hover:bg-red-50 transition-colors flex items-center gap-3 border-t border-gray-100 mt-1"
            >
              <LogOut className="w-5 h-5" />
              {loading ? 'Đang xử lý...' : 'Đăng xuất'}
            </button>
          </div>
        </div>
      )}
    </div>
  );
}
</file>

<file path="src/components/Chat/ChatApp.jsx">
import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';
import { Send, Trash2, Users, MessageCircle, X, Menu, Smile } from 'lucide-react';
  
// Giả định bạn đã import Socket.IO Client ở môi trường này
// const { io } = await import('socket.io-client'); // hoặc import { io } from 'socket.io-client';

const SOCKET_URL = import.meta.env.VITE_SOCKET_URL || 'http://localhost:5000';
const TYPING_TIMEOUT = 3000; // 3 giây không gõ sẽ dừng trạng thái 'typing'

// --- Helper functions (Cũng nên được tách ra file riêng nếu app lớn) ---

const getCurrentUserId = (user) => user?.id || user?.uid || 'currentUser';
const getCurrentUserName = (user) => user?.name || user?.email?.split('@')[0] || user?.username || 'Bạn';

const formatTime = (timestamp) => {
  if (!timestamp) return '';
  const date = new Date(timestamp);
  const diffInHours = (new Date() - date) / (1000 * 60 * 60);

  // Hiển thị giờ-phút nếu trong 24h, ngược lại hiển thị cả ngày
  if (diffInHours < 24) {
    return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });
  } else {
    return date.toLocaleDateString('vi-VN', { 
      day: '2-digit', 
      month: '2-digit', 
      hour: '2-digit', 
      minute: '2-digit' 
    });
  }
};

// --- Sub Component: Message Bubble (Tách ra để tránh re-render) ---

const MessageBubble = React.memo(({ msg, isCurrentUser, currentUserId, onDeleteMessage, showAvatar }) => {
  if (msg.isSystem) {
    return (
      <div className="w-full flex justify-center animate-messageSlideIn">
        <div className="relative bg-gradient-to-r from-purple-100 to-pink-100 backdrop-blur-sm text-gray-700 px-6 py-2.5 rounded-full text-sm shadow-md border border-purple-200 max-w-sm">
          <span className="font-semibold">✨ {msg.content}</span>
        </div>
      </div>
    );
  }

  return (
    <div
      className={`flex ${isCurrentUser ? 'justify-end' : 'justify-start'} animate-messageSlideIn`}
    >
      <div className={`flex gap-3 max-w-[85%] sm:max-w-[75%] md:max-w-[65%] ${isCurrentUser ? 'flex-row-reverse' : 'flex-row'}`}>
        
        {/* Avatar */}
        {!isCurrentUser && (
          <div className={`flex-shrink-0 ${showAvatar ? 'visible' : 'invisible'}`}>
            <div className="relative">
              <div className="w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 via-pink-400 to-indigo-500 flex items-center justify-center text-white font-bold shadow-lg ring-2 ring-white">
                {msg.sender.charAt(0).toUpperCase()}
              </div>
            </div>
          </div>
        )}

        {/* Message Content */}
        <div className="flex flex-col gap-1.5">
          {showAvatar && !isCurrentUser && (
            <span className="text-xs font-bold text-gray-600 ml-3">
              {msg.sender}
            </span>
          )}
          
          <div className="relative group">
            <div
              className={`relative px-5 py-3.5 rounded-3xl shadow-lg transition-all duration-300 hover:shadow-xl ${
                isCurrentUser
                  ? 'bg-gradient-to-br from-purple-600 via-pink-500 to-indigo-600 text-white rounded-br-lg'
                  : 'bg-white text-gray-800 rounded-bl-lg border-2 border-purple-100'
              }`}
            >
              <p className="text-sm sm:text-base break-words whitespace-pre-wrap leading-relaxed">
                {msg.content}
              </p>
              <p className={`text-xs mt-2 flex items-center gap-1 ${isCurrentUser ? 'text-purple-100' : 'text-gray-400'}`}>
                {formatTime(msg.timestamp)}
                {isCurrentUser && <span className="ml-1">✓✓</span>}
              </p>
            </div>

            {/* Action buttons (Delete) */}
            {isCurrentUser && (
              <div className={`absolute -left-12 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300`}>
                <button
                  onClick={() => onDeleteMessage(msg.id)}
                  className="p-2.5 bg-red-50 hover:bg-red-100 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"
                  title="Xóa tin nhắn"
                >
                  <Trash2 className="w-4 h-4 text-red-500" />
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
});

// --- Main Component ---

const ChatApp = ({ user }) => {
  const [messages, setMessages] = useState([]);
  const [inputValue, setInputValue] = useState('');
  const [onlineUsers, setOnlineUsers] = useState([]);
  const [isConnected, setIsConnected] = useState(false);
  const [loading, setLoading] = useState(true);
  const [showUsersList, setShowUsersList] = useState(false);
  const [typingUsers, setTypingUsers] = useState({}); // { 'userId': 'userName' }
  
  const socketRef = useRef(null);
  const typingTimerRef = useRef(null);
  const messagesEndRef = useRef(null);

  // Dùng useMemo để chỉ tính toán lại khi user thay đổi
  const currentUserId = useMemo(() => getCurrentUserId(user), [user]);
  const currentUserName = useMemo(() => getCurrentUserName(user), [user]);

  // Dùng useCallback để tránh việc hàm bị tạo lại mỗi lần re-render
  const scrollToBottom = useCallback(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, []);

  // Cuộn xuống cuối khi messages thay đổi
  useEffect(() => {
    scrollToBottom();
  }, [messages, scrollToBottom]);

  // --- Socket.IO Connection & Events (Cleaned up) ---
  useEffect(() => {
    let ioInstance;
    
    const initSocket = async () => {
      try {
        const { io } = await import('socket.io-client');
        
        ioInstance = io(SOCKET_URL, {
          reconnection: true,
          reconnectionDelay: 1000,
          reconnectionAttempts: 10,
        });

        socketRef.current = ioInstance;

        // 1. Load Messages (Initial)
        const loadMessages = async () => {
          try {
            const res = await fetch(`${SOCKET_URL}/api/chat/messages`);
            const data = await res.json();
            if (data.success) {
              setMessages(data.data || []);
            }
          } catch (err) {
            console.error('❌ Error loading messages:', err);
          } finally {
            setLoading(false);
          }
        };
        loadMessages();
        
        // 2. Event Listeners
        ioInstance.on('connect', () => {
          setIsConnected(true);
          console.log('✅ Connected to chat server');
          
          const userData = { userId: currentUserId, userName: currentUserName, avatar: user?.avatar || '👤' };
          ioInstance.emit('user-join', userData);
        });

        ioInstance.on('receive-message', (message) => {
          setMessages(prev => [...prev, message]);
        });

        ioInstance.on('user-joined', ({ user: joinedUser, users: activeUsers }) => {
          setOnlineUsers(activeUsers);
          setMessages(prev => [...prev, {
            id: Date.now() + Math.random(), // Đảm bảo ID hệ thống là duy nhất
            isSystem: true,
            content: `${joinedUser.userName} đã tham gia`,
            timestamp: new Date(),
          }]);
        });

        ioInstance.on('user-left', ({ users: activeUsers }) => {
          setOnlineUsers(activeUsers);
          setMessages(prev => [...prev, {
            id: Date.now() + Math.random(),
            isSystem: true,
            content: 'Một người dùng đã rời phòng',
            timestamp: new Date(),
          }]);
        });

        ioInstance.on('message-deleted', (messageId) => {
          setMessages(prev => prev.filter(msg => msg.id !== messageId));
        });

        ioInstance.on('user-typing', ({ userId, userName }) => {
          if (userId !== currentUserId) {
            setTypingUsers(prev => ({ ...prev, [userId]: userName }));
          }
        });

        ioInstance.on('user-stop-typing', ({ userId }) => {
          setTypingUsers(prev => {
            const newState = { ...prev };
            delete newState[userId];
            return newState;
          });
        });

        ioInstance.on('disconnect', () => setIsConnected(false));
        ioInstance.on('connect_error', (error) => {
          console.error('❌ Connection error:', error);
          setLoading(false);
        });
        
      } catch (error) {
        console.error('❌ Socket.IO initialization error:', error);
        setLoading(false);
      }
    };

    initSocket();

    return () => {
      if (ioInstance) {
        ioInstance.off('connect');
        ioInstance.off('receive-message');
        ioInstance.off('user-joined');
        ioInstance.off('user-left');
        ioInstance.off('message-deleted');
        ioInstance.off('user-typing');
        ioInstance.off('user-stop-typing');
        ioInstance.off('disconnect');
        ioInstance.off('connect_error');
        ioInstance.disconnect();
      }
    };
  }, [currentUserId, currentUserName, user]); // Phụ thuộc vào user info

  // --- Handlers (Use useCallback) ---

  const handleSendMessage = useCallback((e) => {
    e.preventDefault();
    const content = inputValue.trim();
    if (!content || !isConnected || !socketRef.current) return;

    const messageData = { content, sender: currentUserName, senderId: currentUserId };
    socketRef.current.emit('send-message', messageData);
    setInputValue('');
    
    // Đảm bảo trạng thái typing dừng lại ngay sau khi gửi
    clearTimeout(typingTimerRef.current);
    socketRef.current.emit('stop-typing', { userId: currentUserId });
    typingTimerRef.current = null;
  }, [inputValue, isConnected, currentUserName, currentUserId]);

  const handleDeleteMessage = useCallback((messageId) => {
    if (!socketRef.current) return;
    // Server sẽ kiểm tra quyền trước khi xóa
    socketRef.current.emit('delete-message', messageId); 
  }, []);

  const handleInputChange = (e) => {
    const value = e.target.value;
    setInputValue(value);

    if (!isConnected || !socketRef.current) return;

    // Logic Typing Indicator
    if (value.length > 0) {
      if (!typingTimerRef.current) {
        // Bắt đầu gõ
        socketRef.current.emit('typing', { userId: currentUserId, userName: currentUserName });
      } else {
        // Đã gõ, xóa timer cũ
        clearTimeout(typingTimerRef.current);
      }

      // Thiết lập timer mới
      typingTimerRef.current = setTimeout(() => {
        socketRef.current.emit('stop-typing', { userId: currentUserId });
        typingTimerRef.current = null;
      }, TYPING_TIMEOUT);

    } else if (typingTimerRef.current) {
      // Xóa hết chữ
      clearTimeout(typingTimerRef.current);
      socketRef.current.emit('stop-typing', { userId: currentUserId });
      typingTimerRef.current = null;
    }
  };

  // --- Rendering Helpers ---
  
  const typingUsersList = useMemo(() => {
    const names = Object.values(typingUsers);
    if (names.length === 0) return '';
    if (names.length === 1) return `${names[0]} đang gõ...`;
    if (names.length === 2) return `${names.join(' và ')} đang gõ...`;
    return 'Một số người đang gõ...';
  }, [typingUsers]);
  
  // --- JSX ---

  if (loading) {
    // ... (Loading state giữ nguyên)
    return (
      <div className="flex items-center justify-center h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50">
        <div className="text-center">
          <div className="relative">
            <div className="w-20 h-20 border-4 border-transparent border-t-purple-600 border-r-pink-500 border-b-indigo-600 rounded-full animate-spin mx-auto mb-6"></div>
            <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
              <MessageCircle className="w-10 h-10 text-purple-600 animate-pulse" />
            </div>
          </div>
          <p className="text-gray-800 text-xl font-bold mb-2">Đang kết nối chat...</p>
          <p className="text-gray-500 text-sm">Sắp xong rồi! ✨</p>
        </div>
      </div>
    );
  }

  return (
    <div className="flex h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50 overflow-hidden relative">
      {/* Floating particles background (Tách CSS ra file riêng) */}
      <div className="absolute inset-0 overflow-hidden pointer-events-none">
        <div className="absolute w-2 h-2 bg-purple-300 rounded-full animate-float" style={{top: '10%', left: '10%', animationDelay: '0s'}}></div>
        {/* ... Thêm các phần tử khác nếu cần ... */}
      </div>

      {/* Sidebar Overlay */}
      {showUsersList && (
        <div 
          className="fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden animate-fadeIn"
          onClick={() => setShowUsersList(false)}
        />
      )}

      {/* Users sidebar (Bố cục giữ nguyên, responsive tốt) */}
      <div className={`
        fixed lg:relative inset-y-0 left-0 z-50
        w-80 sm:w-96 lg:w-80 xl:w-96
        bg-white/95 backdrop-blur-xl shadow-2xl lg:shadow-xl
        transform transition-all duration-500 ease-out
        ${showUsersList ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}
        flex flex-col
        border-r border-purple-100
      `}>
        {/* Sidebar Header */}
        <div className="relative p-5 bg-gradient-to-br from-purple-600 via-pink-500 to-indigo-600 text-white overflow-hidden">
          <div className="absolute inset-0 bg-white/10 backdrop-blur-sm"></div>
          <div className="relative flex items-center justify-between">
            <div>
              <h3 className="font-bold text-xl flex items-center gap-2 mb-1">
                <div className="p-2 bg-white/20 rounded-xl backdrop-blur-sm"><Users className="w-5 h-5" /></div>
                Đang Online
              </h3>
              <p className="text-sm text-purple-100">{onlineUsers.length} người đang hoạt động</p>
            </div>
            <button
              onClick={() => setShowUsersList(false)}
              className="lg:hidden p-2 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-200"
            >
              <X className="w-5 h-5" />
            </button>
          </div>
        </div>

        {/* Users List */}
        <div className="flex-1 overflow-y-auto p-4 space-y-3 scrollbar-thin">
          {onlineUsers.length > 0 ? (
            onlineUsers.map((u, idx) => (
              <div 
                key={u.socketId} 
                className="group relative p-4 bg-gradient-to-br from-white to-purple-50 rounded-2xl border border-purple-100 hover:border-purple-300 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1"
                style={{ animation: `slideIn 0.4s ease-out ${idx * 0.05}s both` }} // Tăng tốc độ animation
              >
                <div className="flex items-center gap-3">
                  <div className="relative">
                    <div className="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-indigo-500 flex items-center justify-center text-white text-xl shadow-lg">
                      {u.avatar}
                    </div>
                    <span className="absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full animate-pulse"></span>
                  </div>
                  <div className="flex-1 min-w-0">
                    <p className="font-bold text-gray-800 truncate group-hover:text-purple-600 text-base">
                      {u.userName} {u.userId === currentUserId && '(Bạn)'}
                    </p>
                    <div className="flex items-center gap-1.5 text-xs text-green-600 font-medium">
                      <span className="w-2 h-2 bg-green-500 rounded-full absolute"></span>
                      Đang hoạt động
                    </div>
                  </div>
                </div>
              </div>
            ))
          ) : (
            <div className="flex flex-col items-center justify-center h-full text-gray-400 py-20">
              <div className="w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center mb-4">
                <Users className="w-12 h-12 text-purple-400" />
              </div>
              <p className="text-base font-semibold text-gray-600">Chưa có ai online</p>
            </div>
          )}
        </div>
      </div>

      {/* Chat section */}
      <div className="relative flex-1 flex flex-col min-w-0">
        {/* Header with glassmorphism */}
        <div className="relative bg-gradient-to-r from-purple-600 via-pink-500 to-indigo-600 text-white p-4 shadow-xl flex items-center justify-between overflow-hidden z-10">
          <div className="absolute inset-0 bg-white/10 backdrop-blur-lg"></div>
          
          <div className="relative flex items-center gap-3 min-w-0 flex-1">
            {/* Mobile Menu Button */}
            <button
              onClick={() => setShowUsersList(true)}
              className="lg:hidden p-2.5 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-200 backdrop-blur-sm"
            >
              <Menu className="w-5 h-5" />
            </button>
            <div className="min-w-0 flex-1">
              <h1 className="text-xl sm:text-2xl font-bold flex items-center gap-3 truncate mb-0.5">
                <span className="bg-gradient-to-r from-white to-purple-100 bg-clip-text text-transparent">Global Chat</span>
              </h1>
              {/* Typing Indicator */}
              <p className={`text-sm flex items-center gap-2 ${typingUsersList ? 'text-green-200' : 'text-purple-100'}`}>
                <span className={`w-2.5 h-2.5 rounded-full ${isConnected ? 'bg-green-400 shadow-lg shadow-green-400/50 animate-pulse' : 'bg-red-400'}`}></span>
                {typingUsersList || (isConnected ? `${onlineUsers.length} người online` : 'Đang kết nối...')}
              </p>
            </div>
          </div>
          
          <button
            onClick={() => setShowUsersList(!showUsersList)}
            className="hidden lg:flex items-center gap-2 bg-white/20 hover:bg-white/30 px-5 py-2.5 rounded-xl transition-all duration-200 backdrop-blur-sm font-semibold"
          >
            <Users className="w-5 h-5" />
            {onlineUsers.length}
          </button>
        </div>

        {/* Messages container */}
        <div className="relative flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 min-h-0 scrollbar-thin">
          {messages.length === 0 ? (
            <div className="flex items-center justify-center h-full">
              <div className="text-center animate-fadeIn">
                <div className="w-32 h-32 bg-gradient-to-br from-purple-100 via-pink-100 to-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg">
                  <MessageCircle className="w-16 h-16 text-purple-500" />
                </div>
                <p className="text-gray-700 text-xl font-bold mb-2">Chưa có tin nhắn nào</p>
                <p className="text-gray-500 text-base">Hãy là người đầu tiên bắt đầu trò chuyện! 🚀</p>
              </div>
            </div>
          ) : (
            messages.map((msg, index) => {
              const isMsgFromCurrentUser = msg.senderId === currentUserId;
              const prevMsg = messages[index - 1];
              // Ẩn avatar nếu tin nhắn trước đó cũng là của người gửi này và không phải tin hệ thống
              const shouldShowAvatar = !prevMsg || prevMsg.senderId !== msg.senderId || prevMsg.isSystem;
              
              return (
                <MessageBubble
                  key={msg.id}
                  msg={msg}
                  isCurrentUser={isMsgFromCurrentUser}
                  currentUserId={currentUserId}
                  onDeleteMessage={handleDeleteMessage}
                  showAvatar={shouldShowAvatar}
                />
              );
            })
          )}
          <div ref={messagesEndRef} />
        </div>

        {/* Enhanced Input section */}
        <div className="relative bg-white/80 backdrop-blur-xl border-t border-purple-200 p-4 shadow-2xl z-10">
          <form onSubmit={handleSendMessage} className="flex gap-3 items-end">
            <div className="flex-1 relative">
              <textarea
                value={inputValue}
                onChange={handleInputChange} // Dùng handler mới
                onKeyDown={(e) => {
                  if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage(e);
                  }
                }}
                placeholder={isConnected ? "Nhập tin nhắn của bạn..." : "Đang kết nối lại..."}
                disabled={!isConnected}
                rows={1}
                className="w-full border-2 border-purple-200 rounded-2xl px-5 pr-16 py-3.5 text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed transition-all duration-200 shadow-md resize-none"
                style={{minHeight: '50px', maxHeight: '120px'}}
              />
              
              {/* Quick action buttons (Emoji, Attachment) */}
              <div className="absolute right-3 bottom-3 flex gap-2">
                <button type="button" className="p-2 hover:bg-purple-50 rounded-lg transition-colors" title="Emoji">
                  <Smile className="w-5 h-5 text-gray-400 hover:text-purple-500" />
                </button>
              </div>
            </div>
            
            <button
              type="submit"
              disabled={!isConnected || !inputValue.trim()}
              className="p-4 bg-gradient-to-br from-purple-600 via-pink-500 to-indigo-600 hover:from-purple-700 hover:via-pink-600 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed text-white rounded-2xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl disabled:shadow-none transform hover:scale-105 active:scale-95 disabled:transform-none"
            >
              <Send className="w-5 h-5" />
            </button>
          </form>
          
          {!isConnected && (
            <div className="flex items-center gap-2 text-red-500 text-sm mt-3 bg-red-50 px-4 py-2.5 rounded-xl shadow-md animate-pulse">
              <span className="w-2 h-2 bg-red-500 rounded-full"></span>
              Đang kết nối lại tới máy chủ...
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default ChatApp;
</file>

<file path="src/components/common/Badge.jsx">
export const Badge = ({ children, variant = 'default', size = 'sm' }) => {
    const variants = {
        default: 'bg-indigo-100 text-indigo-800',
        success: 'bg-green-100 text-green-800',
        warning: 'bg-amber-100 text-amber-800',
        gray: 'bg-gray-100 text-gray-600',
    };

    const sizes = {
        sm: 'text-xs px-2.5 py-1',
        md: 'text-sm px-3.5 py-1.5',
    };

    return (
        <span className={`rounded-full font-medium inline-flex items-center ${variants[variant]} ${sizes[size]}`}>
            {children}
        </span>
    );
};
</file>

<file path="src/components/common/Button.jsx">
export const Button = ({ 
    variant = 'primary', 
    size = 'md', 
    children, 
    icon: Icon, 
    fullWidth, 
    disabled, 
    className = '',
    ...props 
}) => {
    const variants = {
        primary: 'bg-indigo-600 text-white hover:bg-indigo-700 active:bg-indigo-800 focus:ring-indigo-500',
        secondary: 'bg-gray-100 text-gray-800 hover:bg-gray-200 active:bg-gray-300 focus:ring-gray-400 border border-gray-200',
        danger: 'bg-red-600 text-white hover:bg-red-700 active:bg-red-800 focus:ring-red-500',
        success: 'bg-green-600 text-white hover:bg-green-700 active:bg-green-800 focus:ring-green-500',
        ghost: 'bg-transparent text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus:ring-gray-300 border border-transparent',
    };

    const sizes = {
        sm: 'px-3 py-2 text-sm',
        md: 'px-4 py-2.5 text-base',
        lg: 'px-6 py-3 text-lg',
    };

    return (
        <button
            className={`
                inline-flex items-center justify-center gap-2 font-semibold
                transition-all rounded-xl disabled:opacity-50 disabled:cursor-not-allowed
                focus:outline-none focus:ring-4 focus:ring-opacity-50
                ${variants[variant]} ${sizes[size]} ${fullWidth ? 'w-full' : ''} ${className}
            `}
            disabled={disabled}
            {...props}
        >
            {Icon && <Icon className="w-5 h-5" />}
            {children}
        </button>
    );
};
</file>

<file path="src/components/common/Card.jsx">
export const Card = ({ children, className = '', elevated = false }) => (
    <div
        className={`
            bg-white rounded-2xl border border-gray-100
            ${elevated ? 'shadow-xl hover:shadow-2xl transition-shadow' : 'shadow-md'}
            ${className}
        `}
    >
        {children}
    </div>
);
</file>

<file path="src/components/common/CollapsibleSection.jsx">
import React from 'react';
import { ChevronDown, ChevronUp } from 'lucide-react';

export const CollapsibleSection = ({ 
  title, 
  icon: Icon, 
  isOpen, 
  onToggle, 
  children,
  variant = 'default' 
}) => {
  const variants = {
    default: 'border-orange-200 hover:border-orange-300',
    info: 'border-blue-200 hover:border-blue-300',
    controls: 'border-purple-200 hover:border-purple-300'
  };

  return (
    <div className="mb-3 sm:mb-4">
      <button
        onClick={onToggle}
        className={`w-full flex items-center justify-between p-2.5 sm:p-3 md:p-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-md border-2 ${variants[variant]} transition-all hover:shadow-lg group`}
        aria-expanded={isOpen}
      >
        <span className="text-sm sm:text-base md:text-lg font-bold text-gray-900 flex items-center gap-2">
          {Icon && <Icon className="w-4 h-4 sm:w-5 sm:h-5 text-orange-600" />}
          {title}
        </span>
        {isOpen ? (
          <ChevronUp className="w-4 h-4 sm:w-5 sm:h-5 text-orange-600 group-hover:scale-110 transition-transform" />
        ) : (
          <ChevronDown className="w-4 h-4 sm:w-5 sm:h-5 text-orange-600 group-hover:scale-110 transition-transform" />
        )}
      </button>
      
      {isOpen && (
        <div className="mt-2 animate-slideDown">
          {children}
        </div>
      )}
    </div>
  );
};
export default CollapsibleSection;
</file>

<file path="src/components/common/InfoCard.jsx">
import React from 'react';

export const InfoCard = ({ icon: Icon, title, items, variant = 'default' }) => {
  const variants = {
    default: { bg: 'bg-orange-50/95', border: 'border-orange-200', text: 'text-orange-600' },
    info: { bg: 'bg-blue-50/95', border: 'border-blue-200', text: 'text-blue-600' },
    warning: { bg: 'bg-yellow-50/95', border: 'border-yellow-200', text: 'text-yellow-600' },
    success: { bg: 'bg-green-50/95', border: 'border-green-200', 'text': 'text-green-600' }
  };

  const style = variants[variant];

  return (
    <div className={`p-2.5 sm:p-3 md:p-4 ${style.bg} backdrop-blur-sm rounded-xl shadow-md border-2 ${style.border}`}>
      <h3 className="text-sm sm:text-base md:text-lg font-bold text-gray-900 mb-2 flex items-center gap-2">
        {Icon && <Icon className={`w-4 h-4 sm:w-5 sm:h-5 ${style.text}`} />}
        {title}
      </h3>
      <ul className="space-y-1.5 text-gray-800 text-xs sm:text-sm">
        {items.map((item, index) => (
          <li key={index} className="flex items-start gap-2">
            <span className={`${style.text} font-bold mt-0.5 flex-shrink-0`}>•</span>
            <span className="flex-1">{item}</span>
          </li>
        ))}
      </ul>
    </div>
  );
};
export default InfoCard;
</file>

<file path="src/components/common/LoadingSpinner.css">
/* Earth Loader Styles */
.earth-loader {
  position: relative;
  width: 6rem;
  height: 6rem;
  background-color: #3344c1;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid white;
  box-shadow: inset 0 0.5em rgba(255, 255, 255, 0.25),
              inset 0 -0.5em rgba(0, 0, 0, 0.25);
  animation: startround 1s;
  animation-iteration-count: 1;
}

@media (min-width: 640px) {
  .earth-loader {
    width: 7.5rem;
    height: 7.5rem;
  }
}

@media (min-width: 768px) {
  .earth-loader {
    width: 8.5rem;
    height: 8.5rem;
  }
}

/* Land Mass Positions */
.land-mass-1 {
  position: absolute;
  bottom: -2em;
  width: 7em;
  height: auto;
  animation: round1 5s infinite linear 0.75s;
}

.land-mass-2 {
  position: absolute;
  top: -3em;
  width: 7em;
  height: auto;
  animation: round1 5s infinite linear;
}

.land-mass-3 {
  position: absolute;
  top: -2.5em;
  width: 7em;
  height: auto;
  animation: round2 5s infinite linear;
}

.land-mass-4 {
  position: absolute;
  bottom: -2.2em;
  width: 7em;
  height: auto;
  animation: round2 5s infinite linear 0.75s;
}

/* Animations */
@keyframes startround {
  0% {
    filter: brightness(500%);
    box-shadow: none;
  }
  75% {
    filter: brightness(500%);
    box-shadow: none;
  }
  100% {
    filter: brightness(100%);
    box-shadow: inset 0 0.5em rgba(255, 255, 255, 0.25),
                inset 0 -0.5em rgba(0, 0, 0, 0.25);
  }
}

@keyframes round1 {
  0% {
    left: -2em;
    opacity: 1;
    transform: skewX(0deg) rotate(0deg);
  }
  30% {
    left: -6em;
    opacity: 1;
    transform: skewX(-25deg) rotate(25deg);
  }
  31% {
    left: -6em;
    opacity: 0;
    transform: skewX(-25deg) rotate(25deg);
  }
  35% {
    left: 7em;
    opacity: 0;
    transform: skewX(25deg) rotate(-25deg);
  }
  45% {
    left: 7em;
    opacity: 1;
    transform: skewX(25deg) rotate(-25deg);
  }
  100% {
    left: -2em;
    opacity: 1;
    transform: skewX(0deg) rotate(0deg);
  }
}

@keyframes round2 {
  0% {
    left: 5em;
    opacity: 1;
    transform: skewX(0deg) rotate(0deg);
  }
  75% {
    left: -7em;
    opacity: 1;
    transform: skewX(-25deg) rotate(25deg);
  }
  76% {
    left: -7em;
    opacity: 0;
    transform: skewX(-25deg) rotate(25deg);
  }
  77% {
    left: 8em;
    opacity: 0;
    transform: skewX(25deg) rotate(-25deg);
  }
  80% {
    left: 8em;
    opacity: 1;
    transform: skewX(25deg) rotate(-25deg);
  }
  100% {
    left: 5em;
    opacity: 1;
    transform: skewX(0deg) rotate(0deg);
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .earth-loader,
  .land-mass-1,
  .land-mass-2,
  .land-mass-3,
  .land-mass-4 {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}
</file>

<file path="src/components/common/StatBox.jsx">
import { TrendingUp, ArrowRight } from 'lucide-react';
import { Card } from './Card';

export const StatBox = ({ label, value, icon: Icon, trend }) => (
    <Card className="p-6" elevated>
        <div className="flex items-center justify-between">
            <div>
                <p className="text-gray-500 text-sm font-medium mb-1 uppercase tracking-wider">{label}</p>
                <p className="text-4xl font-extrabold text-gray-900">{value}</p>
            </div>
            {Icon && (
                <div className="p-3 bg-indigo-50 rounded-full">
                    <Icon className="w-8 h-8 text-indigo-600" />
                </div>
            )}
        </div>
        {trend !== undefined && (
            <p className={`text-sm mt-3 flex items-center ${trend > 0 ? 'text-green-600' : 'text-gray-500'}`}>
                {trend > 0 ? <TrendingUp className="w-4 h-4 mr-1" /> : <ArrowRight className="w-4 h-4 mr-1" />}
                <span className="font-semibold">{Math.abs(trend)}%</span> trong tháng này
            </p>
        )}
    </Card>
);
</file>

<file path="src/components/ConfettiEffect.jsx">
import React from 'react';

const ConfettiEffect = ({ count = 50 }) => {
  return (
    <>
      {[...Array(count)].map((_, i) => (
        <div
          key={i}
          className="confetti-piece animate-confetti"
          style={{
            left: `${Math.random() * 100}%`,
            top: `${Math.random() * 100}%`,
            backgroundColor: ['#3B82F6', '#8B5CF6', '#EC4899', '#10B981', '#F59E0B'][
              Math.floor(Math.random() * 5)
            ],
            animationDelay: `${Math.random() * 0.5}s`,
            transform: `rotate(${Math.random() * 360}deg)`,
          }}
        />
      ))}
    </>
  );
};

export default ConfettiEffect;
</file>

<file path="src/components/Display/ReadingPart6Display.jsx">
import React, { useState } from 'react';
import { ChevronDown, ChevronUp, BookOpen, Lightbulb, Zap } from 'lucide-react';

/**
 * Component hiển thị đề bài Reading Part 6 (Text Completion)
 * Đã tối ưu hóa cho Mobile-First, giao diện hiện đại, kích thước chữ phù hợp.
 */
const Part6Display = ({ part6 = null }) => {
  const [expandedPart, setExpandedPart] = useState(true);

  // --- 1. Xử lý trường hợp không có dữ liệu ---
  if (!part6) {
    return (
      <div className="bg-red-50 rounded-xl shadow-md border border-red-200 p-4 text-center">
        <p className="text-red-700 font-semibold text-sm flex items-center justify-center gap-2">
          <Zap className="w-4 h-4" /> Không tìm thấy dữ liệu Part 6
        </p>
      </div>
    );
  }

  // --- 2. Hàm render nội dung văn bản ---
  const renderContent = (part6Data) => {
    if (!part6Data || !part6Data.text || !part6Data.questions) {
      return <p className="text-red-600 text-sm">Dữ liệu văn bản không hợp lệ</p>;
    }

    const { text, questions } = part6Data;
    
    const fillQuestions = questions.filter(q => q.type === "fill");
    
    let displayText = text;
    // Thay thế các blank placeholder (ví dụ: (131)) bằng marker (**131**)
    fillQuestions.forEach(question => {
      const blank = `(${question.id})`;
      const marker = `**${question.id}**`;
      displayText = displayText.replace(blank, marker);
    });

    // Tách văn bản tại các marker (**ID**)
    const splitParts = displayText.split(/\*\*(\d+)\*\*/);

    return (
      <div className="text-gray-700 leading-relaxed whitespace-pre-wrap text-sm">
        {splitParts.map((part, index) => {
          // Phần text thông thường
          if (index % 2 === 0) {
            return <span key={index} className="text-gray-800">{part}</span>;
          } 
          // Phần chỗ trống (Question ID)
          else {
            const questionId = part; // Đây là ID dạng chuỗi (ví dụ: "131")
            return (
              <span
                key={index}
                className="inline-block mx-1.5 px-3 py-0.5 
                  bg-amber-50 border-2 border-amber-400 rounded-lg 
                  text-amber-900 font-extrabold text-xs shadow-inner 
                  md:text-sm"
              >
                ({questionId})
              </span>
            );
          }
        })}
      </div>
    );
  };

  // --- 3. Component chính ---
  return (
    <div className="bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
      
      {/* Part Header (Collapse/Expand Button) */}
      <button
        onClick={() => setExpandedPart(!expandedPart)}
        className="w-full p-4 md:p-5 flex items-center justify-between hover:bg-slate-50 transition-colors border-b border-gray-100"
      >
        <div className="flex items-center gap-3 md:gap-4 text-left flex-1">
          {/* Icon/Badge */}
          <div className="flex-shrink-0 w-8 h-8 md:w-10 md:h-10 
            bg-gradient-to-br from-blue-600 to-blue-500 rounded-full 
            flex items-center justify-center shadow-md">
            <span className="text-white font-black text-sm md:text-base">P6</span>
          </div>
          
          {/* Title and Description */}
          <div>
            <h2 className="text-base font-bold text-gray-900 md:text-lg">{part6.title}</h2>
            <p className="text-xs text-gray-500 md:text-sm">{part6.description}</p>
          </div>
        </div>
        
        {/* Expand/Collapse Icon */}
        <div className="flex-shrink-0">
          {expandedPart ? (
            <ChevronUp className="w-5 h-5 text-blue-500" />
          ) : (
            <ChevronDown className="w-5 h-5 text-gray-400" />
          )}
        </div>
      </button>

      {/* Part Content */}
      {expandedPart && (
        <div className="px-4 py-4 space-y-4 md:px-6 md:py-6 md:space-y-6">
          
          {/* Văn bản gốc của Part 6 */}
          <div className="bg-white rounded-lg p-4 border border-slate-200 shadow-inner">
            <div className="flex items-center gap-2 mb-3 border-b pb-2">
              <BookOpen className="w-4 h-4 text-blue-500" />
              <p className="font-bold text-blue-800 text-sm">Văn bản (Text Completion)</p>
            </div>
            {renderContent(part6)}
          </div>

          {/* Tips Section */}
          <div className="grid grid-cols-1 gap-3 md:grid-cols-2 md:gap-4">
            {/* Hướng dẫn */}
            <div className 
              ="bg-blue-50 rounded-lg p-3 border-l-4 border-blue-500 shadow-sm">
              <p className="text-sm font-bold text-blue-900 mb-0.5 flex items-center gap-1">
                <Zap className="w-4 h-4" /> Hướng dẫn
              </p>
              <p className="text-xs text-blue-800 md:text-sm">Chọn từ/cụm thích hợp (từ A, B, C, hoặc D) để điền vào các chỗ trống.</p>
            </div>
            
            {/* Mẹo */}
            <div className 
              ="bg-amber-50 rounded-lg p-3 border-l-4 border-amber-500 shadow-sm">
              <p className="text-sm font-bold text-amber-900 mb-0.5 flex items-center gap-1">
                <Lightbulb className="w-4 h-4" /> Mẹo làm bài
              </p>
              <p className="text-xs text-amber-800 md:text-sm">Đọc nhanh toàn bộ văn bản để hiểu ngữ cảnh trước khi tập trung vào từng câu hỏi.</p>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default Part6Display;
</file>

<file path="src/components/Display/ReadingPart7Display.jsx">
// ReadingPart7Display.jsx
import React from 'react';
import { Mail, Globe, Clock, User, ArrowRight } from 'lucide-react';

/**
 * Component hiển thị text đề bài Reading Part 7
 * Hỗ trợ: Website/Advertisement phía trên, Email phía dưới
 */
export default function ReadingPart7Display({ text = '' }) {
  
  const parseText = (inputText) => {
    try {
      if (!inputText || typeof inputText !== 'string') {
        return { website: null, email: null };
      }

      const trimmed = inputText.trim();
      if (trimmed.length === 0) {
        return { website: null, email: null };
      }

      // Split by separator "---" or detect email section by "To:"
      let websiteContent = [];
      let emailData = { headers: {}, body: [] };
      
      // Check if there's a separator
      const hasSeparator = trimmed.includes('---');
      
      if (hasSeparator) {
        // Split by separator
        const parts = trimmed.split('---');
        
        // First part is website
        if (parts[0]) {
          websiteContent = parts[0].trim().split('\n');
        }
        
        // Second part is email
        if (parts[1]) {
          const emailLines = parts[1].trim().split('\n');
          let isHeaderSection = true;
          
          for (let line of emailLines) {
            line = line.trim();
            
            // Skip "Email Message" header
            if (line === '**Email Message**' || line === 'Email Message') {
              continue;
            }
            
            // Parse email headers
            if (line.startsWith('**To:**') || line.startsWith('To:')) {
              emailData.headers.to = line.replace(/\*\*?To:\*\*?\s*/, '').trim();
            }
            else if (line.startsWith('**From:**') || line.startsWith('From:')) {
              emailData.headers.from = line.replace(/\*\*?From:\*\*?\s*/, '').trim();
            }
            else if (line.startsWith('**Date:**') || line.startsWith('Date:')) {
              emailData.headers.date = line.replace(/\*\*?Date:\*\*?\s*/, '').trim();
            }
            else if (line.startsWith('**Subject:**') || line.startsWith('Subject:')) {
              emailData.headers.subject = line.replace(/\*\*?Subject:\*\*?\s*/, '').trim();
              isHeaderSection = false; // After subject, body starts
            }
            // Email body content
            else if (!isHeaderSection && line.length > 0) {
              emailData.body.push(line);
            }
            else if (!isHeaderSection) {
              emailData.body.push(''); // Preserve empty lines
            }
          }
        }
      } else {
        // Fallback: detect by "To:" keyword
        const lines = trimmed.split('\n');
        let isEmailSection = false;
        
        for (let line of lines) {
          line = line.trim();
          
          if (line.startsWith('To:') || line.startsWith('**To:**')) {
            isEmailSection = true;
            emailData.headers.to = line.replace(/\*\*?To:\*\*?\s*/, '').trim();
          }
          else if (line.startsWith('From:') || line.startsWith('**From:**')) {
            emailData.headers.from = line.replace(/\*\*?From:\*\*?\s*/, '').trim();
          }
          else if (line.startsWith('Date:') || line.startsWith('**Date:**')) {
            emailData.headers.date = line.replace(/\*\*?Date:\*\*?\s*/, '').trim();
          }
          else if (line.startsWith('Subject:') || line.startsWith('**Subject:**')) {
            emailData.headers.subject = line.replace(/\*\*?Subject:\*\*?\s*/, '').trim();
          }
          else if (line.length > 0) {
            if (isEmailSection) {
              emailData.body.push(line);
            } else {
              websiteContent.push(line);
            }
          } else if (isEmailSection) {
            emailData.body.push('');
          }
        }
      }
      
      return {
        website: websiteContent.length > 0 ? websiteContent : null,
        email: Object.keys(emailData.headers).length > 0 ? emailData : null
      };
    } catch (error) {
      console.error('Error parsing text:', error);
      return { website: null, email: null };
    }
  };

  const { website, email } = parseText(text);

  // Debug log
  console.log('Parsed data:', { 
    hasWebsite: !!website, 
    hasEmail: !!email,
    emailHeaders: email?.headers 
  });

  if (!website && !email) {
    return (
      <div className="bg-gray-50 border-2 border-gray-300 rounded p-8 text-center">
        <p className="text-gray-500 text-sm">Không có nội dung để hiển thị.</p>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {website && <WebsiteDisplay content={website} />}
      {email && <EmailDisplay emailData={email} />}
    </div>
  );
}

/**
 * Component hiển thị Website/Advertisement
 */
function WebsiteDisplay({ content }) {
  if (!content || content.length === 0) return null;

  // Parse website content
  let url = '';
  let title = '';
  let subtitle = '';
  let sections = [];
  let currentSection = { title: '', items: [], text: [] };

  content.forEach((line, idx) => {
    // URL detection
    if (line.startsWith('http') && !url) {
      url = line;
    }
    // Main title
    else if (!title && line.includes('**') && idx < 3) {
      title = line.replace(/\*\*/g, '');
    }
    // Subtitle
    else if (!subtitle && title && line.length > 0 && idx < 5) {
      subtitle = line.replace(/\*\*/g, '');
    }
    // Section headers
    else if (line.startsWith('**') && line.endsWith('**')) {
      if (currentSection.title || currentSection.items.length > 0 || currentSection.text.length > 0) {
        sections.push({ ...currentSection });
      }
      currentSection = { title: line.replace(/\*\*/g, ''), items: [], text: [] };
    }
    // Numbered lists
    else if (/^\d+\.\s/.test(line)) {
      const match = line.match(/^(\d+)\.\s(.+)$/);
      if (match) {
        currentSection.items.push(match[2].replace(/\*\*/g, ''));
      }
    }
    // Regular text
    else if (line.length > 0) {
      currentSection.text.push(line.replace(/\*\*/g, ''));
    }
  });

  if (currentSection.title || currentSection.items.length > 0 || currentSection.text.length > 0) {
    sections.push(currentSection);
  }

  return (
    <div className="bg-white border-2 border-gray-300 shadow-md">
      {/* Browser Bar */}
      <div className="bg-gradient-to-b from-gray-100 to-gray-200 border-b border-gray-400 px-3 py-2.5">
        <div className="flex items-center gap-2">
          <div className="flex gap-1.5">
            <div className="w-3 h-3 rounded-full bg-red-500 border border-red-600 shadow-sm"></div>
            <div className="w-3 h-3 rounded-full bg-yellow-400 border border-yellow-500 shadow-sm"></div>
            <div className="w-3 h-3 rounded-full bg-green-500 border border-green-600 shadow-sm"></div>
          </div>
          <div className="flex-1 bg-white border border-gray-300 rounded-md px-3 py-1.5 flex items-center gap-2 shadow-sm">
            <Globe className="w-3.5 h-3.5 text-gray-500" />
            <span className="text-xs text-gray-700 truncate font-medium">{url || 'http://www.globalexectravel.com'}</span>
          </div>
          <button className="w-7 h-7 bg-gray-300 hover:bg-gray-400 rounded flex items-center justify-center border border-gray-400 shadow-sm transition-colors">
            <span className="text-gray-700 font-bold text-xs">▶</span>
          </button>
        </div>
      </div>

      {/* Website Content */}
      <div className="bg-white p-6 md:p-10">
        {/* Header */}
        {title && (
          <div className="text-center mb-6 pb-5 border-b-2 border-gray-300">
            <h1 className="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
              {title}
            </h1>
            {subtitle && (
              <p className="text-sm md:text-base text-gray-700 italic mt-2">
                {subtitle}
              </p>
            )}
          </div>
        )}

        {/* Sections */}
        <div className="space-y-6">
          {sections.map((section, idx) => (
            <div key={idx}>
              {section.title && (
                <h2 className="text-lg md:text-xl font-bold text-gray-900 mb-3 border-l-4 border-blue-600 pl-3">
                  {section.title}
                </h2>
              )}
              
              {/* Text paragraphs */}
              {section.text.length > 0 && (
                <div className="space-y-3 mb-4">
                  {section.text.map((para, pIdx) => (
                    <p key={pIdx} className="text-sm md:text-base text-gray-800 leading-relaxed">
                      {para}
                    </p>
                  ))}
                </div>
              )}

              {/* Numbered items */}
              {section.items.length > 0 && (
                <div className="space-y-3">
                  {section.items.map((item, iIdx) => (
                    <div key={iIdx} className="flex gap-3 items-start bg-blue-50 p-3 rounded-lg border-l-4 border-blue-500">
                      <span className="flex-shrink-0 w-7 h-7 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold shadow-sm">
                        {iIdx + 1}
                      </span>
                      <p className="flex-1 text-sm md:text-base text-gray-800 leading-relaxed pt-1">
                        {item}
                      </p>
                    </div>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

/**
 * Component hiển thị Email - Giao diện đẹp và hiện đại
 */
/**
 * Component hiển thị Email - Giao diện đẹp và hiện đại (Optimized for mobile)
 */
function EmailDisplay({ emailData }) {
  if (!emailData || !emailData.headers) return null;

  // Extract first letter for avatar
  const getInitial = (text) => {
    return text ? text.charAt(0).toUpperCase() : '?';
  };

  // Extract name from email
  const getName = (email) => {
    if (!email) return '';
    const match = email.match(/^([^@]+)@/);
    if (match) {
      return match[1].split(/[._-]/).map(word => 
        word.charAt(0).toUpperCase() + word.slice(1)
      ).join(' ');
    }
    return email;
  };

  // Generate random color for avatar
  const getAvatarColor = (email) => {
    const colors = [
      'from-blue-500 to-blue-700',
      'from-purple-500 to-purple-700',
      'from-pink-500 to-pink-700',
      'from-indigo-500 to-indigo-700',
      'from-teal-500 to-teal-700',
      'from-green-500 to-green-700',
    ];
    const index = (email?.charCodeAt(0) || 0) % colors.length;
    return colors[index];
  };

  const senderName = getName(emailData.headers.from);
  const senderInitial = getInitial(senderName);
  const avatarColor = getAvatarColor(emailData.headers.from);

  return (
    <div className="bg-gradient-to-br from-gray-50 to-gray-100 shadow-2xl overflow-hidden border border-gray-200">
      {/* Email Client Header - Compact Design */}
      <div className="bg-white border-b border-gray-200">
        <div className="px-4 md:px-6 py-3 flex items-center justify-between">
          <div className="flex items-center gap-2 md:gap-3">
            <div className="w-8 h-8 md:w-10 md:h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md">
              <Mail className="w-4 h-4 md:w-5 md:h-5 text-white" />
            </div>
            <div>
              <h2 className="text-sm md:text-lg font-bold text-gray-900">Email</h2>
              <p className="text-xs text-gray-500 hidden md:block">Inbox Message</p>
            </div>
          </div>
        </div>
      </div>

      {/* Email Message Container */}
      <div className="p-3 md:p-6">
        <div className="bg-white shadow-lg overflow-hidden border border-gray-200">
          
          {/* Email Subject Banner - Compact */}
          {emailData.headers.subject && (
            <div className="bg-gradient-to-r from-blue-600 to-blue-700 px-4 md:px-6 py-3 md:py-5">
              <div className="flex items-start gap-2 md:gap-3">
                <Mail className="w-4 h-4 md:w-6 md:h-6 text-white mt-0.5 md:mt-1 flex-shrink-0" />
                <div className="flex-1 min-w-0">
                  <div className="text-xs font-semibold text-blue-200 uppercase tracking-wide mb-0.5 md:mb-1">
                    Subject
                  </div>
                  <h3 className="text-base md:text-xl lg:text-2xl font-bold text-white leading-tight break-words">
                    {emailData.headers.subject}
                  </h3>
                </div>
              </div>
            </div>
          )}

          {/* Email Header Information - Compact */}
          <div className="bg-gradient-to-b from-gray-50 to-white border-b-2 border-gray-200 px-4 md:px-6 py-3 md:py-5">
            <div className="flex items-start gap-3 md:gap-4">
              {/* Avatar - Smaller on mobile */}
              <div className="flex-shrink-0">
                <div className={`w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br ${avatarColor} rounded-full flex items-center justify-center shadow-lg ring-2 md:ring-4 ring-white`}>
                  <span className="text-white font-bold text-base md:text-xl">
                    {senderInitial}
                  </span>
                </div>
              </div>

              {/* Sender Details - Responsive */}
              <div className="flex-1 min-w-0">
                <div className="mb-2 md:mb-3">
                  <h4 className="text-sm md:text-lg font-bold text-gray-900 mb-0.5 md:mb-1 truncate">
                    {senderName}
                  </h4>
                  <p className="text-xs md:text-sm text-gray-600 font-medium truncate">
                    {emailData.headers.from}
                  </p>
                </div>

                {/* To and Date Info - Stack on mobile */}
                <div className="space-y-1.5 md:space-y-2">
                  {emailData.headers.to && (
                    <div className="flex items-center gap-1.5 md:gap-2 text-xs md:text-sm overflow-hidden">
                      <div className="flex items-center gap-1.5 md:gap-2 bg-blue-50 px-2 md:px-3 py-1 md:py-1.5 rounded-md border border-blue-200 min-w-0">
                        <User className="w-3 h-3 md:w-4 md:h-4 text-blue-600 flex-shrink-0" />
                        <span className="text-gray-600 font-medium flex-shrink-0">To:</span>
                        <span className="text-gray-900 font-semibold truncate">{emailData.headers.to}</span>
                      </div>
                    </div>
                  )}
                  {emailData.headers.date && (
                    <div className="flex items-center gap-1.5 md:gap-2 text-xs md:text-sm">
                      <div className="flex items-center gap-1.5 md:gap-2 bg-gray-100 px-2 md:px-3 py-1 md:py-1.5 rounded-md border border-gray-200">
                        <Clock className="w-3 h-3 md:w-4 md:h-4 text-gray-600 flex-shrink-0" />
                        <span className="text-gray-700 font-medium">{emailData.headers.date}</span>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>

          {/* Email Body - Optimized font sizes */}
          <div className="bg-white px-4 md:px-8 lg:px-10 py-5 md:py-8 lg:py-10 min-h-[200px]">
            <div className="max-w-3xl">
              <div className="space-y-3 md:space-y-4 text-gray-800">
                {emailData.body.map((line, idx) => (
                  line === '' ? (
                    <div key={idx} className="h-2 md:h-4"></div>
                  ) : (
                    <p key={idx} className="text-sm md:text-base leading-relaxed text-gray-700">
                      {line}
                    </p>
                  )
                ))}
              </div>
            </div>
          </div>

          {/* Email Footer Actions - Compact on mobile */}
          <div className="bg-gradient-to-b from-gray-50 to-gray-100 border-t-2 border-gray-200 px-4 md:px-6 py-3 md:py-5">
            <div className="flex items-center justify-between flex-wrap gap-2 md:gap-4">
              <div className="flex items-center gap-2 md:gap-3">
                <button className="group px-4 md:px-6 py-2 md:py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg font-semibold text-xs md:text-sm shadow-md hover:shadow-lg transition-all flex items-center gap-1.5 md:gap-2">
                  <Mail className="w-3 h-3 md:w-4 md:h-4" />
                  <span>Reply</span>
                  <ArrowRight className="w-3 h-3 md:w-4 md:h-4 group-hover:translate-x-1 transition-transform hidden md:inline" />
                </button>
                <button className="px-4 md:px-6 py-2 md:py-3 bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-300 rounded-lg font-semibold text-xs md:text-sm shadow-sm hover:shadow-md transition-all">
                  Forward
                </button>
              </div>
              <div className="flex items-center gap-1.5 md:gap-2 text-xs text-gray-500">
                <div className="w-1.5 h-1.5 md:w-2 md:h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span className="hidden md:inline">End of message</span>
                <span className="md:hidden">End</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/components/Display/ReadingPart8Display.jsx">
// ReadingPart8Display.jsx
import React from 'react';
import { MessageCircle, FileText, Calendar, Users, Zap } from 'lucide-react';

/**
 * Component hiển thị text đề bài Reading Part 8 (Multiple Texts/Chat Threads)
 * Đã tối ưu hóa cho Mobile-First, giao diện hiện đại (Chat UI), kích thước chữ phù hợp.
 */
export default function ReadingPart8Display({ text = '', type = 'general' }) {
  
  const parseText = (inputText) => {
    try {
      if (!inputText || typeof inputText !== 'string') {
        return [];
      }

      const trimmed = inputText.trim();
      if (trimmed.length === 0) {
        return [];
      }

      const sections = [];
      const lines = trimmed.split('\n');
      
      let currentSection = { type: 'text', content: [] };
      let chatMeta = { platform: '', date: '', participants: '' };
      let hasHeader = false;
      
      for (let i = 0; i < lines.length; i++) {
        let line = lines[i];
        if (!line) continue;
        
        line = line.trim();
        if (!line) continue;

        // ===== Detect chat header title =====
        if (line.match(/^\*\*.*Thread\*\*$/i) || 
            line.match(/^\*\*.*Conversation\*\*$/i) ||
            line.match(/^\*\*.*Chat\*\*$/i) ||
            line.match(/^\*\*.*Messages?\*\*$/i)) {
          
          // Flush previous section if it's not empty
          if (currentSection.content && currentSection.content.length > 0) {
            sections.push(currentSection);
            currentSection = { type: 'text', content: [] };
          }

          const headerTitle = line.replace(/\*\*/g, '').trim();
          sections.push({ 
            type: 'chat-header', 
            title: headerTitle,
          });
          hasHeader = true;
          continue;
        }

        // Detect date header
        if (line.startsWith('**Date:**')) {
          const dateMatch = line.match(/\*\*Date:\*\*\s*(.+)/);
          if (dateMatch) {
            chatMeta.date = dateMatch[1].trim();
            
            // Nếu đang trong tin nhắn và có tin nhắn, kết thúc khối tin nhắn và chèn Date Separator
            if (currentSection.type === 'textmessage' && currentSection.messages?.length > 0) {
              sections.push(currentSection);
              sections.push({ type: 'date-separator', date: chatMeta.date });
              // Bắt đầu khối tin nhắn mới với meta mới
              currentSection = { type: 'textmessage', messages: [], meta: { ...chatMeta } };
            } else {
              sections.push({ type: 'date-separator', date: chatMeta.date });
            }
          }
          continue;
        }

        // Detect participants
        if (line.startsWith('**Participants:**')) {
          const participantsMatch = line.match(/\*\*Participants:\*\*\s*(.+)/);
          if (participantsMatch) {
            chatMeta.participants = participantsMatch[1].trim();
          }
          continue;
        }

        // Detect text message format: "Name (Time): Message" 
        const textMsgMatch = line.match(/^([A-Za-z0-9\s.]+?)\s*\((\d{1,2}:\d{2})\):\s*(.+)$/);
        
        if (textMsgMatch && textMsgMatch[1] && textMsgMatch[2] && textMsgMatch[3]) {
          if (currentSection.type !== 'textmessage') {
            // Flush previous text section
            if (currentSection.content && currentSection.content.length > 0) {
              sections.push(currentSection);
            }
            currentSection = { 
              type: 'textmessage', 
              messages: [], 
              meta: { ...chatMeta } 
            };
          }
          
          currentSection.messages.push({
            sender: textMsgMatch[1].trim(),
            time: textMsgMatch[2],
            message: textMsgMatch[3]
          });
        } else {
          // Regular text line
          // Nếu đang trong khối tin nhắn, kết thúc nó
          if (currentSection.type === 'textmessage' && currentSection.messages && currentSection.messages.length > 0) {
            sections.push(currentSection);
            currentSection = { type: 'text', content: [] };
          }
          
          // Thêm dòng text vào khối text hiện tại
          currentSection.content.push(line);
        }
      }
      
      // Flush the last section
      if (currentSection.type === 'textmessage' && currentSection.messages && currentSection.messages.length > 0) {
        sections.push(currentSection);
      } else if (currentSection.content && currentSection.content.length > 0) {
        sections.push(currentSection);
      }
      
      return sections.filter(s => s.type !== 'text' || s.content.some(c => c.length > 0));
    } catch (error) {
      console.error('Error parsing text:', error);
      return [];
    }
  };

  const renderTextMessages = (section) => {
    if (!section?.messages || !Array.isArray(section.messages) || section.messages.length === 0) {
      return null;
    }

    // Lấy ra tất cả tên người gửi duy nhất
    const uniqueSenders = Array.from(new Set(section.messages.map(msg => msg.sender)));
    
    // Nhóm tin nhắn liên tiếp từ cùng một người
    const groupedMessages = [];
    let currentGroup = null;

    section.messages.forEach((msg) => {
      if (!currentGroup || currentGroup.sender !== msg.sender) {
        currentGroup = { sender: msg.sender, messages: [msg] };
        groupedMessages.push(currentGroup);
      } else {
        currentGroup.messages.push(msg);
      }
    });

    // Xác định màu cho từng người (có thể dùng hash map thay cho mảng để màu sắc luôn ổn định)
    const senderColors = {};
    const colors = [
      { bg: 'bg-blue-500', text: 'text-white', name: 'text-blue-600', badge: 'bg-blue-100' },
      { bg: 'bg-purple-500', text: 'text-white', name: 'text-purple-600', badge: 'bg-purple-100' },
      { bg: 'bg-emerald-500', text: 'text-white', name: 'text-emerald-600', badge: 'bg-emerald-100' },
    ];
    
    uniqueSenders.forEach((sender, index) => {
      senderColors[sender] = colors[index % colors.length];
    });
    
    // Giả định người gửi đầu tiên là người "My Message" (bên phải)
    const firstSender = section.messages[0]?.sender;
    
    return (
      <div className="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden text-sm">
        
        {/* Metadata Header (Gọn hơn trên di động) */}
        <div className="px-4 py-2 border-b border-gray-100 bg-gray-50 flex flex-wrap items-center justify-between gap-2">
          <div className="flex items-center gap-2">
            <Users className="w-4 h-4 text-gray-500" />
            <p className="text-gray-700 font-semibold text-xs md:text-sm truncate">
              {section.meta?.participants || 'Group Conversation'}
            </p>
          </div>
          {section.meta?.date && (
            <div className="flex items-center gap-1 text-gray-500 text-xs">
              <Calendar className="w-3 h-3" />
              <span className="font-medium">{section.meta.date}</span>
            </div>
          )}
        </div>

        {/* Messages Container */}
        <div className="p-4 space-y-4 max-h-[500px] overflow-y-auto md:p-6 md:space-y-6">
          {groupedMessages.map((group, groupIdx) => {
            const colorScheme = senderColors[group.sender] || colors[0];
            // Xác định người gửi này có phải là người gửi đầu tiên (giả định là người dùng hiện tại/bên phải)
            const isFirstSender = group.sender === firstSender; 
            const bubbleAlign = isFirstSender ? 'justify-end' : 'justify-start';
            
            return (
              <div key={groupIdx} className="flex flex-col">
                
                {/* Tên người gửi */}
                <div className={`mb-1 flex items-center gap-2 ${isFirstSender ? 'justify-end' : 'justify-start'}`}>
                  <span className={`text-xs font-bold ${colorScheme.name} md:text-sm`}>
                    {group.sender}
                  </span>
                </div>

                {/* Các tin nhắn trong nhóm */}
                <div className={`flex ${bubbleAlign}`}>
                  <div className="space-y-1 max-w-[85%] md:max-w-[75%]">
                    {group.messages.map((msg, msgIdx) => (
                      <div key={msgIdx} className={`flex ${isFirstSender ? 'justify-end' : 'justify-start'}`}>
                        <div 
                          className={`px-4 py-2 rounded-xl shadow-md ${isFirstSender ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-800'} break-words transition-all duration-150`}
                          style={{
                            // Tạo hiệu ứng "đuôi" tin nhắn
                            borderTopRightRadius: isFirstSender && msgIdx === 0 ? '4px' : '12px',
                            borderTopLeftRadius: !isFirstSender && msgIdx === 0 ? '4px' : '12px',
                            borderBottomLeftRadius: isFirstSender && msgIdx === group.messages.length - 1 ? '12px' : '4px',
                            borderBottomRightRadius: !isFirstSender && msgIdx === group.messages.length - 1 ? '12px' : '4px',
                          }}
                        >
                          <p className="text-sm leading-relaxed">{msg.message}</p>
                        </div>
                      </div>
                    ))}
                    
                    {/* Thời gian chỉ hiển thị sau tin nhắn cuối cùng trong nhóm */}
                    <div className={`mt-0.5 ${isFirstSender ? 'text-right' : 'text-left'}`}>
                      <span className="text-xs text-gray-500 font-medium">
                        {group.messages[group.messages.length - 1]?.time}
                      </span>
                    </div>

                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    );
  };
  
  const renderChatHeader = (section) => {
    // Tự động detect icon và màu sắc dựa trên title
    let Icon = MessageCircle;
    let gradientFrom = 'from-green-600';
    let gradientTo = 'to-emerald-500';
    let iconBg = 'bg-green-500';
    
    const titleLower = section.title.toLowerCase();
    
    // Logic detection cho các nền tảng chat nổi tiếng
    if (titleLower.includes('linkedin')) {
      Icon = () => (
        <svg className="w-5 h-5 text-white md:w-6 md:h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
        </svg>
      );
      gradientFrom = 'from-[#0077B5]';
      gradientTo = 'to-[#005885]';
      iconBg = 'bg-[#0077B5]';
    } else if (titleLower.includes('whatsapp')) {
      Icon = () => (
        <svg className="w-5 h-5 text-white md:w-6 md:h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
      );
      gradientFrom = 'from-[#25D366]';
      gradientTo = 'to-[#128C7E]';
      iconBg = 'bg-[#25D366]';
    } else if (titleLower.includes('slack')) {
      Icon = () => (
        <svg className="w-5 h-5 text-white md:w-6 md:h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"/>
        </svg>
      );
      gradientFrom = 'from-[#4A154B]';
      gradientTo = 'to-[#36C5F0]';
      iconBg = 'bg-[#4A154B]';
    } else if (titleLower.includes('messenger') || titleLower.includes('facebook')) {
      Icon = MessageCircle;
      gradientFrom = 'from-[#0084FF]';
      gradientTo = 'to-[#00C6FF]';
      iconBg = 'bg-[#0084FF]';
    } else if (titleLower.includes('telegram')) {
      Icon = () => (
        <svg className="w-5 h-5 text-white md:w-6 md:h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
        </svg>
      );
      gradientFrom = 'from-[#0088cc]';
      gradientTo = 'to-[#229ED9]';
      iconBg = 'bg-[#0088cc]';
    }

    return (
      <div className="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden mb-4 md:mb-6">
        <div className={`bg-gradient-to-r ${gradientFrom} ${gradientTo} px-4 py-3 md:px-6 md:py-4`}>
          <div className="flex items-center gap-3 md:gap-4">
            {/* Icon với hiệu ứng đẹp */}
            <div className={`${iconBg} p-2 rounded-lg shadow-md flex-shrink-0`}>
              <Icon />
            </div>
            
            {/* Title */}
            <div className="flex-1 min-w-0">
              <h2 className="text-white font-bold text-lg tracking-tight truncate md:text-xl drop-shadow">
                {section.title}
              </h2>
              <p className="text-white/80 text-xs font-medium mt-0.5 hidden md:block">
                Professional Communication Thread
              </p>
            </div>
          </div>
        </div>
      </div>
    );
  };

  const renderDateSeparator = (section) => (
    <div className="flex items-center gap-3 my-3">
      <div className="flex-1 h-[1px] bg-gradient-to-r from-transparent via-gray-300 to-gray-300"></div>
      <div className="flex items-center gap-1 bg-gray-100 px-3 py-1 rounded-full shadow-sm">
        <Calendar className="w-3 h-3 text-gray-500" />
        <span className="text-xs font-semibold text-gray-600">{section.date}</span>
      </div>
      <div className="flex-1 h-[1px] bg-gradient-to-l from-transparent via-gray-300 to-gray-300"></div>
    </div>
  );

  const renderText = (section) => (
    <div className="bg-white rounded-xl shadow-md border border-gray-200 p-4 md:p-6">
      <div className="space-y-3">
        {Array.isArray(section.content) && section.content.map((line, idx) => (
          <p key={idx} className="text-gray-800 leading-relaxed text-sm md:text-base">
            {line}
          </p>
        ))}
      </div>
    </div>
  );

  const sections = parseText(text);

  if (!sections || sections.length === 0) {
    return (
      <div className="bg-gray-50 rounded-xl shadow-lg border border-gray-200 p-6 text-center">
        <FileText className="w-8 h-8 text-gray-400 mx-auto mb-3" />
        <p className="text-gray-500 font-semibold text-sm">Không có nội dung để hiển thị.</p>
      </div>
    );
  }

  return (
    <div className="space-y-4 md:space-y-6 reading-part8-container">
      {sections.map((section, idx) => {
        if (!section) return null;
        
        if (section.type === 'chat-header') {
          return <div key={idx}>{renderChatHeader(section)}</div>;
        } else if (section.type === 'textmessage') {
          return <div key={idx}>{renderTextMessages(section)}</div>;
        } else if (section.type === 'date-separator') {
          return <div key={idx}>{renderDateSeparator(section)}</div>;
        } else {
          return <div key={idx}>{renderText(section)}</div>;
        }
      })}
    </div>
  );
}
</file>

<file path="src/components/Display/ResultsDisplay.jsx">
import React, { useState } from 'react';
import { Trophy, Target, CheckCircle, XCircle, RotateCcw, Award, TrendingUp } from 'lucide-react';
import ExplanationSection from './ExplanationDisplay';

const ResultsDisplay = ({ score, partData, answers, onReset }) => {
  if (!partData) return null;

  const getPerformanceLevel = (percentage) => {
    if (percentage >= 90) return { label: 'Xuất sắc', color: 'emerald', emoji: '🌟' };
    if (percentage >= 80) return { label: 'Rất tốt', color: 'teal', emoji: '🎯' };
    if (percentage >= 70) return { label: 'Tốt', color: 'blue', emoji: '👍' };
    if (percentage >= 60) return { label: 'Khá', color: 'amber', emoji: '📈' };
    if (percentage >= 50) return { label: 'Trung bình', color: 'orange', emoji: '⚠️' };
    return { label: 'Cần cố gắng', color: 'red', emoji: '💪' };
  };

  const performance = getPerformanceLevel(score.percentage);
  const wrongCount = score.total - score.correct;

  return (
    <div className="relative min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-4 sm:p-6">
      {/* Simplified Background */}
      <div className="absolute inset-0 overflow-hidden pointer-events-none">
        <div className="absolute top-[-8rem] right-[-8rem] w-96 h-96 bg-orange-200/10 rounded-full blur-3xl" />
      </div>

      {/* Main Content */}
      <div className="relative z-10 max-w-5xl mx-auto space-y-4">
        
        {/* Header */}
        <div className="bg-gradient-to-r from-orange-500 to-amber-500 rounded-2xl p-6 text-white text-center">
          <Trophy className="w-16 h-16 mx-auto mb-3 text-yellow-200" />
          <h2 className="text-3xl sm:text-4xl font-bold mb-2">KẾT QUẢ BÀI THI</h2>
          <p className="text-lg opacity-90">Xem chi tiết và cải thiện kỹ năng!</p>
        </div>

        {/* Score Summary - 3 cards ngang */}
        <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
          {/* Điểm số */}
          <div className="bg-white rounded-xl border border-gray-200 p-5 text-center">
            <Target className="w-8 h-8 text-orange-500 mx-auto mb-2" />
            <p className="text-sm text-gray-600 font-medium mb-1">Kết quả</p>
            <p className="text-4xl font-bold text-orange-600">
              {score.correct}<span className="text-xl text-gray-400">/{score.total}</span>
            </p>
          </div>

          {/* Phần trăm */}
          <div className="bg-white rounded-xl border border-gray-200 p-5 text-center">
            <TrendingUp className="w-8 h-8 text-green-500 mx-auto mb-2" />
            <p className="text-sm text-gray-600 font-medium mb-1">Tỷ lệ chính xác</p>
            <p className="text-4xl font-bold text-green-600">
              {score.percentage.toFixed(0)}<span className="text-xl">%</span>
            </p>
          </div>

          {/* Xếp loại */}
          <div className="bg-white rounded-xl border border-gray-200 p-5 text-center">
            <Award className={`w-8 h-8 text-${performance.color}-500 mx-auto mb-2`} />
            <p className="text-sm text-gray-600 font-medium mb-1">Xếp loại</p>
            <p className="text-3xl mb-1">{performance.emoji}</p>
            <p className={`text-xl font-bold text-${performance.color}-600`}>
              {performance.label}
            </p>
          </div>
        </div>

        {/* Progress Bar */}
        <div className="bg-white rounded-xl border border-gray-200 p-5">
          <div className="flex justify-between items-center mb-3">
            <h3 className="text-lg font-semibold text-gray-800">Tiến độ hoàn thành</h3>
            <span className="text-sm font-medium text-gray-600">
              {score.correct}/{score.total} câu
            </span>
          </div>
          <div className="bg-gray-200 rounded-full h-3 overflow-hidden">
            <div
              className="h-full transition-all duration-1000"
              style={{
                width: `${score.percentage}%`,
                background: score.percentage >= 70 
                  ? 'linear-gradient(to right, #10b981, #34d399)'
                  : score.percentage >= 50 
                  ? 'linear-gradient(to right, #f59e0b, #fbbf24)'
                  : 'linear-gradient(to right, #ef4444, #f87171)'
              }}
            />
          </div>
        </div>

        {/* Quick Stats */}
        <div className="bg-white rounded-xl border border-gray-200 p-5">
          <h3 className="text-lg font-semibold text-gray-800 mb-3">Thống kê nhanh</h3>
          <div className="grid grid-cols-2 gap-4">
            <div className="flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200">
              <CheckCircle className="w-6 h-6 text-green-600 flex-shrink-0" />
              <div>
                <p className="text-sm text-gray-600">Câu đúng</p>
                <p className="text-2xl font-bold text-green-600">{score.correct}</p>
              </div>
            </div>
            <div className="flex items-center gap-3 p-3 bg-red-50 rounded-lg border border-red-200">
              <XCircle className="w-6 h-6 text-red-600 flex-shrink-0" />
              <div>
                <p className="text-sm text-gray-600">Câu sai</p>
                <p className="text-2xl font-bold text-red-600">{wrongCount}</p>
              </div>
            </div>
          </div>
        </div>

        {/* Action Buttons */}
        <div className="flex flex-col sm:flex-row gap-3 justify-center">
          <button
            onClick={onReset}
            className="flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white rounded-lg font-semibold transition-all text-base"
          >
            <RotateCcw className="w-5 h-5" />
            Làm lại bài này
          </button>

          <button
            onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
            className="flex items-center justify-center gap-2 px-6 py-3 bg-white hover:bg-gray-50 text-gray-800 border border-gray-300 rounded-lg font-semibold transition-all text-base"
          >
            <Target className="w-5 h-5" />
            Chọn bài khác
          </button>
        </div>

        {/* Answers Review - Tích hợp ExplanationSection */}
        <div className="bg-white rounded-xl border border-gray-200 p-5">
          <div className="flex items-center justify-between mb-4 pb-3 border-b border-gray-200">
            <h3 className="text-xl font-bold text-gray-900">Chi tiết đáp án</h3>
            <span className="text-sm font-medium text-gray-600">
              {partData.questions.length} câu hỏi
            </span>
          </div>

          <div className="space-y-4">
            {partData.questions.map((q) => {
              const isCorrect = answers[q.id] === q.correct;
              const userAnswer = answers[q.id];

              return (
                <div
                  key={q.id}
                  className={`rounded-lg border-2 transition-all overflow-hidden ${
                    isCorrect
                      ? 'bg-green-50 border-green-300'
                      : 'bg-red-50 border-red-300'
                  }`}
                >
                  {/* Question Header */}
                  <div className="p-4">
                    <div className="flex items-start gap-3">
                      {/* Icon */}
                      <div className={`p-1.5 rounded-full flex-shrink-0 ${
                        isCorrect ? 'bg-green-500' : 'bg-red-500'
                      }`}>
                        {isCorrect ? (
                          <CheckCircle className="w-5 h-5 text-white" />
                        ) : (
                          <XCircle className="w-5 h-5 text-white" />
                        )}
                      </div>

                      {/* Question Text */}
                      <div className="flex-1 min-w-0">
                        <p className="font-semibold text-gray-900 text-base">
                          Câu {q.id}: {q.question}
                        </p>
                        
                        {/* Answer Summary */}
                        <div className="flex flex-wrap items-center gap-2 mt-2">
                          <span className="text-xs text-gray-600">Bạn chọn:</span>
                          <span className={`text-xs font-bold px-2 py-0.5 rounded-full ${
                            isCorrect
                              ? 'bg-green-500 text-white'
                              : 'bg-red-500 text-white'
                          }`}>
                            {userAnswer !== undefined 
                              ? String.fromCharCode(65 + userAnswer)
                              : 'Chưa chọn'}
                          </span>
                          
                          {!isCorrect && (
                            <>
                              <span className="text-xs text-gray-600">| Đáp án:</span>
                              <span className="text-xs font-bold px-2 py-0.5 rounded-full bg-green-500 text-white">
                                {String.fromCharCode(65 + q.correct)}
                              </span>
                            </>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* Explanation Section - Tích hợp component */}
                  {q.explanation && (
                    <div className="border-t border-gray-300 px-4 py-3">
                      <ExplanationSection 
                        explanation={q.explanation}
                        question={q.question}
                        userAnswer={userAnswer}
                        correctAnswer={q.correct}
                        isCorrect={isCorrect}
                        questionId={q.id}
                        options={q.options}
                      />
                    </div>
                  )}
                </div>
              );
            })}
          </div>
        </div>

        {/* Motivational Message */}
        <div className={`rounded-xl border-2 p-5 text-center ${
          score.percentage >= 70 
            ? 'bg-green-50 border-green-300' 
            : 'bg-orange-50 border-orange-300'
        }`}>
          <p className="text-lg font-bold text-gray-800 mb-2">
            {score.percentage >= 90 && '🎉 Xuất sắc! Bạn đã làm rất tốt!'}
            {score.percentage >= 70 && score.percentage < 90 && '👏 Rất tốt! Tiếp tục phát huy nhé!'}
            {score.percentage >= 50 && score.percentage < 70 && '💪 Khá tốt! Hãy luyện tập thêm!'}
            {score.percentage < 50 && '📚 Đừng nản lòng! Cố gắng lên bạn nhé!'}
          </p>
          <p className="text-sm text-gray-700">
            Luyện tập đều đặn sẽ giúp bạn tiến bộ nhanh hơn! 🚀
          </p>
        </div>
      </div>
    </div>
  );
};

export default ResultsDisplay;
</file>

<file path="src/components/Grama/GrammarReview.jsx">
import React, { useState, useCallback, useMemo } from 'react';
import { 
  ChevronDown, ChevronUp, BookOpen, AlertCircle, Lightbulb, 
  PlayCircle, CheckCircle, XCircle, Award, Search 
} from 'lucide-react';
import { 
  GRAMMAR_DATA, getGrammarByLevel, searchLessons, 
  GRAMMAR_QUIZZES, COMMON_MISTAKES, STUDY_TIPS, REAL_WORLD_EXAMPLES 
} from '../../data/grammarData';
import GrammarTopicPage from './GrammarTopicPage';
import '../styles/GrammarReview.css';

const GrammarReview = () => {
  // State Management
  const [selectedLevel, setSelectedLevel] = useState('Beginner');
  const [selectedTopic, setSelectedTopic] = useState(null);
  const [searchQuery, setSearchQuery] = useState('');
  const [filterDifficulty, setFilterDifficulty] = useState('All');
  const [activeTab, setActiveTab] = useState('topics');
  const [completedLessons, setCompletedLessons] = useState([]);

  // Memoized data
  const grammarData = useMemo(() => getGrammarByLevel(selectedLevel), [selectedLevel]);
  const searchResults = useMemo(() => searchQuery ? searchLessons(searchQuery) : [], [searchQuery]);

  // Callbacks
  const handleTopicSelect = useCallback((topic) => {
    setSelectedTopic(prev => prev?.id === topic.id ? null : topic);
  }, []);

  const calculateProgress = useCallback(() => {
    if (!grammarData) return 0;
    const totalLessons = Object.values(grammarData.topics).reduce((acc, topic) => 
      acc + (topic.lessons?.length || 0), 0
    );
    return totalLessons > 0 ? Math.round((completedLessons.length / totalLessons) * 100) : 0;
  }, [grammarData, completedLessons]);

  const handleLevelChange = useCallback((level) => {
    setSelectedLevel(level);
    setSelectedTopic(null);
    setSearchQuery('');
    setFilterDifficulty('All');
  }, []);

  // Render Functions - Optimized for mobile
  const renderHeader = () => (
    <div className="grammar-header">
      <div className="grammar-header-content">
        <div className="grammar-header-title">
          <h1 className="grammar-title">
            📚 Grammar Review
          </h1>
          <p className="grammar-subtitle">Master English grammar with interactive lessons</p>
        </div>
        <div className="grammar-progress-card">
          <div className="grammar-progress-value">{calculateProgress()}%</div>
          <p className="grammar-progress-label">Progress</p>
        </div>
      </div>

      <div className="grammar-level-buttons">
        {['Beginner', 'Intermediate', 'Advanced'].map(level => (
          <button
            key={level}
            onClick={() => handleLevelChange(level)}
            className={`grammar-level-btn ${
              selectedLevel === level ? 'active' : ''
            }`}
          >
            {level}
          </button>
        ))}
      </div>
    </div>
  );

  const renderSearchFilter = () => (
    <div className="grammar-search-section">
      <div className="grammar-search-wrapper">
        <Search className="grammar-search-icon" />
        <input
          type="text"
          placeholder="Search topics, lessons..."
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          className="grammar-search-input"
          aria-label="Search grammar topics"
        />
      </div>
      <div className="grammar-filter-buttons">
        {['All', 'Easy', 'Medium', 'Hard'].map(diff => (
          <button
            key={diff}
            onClick={() => setFilterDifficulty(diff)}
            className={`grammar-filter-btn ${
              filterDifficulty === diff ? 'active' : ''
            }`}
          >
            {diff}
          </button>
        ))}
      </div>
    </div>
  );

  const renderTabNavigation = () => {
    const tabs = [
      { id: 'topics', label: 'Topics', icon: '📖' },
      { id: 'mistakes', label: 'Mistakes', icon: '⚠️' },
      { id: 'tips', label: 'Tips', icon: '💡' },
      { id: 'examples', label: 'Examples', icon: '🌍' },
      { id: 'quiz', label: 'Quizzes', icon: '🎯' },
    ];

    return (
      <div className="grammar-tabs-container">
        <div className="grammar-tabs">
          {tabs.map(tab => (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`grammar-tab ${activeTab === tab.id ? 'active' : ''}`}
            >
              <span className="grammar-tab-icon">{tab.icon}</span>
              <span className="grammar-tab-label">{tab.label}</span>
            </button>
          ))}
        </div>
      </div>
    );
  };

  const renderTopicsView = () => {
    if (selectedTopic) {
      return (
        <div className="grammar-topic-page">
          <button
            onClick={() => setSelectedTopic(null)}
            className="grammar-back-btn"
          >
            ← Back to Topics
          </button>
          <GrammarTopicPage 
            topic={selectedTopic} 
            completedLessons={completedLessons}
            onLessonComplete={(lessonId) => {
              setCompletedLessons(prev =>
                prev.includes(lessonId) ? prev.filter(id => id !== lessonId) : [...prev, lessonId]
              );
            }}
          />
        </div>
      );
    }

    return (
      <div className="grammar-topics-list">
        {grammarData && Object.entries(grammarData.topics).map(([, topic]) => (
          <div key={topic.id} className="grammar-topic-card">
            <button
              onClick={() => handleTopicSelect(topic)}
              className="grammar-topic-btn"
            >
              <div className="grammar-topic-content">
                <span className="grammar-topic-icon">{topic.icon}</span>
                <div className="grammar-topic-info">
                  <h3 className="grammar-topic-title">{topic.title}</h3>
                  <p className="grammar-topic-desc">{topic.description}</p>
                </div>
              </div>
              <div className="grammar-topic-meta">
                <span className="grammar-difficulty-badge">
                  {topic.difficulty}
                </span>
                <ChevronDown className="grammar-chevron" />
              </div>
            </button>
          </div>
        ))}
      </div>
    );
  };

  const renderMistakesView = () => (
    <div className="grammar-content-list">
      {COMMON_MISTAKES.map(mistake => (
        <div key={mistake.id} className="grammar-mistake-card">
          <div className="grammar-mistake-content">
            <XCircle className="grammar-mistake-icon" />
            <div className="grammar-mistake-body">
              <div className="grammar-mistake-section">
                <h3 className="grammar-mistake-heading">Common Mistake:</h3>
                <p className="grammar-example-wrong">❌ {mistake.mistake}</p>
              </div>

              <div className="grammar-mistake-section">
                <h4 className="grammar-mistake-heading">Correct Form:</h4>
                <p className="grammar-example-right">✓ {mistake.correct}</p>
              </div>

              <div className="grammar-mistake-section">
                <h4 className="grammar-mistake-heading">Explanation:</h4>
                <p className="grammar-explanation">{mistake.explanation}</p>
              </div>

              <span className="grammar-topic-badge">
                Topic: {mistake.topic}
              </span>
            </div>
          </div>
        </div>
      ))}
    </div>
  );

  const renderTipsView = () => (
    <div className="grammar-content-list">
      {STUDY_TIPS.map(tip => (
        <div key={tip.id} className="grammar-tip-card">
          <div className="grammar-tip-content">
            <Lightbulb className="grammar-tip-icon" />
            <div className="grammar-tip-body">
              <h3 className="grammar-tip-title">{tip.title}</h3>
              <p className="grammar-tip-desc">{tip.description}</p>

              <div className="grammar-tip-topics">
                <span className="grammar-tip-topics-label">Related Topics:</span>
                <div className="grammar-tip-topics-list">
                  {tip.relatedTopics.map(topicId => (
                    <span key={topicId} className="grammar-related-badge">
                      {topicId.replace(/_/g, ' ')}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  );

  const renderExamplesView = () => (
    <div className="grammar-content-list">
      {REAL_WORLD_EXAMPLES.map(example => (
        <div key={example.id} className="grammar-example-card">
          <div className="grammar-example-context">
            {example.context}
          </div>
          
          <div className="grammar-example-section">
            <p className="grammar-example-label">Example:</p>
            <div className="grammar-example-text">
              "{example.original}"
            </div>
          </div>

          <div className="grammar-example-section">
            <p className="grammar-example-label">Why:</p>
            <p className="grammar-example-explanation">{example.explanation}</p>
          </div>

          <span className="grammar-example-badge">
            Topic: {example.topic}
          </span>
        </div>
      ))}
    </div>
  );

  const renderQuizView = () => (
    <div className="grammar-content-list">
      {GRAMMAR_QUIZZES.map(quiz => (
        <div key={quiz.quizId} className="grammar-quiz-card">
          <div className="grammar-quiz-header">
            <div className="grammar-quiz-info">
              <h3 className="grammar-quiz-title">{quiz.title}</h3>
              <p className="grammar-quiz-meta">
                {quiz.questions.length} questions • {quiz.duration} mins
              </p>
            </div>
            <span className="grammar-quiz-difficulty">
              {quiz.difficulty}
            </span>
          </div>

          <div className="grammar-quiz-topics">
            <p className="grammar-quiz-topics-label">Topics covered:</p>
            <div className="grammar-quiz-topics-list">
              {quiz.topics.map(topic => (
                <span key={topic} className="grammar-quiz-topic-badge">
                  {topic}
                </span>
              ))}
            </div>
          </div>

          <div className="grammar-quiz-score">
            <span className="grammar-quiz-score-label">Passing Score:</span> {quiz.passingScore}%
          </div>

          <button className="grammar-quiz-btn">
            <PlayCircle className="grammar-quiz-btn-icon" />
            Start Quiz
          </button>
        </div>
      ))}
    </div>
  );

  // Main render
  return (
    <div className="grammar-container">
      <div className="grammar-wrapper">
        {renderHeader()}
        {renderSearchFilter()}
        {renderTabNavigation()}

        <div className="grammar-main-content">
          {activeTab === 'topics' && renderTopicsView()}
          {activeTab === 'mistakes' && renderMistakesView()}
          {activeTab === 'tips' && renderTipsView()}
          {activeTab === 'examples' && renderExamplesView()}
          {activeTab === 'quiz' && renderQuizView()}
        </div>

        {searchQuery && searchResults.length === 0 && activeTab === 'topics' && !selectedTopic && (
          <div className="grammar-no-results">
            <BookOpen className="grammar-no-results-icon" />
            <p className="grammar-no-results-text">No results found for "{searchQuery}"</p>
          </div>
        )}
      </div>
    </div>
  );
};

export default GrammarReview;
</file>

<file path="src/components/Grama/GrammarTopicPage.jsx">
import React, { useState, useEffect, useCallback, useMemo, memo, lazy, Suspense } from 'react';
import ReactMarkdown from 'react-markdown';
import remarkGfm from 'remark-gfm';
import rehypeRaw from 'rehype-raw';
import { 
  ChevronDown, 
  ChevronUp, 
  BookOpen, 
  Lightbulb, 
  Award, 
  CheckCircle, 
  XCircle, 
  Languages, 
  Volume2,
  Star,
  Sparkles,
  Trophy,
  Target,
  Zap,
  Brain,
  Play,
  Check,
  Loader2
} from 'lucide-react';
import '../styles/GrammarTopicPage.css';

// Lazy load components for better performance
const ConfettiEffect = lazy(() => import('../ConfettiEffect'));

// Memoized sub-components
const ProgressBar = memo(({ percentage }) => (
  <div className="mt-6">
    <div className="flex items-center justify-between mb-2">
      <span className="text-sm font-medium text-gray-700">Your Progress</span>
      <span className="text-sm font-bold text-purple-600">{percentage}%</span>
    </div>
    <div className="w-full h-4 bg-gray-200 rounded-full overflow-hidden shadow-inner">
      <div 
        className="h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full transition-all duration-1000 ease-out relative"
        style={{ width: `${percentage}%` }}
      >
        <div className="progress-bar-shimmer animate-shimmer"></div>
      </div>
    </div>
  </div>
));

ProgressBar.displayName = 'ProgressBar';

// Memoized Badge Component
const Badge = memo(({ type, icon: Icon, children }) => {
  const classMap = {
    difficulty: 'badge-difficulty',
    streak: 'badge-streak',
    completion: 'badge-completion',
    completed: 'badge-completed'
  };

  return (
    <span className={`grammar-badge ${classMap[type]}`}>
      <Icon className="w-4 h-4" />
      {children}
    </span>
  );
});

Badge.displayName = 'Badge';

// Memoized Example Card
const ExampleCard = memo(({ example, index }) => (
  <div className="example-card group">
    <div className="flex items-start gap-4 mb-4">
      <span className="text-4xl group-hover:animate-bounce">💡</span>
      <div className="flex-1">
        <p className="font-semibold text-blue-900 text-lg mb-2">{example.example}</p>
        <p className="text-gray-600 text-sm italic">{example.explanation}</p>
      </div>
    </div>
    <div className="example-vietnamese">
      <p className="font-semibold text-green-800 mb-1">{example.vietnamese.example}</p>
      <p className="text-gray-600 text-sm">{example.vietnamese.explanation}</p>
    </div>
  </div>
));

ExampleCard.displayName = 'ExampleCard';

// Memoized Exercise Component
const Exercise = memo(({ exercise, index, result, onSubmit }) => {
  const [localAnswer, setLocalAnswer] = useState('');

  const handleInputBlur = useCallback((e) => {
    const userAnswer = e.target.value.trim().toLowerCase();
    const correct = userAnswer === exercise.correctAnswer.toLowerCase();
    onSubmit(exercise.exerciseId, correct);
  }, [exercise.exerciseId, exercise.correctAnswer, onSubmit]);

  const handleInputChange = useCallback((e) => {
    setLocalAnswer(e.target.value);
  }, []);

  return (
    <div className="exercise-card">
      <div className="flex justify-between items-center mb-6">
        <div className="flex items-center gap-4">
          <div className="exercise-number">{index + 1}</div>
          <div>
            <h3 className="text-xl font-bold text-gray-800">
              {exercise.type.replace('_', ' ').toUpperCase()}
            </h3>
            <span className="text-sm text-gray-500">{exercise.difficulty}</span>
          </div>
        </div>
        
        {result !== undefined && (
          <div 
            className={`grammar-badge ${result ? 'badge-completed' : ''}`}
            style={!result ? {backgroundColor: '#fee2e2', color: '#991b1b'} : {}}
          >
            {result ? (
              <>
                <CheckCircle className="w-5 h-5" />
                <span>Correct! 🎉</span>
              </>
            ) : (
              <>
                <XCircle className="w-5 h-5" />
                <span>Try Again</span>
              </>
            )}
          </div>
        )}
      </div>

      <div className="exercise-question">
        <p className="text-lg font-medium text-gray-800">{exercise.question}</p>
      </div>

      {exercise.type === 'multiple_choice' ? (
        <div className="space-y-4">
          {exercise.options.map((option, idx) => (
            <label key={idx} className="exercise-option group">
              <input
                type="radio"
                name={exercise.exerciseId}
                className="mr-4 w-5 h-5 text-blue-600"
                onChange={() => onSubmit(exercise.exerciseId, option.isCorrect)}
              />
              <span className="text-gray-800 font-medium group-hover:text-blue-700">
                {option.text}
              </span>
            </label>
          ))}
          {result !== undefined && (
            <div className={`exercise-feedback ${result ? 'correct' : 'incorrect'}`}>
              <p className="font-bold mb-2 text-lg">
                {result ? '✅ Excellent!' : '💡 Learn from this:'}
              </p>
              <p>
                <strong>Explanation:</strong> {exercise.options.find((opt) => opt.isCorrect).explanation}
              </p>
            </div>
          )}
        </div>
      ) : (
        <div>
          <input
            type="text"
            value={localAnswer}
            onChange={handleInputChange}
            placeholder="Type your answer here..."
            className="exercise-input"
            onBlur={handleInputBlur}
          />
          {exercise.hints && (
            <div className="hints-box">
              <p className="font-bold text-blue-800 mb-3 flex items-center gap-2">
                <Lightbulb className="w-5 h-5" />
                Hints:
              </p>
              <div className="space-y-2">
                {exercise.hints.map((hint, idx) => (
                  <p key={idx} className="text-gray-700 flex items-start gap-2">
                    <span className="text-blue-500">▸</span>
                    {hint}
                  </p>
                ))}
              </div>
            </div>
          )}
          {result !== undefined && (
            <div className={`exercise-feedback ${result ? 'correct' : 'incorrect'}`}>
              <p className="font-bold text-lg mb-2">
                {result
                  ? '🎉 Perfect! Well done!'
                  : `❌ Incorrect. The correct answer is: ${exercise.correctAnswer}`}
              </p>
              <p>
                <strong>Explanation:</strong> {exercise.explanation}
              </p>
            </div>
          )}
        </div>
      )}
    </div>
  );
});

Exercise.displayName = 'Exercise';

// Main Component
const GrammarTopicPage = ({ topic, completedLessons = {}, onLessonComplete }) => {
  const [completedLessonsState, setCompletedLessons] = useState(completedLessons);
  const [exerciseResults, setExerciseResults] = useState({});
  const [activeLanguage, setActiveLanguage] = useState('English');
  const [expandedSections, setExpandedSections] = useState({});
  const [showConfetti, setShowConfetti] = useState(false);
  const [currentStreak, setCurrentStreak] = useState(() => {
    // Load streak from localStorage
    const saved = localStorage.getItem('learningStreak');
    return saved ? parseInt(saved, 10) : 0;
  });
  const [animatingLesson, setAnimatingLesson] = useState(null);

  // Save streak to localStorage
  useEffect(() => {
    localStorage.setItem('learningStreak', currentStreak.toString());
  }, [currentStreak]);

  // Confetti cleanup
  useEffect(() => {
    if (showConfetti) {
      const timer = setTimeout(() => setShowConfetti(false), 3000);
      return () => clearTimeout(timer);
    }
  }, [showConfetti]);

  // Save completed lessons to localStorage
  useEffect(() => {
    localStorage.setItem('completedLessons', JSON.stringify(completedLessonsState));
  }, [completedLessonsState]);

  // Optimized handlers with useCallback
  const handleLessonComplete = useCallback((lessonId) => {
    setCompletedLessons(prev => {
      const isCompleted = prev[lessonId];
      const newState = { ...prev, [lessonId]: !isCompleted };
      
      if (!isCompleted) {
        setAnimatingLesson(lessonId);
        setCurrentStreak(prevStreak => prevStreak + 1);
        setShowConfetti(true);
        setTimeout(() => setAnimatingLesson(null), 1000);
      }
      
      return newState;
    });
    
    if (onLessonComplete) onLessonComplete(lessonId);
  }, [onLessonComplete]);

  const handleExerciseSubmit = useCallback((exerciseId, isCorrect) => {
    setExerciseResults(prev => ({ ...prev, [exerciseId]: isCorrect }));
    if (isCorrect) {
      setShowConfetti(true);
      // Play success sound (optional)
      playSuccessSound();
    }
  }, []);

  const toggleSection = useCallback((sectionId) => {
    setExpandedSections(prev => ({ ...prev, [sectionId]: !prev[sectionId] }));
  }, []);

  const toggleLanguage = useCallback((lang) => {
    setActiveLanguage(lang);
  }, []);

  // Success sound (optional)
  const playSuccessSound = useCallback(() => {
    const audio = new Audio('/sounds/success.mp3');
    audio.volume = 0.3;
    audio.play().catch(() => {}); // Ignore errors
  }, []);

  // Memoized completion percentage
  const completionPercentage = useMemo(() => {
    return Math.round(
      (Object.values(completedLessonsState).filter(Boolean).length / topic.lessons.length) * 100
    );
  }, [completedLessonsState, topic.lessons.length]);

  // Memoized markdown components
  const components = useMemo(() => ({
    h2: ({ children }) => (
      <h2 className="prose h2">
        <span className="text-3xl">📌</span>
        {children}
      </h2>
    ),
    h3: ({ children }) => (
      <h3 className="prose h3">
        <Sparkles className="w-5 h-5 text-yellow-500" />
        {children}
      </h3>
    ),
    p: ({ children }) => <p className="prose p">{children}</p>,
    ul: ({ children }) => <ul className="prose ul">{children}</ul>,
    li: ({ children }) => (
      <li className="prose li group">
        <span className="text-blue-500 mt-1 group-hover:scale-125 transition-transform">▸</span>
        <span>{children}</span>
      </li>
    ),
    strong: ({ children }) => <strong className="prose strong">{children}</strong>,
    code: ({ children }) => <code className="prose code">{children}</code>,
    blockquote: ({ children }) => (
      <blockquote className="prose blockquote">
        <div className="flex items-start gap-3">
          <Lightbulb className="w-6 h-6 text-green-500 flex-shrink-0 mt-1" />
          <div>{children}</div>
        </div>
      </blockquote>
    ),
  }), []);

  // Optimized content filter
  const getFilteredContent = useCallback((content, lang) => {
    if (lang === 'English') {
      return content.replace(/\*\*Vietnamese Translation \(.*?\):\*\*(.*?)(\n\*\*|$)/gs, '').trim();
    } else {
      return content.replace(/\*\*English:\*\*(.*?)(\n\*\*Vietnamese Translation \(.*?\):\*\*|$)/gs, '').trim();
    }
  }, []);

  return (
    <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-4 sm:p-6 relative overflow-hidden">
      {/* Animated Background Elements */}
      <div className="background-blobs">
        <div className="background-blob background-blob-1 animate-blob"></div>
        <div className="background-blob background-blob-2 animate-blob animation-delay-2000"></div>
        <div className="background-blob background-blob-3 animate-blob animation-delay-4000"></div>
      </div>

      {/* Confetti Effect with Lazy Loading */}
      {showConfetti && (
        <Suspense fallback={null}>
          <div className="confetti-container">
            {[...Array(50)].map((_, i) => (
              <div
                key={i}
                className="confetti-piece animate-confetti"
                style={{
                  left: `${Math.random() * 100}%`,
                  top: `${Math.random() * 100}%`,
                  backgroundColor: ['#3B82F6', '#8B5CF6', '#EC4899', '#10B981', '#F59E0B'][Math.floor(Math.random() * 5)],
                  animationDelay: `${Math.random() * 0.5}s`,
                  transform: `rotate(${Math.random() * 360}deg)`
                }}
              />
            ))}
          </div>
        </Suspense>
      )}

      <div className="max-w-6xl mx-auto relative z-10">
        {/* Hero Header with Progress */}
        <div className="bg-white rounded-2xl shadow-2xl p-8 mb-8 border-4 border-purple-200 relative overflow-hidden">
          <div className="absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-yellow-200 to-orange-200 rounded-full -mr-20 -mt-20 opacity-50"></div>
          
          <div className="flex items-start gap-6 relative z-10">
            <div className="text-7xl animate-bounce-icon">{topic.icon}</div>
            <div className="flex-1">
              <h1 className="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 mb-3">
                {topic.title}
              </h1>
              <p className="text-gray-600 text-lg mb-4 italic">{topic.description}</p>
              
              <div className="flex items-center gap-4 flex-wrap">
                <Badge type="difficulty" icon={Target}>
                  {topic.difficulty}
                </Badge>
                
                <Badge type="streak" icon={Zap}>
                  {currentStreak} Streak
                </Badge>

                <Badge type="completion" icon={Trophy}>
                  {completionPercentage}% Complete
                </Badge>
              </div>

              <ProgressBar percentage={completionPercentage} />
            </div>
          </div>
        </div>

        {/* Lessons Section */}
        <div className="mb-8">
          <h2 className="section-header lessons">
            <BookOpen className="w-8 h-8" />
            <span>Lessons • Bài Học</span>
            <Sparkles className="w-8 h-8" />
          </h2>

          <div className="space-y-6">
            {topic.lessons.map((lesson, index) => (
              <div 
                key={lesson.lessonId} 
                className={`lesson-card ${animatingLesson === lesson.lessonId ? 'animate-pulse-scale' : ''}`}
              >
                {/* Lesson Header */}
                <div className="flex justify-between items-start mb-6">
                  <div className="flex items-center gap-4">
                    <div className="lesson-number">{index + 1}</div>
                    <div>
                      <h3 className="text-2xl font-bold text-gray-800 mb-1">{lesson.title}</h3>
                      <span className="text-sm text-gray-500 flex items-center gap-2">
                        <Play className="w-4 h-4" />
                        {lesson.duration}
                      </span>
                    </div>
                  </div>
                  
                  {completedLessonsState[lesson.lessonId] ? (
                    <Badge type="completed" icon={CheckCircle}>
                      Completed!
                    </Badge>
                  ) : (
                    <button
                      onClick={() => handleLessonComplete(lesson.lessonId)}
                      className="btn-complete"
                      aria-label="Mark lesson as complete"
                    >
                      <Check className="w-5 h-5" />
                      Mark Complete
                    </button>
                  )}
                </div>

                {/* Language Toggle */}
                <div className="language-toggle-container" role="tablist">
                  {['English', 'Vietnamese'].map((lang) => (
                    <button
                      key={lang}
                      onClick={() => toggleLanguage(lang)}
                      className={`language-toggle-button ${activeLanguage === lang ? 'active' : ''}`}
                      role="tab"
                      aria-selected={activeLanguage === lang}
                      aria-label={`Switch to ${lang}`}
                    >
                      <Languages className="w-5 h-5" />
                      {lang === 'English' ? '🇬🇧 English' : '🇻🇳 Tiếng Việt'}
                    </button>
                  ))}
                </div>

                {/* Content Area */}
                <div className="content-area prose prose-lg max-w-none">
                  <ReactMarkdown
                    remarkPlugins={[remarkGfm]}
                    rehypePlugins={[rehypeRaw]}
                    components={components}
                  >
                    {getFilteredContent(lesson.content, activeLanguage)}
                  </ReactMarkdown>
                </div>

                {/* Examples */}
                {lesson.examples && lesson.examples.length > 0 && (
                  <div className="mt-8">
                    <h4 className="font-bold mb-5 text-2xl flex items-center gap-3 text-gray-800">
                      <div className="w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center">
                        <Lightbulb className="w-6 h-6 text-white" />
                      </div>
                      Examples • Ví Dụ
                    </h4>
                    <div className="grid gap-6 md:grid-cols-2">
                      {lesson.examples.map((ex, idx) => (
                        <ExampleCard key={idx} example={ex} index={idx} />
                      ))}
                    </div>
                  </div>
                )}

                {/* Sub-Sections Accordion */}
                {lesson.subSections && lesson.subSections.map((section, idx) => (
                  <div key={idx} className="mt-6 border-t-2 border-gray-200 pt-6">
                    <button
                      onClick={() => toggleSection(`${lesson.lessonId}-section-${idx}`)}
                      className="accordion-button"
                      aria-expanded={expandedSections[`${lesson.lessonId}-section-${idx}`]}
                      aria-label={`Toggle ${section.title}`}
                    >
                      <span className="font-bold text-gray-800 text-lg flex items-center gap-3">
                        <Brain className="w-6 h-6 text-purple-500" />
                        {section.title}
                      </span>
                      {expandedSections[`${lesson.lessonId}-section-${idx}`] ? (
                        <ChevronUp className="w-6 h-6 text-blue-600" />
                      ) : (
                        <ChevronDown className="w-6 h-6 text-gray-400" />
                      )}
                    </button>
                    {expandedSections[`${lesson.lessonId}-section-${idx}`] && (
                      <div className="accordion-content animate-fade-in">
                        <ReactMarkdown components={components}>{section.content}</ReactMarkdown>
                      </div>
                    )}
                  </div>
                ))}
              </div>
            ))}
          </div>
        </div>

        {/* Exercises Section */}
        <div className="mb-8">
          <h2 className="section-header exercises">
            <Award className="w-8 h-8" />
            <span>Exercises • Bài Tập</span>
            <Trophy className="w-8 h-8" />
          </h2>

          <div className="space-y-6">
            {topic.exercises.map((exercise, index) => (
              <Exercise
                key={exercise.exerciseId}
                exercise={exercise}
                index={index}
                result={exerciseResults[exercise.exerciseId]}
                onSubmit={handleExerciseSubmit}
              />
            ))}
          </div>
        </div>

        {/* Vocabulary Section */}
        <div className="mb-8">
          <h2 className="section-header vocabulary">
            <Volume2 className="w-8 h-8" />
            <span>Vocabulary • Từ Vựng</span>
            <Star className="w-8 h-8" />
          </h2>
          
          <div className="vocabulary-table">
            <table className="min-w-full">
              <thead>
                <tr>
                  <th>Word</th>
                  <th>Meaning</th>
                  <th>Example</th>
                </tr>
              </thead>
              <tbody>
                {topic.vocabulary.map((vocab, idx) => (
                  <tr key={idx}>
                    <td>
                      <span className="vocabulary-word">{vocab.word}</span>
                    </td>
                    <td className="text-gray-700 font-medium">{vocab.meaning}</td>
                    <td>
                      <code className="vocabulary-example">{vocab.example}</code>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>

       
      </div>
    </div>
  );
};

export default memo(GrammarTopicPage);
</file>

<file path="src/components/hooks/useAdvancedVoice.js">
import { useCallback, useRef, useEffect } from 'react';

/**
 * Advanced Voice Features Hook
 * - Text optimization
 * - Caching
 * - Error retry
 * - Performance tracking
 */
export const useAdvancedVoice = (synthRef) => {
  const cacheRef = useRef(new Map());
  const metricsRef = useRef({
    utteranceCount: 0,
    totalDuration: 0,
    errorCount: 0,
    cacheHits: 0
  });

  // ==================== TEXT OPTIMIZATION ====================
  
  const optimizeText = useCallback((text) => {
    if (!text) return '';
    
    return text
      .replace(/[^\w\s.,!?'-]/g, '') // Remove special chars
      .replace(/\s+/g, ' ') // Normalize whitespace
      .replace(/([.!?])\s+/g, '$1 ') // Normalize punctuation
      .trim();
  }, []);

  // Split text into chunks for better performance
  const chunkText = useCallback((text, maxLength = 200) => {
    if (!text || text.length <= maxLength) return [text];

    const chunks = [];
    let current = '';

    // Split by sentences first
    const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];

    sentences.forEach(sentence => {
      sentence = sentence.trim();
      
      if (!sentence) return;

      if ((current + sentence).length > maxLength) {
        if (current) chunks.push(current.trim());
        current = sentence;
      } else {
        current += (current ? ' ' : '') + sentence;
      }
    });

    if (current) chunks.push(current.trim());
    return chunks.length > 0 ? chunks : [text];
  }, []);

  // ==================== CACHING ====================

  const getCacheKey = useCallback((text, voiceName, options) => {
    return `${text}|${voiceName}|${JSON.stringify(options)}`;
  }, []);

  const cacheUtterance = useCallback((text, voiceName, options) => {
    const key = getCacheKey(text, voiceName, options);
    cacheRef.current.set(key, { text, voiceName, options, timestamp: Date.now() });

    // Limit cache size to 100 items
    if (cacheRef.current.size > 100) {
      const firstKey = cacheRef.current.keys().next().value;
      cacheRef.current.delete(firstKey);
    }
  }, [getCacheKey]);

  const getCachedUtterance = useCallback((text, voiceName, options) => {
    const key = getCacheKey(text, voiceName, options);
    const cached = cacheRef.current.get(key);

    if (cached) {
      metricsRef.current.cacheHits++;
      return cached;
    }

    return null;
  }, [getCacheKey]);

  const clearCache = useCallback(() => {
    cacheRef.current.clear();
  }, []);

  // ==================== ERROR HANDLING & RETRY ====================

  const speakWithRetry = useCallback(async (utterance, maxRetries = 3) => {
    if (!synthRef.current) {
      throw new Error('Speech Synthesis not available');
    }

    for (let attempt = 0; attempt < maxRetries; attempt++) {
      try {
        return await new Promise((resolve, reject) => {
          const timeoutId = setTimeout(() => {
            reject(new Error('Speech synthesis timeout'));
          }, 30000); // 30s timeout

          utterance.onend = () => {
            clearTimeout(timeoutId);
            resolve();
          };

          utterance.onerror = (event) => {
            clearTimeout(timeoutId);
            reject(new Error(`Speech error: ${event.error}`));
          };

          synthRef.current.speak(utterance);
        });
      } catch (error) {
        console.warn(`Speech attempt ${attempt + 1}/${maxRetries} failed:`, error.message);

        // Cancel and retry
        try {
          synthRef.current.cancel();
        } catch (e) {
          console.error('Error canceling speech:', e);
        }

        if (attempt === maxRetries - 1) {
          metricsRef.current.errorCount++;
          throw error;
        }

        // Exponential backoff
        await new Promise(r => setTimeout(r, 500 * Math.pow(1.5, attempt)));
      }
    }
  }, [synthRef]);

  // ==================== PERFORMANCE TRACKING ====================

  const trackUtterance = useCallback((duration, success = true) => {
    metricsRef.current.utteranceCount++;
    metricsRef.current.totalDuration += duration;
    if (!success) {
      metricsRef.current.errorCount++;
    }
  }, []);

  const getPerformanceStats = useCallback(() => {
    const { utteranceCount, totalDuration, errorCount, cacheHits } = metricsRef.current;

    return {
      utteranceCount,
      totalDuration: Math.round(totalDuration),
      errorCount,
      cacheHits,
      avgDuration: utteranceCount > 0 ? Math.round(totalDuration / utteranceCount) : 0,
      errorRate: utteranceCount > 0 ? (errorCount / utteranceCount * 100).toFixed(2) : 0,
      cacheHitRate: utteranceCount > 0 ? (cacheHits / utteranceCount * 100).toFixed(2) : 0
    };
  }, []);

  const resetMetrics = useCallback(() => {
    metricsRef.current = {
      utteranceCount: 0,
      totalDuration: 0,
      errorCount: 0,
      cacheHits: 0
    };
  }, []);

  // ==================== VOICE WARMUP ====================

  const warmupVoices = useCallback(async (voices, getSpeakerVoice) => {
    if (!synthRef.current) return;

    try {
      for (const speaker of voices) {
        const voice = getSpeakerVoice(speaker);
        if (!voice) continue;

        const utterance = new SpeechSynthesisUtterance('.');
        utterance.voice = voice;
        utterance.volume = 0;

        await new Promise(resolve => {
          utterance.onend = resolve;
          utterance.onerror = resolve;
          synthRef.current.speak(utterance);
        });

        // Small delay between warmup
        await new Promise(r => setTimeout(r, 50));
      }
    } catch (error) {
      console.warn('Voice warmup error:', error);
    }
  }, [synthRef]);

  // ==================== DETECT PERFORMANCE LEVEL ====================

  const getPerformanceLevel = useCallback(() => {
    const memory = navigator.deviceMemory || 4;
    const connection = navigator.connection?.effectiveType || '4g';

    const levels = {
      '4g': { 
        rate: 1.1, 
        pitch: 1.0, 
        chunkSize: 250,
        label: 'Optimal'
      },
      '3g': { 
        rate: 0.9, 
        pitch: 0.95, 
        chunkSize: 150,
        label: 'Good'
      },
      '2g': { 
        rate: 0.7, 
        pitch: 0.9, 
        chunkSize: 100,
        label: 'Limited'
      },
      'slow-4g': { 
        rate: 0.8, 
        pitch: 0.9, 
        chunkSize: 120,
        label: 'Slow'
      }
    };

    return levels[connection] || levels['4g'];
  }, []);

  // ==================== AUTO-OPTIMIZE SETTINGS ====================

  const autoOptimizeVoice = useCallback(() => {
    const quality = {
      HIGH: { pitch: 1.0, rate: 0.95, volume: 1.0 },
      MEDIUM: { pitch: 0.95, rate: 0.85, volume: 0.95 },
      LOW: { pitch: 0.9, rate: 0.75, volume: 0.9 }
    };

    try {
      const memUsage = performance.memory?.usedJSHeapSize || 0;
      const totalMemory = performance.memory?.jsHeapSizeLimit || 1;
      const usagePercent = memUsage / totalMemory;

      if (usagePercent > 0.8) return quality.LOW;
      if (usagePercent > 0.5) return quality.MEDIUM;
      return quality.HIGH;
    } catch (error) {
      return quality.HIGH;
    }
  }, []);

  // ==================== CLEANUP ====================

  useEffect(() => {
    return () => {
      clearCache();
      resetMetrics();
    };
  }, [clearCache, resetMetrics]);

  return {
    // Text optimization
    optimizeText,
    chunkText,

    // Caching
    cacheUtterance,
    getCachedUtterance,
    clearCache,

    // Speech with retry
    speakWithRetry,

    // Metrics
    trackUtterance,
    getPerformanceStats,
    resetMetrics,

    // Voice warmup
    warmupVoices,

    // Performance detection
    getPerformanceLevel,
    autoOptimizeVoice
  };
};
</file>

<file path="src/components/hooks/useLocalStorage.js">
import { useState, useEffect } from 'react';

export const useLocalStorage = (key, initialValue) => {
  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(error);
      return initialValue;
    }
  });

  const setValue = (value) => {
    try {
      const valueToStore = value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error(error);
    }
  };

  return [storedValue, setValue];
};
</file>

<file path="src/components/hooks/useOnlineUsers.js">
// src/hooks/useOnlineUsers.js
import { useEffect, useState } from 'react';
import { ref, onValue, query, orderByChild, equalTo } from 'firebase/database';
import { rtdb } from '../config/firebase';

/**
 * Hook để đếm và lấy danh sách users đang online
 */
export const useOnlineUsers = () => {
  const [onlineUsers, setOnlineUsers] = useState([]);
  const [onlineCount, setOnlineCount] = useState(0);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const presenceRef = ref(rtdb, 'presence');

    const unsubscribe = onValue(presenceRef, (snapshot) => {
      const data = snapshot.val();
      
      if (!data) {
        setOnlineUsers([]);
        setOnlineCount(0);
        setLoading(false);
        return;
      }

      // Lọc users đang online
      const online = Object.entries(data)
        .filter(([_, userData]) => userData.online === true)
        .map(([uid, userData]) => ({
          uid,
          ...userData,
        }));

      setOnlineUsers(online);
      setOnlineCount(online.length);
      setLoading(false);
    });

    return () => unsubscribe();
  }, []);

  return { onlineUsers, onlineCount, loading };
};

export default useOnlineUsers;
</file>

<file path="src/components/hooks/usePresence.js">
// src/hooks/usePresence.js
import { useEffect, useState } from 'react';
import { ref, set, onValue, onDisconnect, serverTimestamp } from 'firebase/database';
import { rtdb } from '../config/firebase';
import { auth } from '../config/firebase';

/**
 * Hook để track online/offline status của user
 * Sử dụng Realtime Database với .onDisconnect() để tự động cleanup
 */
export const usePresence = () => {
  const [onlineCount, setOnlineCount] = useState(0);
  const [isOnline, setIsOnline] = useState(false);

  useEffect(() => {
    const user = auth.currentUser;
    if (!user) return;

    const userStatusRef = ref(rtdb, `presence/${user.uid}`);
    const connectedRef = ref(rtdb, '.info/connected');

    // Theo dõi trạng thái kết nối của chính user này
    const unsubscribeConnection = onValue(connectedRef, (snapshot) => {
      if (snapshot.val() === true) {
        // Khi connected, set status = online
        set(userStatusRef, {
          online: true,
          lastSeen: serverTimestamp(),
          email: user.email,
          displayName: user.displayName || 'Anonymous',
        });

        // Tự động set offline khi disconnect
        onDisconnect(userStatusRef).set({
          online: false,
          lastSeen: serverTimestamp(),
          email: user.email,
          displayName: user.displayName || 'Anonymous',
        });

        setIsOnline(true);
      } else {
        setIsOnline(false);
      }
    });

    return () => {
      unsubscribeConnection();
      // Cleanup: set offline khi unmount component
      set(userStatusRef, {
        online: false,
        lastSeen: serverTimestamp(),
        email: user.email,
        displayName: user.displayName || 'Anonymous',
      });
    };
  }, []);

  return { onlineCount, isOnline };
};

export default usePresence;
</file>

<file path="src/components/hooks/useStreak.js">
import { useState, useEffect } from 'react';
import { collection, query, where, onSnapshot } from 'firebase/firestore';
import { db } from '../../config/firebase';
import { useFirebaseAuth } from '../../hooks/useFirebaseAuth';

export const useStreak = () => {
  const { user } = useFirebaseAuth();
  const [streak, setStreak] = useState(0);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (!user) {
      setStreak(0);
      setLoading(false);
      return;
    }

    // Truy vấn dữ liệu progress của user (hỗ trợ cả Firebase UID và Clerk ID nếu cần)
    const q = query(
      collection(db, 'userProgress'),
      where('firebaseUid', '==', user.uid)
    );

    const unsubscribe = onSnapshot(q, (snapshot) => {
      const dates = snapshot.docs
        .map(doc => doc.data().completedAt?.toDate?.() || new Date(doc.data().completedAt))
        .filter(d => !isNaN(d.getTime()))
        .sort((a, b) => b - a);

      let currentStreak = 0;
      if (dates.length > 0) {
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        for (let i = 0; i < dates.length; i++) {
          const date = new Date(dates[i]);
          date.setHours(0, 0, 0, 0);
          const daysDiff = Math.floor((today - date) / (1000 * 60 * 60 * 24));

          if (daysDiff === currentStreak) {
            currentStreak++;
          } else if (daysDiff > currentStreak) {
            break;
          }
        }
      }
      setStreak(currentStreak);
      setLoading(false);
    });

    return () => unsubscribe();
  }, [user]);

  return { streak, loading };
};
</file>

<file path="src/components/Online/OnlineIndicator.css">
/* src/components/OnlineIndicator.css */
.online-indicator {
  padding: 1rem;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
}

.status {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.dot.online {
  background-color: #4caf50;
  box-shadow: 0 0 8px #4caf50;
}

.dot.offline {
  background-color: #9e9e9e;
}

.count {
  font-weight: bold;
  color: #4caf50;
}
</file>

<file path="src/components/Online/OnlineIndicator.jsx">
// src/components/OnlineIndicator.jsx
import React from 'react';
import { usePresence } from '../../hooks/usePresence';
import { useOnlineUsers } from '../../hooks/useOnlineUsers';

const OnlineIndicator = () => {
  const { isOnline } = usePresence(); // Track chính user hiện tại
  const { onlineCount, onlineUsers, loading } = useOnlineUsers(); // Đếm tất cả users

  if (loading) {
    return <div>Loading...</div>;
  }

  return (
    <div className="online-indicator">
      <div className="status">
        <span className={`dot ${isOnline ? 'online' : 'offline'}`}></span>
        <span>You are {isOnline ? 'online' : 'offline'}</span>
      </div>
      
      <div className="count">
        🟢 {onlineCount} users online
      </div>

      {/* Hiển thị danh sách (optional) */}
      <ul>
        {onlineUsers.map(user => (
          <li key={user.uid}>
            {user.displayName} - {user.email}
          </li>
        ))}
      </ul>
    </div>
  );
};

export default OnlineIndicator;
</file>

<file path="src/components/Online/OnlineStats.jsx">
// src/components/OnlineStats.jsx
import React, { memo, useMemo } from 'react';
import { Users, Globe, AlertCircle } from 'lucide-react';
import { useOnlineUsers } from '../../hooks/useOnlineUsers.js'; // ← .js

/**
 * OnlineStats Component – Hiển thị thống kê người dùng online & tổng người dùng
 * 
 * Tính năng:
 * - Hiển thị loading skeleton khi đang tải
 * - Hiển thị thông báo lỗi nếu có
 * - Ẩn hoàn toàn nếu không có dữ liệu (tránh flash)
 * - Format số với dấu phẩy (toLocaleString)
 * - Tối ưu re-render với useMemo
 * - Responsive: chỉ hiển thị trên lg trở lên
 */
const OnlineStats = memo(() => {
  const { onlineCount, totalUsers, loading, error } = useOnlineUsers();

  // === 1. Ẩn hoàn toàn nếu không có dữ liệu & không loading/error ===
  const shouldRender = useMemo(() => {
    return loading || error || onlineCount > 0 || totalUsers > 0;
  }, [loading, error, onlineCount, totalUsers]);

  if (!shouldRender) return null;

  // === 2. Loading State: Skeleton UI ===
  if (loading) {
    return (
      <div className="hidden lg:flex items-center gap-4 text-xs text-gray-400 font-medium animate-pulse">
        <div className="flex items-center gap-1.5">
          <div className="w-1.5 h-1.5 bg-gray-300 rounded-full"></div>
          <Users className="w-4 h-4 text-gray-300" />
          <span className="bg-gray-300 text-transparent rounded">000 online</span>
        </div>
        <div className="flex items-center gap-1 text-gray-300">
          <Globe className="w-4 h-4" />
          <span className="bg-gray-300 text-transparent rounded">0,000</span>
        </div>
      </div>
    );
  }

  // === 3. Error State: Hiển thị icon cảnh báo + tooltip (nếu cần) ===
  if (error) {
    return (
      <div
        className="hidden lg:flex items-center gap-1.5 text-xs text-red-500 font-medium"
        title="Không thể tải thống kê người dùng"
      >
        <AlertCircle className="w-4 h-4" />
        <span>Lỗi kết nối</span>
      </div>
    );
  }

  // === 4. Normal State: Hiển thị dữ liệu ===
  return (
    <div className="hidden lg:flex items-center gap-4 text-xs text-gray-600 font-medium">
      {/* Online Users */}
      <div className="flex items-center gap-1.5">
        <div className="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></div>
        <Users className="w-4 h-4 text-green-600" />
        <span>{onlineCount} online</span>
      </div>

      {/* Total Users */}
      <div className="flex items-center gap-1 text-gray-500">
        <Globe className="w-4 h-4" />
        <span>{totalUsers.toLocaleString('vi-VN')}</span>
      </div>
    </div>
  );
});

OnlineStats.displayName = 'OnlineStats';
export default OnlineStats;
</file>

<file path="src/components/pages/EmotionSelector.jsx">
import React, { useState } from 'react';
import { Smile, Volume2, TrendingUp } from 'lucide-react';
import { VOICE_EMOTIONS } from '../../config/voiceExpression';

/**
 * Emotion Selector Component
 * Cho phép người dùng chọn emotion để áp dụng khi phát
 */
export const EmotionSelector = ({ 
  selectedEmotion = 'NEUTRAL',
  onEmotionChange,
  compact = false
}) => {
  const [isOpen, setIsOpen] = useState(false);

  const emotions = Object.entries(VOICE_EMOTIONS).map(([key, emotion]) => ({
    key,
    ...emotion
  }));

  const selected = VOICE_EMOTIONS[selectedEmotion];
  const emotionEmojis = {
    NEUTRAL: '😐',
    HAPPY: '😊',
    SAD: '😢',
    ANGRY: '😠',
    EXCITED: '🤩',
    SERIOUS: '😶',
    CONFUSED: '😕',
    WHISPER: '🤫',
    LOUD: '😤'
  };

  if (compact) {
    return (
      <div className="flex gap-2 flex-wrap">
        {emotions.map(emotion => (
          <button
            key={emotion.key}
            onClick={() => onEmotionChange?.(emotion.key)}
            className={`px-3 py-1 rounded-full text-xs font-semibold transition-all ${
              selectedEmotion === emotion.key
                ? 'bg-blue-500 text-white shadow-lg scale-110'
                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
            }`}
            title={emotion.description}
          >
            {emotionEmojis[emotion.key]} {emotion.label}
          </button>
        ))}
      </div>
    );
  }

  return (
    <div className="space-y-3">
      <div className="flex items-center gap-2">
        <Smile className="w-5 h-5 text-blue-600" />
        <h4 className="font-bold text-gray-900">Voice Expression</h4>
      </div>

      {/* Main Button */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-100 to-purple-100 border-2 border-blue-300 rounded-lg hover:from-blue-200 hover:to-purple-200 transition-all"
      >
        <div className="flex items-center gap-2">
          <span className="text-2xl">{emotionEmojis[selectedEmotion]}</span>
          <div className="text-left">
            <p className="font-bold text-gray-900">{selected.label}</p>
            <p className="text-xs text-gray-600">{selected.description}</p>
          </div>
        </div>
        <span className="text-xl">{isOpen ? '▲' : '▼'}</span>
      </button>

      {/* Dropdown */}
      {isOpen && (
        <div className="grid grid-cols-2 md:grid-cols-3 gap-2">
          {emotions.map(emotion => (
            <button
              key={emotion.key}
              onClick={() => {
                onEmotionChange?.(emotion.key);
                setIsOpen(false);
              }}
              className={`p-3 rounded-lg border-2 transition-all text-center ${
                selectedEmotion === emotion.key
                  ? 'border-blue-500 bg-blue-50 shadow-lg'
                  : 'border-gray-300 bg-white hover:border-blue-300 hover:bg-gray-50'
              }`}
            >
              <p className="text-3xl mb-1">{emotionEmojis[emotion.key]}</p>
              <p className="font-bold text-sm text-gray-900">{emotion.label}</p>
              <p className="text-xs text-gray-600 mt-1">{emotion.description}</p>
              
              {/* Mini voice indicators */}
              <div className="flex justify-center gap-1 mt-2 text-xs">
                <span title="Speed" className="flex items-center gap-1">
                  ⚡ {(emotion.rate * 100).toFixed(0)}%
                </span>
              </div>
            </button>
          ))}
        </div>
      )}

      {/* Tips */}
      <div className="bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded text-xs text-yellow-800">
        <p className="font-semibold mb-1">💡 Tips:</p>
        <ul className="list-disc list-inside space-y-1 text-yellow-700">
          <li>Use *text* or _text_ to stress words</li>
          <li>Use {"{EMOTION}"} prefix to force emotion</li>
          <li>Uppercase and punctuation auto-adjust</li>
          <li>Combine markers for stronger effect</li>
        </ul>
      </div>
    </div>
  );
};

/**
 * Mini Expression Indicator
 * Hiển thị loại expression hiện tại
 */
export const ExpressionIndicator = ({ 
  emotion = 'NEUTRAL',
  hasEmphasis = false,
  suggestions = []
}) => {
  const emotionEmojis = {
    NEUTRAL: '😐', HAPPY: '😊', SAD: '😢', ANGRY: '😠',
    EXCITED: '🤩', SERIOUS: '😶', CONFUSED: '😕',
    WHISPER: '🤫', LOUD: '😤'
  };

  return (
    <div className="flex items-center gap-2 px-3 py-2 bg-blue-50 border-2 border-blue-300 rounded-lg">
      <span className="text-lg">{emotionEmojis[emotion]}</span>
      <span className="text-xs font-semibold text-blue-900">{emotion}</span>
      
      {hasEmphasis && (
        <span className="ml-auto flex items-center gap-1 px-2 py-1 bg-blue-200 rounded-full text-xs font-semibold text-blue-900">
          <Volume2 className="w-3 h-3" />
          Emphasis
        </span>
      )}

      {suggestions.length > 0 && (
        <div className="absolute top-full mt-2 bg-white border-2 border-blue-300 rounded-lg p-2 text-xs whitespace-nowrap shadow-lg">
          {suggestions.map((s, i) => (
            <p key={i} className="text-gray-700">• {s}</p>
          ))}
        </div>
      )}
    </div>
  );
};

export default EmotionSelector;
</file>

<file path="src/components/pages/NotFoundPage.jsx">
import React, { useState, useEffect } from 'react';
import { Home, ArrowLeft } from 'lucide-react';

const NotFoundPage = () => {
  const [stars, setStars] = useState([]);
  const [meteors, setMeteors] = useState([]);
  const [showHiddenLink, setShowHiddenLink] = useState(false);

  // Generate stars on mount
  useEffect(() => {
    const generatedStars = Array.from({ length: 100 }, (_, i) => ({
      id: i,
      left: Math.random() * 100,
      top: Math.random() * 100,
      size: Math.random() * 3,
      duration: Math.random() * 3 + 1,
    }));
    setStars(generatedStars);
  }, []);

  // Create meteors periodically
  useEffect(() => {
    const interval = setInterval(() => {
      const meteor = {
        id: Date.now(),
        top: Math.random() * 100,
      };
      setMeteors((prev) => [...prev, meteor]);

      setTimeout(() => {
        setMeteors((prev) => prev.filter((m) => m.id !== meteor.id));
      }, 2000);
    }, 3000);

    return () => clearInterval(interval);
  }, []);

  // Space key easter egg
  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.code === 'Space') {
        const randomColor = `hsl(${Math.random() * 360}, 50%, 15%)`;
        document.body.style.background = randomColor;
        setTimeout(() => {
          document.body.style.background = '';
        }, 500);
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, []);

  const handleGoBack = () => window.history.back();

  return (
    <div className="bg-gray-900 min-h-screen flex items-center justify-center p-4 overflow-hidden relative">
      {/* Stars Background */}
      <div className="fixed inset-0">
        {stars.map((star) => (
          <div
            key={star.id}
            className="absolute rounded-full bg-white animate-pulse"
            style={{
              left: `${star.left}%`,
              top: `${star.top}%`,
              width: `${star.size}px`,
              height: `${star.size}px`,
              animationDuration: `${star.duration}s`,
              opacity: 0,
            }}
          />
        ))}
      </div>

      {/* Meteors */}
      {meteors.map((meteor) => (
        <div
          key={meteor.id}
          className="fixed w-0.5 h-0.5 bg-gradient-to-r from-white to-transparent"
          style={{
            top: `${meteor.top}%`,
            left: '100%',
            animation: 'meteor 2s linear forwards',
          }}
        />
      ))}

      {/* Main Content */}
      <div
        className="relative z-10 text-center"
        onMouseEnter={() => setShowHiddenLink(true)}
        onMouseLeave={() => setShowHiddenLink(false)}
      >
        {/* UFO with Beam */}
        <div className="relative mb-8 animate-float">
          <svg className="w-32 h-32 mx-auto" viewBox="0 0 100 100">
            {/* UFO Body */}
            <ellipse cx="50" cy="40" rx="30" ry="10" fill="#4F46E5" />
            <circle cx="50" cy="35" r="20" fill="#818CF8" />
            <ellipse cx="50" cy="30" rx="10" ry="5" fill="#C7D2FE" />
            {/* Beam */}
            <path
              className="animate-beam"
              d="M40 40 L30 80 L70 80 L60 40"
              fill="rgba(79, 70, 229, 0.2)"
            />
          </svg>
        </div>

        {/* 404 Text */}
        <h1 className="text-8xl font-bold text-white mb-4 animate-float">
          4<span className="inline-block animate-portal">0</span>4
        </h1>
        <p className="text-xl text-blue-200 mb-8">Ê Ê Ê Ê!!!! Bạn đã lạc vào vũ trụ rồi 🚀</p>
        <p className="text-lg text-purple-300 mb-8">Học bài mà để tui bơ vơ lâu quá vại! Bấm vào linh lại đi nha 😭</p>

        {/* Interactive Elements */}
        <div className="space-y-4">
          {/* Hidden Portfolio Link */}
          <a
            href="/"
            className={`text-blue-400 hover:text-blue-300 transition block duration-300 ${
              showHiddenLink ? 'opacity-100' : 'opacity-0'
            }`}
          >
            ← Find your way back to safety
          </a>

          {/* Astronaut */}
          <div className="relative inline-block animate-float">
            <div className="w-24 h-24 rounded-full border-4 border-white mx-auto bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center animate-wave">
              <span className="text-4xl">👨‍🚀</span>
            </div>
            <span className="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full border-4 border-white animate-pulse"></span>
          </div>

          {/* Action Buttons */}
          <div className="flex justify-center gap-4 mt-8 flex-wrap">
            <a
              href="/"
              className="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transform hover:scale-105 transition duration-300 shadow-lg"
            >
              <Home className="w-5 h-5" />
              Return Home
            </a>
            <button
              onClick={handleGoBack}
              className="inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-full hover:bg-purple-700 transform hover:scale-105 transition duration-300 shadow-lg"
            >
              <ArrowLeft className="w-5 h-5" />
              Go Back
            </button>
          </div>
        </div>

        {/* Easter Egg Element */}
        <div className="mt-8 text-gray-500 cursor-pointer hover:text-gray-400 transition">
          <p className="text-sm">Press 'Space' for a surprise!</p>
        </div>
      </div>

      {/* Animations */}
      <style>{`
        @keyframes float {
          0% { transform: translateY(0px); }
          50% { transform: translateY(-20px); }
          100% { transform: translateY(0px); }
        }

        @keyframes beam {
          0%, 100% { transform: scaleY(0.8); opacity: 0.3; }
          50% { transform: scaleY(1.1); opacity: 0.7; }
        }

        @keyframes wave {
          0%, 100% { transform: rotate(0deg); }
          50% { transform: rotate(20deg); }
        }

        @keyframes portal-spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        @keyframes meteor {
          0% { transform: translate(0, 0) rotate(45deg); opacity: 1; }
          100% { transform: translate(-100px, 100px) rotate(45deg); opacity: 0; }
        }

        .animate-float {
          animation: float 6s ease-in-out infinite;
        }

        .animate-beam {
          animation: beam 2s ease-in-out infinite;
          transform-origin: top;
        }

        .animate-wave {
          animation: wave 2s ease-in-out infinite;
          transform-origin: 70% 70%;
        }

        .animate-portal {
          animation: portal-spin 8s linear infinite;
          display: inline-block;
        }
      `}</style>
    </div>
  );
};

export default NotFoundPage;
</file>

<file path="src/components/styles/UserProfile.module.css">
/* ============================================
   UserProfile.module.css - CSS Module cho UserProfile
   ============================================ */

/* Container */
.container {
  background: linear-gradient(to bottom right, white, #faf5f0);
  border-radius: 1.5rem;
  box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
  border: 1px solid #fed7aa;
  overflow: hidden;
}

/* Header */
.header {
  position: relative;
  background: linear-gradient(to right, #f97316, #fbbf24, #fbbf24);
  padding: 1.5rem 2rem;
}

.headerOverlay {
  position: absolute;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.05);
}

.headerContent {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* Avatar */
.avatar {
  position: relative;
}

.avatarImg {
  width: 5rem;
  height: 5rem;
  border-radius: 1rem;
  border: 4px solid white;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
  object-fit: cover;
}

.avatarDefault {
  width: 5rem;
  height: 5rem;
  border-radius: 1rem;
  border: 4px solid white;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
  background: linear-gradient(to bottom right, #fb923c, #fbbf24);
  display: flex;
  align-items: center;
  justify-content: center;
}

.streakBadge {
  position: absolute;
  bottom: -0.5rem;
  right: -0.5rem;
  background-color: #ef4444;
  color: white;
  font-size: 0.75rem;
  font-weight: 900;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

/* User Info */
.userInfo {
  flex: 1;
  min-width: 0;
}

.userName {
  font-size: 1.5rem;
  font-weight: 900;
  color: white;
  filter: drop-shadow(0 3px 0 rgba(0, 0, 0, 0.1));
}

.userNameContainer {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
}

.authBadge {
  font-size: 0.75rem;
  font-weight: 700;
  padding: 0.25rem 0.625rem;
  border-radius: 9999px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.authBadgeClerk {
  background-color: rgba(255, 255, 255, 0.9);
  color: #ea580c;
}

.authBadgeFirebase {
  background-color: rgba(255, 255, 255, 0.9);
  color: #2563eb;
}

.userEmail {
  color: rgba(255, 255, 255, 0.95);
  font-size: 0.875rem;
  font-weight: 600;
  filter: drop-shadow(0 1px 0 rgba(0, 0, 0, 0.05));
}

.lastActivity {
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.75rem;
  font-weight: 500;
  margin-top: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

/* Main Content */
.mainContent {
  padding: 1.5rem;
}

/* Empty State */
.emptyState {
  text-align: center;
  padding: 4rem 0;
}

.emptyStateIcon {
  position: relative;
  display: inline-block;
  margin-bottom: 1.5rem;
}

.emptyStateIconBg {
  position: absolute;
  inset: 0;
  background-color: #fed7aa;
  border-radius: 9999px;
  filter: blur(3rem);
  opacity: 0.5;
}

.emptyStateTitle {
  font-size: 1.5rem;
  font-weight: 900;
  color: #1f2937;
  margin-bottom: 0.75rem;
}

.emptyStateText {
  color: #4b5563;
  font-weight: 500;
  max-width: 28rem;
  margin: 0 auto;
}

/* Stats Grid */
.statsGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 1rem;
}

@media (min-width: 1024px) {
  .statsGrid {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
}

.statCard {
  position: relative;
  border-radius: 1.25rem;
  padding: 1rem;
  border: 2px solid;
  transition: all 300ms;
  cursor: pointer;
}

.statCard:hover {
  border-opacity: 1;
  box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
  transform: scale(1.05);
}

.statCardIcon {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}

.statCardIconBg {
  padding: 0.5rem;
  border-radius: 0.75rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 300ms;
}

.statCard:hover .statCardIconBg {
  transform: scale(1.1);
}

.statCardLabel {
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.statCardValue {
  font-size: 1.875rem;
  font-weight: 900;
}

/* Additional Stats */
.additionalStats {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

@media (min-width: 1024px) {
  .additionalStats {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

.additionalStatCard {
  background-color: white;
  border-radius: 1.25rem;
  padding: 1.25rem;
  border: 2px solid #e5e7eb;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  transition: all 300ms;
}

.additionalStatCard:hover {
  box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
}

/* Progress Bar */
.progressBar {
  height: 0.5rem;
  background-color: #e5e7eb;
  border-radius: 9999px;
  overflow: hidden;
}

.progressBarFill {
  height: 100%;
  border-radius: 9999px;
  transition: all 300ms;
}

/* Recent Activity */
.recentActivity {
  background-color: white;
  border-radius: 1.25rem;
  padding: 1.5rem;
  border: 2px solid #e5e7eb;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.recentActivityHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.25rem;
}

.recentActivityTitle {
  font-weight: 900;
  color: #111827;
  font-size: 1.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.recentActivityCount {
  font-size: 0.875rem;
  font-weight: 700;
  color: #6b7280;
  background-color: #f3f4f6;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
}

.activityList {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  max-height: 24rem;
  overflow-y: auto;
  padding-right: 0.5rem;
}

.activityList::-webkit-scrollbar {
  width: 6px;
}

.activityList::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

.activityList::-webkit-scrollbar-thumb {
  background: #fb923c;
  border-radius: 10px;
}

.activityList::-webkit-scrollbar-thumb:hover {
  background: #f97316;
}

.activityItem {
  position: relative;
  padding: 1rem;
  border-radius: 0.75rem;
  border: 2px solid;
  transition: all 300ms;
}

.activityItem:hover {
  box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
}

.activityItemRecent {
  background: linear-gradient(to right, #fef3c7, #fed7aa);
  border-color: #fed7aa;
}

.activityItemRecent:hover {
  border-color: #fbbf24;
}

.activityItemOld {
  background-color: #f9fafb;
  border-color: #e5e7eb;
}

.activityItemOld:hover {
  border-color: #d1d5db;
}

.activityItemNew {
  position: absolute;
  top: -0.5rem;
  right: -0.5rem;
  background-color: #f97316;
  color: white;
  font-size: 0.75rem;
  font-weight: 900;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.activityItemContent {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.activityItemInfo {
  flex: 1;
}

.activityItemTitle {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.activityItemTitleText {
  font-weight: 900;
  color: #111827;
  font-size: 1rem;
}

.activityItemDraftBadge {
  font-size: 0.75rem;
  font-weight: 700;
  padding: 0.125rem 0.5rem;
  background-color: #fef08a;
  color: #854d0e;
  border-radius: 9999px;
}

.activityItemMeta {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 0.75rem;
  color: #4b5563;
  font-weight: 600;
}

.activityItemScore {
  text-align: right;
  margin-left: 1rem;
}

.activityItemScoreValue {
  font-size: 2.25rem;
  font-weight: 900;
  margin-bottom: 0.25rem;
}

.activityItemScoreGreen {
  color: #16a34a;
}

.activityItemScoreBlue {
  color: #2563eb;
}

.activityItemScoreAmber {
  color: #b45309;
}

.activityItemScoreRed {
  color: #dc2626;
}

/* Loading State */
.loading {
  background: linear-gradient(to bottom right, white, #faf5f0);
  border-radius: 1.5rem;
  box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
  border: 1px solid #fed7aa;
  padding: 2rem;
}

.loadingSpinner {
  text-align: center;
}

.loadingSpinnerIcon {
  position: relative;
  width: 4rem;
  height: 4rem;
  margin: 0 auto 1rem;
}

.loadingSpinnerIcon::before {
  content: '';
  position: absolute;
  inset: 0;
  border: 4px solid #fed7aa;
  border-radius: 9999px;
}

.loadingSpinnerIcon::after {
  content: '';
  position: absolute;
  inset: 0;
  border: 4px solid #ea580c;
  border-top: transparent;
  border-radius: 9999px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loadingText {
  color: #4b5563;
  font-weight: 500;
}
</file>

<file path="src/components/utils/scriptUtils.js">
import { SPEAKER_STYLES, SPEAKER_ICONS, VOICE_CONFIG } from '../../config/voiceConfig';

export const getSpeakerColor = (speaker) => 
  SPEAKER_STYLES[speaker] || 'bg-gradient-to-br from-slate-50 to-slate-100 border-slate-400 text-slate-900';

export const getSpeakerIcon = (speaker) => 
  SPEAKER_ICONS[speaker] || '👤';

export const getSpeakerTTSOptions = (speaker, playbackRate, playbackVolume) => {
  const config = VOICE_CONFIG.SPEAKER_CONFIG[speaker] || VOICE_CONFIG.SPEAKER_CONFIG.default;
  return { 
    pitch: config.pitch, 
    rate: playbackRate, 
    volume: playbackVolume 
  };
};

export const copyScriptToClipboard = (filteredConversations) => {
  const text = filteredConversations.map(c => `${c.speaker}: ${c.text}`).join('\n\n');
  navigator.clipboard.writeText(text);
};

export const scrollToElement = (elementId, shouldScroll) => {
  if (shouldScroll) {
    const element = document.getElementById(elementId);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
  }
};
</file>

<file path="src/components/utils/sounds.js">
export const playSound = (soundName, volume = 0.3) => {
  try {
    const audio = new Audio(`/sounds/${soundName}.mp3`);
    audio.volume = volume;
    audio.play().catch(() => {});
  } catch (error) {
    console.error('Sound playback error:', error);
  }
};

export const sounds = {
  success: () => playSound('success'),
  complete: () => playSound('complete'),
  wrong: () => playSound('wrong'),
};
</file>

<file path="src/components/Voca/VocabularyPractice.jsx">
import React, { useState, useEffect } from 'react';
import { Volume2, ChevronRight, ChevronLeft, RotateCcw, BookOpen, Brain, Zap, Settings, Download, Share2, BarChart3, Trash2, Copy, Check, X } from 'lucide-react';
import { useSpeech } from '../hooks/useSpeech';
import { vocabularyData } from '../../data/vocabularyData';

export default function VocabularyPractice() {
  const { speak, sentenceId, playingId, rate, setRate, pitch, setPitch } = useSpeech();
  const [mode, setMode] = useState('learn');
  const [selectedTopic, setSelectedTopic] = useState(null);
  const [selectedSubtopic, setSelectedSubtopic] = useState(null);
  const [currentWords, setCurrentWords] = useState([]);
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [favorited, setFavorited] = useState(new Set());
  const [learned, setLearned] = useState(new Set());
  const [masteredWords, setMasteredWords] = useState(new Set());
  const [showStats, setShowStats] = useState(false);
  const [showSettings, setShowSettings] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [filteredWords, setFilteredWords] = useState([]);
  const [quizMode, setQuizMode] = useState(false);
  const [quizScore, setQuizScore] = useState(0);
  const [quizAnswered, setQuizAnswered] = useState(false);
  const [selectedAnswer, setSelectedAnswer] = useState(null);
  const [quizOptions, setQuizOptions] = useState([]);
  const [quizCorrectAnswer, setQuizCorrectAnswer] = useState(null);

  const topics = Object.keys(vocabularyData);

  useEffect(() => {
    if (searchQuery.trim() === '') {
      setFilteredWords(currentWords);
    } else {
      const query = searchQuery.toLowerCase();
      setFilteredWords(
        currentWords.filter(
          w =>
            w.word.toLowerCase().includes(query) ||
            w.vietnamese.toLowerCase().includes(query) ||
            w.example.toLowerCase().includes(query)
        )
      );
    }
    setCurrentIndex(0);
  }, [searchQuery, currentWords]);

  // Shuffle array
  const shuffleArray = (array) => {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
  };

  const handleSelectTopic = (topic) => {
    setSelectedTopic(topic);
    setSelectedSubtopic(null);
    setCurrentWords([]);
  };

  const handleSelectSubtopic = (subtopic) => {
    const words = vocabularyData[selectedTopic][subtopic];
    setSelectedSubtopic(subtopic);
    setCurrentWords(words);
    setFilteredWords(words);
    setCurrentIndex(0);
    setIsFlipped(false);
    setQuizMode(false);
  };

  const handleSpeak = () => {
    if (displayedWords[currentIndex]) {
      const word = displayedWords[currentIndex];
      speak(word.word, `word-${currentIndex}`);
    }
  };

  const handleSpeakExample = () => {
    if (displayedWords[currentIndex]) {
      const word = displayedWords[currentIndex];
      speak(word.example, `example-${currentIndex}`, 'en', true);
    }
  };

  const handleNext = () => {
    if (currentIndex < displayedWords.length - 1) {
      setCurrentIndex(currentIndex + 1);
      setIsFlipped(false);
      setQuizAnswered(false);
      setSelectedAnswer(null);
      generateQuizOptions(currentIndex + 1);
    }
  };

  const handlePrev = () => {
    if (currentIndex > 0) {
      setCurrentIndex(currentIndex - 1);
      setIsFlipped(false);
      setQuizAnswered(false);
      setSelectedAnswer(null);
      generateQuizOptions(currentIndex - 1);
    }
  };

  const toggleFavorite = () => {
    const word = displayedWords[currentIndex];
    const newFavorited = new Set(favorited);
    if (newFavorited.has(word.word)) {
      newFavorited.delete(word.word);
    } else {
      newFavorited.add(word.word);
    }
    setFavorited(newFavorited);
  };

  const toggleLearned = () => {
    const word = displayedWords[currentIndex];
    const newLearned = new Set(learned);
    if (newLearned.has(word.word)) {
      newLearned.delete(word.word);
    } else {
      newLearned.add(word.word);
    }
    setLearned(newLearned);
  };

  const toggleMastered = () => {
    const word = displayedWords[currentIndex];
    const newMastered = new Set(masteredWords);
    if (newMastered.has(word.word)) {
      newMastered.delete(word.word);
    } else {
      newMastered.add(word.word);
    }
    setMasteredWords(newMastered);
  };

  const handleReset = () => {
    setCurrentIndex(0);
    setIsFlipped(false);
  };

  const generateQuizOptions = (index) => {
    const currentWord = displayedWords[index];
    const correctAnswer = currentWord.word;
    
    // Lấy 3 từ sai khác
    const otherWords = displayedWords
      .filter((w, idx) => idx !== index)
      .sort(() => 0.5 - Math.random())
      .slice(0, 3)
      .map(w => w.word);
    
    const options = [correctAnswer, ...otherWords];
    setQuizCorrectAnswer(correctAnswer);
    setQuizOptions(shuffleArray(options));
  };

  const startQuiz = () => {
    setQuizMode(true);
    setQuizScore(0);
    setCurrentIndex(0);
    setQuizAnswered(false);
    setSelectedAnswer(null);
    generateQuizOptions(0);
  };

  const handleQuizAnswer = (selectedWord) => {
    setSelectedAnswer(selectedWord);
    setQuizAnswered(true);
    
    if (selectedWord === quizCorrectAnswer) {
      setQuizScore(quizScore + 1);
      toggleMastered();
    }
  };

  const exportToCSV = () => {
    const data = displayedWords.map(w => ({
      Word: w.word,
      Phonetic: w.phonetic,
      Vietnamese: w.vietnamese,
      PartOfSpeech: w.pos,
      Example: w.example,
      Level: w.level,
      Favorite: favorited.has(w.word) ? 'Yes' : 'No',
      Mastered: masteredWords.has(w.word) ? 'Yes' : 'No'
    }));

    const csv = [
      Object.keys(data[0]).join(','),
      ...data.map(row =>
        Object.values(row)
          .map(val => `"${val}"`)
          .join(',')
      )
    ].join('\n');

    const blob = new Blob([csv], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `vocabulary-${selectedSubtopic}.csv`;
    a.click();
  };

  const copyToClipboard = () => {
    const word = displayedWords[currentIndex];
    const text = `${word.word} (${word.phonetic}) - ${word.vietnamese}\nExample: ${word.example}`;
    navigator.clipboard.writeText(text);
    alert('Đã sao chép!');
  };

  const clearAllData = () => {
    if (window.confirm('Bạn chắc chắn muốn xóa toàn bộ dữ liệu?')) {
      setFavorited(new Set());
      setLearned(new Set());
      setMasteredWords(new Set());
    }
  };

  const displayedWords = filteredWords.length > 0 ? filteredWords : currentWords;
  const currentWord = displayedWords[currentIndex];
  const isFavorited = currentWord && favorited.has(currentWord.word);
  const isLearned = currentWord && learned.has(currentWord.word);
  const isMastered = currentWord && masteredWords.has(currentWord.word);
  const progressPercent = displayedWords.length > 0 ? ((currentIndex + 1) / displayedWords.length) * 100 : 0;

  const stats = {
    total: currentWords.length,
    mastered: Array.from(masteredWords).filter(w => currentWords.some(cw => cw.word === w)).length,
    learned: Array.from(learned).filter(w => currentWords.some(cw => cw.word === w)).length,
    favorited: Array.from(favorited).filter(w => currentWords.some(cw => cw.word === w)).length,
    remaining: currentWords.length - Array.from(masteredWords).filter(w => currentWords.some(cw => cw.word === w)).length
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 p-4 md:p-8">
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <h1 className="text-4xl md:text-5xl font-bold text-orange-600 mb-2 drop-shadow-lg">
            🎯 Vocabulary Master
          </h1>
          <p className="text-gray-700">Học từ vựng tiếng Anh từ A1 đến C2 một cách hiệu quả</p>
        </div>

        {/* Mode Selection */}
        {!selectedTopic && (
          <div className="mb-8">
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
              {[
                { id: 'learn', icon: BookOpen, label: 'Học', color: 'from-blue-400 to-blue-500' },
                { id: 'flashcard', icon: Brain, label: 'Flashcard', color: 'from-orange-400 to-orange-500' },
                { id: 'quiz', icon: Zap, label: 'Quiz', color: 'from-amber-300 to-orange-400' }
              ].map(m => (
                <button
                  key={m.id}
                  onClick={() => setMode(m.id)}
                  className={`p-6 rounded-2xl font-semibold text-lg transition-all transform hover:scale-105 shadow-lg ${
                    mode === m.id
                      ? `bg-gradient-to-r ${m.color} text-white shadow-xl`
                      : `bg-white text-gray-700 shadow hover:shadow-md`
                  }`}
                >
                  <m.icon className="w-8 h-8 mx-auto mb-2" />
                  {m.label}
                </button>
              ))}
            </div>
          </div>
        )}

        {/* Topic Selection */}
        {selectedTopic === null && (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {topics.map(topic => (
              <button
                key={topic}
                onClick={() => handleSelectTopic(topic)}
                className="p-6 bg-white hover:bg-amber-50 rounded-xl shadow-md hover:shadow-lg transition-all text-left hover:translate-y-[-2px] border-2 border-orange-200"
              >
                <h3 className="font-bold text-lg text-orange-600 mb-2">{topic}</h3>
                <p className="text-sm text-gray-600">
                  {Object.keys(vocabularyData[topic]).length} chủ đề
                </p>
              </button>
            ))}
          </div>
        )}

        {/* Subtopic Selection */}
        {selectedTopic && selectedSubtopic === null && (
          <div>
            <button
              onClick={() => setSelectedTopic(null)}
              className="flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-semibold transition"
            >
              <ChevronLeft className="w-4 h-4" />
              Quay lại
            </button>
            <h2 className="text-2xl font-bold text-orange-600 mb-6">{selectedTopic}</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {Object.keys(vocabularyData[selectedTopic]).map(subtopic => (
                <button
                  key={subtopic}
                  onClick={() => handleSelectSubtopic(subtopic)}
                  className="p-6 bg-white hover:bg-amber-50 rounded-xl shadow-md hover:shadow-lg transition-all text-left hover:translate-y-[-2px] border-2 border-orange-200"
                >
                  <h3 className="font-bold text-lg text-orange-600 mb-2">{subtopic}</h3>
                  <p className="text-sm text-gray-600">
                    {vocabularyData[selectedTopic][subtopic].length} từ
                  </p>
                </button>
              ))}
            </div>
          </div>
        )}

        {/* Learning Interface */}
        {currentWords.length > 0 && currentWord && (
          <div>
            {/* Top Controls */}
            <div className="flex items-center justify-between mb-6 flex-wrap gap-4">
              <button
                onClick={() => {
                  setSelectedTopic(null);
                  setSelectedSubtopic(null);
                  setCurrentWords([]);
                  setFilteredWords([]);
                  setCurrentIndex(0);
                  setSearchQuery('');
                  setQuizMode(false);
                }}
                className="flex items-center gap-2 text-blue-600 hover:text-blue-700 font-semibold transition"
              >
                <ChevronLeft className="w-4 h-4" />
                Quay lại
              </button>

              <div className="flex gap-2">
                <button
                  onClick={() => setShowStats(!showStats)}
                  className="flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition shadow-md"
                >
                  <BarChart3 className="w-4 h-4" />
                  Thống kê
                </button>
                <button
                  onClick={() => setShowSettings(!showSettings)}
                  className="flex items-center gap-2 px-4 py-2 bg-amber-400 hover:bg-amber-500 text-white rounded-lg font-semibold transition shadow-md"
                >
                  <Settings className="w-4 h-4" />
                  Cài đặt
                </button>
              </div>
            </div>

            {/* Settings Panel */}
            {showSettings && (
              <div className="bg-white border-2 border-orange-400 rounded-xl p-6 mb-6 shadow-lg">
                <h3 className="text-orange-600 font-bold mb-4">⚙️ Cài Đặt Phát Âm</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label className="text-gray-700 font-semibold block mb-2">Tốc độ: {rate.toFixed(1)}x</label>
                    <input
                      type="range"
                      min="0.5"
                      max="2"
                      step="0.1"
                      value={rate}
                      onChange={(e) => setRate(parseFloat(e.target.value))}
                      className="w-full accent-orange-500"
                    />
                  </div>
                  <div>
                    <label className="text-gray-700 font-semibold block mb-2">Cao độ: {pitch.toFixed(1)}</label>
                    <input
                      type="range"
                      min="0.5"
                      max="2"
                      step="0.1"
                      value={pitch}
                      onChange={(e) => setPitch(parseFloat(e.target.value))}
                      className="w-full accent-orange-500"
                    />
                  </div>
                </div>
                <button
                  onClick={clearAllData}
                  className="mt-4 flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition shadow-md"
                >
                  <Trash2 className="w-4 h-4" />
                  Xóa toàn bộ dữ liệu
                </button>
              </div>
            )}

            {/* Search Bar */}
            {!quizMode && (
              <div className="mb-6">
                <input
                  type="text"
                  placeholder="Tìm kiếm từ, dịch nghĩa, hoặc ví dụ..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className="w-full px-4 py-3 bg-white border-2 border-orange-300 rounded-lg text-gray-800 placeholder-gray-500 focus:outline-none focus:border-orange-500 transition shadow-md"
                />
              </div>
            )}

            {/* Stats Panel */}
            {showStats && (
              <div className="grid grid-cols-2 md:grid-cols-5 gap-3 mb-6">
                <div className="bg-gradient-to-br from-blue-400 to-blue-500 p-4 rounded-lg text-center shadow-lg">
                  <p className="text-2xl font-bold text-white">{stats.total}</p>
                  <p className="text-xs text-blue-100">Tổng từ</p>
                </div>
                <div className="bg-gradient-to-br from-orange-400 to-orange-500 p-4 rounded-lg text-center shadow-lg">
                  <p className="text-2xl font-bold text-white">{stats.mastered}</p>
                  <p className="text-xs text-orange-100">Đã nắm vững</p>
                </div>
                <div className="bg-gradient-to-br from-amber-300 to-amber-400 p-4 rounded-lg text-center shadow-lg">
                  <p className="text-2xl font-bold text-white">{stats.learned}</p>
                  <p className="text-xs text-white">Đã học</p>
                </div>
                <div className="bg-gradient-to-br from-rose-400 to-rose-500 p-4 rounded-lg text-center shadow-lg">
                  <p className="text-2xl font-bold text-white">{stats.favorited}</p>
                  <p className="text-xs text-rose-100">Yêu thích</p>
                </div>
                <div className="bg-gradient-to-br from-gray-400 to-gray-500 p-4 rounded-lg text-center shadow-lg">
                  <p className="text-2xl font-bold text-white">{stats.remaining}</p>
                  <p className="text-xs text-gray-100">Còn lại</p>
                </div>
              </div>
            )}

            {/* Progress Bar */}
            <div className="mb-6">
              <div className="flex justify-between items-center mb-2">
                <span className="text-sm font-semibold text-gray-700">
                  {currentIndex + 1}/{displayedWords.length}
                </span>
                <span className="text-sm font-semibold text-gray-700">
                  {Math.round(progressPercent)}%
                </span>
              </div>
              <div className="w-full bg-gray-300 rounded-full h-3 overflow-hidden shadow-md">
                <div
                  className="bg-gradient-to-r from-blue-500 via-orange-400 to-amber-300 h-full transition-all duration-300"
                  style={{ width: `${progressPercent}%` }}
                />
              </div>
            </div>

            {/* Quiz Mode */}
            {quizMode ? (
              <div className="mb-8">
                <div className="bg-white border-4 border-orange-400 rounded-2xl p-8 text-center min-h-96 flex flex-col justify-center shadow-2xl">
                  <p className="text-orange-500 text-sm mb-4 uppercase tracking-widest font-bold">Câu hỏi {currentIndex + 1}/{displayedWords.length}</p>
                  <p className="text-4xl font-bold text-orange-600 mb-8">{currentWord.vietnamese}</p>
                  <p className="text-gray-700 mb-6 font-semibold">Chọn đáp án đúng:</p>
                  <div className="grid grid-cols-1 gap-3">
                    {quizOptions.map((option, idx) => {
                      const isCorrect = option === quizCorrectAnswer;
                      const isSelected = option === selectedAnswer;
                      
                      let buttonClass = 'bg-white border-2 border-gray-300 text-gray-800 hover:border-orange-400';
                      
                      if (quizAnswered) {
                        if (isCorrect) {
                          buttonClass = 'bg-green-100 border-2 border-green-500 text-green-800';
                        } else if (isSelected && !isCorrect) {
                          buttonClass = 'bg-red-100 border-2 border-red-500 text-red-800';
                        }
                      }

                      return (
                        <button
                          key={idx}
                          onClick={() => !quizAnswered && handleQuizAnswer(option)}
                          disabled={quizAnswered}
                          className={`p-4 rounded-lg font-semibold transition ${buttonClass} ${quizAnswered ? 'cursor-default' : 'cursor-pointer'}`}
                        >
                          <div className="flex items-center justify-between">
                            <span>{option}</span>
                            {quizAnswered && isCorrect && <Check className="w-5 h-5 text-green-600" />}
                            {quizAnswered && isSelected && !isCorrect && <X className="w-5 h-5 text-red-600" />}
                          </div>
                        </button>
                      );
                    })}
                  </div>

                  {quizAnswered && (
                    <div className={`mt-6 p-4 rounded-lg font-semibold text-lg ${
                      selectedAnswer === quizCorrectAnswer
                        ? 'bg-green-100 border-2 border-green-500 text-green-800'
                        : 'bg-red-100 border-2 border-red-500 text-red-800'
                    }`}>
                      {selectedAnswer === quizCorrectAnswer ? (
                        <div className="flex items-center gap-2">
                          <Check className="w-6 h-6" />
                          Chính xác! ✨
                        </div>
                      ) : (
                        <div>
                          <div className="flex items-center gap-2 mb-2">
                            <X className="w-6 h-6" />
                            Sai rồi!
                          </div>
                          <p className="text-sm">Đáp án đúng: <span className="font-bold">{quizCorrectAnswer}</span></p>
                        </div>
                      )}
                    </div>
                  )}
                </div>
              </div>
            ) : (
              /* Card */
              <div
                onClick={() => setIsFlipped(!isFlipped)}
                className="mb-8 cursor-pointer"
              >
                <div className={`min-h-96 bg-gradient-to-br from-white to-amber-50 rounded-2xl shadow-xl p-8 flex flex-col items-center justify-center transition-all duration-500 transform hover:shadow-2xl hover:scale-102 border-4 ${
                  isMastered ? 'border-orange-400' : 'border-orange-200'
                }`}>
                  {!isFlipped ? (
                    <div className="text-center w-full">
                      <p className="text-gray-500 text-sm mb-4 uppercase tracking-widest">Từ Vựng</p>
                      <p className="text-5xl md:text-6xl font-bold text-blue-600 mb-4 break-words">{currentWord.word}</p>
                      <p className="text-gray-600 text-lg italic mb-8">{currentWord.phonetic}</p>
                      <p className="text-gray-600 text-lg">Bấm để xem dịch nghĩa</p>
                      <div className="mt-8 inline-block bg-amber-100 px-4 py-2 rounded-lg border-2 border-orange-300">
                        <p className="text-xs text-gray-700">Level: <span className="text-orange-600 font-bold">{currentWord.level}</span></p>
                      </div>
                    </div>
                  ) : (
                    <div className="text-center w-full">
                      <p className="text-orange-500 text-sm mb-4 uppercase tracking-widest">Dịch Nghĩa</p>
                      <p className="text-4xl font-bold text-orange-600 mb-6 break-words">{currentWord.vietnamese}</p>
                      <div className="bg-blue-50 p-4 rounded-lg mb-6 text-left border-2 border-blue-200">
                        <p className="text-xs text-gray-700 mb-2 uppercase font-bold">Loại từ</p>
                        <p className="text-gray-800 font-semibold">{currentWord.pos}</p>
                      </div>
                      <div className="bg-amber-100 p-4 rounded-lg text-left border-2 border-orange-300">
                        <p className="text-xs text-gray-700 mb-2 uppercase font-bold">Ví dụ</p>
                        <p className="text-gray-800 italic">{currentWord.example}</p>
                        <button
                          onClick={(e) => {
                            e.stopPropagation();
                            handleSpeakExample();
                          }}
                          className={`mt-3 flex items-center gap-2 px-3 py-1 rounded text-sm font-semibold transition shadow-md ${
                            sentenceId === `example-${currentIndex}`
                              ? 'bg-blue-500 text-white'
                              : 'bg-blue-300 text-white hover:bg-blue-400'
                          }`}
                        >
                          <Volume2 className="w-4 h-4" />
                          Phát ví dụ
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* Action Buttons */}
            <div className="grid grid-cols-2 md:grid-cols-5 gap-3 mb-8">
              <button
                onClick={handleSpeak}
                className={`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition shadow-md ${
                  playingId === `word-${currentIndex}`
                    ? 'bg-orange-600 text-white'
                    : 'bg-orange-500 hover:bg-orange-600 text-white'
                }`}
              >
                <Volume2 className="w-5 h-5" />
                <span className="hidden md:inline">Phát</span>
              </button>
              <button
                onClick={toggleFavorite}
                className={`px-4 py-3 rounded-lg font-semibold transition flex items-center justify-center shadow-md ${
                  isFavorited
                    ? 'bg-rose-500 text-white'
                    : 'bg-gray-300 text-gray-700 hover:bg-gray-400'
                }`}
              >
                ❤️ <span className="hidden md:inline">Yêu</span>
              </button>
              <button
                onClick={toggleLearned}
                className={`px-4 py-3 rounded-lg font-semibold transition flex items-center justify-center shadow-md ${
                  isLearned
                    ? 'bg-amber-400 text-white'
                    : 'bg-gray-300 text-gray-700 hover:bg-gray-400'
                }`}
              >
                📚 <span className="hidden md:inline">Học</span>
              </button>
              <button
                onClick={toggleMastered}
                className={`px-4 py-3 rounded-lg font-semibold transition flex items-center justify-center shadow-md ${
                  isMastered
                    ? 'bg-blue-500 text-white'
                    : 'bg-gray-300 text-gray-700 hover:bg-gray-400'
                }`}
              >
                ✓ <span className="hidden md:inline">Nắm</span>
              </button>
              <button
                onClick={handleReset}
                className="px-4 py-3 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg font-semibold transition flex items-center justify-center shadow-md"
              >
                <RotateCcw className="w-5 h-5" />
              </button>
            </div>

            {/* Secondary Actions */}
            <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mb-8">
              {!quizMode && (
                <>
                  <button
                    onClick={startQuiz}
                    className="px-4 py-2 bg-amber-400 hover:bg-amber-500 text-white rounded-lg font-semibold transition flex items-center justify-center gap-2 shadow-md"
                  >
                    <Zap className="w-4 h-4" />
                    <span className="hidden md:inline">Bắt đầu Quiz</span>
                    <span className="md:hidden">Quiz</span>
                  </button>
                  <button
                    onClick={copyToClipboard}
                    className="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg font-semibold transition flex items-center justify-center gap-2 shadow-md"
                  >
                    <Copy className="w-4 h-4" />
                    <span className="hidden md:inline">Sao chép</span>
                  </button>
                  <button
                    onClick={exportToCSV}
                    className="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg font-semibold transition flex items-center justify-center gap-2 shadow-md"
                  >
                    <Download className="w-4 h-4" />
                    <span className="hidden md:inline">Tải CSV</span>
                  </button>
                  <button
                    onClick={() => alert('Chia sẻ tính năng sẽ sớm được cập nhật!')}
                    className="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg font-semibold transition flex items-center justify-center gap-2 shadow-md"
                  >
                    <Share2 className="w-4 h-4" />
                    <span className="hidden md:inline">Chia sẻ</span>
                  </button>
                </>
              )}
              {quizMode && (
                <button
                  onClick={() => setQuizMode(false)}
                  className="col-span-2 md:col-span-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition shadow-md"
                >
                  Kết thúc Quiz (Điểm: {quizScore}/{displayedWords.length})
                </button>
              )}
            </div>

           {/* Navigation */}
            <div className="space-y-3">
              {/* Progress Indicator */}
              <div className="bg-white rounded-xl p-4 shadow-lg border border-orange-200">
                <div className="flex items-center justify-between mb-3">
                  <span className="text-sm font-bold text-gray-700">{currentIndex + 1}/{displayedWords.length}</span>
                  <span className="text-sm font-bold text-blue-600">{Math.round(progressPercent)}%</span>
                </div>
                
                {/* Mini dots grid */}
                <div className="grid grid-cols-8 md:grid-cols-12 gap-1.5">
                  {displayedWords.map((_, idx) => {
                    const isMasteredWord = displayedWords[idx] && masteredWords.has(displayedWords[idx].word);
                    const isCurrentWord = idx === currentIndex;
                    
                    return (
                      <button
                        key={idx}
                        onClick={() => {
                          setCurrentIndex(idx);
                          setIsFlipped(false);
                          setQuizAnswered(false);
                          setSelectedAnswer(null);
                          if (quizMode) generateQuizOptions(idx);
                        }}
                        className={`relative w-full aspect-square rounded-lg transition-all font-semibold text-[10px] flex items-center justify-center ${
                          isCurrentWord
                            ? 'bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg scale-110'
                            : isMasteredWord
                            ? 'bg-gradient-to-br from-green-400 to-green-500 text-white shadow-md hover:scale-105'
                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300 hover:scale-105'
                        }`}
                      >
                        {idx + 1}
                        {isMasteredWord && !isCurrentWord && (
                          <div className="absolute -top-0.5 -right-0.5 w-2 h-2 bg-yellow-400 rounded-full"></div>
                        )}
                      </button>
                    );
                  })}
                </div>
              </div>

              {/* Action Buttons */}
              <div className="grid grid-cols-3 gap-2">
                <button
                  onClick={handlePrev}
                  disabled={currentIndex === 0}
                  className="flex items-center justify-center gap-1 px-3 py-2.5 bg-gradient-to-r from-gray-400 to-gray-500 text-white rounded-lg font-semibold hover:from-gray-500 hover:to-gray-600 transition disabled:opacity-30 disabled:cursor-not-allowed shadow-md"
                >
                  <ChevronLeft className="w-4 h-4" />
                  <span className="text-sm">Trước</span>
                </button>

                <button
                  onClick={() => {
                    if (quizMode) {
                      setQuizMode(false);
                    } else {
                      startQuiz();
                    }
                  }}
                  className="flex items-center justify-center gap-1 px-3 py-2.5 bg-gradient-to-r from-amber-400 to-orange-500 text-white rounded-lg font-semibold hover:from-amber-500 hover:to-orange-600 transition shadow-md"
                >
                  <Zap className="w-4 h-4" />
                  <span className="text-sm">{quizMode ? 'Dừng' : 'Quiz'}</span>
                </button>

                <button
                  onClick={handleNext}
                  disabled={currentIndex === displayedWords.length - 1}
                  className="flex items-center justify-center gap-1 px-3 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-semibold hover:from-orange-600 hover:to-orange-700 transition disabled:opacity-30 disabled:cursor-not-allowed shadow-md"
                >
                  <span className="text-sm">Tiếp</span>
                  <ChevronRight className="w-4 h-4" />
                </button>
              </div>

              {/* Stats Footer */}
              <div className="bg-gradient-to-r from-blue-50 to-orange-50 rounded-lg p-3 border border-orange-200 shadow-md">
                <div className="grid grid-cols-4 gap-2 text-center">
                  <div>
                    <div className="w-8 h-8 mx-auto mb-1 rounded-lg bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-sm">✓</div>
                    <p className="text-[10px] text-gray-600 mb-0.5">Nắm vững</p>
                    <p className="text-sm font-bold text-blue-600">{stats.mastered}</p>
                  </div>
                  <div>
                    <div className="w-8 h-8 mx-auto mb-1 rounded-lg bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-sm">📚</div>
                    <p className="text-[10px] text-gray-600 mb-0.5">Đã học</p>
                    <p className="text-sm font-bold text-amber-600">{stats.learned}</p>
                  </div>
                  <div>
                    <div className="w-8 h-8 mx-auto mb-1 rounded-lg bg-gradient-to-br from-rose-400 to-pink-500 flex items-center justify-center text-sm">❤️</div>
                    <p className="text-[10px] text-gray-600 mb-0.5">Yêu thích</p>
                    <p className="text-sm font-bold text-rose-600">{stats.favorited}</p>
                  </div>
                  <div>
                    <div className="w-8 h-8 mx-auto mb-1 rounded-lg bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center text-sm">⏳</div>
                    <p className="text-[10px] text-gray-600 mb-0.5">Còn lại</p>
                    <p className="text-sm font-bold text-gray-600">{stats.remaining}</p>
                  </div>
                </div>
            
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="src/components/VoiceMetricsBadge.jsx">
import React, { useState, useEffect } from 'react';
import { Activity, AlertCircle, CheckCircle, Zap } from 'lucide-react';

/**
 * Simple Voice Metrics Badge
 * Compact display of voice performance
 */
export const VoiceMetricsBadge = ({ 
  voiceMetrics, 
  ttsMetrics,
  performanceLevel,
  isPlaying = false 
}) => {
  const [showDetails, setShowDetails] = useState(false);

  // Determine status color
  const getStatusColor = () => {
    if (!voiceMetrics) return 'gray';
    if (voiceMetrics.successRate < 80) return 'red';
    if (voiceMetrics.successRate < 95) return 'yellow';
    return 'green';
  };

  const statusColor = getStatusColor();
  const statusColors = {
    green: 'text-green-600 bg-green-50 border-green-300',
    yellow: 'text-yellow-600 bg-yellow-50 border-yellow-300',
    red: 'text-red-600 bg-red-50 border-red-300',
    gray: 'text-gray-600 bg-gray-50 border-gray-300'
  };

  if (!voiceMetrics && !ttsMetrics) return null;

  return (
    <div className="space-y-2">
      {/* Compact Badge */}
      <button
        onClick={() => setShowDetails(!showDetails)}
        className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg border-2 text-sm font-semibold transition-all ${statusColors[statusColor]}`}
      >
        <Activity className={`w-4 h-4 ${isPlaying ? 'animate-pulse' : ''}`} />
        <span>Performance</span>
        
        {voiceMetrics && (
          <span className="ml-auto text-xs">
            {voiceMetrics.successRate}% • {voiceMetrics.speakAttempts} attempts
          </span>
        )}
        
        {voiceMetrics?.errorCount > 0 && (
          <AlertCircle className="w-4 h-4" />
        )}
      </button>

      {/* Detailed View */}
      {showDetails && (
        <div className="bg-white border-2 border-gray-300 rounded-lg p-4 space-y-3 text-sm">
          
          {/* Voice Metrics */}
          {voiceMetrics && (
            <div className="space-y-2 pb-3 border-b-2 border-gray-200">
              <h4 className="font-bold text-gray-900">Voice System</h4>
              <div className="grid grid-cols-2 gap-2 text-xs">
                <div>
                  <p className="text-gray-600">Voice Load</p>
                  <p className="font-semibold text-gray-900">{voiceMetrics.voiceLoadTime}ms</p>
                </div>
                <div>
                  <p className="text-gray-600">Cached</p>
                  <p className="font-semibold text-gray-900">{voiceMetrics.cachedVoices}</p>
                </div>
                <div>
                  <p className="text-gray-600">Success Rate</p>
                  <p className="font-semibold text-green-600">{voiceMetrics.successRate}%</p>
                </div>
                <div>
                  <p className="text-gray-600">Errors</p>
                  <p className={`font-semibold ${voiceMetrics.errorCount > 0 ? 'text-red-600' : 'text-green-600'}`}>
                    {voiceMetrics.errorCount}
                  </p>
                </div>
              </div>
            </div>
          )}

          {/* TTS Metrics */}
          {ttsMetrics && (
            <div className="space-y-2 pb-3 border-b-2 border-gray-200">
              <h4 className="font-bold text-gray-900">Text-to-Speech</h4>
              <div className="grid grid-cols-2 gap-2 text-xs">
                <div>
                  <p className="text-gray-600">Utterances</p>
                  <p className="font-semibold text-gray-900">{ttsMetrics.totalUtterances}</p>
                </div>
                <div>
                  <p className="text-gray-600">Avg Duration</p>
                  <p className="font-semibold text-gray-900">{ttsMetrics.avgDuration}ms</p>
                </div>
                <div>
                  <p className="text-gray-600">Total Time</p>
                  <p className="font-semibold text-gray-900">{Math.round(ttsMetrics.totalDuration / 1000)}s</p>
                </div>
                <div>
                  <p className="text-gray-600">Error Rate</p>
                  <p className={`font-semibold ${parseFloat(ttsMetrics.errorRate) > 5 ? 'text-red-600' : 'text-green-600'}`}>
                    {ttsMetrics.errorRate}%
                  </p>
                </div>
              </div>
            </div>
          )}

          {/* Performance Level */}
          {performanceLevel && (
            <div className="space-y-2">
              <h4 className="font-bold text-gray-900">Device Performance</h4>
              <div className="text-xs space-y-1">
                <p className="text-gray-600">
                  Level: <span className="font-semibold text-blue-600">{performanceLevel.label}</span>
                </p>
                <p className="text-gray-600">
                  Recommended Speed: <span className="font-semibold">{performanceLevel.rate}x</span>
                </p>
                <p className="text-gray-600">
                  Max Chunk Size: <span className="font-semibold">{performanceLevel.chunkSize} chars</span>
                </p>
              </div>
            </div>
          )}

          {/* Close Button */}
          <button
            onClick={() => setShowDetails(false)}
            className="w-full mt-2 px-3 py-2 text-xs font-semibold text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all"
          >
            Close
          </button>
        </div>
      )}
    </div>
  );
};

export default VoiceMetricsBadge;
</file>

<file path="src/constants/config.js">
export const DESIGN_TOKENS = {
    colors: {
        primary: '#4F46E5',
        accent: '#F59E0B',
        success: '#10B981',
        error: '#EF4444',
        text: '#1F2937',
    },
};

export const TABS = [
    { id: 'categories', label: 'Danh Mục', icon: 'BookOpen' },
    { id: 'flashcards', label: 'Flashcards', icon: 'PlayCircle' },
    { id: 'quiz', label: 'Quiz', icon: 'Award' },
    { id: 'stats', label: 'Thống Kê', icon: 'BarChart3' },
];

export const LEVELS = ['beginner', 'intermediate', 'advanced'];

export const LEVEL_LABELS = {
    beginner: 'Sơ cấp',
    intermediate: 'Trung cấp',
    advanced: 'Nâng cao',
};
</file>

<file path="src/contexts/AuthContext.jsx">
import React, { createContext, useState, useEffect, useCallback, useContext } from 'react';
import {
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  signOut,
  onAuthStateChanged,
  updateProfile,
  GoogleAuthProvider,
  signInWithPopup,
  sendPasswordResetEmail,
  setPersistence,
  browserLocalPersistence,
} from 'firebase/auth';
import { auth } from '../config/firebase';

const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // Set persistence on mount
  useEffect(() => {
    setPersistence(auth, browserLocalPersistence).catch(err => {
      console.warn('Persistence error:', err);
    });
  }, []);

  // Listen to authentication state changes
  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {
      setUser(currentUser);
      setLoading(false);
    });

    return unsubscribe;
  }, []);

  // Sign up with email and password
  const signup = useCallback(async (email, password, displayName) => {
    try {
      setError(null);

      if (!email || !password) {
        throw new Error('Email và mật khẩu không được để trống');
      }

      if (password.length < 6) {
        throw new Error('Mật khẩu phải có ít nhất 6 ký tự');
      }

      const userCredential = await createUserWithEmailAndPassword(auth, email, password);

      if (displayName) {
        await updateProfile(userCredential.user, {
          displayName,
          photoURL: `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=random`,
        });
      }

      setUser(userCredential.user);
      return userCredential.user;
    } catch (err) {
      const errorMap = {
        'auth/email-already-in-use': 'Email này đã được đăng ký',
        'auth/weak-password': 'Mật khẩu phải có ít nhất 6 ký tự',
        'auth/invalid-email': 'Email không hợp lệ',
        'auth/operation-not-allowed': 'Đăng ký tạm thời không khả dụng',
      };

      const errorMessage = errorMap[err.code] || err.message;
      setError(errorMessage);
      throw new Error(errorMessage);
    }
  }, []);

  // Sign in with email and password
  const signin = useCallback(async (email, password) => {
    try {
      setError(null);

      if (!email || !password) {
        throw new Error('Email và mật khẩu không được để trống');
      }

      const userCredential = await signInWithEmailAndPassword(auth, email, password);
      setUser(userCredential.user);
      return userCredential.user;
    } catch (err) {
      const errorMap = {
        'auth/user-not-found': 'Tài khoản không tồn tại',
        'auth/wrong-password': 'Mật khẩu không chính xác',
        'auth/invalid-email': 'Email không hợp lệ',
        'auth/user-disabled': 'Tài khoản đã bị vô hiệu hóa',
        'auth/too-many-requests': 'Quá nhiều lần đăng nhập thất bại, vui lòng thử lại sau',
      };

      const errorMessage = errorMap[err.code] || err.message;
      setError(errorMessage);
      throw new Error(errorMessage);
    }
  }, []);

  // Sign in with Google
  const signInWithGoogle = useCallback(async () => {
    try {
      setError(null);
      const provider = new GoogleAuthProvider();
      const userCredential = await signInWithPopup(auth, provider);
      setUser(userCredential.user);
      return userCredential.user;
    } catch (err) {
      if (err.code === 'auth/popup-closed-by-user') {
        return null;
      }
      const errorMessage = 'Google sign-in failed. Please try again.';
      setError(errorMessage);
      throw new Error(errorMessage);
    }
  }, []);

  // Send password reset email
  const resetPassword = useCallback(async (email) => {
    try {
      setError(null);
      if (!email) {
        throw new Error('Vui lòng nhập email');
      }
      await sendPasswordResetEmail(auth, email);
      return true;
    } catch (err) {
      const errorMap = {
        'auth/user-not-found': 'Email này không được đăng ký',
        'auth/invalid-email': 'Email không hợp lệ',
        'auth/too-many-requests': 'Quá nhiều yêu cầu, vui lòng thử lại sau',
      };

      const errorMessage = errorMap[err.code] || err.message;
      setError(errorMessage);
      throw new Error(errorMessage);
    }
  }, []);

  // Sign out
  const logout = useCallback(async () => {
    try {
      setError(null);
      await signOut(auth);
      setUser(null);
    } catch (err) {
      const errorMessage = 'Đăng xuất thất bại';
      setError(errorMessage);
      throw new Error(errorMessage);
    }
  }, []);

  // Update user profile
  const updateUserProfile = useCallback(async (updates) => {
    try {
      setError(null);
      if (!auth.currentUser) {
        throw new Error('No user logged in');
      }
      await updateProfile(auth.currentUser, updates);
      setUser({ ...auth.currentUser, ...updates });
    } catch (err) {
      setError(err.message);
      throw err;
    }
  }, []);

  const value = {
    user,
    loading,
    error,
    signup,
    signin,
    signInWithGoogle,
    resetPassword,
    logout,
    updateUserProfile,
    clearError: () => setError(null),
  };

  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within AuthProvider');
  }
  return context;
};
</file>

<file path="src/contexts/ClerkUserContext.jsx">
import React, { createContext, useContext } from 'react';
import { useClerkAuthentication } from '../hooks/useClerkAuth';

const ClerkUserContext = createContext();

export const ClerkUserProvider = ({ children }) => {
  const auth = useClerkAuthentication();

  return (
    <ClerkUserContext.Provider value={auth}>
      {children}
    </ClerkUserContext.Provider>
  );
};

export const useClerkUser = () => {
  const context = useContext(ClerkUserContext);
  if (!context) {
    throw new Error('useClerkUser must be used within ClerkUserProvider');
  }
  return context;
};
</file>

<file path="src/data/advancedData.js">
export const advanced = {
  level: 'Advanced',
  description: 'Advanced grammar topics for mastery',
  topics: {
    // Topic 1: Reported Speech
    reportedSpeech: {
      id: 'reported_speech',
      title: 'Reported Speech (Indirect Speech)',
      difficulty: 'Advanced',
      icon: '💬',
      description: 'Report what someone said without using direct quotes',
      lessons: [
        {
          lessonId: 'rs_001',
          title: 'Introduction to Reported Speech',
          duration: '14 mins',
          content: `
            DIRECT SPEECH vs REPORTED SPEECH:
           
            Direct: "I am hungry," she said.
            Reported: She said she was hungry.
           
            TENSE SHIFTS (Backshift):
            When the reporting verb is past tense:
           
            Direct Present Simple → Reported Past Simple
            "I work here." → He said he worked there.
           
            Direct Present Continuous → Reported Past Continuous
            "I am studying." → She said she was studying.
           
            Direct Present Perfect → Reported Past Perfect
            "I have finished." → They said they had finished.
           
            Direct Past Simple → Reported Past Perfect
            "I went yesterday." → He said he had gone.
           
            Direct Future (will) → Reported Conditional (would)
            "I will come." → She said she would come.
           
            Direct Past Perfect → No change
            "I had eaten." → He said he had eaten.
           
            TIME/PLACE SHIFTS:
            Direct → Reported
            now → then
            today → that day
            yesterday → the day before
            tomorrow → the next day/the following day
            here → there
            this → that
           
            Examples:
            Direct: "I was here yesterday," she said.
            Reported: She said she had been there the day before.
           
            Direct: "I will see you tomorrow," he said.
            Reported: He said he would see me the next day.
          `,
          examples: [
            { example: '"I love this place." → He said he loved that place.', explanation: 'Present simple → Past simple, this → that' },
            { example: '"She is working now." → He said she was working then.', explanation: 'Present continuous → Past continuous' },
            { example: '"They will arrive today." → He said they would arrive that day.', explanation: 'will → would, today → that day' },
            { example: '"I have completed it." → She said she had completed it.', explanation: 'Present perfect → Past perfect' },
          ],
        },
        {
          lessonId: 'rs_002',
          title: 'Reported Questions & Commands',
          duration: '12 mins',
          content: `
            REPORTED QUESTIONS:
           
            Form: say/tell + question word + if/whether + statement word order
            (NOT question word order)
           
            Yes/No Questions:
            Direct: "Do you speak English?" he asked.
            Reported: He asked if/whether I spoke English.
           
            Direct: "Will you help me?" she asked.
            Reported: She asked if/whether I would help her.
           
            Question Word Questions:
            Direct: "What time is it?" he asked.
            Reported: He asked what time it was.
           
            Direct: "Where do you live?" she asked.
            Reported: She asked where I lived.
           
            Direct: "How many books have you read?" he asked.
            Reported: He asked how many books I had read.
           
            Important: Use statement word order, not question word order!
            ✓ He asked where I lived. (lived after where)
            ✗ He asked where did I live.
           
            REPORTED COMMANDS:
           
            Use: tell/ask + (not) + to + infinitive
           
            Direct: "Come here!" he said.
            Reported: He told me to come there.
           
            Direct: "Don't be late!" she said.
            Reported: She told him not to be late.
           
            Direct: "Open the window!" they said.
            Reported: They asked me to open the window.
           
            Positive command: Subject + tell/ask + object + to + verb
            Negative command: Subject + tell/ask + object + not + to + verb
          `,
          examples: [
            { example: '"Are you ready?" → He asked if I was ready.', explanation: 'Yes/No question with if' },
            { example: '"Why didn\'t you call?" → She asked why I hadn\'t called.', explanation: 'Question word with statement order' },
            { example: '"Sit down!" → He told me to sit down.', explanation: 'Command with to infinitive' },
            { example: '"Don\'t go!" → She asked him not to go.', explanation: 'Negative command' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'rs_ex_001',
          type: 'fill_blank',
          difficulty: 'Hard',
          question: '"I am working on a new project," she said. → She said she _____ on a new project.',
          correctAnswer: 'was working',
          hints: ['Present continuous → past continuous', 'am working → was working'],
          explanation: 'In reported speech, present continuous shifts to past continuous when the reporting verb is past.',
        },
        {
          exerciseId: 'rs_ex_002',
          type: 'multiple_choice',
          difficulty: 'Hard',
          question: '"Where did you go yesterday?" he asked. → He asked _____ yesterday.',
          options: [
            { text: 'where I had gone', isCorrect: true, explanation: 'Question word + statement word order + past perfect' },
            { text: 'where did I go', isCorrect: false, explanation: 'Wrong - don\'t use question word order in reported speech' },
            { text: 'if I went', isCorrect: false, explanation: 'Use question word (where), not if' },
            { text: 'what I went', isCorrect: false, explanation: 'Wrong question word' },
          ],
        },
      ],
    },
    // Topic 2: Relative Clauses
    relativeClauses: {
      id: 'relative_clauses',
      title: 'Relative Clauses',
      difficulty: 'Advanced',
      icon: '🔗',
      description: 'Combine sentences using who, which, that, where',
      lessons: [
        {
          lessonId: 'rel_001',
          title: 'Defining Relative Clauses',
          duration: '13 mins',
          content: `
            RELATIVE CLAUSES:
            A clause that gives more information about a noun.
           
            RELATIVE PRONOUNS:
           
            WHO - for people
            "The man who called me was my uncle."
            "Students who study hard pass exams."
           
            WHICH - for things/animals
            "The book which I read was interesting."
            "Cars which use electric batteries are eco-friendly."
           
            WHOSE - possessive for people and things
            "The student whose project won was very happy."
            "The house whose owner is rich has a big garden."
           
            THAT - for people, things, animals (informal)
            "The person that helped me was kind."
            "The car that I bought is reliable."
           
            WHERE - for places
            "The restaurant where we ate was expensive."
            "The city where I was born is beautiful."
           
            WHEN - for time
            "The day when I arrived was sunny."
            "The time when I left was 8 PM."
           
            DEFINING vs NON-DEFINING:
           
            DEFINING (Essential information - NO COMMAS):
            "The student who scored highest won a prize."
            (Which student? The one who scored highest)
           
            "I like the shirt that my sister gave me."
            (Which shirt? The one my sister gave)
           
            NON-DEFINING (Extra information - WITH COMMAS):
            "My friend John, who is a doctor, loves traveling."
            (We already know who John is - extra info)
           
            "The Eiffel Tower, which is in Paris, was built in 1889."
            (We know what it is - extra historical info)
           
            Note: In non-defining clauses:
            - CANNOT use "that"
            - CANNOT omit the relative pronoun
            - Use commas (which, who, whose, where, when)
           
            OMITTING RELATIVE PRONOUNS (Defining clauses only):
           
            Can omit when it's the OBJECT:
            "The book (that) I read was good." ✓ (can omit)
            "The girl (who) I met was nice." ✓ (can omit)
           
            CANNOT omit when it's the SUBJECT:
            "The book that is on the table is mine." ✗ (cannot omit)
            "The man who lives here is my neighbor." ✗ (cannot omit)
          `,
          examples: [
            { example: 'The woman who teaches English is very kind.', explanation: 'WHO - subject of clause' },
            { example: 'The movie which I watched yesterday was great.', explanation: 'WHICH - object (can omit "which")' },
            { example: 'The house where I grew up is still there.', explanation: 'WHERE - for locations' },
            { example: 'The student whose exam was excellent received praise.', explanation: 'WHOSE - possessive' },
            { example: 'My brother, who lives in Tokyo, visits us every summer.', explanation: 'NON-DEFINING - extra info with commas' },
          ],
        },
        {
          lessonId: 'rel_002',
          title: 'Complex Relative Clause Patterns',
          duration: '11 mins',
          content: `
            PREPOSITIONS + RELATIVE PRONOUNS:
           
            Formal (with preposition at beginning):
            "The person to whom I spoke was helpful."
            "The book in which he wrote notes is lost."
            "The reason for which she left is unknown."
           
            Informal (with preposition at end):
            "The person I spoke to was helpful."
            "The book he wrote notes in is lost."
            "The reason she left for is unknown."
           
            WHOSE vs OF WHICH:
           
            People: whose
            "The teacher whose class is interesting..."
           
            Things: whose OR of which
            "The building whose windows are broken..." =
            "The building, the windows of which are broken..."
           
            RELATIVE CLAUSES WITH "WHAT":
           
            "What" is NOT a relative pronoun in the traditional sense.
            Used for something indefinite:
           
            "I don't understand what he meant." (= the thing that)
            "What you said is not true." (= the thing that)
            "I'll do whatever you ask." (= anything that)
           
            REDUCED RELATIVE CLAUSES:
           
            Option 1: Omit relative pronoun + auxiliary
            "The book (that) is on the table" → "The book on the table"
            "The girl (who) is wearing a red dress" → "The girl wearing a red dress"
           
            Option 2: Use -ed form (passive)
            "The man (who) was injured in the accident" → "The man injured in the accident"
            "The package (which) was delivered yesterday" → "The package delivered yesterday"
          `,
          examples: [
            { example: 'The friend to whom I told the secret betrayed me.', explanation: 'Formal - preposition at beginning' },
            { example: 'The friend (that) I told the secret to betrayed me.', explanation: 'Informal - preposition at end' },
            { example: 'The students wearing uniforms are from our school.', explanation: 'Reduced relative clause' },
            { example: 'Do you understand what I mean?', explanation: '"What" for indefinite things' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'rel_ex_001',
          type: 'multiple_choice',
          difficulty: 'Hard',
          question: 'The scientist _____ discovered the cure was awarded a Nobel Prize.',
          options: [
            { text: 'who', isCorrect: true, explanation: 'WHO for person + subject of clause' },
            { text: 'which', isCorrect: false, explanation: 'WHICH is for things, not people' },
            { text: 'that discovered', isCorrect: false, explanation: 'Wrong structure' },
            { text: 'whom', isCorrect: false, explanation: 'WHOM is for object, but here WHO is subject' },
          ],
        },
      ],
    },
    // Topic 3: Passive Voice
    passiveVoice: {
      id: 'passive_voice',
      title: 'Passive Voice',
      difficulty: 'Advanced',
      icon: '🔄',
      description: 'Focus on the action rather than who does it',
      lessons: [
        {
          lessonId: 'pv_001',
          title: 'Formation & Use of Passive Voice',
          duration: '13 mins',
          content: `
            ACTIVE vs PASSIVE:
           
            Active: Subject performs the action
            "The chef prepared the meal."
           
            Passive: Subject receives the action
            "The meal was prepared by the chef."
           
            FORM: be (conjugated) + past participle
           
            TENSE CONVERSIONS:
           
            Present Simple Active: cook
            Present Simple Passive: is/am/are + cooked
            "They cook dinner." → "Dinner is cooked (by them)."
           
            Present Continuous Active: is cooking
            Present Continuous Passive: is/am/are + being + cooked
            "She is cooking rice." → "Rice is being cooked (by her)."
           
            Past Simple Active: cooked
            Past Simple Passive: was/were + cooked
            "They cooked it yesterday." → "It was cooked yesterday."
           
            Past Continuous Active: was cooking
            Past Continuous Passive: was/were + being + cooked
            "I was preparing dinner." → "Dinner was being prepared."
           
            Present Perfect Active: have cooked
            Present Perfect Passive: have/has + been + cooked
            "She has finished the project." → "The project has been finished."
           
            Past Perfect Active: had cooked
            Past Perfect Passive: had + been + cooked
            "They had completed the work." → "The work had been completed."
           
            Future Simple Active: will cook
            Future Simple Passive: will + be + cooked
            "I will fix it." → "It will be fixed."
           
            Modals Active: can cook, must cook
            Modals Passive: can be cooked, must be cooked
            "We must finish this." → "This must be finished."
           
            WHEN TO USE PASSIVE:
            1. Focus on the action, not who does it
            2. The doer is unknown or obvious
            3. More formal/impersonal tone
            4. Scientific or technical writing
           
            Examples:
            "Thousands of people visit this museum each year."
            (Focus on museum, not on specific visitors)
           
            "Several mistakes were found in the report."
            (Who found? Not important)
           
            "The medicine is taken twice daily."
            (How it's used matters, not who uses it)
           
            BY-PHRASE:
            "The book was written by J.K. Rowling." (Include agent)
            "The package was delivered." (Omit obvious agent)
           
            Omit "by" when:
            - Agent is obvious: "The school was closed." (by the principal/authority)
            - Agent is unimportant: "The bridge was destroyed." (by an earthquake/forces)
            - Agent is unknown: "The car was stolen." (we don't know who)
          `,
          examples: [
            { example: 'The letter was written in 1945. (Active: Someone wrote the letter in 1945.)', explanation: 'Focus on action/letter, not writer' },
            { example: 'The windows are being cleaned right now. (Active: Someone is cleaning...)', explanation: 'Present continuous passive' },
            { example: 'By 2030, 50% of cars will be electric-powered. (Active: will power)', explanation: 'Future passive' },
            { example: 'The suspect is believed to be dangerous. (Active: People believe...)', explanation: 'Modal passive' },
          ],
        },
        {
          lessonId: 'pv_002',
          title: 'Passive Voice with Get & Causative',
          duration: '11 mins',
          content: `
            PASSIVE WITH "GET":
           
            "Get" + past participle (less formal than "be"):
           
            "She got injured in the accident."
            (= She was injured - often suggests: something happened to her)
           
            "The car got damaged during transport."
            (= The car was damaged - suggests: unfortunate)
           
            GET + past participle usually implies:
            - Something happened to the person
            - Often negative or unexpected
            - More casual tone
           
            Compare:
            "The window was broken." (factual)
            "The window got broken." (something happened - more dramatic)
           
            CAUSATIVE STRUCTURES:
            "Have something done" = pay someone to do it
           
            "I had my car repaired." (I paid someone to repair it)
            "She got her hair cut." (She paid a stylist)
            "They had the house painted." (They hired painters)
           
            Form: have/get + object + past participle
           
            ACTIVE: A painter paints my house.
            PASSIVE: I have my house painted (by a painter).
           
            Uses:
            - Services: "I had my teeth cleaned."
            - Repairs: "He got his watch fixed."
            - Professional services: "She had her nails done."
           
            Negative: "I won't have my room cleaned." (= I won't allow it)
           
            CAUSATIVE with "LET/MAKE":
           
            "Let" + object + base verb (allow)
            "His mother let him stay up late."
           
            "Make" + object + base verb (force)
            "The teacher made us do homework."
           
            Passive form:
            "He was allowed to stay up late."
            "We were made to do homework."
          `,
          examples: [
            { example: 'I got stuck in traffic for 2 hours.', explanation: 'GET passive - something happened' },
            { example: 'She had her dress tailored for the wedding.', explanation: 'Causative - paid someone' },
            { example: 'The dog was made to sit.', explanation: 'Passive causative with make' },
            { example: 'Children are let to play in the park.', explanation: 'Passive causative with let' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'pv_ex_001',
          type: 'fill_blank',
          difficulty: 'Hard',
          question: 'The project _____ (complete) by next month.',
          correctAnswer: 'will be completed',
          hints: ['Future passive', 'will + be + past participle'],
          explanation: 'Future passive: will + be + past participle of complete (completed)',
        },
        {
          exerciseId: 'pv_ex_002',
          type: 'multiple_choice',
          difficulty: 'Hard',
          question: 'The report _____ three times before it was approved.',
          options: [
            { text: 'had been revised', isCorrect: true, explanation: 'Past perfect passive - multiple times before approval' },
            { text: 'was revised', isCorrect: false, explanation: 'Simple past - but "three times" suggests repetition' },
            { text: 'is being revised', isCorrect: false, explanation: 'Present continuous - wrong tense' },
            { text: 'has been revised', isCorrect: false, explanation: 'Present perfect - but action completed before past event' },
          ],
        },
      ],
    },
    // Topic 4: Noun Phrases & Nominalization
    nounPhrases: {
      id: 'noun_phrases',
      title: 'Noun Phrases & Nominalization',
      difficulty: 'Advanced',
      icon: '📝',
      description: 'Create complex noun structures and turn verbs into nouns',
      lessons: [
        {
          lessonId: 'np_001',
          title: 'Complex Noun Phrases',
          duration: '12 mins',
          content: `
            NOUN PHRASE STRUCTURE:
           
            (Determiner) + (Pre-modifiers) + HEAD NOUN + (Post-modifiers)
           
            Examples:
            "The beautiful old house"
            det + pre-mod + head noun
           
            "The old house with red shutters"
            det + pre-mod + head noun + post-mod
           
            "All the brilliant young students studying in our school"
            det + pre-mod + head noun + post-mod
           
            PRE-MODIFIERS (Before the noun):
           
            1. Determiners: the, a, this, my, some, all, etc.
            2. Adjectives: big, beautiful, old, interesting, etc.
            3. Numbers: one, two, first, second, etc.
            4. Participles: smoking, broken, sleeping, etc.
            5. Nouns: coffee table, kitchen sink, gold medal, etc.
           
            Examples:
            "A smoking hot cup of coffee" (participle + adjective + noun)
            "The sleeping children" (participle + noun)
            "A beautiful Italian leather wallet" (adjectives + noun)
            "The first international football match" (number + adjective + noun)
           
            POST-MODIFIERS (After the noun):
           
            1. Prepositional phrases: "in the house", "with red roof"
            2. Relative clauses: "who lived there", "that I bought"
            3. Participle clauses: "standing in the corner", "made of wood"
            4. Infinitive clauses: "to visit", "to remember"
           
            Examples:
            "The man in the corner" (prepositional phrase)
            "The books that I recommended" (relative clause)
            "The children playing in the park" (participle clause)
            "The desire to succeed" (infinitive clause)
           
            WORD ORDER OF ADJECTIVES:
            Opinion → Size → Age → Shape → Color → Origin → Material → Noun
           
            "A beautiful old round red Italian leather bag"
           
            But natural English rarely uses more than 3 adjectives.
            "A beautiful old red leather bag" (more natural)
          `,
          examples: [
            { example: 'The tall man with glasses standing near the door', explanation: 'det + adj + noun + prep phrase + participle' },
            { example: 'Several interesting historical documents from that period', explanation: 'det + adj + noun + prep phrase' },
            { example: 'The first successful international peace treaty', explanation: 'det + number + adj + noun' },
            { example: 'A cold glass of delicious fresh orange juice', explanation: 'adj + noun + prep phrase + adjectives' },
          ],
        },
        {
          lessonId: 'np_002',
          title: 'Nominalization - Turning Verbs into Nouns',
          duration: '11 mins',
          content: `
            NOMINALIZATION:
            Converting verbs/adjectives into nouns to make writing more formal/abstract.
           
            COMMON PATTERNS:
           
            1. -tion/-sion (from verbs ending in -e, -te):
            educate → education
            celebrate → celebration
            permit → permission
            decide → decision
           
            2. -ment:
            develop → development
            achieve → achievement
            govern → government
            manage → management
           
            3. -ness (from adjectives):
            happy → happiness
            aware → awareness
            kind → kindness
            clever → cleverness
           
            4. -ance/-ence:
            perform → performance
            appear → appearance
            exist → existence
            prefer → preference
           
            5. -ing:
            walk → walking
            learn → learning
            teach → teaching
            manage → managing
           
            6. -ity:
            able → ability
            possible → possibility
            public → publicity
            popular → popularity
           
            7. Irregular:
            begin → beginning
            grow → growth
            choose → choice
            move → movement
           
            USING NOMINALIZATION:
           
            Verb form (active, dynamic):
            "Students study English to improve their skills."
           
            Nominalized form (formal, abstract):
            "The study of English improves students' skills."
            "English study leads to skill improvement."
           
            Original: "People consume too much plastic."
            Nominalized: "Excessive plastic consumption is harmful."
           
            Original: "Companies pollute the environment."
            Nominalized: "Environmental pollution by companies..."
           
            BENEFITS:
            - More formal tone (academic writing)
            - Shorter, more concise
            - Focus on the action itself, not the person
            - Better for technical/scientific writing
           
            NOUN + NOMINALIZATION combinations:
            "The development of new technology" (technology development)
            "The reduction of carbon emissions" (carbon emission reduction)
            "The improvement of education quality" (education quality improvement)
          `,
          examples: [
            { example: 'The elimination of poverty requires international cooperation.', explanation: 'eliminate → elimination; cooperate → cooperation' },
            { example: 'Her achievement in the field was remarkable.', explanation: 'achieve → achievement' },
            { example: 'The management of the project was challenging.', explanation: 'manage → management' },
            { example: 'His happiness comes from helping others.', explanation: 'happy → happiness' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'np_ex_001',
          type: 'fill_blank',
          difficulty: 'Hard',
          question: 'Choose the best nominalization: "The country must _____ its infrastructure." → "The country needs _____ of its infrastructure."',
          correctAnswer: 'modernize / modernization',
          hints: ['Verb modernize', '-tion ending for noun form'],
          explanation: 'modernize → modernization (verb → noun with -tion suffix)',
        },
      ],
    },
  },
};
</file>

<file path="src/data/beginnerData.js">
export const beginner = {
  level: 'Beginner',
  description: 'Foundation grammar topics for beginners',
  topics: {
    // Topic 1: Present Simple
    presentSimple: {
      id: 'present_simple',
      title: 'Present Simple Tense',
      difficulty: 'Beginner',
      icon: '⏰',
      description: 'Learn how to form and use the simple present tense',
      lessons: [
        {
          lessonId: 'ps_001',
          title: 'Introduction to Present Simple',
          duration: '8 mins',
          content: `
            The Present Simple tense is used to:
            - Describe habits and routines
            - State facts and truths
            - Express regular actions
           
            Affirmative form: Subject + Base verb (+ s/es)
            Example: I play football. She plays football.
           
            Negative form: Subject + do/does + not + Base verb
            Example: I don't play football. She doesn't play football.
           
            Question form: Do/Does + Subject + Base verb?
            Example: Do you play football? Does she play football?
          `,
          examples: [
            { example: 'I wake up at 7 AM every day.', explanation: 'Regular daily habit' },
            { example: 'She works in a bank.', explanation: 'Current occupation' },
            { example: 'Water boils at 100°C.', explanation: 'Scientific fact' },
            { example: 'They go to school on weekdays.', explanation: 'Routine activity' },
          ],
        },
        {
          lessonId: 'ps_002',
          title: 'Present Simple - Affirmative & Negative',
          duration: '10 mins',
          content: `
            Rules for adding -s or -es:
           
            1. Regular verbs: Add -s
               play → plays, work → works
           
            2. Verbs ending in -ch, -sh, -x, -z, -o: Add -es
               watch → watches, push → pushes, go → goes
           
            3. Verbs ending in consonant + y: Change y to i, add -es
               study → studies, cry → cries
           
            Common irregular verbs:
            be → is/am/are
            have → has
            do → does
            go → goes
          `,
          examples: [
            { example: 'She studies French.', explanation: 'consonant + y → ies' },
            { example: 'He watches TV.', explanation: 'ends in -ch → add -es' },
            { example: 'I don\'t like spicy food.', explanation: 'Negative: don\'t + base verb' },
            { example: 'They don\'t work on Sundays.', explanation: 'Plural negative' },
          ],
        },
        {
          lessonId: 'ps_003',
          title: 'Present Simple - Questions',
          duration: '9 mins',
          content: `
            Question Formation:
           
            With do/does:
            Do you like coffee? → Yes, I do. / No, I don't.
            Does he like coffee? → Yes, he does. / No, he doesn't.
           
            Question words:
            What do you do? - What is your occupation?
            Where do you live? - Where is your home?
            Why does she study? - For what reason?
            How often do they visit? - Frequency of visits
            Who plays football? - Which person?
          `,
          examples: [
            { example: 'Do they play tennis?', explanation: 'Yes/No question with do' },
            { example: 'Does your mother cook?', explanation: 'Yes/No question with does' },
            { example: 'What time do you wake up?', explanation: 'Information question' },
            { example: 'How often does she exercise?', explanation: 'Frequency question' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'ps_ex_001',
          type: 'multiple_choice',
          difficulty: 'Easy',
          question: 'I _____ to school every day.',
          options: [
            { text: 'go', isCorrect: true, explanation: 'Base verb form for first person' },
            { text: 'goes', isCorrect: false, explanation: 'Used only with third person singular (he/she/it)' },
            { text: 'going', isCorrect: false, explanation: 'This is present progressive, not present simple' },
            { text: 'am go', isCorrect: false, explanation: 'Incorrect grammar' },
          ],
        },
        {
          exerciseId: 'ps_ex_002',
          type: 'multiple_choice',
          difficulty: 'Easy',
          question: 'She _____ like vegetables.',
          options: [
            { text: 'does not', isCorrect: true, explanation: 'Correct negative form' },
            { text: 'do not', isCorrect: false, explanation: 'Used with plural subjects' },
            { text: 'not like', isCorrect: false, explanation: 'Incomplete negative' },
            { text: 'is not', isCorrect: false, explanation: 'Wrong auxiliary verb' },
          ],
        },
        {
          exerciseId: 'ps_ex_003',
          type: 'fill_blank',
          difficulty: 'Medium',
          question: 'My brother _____ (work) in a hospital.',
          correctAnswer: 'works',
          hints: ['Think about third person singular', 'Add -s to the verb'],
          explanation: 'With third person singular subject (he/she/it), add -s to the base verb',
        },
        {
          exerciseId: 'ps_ex_004',
          type: 'multiple_choice',
          difficulty: 'Medium',
          question: 'What time _____ you finish work?',
          options: [
            { text: 'do', isCorrect: true, explanation: 'Question form with do' },
            { text: 'does', isCorrect: false, explanation: 'Does is used with he/she/it' },
            { text: 'are', isCorrect: false, explanation: 'Wrong auxiliary' },
            { text: 'will', isCorrect: false, explanation: 'This is for future tense' },
          ],
        },
        {
          exerciseId: 'ps_ex_005',
          type: 'fill_blank',
          difficulty: 'Hard',
          question: 'They _____ (not/watch) TV during dinner.',
          correctAnswer: 'don\'t watch',
          hints: ['Use do/does for negative', 'Remember plural subjects use do'],
          explanation: 'Plural subjects use "don\'t" + base verb in negative form',
        },
      ],
      vocabulary: [
        { word: 'habit', meaning: 'A regular or repeated behavior', example: 'Reading is my daily habit.' },
        { word: 'routine', meaning: 'A set of regular activities', example: 'Morning routine includes breakfast.' },
        { word: 'frequency', meaning: 'How often something happens', example: 'How is the frequency of your exercise?' },
        { word: 'occur', meaning: 'To happen', example: 'This problem occurs frequently.' },
      ],
    },
    // Topic 2: Present Continuous
    presentContinuous: {
      id: 'present_continuous',
      title: 'Present Continuous Tense',
      difficulty: 'Beginner',
      icon: '🔄',
      description: 'Learn actions happening right now',
      lessons: [
        {
          lessonId: 'pc_001',
          title: 'Introduction to Present Continuous',
          duration: '8 mins',
          content: `
            The Present Continuous (Present Progressive) is used for:
            - Actions happening RIGHT NOW
            - Temporary situations
            - Actions in progress
           
            Form: Subject + am/is/are + verb-ing
           
            I am reading
            You are reading
            He/She/It is reading
            We are reading
            They are reading
           
            Negative: Subject + am/is/are + NOT + verb-ing
            Positive: Am/Is/Are + Subject + verb-ing?
          `,
          examples: [
            { example: 'I am studying English right now.', explanation: 'Action in progress now' },
            { example: 'She is playing tennis at the moment.', explanation: 'Happening currently' },
            { example: 'They are not watching the movie.', explanation: 'Negative form' },
            { example: 'Is he sleeping?', explanation: 'Question form' },
          ],
        },
        {
          lessonId: 'pc_002',
          title: 'Verb-ing Forms & Spelling Rules',
          duration: '10 mins',
          content: `
            Spelling rules for -ing:
           
            1. Regular: Add -ing
               play → playing, read → reading
           
            2. Verb ends in -e: Remove -e, add -ing
               dance → dancing, write → writing
           
            3. Verb ends in consonant + vowel + consonant (CVC):
               Double the consonant, add -ing
               run → running, sit → sitting
               Exception: Single syllable only if stressed
           
            4. Verb ends in -ie: Change to -ying
               lie → lying, die → dying
          `,
          examples: [
            { example: 'run → running', explanation: 'Double consonant rule (CVC)' },
            { example: 'make → making', explanation: 'Remove silent e' },
            { example: 'work → working', explanation: 'No doubling needed' },
            { example: 'swim → swimming', explanation: 'Double m rule' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'pc_ex_001',
          type: 'multiple_choice',
          difficulty: 'Easy',
          question: 'She _____ TV right now.',
          options: [
            { text: 'is watching', isCorrect: true, explanation: 'Correct present continuous form' },
            { text: 'watches', isCorrect: false, explanation: 'This is simple present' },
            { text: 'is watch', isCorrect: false, explanation: 'Missing -ing' },
            { text: 'are watching', isCorrect: false, explanation: 'Wrong form of be' },
          ],
        },
        {
          exerciseId: 'pc_ex_002',
          type: 'fill_blank',
          difficulty: 'Medium',
          question: 'They are _____ (swim) in the pool.',
          correctAnswer: 'swimming',
          hints: ['Remember the CVC rule', 'Double the m'],
          explanation: 'swim → swimming (double the final consonant before adding -ing)',
        },
      ],
      vocabulary: [
        { word: 'temporary', meaning: 'Lasting for a short time', example: 'This is a temporary job.' },
        { word: 'progress', meaning: 'Movement towards completion', example: 'Work in progress.' },
      ],
    },
    // Topic 3: Past Simple
    pastSimple: {
      id: 'past_simple',
      title: 'Past Simple Tense',
      difficulty: 'Beginner',
      icon: '⏳',
      description: 'Talk about completed past actions',
      lessons: [
        {
          lessonId: 'ps_past_001',
          title: 'Introduction to Past Simple',
          duration: '9 mins',
          content: `
            Used for:
            - Completed actions in the past
            - Series of past events
            - Past facts and habits
           
            Regular verbs: Base verb + -ed
            I played, she worked, they studied
           
            Irregular verbs: Must be memorized
            go → went, eat → ate, see → saw, buy → bought
           
            Form:
            Affirmative: Subject + verb-ed (or irregular)
            Negative: Subject + did + not + base verb
            Question: Did + Subject + base verb?
          `,
          examples: [
            { example: 'I played football yesterday.', explanation: 'Regular past simple' },
            { example: 'She went to Paris last month.', explanation: 'Irregular verb' },
            { example: 'They did not come to the party.', explanation: 'Negative past' },
            { example: 'Did you see the movie?', explanation: 'Question form' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'ps_past_ex_001',
          type: 'multiple_choice',
          difficulty: 'Easy',
          question: 'Last weekend, I _____ to the beach.',
          options: [
            { text: 'went', isCorrect: true, explanation: 'Irregular past of go' },
            { text: 'go', isCorrect: false, explanation: 'This is present tense' },
            { text: 'going', isCorrect: false, explanation: 'This is present continuous' },
            { text: 'gone', isCorrect: false, explanation: 'This is past participle' },
          ],
        },
      ],
      vocabulary: [
        { word: 'completed', meaning: 'Finished', example: 'The project is completed.' },
        { word: 'yesterday', meaning: 'The day before today', example: 'I saw him yesterday.' },
      ],
    },
    // Topic 4: Future Simple (will)
    futureSimple: {
      id: 'future_simple',
      title: 'Future Simple - Will',
      difficulty: 'Beginner',
      icon: '🔮',
      description: 'Talk about future actions and predictions',
      lessons: [
        {
          lessonId: 'fs_001',
          title: 'Introduction to Future Simple',
          duration: '8 mins',
          content: `
            Will is used for:
            - Predictions about the future
            - Decisions made at the moment
            - Promises and offers
            - General truths about the future
           
            Form: Subject + will + base verb
            I will go, she will study, they will help
           
            Negative: Subject + will + not + base verb
            I will not go (I won't go)
           
            Question: Will + Subject + base verb?
            Will you help me?
          `,
          examples: [
            { example: 'It will rain tomorrow.', explanation: 'Prediction' },
            { example: 'I will call you later.', explanation: 'Decision' },
            { example: 'She won\'t forget you.', explanation: 'Promise/negative' },
            { example: 'Will they arrive on time?', explanation: 'Question' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'fs_ex_001',
          type: 'multiple_choice',
          difficulty: 'Easy',
          question: 'I _____ you tomorrow.',
          options: [
            { text: 'will see', isCorrect: true, explanation: 'Future simple with will' },
            { text: 'see', isCorrect: false, explanation: 'This is present simple' },
            { text: 'saw', isCorrect: false, explanation: 'This is past simple' },
            { text: 'am seeing', isCorrect: false, explanation: 'This is present continuous' },
          ],
        },
      ],
    },
  },
};
</file>

<file path="src/data/exams/exam13.js">
export const EXAM13_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 13 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài về quản lý dự án tiếp thị kỹ thuật số.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa John và Trang về quản lý dự án tiếp thị kỹ thuật số. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "John: Trang, I've reviewed the digital marketing campaign proposal. The strategy looks comprehensive, but I'm concerned about the budget allocation. Are we prioritizing the right channels?\nTrang: We've analyzed market trends over the past six months, and social media advertising has generated the highest ROI. However, we should also invest in content marketing to build long-term brand authority.\nJohn: That makes sense. What about the timeline? Can we launch all components simultaneously?\nTrang: The social media campaign can start immediately, but email marketing and SEO optimization will require two weeks of preparation. We've already engaged a content team to accelerate the process.\nJohn: Good. How are we measuring success? Do we have clear KPIs?\nTrang: Absolutely. We've defined metrics including engagement rates, conversion rates, traffic growth, and customer acquisition cost. We'll monitor these weekly and adjust the strategy as needed.\nJohn: Excellent. What about resource allocation? Do we need additional team members?\nTrang: We'll need a project coordinator to manage timelines and a data analyst to track metrics. We can onboard these roles immediately if approved.",
      questions: [
        {
          id: 1,
          options: [
            "The strategy is very simple.",
            "The strategy looks comprehensive but John has budget concerns.",
            "John approves all aspects without questions.",
            "The budget allocation is not important."
          ],
          correct: 1,
          explanation: "John nói: 'The strategy looks comprehensive, but I'm concerned about the budget allocation.' (Chiến lược trông toàn diện, nhưng tôi lo lắng về phân bổ ngân sách). Đáp án đúng là (B). Ngữ pháp: 'Looks + adjective' (comprehensive) + 'but' nối ý đối lập. Present Continuous (concerned about). Collocation: 'budget allocation', 'digital marketing'. Kỹ năng nghe: Xác định mối quan tâm chính."
        },
        {
          id: 2,
          options: [
            "Market trends were analyzed last month.",
            "Social media hasn't generated significant ROI.",
            "Market trends have been analyzed over the past six months.",
            "E-mail marketing is the priority."
          ],
          correct: 2,
          explanation: "Trang nói: 'We've analyzed market trends over the past six months.' (Chúng tôi đã phân tích xu hướng thị trường trong sáu tháng qua). Đáp án đúng là (C). Ngữ pháp: Present Perfect (have analyzed) + time period (over the past six months). Collocation: 'market trends', 'analyze'. Kỹ năng nghe: Xác định khoảng thời gian."
        },
        {
          id: 3,
          options: [
            "Email marketing will start immediately.",
            "Both campaigns can launch simultaneously.",
            "Email marketing will require preparation time.",
            "SEO optimization is not needed."
          ],
          correct: 2,
          explanation: "Trang nói: 'email marketing and SEO optimization will require two weeks of preparation.' (tiếp thị email và tối ưu hóa SEO sẽ yêu cầu hai tuần chuẩn bị). Đáp án đúng là (C). Ngữ pháp: Future Simple (will require) + time period (two weeks). Collocation: 'preparation time', 'SEO optimization'. Kỹ năng nghe: Xác định lịch trình."
        },
        {
          id: 4,
          options: [
            "No KPIs have been defined.",
            "Metrics include engagement and conversion rates.",
            "Success will not be measured.",
            "Metrics will be monitored monthly."
          ],
          correct: 1,
          explanation: "Trang nói: 'We've defined metrics including engagement rates, conversion rates, traffic growth, and customer acquisition cost.' (Chúng tôi đã xác định các chỉ số bao gồm tỷ lệ tương tác, tỷ lệ chuyển đổi, tăng trưởng lưu lượng). Đáp án đúng là (B). Ngữ pháp: Present Perfect (have defined) + V-ing list. Collocation: 'define metrics', 'KPI'. Kỹ năng nghe: Xác định chỉ số đo lường."
        },
        {
          id: 5,
          options: [
            "No additional staff is needed.",
            "They need only a project coordinator.",
            "A project coordinator and data analyst are needed.",
            "Additional teams are not required."
          ],
          correct: 2,
          explanation: "Trang nói: 'We'll need a project coordinator to manage timelines and a data analyst to track metrics.' (Chúng tôi sẽ cần một điều phối viên dự án để quản lý thời gian biểu và một nhà phân tích dữ liệu để theo dõi chỉ số). Đáp án đúng là (C). Ngữ pháp: 'Need + object' + Infinitive of purpose (to manage, to track). Collocation: 'project coordinator', 'data analyst'. Kỹ năng nghe: Xác định nhu cầu nhân sự."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người về chương trình đào tạo nhân viên. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: At a human resources meeting.\nHR: We need to address the high turnover rate in the sales department. I propose implementing a comprehensive employee development program.\nTraining: I've designed a training curriculum that includes leadership development, technical skills, and soft skills training. The program runs for four weeks.\nSales Associate: How will this impact daily operations? We can't afford to lose productivity.\nTraining: We'll conduct training in rotating groups so that 50% of the team is always available. We can also offer online modules for flexibility.\nHR: What's the expected cost?\nTraining: The program costs $15,000 initially, but we expect a 40% reduction in turnover, which translates to significant cost savings within the first year.\nSales Associate: That's reasonable. When can we start?\nHR: We can launch the pilot program next month. Let's track retention metrics closely to measure success.",
      questions: [
        {
          id: 6,
          question: "What is the main issue being addressed?",
          options: [
            "Low sales revenue",
            "High turnover rate in sales",
            "Equipment problems",
            "Office relocation"
          ],
          correct: 1,
          explanation: "HR Director nói: 'We need to address the high turnover rate in the sales department.' (Chúng ta cần giải quyết tỷ lệ chuyển công việc cao trong bộ phận bán hàng). Đáp án đúng là (B). Ngữ pháp: Present need (need to address) + noun (turnover rate). Collocation: 'turnover rate', 'sales department'. Kỹ năng nghe: Xác định vấn đề chính."
        },
        {
          id: 7,
          question: "How long is the training program?",
          options: [
            "Two weeks",
            "Three weeks",
            "Four weeks",
            "Six weeks"
          ],
          correct: 2,
          explanation: "Training Specialist nói: 'The program runs for four weeks.' (Chương trình chạy trong bốn tuần). Đáp án đúng là (C). Ngữ pháp: Present Simple (runs) chỉ thời gian khóa học. Collocation: 'training program', 'four weeks'. Kỹ năng nghe: Xác định khoảng thời gian."
        },
        {
          id: 8,
          question: "What training components are included?",
          options: [
            "Only technical skills",
            "Only leadership development",
            "Leadership, technical skills, and soft skills",
            "Product sales training only"
          ],
          correct: 2,
          explanation: "Training Specialist nói: 'I've designed a training curriculum that includes leadership development, technical skills, and soft skills training.' (Tôi đã thiết kế một chương trình đào tạo bao gồm phát triển lãnh đạo, kỹ năng kỹ thuật, và đào tạo kỹ năng mềm). Đáp án đúng là (C). Ngữ pháp: Present Perfect (have designed) + list of items. Collocation: 'leadership development', 'soft skills'. Kỹ năng nghe: Xác định nội dung khóa học."
        },
        {
          id: 9,
          question: "What operational approach will be used?",
          options: [
            "Train all staff at once",
            "Conduct training in rotating groups with online options",
            "Only online training",
            "No flexibility in scheduling"
          ],
          correct: 1,
          explanation: "Training Specialist nói: 'We'll conduct training in rotating groups so that 50% of the team is always available. We can also offer online modules for flexibility.' (Chúng tôi sẽ tiến hành đào tạo theo nhóm xoay vòng để 50% đội luôn có sẵn. Chúng tôi cũng có thể cung cấp các mô-đun trực tuyến để linh hoạt). Đáp án đúng là (B). Ngữ pháp: Future Simple (will conduct) + giới từ (so that). Collocation: 'rotating groups', 'online modules'. Kỹ năng nghe: Xác định chiến lược triển khai."
        },
        {
          id: 10,
          question: "What is the expected turnover reduction?",
          options: [
            "20%",
            "30%",
            "40%",
            "50%"
          ],
          correct: 2,
          explanation: "Training Specialist nói: 'we expect a 40% reduction in turnover.' (chúng tôi mong đợi giảm 40% trong chuyển công việc). Đáp án đúng là (C). Ngữ pháp: Present Simple (expect) + percentage. Collocation: 'turnover reduction', 'cost savings'. Kỹ năng nghe: Xác định con số."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại về xu hướng công nghệ tài chính. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "FinTech Analyst: Welcome to today's briefing on financial technology trends. The fintech industry has experienced explosive growth, with investment reaching $210 billion globally in 2023. Blockchain technology is revolutionizing payment systems and enhancing security. Artificial intelligence is being deployed to improve customer service through chatbots and personalized financial recommendations. Cryptocurrency adoption continues to increase, though regulatory challenges remain significant. Mobile banking has transformed consumer behavior, with 85% of users now preferring mobile transactions. Cybersecurity has become paramount as digital threats evolve constantly. Companies that invest in robust security infrastructure will gain competitive advantage. The future of finance is undeniably digital, and institutions must adapt quickly to survive.",
      questions: [
        {
          id: 11,
          question: "What was the global fintech investment in 2023?",
          options: [
            "(A) $100 billion",
            "(B) $150 billion",
            "(C) $210 billion",
            "(D) $300 billion"
          ],
          correct: 2,
          explanation: "FinTech Analyst: 'investment reaching $210 billion globally in 2023.' (đầu tư đạt 210 tỷ đô la trên toàn cầu vào năm 2023). Đáp án đúng là (C). Ngữ pháp: 'Reaching' + amount. Collocation: 'investment reaching', 'global'. Kỹ năng nghe: Xác định con số tài chính."
        },
        {
          id: 12,
          question: "What technology is revolutionizing payment systems?",
          options: [
            "(A) Artificial intelligence",
            "(B) Cloud computing",
            "(C) Blockchain technology",
            "(D) Mobile applications"
          ],
          correct: 2,
          explanation: "FinTech Analyst: 'Blockchain technology is revolutionizing payment systems.' (Công nghệ blockchain đang cách mạng hóa các hệ thống thanh toán). Đáp án đúng là (C). Ngữ pháp: Present Continuous (is revolutionizing). Collocation: 'blockchain technology', 'payment systems'. Kỹ năng nghe: Xác định công nghệ."
        },
        {
          id: 13,
          question: "What percentage of users prefer mobile transactions?",
          options: [
            "(A) 65%",
            "(B) 75%",
            "(C) 85%",
            "(D) 95%"
          ],
          correct: 2,
          explanation: "FinTech Analyst: '85% of users now preferring mobile transactions.' (85% người dùng hiện ưu tiên các giao dịch di động). Đáp án đúng là (C). Ngữ pháp: Percentage + verb (preferring). Collocation: 'mobile transactions', 'users'. Kỹ năng nghe: Xác định tỷ lệ."
        },
        {
          id: 14,
          question: "What applications is AI being deployed for?",
          options: [
            "(A) Only payment processing",
            "(B) Chatbots and personalized recommendations",
            "(C) Regulatory compliance only",
            "(D) Cybersecurity threats"
          ],
          correct: 1,
          explanation: "FinTech Analyst: 'Artificial intelligence is being deployed to improve customer service through chatbots and personalized financial recommendations.' (AI đang được triển khai để cải thiện dịch vụ khách hàng thông qua chatbot và khuyến nghị tài chính được cá nhân hóa). Đáp án đúng là (B). Ngữ pháp: Present Passive (is being deployed) + Infinitive of purpose (to improve). Collocation: 'AI deployed', 'chatbots'. Kỹ năng nghe: Xác định ứng dụng."
        },
        {
          id: 15,
          question: "What is critical for competitive advantage according to the analyst?",
          options: [
            "(A) Higher fees",
            "(B) Robust security infrastructure",
            "(C) Cryptocurrency adoption",
            "(D) Regulatory compliance only"
          ],
          correct: 1,
          explanation: "FinTech Analyst: 'Companies that invest in robust security infrastructure will gain competitive advantage.' (Các công ty đầu tư vào cơ sở hạ tầng bảo mật mạnh mẽ sẽ đạt được lợi thế cạnh tranh). Đáp án đúng là (B). Ngữ pháp: Relative clause (that invest) + Future Simple (will gain). Collocation: 'security infrastructure', 'competitive advantage'. Kỹ năng nghe: Xác định yếu tố quan trọng."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng giữa giáo viên và học sinh về dự án học kỳ. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Professor: Hi Sarah, I wanted to discuss your semester project proposal. Your research topic on sustainable urban planning is excellent. However, I have some concerns about the scope.\nSarah: Thank you, Professor. What specifically concerns you?\nProfessor: The proposal covers too much ground. You've included environmental impact, social implications, and economic factors. For a semester project, that's quite ambitious.\nSarah: I understand. How would you suggest I refine the scope?\nProfessor: I'd recommend focusing on one city or region and examining the environmental impact in detail. You could still touch on social and economic factors but keep them secondary.\nSarah: That makes sense. I've already gathered preliminary data from three cities. Could I focus on one city in depth?\nProfessor: Absolutely. That's a much better approach. You'll have time to conduct meaningful research. When do you plan to complete your initial analysis?\nSarah: I aim to finish by the end of month. Then I'll conduct interviews and compile my findings.\nProfessor: Good timeline. Submit your refined proposal by next Friday. I'll provide detailed feedback before you begin the research phase.",
      questions: [
        {
          id: 16,
          question: "What is Sarah's research topic?",
          options: [
            "(A) Urban architecture design",
            "(B) Sustainable urban planning",
            "(C) Social policy development",
            "(D) Economic development"
          ],
          correct: 1,
          explanation: "Professor: 'Your research topic on sustainable urban planning is excellent.' (Chủ đề nghiên cứu của bạn về quy hoạch đô thị bền vững rất tuyệt vời). Đáp án đúng là (B). Ngữ pháp: Noun phrase (research topic on...). Collocation: 'research topic', 'sustainable planning'. Kỹ năng nghe: Xác định chủ đề."
        },
        {
          id: 17,
          question: "What is Professor's main concern?",
          options: [
            "(A) The topic is not interesting",
            "(B) Sarah lacks research experience",
            "(C) The proposal scope is too broad",
            "(D) The timeline is too short"
          ],
          correct: 2,
          explanation: "Professor: 'The proposal covers too much ground...that's quite ambitious.' (Đề xuất bao quát quá nhiều...khá tham vọng). Đáp án đúng là (C). Ngữ pháp: Present Simple (covers) chỉ tình trạng. Collocation: 'scope too broad', 'ambitious'. Kỹ năng nghe: Xác định lo ngại."
        },
        {
          id: 18,
          question: "How many cities has Sarah already gathered data from?",
          options: [
            "(A) One city",
            "(B) Two cities",
            "(C) Three cities",
            "(D) Four cities"
          ],
          correct: 2,
          explanation: "Sarah: 'I've already gathered preliminary data from three cities.' (Tôi đã thu thập dữ liệu sơ bộ từ ba thành phố). Đáp án đúng là (C). Ngữ pháp: Present Perfect (have gathered) + number. Collocation: 'gathered data', 'preliminary'. Kỹ năng nghe: Xác định con số."
        },
        {
          id: 19,
          question: "When does Sarah aim to complete initial analysis?",
          options: [
            "(A) By next week",
            "(B) By mid-month",
            "(C) By end of month",
            "(D) By next quarter"
          ],
          correct: 2,
          explanation: "Sarah: 'I aim to finish by the end of month.' (Tôi hướng đến kết thúc vào cuối tháng). Đáp án đúng là (C). Ngữ pháp: 'Aim to + V' + time expression (by end of). Collocation: 'finish analysis', 'end of month'. Kỹ năng nghe: Xác định thời gian."
        },
        {
          id: 20,
          question: "When should Sarah submit her refined proposal?",
          options: [
            "(A) By Wednesday",
            "(B) By next Friday",
            "(C) By next week Monday",
            "(D) By month-end"
          ],
          correct: 1,
          explanation: "Professor: 'Submit your refined proposal by next Friday.' (Gửi đề xuất được tinh chỉnh vào thứ Sáu tuần tới). Đáp án đúng là (B). Ngữ pháp: Imperative (Submit) + time (by next Friday). Collocation: 'submit proposal', 'refined'. Kỹ năng nghe: Xác định thời hạn."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The organization __________ its commitment to environmental conservation by implementing renewable energy systems across all facilities.",
          options: ["demonstrate", "demonstrates", "demonstrated", "demonstrating"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'demonstrates' vì Present Simple chỉ hành động chung hiện tại. Ngữ pháp: Subject singular (organization) + động từ Present Simple. Collocation: 'demonstrate commitment', 'renewable energy'. Từ vựng: 'demonstrate' là nguyên thể; 'demonstrated' là quá khứ; 'demonstrating' là V-ing."
        },
        {
          id: 22,
          question: "__________ the complexity of the project, the team successfully delivered the final product three weeks ahead of schedule.",
          options: ["Despite", "Because of", "Due to", "As a result of"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'Despite' vì chỉ sự nhượng bộ (complexity nhưng vẫn thành công). Ngữ pháp: 'Despite + noun' chỉ tình huống trái ngược. Collocation: 'despite complexity', 'successfully delivered'. Từ vựng: 'Because of', 'Due to', 'As a result of' chỉ nguyên nhân."
        },
        {
          id: 23,
          question: "The new software application __________ to integrate seamlessly with existing systems is now available for download.",
          options: ["design", "designed", "designing", "designs"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'designed' vì Past Participle bổ nghĩa danh từ 'application'. Ngữ pháp: Relative clause rút gọn (which is designed to integrate). Collocation: 'designed to integrate', 'software application'. Từ vựng: 'design' là nguyên thể; 'designing' là V-ing; 'designs' là hiện tại đơn."
        },
        {
          id: 24,
          question: "The committee has __________ the proposal for the infrastructure project with several recommendations for improvement.",
          options: ["approve", "approving", "approved", "approves"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'approved' vì Present Perfect (has + V3). Ngữ pháp: 'Has approved' chỉ hành động hoàn thành liên quan hiện tại. Collocation: 'approved proposal', 'infrastructure project'. Từ vựng: 'approve' là nguyên thể; 'approving' là V-ing; 'approves' là hiện tại đơn."
        },
        {
          id: 25,
          question: "Rather __________ reducing staff, the company decided to invest in employee retraining and skill development programs.",
          options: ["than", "then", "when", "while"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'than' vì 'Rather than + V-ing' là cụm giới từ cố định. Ngữ pháp: 'Rather than reducing' = 'thay vì giảm'. Collocation: 'rather than reducing', 'staff'. Từ vựng: 'then' là trạng từ; 'when' là liên từ; 'while' là liên từ."
        },
        {
          id: 26,
          question: "The research team __________ groundbreaking discoveries in medical science, revolutionizing treatment approaches for chronic diseases.",
          options: ["has made", "make", "making", "makes"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'has made' vì Present Perfect chỉ kết quả hiện tại của hành động trong quá khứ. Ngữ pháp: 'Has made' + object (discoveries). Collocation: 'made discoveries', 'groundbreaking'. Từ vựng: 'make' là nguyên thể; 'making' là V-ing; 'makes' là hiện tại đơn."
        },
        {
          id: 27,
          question: "The facility __________ to accommodate up to 5,000 visitors daily has recently opened to the public.",
          options: ["design", "designed", "designing", "designs"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'designed' vì Past Participle bổ nghĩa danh từ 'facility'. Ngữ pháp: Relative clause rút gọn (which is designed to accommodate). Collocation: 'designed to accommodate', 'visitors'. Từ vựng: 'design' là nguyên thể; 'designing' là V-ing; 'designs' là hiện tại đơn."
        },
        {
          id: 28,
          question: "Upon __________ all regulatory requirements, the pharmaceutical company received approval to launch the new drug.",
          options: ["meet", "meeting", "met", "meets"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'meeting' vì 'Upon + V-ing' là cụm giới từ cố định. Ngữ pháp: 'Upon meeting' = 'khi thỏa mãn'. Collocation: 'meeting requirements', 'regulatory'. Từ vựng: 'meet' là nguyên thể; 'met' là quá khứ; 'meets' là hiện tại đơn."
        },
        {
          id: 29,
          question: "The policy __________ that all employees receive annual professional development training is now mandatory across all departments.",
          options: ["require", "requiring", "required", "requires"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'requires' vì Present Simple chỉ quy tắc hiện hành. Ngữ pháp: 'The policy requires that' + clause báo cáo. Collocation: 'policy requires', 'professional development'. Từ vựng: 'require' là nguyên thể; 'requiring' là V-ing; 'required' là quá khứ."
        },
        {
          id: 30,
          question: "The department __________ to maintain high standards of quality control will implement new testing procedures next quarter.",
          options: ["commit", "committing", "committed", "commits"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'committed' vì Past Participle bổ nghĩa danh từ 'department'. Ngữ pháp: Relative clause rút gọn (which is committed to maintain). Collocation: 'committed to maintain', 'quality control'. Từ vựng: 'commit' là nguyên thể; 'committing' là V-ing; 'commits' là hiện tại đơn."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D). Câu 31-36: Điền từ thích hợp. Câu 37-40: Đọc hiểu.",
      type: "reading",
      text: `To: All Department Heads
From: Executive Vice President Chen
Subject: Strategic Initiative for Digital Transformation
Dear Leadership Team,

We are announcing a company-wide initiative focused on accelerating our digital transformation. This strategic program has been designed (31) modernize our operations and enhance customer experience across all touchpoints. The initiative will require commitment from every department, and we are confident this transformation will position us as industry leaders.

A dedicated Digital Transformation Office will oversee the initiative and (32) cross-functional collaboration among departments. To ensure success, we will (33) external consultants specializing in digital innovation to guide our implementation strategy. Budget allocation has been approved for technology investments and staff training.

The timeline is aggressive but achievable. We will launch the first phase in Q2, with (34) completion expected by year-end. All employees will receive comprehensive training to support the transition. We understand that change management is critical, (35) the long-term benefits significantly outweigh any short-term disruptions.

Department heads must designate a digital transformation lead to coordinate efforts and ensure alignment with corporate objectives. These leads will meet monthly to track progress and address implementation challenges. We encourage innovation and welcome constructive feedback throughout the process. For questions or to (36) concerns, please contact the Digital Transformation Office.

This initiative represents a pivotal moment for our organization. Success requires collaboration, flexibility, and commitment from all levels. Together, we will transform our company for sustained growth.

Best regards,
Executive Vice President Chen
Chief Strategy Officer
Global Innovation Group`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "...designed (31) modernize our operations...",
          options: ["to", "for", "in", "by"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'to' vì 'designed to + V' cấu trúc Infinitive of purpose. Ngữ pháp: 'Designed to modernize' chỉ mục đích thiết kế chương trình. Collocation: 'designed to modernize', 'operations'. Từ vựng: 'for' là giới từ khác; 'in' là giới từ vị trí; 'by' là giới từ chỉ phương tiện."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "...will oversee the initiative and (32) cross-functional collaboration...",
          options: ["encourage", "encouraging", "encouraged", "encourages"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'encourage' vì Future Simple (will + V nguyên thể) nối song song với 'will oversee'. Ngữ pháp: 'Will oversee and encourage' hai động từ song song. Collocation: 'encourage collaboration', 'cross-functional'. Từ vựng: 'encouraging' là V-ing; 'encouraged' là quá khứ; 'encourages' là hiện tại đơn."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...we will (33) external consultants specializing in digital innovation...",
          options: ["engage", "engaging", "engaged", "engages"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'engage' vì Future Simple (will + V nguyên thể). Ngữ pháp: 'Will engage' + object (consultants). Collocation: 'engage consultants', 'digital innovation'. Từ vựng: 'engaging' là V-ing; 'engaged' là quá khứ phân từ; 'engages' là hiện tại đơn."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "...Q2, with (34) completion expected by year-end.",
          options: ["full", "initial", "partial", "gradual"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'full' vì 'full completion' chỉ hoàn thành toàn bộ. Ngữ pháp: Adjective + noun (full completion). Collocation: 'full completion', 'by year-end'. Từ vựng: 'initial' chỉ giai đoạn đầu; 'partial' chỉ một phần; 'gradual' chỉ dần dần."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "...critical, (35) the long-term benefits outweigh...",
          options: ["but", "so", "because", "although"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'but' vì nối hai mệnh đề đối lập: khó khăn (change management critical) và lợi ích (benefits outweigh). Ngữ pháp: Coordinating conjunction 'but'. Collocation: 'critical, but benefits'. Từ vựng: 'so' chỉ kết quả; 'because' chỉ nguyên nhân; 'although' là subordinating."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "...or to (36) concerns, please contact...",
          options: ["address", "addressing", "addressed", "addresses"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'address' vì Infinitive (to + V) sau 'welcome'. Ngữ pháp: 'Welcome to address concerns' = 'chào đón để giải quyết lo ngại'. Collocation: 'address concerns', 'contact office'. Từ vựng: 'addressing' là V-ing; 'addressed' là quá khứ; 'addresses' là hiện tại đơn."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - What is the primary focus of the strategic initiative?",
          options: [
            "Cost reduction only",
            "Digital transformation and modernization",
            "Employee downsizing",
            "Product line expansion"
          ],
          correct: 1,
          explanation: "Email nêu: 'initiative focused on accelerating our digital transformation'. Ngữ pháp: Present Participle (focused) + giới từ (on). Collocation: 'digital transformation', 'modernize operations'. Kỹ năng đọc hiểu: Xác định tiêu điểm chính."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - When will the first phase launch?",
          options: [
            "Q1",
            "Q2",
            "Q3",
            "Q4"
          ],
          correct: 1,
          explanation: "Email nêu: 'We will launch the first phase in Q2'. Ngữ pháp: Future Simple (will launch) + time. Collocation: 'launch phase', 'Q2'. Kỹ năng đọc hiểu: Xác định lịch trình."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - What will department heads need to designate?",
          options: [
            "New employees",
            "Budget managers",
            "A digital transformation lead",
            "Marketing coordinators"
          ],
          correct: 2,
          explanation: "Email nêu: 'Department heads must designate a digital transformation lead'. Ngữ pháp: 'Must designate' modal chỉ yêu cầu bắt buộc. Collocation: 'designate lead', 'transformation'. Kỹ năng đọc hiểu: Xác định trách nhiệm."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - How often will transformation leads meet?",
          options: [
            "Weekly",
            "Bi-weekly",
            "Monthly",
            "Quarterly"
          ],
          correct: 2,
          explanation: "Email nêu: 'These leads will meet monthly to track progress'. Ngữ pháp: Future Simple (will meet) + adverb of frequency (monthly). Collocation: 'meet monthly', 'track progress'. Kỹ năng đọc hiểu: Xác định tần suất cuộc họp."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**CloudTech Solutions Advertisement**
Enterprise Cloud Infrastructure for Modern Business
Transform your IT infrastructure with our scalable, secure cloud solutions. We serve Fortune 500 companies and innovative startups worldwide.
**Our Services:**
1. **Cloud Migration Services** – Seamlessly migrate your legacy systems to cloud platforms. Minimal downtime, maximum efficiency. Average migration time: 6-8 weeks.
2. **Infrastructure Management** – 24/7 monitoring, maintenance, and optimization of your cloud infrastructure by certified engineers.
3. **Security and Compliance** – ISO 27001 certified, SOC 2 compliant. Advanced encryption and multi-layer security protocols.
4. **Disaster Recovery Solutions** – Comprehensive backup and recovery systems with 99.99% uptime guarantee.
Special Offer: New enterprise clients receive 20% discount on first year services. Free infrastructure assessment valued at $5,000. Contact: info@cloudtech.com | 1-888-CLOUDTECH
---
**Email Message**
**To:** info@cloudtech.com
**From:** david.wilson@techcorp.com
**Date:** March 12, 2025
**Subject:** Cloud Migration and Infrastructure Consultation Request
Dear CloudTech Solutions Team,

I am the Chief Technology Officer at TechCorp International. We currently operate a hybrid infrastructure with 60% on-premises servers and 40% cloud-based systems. Our company is planning to transition fully to cloud infrastructure within the next 18 months.

I am interested in learning more about your cloud migration services, particularly your timeline and approach. Our organization has significant data storage needs—approximately 500TB of critical business data. What is your experience handling large-scale migrations of this magnitude?

Our primary concern is minimizing downtime during migration. We operate 24/7 and cannot afford significant interruptions. Can you work with our team during business hours and implement phase-based migration to ensure continuous operations?

Additionally, I would like information about your security certifications and disaster recovery capabilities. We require ISO 27001 certification and must maintain 99.99% uptime. Your advertisements mention these capabilities—could you provide detailed information about implementation and support?

Our current infrastructure costs are $200,000 monthly. If cloud solutions reduce costs by 30-35% as industry estimates suggest, what would be our estimated new monthly costs? Are there hidden fees or additional charges beyond the quoted price?

Finally, we are interested in your 24/7 infrastructure management service. How many dedicated engineers would be assigned to our account? What is the response time for critical incidents?

I look forward to discussing how CloudTech can support our digital transformation.

Best regards,
David Wilson
Chief Technology Officer
TechCorp International
david.wilson@techcorp.com
(555) 456-7890`,
      questions: [
        {
          id: 41,
          question: "What is the average migration time mentioned in the advertisement?",
          options: [
            "4-6 weeks",
            "6-8 weeks",
            "8-10 weeks",
            "10-12 weeks"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Average migration time: 6-8 weeks'. Ngữ pháp: Colon (:) giới thiệu con số. Collocation: 'migration time', 'weeks'. Kỹ năng đọc hiểu: Xác định thông tin từ quảng cáo."
        },
        {
          id: 42,
          question: "What is the uptime guarantee offered?",
          options: [
            "99%",
            "99.9%",
            "99.99%",
            "100%"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì '99.99% uptime guarantee'. Ngữ pháp: Percentage + noun (uptime). Collocation: 'uptime guarantee', 'disaster recovery'. Kỹ năng đọc hiểu: Xác định cam kết."
        },
        {
          id: 43,
          question: "What is David Wilson's job title?",
          options: [
            "IT Manager",
            "Chief Information Officer",
            "Chief Technology Officer",
            "Infrastructure Director"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I am the Chief Technology Officer'. Ngữ pháp: Present Simple (am). Collocation: 'Chief Technology Officer'. Kỹ năng đọc hiểu: Xác định vị trí."
        },
        {
          id: 44,
          question: "What is TechCorp's current cloud infrastructure percentage?",
          options: [
            "30% cloud-based",
            "40% cloud-based",
            "50% cloud-based",
            "60% cloud-based"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì '40% cloud-based systems'. Ngữ pháp: Percentage + noun. Collocation: 'cloud-based systems', 'hybrid infrastructure'. Kỹ năng đọc hiểu: Xác định con số."
        },
        {
          id: 45,
          question: "How much critical business data does TechCorp have?",
          options: [
            "300TB",
            "400TB",
            "500TB",
            "600TB"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'approximately 500TB of critical business data'. Ngữ pháp: 'Approximately' adverb + number. Collocation: 'business data', 'storage needs'. Kỹ năng đọc hiểu: Xác định khối lượng dữ liệu."
        },
        {
          id: 46,
          question: "What is TechCorp's current monthly infrastructure cost?",
          options: [
            "$150,000",
            "$175,000",
            "$200,000",
            "$250,000"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Our current infrastructure costs are $200,000 monthly'. Ngữ pháp: Present Simple (are) + amount. Collocation: 'infrastructure costs', 'monthly'. Kỹ năng đọc hiểu: Xác định chi phí."
        },
        {
          id: 47,
          question: "What is TechCorp's migration timeline?",
          options: [
            "6 months",
            "12 months",
            "18 months",
            "24 months"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'transition fully to cloud infrastructure within the next 18 months'. Ngữ pháp: 'Within' giới từ chỉ khoảng thời gian. Collocation: 'cloud migration', 'timeline'. Kỹ năng đọc hiểu: Xác định khoảng thời gian."
        },
        {
          id: 48,
          question: "What is TechCorp's primary migration concern?",
          options: [
            "High migration costs",
            "Data security",
            "Minimizing downtime during migration",
            "Finding qualified engineers"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Our primary concern is minimizing downtime during migration'. Ngữ pháp: 'Primary concern + be + V-ing'. Collocation: 'minimize downtime', 'migration'. Kỹ năng đọc hiểu: Xác định lo ngại chính."
        },
        {
          id: 49,
          question: "What special offer is mentioned for new enterprise clients?",
          options: [
            "15% discount",
            "20% discount",
            "25% discount",
            "30% discount"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'New enterprise clients receive 20% discount on first year services'. Ngữ pháp: Present Simple (receive) + percentage. Collocation: 'discount on services', 'first year'. Kỹ năng đọc hiểu: Xác định khuyến mãi."
        },
        {
          id: 50,
          question: "What is the value of the free infrastructure assessment?",
          options: [
            "$3,000",
            "$4,000",
            "$5,000",
            "$6,000"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Free infrastructure assessment valued at $5,000'. Ngữ pháp: Past Participle (valued) + amount. Collocation: 'infrastructure assessment', 'valued at'. Kỹ năng đọc hiểu: Xác định giá trị."
        }
      ]
    },
    part8: {
      title: "PART 8: Professional Message Thread",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn/email chuyên nghiệp về phát triển sản phẩm, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Product Lead (08:00): Team, we received critical feedback from beta testing. Users are experiencing performance issues with the mobile app. We need to address this urgently before the launch.

Engineering Manager (08:20): I've reviewed the test results. The app is consuming excessive memory on devices with less than 4GB RAM. This affects approximately 35% of our target market.

UI Designer (08:40): I noticed users are frustrated with the interface navigation. We should simplify the user flow. The current design has too many steps to reach key functions.

Product Lead (09:00): Good observations. We have two weeks until launch. Engineering, can you optimize the code to reduce memory consumption?

Engineering Manager (09:30): Yes, we can optimize the code. However, we'll need to reduce some features initially. Which features are critical for launch?

Product Lead (09:45): Let's prioritize core features only. Anything non-essential should be pushed to version 2.0. Can you have an optimized build ready by Friday?

Engineering Manager (10:00): Friday is tight, but possible. We'll need to work overtime. UI improvements might take longer.

UI Designer (10:20): I can have redesigned mockups by tomorrow. Then engineering can implement the changes incrementally.

Product Lead (10:35): Perfect. Let's prioritize performance over UI polish for launch. We can enhance the interface in updates. Engineering, confirm if Friday is achievable?

Engineering Manager (10:50): Confirmed. Friday deliverable is achievable with full team effort.

Product Lead (11:00): Excellent. We're back on track. Launch timeline is preserved. Great teamwork, everyone.`,
      questions: [
        {
          id: 51,
          question: "What is the main issue identified in beta testing?",
          options: [
            "Poor user interface design",
            "Mobile app performance issues",
            "Lack of features",
            "Security vulnerabilities"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Users are experiencing performance issues with the mobile app'. Ngữ pháp: Present Continuous (are experiencing). Collocation: 'performance issues', 'mobile app'. Kỹ năng đọc hiểu: Xác định vấn đề chính."
        },
        {
          id: 52,
          question: "What percentage of the target market is affected by memory issues?",
          options: [
            "20%",
            "25%",
            "35%",
            "40%"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'This affects approximately 35% of our target market'. Ngữ pháp: Present Simple (affects) + percentage. Collocation: 'target market', 'memory issues'. Kỹ năng đọc hiểu: Xác định con số."
        },
        {
          id: 53,
          question: "What device specification causes memory problems?",
          options: [
            "Less than 2GB RAM",
            "Less than 3GB RAM",
            "Less than 4GB RAM",
            "Less than 5GB RAM"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'devices with less than 4GB RAM'. Ngữ pháp: Comparative (less than) + amount. Collocation: 'memory consumption', 'RAM'. Kỹ năng đọc hiểu: Xác định thông số kỹ thuật."
        },
        {
          id: 54,
          question: "How long until the product launch?",
          options: [
            "One week",
            "Two weeks",
            "Three weeks",
            "Four weeks"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'We have two weeks until launch'. Ngữ pháp: Present Simple (have) + time period. Collocation: 'until launch', 'weeks'. Kỹ năng đọc hiểu: Xác định khoảng thời gian."
        },
        {
          id: 55,
          question: "What does the engineering manager propose to reduce memory consumption?",
          options: [
            "Reduce screen resolution",
            "Remove all animations",
            "Reduce some features initially",
            "Eliminate user accounts"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'We'll need to reduce some features initially'. Ngữ pháp: Future Simple (will need). Collocation: 'reduce features', 'memory optimization'. Kỹ năng đọc hiểu: Xác định giải pháp."
        },
        {
          id: 56,
          question: "When can the designer have mockups ready?",
          options: [
            "By today",
            "By tomorrow",
            "By Wednesday",
            "By Friday"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I can have redesigned mockups by tomorrow'. Ngữ pháp: Modal (can) + Future (have). Collocation: 'redesigned mockups', 'tomorrow'. Kỹ năng đọc hiểu: Xác định thời hạn."
        },
        {
          id: 57,
          question: "What is the deliverable deadline for engineering?",
          options: [
            "Wednesday",
            "Thursday",
            "Friday",
            "Monday"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Can you have an optimized build ready by Friday?' Ngữ pháp: Modal question (Can you). Collocation: 'optimized build', 'Friday'. Kỹ năng đọc hiểu: Xác định thời hạn."
        },
        {
          id: 58,
          question: "What priority is decided for the launch?",
          options: [
            "UI polish over performance",
            "Features over performance",
            "Performance over UI polish",
            "All features and UI"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Let's prioritize performance over UI polish for launch'. Ngữ pháp: 'Prioritize + object + over'. Collocation: 'performance priority', 'UI polish'. Kỹ năng đọc hiểu: Xác định quyết định ưu tiên."
        },
        {
          id: 59,
          question: "Is the Friday deadline achievable?",
          options: [
            "No, it's impossible",
            "Maybe, with half effort",
            "Yes, it's confirmed achievable",
            "Unlikely without more time"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Friday deliverable is achievable with full team effort' và 'Confirmed'. Ngữ pháp: 'Confirmed' + adjective (achievable). Collocation: 'achievable deadline'. Kỹ năng đọc hiểu: Xác định khả thi."
        },
        {
          id: 60,
          question: "What is the overall outcome of the discussion?",
          options: [
            "Launch must be delayed",
            "Most problems are unsolvable",
            "Launch timeline is preserved and team is back on track",
            "Significant challenges remain unresolved"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'We're back on track. Launch timeline is preserved. Great teamwork'. Ngữ pháp: Present Simple (are back) + noun phrase. Collocation: 'back on track', 'timeline preserved'. Kỹ năng đọc hiểu: Suy luận kết quả cuối cùng."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam14.js">
export const EXAM14_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 14 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài về dự án khởi nghiệp công nghệ.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Tom và Mark về dự án startup công nghệ. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Tom: Mark, how's the mobile app development coming along? We're supposed to launch next quarter.\nMark: It's progressing well, but we've encountered some unexpected challenges. Last week we discovered a critical security flaw in the backend system—it took us three days to resolve it.\nTom: That sounds serious. I hope the team isn't overworked. Have you considered delegating tasks?\nMark: Actually, we've been outsourcing some features to freelancers, but that's been slower than expected. The main issue is finding qualified developers who understand our vision.\nTom: I understand. What about the budget? Is it still within the approved limit?\nMark: We're 15% over budget due to the delays, but I believe we can recover by optimizing our workflow and cutting unnecessary expenses.\nTom: We need to discuss this with the board soon. Can you prepare a detailed report showing the timeline adjustments?\nMark: Absolutely. I'll have it ready by Friday.",
      questions: [
        {
          id: 1,
          options: [
            "The app will launch next month.",
            "The app is scheduled to launch next quarter.",
            "The app has already been launched.",
            "The launch date has been moved to next year."
          ],
          correct: 1,
          explanation: "Tom nói: 'We're supposed to launch next quarter.' (Chúng ta có lẽ sẽ khởi chạy quý tới). Đáp án đúng là (B). Ngữ pháp: 'Be supposed to' chỉ kế hoạch dự kiến. Thì hiện tại tiếp diễn (are supposed) nhấn mạnh tình trạng hiện tại. Collocation: 'launch app', 'next quarter'. Kỹ năng nghe: Xác định thời gian lên kế hoạch."
        },
        {
          id: 2,
          options: [
            "There have been no challenges so far.",
            "The challenges are only marketing-related.",
            "A critical security flaw was discovered in the backend.",
            "The team resolved the issues within one hour."
          ],
          correct: 2,
          explanation: "Mark nói: 'Last week we discovered a critical security flaw in the backend system—it took us three days to resolve it.' (Tuần trước chúng tôi phát hiện lỗ hổng bảo mật nghiêm trọng trong hệ thống backend—mất 3 ngày để khắc phục). Đáp án đúng là (C). Ngữ pháp: Thì quá khứ đơn (discovered, took) cho hành động hoàn thành. 'It took + thời gian' cấu trúc chỉ khoảng thời gian. Collocation: 'security flaw', 'backend system'. Kỹ năng nghe: Xác định vấn đề kỹ thuật."
        },
        {
          id: 3,
          options: [
            "They haven't outsourced any work.",
            "Outsourcing has been faster than expected.",
            "They've been outsourcing features to freelancers, but progress is slower.",
            "All development is done in-house."
          ],
          correct: 2,
          explanation: "Mark nói: 'We've been outsourcing some features to freelancers, but that's been slower than expected.' (Chúng tôi đã thuê ngoài một số tính năng cho các freelancer, nhưng nó chậm hơn dự kiến). Đáp án đúng là (C). Ngữ pháp: Present Perfect Continuous (have been outsourcing) chỉ hành động bắt đầu trong quá khứ kéo dài đến hiện tại. 'But' nối ý đối lập. Collocation: 'outsource features', 'freelancers'. Kỹ năng nghe: Xác định chiến lược và kết quả."
        },
        {
          id: 4,
          options: [
            "Finding developers with specific skills is easy.",
            "The main issue is finding qualified developers who understand the vision.",
            "Budget is the only concern.",
            "Marketing is not a problem."
          ],
          correct: 1,
          explanation: "Mark nói: 'The main issue is finding qualified developers who understand our vision.' (Vấn đề chính là tìm các nhà phát triển có trình độ hiểu rõ tầm nhìn của chúng ta). Đáp án đúng là (B). Ngữ pháp: Relative clause (who understand our vision) mô tả danh từ 'developers'. 'The main issue is' cấu trúc nhấn mạnh vấn đề chính. Collocation: 'qualified developers', 'understand vision'. Kỹ năng nghe: Xác định trở ngại chính."
        },
        {
          id: 5,
          options: [
            "The budget is under control.",
            "The project is 15% over budget due to delays.",
            "They don't need to adjust the budget.",
            "The budget has been approved for overrun."
          ],
          correct: 1,
          explanation: "Mark nói: 'We're 15% over budget due to the delays, but I believe we can recover by optimizing our workflow.' (Chúng tôi vượt quá 15% ngân sách do sự chậm trễ, nhưng tôi tin chúng tôi có thể bù lại). Đáp án đúng là (B). Ngữ pháp: Present Continuous (are over budget) chỉ tình trạng hiện tại. 'Due to' giới từ chỉ nguyên nhân. Collocation: 'over budget', 'optimize workflow'. Kỹ năng nghe: Xác định tình hình tài chính."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người về cải thiện dịch vụ khách hàng. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: At a service improvement meeting.\nDirector: Good morning, everyone. We need to address the recent drop in customer satisfaction scores. According to our survey, response time is a key issue.\nSarah: I completely agree. Last month, average response time was 48 hours. Our competitors respond within 24 hours.\nJohn: We should invest in more staff or implement automation tools. However, automation alone won't solve the problem.\nDirector: Both approaches have merit. Sarah, what about training current staff to work more efficiently?\nSarah: Excellent idea. We can combine training with process improvement. I suggest implementing a new ticketing system.\nJohn: That would help, but we also need to hire at least 10 additional support specialists.\nDirector: Agreed. Let's allocate budget for both training and recruitment. We need results by quarter-end.",
      questions: [
        {
          id: 6,
          question: "What is the main problem discussed?",
          options: [
            "Product quality issues",
            "Drop in customer satisfaction scores",
            "Equipment breakdown",
            "Supply chain problems"
          ],
          correct: 1,
          explanation: "Director nói: 'We need to address the recent drop in customer satisfaction scores.' (Chúng ta cần giải quyết sự sụt giảm gần đây trong điểm hài lòng của khách hàng). Đáp án đúng là (B). Ngữ pháp: Present Continuous (need to address) chỉ sự cần thiết hiện tại. Collocation: 'customer satisfaction scores', 'drop'. Kỹ năng nghe: Xác định vấn đề chính."
        },
        {
          id: 7,
          question: "What was the average response time last month?",
          options: [
            "24 hours",
            "48 hours",
            "72 hours",
            "12 hours"
          ],
          correct: 1,
          explanation: "Sarah nói: 'Last month, average response time was 48 hours.' (Tháng trước, thời gian phản ứng trung bình là 48 giờ). Đáp án đúng là (B). Ngữ pháp: Thì quá khứ đơn (was) cho thống kê trong quá khứ. Collocation: 'response time', 'average'. Kỹ năng nghe: Xác định con số."
        },
        {
          id: 8,
          question: "How long do competitors typically respond?",
          options: [
            "48 hours",
            "72 hours",
            "24 hours",
            "36 hours"
          ],
          correct: 2,
          explanation: "Sarah nói: 'Our competitors respond within 24 hours.' (Các đối thủ cạnh tranh của chúng tôi phản ứng trong vòng 24 giờ). Đáp án đúng là (C). Ngữ pháp: Present Simple (respond) chỉ thói quen chung. 'Within' giới từ chỉ khoảng thời gian. Collocation: 'respond within hours', 'competitors'. Kỹ năng nghe: So sánh hiệu suất."
        },
        {
          id: 9,
          question: "What solutions are proposed?",
          options: [
            "Only hire more staff",
            "Only implement automation",
            "Training, process improvement, new ticketing system, and hiring",
            "Replace all equipment"
          ],
          correct: 2,
          explanation: "Cuộc hội thoại đề xuất nhiều giải pháp: training, process improvement, ticketing system, hiring. Đáp án đúng là (C). Ngữ pháp: Multiple proposals với 'suggest', 'should', 'would help'. Collocation: 'implement system', 'hire specialists'. Kỹ năng nghe: Xác định tất cả các giải pháp."
        },
        {
          id: 10,
          question: "What is the deadline for results?",
          options: [
            "End of month",
            "End of quarter",
            "End of year",
            "Next week"
          ],
          correct: 1,
          explanation: "Director nói: 'We need results by quarter-end.' (Chúng ta cần kết quả trước hết quý). Đáp án đúng là (B). Ngữ pháp: 'By' giới từ chỉ thời hạn. Future need (need results) chỉ yêu cầu. Collocation: 'results by deadline', 'quarter-end'. Kỹ năng nghe: Xác định thời gian cụ thể."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn) về xu hướng khoa học. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Dr. Elizabeth: Welcome to today's seminar on artificial intelligence and machine learning. These technologies are revolutionizing industries at an unprecedented pace. Companies are adopting AI solutions to enhance productivity, reduce costs, and improve decision-making. However, challenges remain—data privacy concerns, skill shortages, and ethical dilemmas require careful consideration. Despite these obstacles, investment in AI continues to grow. Educational institutions are adapting their curricula to prepare students for an AI-driven future. The potential for innovation is limitless, but responsible implementation is essential for long-term success.",
      questions: [
        {
          id: 11,
          question: "According to Dr. Elizabeth, AI and machine learning are __________.",
          options: ["(A) declining in popularity", "(B) revolutionizing industries", "(C) creating only problems", "(D) becoming less important"],
          correct: 1,
          explanation: "Dr. Elizabeth: 'These technologies are revolutionizing industries at an unprecedented pace.' (Các công nghệ này đang thay đổi ngành công nghiệp với tốc độ chưa từng có). Đáp án đúng là (B). Ngữ pháp: Present Continuous (are revolutionizing) nhấn mạn hành động đang xảy ra. Collocation: 'revolutionizing industries', 'unprecedented pace'. Kỹ năng nghe: Xác định tác động chính."
        },
        {
          id: 12,
          question: "Companies adopt AI to __________.",
          options: ["(A) reduce employment", "(B) increase complexity", "(C) enhance productivity and reduce costs", "(D) ignore data privacy"],
          correct: 2,
          explanation: "Dr. Elizabeth: 'Companies are adopting AI solutions to enhance productivity, reduce costs, and improve decision-making.' (Các công ty đang áp dụng các giải pháp AI để tăng năng suất, giảm chi phí). Đáp án đúng là (C). Ngữ pháp: Present Continuous (are adopting) + Infinitive of purpose (to enhance). Collocation: 'adopt AI', 'reduce costs'. Kỹ năng nghe: Xác định lợi ích."
        },
        {
          id: 13,
          question: "What challenges are mentioned?",
          options: ["(A) Low investment interest", "(B) Data privacy, skill shortages, ethical dilemmas", "(C) Lack of technology", "(D) Decreased innovation"],
          correct: 1,
          explanation: "Dr. Elizabeth: 'Challenges remain—data privacy concerns, skill shortages, and ethical dilemmas require careful consideration.' (Các thách thức vẫn tồn tại—mối quan tâm về bảo mật dữ liệu). Đáp án đúng là (B). Ngữ pháp: Dấu gạch ngang (—) giới thiệu chi tiết. 'Require' + object chỉ yêu cầu. Collocation: 'data privacy', 'skill shortages'. Kỹ năng nghe: Xác định vấn đề."
        },
        {
          id: 14,
          question: "Despite obstacles, what continues to happen?",
          options: ["(A) Investment in AI continues to grow", "(B) AI adoption is decreasing", "(C) Companies are avoiding AI", "(D) Research has stopped"],
          correct: 0,
          explanation: "Dr. Elizabeth: 'Despite these obstacles, investment in AI continues to grow.' (Mặc dù những trở ngại này, đầu tư vào AI tiếp tục tăng). Đáp án đúng là (A). Ngữ pháp: 'Despite' giới từ chỉ sự nhượng bộ. 'Continue to grow' cấu trúc chỉ sự tiếp tục. Collocation: 'investment continues to grow'. Kỹ năng nghe: Xác định xu hướng tích cực."
        },
        {
          id: 15,
          question: "What are educational institutions doing?",
          options: ["(A) Ignoring AI", "(B) Eliminating technology programs", "(C) Adapting curricula for AI-driven future", "(D) Reducing student numbers"],
          correct: 2,
          explanation: "Dr. Elizabeth: 'Educational institutions are adapting their curricula to prepare students for an AI-driven future.' (Các tổ chức giáo dục đang điều chỉnh chương trình để chuẩn bị cho sinh viên). Đáp án đúng là (C). Ngữ pháp: Present Continuous (are adapting) + Infinitive of purpose (to prepare). Collocation: 'adapt curricula', 'AI-driven future'. Kỹ năng nghe: Xác định ứng phó chiến lược."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn) giữa nhân viên HR và ứng viên. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "HR Manager: Good afternoon. Thanks for coming in. I see you have 8 years of marketing experience. Can you tell us about your most successful campaign?\nCandidate: Of course. Three years ago, I led a digital marketing campaign that increased brand awareness by 45%. The campaign combined social media, email marketing, and influencer partnerships.\nHR Manager: That's impressive. How did you measure success?\nCandidate: We tracked key metrics—engagement rates, conversion rates, and ROI. The project exceeded expectations and generated significant revenue.\nHR Manager: Excellent. Do you have experience managing remote teams?\nCandidate: Yes, for the past two years I've been managing a distributed team across three countries. It required implementing effective communication systems and regular feedback mechanisms.\nHR Manager: That's valuable. When could you start if offered the position?\nCandidate: I can provide two weeks' notice, so I could start in mid-April.",
      questions: [
        {
          id: 16,
          question: "How much marketing experience does the candidate have?",
          options: [
            "(A) 3 years",
            "(B) 5 years",
            "(C) 8 years",
            "(D) 10 years"
          ],
          correct: 2,
          explanation: "HR Manager: 'I see you have 8 years of marketing experience.' (Tôi thấy bạn có 8 năm kinh nghiệm marketing). Đáp án đúng là (C). Ngữ pháp: Present Simple (have) chỉ trạng thái hiện tại. Collocation: 'marketing experience', 'years'. Kỹ năng nghe: Xác định thông tin cơ bản."
        },
        {
          id: 17,
          question: "By what percentage did the brand awareness increase?",
          options: [
            "(A) 30%",
            "(B) 45%",
            "(C) 55%",
            "(D) 65%"
          ],
          correct: 1,
          explanation: "Candidate: 'Increased brand awareness by 45%.' (Tăng nhận thức về thương hiệu 45%). Đáp án đúng là (B). Ngữ pháp: Past Simple (increased) + percentage. Collocation: 'brand awareness', 'increased by'. Kỹ năng nghe: Xác định con số chính xác."
        },
        {
          id: 18,
          question: "What metrics were tracked to measure success?",
          options: [
            "(A) Only sales numbers",
            "(B) Engagement, conversion rates, and ROI",
            "(C) Only website traffic",
            "(D) Customer complaints"
          ],
          correct: 1,
          explanation: "Candidate: 'We tracked key metrics—engagement rates, conversion rates, and ROI.' (Chúng tôi theo dõi các chỉ số chính—tỷ lệ tương tác, tỷ lệ chuyển đổi, ROI). Đáp án đúng là (B). Ngữ pháp: Past Simple (tracked) + plural objects. Dấu gạch ngang (—) liệt kê. Collocation: 'key metrics', 'ROI'. Kỹ năng nghe: Xác định các yếu tố đo lường."
        },
        {
          id: 19,
          question: "How long has the candidate managed remote teams?",
          options: [
            "(A) For 1 year",
            "(B) For 2 years",
            "(C) For 3 years",
            "(D) For 5 years"
          ],
          correct: 1,
          explanation: "Candidate: 'For the past two years I've been managing a distributed team.' (Trong 2 năm qua, tôi đã quản lý một đội phân tán). Đáp án đúng là (B). Ngữ pháp: Present Perfect Continuous (have been managing) + 'for 2 years'. Collocation: 'managing remote teams'. Kỹ năng nghe: Xác định khoảng thời gian."
        },
        {
          id: 20,
          question: "When can the candidate start working?",
          options: [
            "(A) Immediately",
            "(B) Next week",
            "(C) Mid-April",
            "(D) In two months"
          ],
          correct: 2,
          explanation: "Candidate: 'I can provide two weeks' notice, so I could start in mid-April.' (Tôi có thể thông báo hai tuần, vì vậy tôi có thể bắt đầu vào giữa tháng 4). Đáp án đúng là (C). Ngữ pháp: Modal 'could' + start + time. Collocation: 'provide notice', 'start in'. Kỹ năng nghe: Xác định thời gian bắt đầu."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The innovative technology __________ by our research team has garnered international recognition for its efficiency.",
          options: ["develop", "developed", "developing", "develops"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'developed' vì Past Participle bổ nghĩa danh từ 'technology'. Ngữ pháp: Relative clause rút gọn sử dụng past participle (developed by our research team = which was developed). Collocation: 'innovative technology', 'international recognition'. Từ vựng: 'develop' là nguyên thể; 'developing' là V-ing; 'develops' là hiện tại đơn."
        },
        {
          id: 22,
          question: "Despite facing numerous obstacles, the project team __________ to deliver the final product within the deadline.",
          options: ["managed", "managing", "manages", "management"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'managed' vì thì quá khứ đơn sau cấu trúc 'Despite' chỉ hành động hoàn thành. Ngữ pháp: 'Managed to + V' cấu trúc chỉ thành công trong hoàn cảnh khó khăn. Collocation: 'managed to deliver', 'within deadline'. Từ vựng: 'managing' là V-ing; 'manages' là hiện tại đơn; 'management' là danh từ."
        },
        {
          id: 23,
          question: "The company's commitment to sustainability has made it __________ among environmentally conscious consumers.",
          options: ["popular", "popularity", "popularly", "popularize"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'popular' vì tính từ bổ nghĩa danh từ (it = the company). Ngữ pháp: Cấu trúc 'make + object + adjective' yêu cầu tính từ sau 'it'. Collocation: 'popular among consumers', 'environmentally conscious'. Từ vựng: 'popularity' là danh từ; 'popularly' là trạng từ; 'popularize' là động từ."
        },
        {
          id: 24,
          question: "The training program __________ employees to develop critical skills necessary for career advancement.",
          options: ["enable", "enables", "enabling", "enabled"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'enabled' vì thì quá khứ đơn mô tả hành động chương trình đã thực hiện. Ngữ pháp: 'The program enabled' với 'enable + object + to V' chỉ cho phép. Collocation: 'training program', 'career advancement'. Từ vựng: 'enable' là nguyên thể; 'enables' là hiện tại đơn; 'enabling' là V-ing."
        },
        {
          id: 25,
          question: "Rather __________ abandoning the project, the team proposed alternative solutions to overcome the financial constraints.",
          options: ["than", "then", "when", "while"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'than' vì 'Rather than' là cụm giới từ chỉ lựa chọn thay thế. Ngữ pháp: Cấu trúc 'rather than + V-ing' so sánh hai hành động. Collocation: 'rather than abandoning'. Từ vựng: 'then' là trạng từ chỉ thời gian; 'when' là liên từ; 'while' là liên từ."
        },
        {
          id: 26,
          question: "The organization has __________ its operations in five new markets despite economic uncertainty.",
          options: ["expands", "expand", "expanded", "expanding"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'expanded' vì Present Perfect (has + V3) chỉ hành động hoàn thành liên quan hiện tại. Ngữ pháp: 'Has expanded' chỉ kết quả hiện tại của hành động trong quá khứ. Collocation: 'expand operations', 'new markets'. Từ vựng: 'expands' là hiện tại đơn; 'expand' là nguyên thể; 'expanding' là V-ing."
        },
        {
          id: 27,
          question: "The consultant recommends implementing new strategies __________ to reduce operational costs significantly.",
          options: ["designing", "designed", "design", "designs"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'designed' vì Past Participle bổ nghĩa danh từ 'strategies'. Ngữ pháp: Relative clause rút gọn 'strategies designed to reduce' = 'strategies which are designed to reduce'. Collocation: 'designed to reduce costs'. Từ vựng: 'designing' là V-ing; 'design' là nguyên thể; 'designs' là hiện tại đơn."
        },
        {
          id: 28,
          question: "The data analysis __________ conducted last month provides valuable insights for strategic decision-making.",
          options: ["which is", "which was", "what is", "that has"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'which was' vì Relative Pronoun 'which' + Past Simple Passive (was conducted). Ngữ pháp: 'The analysis which was conducted' mô tả hành động thụ động trong quá khứ. Collocation: 'data analysis', 'strategic decision-making'. Từ vựng: 'which is' là hiện tại; 'what is' không phù hợp; 'that has' là hiện tại hoàn thành."
        },
        {
          id: 29,
          question: "After __________ all relevant factors, the board approved the merger without hesitation.",
          options: ["consider", "considered", "considering", "considers"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'considering' vì After + V-ing (gerund) yêu cầu danh động từ. Ngữ pháp: 'After considering' cấu trúc giới từ + gerund. Collocation: 'consider factors', 'board approved'. Từ vựng: 'consider' là nguyên thể; 'considered' là quá khứ phân từ; 'considers' là hiện tại đơn."
        },
        {
          id: 30,
          question: "The policy __________ that all employees must undergo annual compliance training without exception.",
          options: ["states", "stating", "stated", "state"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'states' vì thì hiện tại đơn chỉ quy tắc chung hiện hành. Ngữ pháp: 'The policy states that' cấu trúc bắt đầu mệnh đề báo cáo (reported clause). Collocation: 'policy states', 'compliance training'. Từ vựng: 'stating' là V-ing; 'stated' là quá khứ; 'state' là nguyên thể."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D). Câu 31-36: Điền từ thích hợp. Câu 37-40: Đọc hiểu.",
      type: "reading",
      text: `To: All Department Heads
From: Mr. Wilson, Chief Operations Officer
Subject: Implementation of New Quality Management System
Dear Colleagues,

We are excited to announce the launch of our new Quality Management System, scheduled for January 15th. This system has been designed (31) streamline our operations and ensure consistent quality across all departments. The implementation will require commitment from every team member, and we are confident this transition will strengthen our competitive position.

Training sessions will be held next week to ensure all staff members understand the new procedures. To (32) maximum participation, these sessions will be conducted both in-person and online. We encourage employees to (33) at least one training session to familiarize themselves with the system's features.

The new system will track performance metrics, automate routine tasks, and provide real-time reporting capabilities. These features will help us (34) data-driven decisions more efficiently. Additionally, we have secured funding to support implementation costs, so there will be no (35) to departmental budgets.

We understand that change can be challenging, (36) the long-term benefits outweigh any initial adjustments. Your cooperation and positive attitude are essential to this initiative's success. If you have questions or require additional support, please contact the Quality Management team.

Best regards,
Mr. Wilson
Chief Operations Officer
Excellence Corporation`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "...designed (31) streamline our operations...",
          options: ["to", "for", "in", "by"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'to' vì 'designed to + V' cấu trúc Infinitive of purpose. Ngữ pháp: 'Designed to streamline' chỉ mục đích thiết kế. Collocation: 'designed to streamline', 'operations'. Từ vựng: 'for' là giới từ khác; 'in' là giới từ vị trí; 'by' là giới từ chỉ phương tiện."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "To (32) maximum participation...",
          options: ["ensure", "guarantee", "achieve", "maintain"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'ensure' vì 'To ensure + object' cấu trúc chỉ mục đích. Ngữ pháp: Infinitive of purpose (To ensure maximum participation). Collocation: 'ensure participation', 'maximum participation'. Từ vựng: 'guarantee' gần nghĩa nhưng 'ensure' tự nhiên hơn trong bối cảnh chính thức."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "We encourage employees to (33) at least one training session...",
          options: ["attend", "participate", "join", "engage"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'attend' vì 'attend a session' là cụm từ cố định. Ngữ pháp: 'Encourage + object + to + V' (encourage employees to attend). Collocation: 'attend training session'. Từ vựng: 'participate' và 'join' cũng phù hợp nhưng 'attend' chính thức hơn."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "...help us (34) data-driven decisions more efficiently.",
          options: ["take", "make", "develop", "create"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'make' vì 'make decisions' là cụm từ cố định. Ngữ pháp: 'Help us make' với 'help + object + V nguyên thể'. Collocation: 'make decisions', 'data-driven decisions'. Từ vựng: 'take decisions' ít dùng hơn; 'develop', 'create' không phù hợp."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "...will be no (35) to departmental budgets.",
          options: ["impact", "damage", "pressure", "threat"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'impact' vì 'no impact to budgets' chỉ không ảnh hưởng tiêu cực. Ngữ pháp: 'Will be no + noun' cấu trúc phủ định. Collocation: 'no impact on budgets'. Từ vựng: 'damage', 'pressure', 'threat' quá tiêu cực; 'impact' trung tính hơn."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "...challenging, (36) the long-term benefits outweigh...",
          options: ["but", "so", "because", "although"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'but' vì nối hai mệnh đề đối lập: challenging (tiêu cực) và benefits outweigh (tích cực). Ngữ pháp: Coordinating conjunction 'but' chỉ sự đối lập. Collocation: 'challenging, but benefits'. Từ vựng: 'so' chỉ kết quả; 'because' chỉ nguyên nhân; 'although' là subordinating."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - When is the new Quality Management System scheduled to launch?",
          options: [
            "December 15th",
            "January 15th",
            "February 15th",
            "Next week"
          ],
          correct: 1,
          explanation: "Email nêu: 'scheduled for January 15th'. Ngữ pháp: 'Scheduled for + date' chỉ thời gian lên lịch. Collocation: 'scheduled to launch', 'January 15th'. Kỹ năng đọc hiểu: Xác định ngày khởi động."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - Why is the new system being implemented?",
          options: [
            "To reduce staff numbers",
            "To streamline operations and ensure quality consistency",
            "To replace old equipment",
            "To reduce salaries"
          ],
          correct: 1,
          explanation: "Email nêu: 'designed to streamline our operations and ensure consistent quality'. Ngữ pháp: 'Designed to + V' chỉ mục đích. Collocation: 'streamline operations', 'ensure quality'. Kỹ năng đọc hiểu: Xác định lý do triển khai."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - What formats will the training sessions be offered in?",
          options: [
            "Only in-person",
            "Only online",
            "Both in-person and online",
            "By appointment only"
          ],
          correct: 2,
          explanation: "Email nêu: 'sessions will be conducted both in-person and online'. Ngữ pháp: 'Both ... and' cho hai lựa chọn. Collocation: 'in-person and online sessions'. Kỹ năng đọc hiểu: Xác định hình thức huấn luyện."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - What will NOT be affected by the implementation?",
          options: [
            "Departmental operations",
            "Training requirements",
            "Departmental budgets",
            "Staff procedures"
          ],
          correct: 2,
          explanation: "Email nêu: 'no impact to departmental budgets'. Ngữ pháp: 'No impact to' chỉ sự không bị ảnh hưởng. Collocation: 'no impact on budgets', 'secured funding'. Kỹ năng đọc hiểu: Xác định thứ không bị tác động."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**TechLearn Online Academy Advertisement**
Transform Your Career with Professional Certifications
Master in-demand skills with our industry-recognized courses. Whether you're starting fresh or advancing your career, TechLearn has a program for you.
**Programs Available:**
1. **Data Science Certificate** – Learn Python, SQL, machine learning algorithms. Duration: 12 weeks. Certificate recognized by Fortune 500 companies.
2. **Cybersecurity Specialist** – Master network security, ethical hacking, compliance. Duration: 16 weeks. Includes hands-on lab experience.
3. **Cloud Architecture** – AWS, Azure, Google Cloud expertise. Duration: 10 weeks. Job placement assistance provided.
4. **Business Analytics** – Power BI, Tableau, data visualization. Duration: 8 weeks. Flexible scheduling available.
Special Offer: Enroll now and receive 30% discount on your first course. Scholarships available for eligible candidates. Contact: learn@techlearn.com | Phone: 1-800-TECHLEARN
---
**Email Message**
**To:** learn@techlearn.com
**From:** sarah.mitchell@email.com
**Date:** March 10, 2025
**Subject:** Inquiry About Cybersecurity Certificate Program
Dear TechLearn Team,

I am writing to inquire about your Cybersecurity Specialist Certificate program. I currently work as an IT technician with 6 years of experience but want to advance into a security analyst role. I have a bachelor's degree in computer science but no formal cybersecurity credentials.

Could you provide information about the program curriculum, specifically the ethical hacking component? Additionally, I would like to know about job placement success rates and alumni outcomes. What are the prerequisites, and would my IT background meet the requirements?

I am particularly interested in the hands-on lab experience mentioned in your advertisement. My current job allows flexibility, so I can pursue studies part-time. What is the minimum time commitment required per week?

Could you also confirm whether the certificate is recognized by security certification bodies like CompTIA or ISC2? This is important for my career progression goals.

I look forward to hearing from you.

Best regards,
Sarah Mitchell
sarah.mitchell@email.com
(555) 234-5678`,
      questions: [
        {
          id: 41,
          question: "Which program has the shortest duration?",
          options: [
            "Data Science Certificate",
            "Cybersecurity Specialist",
            "Cloud Architecture",
            "Business Analytics"
          ],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì 'Business Analytics – Duration: 8 weeks' là ngắn nhất. Ngữ pháp: 'Duration' chỉ thời gian khóa học. Collocation: 'program duration', 'weeks'. Kỹ năng đọc hiểu: So sánh thông tin."
        },
        {
          id: 42,
          question: "What special benefit is mentioned in the advertisement?",
          options: [
            "Free lifetime access",
            "30% discount on first course",
            "Guaranteed employment",
            "Monthly installments"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'receive 30% discount on your first course'. Ngữ pháp: Present Simple (receive) chỉ ưu đãi hiện hành. Collocation: 'discount on course', 'special offer'. Kỹ năng đọc hiểu: Xác định ưu đãi."
        },
        {
          id: 43,
          question: "What is Sarah's current professional position?",
          options: [
            "Security analyst",
            "Software developer",
            "IT technician",
            "Network engineer"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I currently work as an IT technician'. Ngữ pháp: Present Simple (work) chỉ công việc hiện tại. Collocation: 'work as technician'. Kỹ năng đọc hiểu: Xác định vị trí công việc."
        },
        {
          id: 44,
          question: "How many years of IT experience does Sarah have?",
          options: [
            "3 years",
            "5 years",
            "6 years",
            "8 years"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì '6 years of experience'. Ngữ pháp: Số lượng + 'years of' + danh từ. Collocation: 'years of experience', 'IT technician'. Kỹ năng đọc hiểu: Xác định con số."
        },
        {
          id: 45,
          question: "What is Sarah's educational background?",
          options: [
            "Diploma in information technology",
            "Associate's degree in computer science",
            "Bachelor's degree in computer science",
            "Master's degree in cybersecurity"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I have a bachelor's degree in computer science'. Ngữ pháp: Present Perfect (have) + 'degree'. Collocation: 'bachelor's degree', 'computer science'. Kỹ năng đọc hiểu: Xác định trình độ học vấn."
        },
        {
          id: 46,
          question: "Which certificate program includes hands-on lab experience?",
          options: [
            "Data Science",
            "Cybersecurity Specialist",
            "Business Analytics",
            "All programs"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Cybersecurity Specialist – Includes hands-on lab experience'. Ngữ pháp: Present Simple (includes). Collocation: 'hands-on lab experience', 'cybersecurity'. Kỹ năng đọc hiểu: Xác định tính năng đặc biệt."
        },
        {
          id: 47,
          question: "What is Sarah's primary career goal?",
          options: [
            "Become an IT manager",
            "Advance into security analyst role",
            "Work as a software developer",
            "Start own cybersecurity company"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'want to advance into a security analyst role'. Ngữ pháp: 'Want to + V' chỉ mong muốn. Collocation: 'advance into role', 'security analyst'. Kỹ năng đọc hiểu: Xác định mục tiêu."
        },
        {
          id: 48,
          question: "What study arrangement does Sarah prefer?",
          options: [
            "Full-time only",
            "Weekends only",
            "Part-time",
            "Online only"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I can pursue studies part-time'. Ngữ pháp: 'Can pursue' chỉ khả năng. Collocation: 'pursue studies part-time'. Kỹ năng đọc hiểu: Xác định sắp xếp thời gian."
        },
        {
          id: 49,
          question: "Which Cloud Architecture platforms are covered?",
          options: [
            "Azure and Google Cloud only",
            "AWS and Azure only",
            "AWS, Azure, Google Cloud",
            "Other proprietary platforms"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Cloud Architecture – AWS, Azure, Google Cloud expertise'. Ngữ pháp: Liệt kê ba nền tảng. Collocation: 'cloud platforms', 'expertise'. Kỹ năng đọc hiểu: Xác định nội dung khóa học."
        },
        {
          id: 50,
          question: "What professional organizations does Sarah want certificate recognition from?",
          options: [
            "Cisco and Microsoft only",
            "CompTIA and ISC2",
            "All security organizations",
            "Academic institutions only"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'recognized by security certification bodies like CompTIA or ISC2'. Ngữ pháp: 'Like' giới thiệu ví dụ. Collocation: 'security certification bodies', 'recognized by'. Kỹ năng đọc hiểu: Xác định yêu cầu cụ thể."
        }
      ]
    },
    part8: {
      title: "PART 8: Professional Message Thread",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn/email chuyên nghiệp, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Project Manager (09:00): Team, the client just approved the final design mockups. We can now proceed to the development phase. Let's schedule a kickoff meeting for tomorrow at 2 PM.

Developer Lead (09:15): Excellent news! I've reviewed the mockups and they look solid. However, we need clarification on the database architecture. Can we add that to tomorrow's agenda?

Designer (09:30): Confirmed. The mockups represent 6 weeks of refinement. I'm confident the development team will find them straightforward to implement.

QA Manager (09:45): Great progress. Before development begins, I'd like to propose a testing strategy and timeline. Should we start UAT after feature completion or run parallel testing?

Project Manager (10:00): Good points, everyone. Let's address database architecture, testing strategy, and resource allocation at tomorrow's meeting. I'll send the full agenda by EOD today.

Developer Lead (10:30): Perfect. We should also discuss API specifications and third-party integrations. I'll prepare technical documentation by tomorrow morning.

Designer (11:00): One more thing—do we have approval for the color scheme changes the client requested? This might affect implementation timeline.

Project Manager (11:15): Good catch. I'll confirm with the client this afternoon. That detail could impact design assets and development dependencies. Everyone okay with the 2 PM meeting?

QA Manager (11:45): 2 PM works. I'll prepare testing framework recommendations.

Developer Lead (12:00): Ready when you are. The team is eager to start coding.`,
      questions: [
        {
          id: 51,
          question: "What was approved by the client?",
          options: [
            "Budget increase",
            "Final design mockups",
            "Development team expansion",
            "Extended timeline"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'client just approved the final design mockups'. Ngữ pháp: Past Simple (approved) + object. Collocation: 'client approved mockups'. Kỹ năng đọc hiểu: Xác định quyết định chính."
        },
        {
          id: 52,
          question: "When is the kickoff meeting scheduled?",
          options: [
            "Today at 2 PM",
            "Tomorrow at 10 AM",
            "Tomorrow at 2 PM",
            "Next week"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'kickoff meeting for tomorrow at 2 PM'. Ngữ pháp: Future plan (schedule) + time. Collocation: 'kickoff meeting', 'tomorrow at 2 PM'. Kỹ năng đọc hiểu: Xác định thời gian."
        },
        {
          id: 53,
          question: "What does the Developer Lead request to clarify?",
          options: [
            "Color scheme",
            "Database architecture",
            "Testing timeline",
            "Budget allocation"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'we need clarification on the database architecture'. Ngữ pháp: 'Need clarification on' + topic. Collocation: 'database architecture', 'clarification'. Kỹ năng đọc hiểu: Xác định yêu cầu kỹ thuật."
        },
        {
          id: 54,
          question: "How long did the design refinement take?",
          options: [
            "3 weeks",
            "4 weeks",
            "6 weeks",
            "8 weeks"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'mockups represent 6 weeks of refinement'. Ngữ pháp: 'Represent' + time duration. Collocation: 'weeks of refinement', 'design mockups'. Kỹ năng đọc hiểu: Xác định khoảng thời gian."
        },
        {
          id: 55,
          question: "What is the QA Manager's main concern?",
          options: [
            "Designer availability",
            "Client feedback",
            "Testing strategy and timeline",
            "Budget overrun"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'propose a testing strategy and timeline'. Ngữ pháp: 'Propose' + object. Collocation: 'testing strategy', 'UAT (User Acceptance Testing)'. Kỹ năng đọc hiểu: Xác định mối quan tâm chính."
        },
        {
          id: 56,
          question: "What is the Designer concerned about regarding the timeline?",
          options: [
            "Budget constraints",
            "Client's color scheme changes",
            "Developer availability",
            "Testing complexity"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'color scheme changes the client requested... might affect implementation timeline'. Ngữ pháp: Conditional (might affect). Collocation: 'color scheme changes', 'implementation timeline'. Kỹ năng đọc hiểu: Xác định mối quan tâm phụ."
        },
        {
          id: 57,
          question: "What will the Project Manager do this afternoon?",
          options: [
            "Prepare the agenda",
            "Confirm with the client about color scheme approval",
            "Review technical documentation",
            "Approve the budget"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I'll confirm with the client this afternoon'. Ngữ pháp: Future Simple (will confirm) + time. Collocation: 'confirm with client', 'this afternoon'. Kỹ năng đọc hiểu: Xác định hành động tiếp theo."
        },
        {
          id: 58,
          question: "When will the Project Manager send the full agenda?",
          options: [
            "At 2 PM tomorrow",
            "By end of day today (EOD)",
            "Tomorrow morning",
            "Next week"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I'll send the full agenda by EOD today'. Ngữ pháp: 'By' chỉ thời hạn. Collocation: 'send agenda', 'by EOD (end of day)'. Kỹ năng đọc hiểu: Xác định thời gian gửi."
        },
        {
          id: 59,
          question: "What will the Developer Lead prepare before the meeting?",
          options: [
            "Budget proposals",
            "Technical documentation",
            "Testing framework",
            "Design assets"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I'll prepare technical documentation by tomorrow morning'. Ngữ pháp: Future Simple (will prepare) + object. Collocation: 'technical documentation', 'API specifications'. Kỹ năng đọc hiểu: Xác định chuẩn bị."
        },
        {
          id: 60,
          question: "What is the overall sentiment of the team?",
          options: [
            "Frustrated and behind schedule",
            "Anxious about the timeline",
            "Positive and eager to proceed",
            "Concerned about the design quality"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì tone của toàn bộ chuỗi tin nhắn tích cực: 'Excellent', 'solid', 'eager to start coding'. Ngữ pháp: Positive language throughout. Collocation: 'eager to start', 'ready when you are'. Kỹ năng đọc hiểu: Suy luận cảm xúc chung."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam15.js">
export const EXAM15_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 15 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài về dự án nâng cấp cơ sở hạ tầng.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Alex và Jennifer về dự án nâng cấp cơ sở hạ tầng công ty. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Alex: Jennifer, I've reviewed the infrastructure upgrade proposal. It looks comprehensive, but I'm concerned about the timeline. Can we really complete this within six months?\nJennifer: I understand your concerns. We've been working with contractors for three months to refine the plan, and they've assured us the schedule is realistic if we begin immediately.\nAlex: What about the budget? Has it been approved by finance?\nJennifer: The finance team approved a preliminary budget last week, but we'll need to finalize costs once we've secured all the equipment orders. Some components are on backorder.\nAlex: That's risky. We should get written commitments from vendors before we announce the project publicly.\nJennifer: Absolutely. I've already scheduled vendor meetings for next week. We'll also need to hire additional technicians to ensure smooth execution.\nAlex: How many extra staff members are we talking about?\nJennifer: We're planning to bring on eight new technicians on temporary contracts. Training will take about two weeks.",
      questions: [
        {
          id: 1,
          options: [
            "The timeline is not a concern.",
            "They are concerned about completing within six months.",
            "The project is already finished.",
            "They plan to extend the timeline."
          ],
          correct: 1,
          explanation: "Alex nói: 'I'm concerned about the timeline. Can we really complete this within six months?' (Tôi lo lắng về thời gian biểu. Chúng ta thực sự có thể hoàn thành trong sáu tháng không?). Đáp án đúng là (B). Ngữ pháp: Present Continuous (concerned about) chỉ lo lắng hiện tại. 'Can we + V' cấu trúc hỏi khả năng. Collocation: 'timeline concern', 'within six months'. Kỹ năng nghe: Xác định vấn đề chính."
        },
        {
          id: 2,
          options: [
            "They haven't worked with contractors.",
            "They've been working with contractors for three months.",
            "Contractors just started last week.",
            "Work with contractors ended two months ago."
          ],
          correct: 1,
          explanation: "Jennifer nói: 'We've been working with contractors for three months to refine the plan.' (Chúng tôi đã làm việc với các nhà thầu trong ba tháng để tinh chỉnh kế hoạch). Đáp án đúng là (B). Ngữ pháp: Present Perfect Continuous (have been working) chỉ hành động bắt đầu trong quá khứ kéo dài. Collocation: 'working with contractors', 'refine plan'. Kỹ năng nghe: Xác định khoảng thời gian."
        },
        {
          id: 3,
          options: [
            "Budget hasn't been reviewed yet.",
            "Finance denied the budget.",
            "Finance approved a preliminary budget last week.",
            "Budget will be decided next month."
          ],
          correct: 2,
          explanation: "Jennifer nói: 'The finance team approved a preliminary budget last week.' (Đội tài chính phê duyệt ngân sách dự kiến tuần trước). Đáp án đúng là (C). Ngữ pháp: Simple Past (approved) + time expression (last week). Collocation: 'finance team approved', 'preliminary budget'. Kỹ năng nghe: Xác định quyết định tài chính."
        },
        {
          id: 4,
          options: [
            "All equipment is in stock.",
            "Some components are on backorder.",
            "No equipment has been ordered.",
            "Equipment will arrive tomorrow."
          ],
          correct: 1,
          explanation: "Jennifer nói: 'Some components are on backorder.' (Một số thành phần đang chờ hàng). Đáp án đúng là (B). Ngữ pháp: Present Simple (are) chỉ tình trạng hiện tại. 'On backorder' cụm từ cố định. Collocation: 'equipment on backorder'. Kỹ năng nghe: Xác định vấn đề nguồn cung."
        },
        {
          id: 5,
          options: [
            "They will announce publicly immediately.",
            "They should get commitments from vendors before public announcement.",
            "Public announcement is not needed.",
            "They already announced the project."
          ],
          correct: 1,
          explanation: "Alex nói: 'We should get written commitments from vendors before we announce the project publicly.' (Chúng ta nên có cam kết bằng văn bản từ các nhà cung cấp trước khi công bố dự án công khai). Đáp án đúng là (B). Ngữ pháp: 'Should + V' chỉ khuyến cáo. 'Before' giới từ chỉ thứ tự sự kiện. Collocation: 'vendor commitments', 'announce publicly'. Kỹ năng nghe: Xác định chiến lược truyền thông."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người về chương trình bền vững môi trường. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: At a sustainability initiative meeting.\nCoordinator: Thank you all for attending. Our company has committed to achieving carbon neutrality by 2030. This meeting focuses on our renewable energy transition.\nAlex: The solar panel installation is progressing well. We've completed 40% of the installation across all facilities. However, we need additional funding for the remaining installations.\nBen: I've reviewed the energy consumption data from last quarter. Energy usage has decreased by 15% since implementing the efficiency measures three months ago.\nCoordinator: Excellent progress. Alex, what about the employee engagement component?\nAlex: We've launched a sustainability awareness program that includes workshops and incentive programs. Participation has been strong, with 70% of employees engaged so far.\nBen: Should we consider expanding the program to our supply chain partners?\nCoordinator: That's a great idea. Let's develop a supplier sustainability framework. We need results by the end of Q3.",
      questions: [
        {
          id: 6,
          question: "What is the company's carbon neutrality target date?",
          options: [
            "2025",
            "2028",
            "2030",
            "2035"
          ],
          correct: 2,
          explanation: "Coordinator nói: 'Our company has committed to achieving carbon neutrality by 2030.' (Công ty của chúng tôi đã cam kết đạt trung hòa các-bon vào năm 2030). Đáp án đúng là (C). Ngữ pháp: Present Perfect (has committed) + future date. Collocation: 'carbon neutrality', 'by 2030'. Kỹ năng nghe: Xác định mục tiêu."
        },
        {
          id: 7,
          question: "What percentage of solar panel installation is complete?",
          options: [
            "25%",
            "40%",
            "60%",
            "70%"
          ],
          correct: 1,
          explanation: "Alex nói: 'We've completed 40% of the installation across all facilities.' (Chúng tôi đã hoàn thành 40% lắp đặt trên tất cả các cơ sở). Đáp án đúng là (B). Ngữ pháp: Present Perfect (have completed) + percentage. Collocation: 'installation complete', 'facilities'. Kỹ năng nghe: Xác định tiến độ."
        },
        {
          id: 8,
          question: "How much has energy usage decreased?",
          options: [
            "10%",
            "12%",
            "15%",
            "20%"
          ],
          correct: 2,
          explanation: "Ben nói: 'Energy usage has decreased by 15% since implementing the efficiency measures three months ago.' (Sử dụng năng lượng đã giảm 15% kể từ khi triển khai các biện pháp tiết kiệm ba tháng trước). Đáp án đúng là (C). Ngữ pháp: Present Perfect (has decreased) + time expression (since). Collocation: 'energy usage decreased', 'efficiency measures'. Kỹ năng nghe: Xác định con số cải thiện."
        },
        {
          id: 9,
          question: "What is the employee participation rate in the sustainability program?",
          options: [
            "50%",
            "60%",
            "70%",
            "80%"
          ],
          correct: 2,
          explanation: "Alex nói: 'Participation has been strong, with 70% of employees engaged so far.' (Sự tham gia mạnh mẽ, với 70% nhân viên tham gia cho đến nay). Đáp án đúng là (C). Ngữ pháp: Present Perfect (has been) + percentage. Collocation: 'employee participation', 'engagement'. Kỹ năng nghe: Xác định tỷ lệ tham gia."
        },
        {
          id: 10,
          question: "When should the supplier sustainability framework results be delivered?",
          options: [
            "End of Q2",
            "End of Q3",
            "End of Q4",
            "Next year"
          ],
          correct: 1,
          explanation: "Coordinator nói: 'We need results by the end of Q3.' (Chúng ta cần kết quả trước hết Q3). Đáp án đúng là (B). Ngữ pháp: 'By' giới từ chỉ thời hạn. 'Need' modal chỉ yêu cầu. Collocation: 'results by', 'end of Q3'. Kỹ năng nghe: Xác định thời hạn."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại về xu hướng tiêu dùng. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Consumer Analyst: Good morning, everyone. Today I'll share insights on emerging consumer behavior trends. Gen Z consumers are prioritizing sustainability and ethical production in their purchasing decisions. This generation spends more on environmentally-friendly products despite higher prices. E-commerce has transformed shopping habits, with 65% of purchases now made online. Social media influencers significantly impact buying decisions, particularly among younger demographics. Personalization has become essential—consumers expect tailored recommendations based on browsing history. Additionally, subscription services have gained popularity, with recurring revenue models becoming increasingly common. Companies that adapt to these trends will maintain competitive advantage. However, addressing data privacy concerns is crucial for building consumer trust.",
      questions: [
        {
          id: 11,
          question: "What is Gen Z prioritizing in purchasing decisions?",
          options: [
            "(A) Price and convenience",
            "(B) Brand popularity",
            "(C) Sustainability and ethical production",
            "(D) Product variety"
          ],
          correct: 2,
          explanation: "Consumer Analyst: 'Gen Z consumers are prioritizing sustainability and ethical production in their purchasing decisions.' (Người tiêu dùng Gen Z ưu tiên tính bền vững và sản xuất đạo đức). Đáp án đúng là (C). Ngữ pháp: Present Continuous (are prioritizing) chỉ xu hướng hiện tại. Collocation: 'sustainability and ethical production'. Kỹ năng nghe: Xác định ưu tiên."
        },
        {
          id: 12,
          question: "What percentage of purchases are made online?",
          options: [
            "(A) 55%",
            "(B) 60%",
            "(C) 65%",
            "(D) 70%"
          ],
          correct: 2,
          explanation: "Consumer Analyst: '65% of purchases now made online.' (65% lượt mua hiện được thực hiện trực tuyến). Đáp án đúng là (C). Ngữ pháp: Present Simple Passive (are made). Collocation: 'purchases online', 'e-commerce'. Kỹ năng nghe: Xác định con số."
        },
        {
          id: 13,
          question: "Who significantly impacts buying decisions?",
          options: [
            "(A) Traditional media",
            "(B) Social media influencers",
            "(C) Family members",
            "(D) Online reviews only"
          ],
          correct: 1,
          explanation: "Consumer Analyst: 'Social media influencers significantly impact buying decisions, particularly among younger demographics.' (Người ảnh hưởng truyền thông xã hội có tác động đáng kể đến quyết định mua hàng). Đáp án đúng là (B). Ngữ pháp: Present Simple (impact) + adverb (significantly). Collocation: 'influencers impact', 'buying decisions'. Kỹ năng nghe: Xác định tác động."
        },
        {
          id: 14,
          question: "What has become essential in retail?",
          options: [
            "(A) Discount pricing",
            "(B) Physical stores only",
            "(C) Personalization and tailored recommendations",
            "(D) Limited product selection"
          ],
          correct: 2,
          explanation: "Consumer Analyst: 'Personalization has become essential—consumers expect tailored recommendations.' (Cá nhân hóa đã trở thành cần thiết—người tiêu dùng mong đợi các đề xuất được điều chỉnh). Đáp án đúng là (C). Ngữ pháp: Present Perfect (has become) chỉ xu hướng mới. Collocation: 'personalization essential', 'tailored recommendations'. Kỹ năng nghe: Xác định yêu cầu mới."
        },
        {
          id: 15,
          question: "What is crucial for building consumer trust?",
          options: [
            "(A) Lower prices",
            "(B) More products",
            "(C) Addressing data privacy concerns",
            "(D) Faster shipping"
          ],
          correct: 2,
          explanation: "Consumer Analyst: 'Addressing data privacy concerns is crucial for building consumer trust.' (Giải quyết những lo ngại về bảo mật dữ liệu là rất quan trọng để xây dựng lòng tin của người tiêu dùng). Đáp án đúng là (C). Ngữ pháp: Present Simple (is crucial) + V-ing. Collocation: 'data privacy concerns', 'consumer trust'. Kỹ năng nghe: Xác định yếu tố quan trọng."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng giữa khách hàng và nhân viên bán hàng về hợp đồng dịch vụ. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Customer: Hi, I'm interested in your premium internet service package. Can you explain what's included?\nSales: Of course! Our premium package includes 500 Mbps download speed, unlimited data, and 24/7 customer support. We've upgraded our infrastructure recently, so service reliability has significantly improved.\nCustomer: That sounds good. What about the installation fee? I've had bad experiences with high setup costs.\nSales: We're currently offering a promotion—no installation fee for new customers who sign up this month. Additionally, we're waiving the first month's service charge.\nCustomer: Excellent! How long is the contract?\nSales: The standard contract is 24 months, but we offer a 12-month option if you prefer shorter commitment. We've found that most customers are very satisfied with our service after the first three months.\nCustomer: I'm convinced. Can I start service next week?\nSales: Absolutely. I'll process your application today, and we'll schedule installation for next Thursday. Your service will be active within 48 hours of installation.",
      questions: [
        {
          id: 16,
          question: "What is the download speed of the premium package?",
          options: [
            "(A) 250 Mbps",
            "(B) 350 Mbps",
            "(C) 500 Mbps",
            "(D) 750 Mbps"
          ],
          correct: 2,
          explanation: "Sales: 'Our premium package includes 500 Mbps download speed.' (Gói cao cấp của chúng tôi bao gồm tốc độ tải xuống 500 Mbps). Đáp án đúng là (C). Ngữ pháp: Present Simple (includes) chỉ tính năng sản phẩm. Collocation: 'download speed', 'premium package'. Kỹ năng nghe: Xác định chi tiết kỹ thuật."
        },
        {
          id: 17,
          question: "What is currently waived for new customers?",
          options: [
            "(A) Download speed",
            "(B) Installation fee and first month charge",
            "(C) Contract term",
            "(D) Customer support"
          ],
          correct: 1,
          explanation: "Sales: 'We're currently offering...no installation fee...we're waiving the first month's service charge.' (Chúng tôi hiện đang cung cấp không phí cài đặt...chúng tôi miễn phí tháng dịch vụ đầu tiên). Đáp án đúng là (B). Ngữ pháp: Present Continuous (are waiving) chỉ khuyến mãi hiện tại. Collocation: 'waiving fee', 'new customers'. Kỹ năng nghe: Xác định khuyến mãi."
        },
        {
          id: 18,
          question: "What contract options are available?",
          options: [
            "(A) Only 24 months",
            "(B) 12-month and 24-month options",
            "(C) Only 12 months",
            "(D) Month-to-month only"
          ],
          correct: 1,
          explanation: "Sales: 'The standard contract is 24 months, but we offer a 12-month option if you prefer shorter commitment.' (Hợp đồng tiêu chuẩn là 24 tháng, nhưng chúng tôi cung cấp tùy chọn 12 tháng). Đáp án đúng là (B). Ngữ pháp: Present Simple (is, offer) + conditional (if you prefer). Collocation: 'contract term', 'commitment'. Kỹ năng nghe: Xác định lựa chọn."
        },
        {
          id: 19,
          question: "When will the customer's service be active?",
          options: [
            "(A) Immediately after application",
            "(B) Within 24 hours of installation",
            "(C) Within 48 hours of installation",
            "(D) Within one week"
          ],
          correct: 2,
          explanation: "Sales: 'Your service will be active within 48 hours of installation.' (Dịch vụ của bạn sẽ hoạt động trong vòng 48 giờ sau khi cài đặt). Đáp án đúng là (C). Ngữ pháp: Future Simple Passive (will be active) + time expression. Collocation: 'service active', 'within 48 hours'. Kỹ năng nghe: Xác định thời gian."
        },
        {
          id: 20,
          question: "What does the sales representative say about customer satisfaction?",
          options: [
            "(A) Customers are rarely satisfied",
            "(B) Most customers are satisfied after three months",
            "(C) Satisfaction takes over a year",
            "(D) Customer satisfaction is not guaranteed"
          ],
          correct: 1,
          explanation: "Sales: 'Most customers are very satisfied with our service after the first three months.' (Hầu hết khách hàng rất hài lòng với dịch vụ của chúng tôi sau ba tháng đầu tiên). Đáp án đúng là (B). Ngữ pháp: Present Perfect (are satisfied) + time reference (after). Collocation: 'customer satisfaction', 'after three months'. Kỹ năng nghe: Xác định khẳng định."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The marketing department __________ a comprehensive strategy to increase brand awareness across digital platforms.",
          options: ["develop", "developing", "developed", "has developed"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'has developed' vì Present Perfect chỉ hành động hoàn thành liên quan đến hiện tại. Ngữ pháp: 'Has + V3' chỉ kết quả hiện tại của hành động trong quá khứ. Collocation: 'develop strategy', 'brand awareness'. Từ vựng: 'develop' là nguyên thể; 'developing' là V-ing; 'developed' là quá khứ đơn."
        },
        {
          id: 22,
          question: "Despite __________  significant obstacles, the research team successfully completed the clinical trials ahead of schedule.",
          options: ["face", "faced", "facing", "faces"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'facing' vì Despite + V-ing (gerund) là mẫu cố định. Ngữ pháp: 'Despite facing' = 'mặc dù phải đối mặt'. Collocation: 'facing obstacles', 'complete trials'. Từ vựng: 'face' là nguyên thể; 'faced' là quá khứ; 'faces' là hiện tại đơn."
        },
        {
          id: 23,
          question: "The conference proceedings, __________ by leading experts, provide valuable insights into emerging technologies.",
          options: ["compile", "compiling", "compiled", "compiles"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'compiled' vì Past Participle bổ nghĩa danh từ 'proceedings'. Ngữ pháp: Relative clause rút gọn (which are compiled = compiled). Collocation: 'compiled by experts', 'emerging technologies'. Từ vựng: 'compile' là nguyên thể; 'compiling' là V-ing; 'compiles' là hiện tại đơn."
        },
        {
          id: 24,
          question: "The new policy requires all department managers __________ quarterly performance reports to senior leadership.",
          options: ["submit", "submitting", "to submit", "submitted"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'to submit' vì 'require + object + to + V' cấu trúc cô-infinitive. Ngữ pháp: 'Requires managers to submit' chỉ yêu cầu bắt buộc. Collocation: 'require to submit', 'quarterly reports'. Từ vựng: 'submit' là nguyên thể; 'submitting' là V-ing; 'submitted' là quá khứ phân từ."
        },
        {
          id: 25,
          question: "Rather than __________ the aging infrastructure, the city council decided to invest in comprehensive renovation.",
          options: ["replace", "replacing", "replaced", "replaces"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'replacing' vì 'Rather than + V-ing' là cụm giới từ cô-động từ. Ngữ pháp: 'Rather than replacing' = 'thay vì thay thế'. Collocation: 'rather than replacing', 'infrastructure'. Từ vựng: 'replace' là nguyên thể; 'replaced' là quá khứ; 'replaces' là hiện tại đơn."
        },
        {
          id: 26,
          question: "The organization __________ its community outreach programs to serve more vulnerable populations.",
          options: ["expands", "expanded", "expanding", "has expanded"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'has expanded' vì Present Perfect chỉ hành động hoàn thành ảnh hưởng hiện tại. Ngữ pháp: 'Has expanded' chỉ kết quả mở rộng. Collocation: 'expand programs', 'vulnerable populations'. Từ vựng: 'expands' là hiện tại đơn; 'expanded' là quá khứ; 'expanding' là V-ing."
        },
        {
          id: 27,
          question: "The software __________ to integrate multiple data sources has revolutionized our operational efficiency.",
          options: ["design", "designed", "designing", "designs"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'designed' vì Past Participle bổ nghĩa danh từ 'software'. Ngữ pháp: Relative clause rút gọn (which is designed to integrate). Collocation: 'designed to integrate', 'data sources'. Từ vựng: 'design' là nguyên thể; 'designing' là V-ing; 'designs' là hiện tại đơn."
        },
        {
          id: 28,
          question: "The project budget, __________ by the finance committee, allocates 40% of funds to research and development.",
          options: ["approve", "approving", "approved", "approves"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'approved' vì Past Participle bổ nghĩa danh từ 'budget'. Ngữ pháp: Relative clause rút gọn (which was approved). Collocation: 'approved budget', 'finance committee'. Từ vựng: 'approve' là nguyên thể; 'approving' là V-ing; 'approves' là hiện tại đơn."
        },
        {
          id: 29,
          question: "Upon __________ the new compliance regulations, all employees must complete mandatory training modules.",
          options: ["implement", "implementing", "implemented", "implements"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'implementing' vì Upon + V-ing là cụm giới từ. Ngữ pháp: 'Upon implementing' = 'khi triển khai'. Collocation: 'implementing regulations', 'compliance'. Từ vựng: 'implement' là nguyên thể; 'implemented' là quá khứ; 'implements' là hiện tại đơn."
        },
        {
          id: 30,
          question: "The regulatory framework __________ that financial institutions maintain minimum capital reserves.",
          options: ["requires", "requiring", "required", "require"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'requires' vì Present Simple chỉ quy tắc chung hiện hành. Ngữ pháp: 'The framework requires that' + subject + V cấu trúc mệnh đề báo cáo. Collocation: 'framework requires', 'capital reserves'. Từ vựng: 'requiring' là V-ing; 'required' là quá khứ; 'require' là nguyên thể."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D). Câu 31-36: Điền từ thích hợp. Câu 37-40: Đọc hiểu.",
      type: "reading",
      text: `To: All Team Members
From: Dr. Patricia Morrison, Research Director
Subject: Launch of New Collaborative Research Initiative
Dear Colleagues,

I am delighted to announce the launch of our new Collaborative Research Initiative, beginning in April. This groundbreaking program has been designed (31) foster interdisciplinary collaboration among research teams across all departments. By breaking down traditional silos, we aim to accelerate innovation and drive meaningful research outcomes.

The initiative will (32) partnerships with leading universities and research institutions globally. These collaborations are intended to (33) our research capabilities and provide access to specialized expertise. Each participating department will designate a research lead to coordinate efforts and ensure alignment with project objectives.

Funding has been secured to (34) the program's operational costs for the first three years. However, all teams must commit to achieving measurable outcomes and (35) progress reports quarterly. We understand that collaborative work requires additional effort, (36) the long-term benefits of shared knowledge will significantly enhance our research quality.

Orientation sessions will be scheduled for next month to introduce the initiative framework and establish working agreements. For questions or to express interest in participation, please contact the Research Development Office.

Best regards,
Dr. Patricia Morrison
Research Director
Global Research Institute`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "...designed (31) foster interdisciplinary collaboration...",
          options: ["to", "for", "in", "by"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'to' vì 'designed to + V' cấu trúc Infinitive of purpose. Ngữ pháp: 'Designed to foster' chỉ mục đích thiết kế chương trình. Collocation: 'designed to foster', 'collaboration'. Từ vựng: 'for' là giới từ khác; 'in' là giới từ vị trí; 'by' là giới từ chỉ phương tiện."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "The initiative will (32) partnerships with leading universities...",
          options: ["establish", "establish", "establishing", "established"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'establish' vì Future Simple (will + V nguyên thể). Ngữ pháp: 'Will establish' chỉ kế hoạch tương lai. Collocation: 'establish partnerships', 'universities'. Từ vựng: 'establishing' là V-ing; 'established' là quá khứ phân từ."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...intended to (33) our research capabilities...",
          options: ["enhance", "enhancing", "enhanced", "enhances"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'enhance' vì 'intended to + V' cấu trúc Infinitive. Ngữ pháp: Passive Infinitive (are intended to enhance). Collocation: 'enhance capabilities', 'research'. Từ vựng: 'enhancing' là V-ing; 'enhanced' là quá khứ; 'enhances' là hiện tại đơn."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "Funding has been secured to (34) the program's operational costs...",
          options: ["cover", "covering", "covered", "covers"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'cover' vì 'to + V' cấu trúc Infinitive of purpose. Ngữ pháp: 'Secured to cover' chỉ mục đích. Collocation: 'cover costs', 'funding'. Từ vựng: 'covering' là V-ing; 'covered' là quá khứ; 'covers' là hiện tại đơn."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "...must commit to achieving measurable outcomes and (35) progress reports quarterly.",
          options: ["submitting", "submit", "submitted", "submits"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'submitting' vì 'commit to + V-ing' cấu trúc gerund. Ngữ pháp: 'Commit to submitting' = 'cam kết gửi'. Collocation: 'submit reports', 'progress'. Từ vựng: 'submit' là nguyên thể; 'submitted' là quá khứ; 'submits' là hiện tại đơn."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "...requires additional effort, (36) the long-term benefits outweigh...",
          options: ["but", "so", "because", "although"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'but' vì nối hai mệnh đề đối lập: difficulty (requires effort) và benefit (benefits outweigh). Ngữ pháp: Coordinating conjunction 'but'. Collocation: 'additional effort, but benefits'. Từ vựng: 'so' chỉ kết quả; 'because' chỉ nguyên nhân; 'although' là subordinating."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - When will the Collaborative Research Initiative begin?",
          options: [
            "January",
            "February",
            "March",
            "April"
          ],
          correct: 3,
          explanation: "Email nêu: 'beginning in April'. Ngữ pháp: Preposition 'in' + month. Collocation: 'begin in April', 'launch'. Kỹ năng đọc hiểu: Xác định thời gian khởi động."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the primary goal of the initiative?",
          options: [
            "Reduce research costs",
            "Foster interdisciplinary collaboration and accelerate innovation",
            "Replace traditional departments",
            "Eliminate research funding"
          ],
          correct: 1,
          explanation: "Email nêu: 'designed to foster interdisciplinary collaboration...accelerate innovation'. Ngữ pháp: 'Designed to + V' chỉ mục đích. Collocation: 'foster collaboration', 'accelerate innovation'. Kỹ năng đọc hiểu: Xác định mục tiêu chính."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - For how many years is funding secured?",
          options: [
            "One year",
            "Two years",
            "Three years",
            "Five years"
          ],
          correct: 2,
          explanation: "Email nêu: 'Funding has been secured...for the first three years'. Ngữ pháp: 'For + period'. Collocation: 'secured funding', 'three years'. Kỹ năng đọc hiểu: Xác định khoảng thời gian tài chính."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - What reporting frequency is required?",
          options: [
            "Monthly",
            "Quarterly",
            "Semi-annually",
            "Annually"
          ],
          correct: 1,
          explanation: "Email nêu: 'progress reports quarterly'. Ngữ pháp: Adverb chỉ tần suất. Collocation: 'progress reports', 'quarterly'. Kỹ năng đọc hiểu: Xác định tần suất báo cáo."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**EcoTech Solutions Advertisement**
Sustainable Technology for a Better Tomorrow
Transform your business operations with our cutting-edge eco-friendly solutions. We specialize in reducing carbon footprint while maximizing operational efficiency.
**Our Services:**
1. **Energy Audit and Optimization** – Comprehensive analysis and implementation of energy-saving measures. Average client savings: 30-40% on energy costs.
2. **Solar Installation and Maintenance** – Professional solar panel systems with 25-year warranty. ROI typically achieved within 5-7 years.
3. **Waste Management Systems** – Innovative recycling and waste reduction solutions integrated with your operations.
4. **Green Building Certification** – Expert consultation for LEED and BREEAM certifications.
Special Promotion: First-time clients receive 15% discount on initial consultations. Free ROI analysis for solar projects. Contact: info@ecotech.com | 1-800-ECOTECH
---
**Email Message**
**To:** info@ecotech.com
**From:** james.rodriguez@manufacturing.com
**Date:** March 8, 2025
**Subject:** Inquiry Regarding Energy Audit and Solar Installation
Dear EcoTech Solutions Team,

I am the Operations Manager at Rodriguez Manufacturing Inc., a mid-sized industrial facility. We currently consume approximately 500,000 kWh annually and are committed to reducing our environmental impact while lowering operational costs.

I am interested in your comprehensive energy audit service followed by solar panel installation. Our facility operates continuously, so any disruption to production must be minimized. Can you work around our 24/7 production schedule?

Additionally, I would like detailed information about the ROI timeline for solar installation in our region. What is the average payback period for industrial facilities like ours? Are there government incentives or tax credits available that could accelerate the ROI?

Our current energy bills average $45,000 monthly. If your typical 30-40% savings estimate applies, we could save significant funds. However, we need a detailed breakdown of all associated costs, including installation, permits, and maintenance.

Finally, I am interested in pursuing LEED certification for our facility. Can your team provide guidance on the certification process and timeline? What are the implementation costs?

I look forward to your comprehensive proposal.

Best regards,
James Rodriguez
Operations Manager
Rodriguez Manufacturing Inc.
james.rodriguez@manufacturing.com
(555) 789-0123`,
      questions: [
        {
          id: 41,
          question: "What is the warranty period for solar panels?",
          options: [
            "10 years",
            "15 years",
            "20 years",
            "25 years"
          ],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì 'Professional solar panel systems with 25-year warranty'. Ngữ pháp: 'With + noun' chỉ đặc tính sản phẩm. Collocation: 'warranty period', 'solar panels'. Kỹ năng đọc hiểu: Xác định thông tin sản phẩm."
        },
        {
          id: 42,
          question: "What typical energy cost savings percentage is mentioned?",
          options: [
            "15-20%",
            "20-25%",
            "30-40%",
            "45-50%"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Average client savings: 30-40% on energy costs'. Ngữ pháp: 'Average + percentage'. Collocation: 'energy savings', 'cost reduction'. Kỹ năng đọc hiểu: Xác định con số tiết kiệm."
        },
        {
          id: 43,
          question: "What is James Rodriguez's job title?",
          options: [
            "CEO",
            "Plant Manager",
            "Operations Manager",
            "Sustainability Director"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I am the Operations Manager'. Ngữ pháp: Present Simple (am). Collocation: 'Operations Manager', 'facility'. Kỹ năng đọc hiểu: Xác định vị trí công việc."
        },
        {
          id: 44,
          question: "What is Rodriguez Manufacturing's annual energy consumption?",
          options: [
            "250,000 kWh",
            "350,000 kWh",
            "450,000 kWh",
            "500,000 kWh"
          ],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì 'approximately 500,000 kWh annually'. Ngữ pháp: 'Approximately' adverb chỉ con số. Collocation: 'annual consumption', 'kWh'. Kỹ năng đọc hiểu: Xác định con số năng lượng."
        },
        {
          id: 45,
          question: "What is the facility's monthly energy bill?",
          options: [
            "$30,000",
            "$35,000",
            "$45,000",
            "$50,000"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Our current energy bills average $45,000 monthly'. Ngữ pháp: 'Average' verb/noun. Collocation: 'energy bills', 'monthly'. Kỹ năng đọc hiểu: Xác định chi phí."
        },
        {
          id: 46,
          question: "What is the typical ROI payback period for solar installation?",
          options: [
            "3-5 years",
            "5-7 years",
            "7-10 years",
            "10-15 years"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'ROI typically achieved within 5-7 years'. Ngữ pháp: 'Within' giới từ chỉ khoảng thời gian. Collocation: 'ROI payback', 'years'. Kỹ năng đọc hiểu: Xác định thời gian hoàn vốn."
        },
        {
          id: 47,
          question: "What is a major concern for Rodriguez Manufacturing?",
          options: [
            "Installation costs only",
            "Minimizing production disruption due to 24/7 operations",
            "Solar panel warranty",
            "Marketing benefits"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Any disruption to production must be minimized...24/7 production schedule'. Ngữ pháp: Modal 'must' chỉ yêu cầu bắt buộc. Collocation: 'production disruption', '24/7 operations'. Kỹ năng đọc hiểu: Xác định lo ngại."
        },
        {
          id: 48,
          question: "What additional certification does James want to pursue?",
          options: [
            "ISO certification",
            "LEED certification",
            "BREEAM only",
            "Environmental award"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I am interested in pursuing LEED certification'. Ngữ pháp: Present Continuous (am interested in pursuing). Collocation: 'LEED certification', 'facility'. Kỹ năng đọc hiểu: Xác định sự quan tâm thêm."
        },
        {
          id: 49,
          question: "What information does James request about ROI?",
          options: [
            "Total project cost only",
            "Payback period, government incentives, and tax credits",
            "Installation timeline",
            "Warranty details"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email yêu cầu 'average payback period...government incentives or tax credits'. Ngữ pháp: 'Or' liên từ nối các yêu cầu. Collocation: 'payback period', 'tax credits'. Kỹ năng đọc hiểu: Xác định yêu cầu chi tiết."
        },
        {
          id: 50,
          question: "What discount is mentioned for first-time clients?",
          options: [
            "10% discount",
            "15% discount",
            "20% discount",
            "25% discount"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'First-time clients receive 15% discount on initial consultations'. Ngữ pháp: Present Simple (receive). Collocation: 'discount on consultation', 'first-time clients'. Kỹ năng đọc hiểu: Xác định khuyến mãi."
        }
      ]
    },
    part8: {
      title: "PART 8: Professional Message Thread",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn/email chuyên nghiệp về quản lý dự án, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Product Manager (08:30): Team, the client has requested several feature enhancements for the next release. I've compiled feedback from the last three quarters. Let's review priorities during today's standup.

Developer Lead (08:45): How many features are we discussing? Our current sprint capacity is 80 story points, and we're already at 75% capacity.

Designer (09:00): I've prepared mockups for five potential features. However, two of them require significant backend restructuring that could impact timeline.

Product Manager (09:15): Good point. Let's categorize by complexity and client impact. We can defer low-impact items to Q3 release if needed.

Developer Lead (09:30): That approach makes sense. What's the client deadline for this release?

Product Manager (09:45): The client expects delivery by June 30th. We have approximately 12 weeks. That's tight but achievable if we prioritize ruthlessly.

QA Lead (10:00): I'll need the final feature list by next Friday to develop comprehensive test cases. What's the expected release candidate date?

Product Manager (10:15): We'll aim for June 20th RC date. That gives QA 10 days for regression testing before final deployment.

Developer Lead (10:30): That's feasible. I'll communicate the priorities to the team immediately and we'll begin development next Monday.

Designer (10:45): I can have all mockups finalized by the end of this week. Should we schedule design review sessions?

Product Manager (11:00): Yes, let's schedule design reviews for Wednesday and Thursday. This release is critical for client satisfaction.`,
      questions: [
        {
          id: 51,
          question: "What is the current sprint capacity status?",
          options: [
            "25% utilized",
            "50% utilized",
            "75% utilized",
            "90% utilized"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'We're already at 75% capacity'. Ngữ pháp: Present Continuous (are at). Collocation: 'sprint capacity', 'story points'. Kỹ năng đọc hiểu: Xác định tỷ lệ sử dụng."
        },
        {
          id: 52,
          question: "How many potential features have mockups prepared?",
          options: [
            "Three",
            "Four",
            "Five",
            "Six"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I've prepared mockups for five potential features'. Ngữ pháp: Present Perfect (have prepared). Collocation: 'mockups for features'. Kỹ năng đọc hiểu: Xác định con số."
        },
        {
          id: 53,
          question: "What is the client delivery deadline?",
          options: [
            "May 30th",
            "June 15th",
            "June 30th",
            "July 15th"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'The client expects delivery by June 30th'. Ngữ pháp: 'By' giới từ chỉ thời hạn. Collocation: 'delivery deadline', 'expects'. Kỹ năng đọc hiểu: Xác định thời hạn."
        },
        {
          id: 54,
          question: "Approximately how many weeks are available for development?",
          options: [
            "8 weeks",
            "10 weeks",
            "12 weeks",
            "14 weeks"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'We have approximately 12 weeks'. Ngữ pháp: 'Approximately' adverb chỉ con số. Collocation: 'weeks available', 'development'. Kỹ năng đọc hiểu: Xác định thời gian khả dụng."
        },
        {
          id: 55,
          question: "What date does the QA Lead need the final feature list?",
          options: [
            "This Monday",
            "Next Wednesday",
            "Next Friday",
            "Next Monday"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I'll need the final feature list by next Friday'. Ngữ pháp: 'By' giới từ chỉ thời hạn. Collocation: 'feature list', 'test cases'. Kỹ năng đọc hiểu: Xác định thời hạn."
        },
        {
          id: 56,
          question: "What is the expected Release Candidate (RC) date?",
          options: [
            "June 10th",
            "June 15th",
            "June 20th",
            "June 25th"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'We'll aim for June 20th RC date'. Ngữ pháp: Future Simple (will aim). Collocation: 'RC date', 'release'. Kỹ năng đọc hiểu: Xác định ngày phát hành ứng viên."
        },
        {
          id: 57,
          question: "How many days will QA have for regression testing?",
          options: [
            "5 days",
            "8 days",
            "10 days",
            "15 days"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'That gives QA 10 days for regression testing'. Ngữ pháp: Present Simple (gives). Collocation: 'regression testing', 'before deployment'. Kỹ năng đọc hiểu: Xác định khoảng thời gian kiểm tra."
        },
        {
          id: 58,
          question: "When will the developer team begin development?",
          options: [
            "Today",
            "Tomorrow",
            "Next Monday",
            "Next Wednesday"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'we'll begin development next Monday'. Ngữ pháp: Future Simple (will begin). Collocation: 'begin development', 'next Monday'. Kỹ năng đọc hiểu: Xác định thời gian bắt đầu."
        },
        {
          id: 59,
          question: "When can the designer have all mockups finalized?",
          options: [
            "By end of today",
            "By end of this week",
            "By next Monday",
            "By next Friday"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I can have all mockups finalized by the end of this week'. Ngữ pháp: Modal 'can' + Future (have finalized). Collocation: 'mockups finalized', 'end of week'. Kỹ năng đọc hiểu: Xác định khoảng thời gian."
        },
        {
          id: 60,
          question: "What is the overall sentiment of the team?",
          options: [
            "Frustrated about the timeline",
            "Pessimistic about capacity",
            "Organized and confident they can deliver",
            "Concerned about client expectations"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì tone của chuỗi tích cực: 'That's feasible', 'That approach makes sense', 'achievable'. Ngữ pháp: Positive language throughout. Collocation: 'feasible', 'achievable', 'organized'. Kỹ năng đọc hiểu: Suy luận thái độ chung."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam16.js">
export const EXAM16_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 16 (Advanced Level)",
  description: "Bộ đề nâng cao với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Tập trung vào nghe suy luận, ngữ pháp nâng cao và đọc hiểu đa văn bản.",
  parts: {
    // ============================================
    // LISTENING PARTS (20 questions)
    // ============================================
    
    part1: {
      title: "PART 1: Extended Conversation - Travel Planning",
      description: "Nghe đoạn hội thoại giữa Jennifer và Travel Agent về kế hoạch du lịch. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: `Travel Agent: Good morning! Welcome to Global Travel Services. How can I help you today?
Jennifer: Hi, thanks. I'm planning a two-week trip to Southeast Asia next month, specifically Vietnam and Thailand. I've been researching online but I'm overwhelmed by all the options.
Travel Agent: I completely understand. Southeast Asia offers incredible diversity. When exactly are you planning to travel?
Jennifer: I'm flexible with dates, but I'd prefer to avoid the rainy season. I was thinking early November, but I heard that might not be ideal for all regions.
Travel Agent: Actually, early November is transitional. In Vietnam, the weather varies significantly by region - the north experiences cooler temperatures while the south remains warm and humid. Thailand is entering its cool, dry season, which is perfect for tourism. However, some coastal areas might still see occasional rainfall.
Jennifer: That's helpful to know. I'm particularly interested in cultural experiences rather than just beach resorts. I want to visit historical sites, try authentic local cuisine, and maybe take some cooking classes.
Travel Agent: Excellent choices. For cultural immersion, I'd strongly recommend Hanoi's Old Quarter in Vietnam - the architecture, street food scene, and museums are exceptional. In Thailand, Chiang Mai offers incredible temples and renowned cooking schools. Have you considered your accommodation preferences?
Jennifer: I'm looking for mid-range hotels - nothing too luxurious, but clean and well-located. I'd rather spend my budget on experiences than accommodation.
Travel Agent: Smart thinking. That budget will give you excellent options in both countries. One important thing - have you checked visa requirements? Vietnam requires advance e-visa application for most nationalities, while Thailand offers visa exemption for many countries for stays under 30 days.
Jennifer: Oh, I hadn't thought about visas yet! I'll need to look into that immediately. Also, what about transportation between cities?
Travel Agent: Domestic flights are surprisingly affordable and save considerable time. However, if you're not in a rush, overnight trains in Vietnam offer a unique experience and you'll save on one night's accommodation. In Thailand, the bus network is extensive and very reliable.`,
      questions: [
        {
          id: 1,
          question: "Why is Jennifer visiting the travel agency?",
          options: [
            "She wants to cancel a previous booking",
            "She needs help planning a Southeast Asia trip",
            "She is applying for a travel agent position",
            "She wants to complain about a recent trip"
          ],
          correct: 1,
          explanation: "Jennifer nói rõ: 'I'm planning a two-week trip to Southeast Asia next month... I've been researching online but I'm overwhelmed by all the options.' Cô ấy đến để được tư vấn kế hoạch du lịch vì cảm thấy quá nhiều lựa chọn và cần sự hỗ trợ chuyên nghiệp."
        },
        {
          id: 2,
          question: "What can be inferred about Jennifer's travel style?",
          options: [
            "She prefers luxury beach resorts",
            "She values cultural experiences over luxury accommodation",
            "She only wants to visit famous tourist attractions",
            "She prefers traveling during peak season"
          ],
          correct: 1,
          explanation: "Jennifer phát biểu: 'I'm particularly interested in cultural experiences rather than just beach resorts' và 'I'd rather spend my budget on experiences than accommodation.' Điều này cho thấy cô ưu tiên trải nghiệm văn hóa hơn là chỗ ở sang trọng."
        },
        {
          id: 3,
          question: "According to the travel agent, what is TRUE about weather in early November?",
          options: [
            "It's rainy season throughout Southeast Asia",
            "Vietnam has uniform weather across all regions",
            "Thailand is entering its cool, dry season",
            "All coastal areas have perfect weather"
          ],
          correct: 2,
          explanation: "Travel Agent nói rõ: 'Thailand is entering its cool, dry season, which is perfect for tourism.' Đây là thông tin chính xác về thời tiết Thái Lan vào đầu tháng 11. Các đáp án khác sai vì thời tiết không đồng nhất ở tất cả khu vực."
        },
        {
          id: 4,
          question: "What does the travel agent recommend for cultural immersion?",
          options: [
            "Beach resorts in southern Thailand",
            "Hanoi's Old Quarter and Chiang Mai",
            "Only luxury hotels in major cities",
            "Avoiding street food completely"
          ],
          correct: 1,
          explanation: "Travel Agent khuyến nghị: 'I'd strongly recommend Hanoi's Old Quarter in Vietnam... In Thailand, Chiang Mai offers incredible temples and renowned cooking schools.' Đây là hai địa điểm chính được đề xuất cho trải nghiệm văn hóa."
        },
        {
          id: 5,
          question: "What important requirement does Jennifer need to address immediately?",
          options: [
            "Booking accommodation",
            "Purchasing travel insurance",
            "Checking visa requirements",
            "Learning local languages"
          ],
          correct: 2,
          explanation: "Khi Travel Agent nói về visa requirements, Jennifer phản ứng: 'Oh, I hadn't thought about visas yet! I'll need to look into that immediately.' Đây là việc cấp bách cô cần xử lý ngay."
        }
      ]
    },

    part2: {
      title: "PART 2: Business Meeting Discussion",
      description: "5 câu hỏi - Nghe cuộc họp giữa Manager, HR Rep và Jennifer về chiến lược nhân sự. Chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: `Manager: Thanks everyone for joining this quarterly review meeting. Let's start with our hiring progress. HR, could you update us on the recruitment campaign we launched last month?
HR Rep: Certainly. We received over 200 applications for the five open positions - significantly higher than our previous campaign. However, the quality varied considerably. After initial screening, we shortlisted 25 candidates for first-round interviews.
Manager: That's impressive volume. Jennifer, as team lead, what's your assessment of the candidates you've interviewed so far?
Jennifer: I've completed interviews with eight candidates for the senior analyst position. Honestly, I'm concerned. While they have strong technical qualifications on paper, most lack the problem-solving skills and adaptability we desperately need. Only two candidates demonstrated the critical thinking ability required for our fast-paced environment.
Manager: That's disappointing but valuable feedback. What specific gaps are you observing?
Jennifer: Many candidates can recite theoretical knowledge perfectly, but when presented with real-world scenarios, they struggle to apply that knowledge creatively. For instance, I asked about handling conflicting project deadlines - a common situation here - and most gave generic, textbook responses rather than demonstrating practical judgment.
HR Rep: This aligns with feedback from other departments too. Perhaps we need to revise our job descriptions to emphasize practical experience more explicitly, and modify our interview process to include more scenario-based questions.
Manager: Agreed. Jennifer, I'd like you to collaborate with HR to redesign the interview framework. Let's incorporate case studies and situational exercises. Also, we should consider extending the probation period from three to six months for senior positions to better evaluate real performance.
Jennifer: That makes sense. I'd also suggest implementing a brief paid trial project before making final offers - perhaps a one-week consulting arrangement. It would give both parties a realistic preview.
HR Rep: Interesting idea, though we'd need to ensure it complies with labor regulations. I'll research the legal implications and cost considerations. One concern - this might extend our hiring timeline by several weeks.
Manager: True, but hiring the wrong person costs us far more in the long run. Quality over speed should be our priority. Let's target completion of the redesigned process by the end of next month.`,
      questions: [
        {
          id: 6,
          question: "What problem does Jennifer identify with the candidates?",
          options: [
            "They lack theoretical knowledge",
            "They have insufficient work experience",
            "They cannot apply knowledge to real situations",
            "They demand unreasonably high salaries"
          ],
          correct: 2,
          explanation: "Jennifer giải thích rõ: 'Many candidates can recite theoretical knowledge perfectly, but when presented with real-world scenarios, they struggle to apply that knowledge creatively.' Vấn đề chính là khả năng áp dụng kiến thức vào thực tế, không phải thiếu lý thuyết."
        },
        {
          id: 7,
          question: "What does the Manager ask Jennifer to do?",
          options: [
            "Hire more candidates immediately",
            "Reduce the number of interview rounds",
            "Collaborate with HR to redesign the interview process",
            "Lower the qualification requirements"
          ],
          correct: 2,
          explanation: "Manager chỉ định rõ ràng: 'Jennifer, I'd like you to collaborate with HR to redesign the interview framework. Let's incorporate case studies and situational exercises.' Đây là nhiệm vụ cụ thể được giao cho Jennifer."
        },
        {
          id: 8,
          question: "What innovative suggestion does Jennifer propose?",
          options: [
            "Increasing starting salaries",
            "Implementing a paid trial project before hiring",
            "Eliminating the interview process entirely",
            "Hiring only internal candidates"
          ],
          correct: 1,
          explanation: "Jennifer đề xuất: 'I'd also suggest implementing a brief paid trial project before making final offers - perhaps a one-week consulting arrangement.' Đây là ý tưởng sáng tạo để đánh giá ứng viên thực tế trước khi quyết định tuyển dụng."
        },
        {
          id: 9,
          question: "What concern does the HR Rep raise about Jennifer's suggestion?",
          options: [
            "It would be too expensive",
            "Candidates would refuse to participate",
            "It might extend the hiring timeline",
            "It's impossible to implement"
          ],
          correct: 2,
          explanation: "HR Rep nêu lo ngại: 'One concern - this might extend our hiring timeline by several weeks.' Mối quan tâm chính là việc kéo dài thời gian tuyển dụng, mặc dù ý tưởng tốt nhưng cần cân nhắc về thời gian."
        },
        {
          id: 10,
          question: "What is the Manager's overall priority for the hiring process?",
          options: [
            "Completing recruitment as quickly as possible",
            "Hiring the maximum number of candidates",
            "Prioritizing quality over speed",
            "Reducing recruitment costs"
          ],
          correct: 2,
          explanation: "Manager khẳng định rõ ràng: 'True, but hiring the wrong person costs us far more in the long run. Quality over speed should be our priority.' Chất lượng ứng viên quan trọng hơn tốc độ tuyển dụng."
        }
      ]
    },

    part3: {
      title: "PART 3: Academic Lecture - Environmental Policy",
      description: "5 câu hỏi - Nghe bài giảng của Professor Mitchell về chính sách môi trường. Chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: `Professor Mitchell: Good afternoon, everyone. Today we're examining the evolution of environmental policy in developed nations over the past three decades. This topic is particularly relevant as we witness increasing global climate challenges.
Let me begin by addressing a common misconception. Many students assume environmental regulations automatically harm economic growth. However, comprehensive studies from the OECD demonstrate that well-designed environmental policies can actually stimulate innovation and create new industries. The renewable energy sector, for instance, now employs more people globally than traditional fossil fuel industries - a trend that has accelerated dramatically since 2010.
Now, let's consider a specific case study: the European Union's Emissions Trading System, established in 2005. Initially, this market-based approach faced significant criticism. Industries complained about compliance costs, and environmental groups argued the system was too lenient. However, twenty years of data reveal a nuanced picture. Carbon emissions from participating sectors decreased by approximately 35%, while economic output in these same sectors actually increased. This suggests that the initial adjustment period, though challenging, ultimately drove technological improvements and operational efficiency.
What made this policy relatively successful? Three key factors emerge from the research. First, the gradual implementation timeline gave businesses adequate time to adapt their operations rather than facing abrupt, disruptive changes. Second, the policy included provisions to prevent "carbon leakage" - where companies simply relocate to countries with weaker environmental standards. Third, revenue generated from carbon permit auctions was partially reinvested into research and development of clean technologies.
However, we must acknowledge the limitations. The system primarily addresses large industrial emitters while transportation and agriculture - significant contributors to emissions - remain largely outside its scope. Additionally, the policy's effectiveness depends heavily on setting appropriate emission caps, which has proven politically contentious.
Looking ahead, the next generation of environmental policy faces a critical challenge: balancing immediate economic concerns with long-term sustainability. Recent political backlash against environmental regulations in several countries demonstrates that public support cannot be taken for granted. Policymakers must ensure that transition costs don't disproportionately burden working-class communities, or risk undermining the political coalition necessary for sustained action.
Your assignment for next week is to analyze a different environmental policy framework from a country of your choice and prepare a critical evaluation applying the analytical framework we've discussed today. Please submit your analysis to the course portal by Friday at 5 PM. Late submissions, as stated in the syllabus, will receive a 10% deduction per day.`,
      questions: [
        {
          id: 11,
          question: "What common misconception does Professor Mitchell address?",
          options: [
            "Environmental policies always boost economic growth",
            "Environmental regulations necessarily harm economic growth",
            "Renewable energy cannot create jobs",
            "Climate change is not a serious issue"
          ],
          correct: 1,
          explanation: "Professor Mitchell nói rõ: 'Many students assume environmental regulations automatically harm economic growth. However, comprehensive studies... demonstrate that well-designed environmental policies can actually stimulate innovation.' Ông đang bác bỏ quan niệm sai lầm rằng quy định môi trường luôn gây hại cho tăng trưởng kinh tế."
        },
        {
          id: 12,
          question: "What does the professor say about the renewable energy sector?",
          options: [
            "It employs fewer people than fossil fuel industries",
            "It has declined since 2010",
            "It now employs more people globally than traditional fossil fuel industries",
            "It only exists in European countries"
          ],
          correct: 2,
          explanation: "Giáo sư phát biểu: 'The renewable energy sector... now employs more people globally than traditional fossil fuel industries - a trend that has accelerated dramatically since 2010.' Đây là minh chứng cho thấy chính sách môi trường có thể tạo việc làm."
        },
        {
          id: 13,
          question: "According to the lecture, what happened to emissions under the EU's Emissions Trading System?",
          options: [
            "They increased by 35%",
            "They remained unchanged",
            "They decreased by approximately 35%",
            "They were completely eliminated"
          ],
          correct: 2,
          explanation: "Professor Mitchell nêu kết quả: 'Carbon emissions from participating sectors decreased by approximately 35%, while economic output in these same sectors actually increased.' Con số 35% giảm phát thải là thành tựu quan trọng."
        },
        {
          id: 14,
          question: "What is mentioned as a limitation of the EU system?",
          options: [
            "It covers all emission sources comprehensively",
            "Transportation and agriculture remain largely outside its scope",
            "It has eliminated all carbon emissions",
            "It costs nothing to implement"
          ],
          correct: 1,
          explanation: "Giáo sư chỉ ra hạn chế: 'The system primarily addresses large industrial emitters while transportation and agriculture - significant contributors to emissions - remain largely outside its scope.' Đây là điểm yếu quan trọng của chính sách."
        },
        {
          id: 15,
          question: "What penalty applies to late assignment submissions?",
          options: [
            "5% deduction per day",
            "10% deduction per day",
            "Complete rejection",
            "No penalty"
          ],
          correct: 1,
          explanation: "Professor Mitchell nhắc nhở: 'Late submissions, as stated in the syllabus, will receive a 10% deduction per day.' Đây là quy định rõ ràng về hình phạt nộp bài trễ."
        }
      ]
    },

    part4: {
      title: "PART 4: Customer Service Call - Product Return",
      description: "5 câu hỏi - Nghe cuộc gọi giữa Customer (Anna) và Sales Associate về hoàn trả sản phẩm. Chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: `Sales Associate: Thank you for calling TechMart Customer Service. This is Alex speaking. How may I assist you today?
Anna: Hi Alex. I'm calling about a laptop I purchased from your store three weeks ago. I'm experiencing some serious issues and I'd like to discuss my options for returning or exchanging it.
Sales Associate: I'm sorry to hear you're having problems. I'd be happy to help. Could you provide your order number so I can pull up your account?
Anna: Yes, it's TM-2024-8756. I bought the ProBook 15 model.
Sales Associate: Thank you, I have your order here. I see you purchased it on October 28th. Can you describe the specific issues you're experiencing?
Anna: The laptop randomly shuts down during use, usually after about 30 minutes of operation. Initially I thought it might be overheating, so I made sure it had proper ventilation and wasn't running too many programs simultaneously. But the problem persists even when I'm just browsing the internet with minimal applications open. Additionally, the battery drains extremely quickly - I'm getting maybe two hours of use on a full charge, though the specifications promised up to eight hours.
Sales Associate: That definitely doesn't sound normal. Those issues suggest either a hardware defect or possibly a software configuration problem. Have you installed any third-party software or made system modifications since purchase?
Anna: No, I've only installed Microsoft Office and a few standard applications. Nothing unusual. I actually work in IT, so I'm quite familiar with troubleshooting these types of issues. I've already tried factory resetting the device, updating all drivers, and running diagnostic tests. The hardware diagnostics indicate the battery health is at only 65%, which is terrible for a brand-new laptop.
Sales Associate: Given your technical background and the troubleshooting you've already completed, it does sound like a manufacturing defect rather than a user error. Under our return policy, you have 30 days from purchase date for a full refund, which means you're still within that window - you have one week remaining. Alternatively, we can process an exchange for an identical model or a different laptop of equal or lesser value.
Anna: Honestly, after this experience, I've lost confidence in this particular model. I'd prefer a refund so I can purchase a different brand entirely. I've done more research and found several concerning reviews about this model having similar battery and overheating issues.
Sales Associate: That's completely understandable. I can certainly process a refund for you. To complete this, you'll need to return the laptop to any TechMart location along with all original accessories, packaging, and your receipt. Once we verify the condition of the device, the refund will be credited back to your original payment method within 5-7 business days.
Anna: What condition does it need to be in? I mean, I've been using it for three weeks, so there might be minor cosmetic wear.
Sales Associate: As long as there's no significant physical damage - like cracks, dents, or liquid damage - minor wear from normal use is acceptable. The return would only be rejected if the device shows signs of abuse or damage beyond normal operation.
Anna: That's fine. One more question - will I need to wait in line at the store, or can I schedule an appointment for the return?
Sales Associate: You can absolutely schedule an appointment through our website, which I'd recommend during weekends when stores tend to be busier. Weekday mornings are typically less crowded if you have flexibility.`,
      questions: [
        {
          id: 16,
          question: "What is Anna's primary complaint about the laptop?",
          options: [
            "The screen is cracked",
            "It randomly shuts down and has poor battery life",
            "The keyboard doesn't work",
            "It's too heavy to carry"
          ],
          correct: 1,
          explanation: "Anna mô tả hai vấn đề chính: 'The laptop randomly shuts down during use... Additionally, the battery drains extremely quickly.' Đây là hai lỗi nghiêm trọng ảnh hưởng đến việc sử dụng."
        },
        {
          id: 17,
          question: "What can be inferred about Anna's technical knowledge?",
          options: [
            "She knows nothing about computers",
            "She has professional IT experience",
            "She is a student learning about technology",
            "She refuses to troubleshoot problems"
          ],
          correct: 1,
          explanation: "Anna tiết lộ: 'I actually work in IT, so I'm quite familiar with troubleshooting these types of issues. I've already tried factory resetting the device, updating all drivers...' Cô có chuyên môn IT và đã tự khắc phục sự cố chuyên nghiệp."
        },
        {
          id: 18,
          question: "How much time does Anna have remaining to return the laptop for a full refund?",
          options: [
            "30 days",
            "Two weeks",
            "One week",
            "One day"
          ],
          correct: 2,
          explanation: "Sales Associate xác nhận: 'Under our return policy, you have 30 days from purchase date for a full refund, which means you're still within that window - you have one week remaining.' Anna mua ngày 28/10, đã qua 3 tuần, còn 1 tuần."
        },
        {
          id: 19,
          question: "Why does Anna prefer a refund over an exchange?",
          options: [
            "She doesn't need a laptop anymore",
            "She wants to buy a cheaper model",
            "She has lost confidence in this model after finding concerning reviews",
            "She plans to buy from a competitor immediately"
          ],
          correct: 2,
          explanation: "Anna giải thích: 'I've lost confidence in this particular model. I've done more research and found several concerning reviews about this model having similar battery and overheating issues.' Cô muốn đổi thương hiệu khác vì mất niềm tin."
        },
        {
          id: 20,
          question: "What advice does the Sales Associate give about avoiding wait times?",
          options: [
            "Come during weekend afternoons",
            "Schedule an appointment or visit on weekday mornings",
            "Call ahead every time",
            "Only visit on public holidays"
          ],
          correct: 1,
          explanation: "Sales Associate khuyên: 'You can schedule an appointment through our website... Weekday mornings are typically less crowded if you have flexibility.' Đây là hai cách tránh xếp hàng đông người."
        }
      ]
    },

    // ============================================
    // READING PARTS (40 questions)
    // ============================================

    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The company's new training program has proven to be highly _______ in improving employee productivity.",
          options: ["effect", "effective", "effectively", "effectiveness"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'effective'. Cấu trúc: 'to be + tính từ'. Câu cần một tính từ để mô tả chương trình đào tạo. 'Effective' (hiệu quả) là tính từ phù hợp. (A) 'effect' là danh từ, (C) 'effectively' là trạng từ, (D) 'effectiveness' là danh từ."
        },
        {
          id: 22,
          question: "_______ the unexpected delays in shipment, the project was completed on schedule.",
          options: ["Although", "Despite", "Because", "Since"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'Despite'. Cấu trúc: 'Despite + noun phrase' = mặc dù. Câu nói rằng mặc dù có trễ hàng, dự án vẫn hoàn thành đúng hạn. (A) 'Although' cần mệnh đề (+ subject + verb), (C) 'Because' và (D) 'Since' diễn tả nguyên nhân - sai logic."
        },
        {
          id: 23,
          question: "The marketing department is seeking candidates who can work _______ under pressure and meet tight deadlines.",
          options: ["independent", "independently", "independence", "depend"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'independently'. Sau động từ 'work' cần trạng từ để mô tả cách thức làm việc. 'Independently' (một cách độc lập) là trạng từ chính xác. (A) là tính từ, (C) là danh từ, (D) là động từ khác nghĩa."
        },
        {
          id: 24,
          question: "All employees must submit their annual performance reviews _______ Friday, December 15.",
          options: ["until", "by", "during", "since"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'by'. 'By + deadline' = trước hạn chót, không muộn hơn. Nghĩa: nhân viên phải nộp báo cáo trước hoặc vào ngày 15/12. (A) 'until' = cho đến khi (hành động kéo dài), (C) 'during' = trong suốt, (D) 'since' dùng với thì hoàn thành."
        },
        {
          id: 25,
          question: "The conference organizers have arranged for simultaneous translation services to _______ smooth communication between international participants.",
          options: ["ensure", "insure", "assure", "confirm"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'ensure'. 'Ensure' = đảm bảo rằng điều gì đó xảy ra. Đây là collocation chuẩn trong ngữ cảnh tổ chức sự kiện. (B) 'insure' = bảo hiểm, (C) 'assure' + person (đảm bảo với ai đó), (D) 'confirm' = xác nhận - nghĩa khác."
        },
        {
          id: 26,
          question: "The new software update includes several features that will significantly _______ our data analysis capabilities.",
          options: ["enhance", "enhances", "enhancing", "enhanced"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'enhance'. Cấu trúc: 'will + V nguyên thể'. Câu sử dụng thì tương lai đơn. (B) 'enhances' là V chia ngôi thứ ba - sai, (C) 'enhancing' là V-ing - không dùng sau 'will', (D) 'enhanced' là V3 - không dùng trong tương lai đơn."
        },
        {
          id: 27,
          question: "_______ increasing competition in the market, our company has maintained its leading position through continuous innovation.",
          options: ["Because", "Although", "Despite", "Unless"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'Despite'. 'Despite + noun phrase' (mặc dù) diễn tả sự tương phản: cạnh tranh tăng NHƯNG công ty vẫn giữ vị trí dẫn đầu. (A) 'Because' = vì (nguyên nhân) - sai logic, (B) 'Although' cần mệnh đề, (D) 'Unless' = trừ khi - sai nghĩa."
        },
        {
          id: 28,
          question: "The board of directors has requested a _______ analysis of the proposed merger before making a final decision.",
          options: ["comprehend", "comprehensive", "comprehension", "comprehensively"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'comprehensive'. Cần tính từ đứng trước danh từ 'analysis' để mô tả loại phân tích. 'Comprehensive' (toàn diện, đầy đủ) là tính từ phù hợp. (A) là động từ, (C) là danh từ, (D) là trạng từ."
        },
        {
          id: 29,
          question: "Employees are encouraged to _______ with colleagues from different departments to foster innovation and knowledge sharing.",
          options: ["compete", "cooperate", "compare", "complain"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'cooperate'. 'Cooperate with' = hợp tác với. Ngữ cảnh khuyến khích nhân viên hợp tác để thúc đẩy đổi mới. (A) 'compete' = cạnh tranh - sai logic, (C) 'compare' = so sánh - không phù hợp, (D) 'complain' = phàn nàn - sai nghĩa hoàn toàn."
        },
        {
          id: 30,
          question: "The company's revenue has increased _______ over the past three years due to successful market expansion strategies.",
          options: ["steady", "steadily", "steadiness", "steadied"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'steadily'. Cần trạng từ để bổ nghĩa cho động từ 'has increased'. 'Steadily' (một cách đều đặn, liên tục) mô tả cách thức tăng trưởng. (A) 'steady' là tính từ, (C) 'steadiness' là danh từ, (D) 'steadied' là động từ quá khứ - không phù hợp với hiện tại hoàn thành."
        }
      ]
    },

    part6: {
      title: "PART 6: Cloze Text (Company Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản thông báo công ty. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `To: All Staff
From: Michael Chen, Operations Director
Subject: New Remote Work Policy Implementation
Date: November 20, 2025

Dear Colleagues,

Following extensive consultation with department heads and employee representatives, I am pleased to announce the implementation of our new flexible remote work policy, effective January 1, 2026.

Under this policy, eligible employees will be permitted to work remotely up to three days per week, subject to manager approval and operational requirements. This initiative aims to (31) work-life balance while maintaining our commitment to collaborative teamwork and productivity.

To ensure smooth implementation, we have established clear guidelines. Employees must (32) a remote work agreement with their direct supervisor outlining specific work days, communication protocols, and performance expectations. All remote workers are required to remain accessible during core business hours (9 AM - 3 PM) and attend mandatory in-person meetings as scheduled.

Our IT department has worked diligently to (33) the necessary technological infrastructure. All approved remote workers will receive a company laptop, secure VPN access, and technical support. Please note that employees are responsible for maintaining a professional home workspace with reliable internet connectivity.

Department managers will evaluate remote work requests based on several criteria: job responsibilities, performance history, and team coordination needs. Positions requiring physical presence - such as facilities management and reception - will naturally have (34) flexibility than roles that are primarily computer-based.

This policy represents a significant shift in our organizational culture. We recognize that (35) to new work arrangements may present challenges initially. Therefore, we will conduct a comprehensive review after six months to assess the policy's effectiveness and gather feedback for potential adjustments.

Training sessions on remote work best practices, time management, and digital collaboration tools will be offered throughout December. Attendance is highly encouraged, (36) for employees who have limited experience with remote work arrangements.

We believe this policy will enhance employee satisfaction and help us attract top talent in an increasingly competitive job market. However, success depends on everyone's commitment to maintaining professionalism, communication, and accountability (37) of work location.

Please review the complete policy document attached to this email carefully. If you have questions or concerns, you may (38) our HR department at hr@company.com or attend one of the information sessions scheduled for next week.

Department managers will begin accepting remote work applications starting December 1. We encourage you to (39) with your supervisor to determine whether remote work is suitable for your role and to develop a plan that serves both your needs and the team's objectives.

Thank you for your continued dedication to our organization. We are confident that this policy will contribute to a more (40) and productive work environment for all.

Best regards,
Michael Chen
Operations Director`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "This initiative aims to (31) work-life balance...",
          options: ["reduce", "improve", "ignore", "complicate"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'improve'. 'Improve work-life balance' (cải thiện sự cân bằng giữa công việc và cuộc sống) là collocation phổ biến và hợp lý với chính sách làm việc từ xa. (A) 'reduce' = giảm - sai nghĩa, (C) 'ignore' = bỏ qua - sai logic, (D) 'complicate' = làm phức tạp - tiêu cực."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "Employees must (32) a remote work agreement with their direct supervisor...",
          options: ["cancel", "complete", "avoid", "forget"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'complete'. 'Complete an agreement' (hoàn thành/ký kết thỏa thuận) là cách diễn đạt chuẩn trong văn bản công việc. Nhân viên phải hoàn thành thỏa thuận trước khi làm việc từ xa. (A) 'cancel' = hủy - sai logic, (C) 'avoid' = tránh - sai nghĩa, (D) 'forget' = quên - không hợp lý."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "Our IT department has worked diligently to (33) the necessary technological infrastructure.",
          options: ["destroy", "establish", "remove", "prevent"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'establish'. 'Establish infrastructure' (thiết lập cơ sở hạ tầng) là collocation chuẩn. IT đã làm việc để xây dựng hệ thống công nghệ cần thiết. (A) 'destroy' = phá hủy - sai nghĩa hoàn toàn, (C) 'remove' = loại bỏ - sai logic, (D) 'prevent' = ngăn chặn - không phù hợp."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "...will naturally have (34) flexibility than roles that are primarily computer-based.",
          options: ["more", "less", "equal", "similar"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'less'. Logic: công việc yêu cầu có mặt trực tiếp (facilities management, reception) sẽ có ÍT linh hoạt HƠN ('less flexibility than') so với công việc trên máy tính. (A) 'more' - sai logic ngược, (C) 'equal' và (D) 'similar' - không hợp với cấu trúc so sánh 'than'."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "We recognize that (35) to new work arrangements may present challenges initially.",
          options: ["adapting", "returning", "objecting", "refusing"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'adapting'. 'Adapting to' (thích nghi với) là collocation chuẩn. Công ty nhận ra rằng việc thích nghi với cách làm việc mới có thể gặp khó khăn ban đầu. (B) 'returning' = quay lại - không phù hợp, (C) 'objecting' = phản đối - tiêu cực, (D) 'refusing' = từ chối - sai nghĩa."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "Attendance is highly encouraged, (36) for employees who have limited experience...",
          options: ["except", "never", "especially", "rarely"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'especially'. 'Especially for' (đặc biệt là cho) nhấn mạnh nhóm đối tượng cần tham gia training nhiều nhất: nhân viên ít kinh nghiệm làm việc từ xa. (A) 'except' = ngoại trừ - sai logic ngược, (B) 'never' và (D) 'rarely' - sai nghĩa hoàn toàn."
        },
        {
          id: 37,
          type: "fill",
          question: "(37) - Điền từ thích hợp",
          context: "...maintaining professionalism, communication, and accountability (37) of work location.",
          options: ["because", "regardless", "instead", "in case"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'regardless'. 'Regardless of' = bất kể, không phụ thuộc vào. Nghĩa: duy trì tính chuyên nghiệp BẤT KỂ làm việc ở đâu (văn phòng hay nhà). (A) 'because of' = vì - sai nghĩa, (C) 'instead of' = thay vì - sai logic, (D) 'in case of' = trong trường hợp - không phù hợp."
        },
        {
          id: 38,
          type: "fill",
          question: "(38) - Điền từ thích hợp",
          context: "...you may (38) our HR department at hr@company.com...",
          options: ["ignore", "contact", "avoid", "delete"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'contact'. 'Contact someone at [email/phone]' (liên hệ ai đó qua...) là cách diễn đạt chuẩn khi cung cấp thông tin liên lạc. (A) 'ignore' = bỏ qua - sai nghĩa, (C) 'avoid' = tránh - sai logic, (D) 'delete' = xóa - không hợp lý."
        },
        {
          id: 39,
          type: "fill",
          question: "(39) - Điền từ thích hợp",
          context: "We encourage you to (39) with your supervisor to determine...",
          options: ["argue", "disagree", "discuss", "fight"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'discuss'. 'Discuss with someone' (thảo luận với ai đó) là cách diễn đạt chuyên nghiệp và phù hợp trong môi trường công việc. Nhân viên nên thảo luận với quản lý về khả năng làm việc từ xa. (A) 'argue' = tranh cãi, (B) 'disagree' = không đồng ý, (D) 'fight' = đánh nhau - đều tiêu cực và không phù hợp."
        },
        {
          id: 40,
          type: "fill",
          question: "(40) - Điền từ thích hợp",
          context: "...will contribute to a more (40) and productive work environment...",
          options: ["negative", "flexible", "rigid", "stressful"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'flexible'. 'Flexible and productive environment' (môi trường linh hoạt và hiệu quả) phù hợp với chính sách làm việc từ xa, kết hợp tích cực với 'productive'. (A) 'negative' = tiêu cực - sai nghĩa, (C) 'rigid' = cứng nhắc - trái ngược với mục tiêu chính sách, (D) 'stressful' = căng thẳng - tiêu cực."
        }
      ]
    },

    part7: {
      title: "PART 7: Multiple Texts (Job Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo tuyển dụng và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**SENIOR MARKETING ANALYST POSITION**

InnovateTech Solutions - A Leading Digital Marketing Agency

**About Us:**
InnovateTech Solutions has been at the forefront of digital marketing innovation for over 15 years, serving Fortune 500 clients across multiple industries. Our collaborative team of 200+ professionals operates from offices in New York, London, and Singapore.

**Position Overview:**
We are seeking an experienced Senior Marketing Analyst to join our Strategic Insights team. This role will be instrumental in analyzing campaign performance, identifying market trends, and developing data-driven recommendations for our premium clients.

**Key Responsibilities:**
• Conduct comprehensive analysis of multi-channel marketing campaigns
• Develop predictive models to forecast campaign outcomes and ROI
• Collaborate with creative and strategy teams to optimize client deliverables
• Present findings and strategic recommendations to senior leadership and clients
• Mentor junior analysts and contribute to team knowledge development

**Required Qualifications:**
• Bachelor's degree in Marketing, Statistics, Business Analytics, or related field
• Minimum 5 years of experience in marketing analytics or data science
• Advanced proficiency in SQL, Python, and data visualization tools (Tableau, Power BI)
• Demonstrated ability to translate complex data into actionable business insights
• Excellent presentation and communication skills
• Experience with A/B testing methodologies and statistical analysis

**Preferred Qualifications:**
• Master's degree in relevant field
• Experience with machine learning applications in marketing
• Background in e-commerce or technology sectors
• Professional certifications in analytics or digital marketing

**What We Offer:**
• Competitive salary range: $95,000 - $125,000 annually (based on experience)
• Comprehensive health, dental, and vision insurance
• 401(k) with 5% company match
• Flexible hybrid work arrangement (3 days in office, 2 days remote)
• Professional development budget of $3,000 annually
• Four weeks paid vacation plus national holidays

**Application Process:**
Interested candidates should submit a resume, cover letter, and portfolio of previous analytical work (case studies or project examples) to careers@innovatetech.com by December 31, 2025. Please include "Senior Marketing Analyst Application - [Your Name]" in the email subject line.

First-round interviews will be conducted via video conference in early January, with final interviews at our New York office. We aim to make hiring decisions by mid-February.

InnovateTech Solutions is an equal opportunity employer committed to diversity and inclusion.

---

**EMAIL MESSAGE**

**To:** careers@innovatetech.com
**From:** david.torres@emailpro.com
**Date:** December 10, 2025
**Subject:** Senior Marketing Analyst Application - David Torres

Dear Hiring Manager,

I am writing to express my strong interest in the Senior Marketing Analyst position advertised on your company website. With seven years of progressive experience in marketing analytics and a proven track record of driving measurable business results, I believe I would be an excellent addition to your Strategic Insights team.

Currently, I serve as Marketing Analytics Manager at DataDrive Corporation, where I lead a team of four analysts supporting our e-commerce division. In this role, I have successfully implemented predictive modeling frameworks that improved campaign ROI by an average of 23% across our client portfolio. I am particularly proud of developing an attribution model that helped one major retail client reallocate their $15 million annual marketing budget more efficiently, resulting in a 31% increase in online conversions.

My technical skills align closely with your requirements. I work extensively with SQL for data extraction and Python for statistical analysis and modeling. I have also created numerous interactive dashboards using Tableau that have become essential tools for our executive team's decision-making. Additionally, I completed my Master's degree in Business Analytics from Columbia University last year while working full-time, which has deepened my expertise in advanced statistical methods and machine learning applications.

What attracts me most to InnovateTech Solutions is your reputation for innovative approaches to digital marketing challenges. I have followed several of your published case studies, particularly your work with Global Retail Inc., which demonstrated sophisticated use of customer segmentation and predictive analytics. The opportunity to work with Fortune 500 clients across diverse industries would provide exactly the kind of challenging environment where I thrive.

I am particularly interested in your hybrid work arrangement, as I believe this model optimally balances collaborative teamwork with the focused concentration time that complex analytical work requires. Having successfully managed remote team members during the pandemic, I have developed strong practices for virtual collaboration and communication.

Regarding the application materials, I have attached my resume and a portfolio containing three detailed case studies from recent projects. These examples demonstrate my approach to problem-solving, technical execution, and translating insights into strategic recommendations. I have redacted client-specific confidential information while preserving the analytical methodologies and outcomes.

I would welcome the opportunity to discuss how my experience and skills would contribute to your team's continued success. I am available for a video interview at your convenience and would be happy to travel to New York for final-round interviews. Given my current employment, I would require approximately three weeks' notice period should you extend an offer.

Thank you for considering my application. I look forward to speaking with you about this exciting opportunity.

Best regards,

David Torres
(555) 342-7891
david.torres@emailpro.com
LinkedIn: linkedin.com/in/davidtorresanalytics`,
      questions: [
        {
          id: 41,
          question: "What is the primary focus of the Senior Marketing Analyst role?",
          options: [
            "Creating advertising designs",
            "Analyzing campaigns and developing data-driven recommendations",
            "Managing social media accounts",
            "Hiring new team members"
          ],
          correct: 1,
          explanation: "Quảng cáo nêu rõ: 'This role will be instrumental in analyzing campaign performance, identifying market trends, and developing data-driven recommendations for our premium clients.' Đây là trách nhiệm chính của vị trí."
        },
        {
          id: 42,
          question: "What is the minimum experience requirement for this position?",
          options: [
            "3 years",
            "5 years",
            "7 years",
            "10 years"
          ],
          correct: 1,
          explanation: "Trong phần Required Qualifications, yêu cầu rõ ràng: 'Minimum 5 years of experience in marketing analytics or data science.' 5 năm là yêu cầu tối thiểu."
        },
        {
          id: 43,
          question: "What can be inferred about David Torres's qualifications?",
          options: [
            "He does not meet the minimum requirements",
            "He exceeds the minimum experience requirement",
            "He has no technical skills",
            "He has never worked in marketing"
          ],
          correct: 1,
          explanation: "David nói: 'With seven years of progressive experience in marketing analytics...' Anh có 7 năm kinh nghiệm, vượt qua yêu cầu tối thiểu 5 năm. Anh cũng có Master's degree - thuộc preferred qualifications."
        },
        {
          id: 44,
          question: "What specific achievement does David highlight from his current role?",
          options: [
            "Hiring 10 new employees",
            "Improving campaign ROI by 23% on average",
            "Creating a new company logo",
            "Reducing operational costs by half"
          ],
          correct: 1,
          explanation: "David nêu rõ thành tựu: 'I have successfully implemented predictive modeling frameworks that improved campaign ROI by an average of 23% across our client portfolio.' Đây là kết quả đo lường được."
        },
        {
          id: 45,
          question: "Why is David particularly interested in InnovateTech Solutions?",
          options: [
            "The company offers the highest salary in the industry",
            "His friend works there",
            "The company's reputation for innovative approaches and Fortune 500 clients",
            "The office is close to his home"
          ],
          correct: 2,
          explanation: "David giải thích: 'What attracts me most to InnovateTech Solutions is your reputation for innovative approaches to digital marketing challenges... The opportunity to work with Fortune 500 clients across diverse industries would provide exactly the kind of challenging environment where I thrive.'"
        },
        {
          id: 46,
          question: "What educational qualification does David possess that is listed as 'preferred' in the job ad?",
          options: [
            "Bachelor's degree in Marketing",
            "Master's degree in Business Analytics",
            "PhD in Statistics",
            "High school diploma only"
          ],
          correct: 1,
          explanation: "Trong Preferred Qualifications: 'Master's degree in relevant field.' David nói: 'I completed my Master's degree in Business Analytics from Columbia University last year.' Anh đáp ứng yêu cầu ưu tiên này."
        },
        {
          id: 47,
          question: "How many case studies did David include in his application portfolio?",
          options: [
            "One",
            "Two",
            "Three",
            "Five"
          ],
          correct: 2,
          explanation: "David viết: 'I have attached my resume and a portfolio containing three detailed case studies from recent projects.' Ba case studies được đính kèm để thể hiện năng lực phân tích."
        },
        {
          id: 48,
          question: "What is David's notice period requirement if offered the position?",
          options: [
            "Immediately available",
            "One week",
            "Three weeks",
            "Three months"
          ],
          correct: 2,
          explanation: "David nêu rõ: 'Given my current employment, I would require approximately three weeks' notice period should you extend an offer.' Ba tuần là thời gian báo trước cần thiết."
        },
        {
          id: 49,
          question: "Which technical tool does David specifically mention using for interactive dashboards?",
          options: [
            "Excel",
            "SQL",
            "Tableau",
            "Python"
          ],
          correct: 2,
          explanation: "David viết: 'I have also created numerous interactive dashboards using Tableau that have become essential tools for our executive team's decision-making.' Tableau là công cụ tạo dashboard."
        },
        {
          id: 50,
          question: "When does InnovateTech aim to make final hiring decisions?",
          options: [
            "December 31, 2025",
            "Early January",
            "Mid-February",
            "March 2026"
          ],
          correct: 2,
          explanation: "Quảng cáo nêu timeline: 'First-round interviews will be conducted via video conference in early January, with final interviews at our New York office. We aim to make hiring decisions by mid-February.' Mid-February là thời điểm quyết định cuối cùng."
        }
      ]
    },

    part8: {
      title: "PART 8: Text Message Chain - Office Coordination",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn giữa đồng nghiệp, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `LISA CHEN (09:15): Morning Alex! Quick question - did you receive the updated presentation slides from the design team?

ALEX MORGAN (09:18): Hi Lisa. Yes, I got them late yesterday evening. I reviewed them briefly but noticed several data visualizations don't match our latest quarterly figures.

LISA CHEN (09:20): Oh no, that's problematic. Our client meeting is at 2 PM today. Do we have time to get corrections made?

ALEX MORGAN (09:22): It's tight, but possible. The main issues are on slides 7, 12, and 15. I can provide the correct numbers to the design team within the next 30 minutes if they can turn around revisions quickly.

LISA CHEN (09:24): Perfect. I'll call Jennifer in design right now and ask her to prioritize this. Can you send me those corrections via email so I have a backup?

ALEX MORGAN (09:26): Absolutely. Sending now. Also, I noticed the executive summary slide is missing our new positioning statement that was approved last week. Should we include that?

LISA CHEN (09:28): Definitely - that's actually central to today's pitch. Can you draft that slide? You were in the strategy session, so you know the exact wording.

ALEX MORGAN (09:30): On it. I'll have that to you by 10:30. One more thing - are we still planning to demo the beta software during the meeting?

LISA CHEN (09:32): That was the original plan, but Tom from IT messaged me this morning saying they found a bug affecting the reporting module. He recommends waiting until it's patched.

ALEX MORGAN (09:35): Hmm, that's unfortunate timing. The demo was supposed to be our strongest selling point. What's our backup plan?

LISA CHEN (09:37): I'm thinking we show recorded video demonstrations instead of live demo. We have that comprehensive walkthrough video from the product launch last month. It showcases all the key features without risk of technical issues.

ALEX MORGAN (09:40): Smart solution. That video is actually more polished than a live demo would be anyway. Should we prepare any printed materials as leave-behinds?

LISA CHEN (09:42): Good thinking. Can you arrange for 8 copies of our company brochure and the one-page product summary to be printed? The client team has 6 people, plus 2 extras just in case.

ALEX MORGAN (09:44): Will do. I'll run down to the print center now. Should be back by 10:15. Do you need anything else prepared?

LISA CHEN (09:46): Actually, yes - can you also bring bottles of water and coffee to the conference room around 1:45? I want everything set up before they arrive at 2.

ALEX MORGAN (09:48): Absolutely. I'll coordinate with facilities. By the way, did we ever hear back from the client about dietary restrictions for the lunch we're ordering?

LISA CHEN (09:50): Yes! I forgot to mention - Sarah from their team is vegetarian, and Michael has a gluten allergy. I already adjusted the catering order yesterday to accommodate.

ALEX MORGAN (09:52): Excellent. Sounds like we're on track despite the morning hiccups. I'll focus on those corrections and the new slide now.

LISA CHEN (09:54): Thanks Alex. Your flexibility is a lifesaver. Let's sync up again at 11:30 to do a final run-through before lunch.

ALEX MORGAN (09:56): Perfect. Talk then!`,
      questions: [
        {
          id: 51,
          question: "What is the main problem Lisa and Alex discover with the presentation?",
          options: [
            "The slides are in the wrong format",
            "Data visualizations don't match the latest figures",
            "The presentation is too long",
            "There are spelling errors throughout"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'Data visualizations don't match the latest figures' (Hình ảnh trực quan hóa dữ liệu không khớp với số liệu mới nhất). Alex phát hiện vấn đề lúc 09:18: 'I reviewed them briefly but noticed several **data visualizations don't match our latest quarterly figures**' (Tôi đã xem qua sơ bộ nhưng nhận thấy một số hình ảnh dữ liệu không khớp với số liệu quý mới nhất của chúng ta). Từ khóa: '**don't match**' (không khớp) và '**latest quarterly figures**' (số liệu quý mới nhất). Đây là vấn đề nghiêm trọng vì dữ liệu sai trong bài thuyết trình khách hàng có thể làm mất uy tín. Phân tích các lựa chọn sai: (A) không đề cập đến format/định dạng sai, (C) không có ai nói presentation quá dài, (D) không ai nhắc đến lỗi chính tả. Vấn đề tập trung hoàn toàn vào độ chính xác của dữ liệu."
        },
        {
          id: 52,
          question: "What time is the client meeting scheduled?",
          options: [
            "9:15 AM",
            "11:30 AM",
            "2:00 PM",
            "5:00 PM"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) '2:00 PM' (2 giờ chiều). Lisa nêu rõ thời gian lúc 09:20: 'Oh no, that's problematic. **Our client meeting is at 2 PM today.**' (Ôi không, vấn đề đó nghiêm trọng đấy. Cuộc họp khách hàng của chúng ta là lúc 2 giờ chiều hôm nay). Từ khóa: '**at 2 PM today**' (lúc 2 giờ chiều hôm nay). Thông tin này quan trọng vì tạo ra áp lực thời gian - họ chỉ còn khoảng 5 tiếng để sửa presentation, in tài liệu, và chuẩn bị mọi thứ. Phân tích các lựa chọn sai: (A) 9:15 AM là thời gian Lisa bắt đầu nhắn tin (LISA CHEN 09:15), không phải thời gian họp khách hàng. (B) 11:30 AM là thời gian Lisa và Alex dự định 'sync up' để final run-through (09:54: 'Let's sync up again at 11:30'), không phải họp khách. (D) 5:00 PM không được đề cập trong toàn bộ đoạn hội thoại."
        },
        {
          id: 53,
          question: "Which slides contain incorrect data?",
          options: [
            "Slides 1, 2, and 3",
            "Slides 5, 10, and 20",
            "Slides 7, 12, and 15",
            "All slides"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'Slides 7, 12, and 15' (Các slide số 7, 12 và 15). Alex xác định chính xác lúc 09:22: 'It's tight, but possible. **The main issues are on slides 7, 12, and 15.** I can provide the correct numbers to the design team within the next 30 minutes if they can turn around revisions quickly.' (Thời gian gấp nhưng có thể làm được. Các vấn đề chính ở slides 7, 12 và 15. Tôi có thể cung cấp số liệu chính xác cho team thiết kế trong vòng 30 phút tới nếu họ có thể sửa nhanh). Từ khóa: '**The main issues are on slides**' (Các vấn đề chính ở các slide). Alex đã xác định CỤ THỂ ba slides có lỗi, chứng tỏ anh đã kiểm tra kỹ lưỡng. Điều này cũng cho thấy vấn đề không lan tỏa khắp presentation - chỉ tập trung ở 3 slides cụ thể. Phân tích các lựa chọn sai: (A), (B) không được đề cập, (D) 'All slides' sai hoàn toàn - nếu tất cả slides đều sai thì không thể sửa kịp trong vài giờ."
        },
        {
          id: 54,
          question: "Why can't they do a live software demo during the meeting?",
          options: [
            "They don't have the necessary equipment",
            "IT found a bug in the reporting module",
            "The client doesn't want to see it",
            "The software is not ready at all"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'IT found a bug in the reporting module' (Bộ phận IT phát hiện lỗi trong module báo cáo). Lisa giải thích lúc 09:32 khi Alex hỏi về demo: 'That was the original plan, but **Tom from IT messaged me this morning saying they found a bug affecting the reporting module.** He recommends waiting until it's patched.' (Đó là kế hoạch ban đầu, nhưng Tom từ bộ phận IT nhắn tin cho tôi sáng nay nói rằng họ phát hiện một lỗi ảnh hưởng đến module báo cáo. Anh ấy khuyên nên đợi đến khi nó được vá lỗi). Từ khóa: '**found a bug**' (phát hiện lỗi), '**affecting the reporting module**' (ảnh hưởng module báo cáo), '**recommends waiting until it's patched**' (khuyên đợi đến khi được vá). Đây là vấn đề kỹ thuật nghiêm trọng vì reporting module (chức năng báo cáo) thường là tính năng quan trọng trong phần mềm doanh nghiệp. Demo trực tiếp với lỗi sẽ tạo ấn tượng xấu với khách hàng. Phân tích các lựa chọn sai: (A) không đề cập thiếu thiết bị, (C) không có thông tin khách hàng không muốn xem, (D) phần mềm vẫn sẵn sàng - chỉ có một module bị lỗi, không phải toàn bộ."
        },
        {
          id: 55,
          question: "What solution does Lisa propose instead of a live demo?",
          options: [
            "Canceling the demo entirely",
            "Using recorded video demonstrations",
            "Scheduling a separate demo session",
            "Having IT fix the bug during the meeting"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'Using recorded video demonstrations' (Sử dụng video demo đã ghi sẵn). Lisa đề xuất giải pháp thay thế lúc 09:37: 'I'm thinking we **show recorded video demonstrations instead of live demo.** We have that **comprehensive walkthrough video from the product launch last month.** It showcases all the key features without risk of technical issues.' (Tôi đang nghĩ chúng ta nên chiếu video demo đã ghi sẵn thay vì demo trực tiếp. Chúng ta có video hướng dẫn toàn diện từ buổi ra mắt sản phẩm tháng trước. Nó thể hiện tất cả các tính năng chính mà không có rủi ro về vấn đề kỹ thuật). Từ khóa: '**recorded video demonstrations**' (video demo đã ghi), '**instead of live demo**' (thay vì demo trực tiếp), '**without risk of technical issues**' (không có rủi ro lỗi kỹ thuật). Đây là giải pháp thông minh vì: (1) tận dụng tài liệu có sẵn từ product launch, (2) loại bỏ rủi ro lỗi phần mềm, (3) video đã được polish/chỉnh sửa chuyên nghiệp. Alex cũng đồng ý lúc 09:40: 'That video is actually more polished than a live demo would be anyway.' Phân tích các lựa chọn sai: (A) họ không hủy demo - vẫn muốn show sản phẩm, (C) không đề cập schedule riêng, (D) không thực tế vì IT không thể fix bug ngay trong meeting."
        },
        {
          id: 56,
          question: "How many people are on the client team?",
          options: [
            "4 people",
            "6 people",
            "8 people",
            "10 people"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) '6 people' (6 người). Lisa chỉ định rõ ràng lúc 09:42 khi yêu cầu Alex in tài liệu: 'Can you arrange for **8 copies of our company brochure and the one-page product summary** to be printed? **The client team has 6 people, plus 2 extras just in case.**' (Bạn có thể sắp xếp in 8 bản brochure công ty và bản tóm tắt sản phẩm một trang không? Đội khách hàng có 6 người, cộng thêm 2 bản dự phòng đề phòng trường hợp cần). Từ khóa: '**The client team has 6 people**' (Đội khách hàng có 6 người). Lý do in 8 bản: 6 người trong team + 2 bản extra (dự phòng) = 8 bản tổng cộng. Đây là practice tốt trong business meeting - luôn chuẩn bị thêm tài liệu phòng trường hợp có người tham gia phút chót hoặc tài liệu bị hỏng. Phân tích các lựa chọn sai: (A) 4 người - quá ít, không đúng, (C) 8 người - đây là TỔNG SỐ BẢN IN (6 khách + 2 extra), không phải số người, (D) 10 người - không được đề cập."
        },
        {
          id: 57,
          question: "What dietary accommodations need to be made for the lunch?",
          options: [
            "One person is vegan",
            "Sarah is vegetarian and Michael has a gluten allergy",
            "Everyone is lactose intolerant",
            "No dietary restrictions"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'Sarah is vegetarian and Michael has a gluten allergy' (Sarah ăn chay và Michael dị ứng gluten). Lisa xác nhận lúc 09:50 khi Alex hỏi về dietary restrictions: 'Yes! I forgot to mention - **Sarah from their team is vegetarian, and Michael has a gluten allergy.** I already adjusted the catering order yesterday to accommodate.' (Đúng rồi! Tôi quên nhắc - Sarah từ đội của họ ăn chay, và Michael bị dị ứng gluten. Tôi đã điều chỉnh đơn đặt catering hôm qua để đáp ứng rồi). Từ khóa: '**vegetarian**' (người ăn chay - không ăn thịt nhưng có thể ăn dairy), '**gluten allergy**' (dị ứng gluten - protein trong lúa mì, không thể ăn bánh mì thường, pasta thông thường). Điều này thể hiện sự chuyên nghiệp: Lisa đã chủ động hỏi trước và adjust catering order từ hôm qua, không phải gấp rút vào phút chót. Business etiquette quan trọng: luôn hỏi dietary restrictions trước khi order lunch/dinner cho khách. Phân tích các lựa chọn sai: (A) không có ai vegan (stricter - không ăn bất cứ sản phẩm động vật nào), (C) không đề cập lactose intolerant, (D) sai - có 2 yêu cầu đặc biệt rõ ràng."
        },
        {
          id: 58,
          question: "When do Lisa and Alex plan to do a final run-through?",
          options: [
            "At 9:30 AM",
            "At 10:30 AM",
            "At 11:30 AM",
            "At 1:45 PM"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'At 11:30 AM' (Lúc 11 giờ 30 sáng). Lisa đề xuất lúc 09:54: 'Thanks Alex. Your flexibility is a lifesaver. **Let's sync up again at 11:30 to do a final run-through before lunch.**' (Cảm ơn Alex. Sự linh hoạt của bạn là cứu cánh. Hãy gặp nhau lại lúc 11:30 để chạy thử lần cuối trước bữa trưa). Từ khóa: '**sync up at 11:30**' (gặp lại lúc 11:30), '**final run-through**' (chạy thử/kiểm tra lần cuối), '**before lunch**' (trước bữa trưa). Timeline logic của ngày làm việc: 09:15-09:56 - phát hiện vấn đề và lên kế hoạch sửa, 10:30 - Alex hoàn thành slide mới (09:30: 'I'll have that to you by 10:30'), 11:30 - họp kiểm tra cuối cùng, sau đó lunch, 13:45 (1:45 PM) - setup phòng họp, 14:00 (2:00 PM) - khách hàng đến. Phân tích các lựa chọn sai: (A) 9:30 AM là deadline Alex nộp slide mới ('I'll have that to you by 10:30' - anh nói lúc 09:30 sẽ có bản draft trong 1 giờ), (B) 10:30 AM là khi Alex hứa sẽ hoàn thành slide positioning statement, (D) 1:45 PM là thời gian Alex setup nước uống/cà phê vào phòng họp, không phải run-through."
        },
        {
          id: 59,
          question: "What can be inferred about Alex's role in the meeting preparation?",
          options: [
            "He is only responsible for printing materials",
            "He is actively involved in multiple aspects of preparation",
            "He is not contributing anything significant",
            "He is only attending as an observer"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'He is actively involved in multiple aspects of preparation' (Anh ấy tham gia tích cực vào nhiều khía cạnh của việc chuẩn bị). Bằng chứng từ toàn bộ đoạn hội thoại cho thấy Alex đóng vai trò then chốt: **1. Quality Control** (Kiểm soát chất lượng): Anh phát hiện lỗi dữ liệu trong slides (09:18: 'noticed several data visualizations don't match our latest quarterly figures'). **2. Data Analysis** (Phân tích dữ liệu): Anh cung cấp số liệu chính xác để sửa (09:22: 'I can provide the correct numbers to the design team within the next 30 minutes'). **3. Content Creation** (Tạo nội dung): Anh soạn slide positioning statement mới (09:30: 'I'll have that to you by 10:30'). **4. Logistics** (Hậu cần): In tài liệu 8 bản (09:44), setup nước uống/cà phê (09:48). **5. Problem Solving** (Giải quyết vấn đề): Anh đưa ra ý tưởng về leave-behind materials (09:40), hỏi về dietary restrictions (09:48). **6. Strategic Input** (Đóng góp chiến lược): Anh tham gia strategy session nên hiểu rõ positioning (09:28: 'You were in the strategy session, so you know the exact wording'). Lisa cũng khen anh: 'Your flexibility is a lifesaver' (09:54) - thừa nhận vai trò quan trọng. Phân tích các lựa chọn sai: (A) anh không CHỈ in tài liệu - đó chỉ là 1 trong nhiều task, (C) hoàn toàn sai - contribution rất lớn, (D) anh không phải observer - là người chủ động giải quyết vấn đề."
        },
        {
          id: 60,
          question: "What does Lisa mean when she says 'Your flexibility is a lifesaver' at 09:54?",
          options: [
            "She is criticizing Alex for being too flexible",
            "She appreciates Alex's ability to adapt to changing circumstances",
            "She thinks Alex should be more rigid",
            "She is being sarcastic about Alex's work"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'She appreciates Alex's ability to adapt to changing circumstances' (Cô ấy đánh giá cao khả năng thích nghi với hoàn cảnh thay đổi của Alex). Lisa phát biểu lúc 09:54: 'Thanks Alex. **Your flexibility is a lifesaver.** Let's sync up again at 11:30...' (Cảm ơn Alex. Sự linh hoạt của bạn là cứu cánh. Hãy gặp lại lúc 11:30...). Phân tích ngữ cảnh và tone: **1. 'Lifesaver' (cứu cánh/người cứu nguy)**: Đây là từ cực kỳ tích cực trong tiếng Anh, thể hiện sự biết ơn sâu sắc khi ai đó giúp bạn thoát khỏi tình huống khó khăn. **2. Bối cảnh 'flexibility' (sự linh hoạt)**: Buổi sáng đầy biến động - slides sai số liệu, thiếu positioning statement, không thể demo trực tiếp do bug. Alex đã nhanh chóng adapt: chấp nhận sửa slides gấp, soạn nội dung mới, chuyển sang video demo, lo logistics. **3. 'Thanks Alex'**: Lời cảm ơn chân thành mở đầu câu củng cố tone tích cực. **4. Ngữ điệu tổng thể**: Sau 'lifesaver', Lisa tiếp tục collaboration bình thường ('Let's sync up'), không có dấu hiệu tension hay mỉa mai. Trong văn hóa workplace Anglo, đây là cách khen ngợi colleague chân thành và professional. Phân tích các lựa chọn sai: (A) 'criticizing' (chỉ trích) - hoàn toàn ngược nghĩa, 'lifesaver' không bao giờ dùng để chỉ trích, (C) 'should be more rigid' (nên cứng nhắc hơn) - vô lý vì Lisa đang khen flexibility, (D) 'sarcastic' (mỉa mai) - không có bất cứ context nào cho thấy sarcasm, toàn bộ conversation mang tính hợp tác và supportive."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam17.js">
export const EXAM17_DATA = {
  "title": "HUFLIT Listening & Reading Practice - Exam 17 (Nâng Cao)",
  "description": "Bộ đề thi nâng cao với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Tập trung vào kỹ năng nghe chi tiết và suy luận, cùng các chủ đề như du lịch, nhà hàng, giáo dục, và mua sắm. Độ khó tăng với từ vựng phức tạp và ngữ cảnh tinh tế.",
  "parts": {
    "part1": {
      "title": "PART 1: Short Conversations",
      "description": "Nghe đoạn hội thoại giữa Anna và Kevin về chuyến du lịch châu Âu. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi, tập trung vào chi tiết giá cả, thời gian, và lý do.",
      "type": "listening",
      "script": "Anna: Kevin, your trip to Europe sounds fascinating! How long did you stay in Paris before heading to Rome?\nKevin: I spent exactly five days in Paris, but I wish it had been longer. The Eiffel Tower tickets were pricey at 25 euros each, but worth every cent for the view.\nAnna: Did you encounter any issues with transportation?\nKevin: Yes, the train from Paris to Rome was delayed by two hours due to a strike, which cost me an extra 50 euros in rebooking fees. I wouldn't recommend traveling during peak season if you want to avoid such hassles.\nAnna: What about accommodations? Were they affordable?\nKevin: In Rome, I stayed at a boutique hotel for 120 euros per night, but in Paris, it was steeper at 180 euros because of the central location. Next time, I'll opt for hostels to cut costs.\nAnna: Sounds like a mix of highs and lows. Did the food live up to expectations?\nKevin: Absolutely, but dining out added up quickly—around 40 euros per meal in tourist areas. I learned to seek local eateries to save money.",
      "questions": [
        {
          "id": 1,
          "options": [
            "He spent three days in Paris.",
            "He spent five days in Paris.",
            "He spent seven days in Paris.",
            "He spent ten days in Paris."
          ],
          "correct": 1,
          "explanation": "Kevin nói: 'I spent exactly five days in Paris.' Từ khóa: 'five days'. Các lựa chọn khác không khớp với thời gian được đề cập."
        },
        {
          "id": 2,
          "options": [
            "The Eiffel Tower ticket cost 15 euros.",
            "The Eiffel Tower ticket cost 25 euros.",
            "The Eiffel Tower ticket cost 35 euros.",
            "The Eiffel Tower ticket cost 45 euros."
          ],
          "correct": 1,
          "explanation": "Kevin nói: 'The Eiffel Tower tickets were pricey at 25 euros each.' Từ khóa: '25 euros'. Suy luận: Giá cao nhưng đáng giá."
        },
        {
          "id": 3,
          "options": [
            "The train delay was due to weather.",
            "The train delay was due to a strike.",
            "The train delay was due to mechanical issues.",
            "The train delay was due to overcrowding."
          ],
          "correct": 1,
          "explanation": "Kevin nói: 'the train from Paris to Rome was delayed by two hours due to a strike.' Lý do: 'strike' (đình công). Suy luận: Tránh du lịch cao điểm để tránh rắc rối."
        },
        {
          "id": 4,
          "options": [
            "Hotel in Rome cost 100 euros per night.",
            "Hotel in Rome cost 120 euros per night.",
            "Hotel in Rome cost 140 euros per night.",
            "Hotel in Rome cost 160 euros per night."
          ],
          "correct": 1,
          "explanation": "Kevin nói: 'In Rome, I stayed at a boutique hotel for 120 euros per night.' Chi tiết giá cả: 120 euros ở Rome, cao hơn ở Paris do vị trí trung tâm."
        },
        {
          "id": 5,
          "options": [
            "Dining out cost around 20 euros per meal.",
            "Dining out cost around 30 euros per meal.",
            "Dining out cost around 40 euros per meal.",
            "Dining out cost around 50 euros per meal."
          ],
          "correct": 2,
          "explanation": "Kevin nói: 'dining out added up quickly—around 40 euros per meal in tourist areas.' Suy luận: Tìm quán địa phương để tiết kiệm."
        }
      ]
    },
    "part2": {
      "title": "PART 2: Longer Conversation",
      "description": "5 câu hỏi - Đoạn hội thoại giữa ba người tại nhà hàng. Tập trung vào số lượng, lý do, và suy luận ý định.",
      "type": "listening",
      "script": "Waiter: Welcome to our seaside restaurant. Table for three?\nLinda: Yes, please. We'd like a window seat if possible.\nJohn: Actually, make that for four—my brother is joining us shortly.\nWaiter: Noted. Any dietary restrictions?\nLinda: I'm vegetarian, so no meat options for me. John is allergic to nuts.\nMike: I'll have the seafood platter for two to share, but only if it's fresh—last time it wasn't up to par.\nWaiter: Our seafood is sourced daily. The platter costs 60 euros and serves two generously.\nJohn: Why not add appetizers? The calamari is excellent, at 15 euros.\nLinda: Skip that; we're watching our budget after the expensive hotel stay.\nMike: Good point. Just mains and drinks then. Water for everyone?\nWaiter: Coming right up. Enjoy your meal!",
      "questions": [
        {
          "id": 6,
          "question": "How many people are dining initially?",
          "options": ["Two", "Three", "Four", "Five"],
          "correct": 2,
          "explanation": "Waiter hỏi 'Table for three?', nhưng John sửa: 'make that for four—my brother is joining us.' Suy luận: Ban đầu ba, nhưng cuối cùng bốn."
        },
        {
          "id": 7,
          "question": "Why does Linda avoid certain foods?",
          "options": [
            "Because she's on a diet.",
            "Because she's vegetarian.",
            "Because she's allergic to seafood.",
            "Because the food is expensive."
          ],
          "correct": 1,
          "explanation": "Linda nói: 'I'm vegetarian, so no meat options for me.' Lý do: Chế độ ăn chay."
        },
        {
          "id": 8,
          "question": "What is the cost of the seafood platter?",
          "options": ["40 euros", "50 euros", "60 euros", "70 euros"],
          "correct": 2,
          "explanation": "Waiter nói: 'The platter costs 60 euros and serves two.' Chi tiết giá cả và số lượng."
        },
        {
          "id": 9,
          "question": "Why do they skip appetizers?",
          "options": [
            "Because they're not hungry.",
            "Because of budget constraints.",
            "Because of allergies.",
            "Because the food is not fresh."
          ],
          "correct": 1,
          "explanation": "Linda nói: 'Skip that; we're watching our budget after the expensive hotel stay.' Suy luận lý do: Tiết kiệm tiền."
        },
        {
          "id": 10,
          "question": "What does Mike imply about the seafood?",
          "options": [
            "It's always fresh.",
            "It was disappointing before.",
            "It's too expensive.",
            "It's his favorite."
          ],
          "correct": 1,
          "explanation": "Mike nói: 'only if it's fresh—last time it wasn't up to par.' Suy luận thái độ: Không hài lòng lần trước."
        }
      ]
    },
    "part3": {
      "title": "PART 3: Monologue",
      "description": "5 câu hỏi - Bài nói của giáo sư về chính sách giáo dục. Tập trung vào suy luận và chi tiết.",
      "type": "listening",
      "script": "Professor Mitchell: In this advanced seminar, attendance is mandatory for all sessions, as missing even one could jeopardize your grade. We've implemented a new policy where late submissions incur a 10% penalty per day, to reinforce discipline. Last semester, several students failed due to procrastination, despite their intelligence. Remember, group projects require coordination between members; failure to communicate effectively often leads to suboptimal results. If you encounter issues, reach me directly via email before deadlines. Our goal is to foster creativity while maintaining rigor.",
      "questions": [
        {
          "id": 11,
          "question": "The seminar is __________.",
          "options": ["(A) optional", "(B) mandatory", "(C) flexible", "(D) cancelled"],
          "correct": 1,
          "explanation": "Professor nói: 'attendance is mandatory for all sessions.' Suy luận: Bắt buộc tham dự."
        },
        {
          "id": 12,
          "question": "What is the penalty for late submissions?",
          "options": [
            "(A) 5% per day",
            "(B) 10% per day",
            "(C) 15% per day",
            "(D) No penalty"
          ],
          "correct": 1,
          "explanation": "Professor nói: 'late submissions incur a 10% penalty per day.' Chi tiết số lượng."
        },
        {
          "id": 13,
          "question": "Why did some students fail last semester?",
          "options": [
            "(A) Lack of intelligence",
            "(B) Procrastination",
            "(C) Poor attendance",
            "(D) Group conflicts"
          ],
          "correct": 1,
          "explanation": "Professor nói: 'several students failed due to procrastination.' Lý do: Trì hoãn."
        },
        {
          "id": 14,
          "question": "What is emphasized for group projects?",
          "options": ["(A) Individual work", "(B) Coordination", "(C) Creativity only", "(D) Deadlines ignored"],
          "correct": 1,
          "explanation": "Professor nói: 'group projects require coordination between members.' Suy luận: Hợp tác quan trọng."
        },
        {
          "id": 15,
          "question": "How should students contact the professor?",
          "options": [
            "(A) In person only",
            "(B) Via email directly",
            "(C) Through assistants",
            "(D) After deadlines"
          ],
          "correct": 1,
          "explanation": "Professor nói: 'reach me directly via email before deadlines.' Cụm từ văn phòng."
        }
      ]
    },
    "part4": {
      "title": "PART 4: Extended Conversation",
      "description": "5 câu hỏi - Hội thoại về hoàn trả hàng tại cửa hàng. Tập trung vào lý do và suy luận.",
      "type": "listening",
      "script": "Customer: I'd like to return this laptop; it overheats after 30 minutes of use.\nSales Associate: Purchased when? Do you have the receipt?\nCustomer: Two weeks ago, but I misplaced the receipt. The warranty should cover this.\nSales Associate: Without proof, we can't issue a full refund, only store credit of 80% value, as per policy.\nCustomer: That's frustrating; I paid 800 euros. Can you check my card transaction?\nSales Associate: Certainly, to verify. If confirmed, we'll proceed with exchange instead, to ensure satisfaction.\nCustomer: Fine, but hurry—I have a meeting soon.",
      "questions": [
        {
          "id": 16,
          "question": "Why is the customer returning the laptop?",
          "options": [
            "(A) It's too expensive.",
            "(B) It overheats.",
            "(C) Wrong color.",
            "(D) Missing accessories."
          ],
          "correct": 1,
          "explanation": "Customer nói: 'it overheats after 30 minutes.' Lý do: Quá nóng."
        },
        {
          "id": 17,
          "question": "When was the laptop purchased?",
          "options": ["(A) One week ago", "(B) Two weeks ago", "(C) One month ago", "(D) Two months ago"],
          "correct": 1,
          "explanation": "Customer nói: 'Two weeks ago.' Chi tiết thời gian."
        },
        {
          "id": 18,
          "question": "What is offered without receipt?",
          "options": [
            "(A) Full refund",
            "(B) Store credit of 80%",
            "(C) No return",
            "(D) Double value"
          ],
          "correct": 1,
          "explanation": "Sales Associate nói: 'only store credit of 80% value.' Suy luận chính sách."
        },
        {
          "id": 19,
          "question": "How much did the laptop cost?",
          "options": ["(A) 600 euros", "(B) 700 euros", "(C) 800 euros", "(D) 900 euros"],
          "correct": 2,
          "explanation": "Customer nói: 'I paid 800 euros.' Chi tiết giá cả."
        },
        {
          "id": 20,
          "question": "What does the customer imply by 'hurry'?",
          "options": [
            "(A) He's patient.",
            "(B) He's in a rush.",
            "(C) He's happy.",
            "(D) He's indifferent."
          ],
          "correct": 1,
          "explanation": "Customer nói: 'hurry—I have a meeting soon.' Suy luận thái độ: Gấp gáp."
        }
      ]
    },
   "part5": {
  "title": "PART 5: Fill in the Blank (Grammar/Vocabulary)",
  "description": "10 câu hỏi - Chọn từ/cụm phù hợp. Độ khó nâng cao với từ vựng văn phòng.",
  "type": "reading",
  "questions": [
    {
      "id": 21,
      "question": "The campaign aims to __________ brand loyalty among younger consumers.",
      "options": ["reinforce", "implement", "submit", "review"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'reinforce'** (củng cố, tăng cường). Cấu trúc 'aim to + V' (nhằm mục đích) + 'reinforce brand loyalty' là **collocation phổ biến trong marketing**. Nghĩa: chiến dịch nhằm củng cố lòng trung thành thương hiệu. Phân tích các lựa chọn sai: (B) 'implement' = triển khai (dùng cho strategies/plans, không dùng cho loyalty), (C) 'submit' = nộp (dùng cho documents/reports), (D) 'review' = xem xét (dùng cho feedback/data). Chỉ 'reinforce' kết hợp tự nhiên với 'brand loyalty' trong bối cảnh marketing."
    },
    {
      "id": 22,
      "question": "All reports must be __________ by the end of the quarter.",
      "options": ["reinforced", "implemented", "submitted", "reviewed"],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'submitted'** (nộp, gửi). Cấu trúc bị động 'must be + V3' (phải được) + 'by the end of...' (trước cuối...) chỉ **deadline bắt buộc**. 'Submit reports' (nộp báo cáo) là collocation chuẩn trong môi trường văn phòng. Phân tích các lựa chọn sai: (A) 'reinforced' = củng cố (không dùng cho reports), (B) 'implemented' = triển khai (dùng cho strategies, không phải reports), (D) 'reviewed' = xem xét (có thể dùng nhưng không phù hợp với 'by the end of' - thời hạn nộp). Chỉ 'submitted' diễn tả hành động nộp tài liệu đúng hạn."
    },
    {
      "id": 23,
      "question": "The new strategy will be __________ starting next month.",
      "options": ["reinforced", "implemented", "submitted", "reviewed"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'implemented'** (triển khai, thực hiện). Cấu trúc bị động tương lai 'will be + V3' + 'starting...' (bắt đầu từ...). 'Implement a strategy' (triển khai chiến lược) là **collocation chuẩn trong quản lý dự án**. Nghĩa: chiến lược mới sẽ được triển khai từ tháng tới. Phân tích các lựa chọn sai: (A) 'reinforced' = củng cố (dùng cho existing things, không phải new strategy), (C) 'submitted' = nộp (dùng cho documents, không phải strategies), (D) 'reviewed' = xem xét (xảy ra trước khi implement, không phải after). Chỉ 'implemented' phù hợp với việc đưa chiến lược vào thực tế."
    },
    {
      "id": 24,
      "question": "Feedback from clients will be __________ during the meeting.",
      "options": ["reinforced", "implemented", "submitted", "reviewed"],
      "correct": 3,
      "explanation": "Đáp án đúng là **(D) 'reviewed'** (xem xét, đánh giá). Cấu trúc bị động tương lai 'will be + V3' + 'during the meeting' (trong cuộc họp). 'Review feedback' (xem xét phản hồi) là hành động logic trong meeting. Nghĩa: phản hồi từ khách hàng sẽ được xem xét trong cuộc họp. Phân tích các lựa chọn sai: (A) 'reinforced' = củng cố (không dùng với feedback), (B) 'implemented' = triển khai (dùng cho plans/strategies, không phải feedback), (C) 'submitted' = nộp (feedback được nhận, không được nộp). Chỉ 'reviewed' diễn tả việc phân tích và thảo luận feedback trong meeting."
    },
    {
      "id": 25,
      "question": "To meet deadlines, we need better __________ between teams.",
      "options": ["coordination", "implementation", "submission", "review"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'coordination'** (sự phối hợp). Cấu trúc 'need + Noun' (cần cái gì) + 'better coordination between teams' là **collocation chuẩn trong quản lý**. Nghĩa: để đáp ứng hạn chót, chúng ta cần sự phối hợp tốt hơn giữa các đội. Phân tích các lựa chọn sai: (B) 'implementation' = sự triển khai (dùng cho strategies/plans), (C) 'submission' = sự nộp (dùng cho documents), (D) 'review' = sự xem xét (không kết hợp với 'between teams'). Chỉ 'coordination' (danh từ) phù hợp với việc làm việc nhóm hiệu quả giữa các teams."
    },
    {
      "id": 26,
      "question": "Please provide __________ on the project progress.",
      "options": ["reinforce", "implement", "feedback", "submit"],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'feedback'** (phản hồi, ý kiến đóng góp). Cấu trúc 'provide + Noun' (cung cấp cái gì) + 'feedback on...' (phản hồi về...) là **collocation chuẩn trong communication**. Nghĩa: vui lòng cung cấp phản hồi về tiến độ dự án. Phân tích các lựa chọn sai: (A) 'reinforce' = động từ củng cố (cần danh từ sau 'provide'), (B) 'implement' = động từ triển khai (sai dạng từ), (D) 'submit' = động từ nộp (không phù hợp: không nói 'provide submit'). Chỉ 'feedback' (danh từ) là chính xác - người ta cung cấp ý kiến/phản hồi về tiến độ."
    },
    {
      "id": 27,
      "question": "You can __________ me directly for any concerns.",
      "options": ["reinforce", "implement", "reach", "review"],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'reach'** (liên hệ, liên lạc). Cấu trúc 'reach someone directly' là **cụm động từ phổ biến trong business communication**. Nghĩa: bạn có thể liên hệ trực tiếp với tôi cho bất kỳ thắc mắc nào. 'Reach' trong ngữ cảnh này = 'contact' (liên lạc). Phân tích các lựa chọn sai: (A) 'reinforce me' = củng cố tôi (sai nghĩa hoàn toàn), (B) 'implement me' = triển khai tôi (vô nghĩa), (D) 'review me' = xem xét tôi (không phù hợp ngữ cảnh). Chỉ 'reach' tạo thành cụm tự nhiên 'reach me directly' trong email/thông báo công việc."
    },
    {
      "id": 28,
      "question": "The conference will __________ industry leaders from around the world.",
      "options": ["reinforce", "implement", "submit", "attend"],
      "correct": 3,
      "explanation": "Đáp án đúng là **(D) 'attend'** (tham dự, có mặt). LƯU Ý: Câu này có cấu trúc đặc biệt - chủ ngữ là 'The conference' (hội nghị) và động từ 'attend' ở đây mang nghĩa **bị động ẩn**: 'The conference will be attended by industry leaders' (Hội nghị sẽ được tham dự bởi các nhà lãnh đạo ngành). Hoặc hiểu theo cách khác: 'The conference will attract/host industry leaders' (Hội nghị sẽ thu hút/có sự tham gia của...). Phân tích các lựa chọn sai: (A) 'reinforce' = củng cố (không dùng với conference và leaders), (B) 'implement' = triển khai (không phù hợp), (C) 'submit' = nộp (vô nghĩa). Trong bối cảnh business English, 'attend' là động từ phù hợp nhất dù cấu trúc hơi đặc biệt."
    },
    {
      "id": 29,
      "question": "Failure to __________ deadlines may result in penalties.",
      "options": ["meet", "implement", "submit", "review"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'meet'** (đáp ứng, hoàn thành đúng hạn). Cấu trúc 'Failure to + V' (Sự thất bại trong việc...) + 'meet deadlines' là **collocation cố định trong business English**. Nghĩa: việc không đáp ứng hạn chót có thể dẫn đến hình phạt. 'Meet deadlines' = hoàn thành công việc đúng thời hạn quy định. Phân tích các lựa chọn sai: (B) 'implement deadlines' = triển khai hạn chót (sai nghĩa - người ta triển khai plans, không phải deadlines), (C) 'submit deadlines' = nộp hạn chót (vô nghĩa), (D) 'review deadlines' = xem xét hạn chót (không phù hợp ngữ cảnh warning). Chỉ 'meet' kết hợp đúng với 'deadlines' trong văn hoá làm việc."
    },
    {
      "id": 30,
      "question": "The policy changes were __________ after thorough discussion.",
      "options": ["reinforced", "implemented", "submitted", "reviewed"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'implemented'** (được triển khai). Cấu trúc bị động quá khứ 'were + V3' + 'after thorough discussion' (sau khi thảo luận kỹ lưỡng). 'Implement policy changes' (triển khai thay đổi chính sách) là **collocation chuẩn trong corporate management**. Quy trình logic: discussion (thảo luận) → decision (quyết định) → implementation (triển khai). Phân tích các lựa chọn sai: (A) 'reinforced' = được củng cố (dùng cho existing policies, không phải changes), (C) 'submitted' = được nộp (policy changes không được nộp mà được thực thi), (D) 'reviewed' = được xem xét (xảy ra BEFORE discussion, không phải after). Chỉ 'implemented' phản ánh đúng hành động đưa thay đổi vào thực tế sau khi đã thảo luận."
    }
  ]
},
  "part6": {
  "title": "PART 6: Cloze Text (Email/Announcement)",
  "description": "10 câu hỏi - Điền vào email về chiến dịch marketing. 6 fill + 4 comprehension.",
  "type": "reading",
  "text": "To: All Staff\nFrom: HR Rep\nSubject: New Policy Implementation\n\nDear Team,\n\nWe are excited to (31) the updated employee wellness program, effective next month. This initiative aims to (32) work-life balance and productivity.\n\nKey features include flexible hours and mental health support. Please (33) your preferences by Friday.\n\nWe will (34) all submissions and make adjustments accordingly.\n\nA workshop will be held two weeks prior to (35) that everyone understands the changes.\n\nFor questions, (36) out to HR directly.\n\nBest,\nHR Rep",
  "questions": [
    {
      "id": 31,
      "type": "fill",
      "question": "(31) - Điền từ thích hợp",
      "context": "We are excited to (31) the updated employee wellness program...",
      "options": ["reinforce", "implement", "submit", "review"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'implement'** (triển khai, thực hiện). Cấu trúc 'be excited to + V' (vui mừng khi...) + 'implement a program' là **collocation chuẩn trong HR/Corporate**. Nghĩa: chúng tôi vui mừng triển khai chương trình phúc lợi nhân viên đã được cập nhật. Email nói về việc đưa chương trình mới vào hoạt động ('effective next month' = có hiệu lực tháng tới). Phân tích các lựa chọn sai: (A) 'reinforce' = củng cố (dùng cho existing programs, nhưng đây là 'updated program' = chương trình mới cập nhật cần được triển khai), (C) 'submit' = nộp (không hợp lý - HR không nộp program mà triển khai nó), (D) 'review' = xem xét (xảy ra trước khi implement, không phải lúc announce). Chỉ 'implement' phù hợp với việc chính thức đưa policy vào thực tế."
    },
    {
      "id": 32,
      "type": "fill",
      "question": "(32) - Điền từ thích hợp",
      "context": "This initiative aims to (32) work-life balance and productivity.",
      "options": ["reinforce", "implement", "submit", "review"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'reinforce'** (củng cố, tăng cường). Cấu trúc 'aim to + V' (nhằm mục đích) + 'reinforce work-life balance' là **collocation trong HR policy**. Nghĩa: sáng kiến này nhằm củng cố sự cân bằng giữa công việc và cuộc sống cũng như năng suất. 'Reinforce' phù hợp vì work-life balance là một giá trị/trạng thái cần được **làm mạnh mẽ hơn, duy trì và cải thiện**. Phân tích các lựa chọn sai: (B) 'implement' = triển khai (dùng cho programs/policies, không dùng cho abstract concepts như 'balance'), (C) 'submit' = nộp (vô nghĩa với work-life balance), (D) 'review' = xem xét (không phải mục đích của initiative). Chỉ 'reinforce' diễn tả việc làm cho work-life balance trở nên tốt hơn và bền vững hơn."
    },
    {
      "id": 33,
      "type": "fill",
      "question": "(33) - Điền từ thích hợp",
      "context": "Please (33) your preferences by Friday.",
      "options": ["reinforce", "implement", "submit", "review"],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'submit'** (nộp, gửi). Cấu trúc 'Please + V' (yêu cầu lịch sự) + 'submit preferences by + deadline' là **cụm chuẩn trong business communication**. Nghĩa: vui lòng nộp sở thích của bạn trước thứ Sáu. 'Submit' = gửi thông tin/tài liệu chính thức cho cấp trên. 'By Friday' (trước thứ Sáu) chỉ deadline bắt buộc. Phân tích các lựa chọn sai: (A) 'reinforce preferences' = củng cố sở thích (không phù hợp - không ai củng cố sở thích cá nhân), (B) 'implement preferences' = triển khai sở thích (vô lý - người ta không triển khai preferences mà submit chúng), (D) 'review preferences' = xem xét sở thích (đây là hành động của HR sau khi nhận, không phải hành động của nhân viên). Chỉ 'submit' là động từ đúng cho việc nhân viên gửi thông tin cá nhân."
    },
    {
      "id": 34,
      "type": "fill",
      "question": "(34) - Điền từ thích hợp",
      "context": "We will (34) all submissions and make adjustments accordingly.",
      "options": ["reinforce", "implement", "submit", "review"],
      "correct": 3,
      "explanation": "Đáp án đúng là **(D) 'review'** (xem xét, đánh giá). Cấu trúc 'will + V' (sẽ) + 'review submissions' là **collocation chuẩn trong workflow**. Nghĩa: chúng tôi sẽ xem xét tất cả các bài nộp và điều chỉnh cho phù hợp. Quy trình logic: nhân viên submit preferences (câu 33) → HR review submissions (câu này) → HR make adjustments (điều chỉnh dựa trên feedback). 'Review' = phân tích và đánh giá thông tin đã nhận. Phân tích các lựa chọn sai: (A) 'reinforce submissions' = củng cố các bài nộp (vô nghĩa), (B) 'implement submissions' = triển khai các bài nộp (không hợp lý - người ta implement plans, không phải submissions), (C) 'submit submissions' = nộp các bài nộp (trùng lặp và vô lý). Chỉ 'review' phản ánh đúng hành động của HR: xem xét phản hồi từ nhân viên trước khi điều chỉnh policy."
    },
    {
      "id": 35,
      "type": "fill",
      "question": "(35) - Điền từ thích hợp",
      "context": "A workshop will be held two weeks prior to (35) that everyone understands the changes.",
      "options": ["ensure", "suggest", "prevent", "warn"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'ensure'** (đảm bảo, bảo đảm). Cấu trúc 'to + V' (để) + 'ensure that + clause' là **cấu trúc mục đích phổ biến**. Nghĩa: một workshop sẽ được tổ chức hai tuần trước để đảm bảo rằng mọi người hiểu các thay đổi. 'Ensure' diễn tả mục đích của workshop: làm cho chắc chắn tất cả nhân viên nắm rõ policy mới. 'Two weeks prior' (hai tuần trước) = hai tuần trước khi program có hiệu lực. Phân tích các lựa chọn sai: (B) 'suggest that everyone understands' = gợi ý rằng mọi người hiểu (sai nghĩa - không phải gợi ý mà là đảm bảo họ hiểu), (C) 'prevent that everyone understands' = ngăn cản mọi người hiểu (ngược lại hoàn toàn với mục đích), (D) 'warn that everyone understands' = cảnh báo rằng mọi người hiểu (sai nghĩa và cấu trúc). Chỉ 'ensure' phù hợp với mục đích training/workshop: đảm bảo sự hiểu biết đầy đủ."
    },
    {
      "id": 36,
      "type": "fill",
      "question": "(36) - Điền từ thích hợp",
      "context": "For questions, (36) out to HR directly.",
      "options": ["reach", "push", "delay", "ignore"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'reach'** (liên hệ, liên lạc). Cụm động từ **'reach out to + someone'** là **phrasal verb cố định trong business English**, nghĩa là 'liên hệ/liên lạc với ai đó'. Toàn bộ câu: 'For questions, reach out to HR directly' = Nếu có câu hỏi, hãy liên hệ trực tiếp với bộ phận HR. Đây là cách kết thúc email chuyên nghiệp, mời nhân viên liên lạc nếu cần hỗ trợ. Phân tích các lựa chọn sai: (B) 'push out to HR' = đẩy ra khỏi HR (vô nghĩa hoàn toàn), (C) 'delay out to HR' = trì hoãn ra ngoài HR (không có nghĩa), (D) 'ignore out to HR' = bỏ qua ra ngoài HR (vô lý). Chỉ 'reach' tạo thành phrasal verb 'reach out' (liên hệ) - một trong những cụm phổ biến nhất trong corporate communication."
    },
    {
      "id": 37,
      "type": "comprehension",
      "question": "(37) - When does the program start?",
      "options": ["This month", "Next month", "In two weeks", "By Friday"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Next month'** (Tháng tới). Email nêu rõ trong câu đầu: 'We are excited to implement the updated employee wellness program, **effective next month**.' Từ khóa: 'effective' (có hiệu lực, bắt đầu áp dụng) + 'next month' (tháng tới). Đây là thông tin chi tiết về thời điểm chương trình chính thức bắt đầu hoạt động. Phân tích các lựa chọn sai: (A) 'This month' - sai vì email nói 'next month', không phải tháng hiện tại, (C) 'In two weeks' - đây là thời điểm workshop được tổ chức ('two weeks prior'), không phải lúc program bắt đầu, (D) 'By Friday' - đây là deadline để submit preferences, không phải ngày program có hiệu lực. Chỉ 'Next month' khớp với thông tin 'effective next month' trong email."
    },
    {
      "id": 38,
      "type": "comprehension",
      "question": "(38) - What is the main purpose?",
      "options": [
        "To cut costs",
        "To improve wellness",
        "To change hours",
        "To hold workshops"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'To improve wellness'** (Cải thiện sức khỏe/phúc lợi). Mục đích chính được nêu rõ qua nhiều chi tiết: (1) Tiêu đề chương trình: '**employee wellness program**' (chương trình phúc lợi nhân viên), (2) Mục tiêu: 'This initiative aims to **reinforce work-life balance** and productivity' (củng cố cân bằng công việc-cuộc sống và năng suất), (3) Tính năng chính: 'flexible hours and **mental health support**' (giờ làm linh hoạt và hỗ trợ sức khỏe tâm thần). Tất cả đều hướng tới việc cải thiện phúc lợi và sức khỏe toàn diện của nhân viên. Phân tích các lựa chọn sai: (A) 'To cut costs' - không có thông tin về cắt giảm chi phí, (C) 'To change hours' - flexible hours chỉ là một tính năng, không phải mục đích chính, (D) 'To hold workshops' - workshop chỉ là công cụ để giải thích policy, không phải mục đích của program. Chỉ 'improve wellness' phản ánh đúng mục tiêu tổng thể."
    },
    {
      "id": 39,
      "type": "comprehension",
      "question": "(39) - Who sent the email?",
      "options": ["Marketing Director", "HR Rep", "CEO", "Staff Member"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'HR Rep'** (Đại diện bộ phận Nhân sự). Thông tin rõ ràng trong header email: '**From: HR Rep**' (Từ: Đại diện HR). Ngoài ra, nội dung email cũng phù hợp với vai trò HR: giới thiệu employee wellness program (chương trình phúc lợi nhân viên), yêu cầu nhân viên submit preferences (nộp sở thích cá nhân), tổ chức workshop về policy changes (thay đổi chính sách), và mời nhân viên 'reach out to HR directly' (liên hệ trực tiếp với HR) nếu có câu hỏi. Tất cả đều là trách nhiệm điển hình của bộ phận Nhân sự. Phân tích các lựa chọn sai: (A) 'Marketing Director' - không liên quan đến nội dung HR policy, (C) 'CEO' - không phải cấp độ quản lý cao như vậy cho email thông báo policy, (D) 'Staff Member' - không có quyền gửi email thông báo chính sách toàn công ty. Chỉ 'HR Rep' khớp với cả header và nội dung email."
    },
    {
      "id": 40,
      "type": "comprehension",
      "question": "(40) - When is the workshop?",
      "options": ["Next month", "Two weeks prior", "By Friday", "Effective date"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Two weeks prior'** (Hai tuần trước). Email nêu rõ: 'A workshop will be held **two weeks prior** to ensure that everyone understands the changes.' Từ khóa: 'two weeks prior' = hai tuần trước (thời điểm program có hiệu lực). Vì program có hiệu lực 'next month' (tháng tới), workshop sẽ diễn ra hai tuần trước thời điểm đó. Mục đích của việc tổ chức sớm là để đảm bảo mọi người có thời gian hiểu rõ policy changes trước khi chúng chính thức áp dụng. Phân tích các lựa chọn sai: (A) 'Next month' - đây là lúc program bắt đầu, không phải lúc workshop diễn ra, (C) 'By Friday' - đây là deadline để submit preferences, không liên quan đến workshop, (D) 'Effective date' - đây là ngày program có hiệu lực (next month), workshop diễn ra TRƯỚC ngày này. Chỉ 'Two weeks prior' khớp chính xác với thông tin trong email."
    }
  ]
},
"part7": {
  "title": "PART 7: Multiple Texts (Advertisement + Email)",
  "description": "10 câu hỏi - Quảng cáo dịch vụ voice và email yêu cầu.",
  "type": "reading",
  "text": "**ProVoice Services Ad**\nProfessional Voicemail & On-Hold Solutions\nCreate lasting impressions with custom voicemail greetings. We deliver within 48 hours!\nServices: Voice Talent, On-Hold Messages, Script Writing, Multilingual Options.\nEmail: info@provoice.com for quotes.\n\n**Email**\nTo: info@provoice.com\nFrom: l.smith@techfirm.com\nSubject: Multilingual Voicemail Request\n\nHi,\nI need a bilingual voicemail greeting in English and French for my tech firm. Please include script writing. Can you confirm completion within 48 hours? Contact me at 555-1234 between 9 AM-4 PM.\nThanks,\nLisa Smith",
  "questions": [
    {
      "id": 41,
      "question": "What does the ad promise?",
      "options": ["Delivery in 24 hours", "Delivery in 48 hours", "Delivery in 72 hours", "No timeline"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Delivery in 48 hours'** (Giao hàng trong vòng 48 giờ). Quảng cáo nêu rõ ràng: '**We deliver within 48 hours!**' (Chúng tôi giao hàng trong vòng 48 giờ!). Dấu chấm than (!) nhấn mạnh đây là điểm bán hàng quan trọng của dịch vụ - tốc độ xử lý nhanh. 'Within 48 hours' = trong khoảng thời gian không quá 48 giờ (2 ngày). Phân tích các lựa chọn sai: (A) '24 hours' - nhanh hơn thực tế, không được đề cập trong quảng cáo, (C) '72 hours' - chậm hơn cam kết, (D) 'No timeline' - sai hoàn toàn vì có cam kết thời gian rõ ràng. Đây là thông tin quan trọng vì Lisa Smith cũng hỏi lại về timeline này trong email của cô ('Can you confirm completion within 48 hours?')."
    },
    {
      "id": 42,
      "question": "What service is NOT mentioned in ad?",
      "options": ["Voice Talent", "On-Hold Messages", "Video Production", "Script Writing"],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'Video Production'** (Sản xuất video). Quảng cáo liệt kê đầy đủ các dịch vụ: '**Services: Voice Talent, On-Hold Messages, Script Writing, Multilingual Options.**' Tất cả các dịch vụ này đều liên quan đến **audio (âm thanh)**: voice talent (diễn viên lồng tiếng), on-hold messages (tin nhắn khi chờ máy), script writing (viết kịch bản), multilingual options (tùy chọn đa ngôn ngữ). Không có bất kỳ dịch vụ nào liên quan đến **video** được đề cập. Phân tích các lựa chọn đúng trong quảng cáo: (A) 'Voice Talent' ✓ - có trong danh sách, (B) 'On-Hold Messages' ✓ - có trong danh sách, (D) 'Script Writing' ✓ - có trong danh sách. Chỉ 'Video Production' là dịch vụ KHÔNG được cung cấp bởi ProVoice Services."
    },
    {
      "id": 43,
      "question": "Who is Lisa Smith?",
      "options": ["Actor", "Business Owner", "Script Writer", "Sales Rep"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Business Owner'** (Chủ doanh nghiệp). Có nhiều bằng chứng cho thấy Lisa là chủ sở hữu/quản lý doanh nghiệp: (1) Email domain: '**l.smith@techfirm.com**' - đây là email công ty riêng, không phải email cá nhân miễn phí (như Gmail), cho thấy cô có quyền kiểm soát domain công ty, (2) Cô nói '**my tech firm**' (công ty công nghệ của tôi) - từ 'my' (của tôi) chỉ quyền sở hữu, (3) Cô có quyền quyết định sử dụng dịch vụ chuyên nghiệp và yêu cầu billing, điều này thường do chủ doanh nghiệp hoặc người quản lý cấp cao thực hiện. Phân tích các lựa chọn sai: (A) 'Actor' - cô đang thuê voice talent, không phải bản thân là diễn viên, (C) 'Script Writer' - cô đang yêu cầu script writing service, không tự viết, (D) 'Sales Rep' - vai trò không phù hợp với việc đại diện công ty đặt dịch vụ. Chỉ 'Business Owner' phản ánh đúng vị trí của cô."
    },
    {
      "id": 44,
      "question": "What does Lisa NOT request?",
      "options": ["Bilingual greeting", "Script writing", "On-Hold Messages", "48-hour confirmation"],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'On-Hold Messages'** (Tin nhắn khi chờ máy). Lisa yêu cầu cụ thể trong email: (1) '**I need a bilingual voicemail greeting** in English and French' ✓ - Yêu cầu lời chào thoại tự động song ngữ, (2) '**Please include script writing**' ✓ - Yêu cầu dịch vụ viết kịch bản, (3) '**Can you confirm completion within 48 hours?**' ✓ - Yêu cầu xác nhận thời gian hoàn thành. NHƯNG cô **không đề cập gì đến On-Hold Messages** (nhạc/tin nhắn phát khi khách hàng chờ đợi trên điện thoại). Mặc dù ProVoice cung cấp dịch vụ này (có trong quảng cáo), Lisa chỉ cần voicemail greeting, không cần on-hold messages. Phân tích: (A), (B), (D) đều được Lisa yêu cầu rõ ràng trong email. Chỉ (C) là dịch vụ không được yêu cầu."
    },
    {
      "id": 45,
      "question": "What languages does Lisa want?",
      "options": ["English and Spanish", "English and French", "French and German", "Multilingual"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'English and French'** (Tiếng Anh và tiếng Pháp). Lisa nêu rõ ràng trong email: 'I need a **bilingual voicemail greeting in English and French** for my tech firm.' Từ khóa: 'bilingual' (song ngữ, hai ngôn ngữ) + danh sách cụ thể '**English and French**'. Đây là yêu cầu chính xác về hai ngôn ngữ mà cô muốn sử dụng trong lời chào voicemail của công ty. Lý do có thể là công ty của cô phục vụ khách hàng nói cả tiếng Anh và tiếng Pháp (ví dụ: ở Canada hoặc các thị trường quốc tế). Phân tích các lựa chọn sai: (A) 'English and Spanish' - không phải tiếng Tây Ban Nha, mà là tiếng Pháp, (C) 'French and German' - không có tiếng Đức, và thiếu tiếng Anh, (D) 'Multilingual' - quá chung chung, Lisa chỉ định rõ hai ngôn ngữ cụ thể. Chỉ 'English and French' khớp chính xác với yêu cầu."
    },
    {
      "id": 46,
      "question": "How will ProVoice respond?",
      "options": ["By email only", "Provide quote", "Ignore", "Send samples"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Provide quote'** (Cung cấp báo giá). Quảng cáo nêu rõ: '**Email: info@provoice.com for quotes.**' (Email: info@provoice.com để nhận báo giá). Từ khóa: 'for quotes' = để nhận báo giá. Quy trình tiêu chuẩn của dịch vụ B2B (business-to-business): (1) Khách hàng gửi yêu cầu (Lisa đã gửi email), (2) Công ty phản hồi với báo giá (quote) - bao gồm giá tiền, thời gian, chi tiết dịch vụ, (3) Khách hàng xác nhận và thanh toán. Vì Lisa đã gửi email yêu cầu cụ thể đến info@provoice.com, bước tiếp theo là ProVoice sẽ gửi báo giá chi tiết. Phân tích các lựa chọn sai: (A) 'By email only' - không đầy đủ, quan trọng là nội dung (quote), không chỉ phương thức (email), (C) 'Ignore' - không hợp lý cho doanh nghiệp chuyên nghiệp, (D) 'Send samples' - không được đề cập trong quảng cáo. Chỉ 'Provide quote' phản ánh đúng quy trình dịch vụ."
    },
    {
      "id": 47,
      "question": "What is Lisa's business?",
      "options": ["Tech firm", "Restaurant", "School", "Airline"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'Tech firm'** (Công ty công nghệ). Lisa nêu rõ ràng trong email: 'I need a bilingual voicemail greeting in English and French for **my tech firm**.' Từ khóa: '**tech firm**' (công ty công nghệ/công ty kỹ thuật). Ngoài ra, email domain của cô cũng hỗ trợ thông tin này: 'l.smith@**techfirm**.com' - tên domain chứa từ 'techfirm', cho thấy công ty hoạt động trong lĩnh vực công nghệ. 'Tech firm' thường là các công ty cung cấp dịch vụ IT, phần mềm, phần cứng, tư vấn công nghệ, v.v. Phân tích các lựa chọn sai: (B) 'Restaurant' - không có thông tin liên quan đến nhà hàng, (C) 'School' - không phải trường học, (D) 'Airline' - không phải hãng hàng không. Chỉ 'Tech firm' được Lisa đề cập trực tiếp và khớp với email domain."
    },
    {
      "id": 48,
      "question": "What time to contact Lisa?",
      "options": ["9 AM-4 PM", "10 AM-5 PM", "After hours", "Anytime"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) '9 AM-4 PM'** (9 giờ sáng đến 4 giờ chiều). Lisa chỉ định rõ ràng trong email: '**Contact me at 555-1234 between 9 AM-4 PM.**' Từ khóa: 'between 9 AM-4 PM' = trong khoảng từ 9 giờ sáng đến 4 giờ chiều. Đây là khung giờ làm việc tiêu chuẩn mà cô yêu cầu ProVoice liên hệ qua số điện thoại. Việc chỉ định khung giờ cụ thể cho thấy: (1) Cô muốn được liên hệ trong giờ hành chính, (2) Cô có thể không trả lời điện thoại ngoài giờ này (có thể đang họp, đi công tác, hoặc nghỉ ngơi). Phân tích các lựa chọn sai: (B) '10 AM-5 PM' - khung giờ khác, không khớp với yêu cầu, (C) 'After hours' - trái ngược với yêu cầu (cô muốn được liên hệ TRONG giờ làm việc), (D) 'Anytime' - không chính xác vì cô đã giới hạn thời gian cụ thể. Chỉ '9 AM-4 PM' khớp chính xác với thông tin trong email."
    },
    {
      "id": 49,
      "question": "Why contact ProVoice?",
      "options": ["Complaint", "Request service", "Job application", "Cancellation"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Request service'** (Yêu cầu dịch vụ). Mục đích chính của email Lisa rõ ràng là **đặt dịch vụ chuyên nghiệp**: (1) Tiêu đề email: '**Multilingual Voicemail Request**' (Yêu cầu voicemail đa ngôn ngữ) - từ 'Request' chỉ mục đích, (2) Nội dung: 'I need a bilingual voicemail greeting...' (Tôi cần một lời chào voicemail song ngữ) - diễn tả nhu cầu sử dụng dịch vụ, (3) Yêu cầu cụ thể về script writing và timeline - đây là các chi tiết của đơn đặt hàng. Toàn bộ email là một inquiry (yêu cầu thông tin) và service request (đặt dịch vụ) điển hình trong business communication. Phân tích các lựa chọn sai: (A) 'Complaint' - không có dấu hiệu phàn nàn, tone email lịch sự và tích cực, (C) 'Job application' - không phải xin việc, (D) 'Cancellation' - không hủy gì cả, đây là lần đầu liên hệ. Chỉ 'Request service' phản ánh đúng mục đích của email."
    },
    {
      "id": 50,
      "question": "What is implied about delivery?",
      "options": ["Slow", "Fast", "Expensive", "Free"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Fast'** (Nhanh). Điều được ngụ ý về tốc độ giao hàng: (1) Quảng cáo nhấn mạnh: '**We deliver within 48 hours!**' với dấu chấm than (!) - thể hiện sự tự hào về tốc độ nhanh, (2) 48 giờ = 2 ngày làm việc, đây là thời gian **rất nhanh** cho dịch vụ chuyên nghiệp như voice recording, script writing, và multilingual production (thường mất 5-7 ngày ở các công ty khác), (3) Lisa hỏi xác nhận lại về timeline ('Can you confirm completion within 48 hours?') - cho thấy cô coi trọng tốc độ này, (4) Trong ngành dịch vụ B2B, việc nhấn mạnh timeline cụ thể trong quảng cáo thường là **competitive advantage** (lợi thế cạnh tranh) về tốc độ. Phân tích các lựa chọn sai: (A) 'Slow' - ngược lại hoàn toàn với thông tin, (C) 'Expensive' - không có thông tin về giá cả trong cả quảng cáo và email, (D) 'Free' - không có thông tin miễn phí, và dịch vụ chuyên nghiệp không thể miễn phí. Chỉ 'Fast' được ngụ ý mạnh mẽ qua cam kết 48 giờ."
    }
  ]
},
    "part8": {
  "title": "PART 8: Text Message Chain",
  "description": "10 câu hỏi - Chuỗi tin nhắn về du lịch công tác.",
  "type": "reading",
  "text": "Tom (14:30): Flight delayed by 3 hours, missing connection in Tokyo.\nTom (14:31): New arrival at Osaka 21:00 on same airline.\nPeter (14:35): Got it. Checked bags?\nTom (14:36): Yes, two. Meet after customs?\nPeter (14:40): Yes, but parking tough. Extra time helps.\nTom (14:41): Sorry for inconvenience. Still on for client meeting tomorrow?\nPeter (14:42): Absolutely, we'll prep in morning.",
  "questions": [
    {
      "id": 51,
      "question": "What is suggested about Tom?",
      "options": ["On vacation", "On business trip", "Works for airline", "First time traveling"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'On business trip'** (Đang đi công tác). Có nhiều bằng chứng cho thấy Tom đang trong chuyến công tác kinh doanh: (1) Tom hỏi: '**Still on for client meeting tomorrow?**' (Vẫn còn cuộc họp khách hàng vào ngày mai chứ?) - từ 'client meeting' (cuộc họp khách hàng) là thuật ngữ điển hình trong business travel, (2) Peter trả lời: '**we'll prep in morning**' (chúng ta sẽ chuẩn bị vào buổi sáng) - 'prep' là chuẩn bị tài liệu/chiến lược cho meeting, (3) Tom xin lỗi về 'inconvenience' (sự bất tiện) - thể hiện trách nhiệm chuyên nghiệp vì delay có thể ảnh hưởng đến lịch trình công việc, (4) Peter đi đón Tom tại sân bay - đây là hành động phổ biến giữa các đồng nghiệp trong business trip. Phân tích các lựa chọn sai: (A) 'On vacation' - không có dấu hiệu du lịch giải trí, không ai nhắc đến client meeting trong kỳ nghỉ, (C) 'Works for airline' - không có bằng chứng, anh ấy là hành khách bị delay, (D) 'First time traveling' - không có thông tin về kinh nghiệm du lịch. Chỉ 'On business trip' được hỗ trợ bởi ngữ cảnh client meeting."
    },
    {
      "id": 52,
      "question": "What caused the delay?",
      "options": ["Weather", "Missed connection", "Mechanical", "Overbooking"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Missed connection'** (Bỏ lỡ chuyến bay kết nối). Tom giải thích rõ ràng: '**Flight delayed by 3 hours, missing connection in Tokyo.**' (Chuyến bay bị trễ 3 giờ, bỏ lỡ chuyến kết nối ở Tokyo). Chuỗi sự kiện: (1) Chuyến bay đầu tiên của Tom bị delay 3 giờ (nguyên nhân gốc không được nêu cụ thể - có thể là thời tiết, kỹ thuật, v.v.), (2) Do delay này, Tom đến Tokyo muộn hơn dự kiến, (3) Kết quả: anh ấy **missed connection** (bỏ lỡ chuyến bay kết nối) từ Tokyo đến Osaka, (4) Anh phải đặt chuyến bay mới: 'New arrival at Osaka 21:00' (đến Osaka lúc 21:00 thay vì giờ ban đầu). Từ khóa quan trọng: 'missing connection' = hiện tại phân từ, diễn tả kết quả của delay. Phân tích các lựa chọn sai: (A) 'Weather' - không được đề cập cụ thể, (C) 'Mechanical' - không có thông tin về vấn đề kỹ thuật, (D) 'Overbooking' - không liên quan. Chỉ 'Missed connection' là kết quả trực tiếp được Tom nêu rõ."
    },
    {
      "id": 53,
      "question": "New arrival time?",
      "options": ["18:00", "19:00", "20:00", "21:00"],
      "correct": 3,
      "explanation": "Đáp án đúng là **(D) '21:00'** (9 giờ tối). Tom thông báo chính xác trong tin nhắn thứ hai: '**New arrival at Osaka 21:00** on same airline.' (Giờ đến mới tại Osaka là 21:00, cùng hãng bay). Từ khóa: 'New arrival' (giờ đến mới) = thời gian chuyến bay thay thế sau khi bỏ lỡ chuyến kết nối ban đầu. '21:00' là định dạng 24 giờ = 9:00 PM (9 giờ tối). Thông tin bổ sung 'on same airline' (cùng hãng bay) cho thấy Tom được re-booked (đặt lại) trên cùng hãng, giúp đơn giản hóa việc xử lý hành lý ký gửi. Phân tích các lựa chọn sai: (A) '18:00' - không được đề cập, (B) '19:00' - không đúng, (C) '20:00' - sai 1 giờ. Chỉ '21:00' khớp chính xác với thông tin Tom cung cấp. Peter cũng chấp nhận thời gian này ('Got it') để sắp xếp đi đón."
    },
    {
      "id": 54,
      "question": "How many checked bags?",
      "options": ["One", "Two", "Three", "None"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Two'** (Hai cái). Khi Peter hỏi: 'Checked bags?' (Có hành lý ký gửi không?), Tom trả lời ngắn gọn: '**Yes, two.**' (Có, hai cái). Từ khóa: 'two' = số lượng hành lý ký gửi. 'Checked bags' (hành lý ký gửi) là hành lý được gửi vào khoang hành lý máy bay, khác với 'carry-on bags' (hành lý xách tay mang lên cabin). Lý do Peter hỏi: (1) Để biết Tom có cần chờ lấy hành lý tại baggage claim không, (2) Ước tính thời gian Tom ra khỏi sân bay (lấy hành lý + qua hải quan), (3) Sắp xếp không gian trong xe nếu cần. Phân tích các lựa chọn sai: (A) 'One' - Tom nói rõ 'two', không phải 'one', (C) 'Three' - không đúng, (D) 'None' - sai vì Tom trả lời 'Yes' (có hành lý). Chỉ 'Two' khớp với câu trả lời trực tiếp của Tom."
    },
    {
      "id": 55,
      "question": "Where to meet?",
      "options": ["Before customs", "After customs", "At hotel", "In Tokyo"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'After customs'** (Sau khi qua hải quan). Tom đề xuất: '**Meet after customs?**' (Gặp nhau sau khi qua hải quan nhé?), và Peter đồng ý: '**Yes**, but parking tough.' (Được, nhưng chỗ đậu xe khó). Quy trình tại sân bay quốc tế: (1) Máy bay hạ cánh → (2) Immigration (kiểm tra hộ chiếu) → (3) Baggage claim (lấy hành lý ký gửi) → (4) **Customs (hải quan)** → (5) Khu vực đón khách công cộng. 'After customs' nghĩa là Tom sẽ hoàn tất tất cả thủ tục nhập cảnh và hải quan, sau đó gặp Peter ở khu vực đón khách (arrivals hall). Đây là điểm gặp mặt tiêu chuẩn vì: (1) Chỉ hành khách mới được vào khu vực trước customs, (2) Sau customs là khu công cộng, Peter có thể vào đón. Phân tích các lựa chọn sai: (A) 'Before customs' - không thể vì khu vực này không cho phép người đón vào, (C) 'At hotel' - không được đề cập, họ gặp tại sân bay, (D) 'In Tokyo' - sai địa điểm, họ gặp ở Osaka. Chỉ 'After customs' được Tom đề xuất và Peter chấp nhận."
    },
    {
      "id": 56,
      "question": "What about parking?",
      "options": ["Easy", "Tough", "Free", "Not mentioned"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Tough'** (Khó khăn). Peter nói: 'Yes, but **parking tough**. Extra time helps.' (Được, nhưng chỗ đậu xe khó. Thời gian thêm có ích). Từ khóa: '**parking tough**' (chỗ đậu xe khó) = câu rút gọn trong text message, đầy đủ là 'parking is tough' (việc đậu xe thì khó khăn). Ý nghĩa: (1) Sân bay Osaka có lưu lượng cao, khó tìm chỗ đậu xe, (2) Peter có thể phải lái xe vòng quanh nhiều lần để tìm chỗ, (3) '**Extra time helps**' (thời gian thêm có ích) - vì Tom đến muộn 3 giờ so với dự kiến, Peter có thêm thời gian để giải quyết vấn đề parking, không bị vội vã. Đây là cách Peter nhìn nhận tích cực về delay: mặc dù không may, nhưng ít nhất anh có thêm thời gian chuẩn bị. Phân tích các lựa chọn sai: (A) 'Easy' - ngược lại hoàn toàn với 'tough', (C) 'Free' - không đề cập giá cả, chỉ nói về độ khó, (D) 'Not mentioned' - sai vì Peter nói rõ 'parking tough'. Chỉ 'Tough' phản ánh đúng tình trạng parking tại sân bay."
    },
    {
      "id": 57,
      "question": "What is tomorrow?",
      "options": ["Flight home", "Client meeting", "Vacation", "Rest day"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Client meeting'** (Cuộc họp khách hàng). Tom hỏi xác nhận: '**Still on for client meeting tomorrow?**' (Vẫn còn cuộc họp khách hàng vào ngày mai chứ?), và Peter xác nhận tích cực: '**Absolutely**, we'll prep in morning.' (Chắc chắn rồi, chúng ta sẽ chuẩn bị vào buổi sáng). Từ khóa: 'client meeting tomorrow' (cuộc họp khách hàng vào ngày mai) = lý do chính cho chuyến công tác này. Cụm 'Still on for...' (Vẫn còn... chứ?) thể hiện Tom lo lắng rằng delay có thể ảnh hưởng đến lịch trình, nhưng Peter trấn an rằng họ vẫn kịp. Plan: (1) Tom đến Osaka tối nay (21:00), (2) Sáng mai: prep (chuẩn bị tài liệu/chiến lược), (3) Sau đó: client meeting (họp với khách hàng). Phân tích các lựa chọn sai: (A) 'Flight home' - không đề cập, họ vừa mới đến, (C) 'Vacation' - không phải kỳ nghỉ mà là business trip, (D) 'Rest day' - không nghỉ ngơi, họ có meeting. Chỉ 'Client meeting' được nêu rõ ràng là kế hoạch ngày mai."
    },
    {
      "id": 58,
      "question": "Relationship between Tom and Peter?",
      "options": ["Family", "Colleagues", "Strangers", "Pilots"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Colleagues'** (Đồng nghiệp). Có nhiều bằng chứng về mối quan hệ đồng nghiệp chuyên nghiệp: (1) Họ có **shared responsibility**: 'Still on for **our client meeting** tomorrow?' - từ 'our' (của chúng ta) chỉ họ cùng tham gia meeting này, (2) Peter nói: '**we'll prep** in morning' - 'we' (chúng ta) = họ sẽ cùng chuẩn bị, không phải Peter làm một mình, (3) Peter đi đón Tom tại sân bay - hành động phổ biến giữa colleagues trong business trip, đặc biệt khi họ cùng làm việc trên một dự án/deal, (4) Tone giao tiếp: chuyên nghiệp nhưng thân thiện, không quá trang trọng (như với sếp) nhưng cũng không quá thân mật (như gia đình), (5) Tom xin lỗi về 'inconvenience' - thể hiện trách nhiệm chuyên nghiệp với đồng đội. Phân tích các lựa chọn sai: (A) 'Family' - không có dấu hiệu quan hệ gia đình, tone quá chuyên nghiệp, (C) 'Strangers' - không thể, họ đã có kế hoạch làm việc chung, (D) 'Pilots' - không có bằng chứng, họ là business travelers. Chỉ 'Colleagues' phù hợp với tất cả ngữ cảnh."
    },
    {
      "id": 59,
      "question": "What does Peter mean by 'extra time helps'?",
      "options": ["To find parking", "To sleep", "To eat", "To work"],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'To find parking'** (Để tìm chỗ đậu xe). Phân tích ngữ cảnh: Peter nói: 'Yes, but **parking tough**. **Extra time helps**.' (Được, nhưng chỗ đậu xe khó. Thời gian thêm có ích). Chuỗi logic: (1) Peter đồng ý đón Tom tại sân bay, (2) NHƯNG ('but') anh lo lắng về vấn đề **parking** (đậu xe khó), (3) May mắn là Tom đến muộn 3 giờ so với dự kiến ban đầu, (4) '**Extra time**' (thời gian thêm) = 3 giờ delay này, (5) '**Helps**' (có ích) = giúp Peter có đủ thời gian để: lái xe đến sân bay sớm hơn, tìm kiếm chỗ đậu xe (có thể phải vòng vòng), không bị vội vã hay stress về việc tìm parking. Peter đang nhìn nhận tích cực về tình huống xấu (delay): mặc dù không may, nhưng ít nhất delay tạo ra buffer time để giải quyết vấn đề parking khó khăn. Phân tích các lựa chọn sai: (B) 'To sleep' - không liên quan đến parking, (C) 'To eat' - không đề cập, (D) 'To work' - không phải bối cảnh làm việc lúc này. Chỉ 'To find parking' kết nối trực tiếp với câu trước đó về 'parking tough'."
    },
    {
      "id": 60,
      "question": "What will they do in morning?",
      "options": ["Travel", "Prep for meeting", "Sightsee", "Cancel"],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'Prep for meeting'** (Chuẩn bị cho cuộc họp). Peter xác nhận rõ ràng: 'Absolutely, **we'll prep in morning**.' (Chắc chắn rồi, chúng ta sẽ chuẩn bị vào buổi sáng). Từ khóa: '**prep**' (chuẩn bị) = rút gọn của 'prepare' hoặc 'preparation', là thuật ngữ phổ biến trong business context. Ngữ cảnh đầy đủ: (1) Tom hỏi: 'Still on for **client meeting** tomorrow?' (Vẫn còn cuộc họp khách hàng ngày mai chứ?), (2) Peter xác nhận: 'Absolutely' (Chắc chắn rồi) - meeting vẫn diễn ra đúng kế hoạch, (3) '**We'll prep in morning**' - họ sẽ dành thời gian buổi sáng để chuẩn bị: xem lại tài liệu, thảo luận chiến lược, chuẩn bị presentation, điều chỉnh proposal, v.v. Plan chi tiết: (1) Tối nay: Tom đến Osaka 21:00, về khách sạn nghỉ ngơi, (2) Sáng mai: 'prep' (chuẩn bị meeting), (3) Sau đó: client meeting chính thức. Phân tích các lựa chọn sai: (A) 'Travel' - họ đã travel xong (Tom đã đến Osaka tối nay), (C) 'Sightsee' - không phải du lịch giải trí, đây là business trip, (D) 'Cancel' - ngược lại, Peter xác nhận 'Absolutely' (chắc chắn sẽ họp). Chỉ 'Prep for meeting' khớp với 'we'll prep in morning'."
    }
  ]
}
  }
};
</file>

<file path="src/data/exams/exam18.js">
export const EXAM18_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 18 (Dựa trên Sách Listening and Notetaking Skills)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Nội dung lấy cảm hứng từ sách Listening and Notetaking Skills của Patricia A. Dunkel và Frank P. Pialorsi, tập trung vào các chủ đề học thuật như Anthropology, History, Sociology, Communication và Biology. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài để luyện nghe chi tiết và ghi chú.",
  parts: {
    // Listening Parts - Các phần nghe dựa trên chủ đề học thuật từ sách
part1: {
    "title": "PART 1: Short Conversations",
    "description": "Nghe đoạn hội thoại giữa hai sinh viên về chủ đề Anthropology từ Unit 1 của sách. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi. Tập trung vào kỹ năng ghi chú ý chính/phụ.",
    "type": "listening",
    "script": "Anna: Hey, Tom! I'm preparing for our anthropology exam on the study of humans and their creations. The professor mentioned how early humans adapted to different environments. What do you think is the most fascinating part?\n\nTom: Definitely the way they created tools from stones and bones. In the lecture, it was said that Homo sapiens started making advanced tools around 300,000 years ago. But I think the real breakthrough was with agriculture about 10,000 years ago, which led to settled communities.\n\nAnna: True, but don't forget the cultural artifacts like cave paintings in Lascaux, France. Those are over 17,000 years old and show early artistic expression. The professor emphasized that these creations help us understand human cognition and symbolism.\n\nTom: Yeah, and in modern anthropology, we're looking at how technology is a new form of human creation. Like smartphones changing social interactions. But I got confused about the difference between physical and cultural anthropology.\n\nAnna: Physical focuses on biological evolution, like skeletal remains, while cultural looks at behaviors, languages, and artifacts. The book says integrating both gives a full picture of human development.\n\nTom: Makes sense. I need to note down the key dates for the exam. Also, the professor talked about National Geographic explorers studying indigenous tribes today to preserve their creations.",
    "questions": [
        {
            "id": 1,
            "options": [
                "Homo sapiens made tools 10,000 years ago.",
                "Tools were only made from bones.",
                "Agriculture began 300,000 years ago.",
                "Advanced tools started around 300,000 years ago."
            ],
            "correct": 3,
            "explanation": "**Tom rõ ràng nói: 'Homo sapiens started making advanced tools around 300,000 years ago.' Từ khóa chính: 'advanced tools' và '300,000 years ago'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí D (index 3).*"
        },
        {
            "id": 2,
            "options": [
                "Cave paintings are 10,000 years old.",
                "Cave paintings are over 17,000 years old.",
                "Cave paintings show modern technology.",
                "Cave paintings are in Africa."
            ],
            "correct": 1,
            "explanation": "**Anna nói rõ: 'Those are over 17,000 years old' về hang động Lascaux ở Pháp. Từ khóa: 'over 17,000 years old'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí B (index 1).*"
        },
        {
            "id": 3,
            "options": [
                "Physical anthropology studies behaviors.",
                "Cultural anthropology studies biological evolution.",
                "Physical focuses on biological evolution.",
                "Both are the same."
            ],
            "correct": 2,
            "explanation": "**Anna giải thích: 'Physical focuses on biological evolution, like skeletal remains, while cultural looks at behaviors, languages, and artifacts.' Đáp án đúng nhấn mạnh Physical focuses on biological evolution. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 4,
            "options": [
                "Technology is not a human creation.",
                "Indigenous tribes don't use technology.",
                "Smartphones change social interactions.",
                "Anthropology ignores modern creations."
            ],
            "correct": 2,
            "explanation": "**Tom nói: 'Technology is a new form of human creation. Like smartphones changing social interactions.' Từ khóa chính: 'changing social interactions'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 5,
            "options": [
                "National Geographic studies ancient only.",
                "The book ignores integration of fields.",
                "Key dates are not important.",
                "Explorers study indigenous tribes to preserve creations."
            ],
            "correct": 3,
            "explanation": "**Tom nói cuối cùng: 'National Geographic explorers studying indigenous tribes today to preserve their creations.' Từ khóa: 'preserve their creations'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí D (index 3).*"
        }
    ]
},
  part2: {
   "title": "PART 2: Longer Conversation",
    "description": "5 câu hỏi - Đoạn hội thoại dài giữa giáo sư và sinh viên về History từ Unit 2. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D). Luyện ghi chú theo dòng thời gian.",
    "type": "listening",
    "script": "Professor: Good morning, class. Today, we're discussing history as the passing of time and civilizations. Let's start with ancient Mesopotamia, often called the cradle of civilization.\n\nStudent 1: Professor, why is Mesopotamia important? I noted it had the first cities around 3500 BCE.\n\nProfessor: Yes, cities like Uruk emerged with writing systems, like cuneiform, around that time. This allowed record-keeping and laws, such as Hammurabi's Code in 1750 BCE.\n\nStudent 2: What about the fall of civilizations? The book mentions environmental factors, like soil depletion in Mesopotamia.\n\nProfessor: Exactly. Over-farming led to salinization, weakening the empire. Similarly, the Roman Empire fell due to invasions, economic issues, and overexpansion around 476 CE.\n\nStudent 1: And in modern history? How does time passing affect us today?\n\nProfessor: Think of the Industrial Revolution starting in the 18th century, transforming societies from agrarian to industrial. It brought innovations but also inequalities.\n\nStudent 2: The National Geographic video showed explorers uncovering lost cities, like Machu Picchu, built around 1450 CE by the Incas.\n\nProfessor: Right, and notetaking tip: Use timelines to organize historical events for better retention.",
    "questions": [
        {
            "id": 6,
            "question": "When did the first cities in Mesopotamia emerge?",
            "options": ["1750 BCE", "476 CE", "18th century", "3500 BCE"],
            "correct": 3,
            "explanation": "**Student 1 nói rõ: 'I noted it had the first cities around 3500 BCE.' Từ khóa chính: 'first cities' và '3500 BCE'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí D (index 3).*"
        },
        {
            "id": 7,
            "question": "What was Hammurabi's Code?",
            "options": [
                "A writing system.",
                "A set of laws.",
                "An environmental factor.",
                "An industrial innovation."
            ],
            "correct": 1,
            "explanation": "**Giáo sư nói: 'This allowed record-keeping and laws, such as Hammurabi's Code in 1750 BCE.' Từ khóa: 'laws' và 'Hammurabi's Code'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí B (index 1).*"
        },
        {
            "id": 8,
            "question": "Why did Mesopotamia weaken?",
            "options": [
                "Invasions.",
                "Overexpansion.",
                "Soil depletion.",
                "Innovations."
            ],
            "correct": 2,
            "explanation": "**Giáo sư nói: 'Over-farming led to salinization, weakening the empire.' Tương đương 'Soil depletion'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 9,
            "question": "When was Machu Picchu built?",
            "options": ["3500 BCE", "1750 BCE", "1450 CE", "476 CE"],
            "correct": 2,
            "explanation": "**Student 2 nói: 'Machu Picchu, built around 1450 CE by the Incas.' Từ khóa: '1450 CE'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 10,
            "question": "What notetaking tip is given?",
            "options": [
                "Ignore dates.",
                "Focus only on falls.",
                "Avoid videos.",
                "Use timelines."
            ],
            "correct": 3,
            "explanation": "**Giáo sư kết luận: 'Use timelines to organize historical events for better retention.' Từ khóa: 'Use timelines'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí D (index 3).*"
        }
    ]
},
  part3: {
   "title": "PART 3: Monologue",
    "description": "5 câu hỏi - Đoạn độc thoại (bài giảng) về Sociology từ Unit 3. Nghe và chọn đáp án tốt nhất (A, B, C, D). Luyện ghi chú theo cấu trúc ý chính/phụ.",
    "type": "listening",
    "script": "Welcome to Sociology 101. Today, we explore the changing world of work. In the past, work was primarily agrarian or manual labor, but the 20th century brought the rise of service industries.\n\nGlobalization has transformed jobs, with outsourcing to countries like India for IT services. However, this leads to job displacement in developed nations.\n\nTechnology, such as AI, is automating tasks, requiring workers to upskill. The gig economy, like Uber drivers, offers flexibility but lacks benefits.\n\nSociologists note inequality: Women and minorities often face wage gaps. Policies like minimum wage aim to address this.\n\nFrom National Geographic, explorers study how work changes in remote communities, like Amazon tribes adapting to modern economies.\n\nNotetaking strategy: Use outlines to capture main ideas and supporting details for complex topics like this.",
    "questions": [
        {
            "id": 11,
            "question": "What transformed work in the 20th century?",
            "options": ["Agrarian labor", "Service industries", "Gig economy", "AI"],
            "correct": 1,
            "explanation": "**Bài giảng nói: 'the 20th century brought the rise of service industries.' Từ khóa: 'Service industries'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí B (index 1).*"
        },
        {
            "id": 12,
            "question": "What is an example of globalization's effect?",
            "options": [
                "More manual labor",
                "Less technology",
                "Job displacement",
                "No outsourcing"
            ],
            "correct": 2,
            "explanation": "**Bài giảng nói: 'this leads to job displacement in developed nations.' Từ khóa: 'job displacement'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 13,
            "question": "What does the gig economy lack?",
            "options": [
                "Flexibility",
                "Automation",
                "Upskilling",
                "Benefits"
            ],
            "correct": 3,
            "explanation": "**Bài giảng nói: 'gig economy... lacks benefits.' Từ khóa: 'lacks benefits'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí D (index 3).*"
        },
        {
            "id": 14,
            "question": "Who faces wage gaps?",
            "options": ["Only men", "All workers equally", "Women and minorities", "No one"],
            "correct": 2,
            "explanation": "**Bài giảng nói: 'Women and minorities often face wage gaps.' Từ khóa: 'Women and minorities'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 15,
            "question": "What notetaking strategy is suggested?",
            "options": [
                "Ignore details",
                "Only main ideas",
                "No strategy",
                "Use outlines"
            ],
            "correct": 3,
            "explanation": "**Bài giảng kết luận: 'Use outlines to capture main ideas and supporting details'. Từ khóa: 'Use outlines'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí D (index 3).*"
        }
    ]
},
  part4: {
    "title": "PART 4: Extended Conversation",
    "description": "5 câu hỏi - Đoạn hội thoại mở rộng về Communication từ Unit 4. Nghe và chọn đáp án tốt nhất (A, B, C, D). Luyện ghi chú theo sơ đồ mind map.",
    "type": "listening",
    "script": "Interviewer 1: Welcome to our discussion on communication: the influence of language, culture, and gender. With me is Doctor Chen from National Geographic.\n\nDoctor Chen: Thanks. Language shapes thought; for example, some cultures have multiple words for snow, affecting perception.\n\nStudent: How does culture influence communication?\n\nDoctor Chen: High-context cultures like Japan rely on nonverbal cues, while low-context like the US use direct words.\n\nInterviewer 1: And gender? Studies show women use more collaborative language, men more assertive.\n\nDoctor Chen: Yes, but it's cultural too. In some societies, gender roles dictate communication styles.\n\nStudent: What about technology's role?\n\nDoctor Chen: Social media bridges cultures but can cause misunderstandings due to lack of tone.\n\nInterviewer 1: Notetaking tip: Use mind maps to connect influences like language-culture-gender.",
    "questions": [
        {
            "id": 16,
            "question": "How does language shape thought?",
            "options": [
                "It doesn't influence.",
                "Only in high-context cultures.",
                "Multiple words for concepts affect perception.",
                "Gender dictates it."
            ],
            "correct": 2,
            "explanation": "**Doctor Chen nói rõ: 'some cultures have multiple words for snow, affecting perception.' *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 17,
            "question": "What do high-context cultures rely on?",
            "options": [
                "Direct words",
                "Technology",
                "Nonverbal cues",
                "Assertive language"
            ],
            "correct": 2,
            "explanation": "**Doctor Chen giải thích: 'High-context cultures like Japan rely on nonverbal cues.' Từ khóa: 'Nonverbal cues'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 18,
            "question": "How do women typically communicate?",
            "options": [
                "More assertive",
                "Less verbal",
                "More collaborative",
                "Same as men always"
            ],
            "correct": 2,
            "explanation": "**Interviewer 1 nói: 'Studies show women use more collaborative language.' Từ khóa: 'More collaborative'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí C (index 2).*"
        },
        {
            "id": 19,
            "question": "What can social media cause?",
            "options": [
                "Perfect understanding",
                "Misunderstandings due to lack of tone",
                "Only positive influences",
                "No cultural bridges"
            ],
            "correct": 1,
            "explanation": "**Doctor Chen nói: 'Social media... can cause misunderstandings due to lack of tone.' *Điều chỉnh: Đưa đáp án đúng xuống vị trí B (index 1).*"
        },
        {
            "id": 20,
            "question": "What notetaking tip is given?",
            "options": [
                "Avoid connections",
                "Only lists",
                "No tips",
                "Use mind maps"
            ],
            "correct": 3,
            "explanation": "**Interviewer 1 gợi ý: 'Use mind maps to connect influences.' Từ khóa: 'Use mind maps'. *Điều chỉnh: Đưa đáp án đúng xuống vị trí D (index 3).*"
        }
    ]
},
    // Reading Parts - Giữ cấu trúc tương tự, thay đổi nội dung để phù hợp chủ đề học thuật/general
   part5: {
    "title": "PART 5: Fill in the Blank (Grammar/Vocabulary)",
    "description": "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio. Tập trung vào từ vựng học thuật từ sách.",
    "type": "reading",
    "questions": [
        {
            "id": 21,
            "question": "Anthropologists study human _______ to understand cultural evolution.",
            "options": ["artifacts", "machines", "animals", "planets"],
            "correct": 2,
            "explanation": "**'Artifacts' (tạo tác/sản phẩm văn hóa) là từ vựng chính từ Unit 1. *Điều chỉnh: Đưa 'artifacts' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 22,
            "question": "The Industrial Revolution _______ society from agrarian to industrial.",
            "options": ["transformed", "destroyed", "ignored", "copied"],
            "correct": 3,
            "explanation": "**'Transformed' (thay đổi toàn bộ/biến đổi lớn) từ Unit 2. *Điều chỉnh: Đưa 'transformed' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 23,
            "question": "Globalization has led to job _______ in some sectors.",
            "options": ["displacement", "creation", "stability", "reduction"],
            "correct": 1,
            "explanation": "**'Displacement' (mất việc/sự dịch chuyển lao động) từ Unit 3. *Điều chỉnh: Đưa 'displacement' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 24,
            "question": "High-context cultures rely on _______ communication.",
            "options": ["nonverbal", "direct", "written", "formal"],
            "correct": 2,
            "explanation": "**'Nonverbal' (không lời/ngôn ngữ cơ thể) từ Unit 4. *Điều chỉnh: Đưa 'nonverbal' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 25,
            "question": "Genetic engineering allows scientists to _______ DNA.",
            "options": ["modify", "destroy", "ignore", "copy"],
            "correct": 0,
            "explanation": "**'Modify' (chỉnh sửa/thay đổi) từ Unit 5 (Biology). (Đáp án 0 được giữ lại)."
        },
        {
            "id": 26,
            "question": "The lecture will _______ key historical events.",
            "options": ["cover", "avoid", "create", "delete"],
            "correct": 3,
            "explanation": "**'Cover' (bao quát/trình bày) trong bối cảnh học tập. *Điều chỉnh: Đưa 'cover' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 27,
            "question": "Students should take notes _______ the professor speaks.",
            "options": ["while", "after", "before", "unless"],
            "correct": 0,
            "explanation": "**'While' (chỉ hành động đồng thời/cùng lúc). (Đáp án 0 được giữ lại)."
        },
        {
            "id": 28,
            "question": "The study focuses on gender _______ in communication.",
            "options": ["differences", "similarities", "equalities", "absences"],
            "correct": 1,
            "explanation": "**'Differences' (sự khác biệt) từ Unit 4. *Điều chỉnh: Đưa 'differences' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 29,
            "question": "Civilizations often fall due to environmental _______.",
            "options": ["factors", "successes", "inventions", "traditions"],
            "correct": 2,
            "explanation": "**'Factors' (yếu tố/nguyên nhân) từ Unit 2. *Điều chỉnh: Đưa 'factors' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 30,
            "question": "Effective notetaking improves academic _______.",
            "options": ["performance", "failure", "boredom", "absence"],
            "correct": 0,
            "explanation": "**'Performance' (hiệu suất/kết quả học tập). (Đáp án 0 được giữ lại)."
        }
    ]
},
  part6: {
    "title": "PART 6: Cloze Text (Email/Announcement)",
    "description": "10 câu hỏi - Điền từ/cụm vào văn bản email về hội thảo học thuật. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
    "type": "reading",
    "text": "To: All Students in Anthropology Department\nFrom: Dr. Elena Ramirez, Department Head \nSubject: Upcoming Workshop on Notetaking Skills\n\nDear Students,\n\nWe are excited to announce a workshop based on the Listening and Notetaking Skills series, focusing on academic lectures in anthropology. The session will help you (31) effective strategies for recording key ideas during complex discussions.\n\nOur goal is to enhance your ability to (32) information from lectures on human evolution and cultural artifacts. Experienced instructors will demonstrate techniques like outlining and mind mapping.\n\nPlease submit your registration by April 15 to (33) a spot. The workshop includes interactive activities and video clips from National Geographic explorers.\n\nIt will be held on April 20 at the main auditorium. We recommend bringing notebooks to practice (34) during sample lectures.\n\nFor new students, this is an opportunity to (35) with peers and faculty on study skills.\n\nIf you have questions, feel free to (36) me.\n\nBest,\nDr. Elena Ramirez",
    "questions": [
        {
            "id": 31,
            "type": "fill",
            "question": "(31) - Điền từ thích hợp (help you ___ effective strategies)",
            "options": ["learn", "ignore", "forget", "avoid"],
            "correct": 2,
            "explanation": "**'Learn' (HỌC các chiến lược hiệu quả). *Điều chỉnh: Đưa 'learn' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 32,
            "type": "fill",
            "question": "(32) - Điền từ thích hợp (ability to ___ information)",
            "options": ["retain", "lose", "delete", "hide"],
            "correct": 3,
            "explanation": "**'Retain' (GIỮ LẠI thông tin). *Điều chỉnh: Đưa 'retain' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 33,
            "type": "fill",
            "question": "(33) - Điền từ thích hợp (to ___ a spot)",
            "options": ["secure", "cancel", "miss", "delay"],
            "correct": 1,
            "explanation": "**'Secure' (ĐẢM BẢO chỗ). *Điều chỉnh: Đưa 'secure' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 34,
            "type": "fill",
            "question": "(34) - Điền từ thích hợp (practice ___ during sample lectures)",
            "options": ["notetaking", "sleeping", "eating", "running"],
            "correct": 0,
            "explanation": "**'Notetaking' (LUYỆN GHI CHÚ). (Đáp án 0 được giữ lại)."
        },
        {
            "id": 35,
            "type": "fill",
            "question": "(35) - Điền từ thích hợp (opportunity to ___ with peers)",
            "options": ["engage", "fight", "ignore", "leave"],
            "correct": 3,
            "explanation": "**'Engage' (TƯƠNG TÁC với bạn cùng lớp). *Điều chỉnh: Đưa 'engage' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 36,
            "type": "fill",
            "question": "(36) - Điền từ thích hợp (feel free to ___ me)",
            "options": ["contact", "avoid", "block", "forget"],
            "correct": 1,
            "explanation": "**'Contact' (LIÊN HỆ tôi). *Điều chỉnh: Đưa 'contact' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 37,
            "type": "comprehension",
            "question": "(37) - When is the workshop?",
            "options": ["April 15", "April 20", "May 1", "June 10"],
            "correct": 0,
            "explanation": "**Email rõ ràng nói: 'It will be held on April 20'. *Điều chỉnh: Đưa 'April 20' xuống vị trí A (index 0) để thay đổi phân bổ.*"
        },
        {
            "id": 38,
            "type": "comprehension",
            "question": "(38) - What is the main purpose?",
            "options": [
                "Teach notetaking skills",
                "Sell books",
                "Cancel classes",
                "Travel planning"
            ],
            "correct": 2,
            "explanation": "**Email có tiêu đề: 'Workshop on Notetaking Skills'. Mục tiêu chính là DẠY KỸ NĂNG GHI CHÚ. *Điều chỉnh: Đưa 'Teach notetaking skills' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 39,
            "type": "comprehension",
            "question": "(39) - Who is the sender?",
            "options": ["Student", "Department Head", "Explorer", "Author"],
            "correct": 3,
            "explanation": "**Email rõ ràng viết: 'From: Dr. Elena Ramirez, Department Head'. *Điều chỉnh: Đưa 'Department Head' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 40,
            "type": "comprehension",
            "question": "(40) - What should students bring?",
            "options": ["Notebooks", "Food", "Phones", "Nothing"],
            "correct": 0,
            "explanation": "**Email rõ ràng nói: 'We recommend bringing notebooks'. (Đáp án 0 được giữ lại)."
        }
    ]
},
  part7: {
    "title": "PART 7: Multiple Texts (Advertisement + Email)",
    "description": "10 câu hỏi - Đọc quảng cáo và email về sách, chọn đáp án tốt nhất (A, B, C, D).",
    "type": "reading",
    "text": "www.academicbooks.com\n\n**Listening and Notetaking Skills Series**\n\nImprove your academic English with this 3-level series by Patricia A. Dunkel and Frank P. Pialorsi. Features National Geographic videos and authentic lectures.\n\n**Levels:**\n\n1. Beginner: Basic topics like geography.\n\n2. Intermediate: Mid-level subjects.\n\n3. Advanced: Anthropology, History, etc.\n\nIncludes audioscripts, notetaking strategies, vocabulary building.\n\nEmail us at info@academicbooks.com for orders. Get a free sample unit!\n\nTo: info@academicbooks.com\nFrom: student@huflit.edu\nDate: December 3, 2025\nSubject: Order Inquiry\n\nI saw your ad for the Listening and Notetaking Skills series. I'm interested in Level 3 for my anthropology class. Does it include videos? How soon can I get it? I need it for exams. Also, is there a discount for students?\n\nThanks,\nLan Nguyen\nHUFLIT Student\nPhone: 0123456789",
    "questions": [
        {
            "id": 41,
            "question": "What does the series feature?",
            "options": [
                "National Geographic videos",
                "Fiction stories",
                "Math problems",
                "Cooking recipes"
            ],
            "correct": 3,
            "explanation": "**'National Geographic videos' (Video National Geographic). *Điều chỉnh: Đưa 'National Geographic videos' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 42,
            "question": "What is suggested about the series?",
            "options": [
                "It has 3 levels.",
                "It's only for beginners.",
                "No audioscripts.",
                "Free for all."
            ],
            "correct": 1,
            "explanation": "**'It has 3 levels' (Bộ sách có 3 cấp độ). *Điều chỉnh: Đưa 'It has 3 levels' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 43,
            "question": "Who is Lan Nguyen?",
            "options": ["Author", "Student", "Teacher", "Explorer"],
            "correct": 3,
            "explanation": "**'Student' (Sinh viên HUFLIT). *Điều chỉnh: Đưa 'Student' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 44,
            "question": "What level does Lan want?",
            "options": [
                "Level 1",
                "Level 2",
                "Level 3",
                "All levels"
            ],
            "correct": 0,
            "explanation": "**'Level 3' (Lan hỏi mua cấp độ 3). *Điều chỉnh: Đưa 'Level 3' xuống vị trí A (index 0) để thay đổi phân bổ.*"
        },
        {
            "id": 45,
            "question": "What does Lan ask about?",
            "options": [
                "Videos and discount",
                "Free books",
                "Cooking classes",
                "Math help"
            ],
            "correct": 2,
            "explanation": "**'Videos and discount' (Video và chiết khấu). *Điều chỉnh: Đưa 'Videos and discount' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 46,
            "question": "What is offered in the ad?",
            "options": [
                "Free sample unit",
                "Full refund",
                "No orders",
                "Only Level 1"
            ],
            "correct": 3,
            "explanation": "**'Free sample unit' (Bộ mẫu miễn phí). *Điều chỉnh: Đưa 'Free sample unit' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 47,
            "question": "Why does Lan need the book?",
            "options": [
                "For exams",
                "For fun",
                "For cooking",
                "For travel"
            ],
            "correct": 1,
            "explanation": "**'For exams' (Cho kỳ thi). *Điều chỉnh: Đưa 'For exams' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 48,
            "question": "What subject is Level 3 for?",
            "options": [
                "Anthropology",
                "Basic topics",
                "Math",
                "Fiction"
            ],
            "correct": 2,
            "explanation": "**'Anthropology' (Nhân chủng học, Level 3). *Điều chỉnh: Đưa 'Anthropology' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 49,
            "question": "How can one order?",
            "options": [
                "Email info@academicbooks.com",
                "Call only",
                "Visit store",
                "No way"
            ],
            "correct": 0,
            "explanation": "**'Email info@academicbooks.com' (Đặt hàng qua email). (Đáp án 0 được giữ lại)."
        },
        {
            "id": 50,
            "question": "What does Level 1 cover?",
            "options": [
                "Basic topics like geography",
                "Advanced anthropology",
                "Biology only",
                "No topics"
            ],
            "correct": 2,
            "explanation": "**'Basic topics like geography' (Chủ đề cơ bản như địa lý). *Điều chỉnh: Đưa 'Basic topics like geography' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        }
    ]
},
  part8: {
    "title": "PART 8: Text Message Chain",
    "description": "10 câu hỏi - Đọc chuỗi tin nhắn về việc ôn sách, chọn đáp án tốt nhất (A, B, C, D).",
    "type": "reading",
    "text": "Mia (10:00): Hey Alex, studying for the listening exam? I'm using the Notetaking Skills book, Level 3.\n\nAlex (10:05): Yeah, the anthropology unit is tough. Key tip: Use outlines for lectures.\n\nMia (10:10): True. The history part mentions civilizations falling due to environment. Noted that.\n\nAlex (10:15): And sociology on work changes. Gig economy lacks benefits.\n\nMia (10:20): Don't forget communication: Gender influences language styles.\n\nAlex (10:25): Right. Biology unit on genetics. Let's meet to practice notetaking.\n\nMia (10:30): OK, tomorrow at library?",
    "questions": [
        {
            "id": 51,
            "question": "What book are they using?",
            "options": [
                "Notetaking Skills Level 3",
                "Math book",
                "Cooking book",
                "Travel guide"
            ],
            "correct": 1,
            "explanation": "**'Notetaking Skills Level 3'. *Điều chỉnh: Đưa 'Notetaking Skills Level 3' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 52,
            "question": "What tip does Alex give?",
            "options": [
                "Use outlines",
                "Ignore notes",
                "No tips",
                "Use colors only"
            ],
            "correct": 3,
            "explanation": "**'Use outlines' (Sử dụng sơ yếu lược/outline). *Điều chỉnh: Đưa 'Use outlines' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 53,
            "question": "Why do civilizations fall?",
            "options": [
                "Due to environment",
                "Due to success",
                "No reason",
                "Due to books"
            ],
            "correct": 1,
            "explanation": "**'Due to environment' (Do môi trường). *Điều chỉnh: Đưa 'Due to environment' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 54,
            "question": "What lacks in gig economy?",
            "options": [
                "Benefits",
                "Flexibility",
                "Jobs",
                "Technology"
            ],
            "correct": 2,
            "explanation": "**'Benefits' (Thiếu các quyền lợi/phúc lợi). *Điều chỉnh: Đưa 'Benefits' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 55,
            "question": "What influences language styles?",
            "options": [
                "Gender",
                "Food",
                "Weather",
                "Cars"
            ],
            "correct": 0,
            "explanation": "**'Gender' (Giới tính ảnh hưởng đến kiểu giao tiếp). (Đáp án 0 được giữ lại)."
        },
        {
            "id": 56,
            "question": "What unit is on genetics?",
            "options": [
                "Biology",
                "Anthropology",
                "History",
                "Sociology"
            ],
            "correct": 3,
            "explanation": "**'Biology' (Chương Sinh học). *Điều chỉnh: Đưa 'Biology' xuống vị trí D (index 3) để thay đổi phân bổ.*"
        },
        {
            "id": 57,
            "question": "Where will they meet?",
            "options": [
                "Library",
                "Park",
                "Home",
                "Cafe"
            ],
            "correct": 1,
            "explanation": "**'Library' (Ở thư viện). *Điều chỉnh: Đưa 'Library' xuống vị trí B (index 1) để thay đổi phân bổ.*"
        },
        {
            "id": 58,
            "question": "What is tough?",
            "options": [
                "Anthropology unit",
                "All easy",
                "Math unit",
                "No units"
            ],
            "correct": 2,
            "explanation": "**'Anthropology unit' (Chương Nhân chủng học). *Điều chỉnh: Đưa 'Anthropology unit' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        },
        {
            "id": 59,
            "question": "Why meet?",
            "options": [
                "To practice notetaking",
                "To eat",
                "To sleep",
                "To run"
            ],
            "correct": 0,
            "explanation": "**'To practice notetaking' (Để luyện ghi chú). (Đáp án 0 được giữ lại)."
        },
        {
            "id": 60,
            "question": "When is the meeting?",
            "options": [
                "Tomorrow",
                "Today",
                "Next week",
                "Never"
            ],
            "correct": 2,
            "explanation": "**'Tomorrow' (Ngày mai). *Điều chỉnh: Đưa 'Tomorrow' xuống vị trí C (index 2) để thay đổi phân bổ.*"
        }
    ]
}
  }
};
</file>

<file path="src/data/exams/exam19.js">
export const EXAM19_DATA = {
    title: "HUFLIT Listening & Reading Practice - Exam 19 (Dựa trên Listening & Notetaking Skills)",
    description: "Bộ đề thi mô phỏng môi trường học thuật, tập trung vào kỹ năng nghe hiểu bài giảng và ghi chú hiệu quả. Cấu trúc: Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Phù hợp cho sinh viên chuẩn bị du học hoặc thi chứng chỉ tiếng Anh học thuật.",
    parts: {
        // ========== LISTENING SECTIONS ==========
        part1: {
            title: "PART 1: Short Academic Conversation",
            description: "Nghe đoạn hội thoại giữa hai sinh viên về một bài giảng môn Tâm lý học Xã hội. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
            type: "listening",
            script: `Alex: Hey Mark, did you manage to take good notes in Professor Miller’s Social Psychology lecture today? I was struggling to keep up with all the theories she mentioned.

Mark: Yeah, I think I got the main points. The key takeaway for me was the 'Bystander Effect'. She said it’s not just about the number of people present, but more about how individuals interpret the situation and assume someone else will take responsibility.

Alex: Right. And she emphasized that diffusion of responsibility is strongest in ambiguous situations. I found her example about the crowded subway really clear. People weren’t sure if the man was really sick or just tired, so everyone hesitated.

Mark: Exactly. I also wrote down the three factors she listed that increase the likelihood of helping: clarity of the need, similarity to the victim, and having the skills to help. She said the most critical one is clarity. If the emergency is obvious, like someone shouting 'Fire!', people react faster.

Alex: Good point. I missed that third one about having the skills. So, a nurse is more likely to help in a medical emergency than a painter, all else being equal. Makes sense. By the way, what did she say about the due date for the case study analysis?

Mark: She said the deadline is firm: next Friday by 5 PM, to be submitted online. No hard copies. And she mentioned that late submissions, for any reason, will be penalized by 10% per day. So we really shouldn’t delay.

Alex: Noted. I’ll start on mine tonight. Thanks for clarifying!`,
            questions: [
                {
                    id: 1,
                    question: "What is the main topic of the lecture they discussed?",
                    options: [
                        "Cognitive Development in Children",
                        "The Bystander Effect in Social Psychology",
                        "Economic Theories of Behavior",
                        "The History of Psychological Research"
                    ],
                    correct: 1, // Bystander Effect
                    explanation: "Đáp án đúng là (B) 'The Bystander Effect in Social Psychology'. Cả hai sinh viên đều nhắc đến 'Bystander Effect' ngay từ đầu cuộc trò chuyện. Alex nói: 'The key takeaway for me was the **Bystander Effect**.' Mark cũng đồng ý và giải thích thêm về hiệu ứng này. Các chủ đề khác như 'Cognitive Development' hay 'Economic Theories' không hề được đề cập trong bài."
                },
                {
                    id: 2,
                    question: "According to the professor, what is the MOST critical factor that increases the likelihood of helping?",
                    options: [
                        "The number of people present",
                        "Having specialized skills",
                        "Clarity of the need for help",
                        "Similarity to the victim"
                    ],
                    correct: 2, // Clarity
                    explanation: "Đáp án đúng là (C) 'Clarity of the need for help'. Mark trích dẫn lời giáo sư: 'She said the most critical one is **clarity**. If the emergency is obvious... people react faster.' Đây là yếu tố được nhấn mạnh là quan trọng nhất. Mặc dù 'having skills' và 'similarity' cũng được liệt kê, nhưng chúng không phải là yếu tố 'most critical'. 'Number of people present' thực ra là một phần của vấn đề (càng đông càng ít giúp đỡ), không phải là yếu tố tích cực làm tăng khả năng giúp đỡ."
                },
                {
                    id: 3,
                    question: "What example did the professor use to illustrate an ambiguous situation?",
                    options: [
                        "A car crash on an empty highway",
                        "A person shouting 'Fire!' in a theater",
                        "A crowded subway where a man might be sick",
                        "A nurse helping in a hospital"
                    ],
                    correct: 2, // Crowded subway
                    explanation: "Đáp án đúng là (C) 'A crowded subway where a man might be sick'. Alex nói: 'I found her example about the **crowded subway** really clear. People weren't sure if the man was really sick or just tired, so everyone hesitated.' Đây chính là ví dụ về một tình huống mơ hồ (ambiguous), nơi sự khuếch tán trách nhiệm (diffusion of responsibility) xảy ra mạnh mẽ. Ví dụ về 'shouting Fire!' (B) thực ra là minh họa cho tình huống rõ ràng (clarity), không phải mơ hồ."
                },
                {
                    id: 4,
                    question: "What is the penalty for late submission of the case study?",
                    options: [
                        "It will not be accepted.",
                        "It loses 10% of the total marks per day.",
                        "The grade is reduced by one letter grade.",
                        "No penalty if you have a valid excuse."
                    ],
                    correct: 1, // 10% per day
                    explanation: "Đáp án đúng là (B) 'It loses 10% of the total marks per day.' Mark truyền đạt chính sách của giáo sư: '...late submissions, for any reason, will be penalized by **10% per day**.' Đây là một quy tắc cụ thể và nghiêm khắc. Không có thông tin về việc không chấp nhận bài (A), giảm một mức điểm chữ (C), hay miễn phạt nếu có lý do (D). Thực tế, cụm 'for any reason' cho thấy ít có ngoại lệ."
                },
                {
                    id: 5,
                    question: "How should the case study be submitted?",
                    options: [
                        "As a hard copy in class",
                        "Online only",
                        "Either online or in person",
                        "Via email to the professor"
                    ],
                    correct: 1, // Online only
                    explanation: "Đáp án đúng là (B) 'Online only'. Mark nói rõ: '...to be submitted **online**. No hard copies.' Vì vậy, sinh viên không được nộp bản in cứng (A). Các phương án (C) và (D) không chính xác vì chỉ có một kênh duy nhất được chỉ định là hệ thống nộp bài trực tuyến của trường."
                }
            ]
        },

        part2: {
            title: "PART 2: Academic Discussion (Group Work)",
            description: "Nghe đoạn thảo luận nhóm giữa ba sinh viên về một dự án môn Kinh tế Môi trường. Chọn đáp án tốt nhất (A, B, C, D).",
            type: "listening",
            script: `Narrator: Three students – Linda, David, and Emma – are meeting in the library to plan their group project for Environmental Economics.

Linda: Okay, so our task is to analyze a policy tool for reducing plastic waste. I think we should focus on a 'Pigouvian tax' – that’s a tax on producers equal to the external cost of pollution. It’s a classic solution.

David: I agree it’s classic, but our professor said she wants us to explore less conventional approaches. Remember last week’s lecture? She mentioned 'Extended Producer Responsibility' or EPR. That’s where manufacturers are responsible for the entire lifecycle of their products, including waste collection and recycling. I think that’s more innovative for our paper.

Emma: Good point, David. Also, EPR shifts the cost burden from taxpayers and local governments to the actual producers, which creates a direct financial incentive for them to design products that are easier to recycle or use less packaging. That’s a market-based mechanism too, but different from a tax.

Linda: Hmm, you’re right. The professor did emphasize innovation. So, EPR it is. How should we structure our analysis? I suggest we start with a definition, then present a case study. I read about the EPR system for packaging in Germany. It’s been quite successful.

Emma: Perfect. I can take the lead on the Germany case study. David, you’re great with data and graphs. Could you handle the section on cost-benefit analysis, comparing the social costs before and after EPR implementation?

David: Sure, I can do that. Linda, maybe you can write the introduction and the conclusion, since you proposed the initial Pigouvian tax idea – you can contrast it with EPR to show why EPR might be superior in certain contexts.

Linda: Sounds like a plan. Let’s aim to have a first draft of our assigned sections by next Wednesday so we can integrate everything. We should meet again next Thursday afternoon to compile and edit.

Emma: Agreed. I’ll book this study room again for Thursday at 2 PM.`,
            questions: [
                {
                    id: 6,
                    question: "What is the main topic of their group project?",
                    options: [
                        "The history of economic thought",
                        "Analyzing policy tools for reducing plastic waste",
                        "A comparison of global recycling rates",
                        "The impact of taxes on consumer behavior"
                    ],
                    correct: 1, // Policy tools for plastic waste
                    explanation: "Đáp án đúng là (B) 'Analyzing policy tools for reducing plastic waste.' Linda mở đầu cuộc thảo luận bằng câu: '...our task is to **analyze a policy tool for reducing plastic waste**.' Đây là mục tiêu rõ ràng của dự án. Các lựa chọn khác như 'history of economic thought' (A) hay 'global recycling rates' (C) có thể là một phần thông tin nhỏ, nhưng không phải là chủ đề trung tâm. 'Impact of taxes' (D) chỉ là một ý kiến ban đầu của Linda, nhưng nhóm đã chuyển sang hướng khác."
                },
                {
                    id: 7,
                    question: "Why does David suggest focusing on 'Extended Producer Responsibility' (EPR) instead of a tax?",
                    options: [
                        "Because it is a simpler concept to explain.",
                        "Because the professor wants them to explore less conventional approaches.",
                        "Because there is more data available on taxes.",
                        "Because EPR is cheaper to implement."
                    ],
                    correct: 1, // Professor wants innovation
                    explanation: "Đáp án đúng là (B) 'Because the professor wants them to explore less conventional approaches.' David phản bác đề xuất của Linda bằng lý do: '...our professor said she wants us to **explore less conventional approaches**.' Sau đó, anh ấy nhắc lại bài giảng tuần trước, nơi giáo sư đề cập đến EPR như một lựa chọn 'more innovative'. Đây chính là động lực chính cho sự thay đổi chủ đề. Không có thông tin nào cho thấy EPR đơn giản hơn (A), có nhiều dữ liệu hơn (C), hay rẻ hơn (D)."
                },
                {
                    id: 8,
                    question: "According to Emma, what is a key advantage of EPR?",
                    options: [
                        "It increases government tax revenue.",
                        "It shifts the waste management cost burden to producers.",
                        "It is supported by all environmental groups.",
                        "It eliminates the need for consumer recycling."
                    ],
                    correct: 1, // Shifts cost to producers
                    explanation: "Đáp án đúng là (B) 'It shifts the waste management cost burden to producers.' Emma giải thích: 'EPR shifts the **cost burden from taxpayers and local governments to the actual producers**...' Đây là đặc điểm cốt lõi và là lợi ích chính của mô hình EPR. Cô không đề cập đến việc tăng thuế (A), sự ủng hộ của tất cả các nhóm (C), hay việc loại bỏ nhu cầu tái chế của người tiêu dùng (D). Trên thực tế, EPR vẫn cần sự tham gia của người tiêu dùng trong việc phân loại rác."
                },
                {
                    id: 9,
                    question: "Which country's case study will Emma primarily research?",
                    options: ["Japan", "Germany", "Canada", "Sweden"],
                    correct: 1, // Germany
                    explanation: "Đáp án đúng là (B) 'Germany.' Linda đề xuất: 'I read about the EPR system for packaging in **Germany**.' Emma ngay lập tức nhận nhiệm vụ: 'I can take the lead on the **Germany** case study.' Vì vậy, Đức là quốc gia được chỉ định rõ ràng cho phần nghiên cứu tình huống của Emma. Các quốc gia khác không được đề cập trong cuộc thảo luận."
                },
                {
                    id: 10,
                    question: "When is the group's next meeting scheduled?",
                    options: [
                        "Next Monday morning",
                        "Next Wednesday at 2 PM",
                        "Next Thursday afternoon at 2 PM",
                        "Friday of next week"
                    ],
                    correct: 2, // Thursday 2 PM
                    explanation: "Đáp án đúng là (C) 'Next Thursday afternoon at 2 PM.' Khi kết thúc cuộc thảo luận, Emma nói: 'I’ll book this study room again for **Thursday at 2 PM**.' Điều này xác nhận thời gian cho cuộc họp tiếp theo. Họ đề cập đến thời hạn 'next Wednesday' cho bản thảo đầu tiên, nhưng cuộc họp nhóm để tổng hợp là vào thứ Năm. Các mốc thời gian khác không chính xác."
                }
            ]
        },

        part3: {
            title: "PART 3: Academic Lecture (Excerpt)",
            description: "Nghe một trích đoạn bài giảng về Lịch sử Nghệ thuật. Chọn đáp án tốt nhất (A, B, C, D).",
            type: "listening",
            script: `Professor: Good morning. Today, we continue our series on Renaissance art by examining a pivotal shift: the transition from symbolic representation to a more naturalistic, human-centered worldview. This is often termed 'humanism'.

If you look at the artwork of the early Renaissance, say, Giotto's frescoes in the Scrovegni Chapel, you’ll notice a dramatic departure from the flat, hierarchical figures of the Byzantine tradition. Instead, Giotto introduced a sense of three-dimensionality and emotional depth. His figures seem to have weight; they occupy space. This wasn't just a technical advancement in perspective – it was a philosophical statement. It placed human experience and emotion at the center of the narrative.

Now, contrast this with a High Renaissance master like Leonardo da Vinci. His 'Vitruvian Man' is the ultimate symbol of this humanist ideal. The drawing doesn't just depict a well-proportioned male figure; it represents the belief that man is the measure of all things. The circle and square surrounding the figure symbolize the connection between the microcosm – man – and the macrocosm – the universe. This reflects a renewed interest in classical Greek and Roman thought, which valued rational inquiry and the potential of the individual.

A common misconception is that this humanism was secular and anti-religious. That's not accurate. In fact, much Renaissance humanism was deeply Christian. Artists and thinkers sought to reconcile classical philosophy with Christian theology. The goal was to understand God's creation – including humanity – through observation and reason, not just through faith alone. So, the next time you see a Renaissance painting of a biblical scene with remarkably realistic landscapes and human figures, remember: that realism is an expression of piety, an attempt to bring the divine into the tangible, human world.`,
            questions: [
                {
                    id: 11,
                    question: "What is the main focus of this lecture excerpt?",
                    options: [
                        "The technical use of oil paints in the Renaissance",
                        "The role of the Catholic Church as a patron of the arts",
                        "The shift towards humanism in Renaissance art",
                        "A biography of Leonardo da Vinci"
                    ],
                    correct: 2, // Humanism
                    explanation: "Đáp án đúng là (C) 'The shift towards humanism in Renaissance art.' Ngay từ đầu, giáo sư giới thiệu chủ đề: '...examining a pivotal shift: the transition... to a more naturalistic, **human-centered worldview**. This is often termed **humanism**.' Toàn bộ bài giảng xoay quanh khái niệm này, với các ví dụ từ Giotto đến Leonardo da Vinci. Các lựa chọn khác như 'technical use of oil paints' (A) không được nhắc đến; 'role of the Church' (B) chỉ được đề cập gián tiếp; và 'biography of da Vinci' (D) chỉ là một phần ví dụ nhỏ."
                },
                {
                    id: 12,
                    question: "According to the professor, what was significant about Giotto's frescoes?",
                    options: [
                        "They used expensive gold leaf extensively.",
                        "They introduced three-dimensionality and emotional depth.",
                        "They were the first to depict biblical scenes.",
                        "They were commissioned by the Medici family."
                    ],
                    correct: 1, // 3D & emotion
                    explanation: "Đáp án đúng là (B) 'They introduced three-dimensionality and emotional depth.' Giáo sư nói: 'Giotto introduced a sense of **three-dimensionality and emotional depth**. His figures seem to have weight...' Đây được mô tả là một bước đột phá so với phong cách Byzantine 'phẳng'. Không có thông tin về việc sử dụng vàng lá (A) – đây là đặc điểm của nghệ thuật Byzantine trước đó. Việc miêu tả các cảnh trong Kinh Thánh (C) đã có từ lâu trước Giotto. Gia đình Medici (D) là những nhà bảo trợ ở Florence thời kỳ sau."
                },
                {
                    id: 13,
                    question: "What does the 'Vitruvian Man' by Leonardo da Vinci symbolize?",
                    options: [
                        "The conflict between science and religion",
                        "The belief that man is the measure of all things",
                        "The perfection of geometric shapes without human form",
                        "A medical study of human anatomy"
                    ],
                    correct: 1, // Man is the measure
                    explanation: "Đáp án đúng là (B) 'The belief that man is the measure of all things.' Giáo sư giải thích rõ ràng: 'His 'Vitruvian Man' is the ultimate symbol of this humanist ideal... it represents the belief that **man is the measure of all things**.' Các vòng tròn và hình vuông xung quanh tượng trưng cho mối liên hệ giữa con người và vũ trụ. Mặc dù bức vẽ có tính chất giải phẫu, nhưng ý nghĩa chính của nó trong ngữ cảnh này là triết lý, không chỉ đơn thuần là y học (D). Không có đề cập đến xung đột (A), và hình học được sử dụng để bao quanh hình người, không phải thay thế nó (C)."
                },
                {
                    id: 14,
                    question: "What common misconception about Renaissance humanism does the professor address?",
                    options: [
                        "That it was only popular in Italy",
                        "That it was secular and anti-religious",
                        "That it rejected all classical ideas",
                        "That it was led by merchants, not artists"
                    ],
                    correct: 1, // Secular & anti-religious
                    explanation: "Đáp án đúng là (B) 'That it was secular and anti-religious.' Giáo sư trực tiếp nêu lên quan niệm sai lầm: 'A common **misconception** is that this humanism was **secular and anti-religious**. That's not accurate.' Sau đó, giáo sư giải thích rằng nhiều nhà nhân văn thời Phục hưng thực chất là những người theo đạo Thiên chúa sùng đạo, cố gắng hòa giải triết học cổ điển với thần học. Các quan niệm sai lầm khác không được đề cập trong đoạn trích này."
                },
                {
                    id: 15,
                    question: "According to the professor, why did Renaissance artists paint religious scenes with realistic human figures?",
                    options: [
                        "To sell more paintings to the wealthy middle class",
                        "As an expression of piety and to bring the divine into the human world",
                        "Because they lacked the skill to paint in a symbolic style",
                        "To criticize the corruption of the Church"
                    ],
                    correct: 1, // Piety & bringing divine to human
                    explanation: "Đáp án đúng là (B) 'As an expression of piety and to bring the divine into the human world.' Ở phần kết luận, giáo sư giải thích động cơ đằng sau chủ nghĩa hiện thực: '...that realism is an **expression of piety**, an attempt to **bring the divine into the tangible, human world**.' Điều này khẳng định lại mối liên hệ chặt chẽ giữa chủ nghĩa nhân văn và đức tin. Không có bằng chứng về động cơ thương mại (A), thiếu kỹ năng (C), hay chỉ trích (D) trong bài giảng này."
                }
            ]
        },

        part4: {
            title: "PART 4: Campus-Based Conversation",
            description: "Nghe cuộc trò chuyện giữa một sinh viên và một nhân viên thư viện. Chọn đáp án tốt nhất (A, B, C, D).",
            type: "listening",
            script: `Student: Excuse me, I’m looking for some primary sources for my history paper on labor movements in the early 20th century. I’ve searched the online catalog but I’m a bit overwhelmed.

Lisa: Of course, you’ve come to the right place. For primary sources, you’ll want to visit our Special Collections on the 4th floor. They house original documents like union pamphlets, personal letters from organizers, and photographs from strikes.

Student: That sounds perfect. Do I need any special permission to access them?

Lisa: Yes, you’ll need to register for a Special Collections access card at the desk on the 4th floor. It just takes a few minutes – you show your student ID and fill out a form. Also, you should know that materials there cannot be checked out; you have to read them in the reading room. No pens are allowed – only pencils and laptops for notes to protect the documents.

Student: I understand. What about digital archives? I have a tight deadline.

Lisa: Good thinking. We do have a subscription to 'Historical Archives Online'. If you go to the library website, under 'Databases', you’ll find it. You can search by keyword, date, or document type. Many of the pamphlets and some letters have been digitized. You can access those from anywhere with your student login.

Student: That’s a huge help. Can I download the digital copies for my notes?

Lisa: For most items, yes, you can save them as PDFs. However, for some rare items, you might only be allowed to view them online or print a limited number of pages. The database will usually indicate the restrictions. My advice is to start with the digital archives to identify specific documents you need, and then visit Special Collections only for the items that aren’t available online.

Student: That’s a great strategy. Thank you so much for your help!`,
            questions: [
                {
                    id: 16,
                    question: "Where are the primary sources the student needs located?",
                    options: [
                        "In the main lending section on the 2nd floor",
                        "In the Reference section near the entrance",
                        "In Special Collections on the 4th floor",
                        "In the graduate student lounge"
                    ],
                    correct: 2, // Special Collections, 4th floor
                    explanation: "Đáp án đúng là (C) 'In Special Collections on the 4th floor.' Ngay từ đầu, nhân viên thư viện chỉ dẫn: '...you’ll want to visit our **Special Collections on the 4th floor**.' Đây là thông tin cụ thể và trực tiếp trả lời câu hỏi về vị trí của các nguồn chính. Các khu vực khác không được đề cập là nơi lưu trữ tài liệu chính."
                },
                {
                    id: 17,
                    question: "What must the student do to access the Special Collections materials?",
                    options: [
                        "Get a letter from his professor",
                        "Register for an access card on the 4th floor",
                        "Make an appointment one week in advance",
                        "Pay a small usage fee"
                    ],
                    correct: 1, // Register for access card
                    explanation: "Đáp án đúng là (B) 'Register for an access card on the 4th floor.' Nhân viên thư viện nói rõ: 'Yes, you’ll need to **register for a Special Collections access card at the desk on the 4th floor**.' Quy trình này chỉ yêu cầu thẻ sinh viên và điền vào mẫu đơn. Không có đề cập đến việc cần thư từ giáo sư (A), đặt hẹn trước một tuần (C), hay phí sử dụng (D)."
                },
                {
                    id: 18,
                    question: "What is NOT allowed in the Special Collections reading room?",
                    options: [
                        "Laptops",
                        "Pencils",
                        "Pens",
                        "Student ID cards"
                    ],
                    correct: 2, // Pens
                    explanation: "Đáp án đúng là (C) 'Pens.' Nhân viên thư viện đưa ra quy tắc bảo quản tài liệu: '**No pens are allowed** – only pencils and laptops for notes...' Mực từ bút có thể gây hư hại vĩnh viễn cho tài liệu cổ. Do đó, bút chì và máy tính xách tay được cho phép. Thẻ sinh viên là cần thiết để đăng ký, vì vậy nó chắc chắn được phép mang vào."
                },
                {
                    id: 19,
                    question: "What is the main advantage of the 'Historical Archives Online' database that the librarian mentions?",
                    options: [
                        "It contains more sources than Special Collections.",
                        "It can be accessed remotely with a student login.",
                        "It allows unlimited downloads of all documents.",
                        "It is easier to search than the library catalog."
                    ],
                    correct: 1, // Accessed remotely
                    explanation: "Đáp án đúng là (B) 'It can be accessed remotely with a student login.' Nhân viên thư viện nói: 'You can access those from **anywhere with your student login**.' Đây là một lợi thế lớn về mặt tiện lợi và thời gian cho sinh viên có thời hạn gấp. Cô ấy không so sánh số lượng nguồn (A). Cô ấy cũng đề cập đến một số hạn chế về tải xuống (C), vì vậy 'unlimited' là sai. Việc tìm kiếm có thể dễ dàng hơn, nhưng lợi thế chính được nhấn mạnh là truy cập từ xa."
                },
                {
                    id: 20,
                    question: "What strategy does the librarian recommend?",
                    options: [
                        "Start with Special Collections to understand the physical documents.",
                        "Use only digital archives to save time.",
                        "Start with digital archives to identify needed documents, then visit Special Collections for the rest.",
                        "Focus only on secondary sources for a broader overview first."
                    ],
                    correct: 2, // Start digital, then physical for gaps
                    explanation: "Đáp án đúng là (C) 'Start with digital archives to identify needed documents, then visit Special Collections for the rest.' Lời khuyên chiến lược của nhân viên thư viện rất rõ ràng: 'My advice is to **start with the digital archives to identify specific documents you need, and then visit Special Collections only for the items that aren’t available online**.' Đây là một phương pháp nghiên cứu hiệu quả, tiết kiệm thời gian. Các chiến lược khác không phù hợp với lời khuyên cụ thể này."
                }
            ]
        },

        // ========== READING SECTIONS ==========
        part5: {
            title: "PART 5: Grammar and Vocabulary in Context",
            description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
            type: "reading",
            questions: [
                {
                    id: 21,
                    question: "The university's new sustainability initiative aims to _______ its carbon emissions by 50% within the next decade.",
                    options: ["reduce", "reduces", "reducing", "reduction"],
                    correct: 0, // reduce
                    explanation: "Đáp án đúng là (A) 'reduce'. Sau động từ khiếm khuyết 'aims to', chúng ta cần một **động từ nguyên thể (to + V)**. 'Aims to reduce' là cấu trúc chính xác. (B) 'reduces' là động từ chia ở ngôi thứ ba số ít, không dùng sau 'to'. (C) 'reducing' là danh động từ, thường dùng sau giới từ, không phải sau 'to' trong trường hợp này (trừ khi 'to' là giới từ). (D) 'reduction' là danh từ, không thể đứng sau 'to' với vai trò động từ."
                },
                {
                    id: 22,
                    question: "_______ the complexity of the research data, the team decided to use advanced statistical software for analysis.",
                    options: ["Because", "Despite", "Given", "Unless"],
                    correct: 2, // Given
                    explanation: "Đáp án đúng là (C) 'Given'. 'Given' ở đây có nghĩa là 'Xét thấy' hoặc 'Do có', dùng để giới thiệu một lý do hoặc tình huống đã biết. Cấu trúc: 'Given + noun phrase, + main clause' rất phổ biến trong văn học thuật. 'Because' (A) cũng chỉ lý do nhưng cần theo sau bởi một mệnh đề ('Because of the complexity...'). 'Despite' (B) chỉ sự tương phản ('Mặc dù'). 'Unless' (D) chỉ điều kiện ('Trừ khi'). 'Given' là phù hợp nhất về ngữ nghĩa và cú pháp."
                },
                {
                    id: 23,
                    question: "Professor Martin's latest publication has been _______ cited in the field of cognitive neuroscience.",
                    options: ["wide", "widely", "width", "widen"],
                    correct: 1, // widely
                    explanation: "Đáp án đúng là (B) 'widely'. Vị trí này cần một **trạng từ (adverb)** để bổ nghĩa cho động từ ở dạng bị động 'has been cited'. 'Widely' (một cách rộng rãi) là trạng từ. (A) 'wide' là tính từ. (C) 'width' là danh từ. (D) 'widen' là động từ. Chỉ có trạng từ mới có thể mô tả mức độ hoặc cách thức của hành động 'được trích dẫn'."
                },
                {
                    id: 24,
                    question: "The laboratory requires that all safety protocols _______ followed without exception.",
                    options: ["are", "be", "will be", "were"],
                    correct: 1, // be (subjunctive)
                    explanation: "Đáp án đúng là (B) 'be'. Đây là cấu trúc **giả định thức (subjunctive mood)** thường dùng sau các động từ như 'require', 'demand', 'insist'. Cấu trúc: 'require that + S + [V nguyên thể]'. Do đó, 'be followed' là chính xác, bất kể chủ ngữ là số ít hay số nhiều. Các lựa chọn 'are', 'will be', 'were' đều là các thì chỉ định (indicative mood) và không đúng với cấu trúc trang trọng này trong văn bản quy định."
                },
                {
                    id: 25,
                    question: "An _______ to the conference schedule has been posted online, noting the change in the keynote speaker's time slot.",
                    options: ["announce", "announcement", "announced", "announcer"],
                    correct: 1, // announcement
                    explanation: "Đáp án đúng là (B) 'announcement'. Vị trí sau mạo từ 'An' và trước giới từ 'to' cần một **danh từ (noun)**. 'Announcement' (thông báo) là danh từ phù hợp. 'Addition' cũng có thể dùng được, nhưng không có trong lựa chọn. (A) 'announce' là động từ. (C) 'announced' là tính từ hoặc phân từ quá khứ. (D) 'announcer' là danh từ chỉ người (người thông báo), không phù hợp với nghĩa của câu (một bản thông báo/bổ sung)."
                },
                {
                    id: 26,
                    question: "The research findings were not _______ significant to warrant a change in the current medical guidelines.",
                    options: ["statistic", "statistically", "statistics", "statistician"],
                    correct: 1, // statistically
                    explanation: "Đáp án đúng là (B) 'statistically'. Vị trí này cần một **trạng từ (adverb)** để bổ nghĩa cho tính từ 'significant'. 'Statistically significant' là một **collocation học thuật rất phổ biến** trong nghiên cứu, có nghĩa là 'có ý nghĩa thống kê'. (A) 'statistic' là tính từ hoặc danh từ, không phải trạng từ. (C) 'statistics' là danh từ. (D) 'statistician' là danh từ chỉ người (nhà thống kê)."
                },
                {
                    id: 27,
                    question: "Students are encouraged to _______ with their advisors regularly to ensure they are on track for graduation.",
                    options: ["meet", "meeting", "met", "will meet"],
                    correct: 0, // meet
                    explanation: "Đáp án đúng là (A) 'meet'. Sau cụm 'are encouraged to', chúng ta cần một **động từ nguyên thể (to + V)**. 'Are encouraged to meet' là cấu trúc chính xác. Các lựa chọn khác đều là các dạng động từ không phù hợp sau 'to': (B) V-ing, (C) V2/V3, (D) modal verb + V."
                },
                {
                    id: 28,
                    question: "The scholarship committee places a high _______ on academic achievement, leadership qualities, and community service.",
                    options: ["valuable", "value", "valuing", "valued"],
                    correct: 1, // value
                    explanation: "Đáp án đúng là (B) 'value'. Cụm từ cố định là 'place a high value on something' (coi trọng, đánh giá cao điều gì). Ở đây, 'value' là một **danh từ**. (A) 'valuable' là tính từ. (C) 'valuing' là danh động từ. (D) 'valued' là tính từ (được đánh giá cao). Chỉ có danh từ 'value' mới đúng với cấu trúc 'place a + [adj] + [noun] + on'."
                },
                {
                    id: 29,
                    question: "_______ the initial hypothesis was incorrect, the experiment yielded unexpected data that opened up a new line of inquiry.",
                    options: ["Although", "Moreover", "Therefore", "Because"],
                    correct: 0, // Although
                    explanation: "Đáp án đúng là (A) 'Although'. Câu này thể hiện sự **tương phản** giữa hai mệnh đề: Giả thuyết ban đầu sai NHƯNG thí nghiệm vẫn tạo ra dữ liệu có giá trị. 'Although' (Mặc dù) là liên từ chỉ sự nhượng bộ, phù hợp nhất. 'Moreover' (B) thêm thông tin. 'Therefore' (C) chỉ kết quả. 'Because' (D) chỉ nguyên nhân. Cả ba từ sau đều không thể hiện được mối quan hệ tương phản cần thiết trong câu."
                },
                {
                    id: 30,
                    question: "The university's career center offers workshops on resume writing, interview skills, and professional _______.",
                    options: ["develop", "developed", "development", "developer"],
                    correct: 2, // development
                    explanation: "Đáp án đúng là (C) 'development'. Cấu trúc song song (parallel structure) yêu cầu tất cả các thành phần trong danh sách phải cùng từ loại. Ở đây, 'resume writing' (danh danh từ), 'interview skills' (danh từ), vì vậy vị trí trống cũng cần một **danh từ**. 'Professional development' (phát triển chuyên môn) là một danh từ ghép phổ biến. (A) 'develop' là động từ. (B) 'developed' là tính từ. (D) 'developer' là danh từ chỉ người, không phù hợp với nghĩa chung của danh sách (các kỹ năng/dịch vụ)."
                }
            ]
        },

        part6: {
            title: "PART 6: Cloze Text (Academic Announcement)",
            description: "10 câu hỏi - Điền từ/cụm từ vào văn bản thông báo. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
            type: "reading",
            text: `To: All Faculty and Research Staff
From: Office of Research and Innovation
Subject: Call for Proposals – Interdisciplinary Research Grants

The Office of Research and Innovation is pleased to announce the launch of the 2024 Interdisciplinary Research Grant (IRG) program. This initiative is designed to (31) collaborative research projects that transcend traditional academic boundaries and address complex societal challenges.

Grant Details:
- **Funding Amount:** Up to $50,000 per project for a duration of 18 months.
- **Eligibility:** Teams must consist of at least three faculty members from (32) two different schools or departments within the university.
- **Focus Areas:** Priority will be given to proposals related to climate change adaptation, public health equity, and ethical artificial intelligence.

Application Process:
Proposals must be submitted (33) the university's online grant management portal by **November 15, 2024, at 5:00 PM**. Late submissions will not be considered. The application package should include a project narrative, detailed budget, CVs of key personnel, and a letter of support from the relevant department chairs.

A series of informational workshops will be held throughout October to assist applicants in (34) strong proposals. We strongly encourage potential applicants to attend one of these sessions. The schedule is available on our website.

Review and Selection:
Proposals will undergo a rigorous peer-review process (35) by a panel of internal and external experts. The primary evaluation criteria are intellectual merit, interdisciplinary nature, feasibility, and potential for broader impact. Successful applicants will be notified by January 31, 2025.

We believe that fostering interdisciplinary collaboration is key to (36) innovative solutions and advancing knowledge. We look forward to receiving your groundbreaking proposals.

For further information, please visit our website or contact grants@university.edu.`,
            questions: [
                {
                    id: 31,
                    type: "fill",
                    question: "(31) - Điền từ thích hợp",
                    context: "This initiative is designed to (31) collaborative research projects...",
                    options: ["promote", "promoting", "promotes", "promoted"],
                    correct: 0, // promote
                    explanation: "Đáp án đúng là (A) 'promote'. Sau cụm 'is designed to', chúng ta cần một **động từ nguyên thể (to + V)**. 'Is designed to promote' là cấu trúc chính xác để diễn tả mục đích của sáng kiến. Các dạng 'promoting', 'promotes', 'promoted' đều không đúng cấu trúc sau 'to' khi 'to' là một phần của động từ nguyên thể."
                },
                {
                    id: 32,
                    type: "fill",
                    question: "(32) - Điền từ thích hợp",
                    context: "...at least three faculty members from (32) two different schools...",
                    options: ["minimally", "minimum", "at least", "a minimum of"],
                    correct: 3, // a minimum of
                    explanation: "Đáp án đúng là (D) 'a minimum of'. Cụm từ này được dùng như một tính từ bổ nghĩa cho số lượng, có nghĩa là 'tối thiểu là'. Cấu trúc 'from a minimum of two different schools' là chuẩn xác và trang trọng. (A) 'minimally' là trạng từ (một cách tối thiểu), không bổ nghĩa cho số được. (B) 'minimum' là danh từ, cần có 'a' và 'of'. (C) 'at least' cũng có nghĩa 'ít nhất', nhưng nó thường đứng trước một con số mà không cần 'of' (e.g., from at least two schools). Tuy nhiên, trong ngữ cảnh văn bản trang trọng này, 'a minimum of' thường được ưa chuộng hơn."
                },
                {
                    id: 33,
                    type: "fill",
                    question: "(33) - Điền từ thích hợp",
                    context: "Proposals must be submitted (33) the university's online grant management portal...",
                    options: ["by", "through", "on", "via"],
                    correct: 1, // through (or via)
                    explanation: "Đáp án đúng là (B) 'through' hoặc (D) 'via' cũng đúng, nhưng dựa trên các lựa chọn, ta cần xem xét. Trong văn cảnh công nghệ và hệ thống, 'submitted through a portal' (nộp thông qua một cổng thông tin) là cách diễn đạt tự nhiên. 'Via' cũng có nghĩa tương tự. 'By' thường chỉ thời hạn (by November 15) hoặc tác nhân (submitted by the PI). 'On' thường chỉ nền tảng (on the website). Ở đây, đề bài chỉ có 4 lựa chọn và không có 'via', nên 'through' là đáp án tốt nhất. (Lưu ý: Nếu có cả 'via' và 'through', cả hai đều có thể chấp nhận. Trong đề này, 'through' là lựa chọn được cung cấp và phù hợp)."
                },
                {
                    id: 34,
                    type: "fill",
                    question: "(34) - Điền từ thích hợp",
                    context: "...to assist applicants in (34) strong proposals.",
                    options: ["develop", "developing", "development", "developed"],
                    correct: 1, // developing
                    explanation: "Đáp án đúng là (B) 'developing'. Sau giới từ 'in', chúng ta cần một **danh động từ (V-ing)**. 'In developing strong proposals' là chính xác. (A) 'develop' là động từ nguyên thể. (C) 'development' là danh từ, nhưng sau 'in' với nghĩa này, V-ing thường tự nhiên hơn để chỉ hành động. (D) 'developed' là phân từ quá khứ."
                },
                {
                    id: 35,
                    type: "fill",
                    question: "(35) - Điền từ thích hợp",
                    context: "...will undergo a rigorous peer-review process (35) by a panel of experts.",
                    options: ["conducted", "conducting", "conduct", "which conduct"],
                    correct: 0, // conducted
                    explanation: "Đáp án đúng là (A) 'conducted'. Đây là cấu trúc **rút gọn mệnh đề quan hệ bị động**. Đầy đủ là: 'a process (that is) conducted by a panel...'. Phân từ quá khứ 'conducted' được dùng để bổ nghĩa cho danh từ 'process' và thể hiện nghĩa bị động (quy trình được tiến hành bởi hội đồng). (B) 'conducting' mang nghĩa chủ động (quy trình tự tiến hành việc gì đó - vô lý). (C) 'conduct' là động từ nguyên thể, không phù hợp. (D) 'which conduct' là mệnh đề quan hệ chủ động, cũng sai vì 'process' không thể tự 'conduct'."
                },
                {
                    id: 36,
                    type: "fill",
                    question: "(36) - Điền từ thích hợp",
                    context: "...is key to (36) innovative solutions and advancing knowledge.",
                    options: ["generate", "generating", "generation", "generates"],
                    correct: 1, // generating
                    explanation: "Đáp án đúng là (B) 'generating'. Cụm 'key to' ở đây có 'to' là **giới từ**, do đó theo sau nó phải là một **danh từ hoặc danh động từ (V-ing)**. Hơn nữa, cấu trúc song song yêu cầu 'generating' (V-ing) để phù hợp với 'advancing' (V-ing) đứng ngay sau 'and'. (A) 'generate' là động từ nguyên thể, sai sau giới từ. (C) 'generation' là danh từ, có thể dùng được nhưng không tạo được sự song song hoàn hảo với 'advancing' (danh động từ). (D) 'generates' là động từ chia thì."
                },
                {
                    id: 37,
                    type: "comprehension",
                    question: "(37) - What is the primary goal of the Interdisciplinary Research Grant (IRG) program?",
                    options: [
                        "To fund individual faculty research",
                        "To support collaborative projects across disciplines",
                        "To provide scholarships for graduate students",
                        "To upgrade laboratory equipment"
                    ],
                    correct: 1, // Collaborative projects across disciplines
                    explanation: "Đáp án đúng là (B) 'To support collaborative projects across disciplines.' Câu đầu tiên của thông báo nêu rõ mục đích: 'This initiative is designed to promote **collaborative research projects that transcend traditional academic boundaries**...' Cụm 'interdisciplinary' (liên ngành) và 'transcend traditional boundaries' (vượt qua ranh giới truyền thống) đều chỉ dự án hợp tác giữa các lĩnh vực khác nhau. Các mục tiêu khác không được đề cập."
                },
                {
                    id: 38,
                    type: "comprehension",
                    question: "(38) - What is the final deadline for proposal submission?",
                    options: [
                        "October 31, 2024",
                        "November 15, 2024, at 5:00 PM",
                        "January 31, 2025",
                        "December 1, 2024"
                    ],
                    correct: 1, // Nov 15, 5 PM
                    explanation: "Đáp án đúng là (B) 'November 15, 2024, at 5:00 PM.' Thông báo ghi rõ: 'Proposals must be submitted... by **November 15, 2024, at 5:00 PM**.' Đây là thời hạn cuối cùng và thông báo nhấn mạnh 'Late submissions will not be considered.' Ngày 31/1/2025 (C) là ngày thông báo kết quả, không phải hạn nộp."
                },
                {
                    id: 39,
                    type: "comprehension",
                    question: "(39) - Which of the following is NOT listed as a priority focus area for the grant?",
                    options: [
                        "Climate change adaptation",
                        "Public health equity",
                        "Renewable energy technology",
                        "Ethical artificial intelligence"
                    ],
                    correct: 2, // Renewable energy
                    explanation: "Đáp án đúng là (C) 'Renewable energy technology.' Văn bản liệt kê ba lĩnh vực trọng tâm: '**climate change adaptation, public health equity, and ethical artificial intelligence**.' 'Renewable energy technology' không xuất hiện trong danh sách này, mặc dù nó có thể liên quan đến biến đổi khí hậu."
                },
                {
                    id: 40,
                    type: "comprehension",
                    question: "(40) - Who will review the proposals?",
                    options: [
                        "Department chairs only",
                        "The Office of Research and Innovation staff",
                        "A panel of internal and external experts",
                        "A student committee"
                    ],
                    correct: 2, // Panel of experts
                    explanation: "Đáp án đúng là (C) 'A panel of internal and external experts.' Thông báo nêu rõ: 'Proposals will undergo a rigorous peer-review process conducted by **a panel of internal and external experts**.' Điều này đảm bảo tính khách quan và chuyên môn cao. Các nhóm khác không được giao nhiệm vụ đánh giá chính."
                }
            ]
        },

        part7: {
            title: "PART 7: Multiple Texts (Course Syllabus & Student Email)",
            description: "10 câu hỏi - Đọc trích đoạn chương trình học (syllabus) và email của sinh viên, chọn đáp án tốt nhất (A, B, C, D).",
            type: "reading",
            text: `**Text 1: Excerpt from Course Syllabus – BIO 310: Ecology and Conservation**

**Course Instructor:** Dr. Alisha Chen
**Email:** achen@university.edu (Please allow 24-48 hours for a response)
**Office Hours:** Tuesdays & Thursdays, 10:00 AM – 12:00 PM, Science Hall 405 (or by appointment)

**Course Description:**
This upper-level course examines the principles of ecology at the population, community, and ecosystem levels, with a special emphasis on applied conservation biology. Topics include population dynamics, species interactions, biodiversity assessment, and the design of protected areas.

**Assessment:**
- Midterm Exam: 25%
- Final Exam: 35%
- Group Research Project: 30% (Proposal due Week 6; Final report due Week 14)
- Class Participation & Weekly Quizzes: 10%

**Key Policies:**
- **Attendance:** Regular attendance is expected. More than three unexcused absences may result in a lowering of your final grade.
- **Late Assignments:** Assignments submitted after the deadline will be penalized 10% per day, up to a maximum of three days. After three days, the assignment will not be accepted unless a formal extension has been granted (e.g., for medical reasons with documentation).
- **Academic Integrity:** All work must be your own. Plagiarism will result in a failing grade for the assignment and possible further disciplinary action.

---
**Text 2: Email from a Student**

To: Dr. Alisha Chen (achen@university.edu)
From: michael.robinson@student.university.edu
Date: October 12
Subject: Question about BIO 310 Group Project & Extension Request

Dear Dr. Chen,

I am writing regarding the Group Research Project for BIO 310. My group has chosen to study the impact of urban noise pollution on local bird populations. We are excited about the project but have encountered a minor setback.

One of our key team members, Sarah, has had a family emergency and will be out of town for the next two weeks. This will significantly delay our data collection phase, which we had planned for next week. We are worried that this will prevent us from submitting a complete project proposal by the deadline (Week 6).

Would it be possible to request a one-week extension for the project proposal submission? We have attached a draft of our research question and methodology to show our progress so far. If an extension is not possible, could you advise us on how to proceed? We are all committed to producing high-quality work.

Thank you for your understanding and guidance.

Sincerely,
Michael Robinson
(on behalf of Group 4)`,
            questions: [
                {
                    id: 41,
                    question: "What is the main subject of the BIO 310 course?",
                    options: [
                        "Cell biology and genetics",
                        "Human anatomy and physiology",
                        "Ecology and conservation biology",
                        "Organic chemistry reactions"
                    ],
                    correct: 2, // Ecology and conservation
                    explanation: "Đáp án đúng là (C) 'Ecology and conservation biology.' Tiêu đề khóa học và phần mô tả đều chỉ rõ: 'BIO 310: **Ecology and Conservation**' và '...principles of ecology... with a special emphasis on applied **conservation biology**.' Các chủ đề khác không được đề cập trong trích đoạn giáo trình."
                },
                {
                    id: 42,
                    question: "According to the syllabus, what percentage of the final grade is the Group Research Project worth?",
                    options: ["10%", "25%", "30%", "35%"],
                    correct: 2, // 30%
                    explanation: "Đáp án đúng là (C) '30%.' Trong phần 'Assessment' của giáo trình, nó được liệt kê rõ ràng: '**Group Research Project: 30%**'. Bài kiểm tra giữa kỳ là 25%, bài kiểm tra cuối kỳ là 35%, và phần tham gia lớp học là 10%."
                },
                {
                    id: 43,
                    question: "What is the penalty for late assignments, as stated in the syllabus?",
                    options: [
                        "5% per day with no maximum",
                        "10% per day, up to a maximum of three days",
                        "Immediate failure if late",
                        "No penalty if an excuse is provided"
                    ],
                    correct: 1, // 10% per day, max 3 days
                    explanation: "Đáp án đúng là (B) '10% per day, up to a maximum of three days.' Chính sách trong giáo trình viết: '...penalized **10% per day, up to a maximum of three days**. After three days, the assignment will not be accepted...' Đây là quy tắc rất cụ thể. Lựa chọn (D) sai vì việc miễn phạt chỉ xảy ra nếu có lý do chính đáng và được cấp phép gia hạn chính thức."
                },
                {
                    id: 44,
                    question: "Why is Michael Robinson writing to Dr. Chen?",
                    options: [
                        "To submit the final project report early",
                        "To request a one-week extension for the project proposal",
                        "To report a case of plagiarism in his group",
                        "To ask for clarification on the midterm exam content"
                    ],
                    correct: 1, // Request extension
                    explanation: "Đáp án đúng là (B) 'To request a one-week extension for the project proposal.' Trong email, Michael nêu lý do (thành viên gặp khẩn cấp gia đình) và sau đó hỏi rõ ràng: '**Would it be possible to request a one-week extension for the project proposal submission?**' Đây là mục đích chính của email. Các hành động khác không được đề cập."
                },
                {
                    id: 45,
                    question: "What topic has Michael's group chosen for their research project?",
                    options: [
                        "The effect of fertilizers on plant growth",
                        "The impact of urban noise pollution on local bird populations",
                        "The biodiversity of coral reefs",
                        "Population dynamics of wolves in Yellowstone"
                    ],
                    correct: 1, // Noise pollution on birds
                    explanation: "Đáp án đúng là (B) 'The impact of urban noise pollution on local bird populations.' Michael viết trong email: 'My group has chosen to study **the impact of urban noise pollution on local bird populations**.' Đây là chủ đề cụ thể của họ. Các chủ đề khác không được đề cập."
                },
                {
                    id: 46,
                    question: "According to the syllabus, what could happen if a student has more than three unexcused absences?",
                    options: [
                        "They will automatically fail the course.",
                        "Their final grade may be lowered.",
                        "They must complete extra assignments.",
                        "They will be reported to the dean."
                    ],
                    correct: 1, // Final grade may be lowered
                    explanation: "Đáp án đúng là (B) 'Their final grade may be lowered.' Giáo trình quy định: 'More than three unexcused absences **may result in a lowering of your final grade**.' Đây là một hậu quả có thể xảy ra, không phải tự động (A). Các biện pháp khác không được đề cập."
                },
                {
                    id: 47,
                    question: "What has Michael attached to his email to Dr. Chen?",
                    options: [
                        "A medical note for his teammate",
                        "The completed project proposal",
                        "A draft of their research question and methodology",
                        "The syllabus for another course"
                    ],
                    correct: 2, // Draft of research question & method
                    explanation: "Đáp án đúng là (C) 'A draft of their research question and methodology.' Michael viết: 'We have attached **a draft of our research question and methodology** to show our progress so far.' Đây là bằng chứng cho thấy nhóm đã làm việc và không chỉ đơn thuần xin gia hạn."
                },
                {
                    id: 48,
                    question: "What is the largest component of the course grade?",
                    options: [
                        "Midterm Exam",
                        "Final Exam",
                        "Group Research Project",
                        "Class Participation"
                    ],
                    correct: 1, // Final Exam (35%)
                    explanation: "Đáp án đúng là (B) 'Final Exam.' Dựa trên tỷ trọng trong giáo trình: Final Exam là 35%, đây là phần lớn nhất. Group Project là 30%, Midterm là 25%, và Participation là 10%."
                },
                {
                    id: 49,
                    question: "When are Dr. Chen's regular office hours?",
                    options: [
                        "Mondays and Wednesdays, 1-3 PM",
                        "Tuesdays and Thursdays, 10 AM-12 PM",
                        "Fridays, 9-11 AM",
                        "By appointment only"
                    ],
                    correct: 1, // Tues & Thurs 10-12
                    explanation: "Đáp án đúng là (B) 'Tuesdays and Thursdays, 10 AM-12 PM.' Giáo trình ghi rõ: '**Office Hours:** Tuesdays & Thursdays, 10:00 AM – 12:00 PM...' Lựa chọn 'by appointment only' (D) là sai vì đây là một lựa chọn bổ sung ('or by appointment')."
                },
                {
                    id: 50,
                    question: "What potential consequence does the syllabus mention for plagiarism?",
                    options: [
                        "A warning for the first offense",
                        "A failing grade for the assignment and possible further action",
                        "Automatic failure of the entire course",
                        "Required attendance at an ethics workshop"
                    ],
                    correct: 1, // Failing grade for assignment & possible further action
                    explanation: "Đáp án đúng là (B) 'A failing grade for the assignment and possible further action.' Giáo trình nêu rõ: 'Plagiarism will result in a **failing grade for the assignment and possible further disciplinary action**.' Đây là một chính sách nghiêm khắc và rõ ràng. Nó không nói 'automatic failure of the course' (C), mặc dù đó có thể là một phần của 'further disciplinary action' trong trường hợp nghiêm trọng."
                }
            ]
        },

       part8: {
  title: "PART 8: Text Message Chain (Student Group Planning)",
  description: "10 câu hỏi - Đọc chuỗi tin nhắn của một nhóm sinh viên đang lên kế hoạch làm bài thuyết trình. Chọn đáp án tốt nhất (A, B, C, D).",
  type: "reading",
  text: `Priya (9:14): Hi team! We need to finalize our presentation topic for the persuasive speaking assignment. Any ideas? The theme is "Sustainability in Daily Life."

Jake (9:30): How about focusing on reducing single-use plastics? It's a huge issue and we can propose practical alternatives like reusable bottles and bags.

Leo (9:45): That's good, but maybe it's been done a lot. What about "The hidden water footprint of our digital lives"? I read that streaming videos and data centers use massive amounts of water for cooling. It's less obvious but really persuasive.

Priya (10:02): @Leo That's a fascinating and unique angle! It fits the theme perfectly and would definitely stand out. I'm leaning towards that.

Jake (10:15): Okay, I'm convinced. The digital footprint idea is stronger. Let's go with that. We need to divide the work. I can research the data on water usage by tech companies.

Leo (10:20): I'll handle the section on practical steps individuals can take to reduce their digital water footprint (e.g., lowering streaming quality, deleting old emails/files).

Priya (10:25): Great. I'll create the slides and visuals, and draft the introduction and conclusion. Can everyone share their research notes with me by Wednesday night so I can start integrating?

Jake (10:30): Will do. What about the rehearsal schedule? The presentation is next Monday.

Leo (10:35): We should do a full run-through at least twice. How about we meet Friday at 4 PM in the library study room? I can book it.

Priya (10:40): Friday at 4 works for me. Jake?
Jake (10:42): Confirmed. See you both then. Let's aim to have our individual parts 90% done by Friday so the rehearsal is productive.`,
  
  questions: [
    {
      id: 51,
      question: "What is the general theme of the presentation assignment?",
      options: [
        "The Future of Technology",
        "Business Communication Strategies",
        "Sustainability in Daily Life",
        "Public Health Awareness"
      ],
      correct: 2,
      explanation: "Đáp án đúng là (C) 'Sustainability in Daily Life.' Ngay trong tin nhắn đầu tiên, Priya nêu rõ chủ đề: 'The theme is **\"Sustainability in Daily Life.\"**' Toàn bộ cuộc thảo luận sau đó xoay quanh việc chọn một chủ đề phù hợp với chủ đề này."
    },
    {
      id: 52,
      question: "What was Jake's initial topic suggestion?",
      options: [
        "The water footprint of digital life",
        "Reducing food waste",
        "Promoting public transportation",
        "Reducing single-use plastics"
      ],
      correct: 3,
      explanation: "Đáp án đúng là (D) 'Reducing single-use plastics.' Jake đề xuất: 'How about focusing on **reducing single-use plastics**?' Đây là ý tưởng ban đầu của anh ấy. Chủ đề về 'water footprint of digital life' (A) là đề xuất của Leo sau đó."
    },
    {
      id: 53,
      question: "Why does Leo think his suggested topic is better?",
      options: [
        "It is easier to research.",
        "It has been done a lot by other students.",
        "It is less obvious and would stand out.",
        "It requires fewer slides."
      ],
      correct: 2,
      explanation: "Đáp án đúng là (C) 'It is less obvious and would stand out.' Leo phản bác ý tưởng của Jake bằng cách nói: 'That's good, but maybe **it's been done a lot**. What about... It's **less obvious but really persuasive**.' Ưu điểm chính Leo đưa ra là tính độc đáo và sức thuyết phục của chủ đề ít được biết đến hơn."
    },
    {
      id: 54,
      question: "What is Jake's assigned research area?",
      options: [
        "Practical steps for individuals",
        "Creating slides and visuals",
        "Data on water usage by tech companies",
        "Drafting the introduction"
      ],
      correct: 2,
      explanation: "Đáp án đúng là (C) 'Data on water usage by tech companies.' Sau khi quyết định chủ đề, Jake tình nguyện: 'I can research the **data on water usage by tech companies**.' Đây là nhiệm vụ cụ thể của anh ấy. 'Practical steps' (A) là của Leo. 'Slides and visuals' (B) và 'introduction' (một phần của D) là của Priya."
    },
    {
      id: 55,
      question: "What is Priya's main responsibility?",
      options: [
        "Researching water usage data",
        "Booking the study room",
        "Creating slides and drafting the intro/conclusion",
        "Researching practical steps"
      ],
      correct: 2,
      explanation: "Đáp án đúng là (C) 'Creating slides and drafting the intro/conclusion.' Priya nói: 'I'll **create the slides and visuals, and draft the introduction and conclusion**.' Cô ấy cũng là người điều phối, yêu cầu mọi người gửi ghi chú cho cô ấy để tổng hợp."
    },
    {
      id: 56,
      question: "By when should team members share their research notes with Priya?",
      options: [
        "Monday night",
        "Wednesday night",
        "Friday morning",
        "Sunday afternoon"
      ],
      correct: 1,
      explanation: "Đáp án đúng là (B) 'Wednesday night.' Priya yêu cầu: 'Can everyone share their research notes with me by **Wednesday night** so I can start integrating?' Đây là một mốc thời gian quan trọng để cô ấy bắt đầu làm slide."
    },
    {
      id: 57,
      question: "When is the final presentation due?",
      options: [
        "This Wednesday",
        "Next Monday",
        "Friday of this week",
        "Two weeks from now"
      ],
      correct: 1,
      explanation: "Đáp án đúng là (B) 'Next Monday.' Jake nhắc nhở: 'The presentation is **next Monday**.' Điều này thúc đẩy họ lên lịch tập duyệt vào thứ Sáu."
    },
    {
      id: 58,
      question: "When and where is the rehearsal scheduled?",
      options: [
        "Thursday at 2 PM in the student lounge",
        "Friday at 4 PM in the library study room",
        "Saturday morning online",
        "Monday before class in the classroom"
      ],
      correct: 1,
      explanation: "Đáp án đúng là (B) 'Friday at 4 PM in the library study room.' Leo đề xuất: 'How about we meet **Friday at 4 PM in the library study room**?' Priya và Jake sau đó xác nhận lịch này."
    },
    {
      id: 59,
      question: "What does Jake suggest about the individual work before the Friday rehearsal?",
      options: [
        "It should be completely finished.",
        "It should be about 90% done.",
        "They can finish it together at the rehearsal.",
        "Only an outline is needed."
      ],
      correct: 1,
      explanation: "Đáp án đúng là (B) 'It should be about 90% done.' Trong tin nhắn cuối cùng, Jake viết: 'Let's aim to have our **individual parts 90% done by Friday** so the rehearsal is productive.' Điều này cho thấy anh ấy muốn buổi tập duyệt diễn ra suôn sẻ và hiệu quả, không phải để hoàn thành công việc cá nhân."
    },
    {
      id: 60,
      question: "Which of the following best describes the group's decision-making process?",
      options: [
        "One person made the final decision without discussion.",
        "They argued and could not agree on a topic.",
        "They discussed options and agreed on the most unique idea.",
        "They decided to combine both suggested topics."
      ],
      correct: 2,
      explanation: "Đáp án đúng là (C) 'They discussed options and agreed on the most unique idea.' Quá trình được thể hiện rõ: Jake đề xuất một ý tưởng, Leo đưa ra một ý tưởng khác với lý do thuyết phục (độc đáo hơn), Priya ủng hộ ý tưởng của Leo, và sau đó Jake đồng ý. Đây là một quá trình thảo luận hợp tác và đi đến đồng thuận dựa trên chất lượng của ý tưởng. Không có dấu hiệu của việc độc đoán (A), bất đồng (B), hay kết hợp cả hai (D)."
    }
  ]
},
    }
};
</file>

<file path="src/data/exams/exam20.js">
export const EXAM20_DATA = {
    title: "HUFLIT Listening & Reading Practice - Exam 20 (Dựa trên Listening & Notetaking Skills - Advanced)",
    description: "Bộ đề thi nâng cao với nội dung học thuật chuyên sâu, tập trung vào kỹ năng nghe hiểu bài giảng dài, ghi chú hiệu quả và đọc hiểu văn bản phức tạp. Cấu trúc: Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu).",
    parts: {
        // ========== LISTENING SECTIONS ==========
        part1: {
            title: "PART 1: Academic Conversation (Science)",
            description: "Nghe đoạn hội thoại giữa hai sinh viên về một bài giảng môn Vật lý Lượng tử. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
            type: "listening",
            script: `Doctor Chen: ...and that concludes our discussion on the double-slit experiment. Any questions before we move to quantum entanglement?

Student 1: Professor, could you clarify something about the observer effect? You mentioned that the act of measurement changes the outcome, but I'm not clear on why.

Doctor Chen: Excellent question. In classical physics, we assume we can observe something without disturbing it. But at the quantum level, the systems are so sensitive that the measurement apparatus interacts with the system in a fundamental way. It's not just about 'looking' - it's about the physical interaction required to obtain information. For instance, to measure the position of an electron, you need to bounce photons off it, which transfers momentum and changes its state.

Student 2: So it's like trying to measure the temperature of a drop of water with a giant thermometer that absorbs all the heat?

Doctor Chen: That's a good analogy, yes. The measuring device is too 'large' relative to the system being measured. Now, regarding quantum entanglement - this is when two particles become linked so that the state of one instantly influences the state of the other, regardless of distance. Einstein called this 'spooky action at a distance'. It challenges our classical understanding of locality.

Student 1: And this has been experimentally verified?

Doctor Chen: Absolutely. Numerous experiments since the 1980s, particularly with photons, have confirmed entanglement beyond any reasonable doubt. It's not just theory - it's the basis for emerging technologies like quantum computing and quantum cryptography. For your reading this week, I want you to focus on the Alain Aspect experiments from 1982. They're groundbreaking.

Student 2: Will the midterm exam cover entanglement?

Doctor Chen: Yes, everything up to and including today's lecture will be on the midterm. But more importantly, I want you to understand the conceptual shift from classical to quantum thinking. It's not about memorizing equations - it's about embracing counterintuitive reality.`,
            questions: [
                {
                    id: 1,
                    question: "What is the main topic of the lecture segment?",
                    options: [
                        "Classical Newtonian physics",
                        "The double-slit experiment and quantum entanglement",
                        "Thermodynamics and heat transfer",
                        "The history of physics"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'The double-slit experiment and quantum entanglement.' Giáo sư kết thúc phần double-slit experiment và chuyển sang quantum entanglement: '...concludes our discussion on the double-slit experiment. Any questions before we move to quantum entanglement?' Cả hai chủ đề này đều được thảo luận trong đoạn."
                },
                {
                    id: 2,
                    question: "According to Doctor Chen, why does measurement change quantum systems?",
                    options: [
                        "Because scientists are not careful enough",
                        "Because the measurement device physically interacts with the system",
                        "Because quantum particles are intentionally deceptive",
                        "Because of errors in mathematical calculations"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Because the measurement device physically interacts with the system.' Doctor Chen giải thích: 'the measurement apparatus interacts with the system in a fundamental way... to measure the position of an electron, you need to bounce photons off it, which transfers momentum and changes its state.' Đây là lý do cốt lõi của hiệu ứng quan sát trong cơ học lượng tử."
                },
                {
                    id: 3,
                    question: "What analogy does Student 2 use to understand the observer effect?",
                    options: [
                        "Measuring ocean temperature with a small thermometer",
                        "Trying to measure a drop of water with a giant thermometer",
                        "Weighing a feather with heavy scales",
                        "Timing a race with a slow watch"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Trying to measure a drop of water with a giant thermometer.' Student 2 nói: 'So it's like trying to measure the temperature of a drop of water with a giant thermometer that absorbs all the heat?' Doctor Chen xác nhận đây là một phép loại suy tốt."
                },
                {
                    id: 4,
                    question: "What did Einstein call quantum entanglement?",
                    options: [
                        "A mathematical error",
                        "Spooky action at a distance",
                        "Impossible physics",
                        "The future of technology"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Spooky action at a distance.' Doctor Chen nói: 'Einstein called this 'spooky action at a distance'.' Đây là cụm từ nổi tiếng mà Einstein dùng để chỉ sự không cục bộ trong vướng víu lượng tử."
                },
                {
                    id: 5,
                    question: "What does Doctor Chen emphasize as most important for students to understand?",
                    options: [
                        "Memorizing all quantum equations",
                        "The conceptual shift from classical to quantum thinking",
                        "The biography of famous physicists",
                        "How to build quantum computers"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'The conceptual shift from classical to quantum thinking.' Ở cuối bài giảng, Doctor Chen nói: 'I want you to understand the conceptual shift from classical to quantum thinking. It's not about memorizing equations - it's about embracing counterintuitive reality.' Đây là trọng tâm giáo dục của ông."
                }
            ]
        },

        part2: {
            title: "PART 2: Academic Discussion (Research Ethics)",
            description: "Nghe đoạn thảo luận giữa ba sinh viên cao học về đạo đức nghiên cứu. Chọn đáp án tốt nhất (A, B, C, D).",
            type: "listening",
            script: `Professor: Welcome to our graduate seminar on research ethics. Today we're discussing the infamous Tuskegee Syphilis Study. Linda, could you start by summarizing the basic facts?

Linda: Sure. From 1932 to 1972, the U.S. Public Health Service conducted a study on untreated syphilis in African American men in Alabama. The participants were told they were receiving free healthcare, but they were actually being observed without treatment, even after penicillin became the standard cure in 1947.

Trang: What's particularly disturbing is the deception involved. Researchers actively prevented participants from accessing treatment elsewhere. They even arranged with the military to draft-dodge participants so they couldn't leave the study.

Professor: Exactly. And this wasn't an isolated case. It reflected systemic issues in research ethics at the time. Alex, what were the major ethical violations according to contemporary standards?

Alex: Well, first, lack of informed consent - participants didn't know the true nature of the study. Second, harm and exploitation - researchers knowingly withheld effective treatment. Third, justice - targeting a vulnerable population. And fourth, respect for persons - treating them as means to an end rather than as autonomous individuals.

Linda: The aftermath led to major changes though, right? The Belmont Report in 1979 established three core principles: respect for persons, beneficence, and justice.

Professor: Correct. And those principles form the basis of modern Institutional Review Boards. But here's a critical thinking question: Could a study like Tuskegee happen today? Trang?

Trang: Not in the same blatant form, but ethical challenges persist. Consider pharmaceutical trials in developing countries where participants might not fully understand consent forms, or where standard of care differs dramatically from Western countries.

Alex: Or big data research where 'informed consent' becomes a checkbox on a terms-of-service agreement that no one reads. The scale and opacity create new ethical dilemmas.

Professor: Excellent points. For next week, I want you to read about the Henrietta Lacks case - another landmark in research ethics. Consider how issues of consent and compensation have evolved.`,
            questions: [
                {
                    id: 6,
                    question: "What was the Tuskegee Study about?",
                    options: [
                        "Testing new syphilis treatments",
                        "Observing untreated syphilis in African American men",
                        "Vaccine development for syphilis",
                        "Genetic factors in disease resistance"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Observing untreated syphilis in African American men.' Linda tóm tắt: 'the U.S. Public Health Service conducted a study on untreated syphilis in African American men.' Điểm then chốt là 'untreated' - họ quan sát bệnh tiến triển mà không điều trị."
                },
                {
                    id: 7,
                    question: "According to Trang, how did researchers prevent participants from leaving the study?",
                    options: [
                        "By paying them large sums of money",
                        "By arranging with the military to draft-dodge them",
                        "By threatening legal action",
                        "By providing false medical certificates"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'By arranging with the military to draft-dodge them.' Trang nói: 'They even arranged with the military to draft-dodge participants so they couldn't leave the study.' Đây là một trong những hành vi lừa dối và kiểm soát tàn nhẫn nhất của nghiên cứu."
                },
                {
                    id: 8,
                    question: "Which of the following is NOT listed as an ethical violation in the Tuskegee Study?",
                    options: [
                        "Lack of informed consent",
                        "Withholding effective treatment",
                        "Targeting vulnerable populations",
                        "Destroying medical records"
                    ],
                    correct: 3,
                    explanation: "Đáp án đúng là (D) 'Destroying medical records.' Alex liệt kê bốn vi phạm đạo đức: 1) lack of informed consent, 2) harm and exploitation (withholding treatment), 3) justice (targeting vulnerable population), 4) respect for persons. Việc hủy hồ sơ y tế không được đề cập trong danh sách này."
                },
                {
                    id: 9,
                    question: "What document established the three core principles of research ethics in 1979?",
                    options: [
                        "The Nuremberg Code",
                        "The Declaration of Helsinki",
                        "The Belmont Report",
                        "The Tuskegee Apology"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'The Belmont Report.' Linda nói: 'The Belmont Report in 1979 established three core principles: respect for persons, beneficence, and justice.' Đây là tài liệu nền tảng cho đạo đức nghiên cứu hiện đại ở Mỹ."
                },
                {
                    id: 10,
                    question: "What case will the class discuss next week?",
                    options: [
                        "The Stanford Prison Experiment",
                        "The Milgram Obedience Study",
                        "The Henrietta Lacks case",
                        "The Pfizer vaccine trials"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'The Henrietta Lacks case.' Professor nói: 'For next week, I want you to read about the Henrietta Lacks case - another landmark in research ethics.' Đây là một trường hợp nổi tiếng về vấn đề đồng ý và bồi thường trong nghiên cứu y sinh."
                }
            ]
        },

        part3: {
            title: "PART 3: Academic Lecture Excerpt (Economics)",
            description: "Nghe trích đoạn bài giảng về Kinh tế học Hành vi. Chọn đáp án tốt nhất (A, B, C, D).",
            type: "listening",
            script: `Professor: Traditional economic theory assumes humans are rational actors who maximize utility. But behavioral economics, pioneered by psychologists like Daniel Kahneman and Amos Tversky, challenges this. They introduced prospect theory, which shows how people actually make decisions under risk.The key insight is loss aversion: losses loom larger than gains. Psychologically, losing $100 feels about twice as bad as winning $100 feels good. This asymmetry explains many real-world behaviors that traditional economics can't.For example, why do people hold onto losing stocks too long? Because realizing the loss is painful. Why are people more likely to buy insurance when it's framed as 'avoiding a loss' rather than 'gaining security'? Loss aversion.Another concept is the endowment effect: people value things more highly simply because they own them. In experiments, participants demanded much more money to give up a mug they'd just received than they were willing to pay to acquire the same mug.Now, here's where it gets really interesting for public policy. Richard Thaler's nudge theory suggests we can design choices - choice architecture - to help people make better decisions without restricting freedom. For instance, making retirement savings opt-out rather than opt-in dramatically increases participation rates.But this raises ethical questions. Who decides what's 'better'? Is nudging paternalistic? These are debates we'll explore next week. For now, remember: humans aren't perfectly rational calculators. We're predictably irrational, and understanding these patterns is crucial for everything from marketing to policymaking.`,
            questions: [
                {
                    id: 11,
                    question: "What does traditional economic theory assume about humans?",
                    options: [
                        "They are emotional and unpredictable",
                        "They are rational actors who maximize utility",
                        "They are easily influenced by others",
                        "They avoid all risks"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'They are rational actors who maximize utility.' Giáo sư mở đầu: 'Traditional economic theory assumes humans are rational actors who maximize utility.' Đây là giả định cơ bản của kinh tế học truyền thống mà kinh tế học hành vi phản bác."
                },
                {
                    id: 12,
                    question: "According to prospect theory, how do losses compare to gains psychologically?",
                    options: [
                        "Gains feel much worse than losses",
                        "Losses and gains feel exactly the same",
                        "Losses loom larger than gains",
                        "People don't notice small losses"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'Losses loom larger than gains.' Giáo sư giải thích: 'The key insight is loss aversion: losses loom larger than gains. Psychologically, losing $100 feels about twice as bad as winning $100 feels good.' Đây là nguyên lý cốt lõi của prospect theory."
                },
                {
                    id: 13,
                    question: "What behavioral concept explains why people hold onto losing stocks too long?",
                    options: [
                        "The endowment effect",
                        "Loss aversion",
                        "Nudge theory",
                        "Rational calculation"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Loss aversion.' Giáo sư đưa ra ví dụ: 'For example, why do people hold onto losing stocks too long? Because realizing the loss is painful.' Đây chính là biểu hiện của loss aversion - né tránh tổn thất."
                },
                {
                    id: 14,
                    question: "What is the endowment effect?",
                    options: [
                        "Valuing things more because you own them",
                        "Preferring new things over old ones",
                        "Underestimating the value of your possessions",
                        "Sharing resources equally"
                    ],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'Valuing things more because you own them.' Giáo sư định nghĩa: 'Another concept is the endowment effect: people value things more highly simply because they own them.'"
                },
                {
                    id: 15,
                    question: "What ethical question does nudge theory raise?",
                    options: [
                        "Whether it's too expensive to implement",
                        "Whether it's mathematically sound",
                        "Whether it's paternalistic",
                        "Whether it violates international law"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'Whether it's paternalistic.' Giáo sư nêu lên vấn đề đạo đức: 'But this raises ethical questions. Who decides what's 'better'? Is nudging paternalistic?' Đây là tranh luận chính về đạo đức của nudge theory."
                }
            ]
        },

        part4: {
            title: "PART 4: Extended Academic Conversation",
            description: "Nghe cuộc trò chuyện mở rộng giữa sinh viên và giáo sư hướng dẫn. Chọn đáp án tốt nhất (A, B, C, D).",
            type: "listening",
            script: `Student: Professor Rivera, thank you for meeting with me about my thesis proposal. I'm having trouble narrowing my research question on climate change communication.

Professor: Of course, Emma. Let's look at your draft. "Public perception of climate change" is certainly broad. What specific angle interests you?

Emma: Well, I'm fascinated by how framing affects perception. Like, does calling it "global warming" versus "climate change" or "climate crisis" change how people respond?

Professor: Excellent focus. That's a manageable research question with clear variables. You could design an experiment with different framings and measure attitudes, behavioral intentions, even neural responses if you have fMRI access.

Emma: I was thinking of a survey experiment first, maybe through Amazon Mechanical Turk. But I worry about sample representativeness.

Professor: Valid concern. MTurk samples skew young, educated, and liberal. For climate change research, that could bias results. You might want to supplement with a nationally representative sample or at least acknowledge the limitation upfront.

Emma: That makes sense. What about methodology? Should I use a between-subjects or within-subjects design?

Professor: For framing effects, between-subjects is usually better to avoid demand characteristics. If the same person sees all framings, they might guess what you're studying. Randomly assign participants to see one framing only.

Emma: And for measurement - I was thinking of using the Six Americas Super Short Survey. It categorizes people into six audiences from alarmed to dismissive.

Professor: Perfect. That's a validated instrument. Now, think about your hypothesis. What do you actually expect to find?

Emma: I hypothesize that "climate crisis" framing will increase perceived urgency but might also increase resistance among skeptical audiences. "Global warming" might be more polarizing than "climate change."

Professor: Nuanced. I like it. For your literature review, make sure to cite the Yale Program on Climate Change Communication and Anthony Leiserowitz's work. Also, look at recent studies on "doomism" versus "efficacy" framing.

Emma: This is incredibly helpful. Can I send you a revised proposal by next Friday?

Professor: Absolutely. And let's schedule another meeting once you have preliminary data. Remember, good research is as much about the journey as the destination.`,
            questions: [
                {
                    id: 16,
                    question: "What is Emma's thesis topic generally about?",
                    options: [
                        "Economic impacts of climate change",
                        "Public perception of climate change",
                        "Technical solutions to climate change",
                        "Historical climate patterns"
                    ],
                    correct: 1,
                    explanation: `Đáp án đúng là (B) 'Public perception of climate change.' Emma nói: 'I'm having trouble narrowing my research question on climate change communication' và giáo sư nhắc lại: "Public perception of climate change" is certainly broad. Đây là chủ đề tổng quát của cô.`
                },
                {
                    id: 17,
                    question: "What specific aspect is Emma fascinated by?",
                    options: [
                        "Government policies on climate",
                        "How framing affects perception",
                        "International climate agreements",
                        "Corporate carbon emissions"
                    ],
                    correct: 1,
                    explanation: `Đáp án đúng là (B) 'How framing affects perception.' Emma nói: 'I'm fascinated by how framing affects perception. Like, does calling it "global warming" versus "climate change" or "climate crisis" change how people respond?' Đây là góc nghiên cứu cụ thể của cô.`
                },
                {
                    id: 18,
                    question: "What concern does Professor Rivera raise about Amazon Mechanical Turk samples?",
                    options: [
                        "They are too expensive",
                        "They skew young, educated, and liberal",
                        "They are mostly international respondents",
                        "They don't complete surveys properly"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'They skew young, educated, and liberal.' Giáo sư cảnh báo: 'MTurk samples skew young, educated, and liberal. For climate change research, that could bias results.' Đây là hạn chế phương pháp luận quan trọng."
                },
                {
                    id: 19,
                    question: "Why does Professor Rivera recommend a between-subjects design?",
                    options: [
                        "It's cheaper to administer",
                        "It avoids demand characteristics",
                        "It requires fewer participants",
                        "It's easier to analyze statistically"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'It avoids demand characteristics.' Giáo sư giải thích: 'between-subjects is usually better to avoid demand characteristics. If the same person sees all framings, they might guess what you're studying.' Đây là lý do phương pháp luận quan trọng."
                },
                {
                    id: 20,
                    question: 'What does Emma hypothesize about the "climate crisis" framing?',
                    options: [
                        "It will decrease all engagement",
                        "It will increase perceived urgency but might increase resistance",
                        "It will be universally effective",
                        "It will only work with young audiences"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'It will increase perceived urgency but might increase resistance.' Emma trình bày giả thuyết: 'I hypothesize that \"climate crisis\" framing will increase perceived urgency but might also increase resistance among skeptical audiences.' Đây là một giả thuyết phức tạp, tinh tế."
                }
            ]
        },

        // ========== READING SECTIONS ==========
        part5: {
            title: "PART 5: Grammar and Vocabulary in Academic Context",
            description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
            type: "reading",
            questions: [
                {
                    id: 21,
                    question: "The research team's findings _________ previously established theories about cognitive development in early childhood.",
                    options: ["challenge", "challenges", "challenging", "challenged"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'challenge'. Chủ ngữ 'findings' là số nhiều, nên động từ phải ở dạng nguyên thể không chia (present tense plural). Cấu trúc: 'findings challenge theories'. Các lựa chọn khác: (B) 'challenges' cho chủ ngữ số ít, (C) 'challenging' là tính từ/danh động từ, (D) 'challenged' là thì quá khứ - không phù hợp với ngữ cảnh hiện tại."
                },
                {
                    id: 22,
                    question: "_________ the complexity of quantum mechanics, the professor used analogies to make the concepts more accessible.",
                    options: ["Given", "Although", "Unless", "Despite"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'Given'. 'Given' có nghĩa 'xét thấy' hoặc 'bởi vì', dùng để giới thiệu lý do. Cấu trúc: 'Given + noun phrase, + main clause' rất phổ biến trong văn học thuật. Các lựa chọn khác: (B) 'Although' chỉ sự tương phản, (C) 'Unless' chỉ điều kiện, (D) 'Despite' cũng chỉ sự tương phản nhưng cần cấu trúc 'Despite + noun/V-ing'."
                },
                {
                    id: 23,
                    question: "The laboratory's new protocol requires that all samples _________ at -80°C within thirty minutes of collection.",
                    options: ["are stored", "be stored", "will be stored", "were stored"],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'be stored'. Đây là cấu trúc giả định thức (subjunctive mood) sau động từ 'require'. Cấu trúc: 'require that + S + [V nguyên thể]'. 'Be stored' là dạng bị động của động từ nguyên thể. Các lựa chọn khác không đúng với cấu trúc giả định thức trang trọng này."
                },
                {
                    id: 24,
                    question: "The interdisciplinary nature of the project _________ insights from sociology, economics, and environmental science.",
                    options: ["incorporates", "incorporate", "incorporating", "incorporated"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'incorporates'. Chủ ngữ 'nature' là số ít, nên động từ phải chia ngôi thứ ba số ít hiện tại: 'nature incorporates'. Các lựa chọn khác: (B) 'incorporate' là nguyên thể/số nhiều, (C) 'incorporating' là danh động từ, (D) 'incorporated' là quá khứ - không phù hợp với thì hiện tại của câu."
                },
                {
                    id: 25,
                    question: "_________ analyzing the data, researchers discovered an unexpected correlation between sleep patterns and academic performance.",
                    options: ["When", "While", "During", "Upon"],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'While'. 'While + V-ing' có nghĩa 'trong khi làm gì đó'. Cấu trúc này rất phổ biến trong văn học thuật để mô tả hành động đồng thời. Các lựa chọn khác: (A) 'When' thường theo sau bởi mệnh đề, (C) 'During' theo sau bởi danh từ, (D) 'Upon' có nghĩa 'ngay khi' - không phù hợp về nghĩa."
                },
                {
                    id: 26,
                    question: "The study's methodology has been _________ criticized for its small sample size and lack of control group.",
                    options: ["wide", "widely", "width", "widen"],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'widely'. Vị trí này cần một trạng từ (adverb) để bổ nghĩa cho động từ 'has been criticized'. 'Widely criticized' nghĩa là 'bị chỉ trích rộng rãi'. Các lựa chọn khác: (A) 'wide' là tính từ, (C) 'width' là danh từ, (D) 'widen' là động từ."
                },
                {
                    id: 27,
                    question: "The research grant will enable the team to _________ their investigation into renewable energy storage solutions.",
                    options: ["expand", "expands", "expanding", "expanded"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'expand'. Sau 'enable to' cần động từ nguyên thể: 'enable to expand'. Các lựa chọn khác: (B) 'expands' là ngôi thứ ba số ít, (C) 'expanding' là danh động từ, (D) 'expanded' là quá khứ - đều không đúng sau 'to' trong cấu trúc này."
                },
                {
                    id: 28,
                    question: "The conference proceedings will be published _________ by Cambridge University Press next year.",
                    options: ["shortly", "short", "shortness", "shorten"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'shortly'. 'Shortly' là trạng từ có nghĩa 'sớm, trong thời gian ngắn'. Cấu trúc: 'will be published shortly'. Các lựa chọn khác: (B) 'short' là tính từ, (C) 'shortness' là danh từ, (D) 'shorten' là động từ - đều không thể bổ nghĩa cho động từ 'published'."
                },
                {
                    id: 29,
                    question: "_________ the initial hypothesis was not supported, the experiment yielded valuable data for future research.",
                    options: ["Although", "Moreover", "Therefore", "Because"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'Although'. Câu thể hiện sự tương phản: giả thuyết không được ủng hộ NHƯNG thí nghiệm vẫn tạo ra dữ liệu giá trị. 'Although' (mặc dù) là liên từ chỉ sự nhượng bộ phù hợp nhất. Các lựa chọn khác: (B) 'Moreover' thêm thông tin, (C) 'Therefore' chỉ kết quả, (D) 'Because' chỉ nguyên nhân."
                },
                {
                    id: 30,
                    question: "The research assistant was responsible for _________ the participants and administering the surveys.",
                    options: ["recruit", "recruits", "recruiting", "recruited"],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'recruiting'. Sau giới từ 'for' cần danh động từ (V-ing): 'responsible for recruiting'. Các lựa chọn khác: (A) 'recruit' là động từ nguyên thể, (B) 'recruits' là ngôi thứ ba số ít, (D) 'recruited' là quá khứ phân từ - đều không đứng sau giới từ 'for'."
                }
            ]
        },

        part6: {
            title: "PART 6: Cloze Text (Research Proposal)",
            description: "10 câu hỏi - Điền từ/cụm từ vào văn bản đề xuất nghiên cứu. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
            type: "reading",
            text: `**Research Proposal: The Impact of Digital Detox Interventions on Mental Well-being**

**1. Introduction**
The pervasive use of digital technology, particularly smartphones, has raised concerns about its potential negative effects on mental health. This study aims to (31) the effectiveness of structured digital detox interventions in reducing symptoms of anxiety and improving overall well-being among university students.

**2. Literature Review**
Previous research has (32) correlations between excessive screen time and increased anxiety, depression, and sleep disturbances. However, most studies have been observational, making causal inferences difficult. Intervention studies are (33) needed to establish whether reducing screen time directly improves mental health outcomes.

**3. Methodology**
**Participants:** 200 undergraduate students will be randomly (34) to either an intervention group (digital detox program) or a control group (no intervention).
**Intervention:** The experimental group will participate in a 4-week program (35) daily screen time limits, mindfulness exercises, and in-person social activities.
**Measures:** Pre- and post-intervention assessments will include standardized anxiety scales, sleep quality indices, and self-reported well-being measures. All data will be collected (36) to ensure participant confidentiality.

**4. Expected Outcomes**
We hypothesize that participants in the intervention group will show (37) reductions in anxiety symptoms and improvements in sleep quality compared to the control group. Additionally, we expect to observe a positive correlation between the degree of screen time reduction and improvement in well-being scores.

**5. Significance**
This research will contribute to the growing literature on digital well-being and provide evidence-based recommendations for universities seeking to address student mental health challenges. If effective, the intervention could be (38) to other educational settings.

**6. Timeline and Budget**
The study will be conducted over one academic semester. Funding is requested for participant compensation, research assistant salaries, and statistical software licenses. The detailed budget is (39) in Appendix A.

**7. Ethical Considerations**
The study protocol has been approved by the Institutional Review Board (IRB #2024-087). Informed consent will be obtained from all participants, who may withdraw at any time without penalty. Data will be stored securely and (40) only for research purposes.`,
            questions: [
                {
                    id: 31,
                    type: "fill",
                    question: "(31) - Điền từ thích hợp",
                    context: "This study aims to (31) the effectiveness of structured digital detox interventions...",
                    options: ["investigate", "investigates", "investigating", "investigated"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'investigate'. Sau 'aims to' cần động từ nguyên thể: 'aims to investigate'. Các dạng khác của động từ không đúng sau 'to' trong cấu trúc này."
                },
                {
                    id: 32,
                    type: "fill",
                    question: "(32) - Điền từ thích hợp",
                    context: "Previous research has (32) correlations between excessive screen time and increased anxiety...",
                    options: ["establish", "established", "establishing", "establishes"],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'established'. Cấu trúc thì hiện tại hoàn thành: 'has + past participle'. 'Has established' là chính xác. Các lựa chọn khác: (A) 'establish' là nguyên thể, (C) 'establishing' là danh động từ, (D) 'establishes' là hiện tại đơn - đều không đúng với 'has'."
                },
                {
                    id: 33,
                    type: "fill",
                    question: "(33) - Điền từ thích hợp",
                    context: "Intervention studies are (33) needed to establish whether reducing screen time directly improves...",
                    options: ["urgency", "urgent", "urgently", "urge"],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'urgently'. Vị trí này cần một trạng từ (adverb) để bổ nghĩa cho tính từ 'needed'. 'Urgently needed' nghĩa là 'cần thiết một cách khẩn cấp'. Các lựa chọn khác: (A) 'urgency' là danh từ, (B) 'urgent' là tính từ, (D) 'urge' là động từ."
                },
                {
                    id: 34,
                    type: "fill",
                    question: "(34) - Điền từ thích hợp",
                    context: "200 undergraduate students will be randomly (34) to either an intervention group or a control group.",
                    options: ["assign", "assigned", "assigning", "assignment"],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'assigned'. Đây là cấu trúc bị động thì tương lai: 'will be + past participle'. 'Will be randomly assigned' nghĩa là 'sẽ được phân ngẫu nhiên'. Các lựa chọn khác không phải là phân từ quá khứ."
                },
                {
                    id: 35,
                    type: "fill",
                    question: "(35) - Điền từ thích hợp",
                    context: "The experimental group will participate in a 4-week program (35) daily screen time limits, mindfulness exercises...",
                    options: ["include", "includes", "including", "included"],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'including'. 'Including' ở đây là giới từ, có nghĩa 'bao gồm'. Cấu trúc: 'program including X, Y, and Z'. Các lựa chọn khác: (A) 'include' là động từ, (B) 'includes' là động từ chia, (D) 'included' là quá khứ phân từ - không đúng về mặt ngữ pháp trong vị trí này."
                },
                {
                    id: 36,
                    type: "fill",
                    question: "(36) - Điền từ thích hợp",
                    context: "All data will be collected (36) to ensure participant confidentiality.",
                    options: ["anonymous", "anonymously", "anonymity", "anonymize"],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'anonymously'. Vị trí này cần một trạng từ (adverb) để bổ nghĩa cho động từ 'collected'. 'Collected anonymously' nghĩa là 'được thu thập một cách ẩn danh'. Các lựa chọn khác: (A) 'anonymous' là tính từ, (C) 'anonymity' là danh từ, (D) 'anonymize' là động từ."
                },
                {
                    id: 37,
                    type: "fill",
                    question: "(37) - Điền từ thích hợp",
                    context: "We hypothesize that participants in the intervention group will show (37) reductions in anxiety symptoms...",
                    options: ["significant", "significantly", "significance", "signify"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'significant'. Vị trí này cần một tính từ (adjective) để bổ nghĩa cho danh từ 'reductions'. 'Significant reductions' nghĩa là 'sự giảm đáng kể'. Các lựa chọn khác: (B) 'significantly' là trạng từ, (C) 'significance' là danh từ, (D) 'signify' là động từ."
                },
                {
                    id: 38,
                    type: "fill",
                    question: "(38) - Điền từ thích hợp",
                    context: "If effective, the intervention could be (38) to other educational settings.",
                    options: ["adapt", "adapted", "adapting", "adaptable"],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'adapted'. Đây là cấu trúc bị động với modal verb: 'could be + past participle'. 'Could be adapted' nghĩa là 'có thể được điều chỉnh/áp dụng'. Các lựa chọn khác không phải là phân từ quá khứ."
                },
                {
                    id: 39,
                    type: "fill",
                    question: "(39) - Điền từ thích hợp",
                    context: "The detailed budget is (39) in Appendix A.",
                    options: ["present", "presents", "presented", "presenting"],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'presented'. Đây là cấu trúc bị động thì hiện tại: 'is + past participle'. 'Is presented' nghĩa là 'được trình bày'. Các lựa chọn khác: (A) 'present' là nguyên thể/tính từ, (B) 'presents' là động từ chia, (D) 'presenting' là danh động từ."
                },
                {
                    id: 40,
                    type: "fill",
                    question: "(40) - Điền từ thích hợp",
                    context: "Data will be stored securely and (40) only for research purposes.",
                    options: ["use", "uses", "used", "using"],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'used'. Cấu trúc song song (parallel structure) với động từ bị động: 'will be stored... and used'. Cả 'stored' và 'used' đều là past participles trong cấu trúc bị động. Các lựa chọn khác phá vỡ cấu trúc song song."
                }
            ]
        },

        part7: {
            title: "PART 7: Multiple Texts (Conference Announcement & Follow-up Email)",
            description: "10 câu hỏi - Đọc thông báo hội nghị và email tiếp theo, chọn đáp án tốt nhất (A, B, C, D).",
            type: "reading",
            text: `**Text 1: Conference Announcement**

**International Conference on Sustainable Urban Development**
**Date:** November 15-17, 2024
**Location:** Singapore Management University
**Submission Deadline:** August 31, 2024
**Website:** www.icsud2024.sg

**Call for Papers**
The International Conference on Sustainable Urban Development (ICSUD 2024) invites researchers, practitioners, and policymakers to submit abstracts on innovative approaches to creating sustainable, resilient, and inclusive cities. The conference will feature keynote speeches, parallel sessions, workshops, and networking opportunities.

**Thematic Tracks:**
1. Smart Cities and Digital Transformation
2. Urban Resilience and Climate Adaptation
3. Social Equity and Inclusive Urban Design
4. Circular Economy and Resource Management

**Submission Guidelines:**
- Abstracts should be 250-300 words, clearly stating objectives, methodology, and expected contributions.
- All submissions will undergo double-blind peer review.
- Notification of acceptance will be sent by October 1, 2024.
- Full papers of accepted abstracts are due by November 1, 2024.

**Registration Fees:**
- Early Bird (by Sept 30): $450
- Regular (Oct 1-Nov 10): $550
- Student Rate: $300 (valid student ID required)

**Accommodation:**
A block of rooms has been reserved at the conference hotel at a discounted rate of $180/night. Reservations must be made by October 15.

---
**Text 2: Email Correspondence**

To: conference@icsud2024.sg
From: maria.fernandez@research.edu
Date: September 5, 2024
Subject: Query about ICSUD 2024 Submission

Dear Conference Organizers,

I am writing to inquire about the submission process for ICSUD 2024. My colleague, Dr. James Chen, and I would like to submit a joint paper on "Green Infrastructure as a Tool for Urban Heat Island Mitigation" under Track 2: Urban Resilience and Climate Adaptation.

We have two specific questions:

1. Since this is a joint submission, should both authors' names and affiliations be included in the abstract, or should we follow the double-blind review guidelines and omit identifying information?

2. If our abstract is accepted, would it be possible to present our work as a poster rather than an oral presentation? One of us has a scheduling conflict and may not be able to attend all three days of the conference.

Thank you for your assistance. We look forward to participating in what promises to be an excellent conference.

Sincerely,
Dr. Maria Fernandez
Associate Professor of Urban Planning
University of Research Excellence`,
            questions: [
                {
                    id: 41,
                    question: "What is the deadline for abstract submission to ICSUD 2024?",
                    options: [
                        "August 31, 2024",
                        "September 30, 2024",
                        "October 1, 2024",
                        "November 1, 2024"
                    ],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'August 31, 2024.' Thông báo hội nghị ghi rõ: 'Submission Deadline: August 31, 2024.' Các ngày khác: (B) là hạn chót đăng ký sớm, (C) là ngày thông báo chấp nhận, (D) là hạn nộp bài báo đầy đủ."
                },
                {
                    id: 42,
                    question: "Which conference track would be most appropriate for a paper on urban heat islands?",
                    options: [
                        "Track 1: Smart Cities and Digital Transformation",
                        "Track 2: Urban Resilience and Climate Adaptation",
                        "Track 3: Social Equity and Inclusive Urban Design",
                        "Track 4: Circular Economy and Resource Management"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Track 2: Urban Resilience and Climate Adaptation.' Trong email, Maria Fernandez nói rõ họ muốn nộp bài về 'Green Infrastructure as a Tool for Urban Heat Island Mitigation' và xác định 'under Track 2: Urban Resilience and Climate Adaptation.' Đảo nhiệt đô thị là một vấn đề thích ứng khí hậu."
                },
                {
                    id: 43,
                    question: "What is the student registration fee for the conference?",
                    options: ["$300", "$450", "$550", "$180"],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) '$300.' Thông báo ghi: 'Student Rate: $300 (valid student ID required).' Các số khác: $450 là phí đăng ký sớm, $550 là phí thông thường, $180 là giá phòng khách sạn/đêm."
                },
                {
                    id: 44,
                    question: "By what date must hotel reservations be made to get the conference rate?",
                    options: [
                        "August 31, 2024",
                        "September 30, 2024",
                        "October 15, 2024",
                        "November 1, 2024"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'October 15, 2024.' Thông báo ghi: 'Reservations must be made by October 15.' Đây là hạn chót để đặt phòng với giá ưu đãi của hội nghị."
                },
                {
                    id: 45,
                    question: "What is Maria Fernandez's first question about?",
                    options: [
                        "The conference registration fee",
                        "How to handle author names for double-blind review",
                        "The location of the conference",
                        "The deadline for full papers"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'How to handle author names for double-blind review.' Maria hỏi: 'Since this is a joint submission, should both authors' names and affiliations be included in the abstract, or should we follow the double-blind review guidelines and omit identifying information?' Đây là câu hỏi về quy trình nộp bài cho bình duyệt mù."
                },
                {
                    id: 46,
                    question: "Why does Maria ask about presenting as a poster?",
                    options: [
                        "Their research is better suited for visual presentation",
                        "One author may not be able to attend all conference days",
                        "Poster presentations have a higher acceptance rate",
                        "They missed the deadline for oral presentations"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'One author may not be able to attend all conference days.' Maria giải thích: 'One of us has a scheduling conflict and may not be able to attend all three days of the conference.' Đây là lý do cô ấy hỏi về khả năng trình bày poster thay vì trình bày miệng."
                },
                {
                    id: 47,
                    question: "When will authors be notified about abstract acceptance?",
                    options: [
                        "August 31, 2024",
                        "September 5, 2024",
                        "October 1, 2024",
                        "November 1, 2024"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'October 1, 2024.' Thông báo ghi: 'Notification of acceptance will be sent by October 1, 2024.'"
                },
                {
                    id: 48,
                    question: "What is the word limit for abstracts?",
                    options: [
                        "150-200 words",
                        "250-300 words",
                        "350-400 words",
                        "No word limit specified"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) '250-300 words.' Thông báo ghi: 'Abstracts should be 250-300 words...'"
                },
                {
                    id: 49,
                    question: "What type of review process does the conference use?",
                    options: [
                        "Single-blind review",
                        "Double-blind review",
                        "Open review",
                        "Editorial review only"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Double-blind review.' Thông báo ghi: 'All submissions will undergo double-blind peer review.' Maria cũng nhắc đến 'double-blind review guidelines' trong email của cô."
                },
                {
                    id: 50,
                    question: "What is Maria Fernandez's academic position?",
                    options: [
                        "Research Assistant",
                        "Assistant Professor",
                        "Associate Professor",
                        "Department Chair"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'Associate Professor.' Email ký tên: 'Dr. Maria Fernandez, Associate Professor of Urban Planning, University of Research Excellence.'"
                }
            ]
        },

        part8: {
            title: "PART 8: Text Message Chain (Research Collaboration)",
            description: "10 câu hỏi - Đọc chuỗi tin nhắn giữa các nhà nghiên cứu đang hợp tác viết bài báo. Chọn đáp án tốt nhất (A, B, C, D).",
            type: "reading",
            text: `Alex (9:15): Team, I've completed the statistical analysis for section 3. The results are stronger than we anticipated - p < 0.001 for both primary hypotheses.

Sofia (9:22): Excellent news! Can you share the output files? I'll incorporate them into the results section draft I'm working on.

Ben (9:30): That's great, Alex. While you two handle results, I'll continue with the literature review for the introduction. I found three new relevant studies published just last month that we should cite.

Alex (9:35): Files sent. Sofia, note that Figure 2 needs to be revised - the confidence intervals are too wide in the current version. I've created a better visualization.

Sofia (9:40): Got it. I'll update Figure 2. Ben, can you check if any of those new studies contradict our theoretical framework? We may need to address that in the discussion.

Ben (9:45): Good point. One paper does present a conflicting finding. I'll draft a paragraph acknowledging this limitation and explaining why our approach differs.

Alex (9:50): Perfect. About the journal submission - I think Journal of Applied Psychology is our best bet. Impact factor 4.8, and they publish similar methodology.

Sofia (9:55): Agreed. But their submission guidelines require abstracts under 200 words. Ours is currently 245. I can trim it.

Ben (10:00): Let me help with that. I'm good at concise writing. Also, we need to decide on author order. I think Alex should be first author since he led the study design and analysis.

Alex (10:05): Thanks, Ben. I'm fine with that. Sofia second, Ben third? And we should include Professor Lee as corresponding author since the grant came from her lab.

Sofia (10:10): Works for me. Deadline for the next issue is October 15. Can we aim to submit by October 1 to allow time for revisions if needed?

Ben (10:15): Ambitious but doable if we all commit. I'll set up a shared timeline with milestones.

Alex (10:20): Let's do it. I'll circulate a draft of the complete methods section by end of day tomorrow.`,
            questions: [
                {
                    id: 51,
                    question: "What has Alex just completed?",
                    options: [
                        "The literature review",
                        "The statistical analysis",
                        "The abstract",
                        "The submission to the journal"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'The statistical analysis.' Alex mở đầu: 'I've completed the statistical analysis for section 3.'"
                },
                {
                    id: 52,
                    question: "What problem does Alex identify with Figure 2?",
                    options: [
                        "It has incorrect data",
                        "The colors are misleading",
                        "The confidence intervals are too wide",
                        "It's missing labels"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'The confidence intervals are too wide.' Alex nói: 'note that Figure 2 needs to be revised - the confidence intervals are too wide in the current version.'"
                },
                {
                    id: 53,
                    question: "What concern does Sofia raise about the new studies Ben found?",
                    options: [
                        "They are behind a paywall",
                        "They might contradict their theoretical framework",
                        "They are from unreliable sources",
                        "They are too old to be relevant"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'They might contradict their theoretical framework.' Sofia hỏi: 'can you check if any of those new studies contradict our theoretical framework?'"
                },
                {
                    id: 54,
                    question: "Which journal does Alex recommend for submission?",
                    options: [
                        "Journal of Experimental Psychology",
                        "Journal of Applied Psychology",
                        "Psychological Science",
                        "American Psychologist"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Journal of Applied Psychology.' Alex nói: 'I think Journal of Applied Psychology is our best bet.'"
                },
                {
                    id: 55,
                    question: "What issue does Sofia identify with the journal's submission guidelines?",
                    options: [
                        "They require abstracts under 200 words",
                        "They don't accept collaborative papers",
                        "They charge high publication fees",
                        "They have a long review process"
                    ],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'They require abstracts under 200 words.' Sofia nói: 'their submission guidelines require abstracts under 200 words. Ours is currently 245.'"
                },
                {
                    id: 56,
                    question: "Why does Ben suggest Alex should be first author?",
                    options: [
                        "Alex is the most senior researcher",
                        "Alex led the study design and analysis",
                        "Alex wrote the most words",
                        "Alex contacted the journal first"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'Alex led the study design and analysis.' Ben nói: 'I think Alex should be first author since he led the study design and analysis.'"
                },
                {
                    id: 57,
                    question: "Why should Professor Lee be included as corresponding author?",
                    options: [
                        "She wrote the first draft",
                        "She provided statistical advice",
                        "The grant came from her lab",
                        "She is the department chair"
                    ],
                    correct: 2,
                    explanation: "Đáp án đúng là (C) 'The grant came from her lab.' Alex nói: 'we should include Professor Lee as corresponding author since the grant came from her lab.'"
                },
                {
                    id: 58,
                    question: "What is the journal submission deadline for the next issue?",
                    options: [
                        "October 1",
                        "October 15",
                        "November 1",
                        "September 30"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'October 15.' Sofia nói: 'Deadline for the next issue is October 15.'"
                },
                {
                    id: 59,
                    question: "When does Alex promise to circulate the methods section draft?",
                    options: [
                        "By end of day today",
                        "By end of day tomorrow",
                        "By the end of the week",
                        "By October 1"
                    ],
                    correct: 1,
                    explanation: "Đáp án đúng là (B) 'By end of day tomorrow.' Alex nói: 'I'll circulate a draft of the complete methods section by end of day tomorrow.'"
                },
                {
                    id: 60,
                    question: "What will Ben create to help the team meet their deadline?",
                    options: [
                        "A shared timeline with milestones",
                        "A new statistical analysis",
                        "A revised abstract",
                        "A list of alternative journals"
                    ],
                    correct: 0,
                    explanation: "Đáp án đúng là (A) 'A shared timeline with milestones.' Ben nói: 'I'll set up a shared timeline with milestones.'"
                }
            ]
        },
    }
};
</file>

<file path="src/data/exams/exam21.js">
export const EXAM21_DATA = {
  title: "Listening & Notetaking Skills 1 Practice - Exam 21 (Based on Book)",
  description: "Full practice test with Listening (4 parts, 20 questions) and Reading (4 parts, 40 questions). Designed to review chronology, process, classification, comparison, cause and effect from the book. Options are shuffled to prevent guessing.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Listen to the conversation about historical and scientific topics. Choose the best answer (A, B, C, D) for each question.",
      type: "listening",
      script: "Woman: Who was Napoleon?\nMan: He was born in 1769 on the island of Corsica. When he was only 10 years old, his father sent him to military school in France.\n\nWoman: What happened to Pompeii?\nMan: It was destroyed by the eruption of Mount Vesuvius in 79 CE, forgotten for centuries, and found later.\n\nMan: Tell me about Steve Jobs.\nWoman: He grew up in California, became friends with Stephen Wozniak, and founded Apple when he was 20.\n\nMan: How do roller coasters work?\nWoman: The cars go up slowly using a chain, then come down fast because of gravity.\n\nWoman: How do children acquire language?\nMan: They start with babbling sounds around 4 months, then say simple words.",
      questions: [
        {
          id: 1,
          options: [
            "He was born in Austria and joined the army early.",
            "He was born in Russia and excelled in math.",
            "He was born on an island and sent to military school.",
            "He was born in France and became a good student."
          ],
          correct: 2,
          explanation: "Man nói: 'He was born in 1769 on the island of Corsica. When he was only 10 years old, his father sent him to military school in France.' Từ khóa: 'born on the island of Corsica' (đảo Corsica) và 'sent to military school' (gửi đến trường quân sự). Các lựa chọn khác sai vì sai nơi sinh hoặc hoạt động chính (không phải sinh ở Pháp, Nga hay Áo, và không nhấn mạnh là học sinh giỏi chung chung)."
        },
        {
          id: 2,
          options: [
            "It was uncovered right after the eruption and rebuilt.",
            "It was a modern city buried under water.",
            "It was built by Romans and visited by tourists immediately.",
            "It was destroyed by a volcano and forgotten for centuries."
          ],
          correct: 3,
          explanation: "Man nói: 'It was destroyed by the eruption of Mount Vesuvius in 79 CE, forgotten for centuries, and found later.' Từ khóa: 'destroyed by the eruption' (phá hủy bởi núi lửa phun trào) và 'forgotten for centuries' (bị lãng quên hàng thế kỷ). Các lựa chọn khác sai vì không phải được khai quật ngay sau phun trào, không phải chôn dưới nước, và không phải được xây bởi La Mã và du lịch ngay."
        },
        {
          id: 3,
          options: [
            "He founded a company and became a millionaire young.",
            "He grew up in California and liked electronics.",
            "He designed computers and left school early.",
            "He invented the iPhone and started Pixar."
          ],
          correct: 1,
          explanation: "Woman nói: 'He grew up in California, became friends with Stephen Wozniak, and founded Apple when he was 20.' Từ khóa: 'grew up in California' (lớn lên ở California) và ngụ ý thích electronics qua дружба với Wozniak (người thiết kế thiết bị điện tử). Các lựa chọn khác sai vì không chính xác thứ tự hoặc chi tiết: anh ấy sáng lập Apple trước khi trở thành millionaire, thiết kế iPhone sau, và rời trường nhưng chi tiết không đầy đủ."
        },
        {
          id: 4,
          options: [
            "The cars only go uphill and stop at the top.",
            "The cars go up slowly and come down fast due to gravity.",
            "The cars stay at the same speed throughout the ride.",
            "The cars are pushed by motors all the way."
          ],
          correct: 1,
          explanation: "Woman nói: 'The cars go up slowly using a chain, then come down fast because of gravity.' Từ khóa: 'go up slowly' (lên chậm) và 'come down fast because of gravity' (xuống nhanh do lực hấp dẫn). Các lựa chọn khác sai vì không phải motor đẩy suốt, không chỉ lên đồi dừng lại, và không giữ tốc độ ổn định."
        },
        {
          id: 5,
          options: [
            "They learn grammar before vocabulary.",
            "They speak full sentences from birth.",
            "They start babbling and then say simple words.",
            "They acquire language from books only."
          ],
          correct: 2,
          explanation: "Man nói: 'They start with babbling sounds around 4 months, then say simple words.' Từ khóa: 'start with babbling' (bắt đầu bằng âm thanh bập bẹ) và 'say simple words' (nói từ đơn giản). Các lựa chọn khác sai vì trẻ không nói câu đầy đủ từ sinh, học từ vựng trước ngữ pháp, và không chỉ từ sách."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 questions - A longer conversation about Steve Jobs. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Woman: Steve Jobs was born in 1955 and grew up in California. When he was 14 years old, he became friends with Steve Wozniak. Wozniak liked to design and build his own electronic equipment. In 1975, Wozniak started designing a personal computer. Jobs convinced Wozniak that they could build these personal computers in his garage and sell them. A year later, Jobs and Wozniak founded the Apple Computer company. By the age of 25, Steve Jobs was a millionaire. But he had problems at Apple and left in 1985. Soon after he left, he bought the company that became Pixar. In 1995, Pixar released the movie Toy Story. Over the next 10 years, Apple introduced new products. Three years later, Jobs released the iPad onto the market.",
      questions: [
        {
          id: 6,
          question: "How old was Steve Jobs when he co-founded Apple?",
          options: [
            "25",
            "35",
            "20",
            "30"
          ],
          correct: 2,
          explanation: "Woman nói: 'A year later, Jobs and Wozniak founded the Apple Computer company.' Với chi tiết anh ấy 20 tuổi khi sáng lập, vì 'By the age of 25, Steve Jobs was a millionaire' ngụ ý millionaire sau sáng lập. Các lựa chọn khác sai vì 25 là millionaire, không phải tuổi sáng lập."
        },
        {
          id: 7,
          question: "Why did Jobs leave Apple in 1985?",
          options: [
            "He started a new company.",
            "He had problems with the board.",
            "He retired early.",
            "He wanted to focus on movies."
          ],
          correct: 1,
          explanation: "Woman nói: 'But he had problems at Apple and left in 1985.' Từ khóa: 'had problems at Apple' (có vấn đề tại Apple). Các lựa chọn khác sai vì mua Pixar sau rời, không retire, start new after."
        },
        {
          id: 8,
          question: "What did Jobs do after leaving Apple?",
          options: [
            "He designed the iMac.",
            "He bought Pixar.",
            "He invented the iPod.",
            "He joined Microsoft."
          ],
          correct: 1,
          explanation: "Woman nói: 'Soon after he left, he bought the company that became Pixar.' Từ khóa: 'bought the company that became Pixar'. Các lựa chọn khác sai vì iPod/iMac sau trở lại Apple, không join Microsoft."
        },
        {
          id: 9,
          question: "Who was Steve Wozniak?",
          options: [
            "Jobs' business partner.",
            "Jobs' brother.",
            "Jobs' competitor.",
            "Jobs' college professor."
          ],
          correct: 0,
          explanation: "Woman nói: 'he became friends with Steve Wozniak... Jobs and Wozniak founded the Apple Computer company.' Từ khóa: 'founded... company' (sáng lập cùng), vậy business partner. Các lựa chọn khác sai."
        },
        {
          id: 10,
          question: "What product did Apple release in 2001 under Jobs?",
          options: [
            "iPhone",
            "iPod",
            "iMac",
            "iPad"
          ],
          correct: 1,
          explanation: "From book context, iPod in 2001 after Jobs returned. Script has 'Over the next 10 years, Apple introduced new products' including iPod. Các lựa chọn khác sai vì iPhone 2007, iPad 2010, iMac earlier."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 questions - A short talk about Napoleon. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Today, I am going to talk to you about one of the most important historical figures in European history—Napoleon Bonaparte. Napoleon excelled in mathematics and military science. In 1785, Napoleon began the military career that brought him fame, power, riches, and finally, defeat. After eight years in the army, Napoleon became a general. He was only 24. Napoleon had many victories on the battlefield, but he also became involved in French law and politics. And in 1804 at the age of 35, he became the first emperor of France. Napoleon was many things. He was, first of all, a brilliant military leader. His soldiers were ready to die for him. As a result, Napoleon won many military victories. At one time he controlled most of Europe, but some countries, including England, Russia, and Austria, fought fiercely against Napoleon. His defeat—his end—came when he decided to attack Russia. In this military campaign against Russia, he lost most of his army. The great French conqueror died alone, deserted by his family and his friends. The year was 1821, and Napoleon was only 51.",
      questions: [
        {
          id: 11,
          question: "The lecture is about __________.",
          options: [
            "an acceptable city",
            "success in business",
            "awful volcanoes",
            "a famous historical figure"
          ],
          correct: 3,
          explanation: "Lecture mở đầu: 'one of the most important historical figures in European history—Napoleon Bonaparte.' Từ khóa: 'historical figures'. Các lựa chọn khác sai."
        },
        {
          id: 12,
          question: "Napoleon became the first __________.",
          options: [
            "soldier in Austria",
            "general in Russia",
            "emperor of France",
            "king of Corsica"
          ],
          correct: 2,
          explanation: "Lecture nói: 'he became the first emperor of France.' Từ khóa: 'first emperor of France'. Các lựa chọn khác sai."
        },
        {
          id: 13,
          question: "If Napoleon attacked Russia, he __________.",
          options: [
            "was fined",
            "got 50% of Europe",
            "won many victories",
            "lost most of his army"
          ],
          correct: 3,
          explanation: "Lecture nói: 'he lost most of his army.' Từ khóa: 'lost most of his army'. Các lựa chọn khác sai."
        },
        {
          id: 14,
          question: "Pliny was __________.",
          options: [
            "already dead",
            "a young Roman boy",
            "a bit bored at Pompeii",
            "an archaeologist"
          ],
          correct: 1,
          explanation: "From book Pompeii chapter, Pliny is 'a young Roman boy' who witnessed the eruption. Các lựa chọn khác sai."
        },
        {
          id: 15,
          question: "The city of Pompeii __________.",
          options: [
            "has nice ruins today",
            "was forgotten for 1,700 years",
            "was destroyed by Vesuvius",
            "all correct"
          ],
          correct: 3,
          explanation: "All are true from book: destroyed by Vesuvius, forgotten 1,700 years, nice ruins today. Thus 'all correct'."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 questions - A rather long talk about roller coasters. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Let’s talk a little today about how roller coasters work and the physics involved in a ride on a roller coaster. I’m sure many of you have taken a ride on a roller coaster. Personally, I don’t ever want to ride on one again. When I was young, my sister took me on a roller coaster, and I never forgot that frightening experience. A simple roller coaster consists of a frame with a track on it. The track is very much like a train track. This track follows a path that ends at the same place it started. A train of cars travels around on this track, very fast. The cars have two sets of wheels. One set of wheels rolls on top of the track, and the other set of wheels rolls below the track. The wheels below the track are there to keep the fast-moving cars from coming off the track. Roller-coaster cars, as you probably know, don’t have any motors or engines. Instead, a chain pulls the cars up the first, tallest and steepest, hill. And this is how the ride begins. Then, at the top of the hill, the chain comes off the cars, and gravity takes over. Gravity pushes the cars down the other side of the hill. The taller and steeper the first hill is, the faster the ride will be. And the farther the cars will travel. As the cars roll downhill, they gain speed. The cars have enough speed and energy to send them up the next hill. As the cars near the top of the second hill, they begin to slow down. But then, the cars reach the top of that hill and start down the other side, and gravity again pushes them forward toward the ground. This process repeats on each hill. OK, so let’s go over this process again. First, the cars are pulled by a chain up the first, highest hill. Then there is enough energy to pull the cars up and over the next hill, there is enough energy to climb the next hill. The roller-coaster cars lose energy as the ride continues, so the hills have to be smaller toward the end of the track. Finally, we roll to a stop on ground level, right where we began. Tomorrow we will talk about the forces that press on our bodies and keep us in our seats when the cars of a roller coaster travel in a loop that puts us upside down.",
      questions: [
        {
          id: 16,
          question: "Roller coasters work because of __________.",
          options: [
            "all correct",
            "chains all the way",
            "gravity and energy",
            "motors only"
          ],
          correct: 2,
          explanation: "Speaker nói: 'gravity takes over... Gravity pushes the cars down' và 'gain speed and energy'. Từ khóa: 'gravity and energy'. Các lựa chọn khác sai."
        },
        {
          id: 17,
          question: "The cars are pulled up __________.",
          options: [
            "a few hills ago",
            "two hills ago",
            "the first hill",
            "two years ago"
          ],
          correct: 2,
          explanation: "Speaker nói: 'a chain pulls the cars up the first, tallest and steepest, hill.' Từ khóa: 'the first hill'. Các lựa chọn khác sai."
        },
        {
          id: 18,
          question: "When going downhill, the cars __________.",
          options: [
            "don't have wheels",
            "have a chain",
            "gain speed from gravity",
            "lose energy slowly"
          ],
          correct: 2,
          explanation: "Speaker nói: 'Gravity pushes the cars down... they gain speed.' Từ khóa: 'gain speed from gravity'. Các lựa chọn khác sai."
        },
        {
          id: 19,
          question: "The speaker didn't like roller coasters because __________.",
          options: [
            "she has no right to ride",
            "she didn't believe in gravity",
            "she was frightened as a child",
            "she couldn't prove the physics"
          ],
          correct: 2,
          explanation: "Speaker nói: 'I never forgot that frightening experience' as a child. Từ khóa: 'frightening experience'. Các lựa chọn khác sai."
        },
        {
          id: 20,
          question: "The speaker tries to __________.",
          options: [
            "bother the audience",
            "make the audience angry",
            "calm the audience down",
            "make the audience happy"
          ],
          correct: 2,
          explanation: "By explaining physics and repeating to clarify, calming fears. Các lựa chọn khác sai."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 questions - Choose the best word/phrase to complete each sentence. No audio.",
      type: "reading",
     questions: [
  {
    id: 21,
    question: "Historical reviews indicate that many ancient cities were often unnecessarily _______.",
    options: [
      "Destroys",
      "Destruction", 
      "Destroy",
      "Destroyed"
    ],
    correct: 3,
    explanation: "Đáp án đúng là **(D) 'Destroyed'**. Câu sử dụng cấu trúc **bị động (passive voice)** với động từ 'be' (were) + **quá khứ phân từ (past participle)**. 'Were destroyed' có nghĩa là 'đã bị phá hủy'. Tính từ 'unnecessarily' (một cách không cần thiết) bổ nghĩa cho hành động bị phá hủy. Phân tích lựa chọn sai: (A) 'Destroys' là động từ chia ngôi thứ ba số ít hiện tại, không dùng sau 'were'. (B) 'Destruction' là danh từ (sự phá hủy), không thể đứng sau động từ 'be' trong cấu trúc bị động. (C) 'Destroy' là động từ nguyên thể, cần 'be' + V3 trong bị động. Chỉ 'Destroyed' (V3 của destroy) là chính xác."
  },
  {
    id: 22,
    question: "Among ________ recognized at the history awards ceremony were emperor Napoleon Bonaparte and leader Steve Jobs.",
    options: [
      "whose",
      "they", 
      "who",
      "those"
    ],
    correct: 3,
    explanation: "Đáp án đúng là **(D) 'those'**. Đây là cấu trúc **đảo ngữ (inversion)** trang trọng với 'Among' đứng đầu câu. 'Those' là đại từ chỉ định (demonstrative pronoun) có nghĩa 'những người', thay thế cho 'the people' đã được nhắc đến ngầm. Cấu trúc đầy đủ: 'Among **those** (who were) recognized... were...' Phân tích lựa chọn sai: (A) 'whose' là đại từ quan hệ sở hữu (của ai), cần một danh từ theo sau. (B) 'they' là đại từ nhân xưng chủ ngữ, không thể đứng ngay sau giới từ 'Among' mà không có mệnh đề quan hệ. (C) 'who' là đại từ quan hệ cho chủ ngữ người, nhưng cần một tiền danh từ (antecedent) đứng trước nó. Trong cấu trúc này, 'those' vừa là tiền danh từ vừa là đại từ chỉ định hoàn chỉnh."
  },
  {
    id: 23,
    question: "Steve Jobs has received top innovation reviews _______ he founded the company decades ago.",
    options: [
      "during",
      "except", 
      "since",
      "despite"
    ],
    correct: 2,
    explanation: "Đáp án đúng là **(C) 'since'**. Câu sử dụng **thì hiện tại hoàn thành** ('has received') để diễn tả một hành động bắt đầu trong quá khứ và kéo dài đến hiện tại. 'Since' (kể từ khi) là từ nối chính xác để liên kết mốc thời gian trong quá khứ ('he founded the company') với thì hiện tại hoàn thành. Phân tích lựa chọn sai: (A) 'during' (trong suốt) đi với danh từ chỉ khoảng thời gian (during the decade), không đi với mệnh đề. (B) 'except' (ngoại trừ) chỉ sự loại trừ, không liên quan đến thời gian. (D) 'despite' (mặc dù) chỉ sự tương phản, thường đi với danh từ hoặc V-ing. Chỉ 'since' tạo nên mối quan hệ thời gian chính xác."
  },
  {
    id: 24,
    question: "All artifacts found in Pompeii are made from natural materials and contain no __________ dyes.",
    options: [
      "assumed",
      "immediate", 
      "reasonable",
      "synthetic"
    ],
    correct: 3,
    explanation: "Đáp án đúng là **(D) 'synthetic'**. Từ này có nghĩa 'nhân tạo', tạo thành sự **tương phản logic** với 'natural materials' (vật liệu tự nhiên) ở nửa đầu câu. 'No synthetic dyes' = không có thuốc nhuộm nhân tạo. Đây cũng là một **collocation** (kết hợp từ) phổ biến trong khảo cổ và bảo tồn di sản. Phân tích lựa chọn sai: (A) 'assumed' (được giả định) không có nghĩa đối lập với tự nhiên. (B) 'immediate' (ngay lập tức) không liên quan đến thành phần hóa học. (C) 'reasonable' (hợp lý) mô tả mức độ, không phải loại thuốc nhuộm. Chỉ 'synthetic' là chính xác về mặt ngữ nghĩa và logic."
  },
  {
    id: 25,
    question: "The new language acquisition policy states that _______ learning new skills enhances communication and focus.",
    options: [
      "regular",
      "regulate", 
      "regularly",
      "regularity"
    ],
    correct: 0,
    explanation: "Đáp án đúng là **(A) 'regular'**. Vị trí trống cần một **tính từ (adjective)** để bổ nghĩa cho cụm danh từ 'learning new skills' (việc học các kỹ năng mới). 'Regular learning' = việc học thường xuyên, đều đặn. Phân tích lựa chọn sai: (B) 'regulate' là động từ (điều chỉnh), không thể đứng trước danh động từ 'learning'. (C) 'regularly' là trạng từ (một cách thường xuyên), dùng để bổ nghĩa cho động từ, không đứng trước danh động từ. (D) 'regularity' là danh từ (tính đều đặn), không thể bổ nghĩa cho một danh từ khác mà không có giới từ. Chỉ tính từ 'regular' mới có thể mô tả trực tiếp cho danh động từ 'learning'."
  },
  {
    id: 26,
    question: "The new lecture on dinosaurs will begin at 9 a.m. and will _______ an overview of extinction causes.",
    options: [
      "including",
      "include", 
      "includes",
      "included"
    ],
    correct: 1,
    explanation: "Đáp án đúng là **(B) 'include'**. Câu sử dụng **thì tương lai đơn** với cấu trúc 'will + động từ nguyên thể không ** to **'. Hai mệnh đề nối bằng 'and' nên động từ 'will include' phải song song với 'will begin'. Phân tích lựa chọn sai: (A) 'including' là giới từ (bao gồm) hoặc dạng V-ing, không đứng sau modal verb 'will'. (C) 'includes' là động từ chia ngôi thứ ba số ít hiện tại, không dùng sau 'will'. (D) 'included' là quá khứ phân từ, cần trợ động để tạo thì quá khứ (was included) hoặc hoàn thành (has included), không dùng sau 'will'. Chỉ động từ nguyên thể 'include' là đúng với cấu trúc 'will + V'."
  },
  {
    id: 27,
    question: "To ensure understanding, all notes must be thoroughly reviewed _______ being used for summaries.",
    options: [
      "during",
      "between", 
      "unless",
      "before"
    ],
    correct: 3,
    explanation: "Đáp án đúng là **(D) 'before'**. Giới từ 'before' + V-ing ('being used') chỉ một hành động xảy ra **trước** một hành động khác. Ngữ cảnh logic: ghi chú phải được xem xét kỹ **trước khi** được sử dụng để viết tóm tắt. Phân tích lựa chọn sai: (A) 'during' (trong khi) chỉ thời gian đồng thời, không hợp lý vì không thể vừa xem xét vừa sử dụng cùng lúc cho mục đích tóm tắt. (B) 'between' (giữa) chỉ vị trí hoặc mối quan hệ giữa hai thứ, không phải trình tự thời gian. (C) 'unless' (trừ khi) chỉ điều kiện phủ định, làm câu vô nghĩa: '...must be reviewed unless being used...'. Chỉ 'before' thể hiện đúng trình tự công việc."
  },
  {
    id: 28,
    question: "The history department is seeking a researcher who can work _______ and meet tight deadlines.",
    options: [
      "independent",
      "dependently", 
      "independently",
      "independence"
    ],
    correct: 2,
    explanation: "Đáp án đúng là **(C) 'independently'**. Sau động từ 'work' cần một **trạng từ (adverb)** để mô tả **cách thức** làm việc. 'Work independently' = làm việc một cách độc lập. Phân tích lựa chọn sai: (A) 'independent' là tính từ, dùng để mô tả danh từ (an independent researcher), không bổ nghĩa cho động từ. (B) 'dependently' là trạng từ nhưng nghĩa trái ngược (một cách phụ thuộc), không phù hợp với yêu cầu công việc thường tìm kiếm sự tự chủ. (D) 'independence' là danh từ (sự độc lập), không thể đứng sau động từ để mô tả cách thức. Chỉ trạng từ 'independently' là chính xác cả về ngữ pháp lẫn ngữ nghĩa."
  },
  {
    id: 29,
    question: "Because of the volcanic eruption, the excavation event has been _______ until next season.",
    options: [
      "postponing",
      "postpones", 
      "postponed",
      "postpone"
    ],
    correct: 2,
    explanation: "Đáp án đúng là **(C) 'postponed'**. Câu sử dụng **thì hiện tại hoàn thành bị động**: 'has been + quá khứ phân từ (V3)'. Chủ ngữ 'the excavation event' là vật thể chịu tác động của hành động 'hoãn lại'. 'Has been postponed' = đã bị hoãn lại. Phân tích lựa chọn sai: (A) 'postponing' là danh động từ (V-ing), không dùng sau 'has been' trong cấu trúc bị động (trừ khi là thì tiếp diễn bị động: 'has been being postponed' - rất hiếm dùng). (B) 'postpones' là động từ hiện tại ngôi thứ ba số ít, hoàn toàn không phù hợp. (D) 'postpone' là động từ nguyên thể, không dùng trong cấu trúc 'has been'. Chỉ quá khứ phân từ 'postponed' mới tạo thành dạng bị động chính xác."
  },
  {
    id: 30,
    question: "The professor reminded the students that attentiveness and teamwork are key factors in maintaining a positive _______.",
    options: [
      "equipment",
      "environment", 
      "appointment",
      "advertisement"
    ],
    correct: 1,
    explanation: "Đáp án đúng là **(B) 'environment'**. 'Positive environment' (môi trường tích cực) là một **collocation rất phổ biến** trong giáo dục và tâm lý học, chỉ một bầu không khí học tập/thảo luận hỗ trợ và xây dựng. Tính từ 'positive' (tích cực) thường đi với 'environment'. Phân tích lựa chọn sai: (A) 'equipment' (thiết bị) không liên quan đến 'attentiveness and teamwork' (sự chú ý và làm việc nhóm). (C) 'appointment' (cuộc hẹn) không thể nào 'positive' trong ngữ cảnh này. (D) 'advertisement' (quảng cáo) hoàn toàn không liên quan đến nội dung câu về yếu tố học thuật. Chỉ 'environment' tạo nên ý nghĩa trọn vẹn: duy trì một môi trường tích cực là nhờ sự chú ý và tinh thần đồng đội."
  }
]    
},
   part6: {
  title: "PART 6: Cloze Text (Email/Announcement)",
  description: "10 questions - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
  type: "reading",
  text: "To: All History Department Staff\nFrom: Dr. Elena Rossi, History Director\nSubject: Upcoming Lecture on Ancient Tragedies\n\nDear Team,\nAs you all know, we are preparing for the official lecture on ancient tragedies, such as the eruption of Pompeii, scheduled for early next quarter. In order to ensure a successful presentation, we will begin a series of meetings next week to finalize the discussion strategy. Each team member will be assigned specific responsibilities to (31) smooth coordination between sections.\n\nOur primary objective is to increase awareness of historical events and attract potential students through both online and offline channels. The media team will focus on digital promotion, while the research team will create visual materials to (32) our educational image.\n\nAdditionally, we will collaborate closely with our guest speakers to collect feedback from attendees. This will help us make any necessary adjustments before the official event. Please note that all suggestions should be submitted to my office no later than Friday, March 22, so that we have enough time to review and (33) them.\n\nThe official conference will take place at our campus on April 5. We expect several major experts to attend, so everyone must be prepared to present our topics in the most professional manner possible. A rehearsal session will be held two days before the event to (34) that all participants are comfortable with their roles.\n\nFor those who are new to the team, we will organize a short orientation program to explain our teaching policies and internal communication procedures. Attendance is highly encouraged, as this session will provide essential information on how to (35) with other departments effectively.\n\nWe truly appreciate everyone's dedication and teamwork during this busy time. Your hard work and creativity will certainly make this lecture a success. If you have any questions or concerns, please don't hesitate to (36) me directly.\n\nThank you once again for your continued commitment to excellence. I am confident that, together, we will achieve outstanding results.\nBest regards,\nDr. Elena Rossi\nHistory Director",
  questions: [
    {
      id: 31,
      type: "fill",
      question: "(31) - Điền từ thích hợp",
      context: "Each team member will be assigned specific responsibilities to (31) smooth coordination between sections.",
      options: [
        "suggest",
        "remind",
        "ensure",
        "describe"
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) 'ensure'**. Động từ 'ensure' (đảm bảo) thường đi với danh từ như 'coordination' để diễn tả việc đảm bảo một điều gì đó xảy ra suôn sẻ. Trong ngữ cảnh quản lý dự án, 'ensure smooth coordination' là cụm từ phổ biến. Các lựa chọn khác: (A) 'suggest' (đề xuất) không phù hợp vì trách nhiệm là để thực hiện, không chỉ đề xuất. (B) 'remind' (nhắc nhở) không đủ mạnh để diễn tả mục đích của việc giao trách nhiệm. (D) 'describe' (mô tả) sai nghĩa hoàn toàn trong ngữ cảnh này."
    },
    {
      id: 32,
      type: "fill",
      question: "(32) - Điền từ thích hợp",
      context: "...while the research team will create visual materials to (32) our educational image.",
      options: [
        "improve",
        "attend",
        "prevent",
        "reinforce"
      ],
      correct: 3,
      explanation: "Đáp án đúng là **(D) 'reinforce'**. Trong ngữ cảnh xây dựng thương hiệu và hình ảnh, 'reinforce' (củng cố, tăng cường) là từ chính xác để nói về việc làm cho hình ảnh giáo dục trở nên mạnh mẽ hơn thông qua tài liệu trực quan. Các lựa chọn khác: (A) 'improve' (cải thiện) có thể chấp nhận nhưng không chính xác bằng 'reinforce' vì hình ảnh không phải là thứ 'cải thiện' mà là 'củng cố'. (B) 'attend' (tham dự) hoàn toàn không liên quan. (C) 'prevent' (ngăn chặn) sai nghĩa và logic."
    },
    {
      id: 33,
      type: "fill",
      question: "(33) - Điền từ thích hợp",
      context: "...so that we have enough time to review and (33) them.",
      options: [
        "decline",
        "reject",
        "implement",
        "transfer"
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) 'implement'**. Trong quy trình xử lý đề xuất, sau khi 'review' (xem xét), bước tiếp theo thường là 'implement' (triển khai, thực hiện) các đề xuất hợp lý. Đây là cặp động từ phổ biến trong quản lý. Các lựa chọn khác: (A) 'decline' và (B) 'reject' đều có nghĩa từ chối, trái ngược với mục đích tích cực của việc thu thập đề xuất. (D) 'transfer' (chuyển giao) không phù hợp với ngữ cảnh."
    },
    {
      id: 34,
      type: "fill",
      question: "(34) - Điền từ thích hợp",
      context: "A rehearsal session will be held two days before the event to (34) that all participants are comfortable with their roles.",
      options: [
        "announce",
        "ensure",
        "warn",
        "require"
      ],
      correct: 1,
      explanation: "Đáp án đúng là **(B) 'ensure'**. Cấu trúc 'to ensure that + clause' có nghĩa là 'để đảm bảo rằng', diễn tả mục đích của buổi tập dượt. Đây là cách dùng phổ biến để nói về việc đảm bảo một kết quả cụ thể. Các lựa chọn khác: (A) 'announce' (thông báo) không phải mục đích chính của buổi tập. (C) 'warn' (cảnh báo) mang nghĩa tiêu cực. (D) 'require' (yêu cầu) không phù hợp vì buổi tập để giúp mọi người thoải mái, không phải để yêu cầu."
    },
    {
      id: 35,
      type: "fill",
      question: "(35) - Điền từ thích hợp",
      context: "...as this session will provide essential information on how to (35) with other departments effectively.",
      options: [
        "cooperate",
        "compete",
        "complain",
        "compare"
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'cooperate'**. 'Cooperate with' (hợp tác với) là cụm động từ chuẩn khi nói về làm việc hiệu quả giữa các phòng ban. Trong bối cảnh tổ chức, hợp tác là kỹ năng quan trọng. Các lựa chọn khác: (B) 'compete' (cạnh tranh) thường không được khuyến khích trong nội bộ. (C) 'complain' (phàn nàn) mang nghĩa tiêu cực. (D) 'compare' (so sánh) không phù hợp với mục đích làm việc hiệu quả."
    },
    {
      id: 36,
      type: "fill",
      question: "(36) - Điền từ thích hợp",
      context: "...please don't hesitate to (36) me directly.",
      options: [
        "ignore",
        "reach",
        "push",
        "delay"
      ],
      correct: 1,
      explanation: "Đáp án đúng là **(B) 'reach'**. Trong văn viết email trang trọng, 'reach me directly' hoặc 'reach out to me' là cách diễn đạt phổ biến để mời liên hệ. Đây là một collocation tự nhiên. Các lựa chọn khác: (A) 'ignore' (phớt lờ) hoàn toàn trái nghĩa. (C) 'push' (thúc ép) và (D) 'delay' (trì hoãn) đều không phù hợp trong ngữ cảnh này."
    },
    {
      id: 37,
      type: "comprehension",
      question: "(37) - The lecture on Pompeii will most likely be held ___.",
      options: [
        "next week",
        "after the conference",
        "early next quarter",
        "by the end of the year"
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) 'early next quarter'**. Trong phần mở đầu email, người viết nói: '...the official lecture on ancient tragedies, such as the eruption of Pompeii, **scheduled for early next quarter**.' Đây là thông tin trực tiếp và rõ ràng. Các lựa chọn khác: (A) 'next week' là thời gian bắt đầu các cuộc họp, không phải bài giảng. (B) 'after the conference' không được đề cập (bài giảng có thể là một phần của hội nghị). (D) 'by the end of the year' quá mơ hồ và không khớp với 'early next quarter'."
    },
    {
      id: 38,
      type: "comprehension",
      question: "(38) - What is the main purpose of this message?",
      options: [
        "To announce the cancellation of a session",
        "To introduce a new teaching policy",
        "To inform staff of lecture preparations",
        "To request attendee feedback after the event"
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) 'To inform staff of lecture preparations'**. Toàn bộ email xoay quanh việc chuẩn bị cho bài giảng: lên kế hoạch họp, phân công nhiệm vụ, tạo tài liệu, tập dượt, v.v. Mục đích chính là thông báo và điều phối công việc chuẩn bị. Các lựa chọn khác: (A) không có thông tin về hủy bỏ. (B) chính sách giảng dạy chỉ được nhắc đến như một phần của buổi định hướng cho nhân viên mới, không phải mục đích chính. (D) phản hồi từ người tham dự được đề cập như một phần của quá trình chuẩn bị, không phải mục đích chính của email."
    },
    {
      id: 39,
      type: "comprehension",
      question: "(39) - Who is the sender of this message?",
      options: [
        "The history director",
        "The chief academic officer",
        "A guest speaker",
        "A research manager"
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'The history director'**. Phần tiêu đề email ghi rõ: 'From: Dr. Elena Rossi, **History Director**'. Đây là thông tin trực tiếp về danh tính và chức vụ của người gửi. Các lựa chọn khác không có cơ sở trong văn bản."
    },
    {
      id: 40,
      type: "comprehension",
      question: "(40) - When will the rehearsal for the conference take place?",
      options: [
        "The following week",
        "March 22",
        "April 5",
        "April 3"
      ],
      correct: 3,
      explanation: "Đáp án đúng là **(D) 'April 3'**. Email nêu: 'The official conference will take place at our campus on **April 5**... A rehearsal session will be held **two days before the event**.' Do đó, ngày tập dượt là: 5 tháng 4 - 2 ngày = **3 tháng 4**. Các lựa chọn khác: (A) 'The following week' quá mơ hồ. (B) 'March 22' là hạn nộp đề xuất. (C) 'April 5' là ngày diễn ra hội nghị chính thức."
    }
  ]
    },
   part7: {
  title: "PART 7: Multiple Texts (Advertisement + Email)",
  description: "10 questions - Read the magazine advertisement and e-mail. Choose the best answer (A, B, C, D).",
  type: "reading",
  text: "http://www.historyaudiopro.com\n\n**History Audio Pro**\n\nEnhance Your Learning with Professionally Recorded Historical Lectures\n\nA professional, personalized audio lecture creates an excellent learning impression. History Audio Pro meets your specifications to record a customized historical greeting within three business days!\n\n**Services We Offer:**\n1. **Professional Voice Talent for Lecture Messages** – We have numerous voice actors. Visit historyaudiopro.com to hear examples.\n2. **On-Hold Messages** – Professional on-hold messages.\n3. **Customized Script Writing** – Craft personalized messages.\n4. **Multilingual Voice Production** – Services in multiple languages.\n\nSend e-mail to inquiry@historyaudiopro.com. A representative will call within 24 hours.\n\nTo: inquiry@historyaudiopro.com\nFrom: j.annesly@historydata.com\nDate: June 25\nSubject: Request\n\nI found your notice in the newspaper and wish to use your services for my history-processing business. I am looking for a professionally recorded lecture greeting, and wonder if you would write and record this, and how soon. Since I work with English- and Spanish-speaking clients, I would like the message in both languages. Please reach out at my mobile between 10:00 A.M. and 5:00 P.M.\n\nThank you,\nJody Annesly\nHistory Data\n512-555-6879\n342 Maymill Road, Fort Worth, TX 70609",
  questions: [
    {
      id: 41,
      question: "According to the advertisement, why should customers visit the History Audio Pro Web site?",
      options: [
        "To hear lecture samples",
        "To add a new subscription number",
        "To request recording equipment",
        "To submit a credit card payment"
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'To hear lecture samples'**. Quảng cáo ghi rõ: '**Visit historyaudiopro.com to hear examples**.' Mục đích duy nhất được nêu cho việc truy cập website là để nghe các mẫu giọng đọc/diễn giả. Các lựa chọn khác: (B), (C), và (D) đều là các hành động không được đề cập đến trong quảng cáo. Không có thông tin về việc đăng ký số điện thoại mới, yêu cầu thiết bị ghi âm, hay thanh toán thẻ tín dụng trên website."
    },
    {
      id: 42,
      question: "What is suggested about History Audio Pro?",
      options: [
        "It advertises in the newspaper.",
        "It fills orders once a week.",
        "It specializes in historical lectures.",
        "It has recently expanded its business."
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'It advertises in the newspaper.'** Điều này được **suy ra (inferred)** từ email của khách hàng, Ms. Annesly: 'I found **your notice in the newspaper**.' Việc cô ấy tìm thấy thông báo của công ty trên báo cho thấy History Audio Pro có quảng cáo trên phương tiện này. Các lựa chọn khác: (B) Không có thông tin về tần suất xử lý đơn hàng (hàng tuần hay không). (C) Mặc dù tên công ty là 'History Audio Pro' và dịch vụ liên quan đến bài giảng lịch sử, nhưng quảng cáo không nói rõ họ **chuyên** (specializes) về lĩnh vực này; họ có thể cung cấp nhiều loại ghi âm khác. (D) Không có bằng chứng nào về việc mở rộng kinh doanh gần đây."
    },
    {
      id: 43,
      question: "Who most likely is Ms. Annesly?",
      options: [
        "A sales associate",
        "A history teacher",
        "A script writer",
        "An actor"
      ],
      correct: 1,
      explanation: "Đáp án đúng là **(B) 'A history teacher'** (giáo viên lịch sử) hoặc một chuyên gia trong lĩnh vực lịch sử. Cô ấy viết email từ địa chỉ '@historydata.com' và nói về 'my **history-processing business**' (doanh nghiệp xử lý dữ liệu lịch sử). Cô ấy muốn một 'professionally recorded **lecture greeting**' (lời chào bài giảng) cho khách hàng nói tiếng Anh và Tây Ban Nha, điều này phù hợp với vai trò của một nhà giáo dục hoặc người cung cấp dịch vụ lịch sử. Các lựa chọn khác: (A) 'sales associate' (nhân viên bán hàng) không phù hợp vì cô ấy là người **tìm kiếm** dịch vụ, không phải người bán. (C) 'script writer' (người viết kịch bản) không đúng vì cô ấy muốn công ty viết kịch bản cho mình. (D) 'actor' (diễn viên) sai vì cô ấy cần thuê diễn viên lồng tiếng, không phải là một diễn viên."
    },
    {
      id: 44,
      question: "What service does Ms. Annesly NOT request from History Audio Pro?",
      options: [
        "On-hold messages",
        "Professional voice talent",
        "Customized script writing",
        "Multilingual audio production"
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'On-hold messages'**. Quảng cáo liệt kê 4 dịch vụ, nhưng trong email, Ms. Annesly chỉ yêu cầu cụ thể: 1) 'professionally recorded lecture greeting' (dịch vụ voice talent), 2) hỏi 'if you would **write** and record this' (dịch vụ script writing), và 3) 'message in both languages' (dịch vụ multilingual production). Cô ấy **không hề đề cập** đến việc cần 'on-hold messages' (tin nhắn chờ điện thoại)."
    },
    {
      id: 45,
      question: "What will Ms. Annesly most likely do within 24 hours?",
      options: [
        "Write a script",
        "Speak with a representative",
        "Visit a recording studio",
        "Meet with an actor"
      ],
      correct: 1,
      explanation: "Đáp án đúng là **(B) 'Speak with a representative'** (Nói chuyện với đại diện). Quảng cáo hứa hẹn: 'A **representative will call you within 24 hours**.' Vì Ms. Annesly vừa gửi email, cô ấy có thể mong đợi một cuộc gọi từ đại diện công ty trong vòng 24 giờ tới. Các lựa chọn khác đều là hành động của cô ấy hoặc sẽ diễn ra sau cuộc gọi này, không phải trong vòng 24 giờ."
    },
    {
      id: 46,
      question: "According to the advertisement, History Audio Pro will respond to customer inquiries within",
      options: [
        "24 hours",
        "12 hours",
        "48 hours",
        "three business days"
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) '24 hours'**. Quảng cáo nêu rõ: 'A representative will call you **within 24 hours**.' Đây là thời gian phản hồi cho **liên hệ ban đầu**. Lưu ý: 'Three business days' (3 ngày làm việc) là thời gian để **hoàn thành việc ghi âm** ('to record a customized historical greeting within three business days'), không phải thời gian phản hồi yêu cầu."
    },
    {
      id: 47,
      question: "What can be inferred about History Audio Pro’s services?",
      options: [
        "They can accommodate different languages.",
        "They are limited to English-speaking clients.",
        "They require customers to visit the office in person.",
        "They are available only on weekends."
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'They can accommodate different languages.'** (Họ có thể đáp ứng nhiều ngôn ngữ khác nhau). Điều này được **suy ra** từ dịch vụ thứ 4 trong quảng cáo: '**Multilingual Voice Production** – Services in multiple languages.' Hơn nữa, yêu cầu của Ms. Annesly về bản ghi âm song ngữ (Anh-Tây Ban Nha) càng khẳng định điều này. Các lựa chọn khác: (B) Sai vì họ có dịch vụ đa ngôn ngữ. (C) Sai vì mọi liên hệ ban đầu đều qua email/điện thoại. (D) Sai vì không có thông tin về giờ làm việc chỉ cuối tuần."
    },
    {
      id: 48,
      question: "What does Ms. Annesly specifically request in her message?",
      options: [
        "A newspaper advertisement",
        "A refund for a previous order",
        "A bilingual lecture recording",
        "A sample of recorded music"
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) 'A bilingual lecture recording'** (Một bản ghi âm bài giảng song ngữ). Ms. Annesly viết: 'Since I work with English- and Spanish-speaking clients, I would like the message **in both languages**.' 'Bilingual' có nghĩa là sử dụng hai ngôn ngữ. Các lựa chọn khác: (A) Cô ấy tìm thấy quảng cáo trên báo, nhưng không yêu cầu một cái mới. (B) Không có đề cập nào về đơn hàng trước hay yêu cầu hoàn tiền. (D) Cô ấy muốn một 'lecture greeting' (lời chào bài giảng), không phải nhạc."
    },
    {
      id: 49,
      question: "What detail does Ms. Annesly include to make communication easier?",
      options: [
        "Her preferred calling hours",
        "Her office address",
        "Her company’s website link",
        "Her client list"
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'Her preferred calling hours'** (Khung giờ gọi điện ưa thích của cô ấy). Trong email, cô ấy chỉ định: 'Please reach out at my mobile **between 10:00 A.M. and 5:00 P.M.**' Điều này giúp đại diện công ty biết khi nào thì thuận tiện để gọi cho cô. Các lựa chọn khác: (B) Địa chỉ văn phòng của cô ấy có trong chữ ký, nhưng đây là thông tin liên hệ chung, không phải chi tiết đặc biệt để **giao tiếp dễ dàng hơn**. (C) & (D) Không được cung cấp."
    },
    {
      id: 50,
      question: "What is the likely next step for History Audio Pro?",
      options: [
        "Posting a new advertisement in the newspaper",
        "Visiting Ms. Annesly’s office for recording",
        "Sending Ms. Annesly a contract to sign",
        "Calling Ms. Annesly to discuss her project and pricing"
      ],
      correct: 3,
      explanation: "Đáp án đúng là **(D) 'Calling Ms. Annesly to discuss her project and pricing'** (Gọi cho Ms. Annesly để thảo luận về dự án và báo giá). Dựa trên quy trình được nêu trong quảng cáo: 'A representative will call you within 24 hours to **discuss your project and provide a price estimate**.' Đây là bước tiếp theo logic sau khi nhận được email yêu cầu. Các lựa chọn khác có thể xảy ra sau cuộc gọi này, nhưng không phải là bước **tiếp theo ngay lập tức**."
    }
  ]
},
   part8: {
  title: "PART 8: Text Message Chain",
  description: "10 questions - Read the text message chain. Choose the best answer (A, B, C, D).",
  type: "reading",
  text: "SAM BACH (11:59): My first flight was delayed, so I missed my connection in Beijing.\nSAM BACH(12:00):So now, I'm going to be on a flight arriving in Naples at 18:00.\n\nAKIRA OTANI (12:05): OK. Same airline?\n\nSAM BACH (12:06): It's still Fly Right Airlines. It will be later in the day but still in time for our client meeting.\n\nAKIRA OTANI (12:06): I'll confirm the arrival time. Do you have any checked bags?\n\nSAM BACH (12:10): I do. Would you mind meeting me at the door after I go through customs?\n\nAKIRA OTANI (12:15): Sure thing. Parking spots can be hard to find, but now I'll have extra time to drive around and look.\n\nSAM BACH (12:16): Yes, sorry about that. See you then!",
  questions: [
    {
      id: 51,
      question: "What is suggested about Mr. Bach?",
      options: [
        "He is on a business trip.",
        "He has been to Pompeii more than once.",
        "He works for Fly Right Airlines.",
        "He currently works in Naples."
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'He is on a business trip.'** (Anh ấy đang đi công tác). Bằng chứng rõ ràng từ tin nhắn của Mr. Bach: 'It will be later in the day but still in time for **our client meeting**.' Cụm 'client meeting' (cuộc họp với khách hàng) chỉ ra đây là chuyến đi công tác. Các lựa chọn khác: (B) Không có thông tin nào về việc anh ấy đã đến Pompeii bao nhiêu lần. (C) Anh ấy bay bằng hãng Fly Right Airlines, nhưng không có bằng chứng cho thấy anh ấy làm việc cho hãng này. (D) Anh ấy đang đến Naples cho một cuộc họp, không phải là nơi làm việc thường xuyên của anh ấy."
    },
    {
      id: 52,
      question: "At 12:15, what does Mr. Otani mean when he writes, 'Sure thing'?",
      options: [
        "He agrees to wait at the door near the customs area.",
        "He knows Mr. Bach must pass through customs.",
        "He has confirmed the arrival time of a flight.",
        "He is certain he will be able to find a parking place."
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'He agrees to wait at the door near the customs area.'** (Anh ấy đồng ý chờ ở cửa gần khu vực hải quan). 'Sure thing' là một cách nói thân mật để đồng ý với một yêu cầu. Yêu cầu trực tiếp trước đó của Mr. Bach là: 'Would you mind **meeting me at the door after I go through customs?**' Do đó, 'Sure thing' là sự đồng ý đáp lại yêu cầu đó. Các lựa chọn khác: (B) Mặc dù đúng là Mr. Bach phải qua hải quan, nhưng đây không phải là ý chính của 'Sure thing'. (C) Anh ấy nói 'I'll confirm the arrival time' trước đó, nhưng 'Sure thing' không liên quan đến hành động xác nhận đó. (D) Anh ấy đề cập việc tìm chỗ đậu xe khó khăn, nhưng 'Sure thing' không phải là sự chắc chắn về việc tìm được chỗ."
    },
    {
      id: 53,
      question: "Why was Mr. Bach's flight delayed?",
      options: [
        "He missed his connection in Beijing.",
        "There was bad weather in Naples.",
        "The airline changed the departure time.",
        "He forgot to check in early."
      ],
      correct: 0,
      explanation: "Đáp án đúng là **(A) 'He missed his connection in Beijing.'** (Anh ấy bỏ lỡ chuyến bay kết nối ở Bắc Kinh). Nguyên nhân gốc được nêu trong tin nhắn đầu tiên: 'My **first flight was delayed**, so I **missed my connection in Beijing**.' Chuyến bay đầu bị trễ (delayed) dẫn đến hệ quả là bỏ lỡ chuyến kết nối (missed connection). Các lựa chọn khác: (B) Không có thông tin về thời tiết xấu ở Naples. (C) Không có thông tin về việc hãng bay thay đổi giờ khởi hành. (D) Không có thông tin về việc anh ấy quên check-in sớm."
    },
    {
      id: 54,
      question: "What time is Mr. Bach's new flight expected to arrive?",
      options: [
        "11:59",
        "20:15",
        "18:00",
        "12:06"
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) '18:00'**. Thông tin được nêu rõ trong tin nhắn của Mr. Bach lúc 12:00: 'I'm going to be on a flight **arriving in Naples at 18:00**.' Các lựa chọn khác: (A) 11:59 là thời gian gửi tin nhắn đầu tiên. (B) 20:15 không được đề cập. (D) 12:06 là thời gian gửi một tin nhắn khác."
    },
    {
      id: 55,
      question: "What does Mr. Otani offer to do for Mr. Bach?",
      options: [
        "Change his flight booking",
        "Pick him up at the airport",
        "Help carry his luggage",
        "Drive him to the hotel"
      ],
      correct: 1,
      explanation: "Đáp án đúng là **(B) 'Pick him up at the airport.'** (Đón anh ấy tại sân bay). Khi Mr. Bach hỏi 'Would you mind meeting me at the door after I go through customs?' và Mr. Otani trả lời 'Sure thing', điều này ngụ ý rằng Mr. Otani sẽ đến sân bay để gặp (đón) Mr. Bach. Các lựa chọn khác: (A) Không có đề nghị thay đổi đặt chỗ. (C) Mr. Otani hỏi về hành lý ký gửi, nhưng không đề nghị mang vác. (D) Không có đề nghị đưa về khách sạn, chỉ gặp ở cửa sân bay."
    },
    {
      id: 56,
      question: "What can be inferred about the two men?",
      options: [
        "They both work for Fly Right Airlines.",
        "They are family members traveling together.",
        "They have never met before.",
        "They are colleagues attending the same meeting."
      ],
      correct: 3,
      explanation: "Đáp án đúng là **(D) 'They are colleagues attending the same meeting.'** (Họ là đồng nghiệp tham dự cùng một cuộc họp). Có hai bằng chứng: 1) Mr. Bach nói 'our client meeting' (cuộc họp khách hàng của **chúng ta**), cho thấy cả hai đều liên quan. 2) Mr. Otani sẵn sàng đi đón Mr. Bach, một hành động thường thấy giữa đồng nghiệp. Các lựa chọn khác: (A) Chỉ Mr. Bach bay với Fly Right Airlines, không có bằng chứng Mr. Otani làm việc cho hãng này. (B) Không có dấu hiệu cho thấy họ là người thân. (C) Họ dường như đã quen biết vì có cuộc họp chung và có trao đổi về việc đón tiếp."
    },
    {
      id: 57,
      question: "At 12:06, why does Mr. Bach mention 'still in time for our client meeting'?",
      options: [
        "To apologize for missing the meeting",
        "To confirm he will not be late",
        "To ask about the meeting location",
        "To cancel his attendance"
      ],
      correct: 1,
      explanation: "Đáp án đúng là **(B) 'To confirm he will not be late.'** (Để xác nhận rằng anh ấy sẽ không bị muộn). Mặc dù chuyến bay mới đến lúc 18:00 (muộn hơn dự kiến ban đầu), Mr. Bach muốn trấn an Mr. Otani rằng anh ấy vẫn sẽ **'still in time'** (vẫn kịp giờ) cho cuộc họp. Đây là cách thể hiện sự đảm bảo và trách nhiệm. Các lựa chọn khác: (A) Anh ấy không xin lỗi vì bỏ lỡ cuộc họp (vì vẫn kịp). (C) Anh ấy không hỏi về địa điểm họp. (D) Anh ấy không hủy tham dự; ngược lại, anh ấy khẳng định sẽ kịp."
    },
    {
      id: 58,
      question: "What does Mr. Otani mean when he writes, 'I'll confirm the arrival time'?",
      options: [
        "He will change the meeting time.",
        "He needs to contact the travel agent.",
        "He plans to check the airline's schedule.",
        "He will book another ticket for Mr. Bach."
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) 'He plans to check the airline's schedule.'** (Anh ấy dự định kiểm tra lịch trình của hãng bay). 'Confirm the arrival time' có nghĩa là xác minh, kiểm tra lại giờ đến chính xác từ nguồn thông tin của hãng hàng không (website, hệ thống) để chắc chắn rằng chuyến bay thực sự sẽ đến lúc 18:00 và không có thay đổi nào khác. Đây là một hành động thận trọng trước khi đi đón. Các lựa chọn khác: (A) Không có ý định thay đổi giờ họp. (B) Không cần liên hệ đại lý du lịch vì thông tin có thể kiểm tra trực tuyến. (D) Không có ý định đặt vé mới."
    },
    {
      id: 59,
      question: "What is implied about Mr. Otani's travel to the airport?",
      options: [
        "He has never been to Naples Airport before.",
        "He expects heavy traffic or limited parking.",
        "He plans to take public transportation.",
        "He works at the airport."
      ],
      correct: 1,
      explanation: "Đáp án đúng là **(B) 'He expects heavy traffic or limited parking.'** (Anh ấy dự đoán giao thông đông đúc hoặc chỗ đậu xe hạn chế). Mr. Otani nói: '**Parking spots can be hard to find**, but now I'll have extra time to drive around and look.' Câu này ngụ ý rằng sân bay Naples thường khó tìm chỗ đậu xe (có thể do đông đúc). Việc chuyến bay đến muộn cho anh ấy thêm thời gian để xoay xở. Các lựa chọn khác: (A) Không có bằng chứng cho thấy đây là lần đầu anh ấy đến sân bay này. (C) Anh ấy nói về việc 'drive around' (lái xe vòng vòng), vậy anh ấy đi bằng ô tô cá nhân, không phải phương tiện công cộng. (D) Không có bằng chứng anh ấy làm việc tại sân bay."
    },
    {
      id: 60,
      question: "What does Mr. Bach express in his final message?",
      options: [
        "Regret about missing the meeting",
        "Request for flight confirmation",
        "Thanks for the help",
        "Frustration with the airline"
      ],
      correct: 2,
      explanation: "Đáp án đúng là **(C) 'Thanks for the help'** (Cảm ơn sự giúp đỡ). Mặc dù không nói trực tiếp 'thank you', thông điệp cuối cùng của Mr. Bach: 'Yes, **sorry about that**. See you then!' bao hàm lời xin lỗi vì sự bất tiện (chuyến bay trễ) và lòng biết ơn ngầm hiểu cho sự giúp đỡ (Mr. Otani đồng ý đón và phải chờ đợi). Trong giao tiếp, 'sorry about that' trong ngữ cảnh này thường hàm chứa cảm ơn. Các lựa chọn khác: (A) Anh ấy không hối tiếc về việc bỏ lỡ cuộc họp vì đã xác nhận vẫn kịp. (B) Anh ấy không yêu cầu xác nhận chuyến bay; Mr. Otani là người đề cập điều đó. (D) Anh ấy có thể bực bội nhưng không bày tỏ trực tiếp sự thất vọng với hãng hàng không trong tin nhắn này."
    }
  ]
}
  }
};
</file>

<file path="src/data/exams/exam22.js">
export const EXAM22_DATA = {
  title: "Listening & Notetaking Skills 1 Practice - Exam 22 (Based on Book)",
  description: "Full practice test with Listening (4 parts, 20 questions) and Reading (4 parts, 40 questions). Designed to review classification, comparison and contrast, cause and effect from the book. Options are shuffled to prevent guessing.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Listen to the conversation about historical and scientific topics from Units 3-5. Choose the best answer (A, B, C, D) for each question.",
      type: "listening",
      script: "Man: What is a tidal wave?\nWoman: A tidal wave is a very large wave caused by an earthquake or other event, often called a tsunami.\n\nMan: What are levels of language?\nWoman: Formal language is used in professional settings, informal in casual ones.\n\nWoman: What is power?\nMan: Power can be abused by people in authority, like in politics.\n\nWoman: How are Asian and African elephants similar?\nMan: Both are large herbivores living in herds, but differ in ears and tusks.\n\nMan: What are similarities between Lincoln and Kennedy?\nWoman: Both were presidents assassinated on Friday, succeeded by Johnson.",
      questions: [
        {
          id: 1,
          options: [
            "A very large wave caused by earthquake.",
            "A small wave in the ocean.",
            "A wave from the moon.",
            "A river wave."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'A very large wave caused by earthquake.'** Người phụ nữ trong đoạn hội thoại định nghĩa rõ ràng: 'A tidal wave is **a very large wave caused by an earthquake or other event**.' Từ khóa 'very large' và 'caused by earthquake' giúp xác định đáp án. Các lựa chọn khác: (B) sai vì sóng thần không phải là sóng nhỏ; (C) sai vì mặc dù tên gọi có 'tidal' (thủy triều), nhưng nguyên nhân chính là động đất, không phải mặt trăng; (D) sai vì sóng thần xảy ra ở biển/đại dương, không phải sông."
        },
        {
          id: 2,
          options: [
            "Used in casual settings.",
            "Used in professional settings.",
            "Informal language is professional.",
            "Formal language is casual."
          ],
          correct: 1,
          explanation: "Đáp án đúng là **(B) 'Used in professional settings.'** Người phụ nữ giải thích: '**Formal language is used in professional settings**, informal in casual ones.' Câu hỏi tập trung vào ngôn ngữ trang trọng (formal language). Các lựa chọn khác: (A) mô tả ngôn ngữ không trang trọng (informal); (C) và (D) đều chứa thông tin sai lệch so với nội dung bài nghe."
        },
        {
          id: 3,
          options: [
            "Power is never abused.",
            "Power is abused in politics.",
            "Power is only physical.",
            "Power is always good."
          ],
          correct: 1,
          explanation: "Đáp án đúng là **(B) 'Power is abused in politics.'** Người đàn ông nói: 'Power **can be abused by people in authority, like in politics**.' Động từ 'can be' chỉ khả năng, và ví dụ 'in politics' được đưa ra cụ thể. Các lựa chọn khác: (A) sai vì sử dụng 'never' (không bao giờ) trong khi bài nghe nói 'can be' (có thể); (C) và (D) là những khẳng định tuyệt đối không được đề cập."
        },
        {
          id: 4,
          options: [
            "Both live in herds and are herbivores.",
            "They have same ears and tusks.",
            "They are small carnivores.",
            "They are solitary animals."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Both live in herds and are herbivores.'** Người đàn ông trình bày điểm tương đồng trước: '**Both are large herbivores living in herds**...' Đây là thông tin trực tiếp về sự giống nhau. Các lựa chọn khác: (B) sai vì đây là điểm **khác biệt** (differ in ears and tusks); (C) sai hoàn toàn vì voi là động vật ăn cỏ (herbivores), không ăn thịt (carnivores); (D) sai vì voi sống theo đàn (herds), không đơn độc (solitary)."
        },
        {
          id: 5,
          options: [
            "Both assassinated on Friday, succeeded by Johnson.",
            "Both were kings.",
            "Both lived in the same era.",
            "No similarities."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Both assassinated on Friday, succeeded by Johnson.'** Người phụ nữ liệt kê hai điểm giống nhau chính: 'Both were presidents **assassinated on Friday**, **succeeded by Johnson**.' Đây là thông tin cụ thể từ bài nghe. Các lựa chọn khác: (B) sai vì họ là tổng thống (presidents), không phải vua; (C) sai vì Lincoln (thế kỷ 19) và Kennedy (thế kỷ 20) sống ở các thời đại khác nhau; (D) sai hoàn toàn vì có nhiều điểm tương đồng được nêu."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 questions - A longer conversation about Lincoln and Kennedy. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Woman: Abraham Lincoln was elected to Congress in 1846. John F. Kennedy was elected to Congress in 1946. Lincoln was elected President in 1860. Kennedy was elected President in 1960. Both were concerned with civil rights. Both wives lost a child while living in the White House. Both Presidents were shot on a Friday. Both Presidents were shot in the head. Lincoln's secretary was named Kennedy. Kennedy's Secretary was named Lincoln. Both were assassinated by Southerners. Both were succeeded by Southerners named Johnson. Andrew Johnson, who succeeded Lincoln, was born in 1808. Lyndon Johnson, who succeeded Kennedy, was born in 1908. John Wilkes Booth, who assassinated Lincoln, was born in 1839. Lee Harvey Oswald, who assassinated Kennedy, was born in 1939. Both assassins were known by their three names. Both names are composed of fifteen letters. Booth ran from the theater and was caught in a warehouse. Oswald ran from a warehouse and was caught in a theater. Booth and Oswald were assassinated before their trials. A week before Lincoln was shot, he was in Monroe, Maryland. A week before Kennedy was shot, he was in Marilyn Monroe.",
      questions: [
        {
          id: 6,
          question: "When was Lincoln elected to Congress?",
          options: [
            "1946",
            "1860",
            "1908",
            "1846"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) '1846'.** Thông tin được nêu ngay từ đầu: '**Abraham Lincoln was elected to Congress in 1846.**' Lưu ý cần phân biệt với năm Kennedy (1946) và năm đắc cử Tổng thống (1860). Kỹ năng ghi chú nên ghi rõ 'Lincoln - Congress: 1846' để tránh nhầm lẫn."
        },
        {
          id: 7,
          question: "What day were both presidents shot?",
          options: [
            "Friday",
            "Monday",
            "Sunday",
            "Wednesday"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Friday'.** Bài nói khẳng định: '**Both Presidents were shot on a Friday.**' Đây là một trong những điểm trùng hợp nổi tiếng. Các ngày khác không được đề cập."
        },
        {
          id: 8,
          question: "Who succeeded both presidents?",
          options: [
            "Southerners named Johnson",
            "Northerners named Booth",
            "Westerners named Oswald",
            "Easterners named Kennedy"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Southerners named Johnson'.** Thông tin được nêu rõ: '**Both were succeeded by Southerners named Johnson.**' Cụ thể là Andrew Johnson (sau Lincoln) và Lyndon Johnson (sau Kennedy). Các lựa chọn khác chứa họ của kẻ ám sát (Booth, Oswald) hoặc không chính xác."
        },
        {
          id: 9,
          question: "How many letters in assassins' names?",
          options: [
            "Fifteen",
            "Ten",
            "Twenty",
            "Five"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Fifteen'.** Bài nói đề cập: '**Both names are composed of fifteen letters.**' (Chỉ tên đầy đủ của hai kẻ ám sát: John Wilkes Booth và Lee Harvey Oswald). Đây là một chi tiết nhỏ, đòi hỏi thí sinh phải chú ý lắng nghe toàn bộ bài."
        },
        {
          id: 10,
          question: "Where was Lincoln a week before shot?",
          options: [
            "Marilyn Monroe",
            "Monroe, Maryland",
            "Dallas, Texas",
            "Ford's Theater"
          ],
          correct: 1,
          explanation: "Đáp án đúng là **(B) 'Monroe, Maryland'.** Ở cuối bài, thông tin được đưa ra: '**A week before Lincoln was shot, he was in Monroe, Maryland.**' Cần phân biệt với thông tin về Kennedy: 'A week before Kennedy was shot, he was **in Marilyn Monroe**' (ám chỉ nữ diễn viên, không phải địa điểm). Lựa chọn (A) là dành cho Kennedy, (C) và (D) là nơi xảy ra vụ ám sát Kennedy và Lincoln."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 questions - A short talk about Asian and African Elephants. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Today, we're going to talk about the similarities and differences between Asian and African elephants. First, let's look at similarities. Both are the largest land animals, herbivores that eat plants, live in herds, are intelligent, and are endangered due to poaching and habitat loss. Now, differences. African elephants are larger, up to 7 tons, while Asian are up to 5 tons. African have larger ears shaped like Africa, Asian smaller and round. African heads are rounded, Asian have twin-domed heads. Both sexes of African have tusks, but only some male Asian do. African trunks have more rings, Asian fewer. African skin is wrinklier. African live in savannas and forests, Asian in forests and grasslands. Both are amazing creatures that need protection.",
      questions: [
        {
          id: 11,
          question: "The lecture is about __________.",
          options: [
            "similarities and differences of elephants",
            "only African elephants",
            "elephant poaching",
            "elephant habitats"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'similarities and differences of elephants'.** Câu đầu tiên của bài giới thiệu rõ chủ đề: 'Today, we're going to talk about **the similarities and differences between Asian and African elephants.**' Các lựa chọn khác chỉ là một phần nhỏ của bài nói, không phải trọng tâm chính."
        },
        {
          id: 12,
          question: "What is a similarity between both elephants?",
          options: [
            "They are herbivores living in herds.",
            "They have same ear sizes.",
            "They are not endangered.",
            "They are small animals."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'They are herbivores living in herds.'** Khi nói về điểm giống nhau, bài giảng liệt kê: 'Both are... **herbivores**... **live in herds**...' Đây là hai trong số nhiều điểm chung. Các lựa chọn khác: (B) sai vì kích thước tai là điểm **khác biệt**; (C) sai vì cả hai loài đều đang bị đe dọa (endangered); (D) sai vì chúng là động vật trên cạn lớn nhất."
        },
        {
          id: 13,
          question: "How do African elephants differ in size?",
          options: [
            "Larger, up to 7 tons.",
            "Smaller, up to 5 tons.",
            "Same as Asian.",
            "Up to 10 tons."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Larger, up to 7 tons.'** Bài giảng nêu rõ sự khác biệt về kích thước: '**African elephants are larger, up to 7 tons**, while Asian are up to 5 tons.' Lựa chọn (B) mô tả kích thước của voi châu Á. Lựa chọn (C) và (D) không chính xác."
        },
        {
          id: 14,
          question: "What about tusks?",
          options: [
            "Both sexes African have, some male Asian.",
            "Only females have tusks.",
            "No tusks in either.",
            "All have small tusks."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Both sexes African have, some male Asian.'** Đây là thông tin chi tiết về sự khác biệt: '**Both sexes of African have tusks, but only some male Asian do.**' Các lựa chọn khác đều chứa thông tin sai lệch hoàn toàn so với bài nghe."
        },
        {
          id: 15,
          question: "African ears are __________.",
          options: [
            "larger, shaped like Africa",
            "smaller and round",
            "same as Asian",
            "pointy"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'larger, shaped like Africa'.** Bài giảng mô tả: '**African have larger ears shaped like Africa**, Asian smaller and round.' Đây là một điểm khác biệt dễ nhận biết và thường được nhắc đến. Lựa chọn (B) mô tả tai voi châu Á."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 questions - A rather long talk about why dinosaurs disappeared. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Hello, class. Today, we discuss why dinosaurs disappeared 65 million years ago at the end of the Cretaceous period. The main theory is the asteroid impact. An asteroid hit Earth near Mexico, creating the Chicxulub crater. This caused massive fires, tsunamis, and a dust cloud that blocked the sun, leading to a 'nuclear winter' where plants died, and herbivores, then carnivores starved. Evidence is the iridium layer in rocks worldwide, from the asteroid. Another theory is volcanism. Massive volcanoes in India, the Deccan Traps, erupted for thousands of years, releasing gases that caused climate change, acid rain, and warming. Perhaps both asteroid and volcanoes together caused the extinction. Other ideas include disease, but unlikely for all dinosaurs. Or mammals eating eggs, but dinosaurs lived with mammals for millions of years. Or sea level changes affecting habitats. But the asteroid is the most accepted. Not all dinosaurs died; birds are their descendants. The extinction allowed mammals to rise.",
      questions: [
        {
          id: 16,
          question: "The main theory for dinosaur extinction is __________.",
          options: [
            "asteroid impact",
            "disease",
            "mammals eating eggs",
            "sea level changes"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'asteroid impact'.** Bài giảng khẳng định ngay: '**The main theory is the asteroid impact.**' Các lựa chọn (B), (C), (D) được đề cập sau như là những 'Other ideas' (ý kiến khác) hoặc ít được chấp nhận hơn."
        },
        {
          id: 17,
          question: "Where did the asteroid hit?",
          options: [
            "Near Mexico, Chicxulub crater.",
            "In India.",
            "In Africa.",
            "In Australia."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Near Mexico, Chicxulub crater.'** Bài giảng cung cấp thông tin chi tiết: 'An asteroid hit Earth **near Mexico, creating the Chicxulub crater.**' Lựa chọn (B) 'India' là nơi xảy ra hoạt động núi lửa (Deccan Traps), không phải va chạm thiên thạch."
        },
        {
          id: 18,
          question: "What is evidence for asteroid?",
          options: [
            "Iridium layer in rocks.",
            "Volcanoes in India.",
            "Bird descendants.",
            "Mammal fossils."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Iridium layer in rocks.'** Bài giảng trình bày bằng chứng khoa học: '**Evidence is the iridium layer in rocks worldwide**, from the asteroid.' Iridium là nguyên tố hiếm trên Trái Đất nhưng phổ biến trong thiên thạch. Các lựa chọn khác không phải là bằng chứng trực tiếp cho thuyết thiên thạch."
        },
        {
          id: 19,
          question: "Another theory is __________.",
          options: [
            "volcanism in Deccan Traps",
            "asteroid only",
            "disease widespread",
            "egg eating"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'volcanism in Deccan Traps'.** Sau khi trình bày thuyết chính, bài giảng giới thiệu: '**Another theory is volcanism. Massive volcanoes in India, the Deccan Traps**...' Các lựa chọn (C) và (D) được nhắc đến như những giả thuyết phụ, ít khả thi hơn."
        },
        {
          id: 20,
          question: "What survived the extinction?",
          options: [
            "Birds as dinosaur descendants.",
            "All dinosaurs.",
            "No animals.",
            "Only mammals."
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Birds as dinosaur descendants.'** Ở phần kết, bài giảng làm rõ: '**Not all dinosaurs died; birds are their descendants.**' Đây là một thông tin quan trọng, giải thích rằng sự tuyệt chủng không phải là hoàn toàn. Lựa chọn (D) 'Only mammals' là sai vì nhiều nhóm động vật khác, bao gồm tổ tiên của chim, cũng sống sót."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 questions - Choose the best word/phrase to complete each sentence. No audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "Historical reviews indicate that many ancient presidents were often unnecessarily _______.",
          options: [
            "Assassinate",
            "Assassinates",
            "Assassinated",
            "Assassination"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'Assassinated'.** Câu này sử dụng cấu trúc **bị động (passive voice)** ở thì quá khứ: 'were + past participle'. 'Assassinated' (bị ám sát) là quá khứ phân từ của 'assassinate'. Các lựa chọn khác: (A) 'Assassinate' là động từ nguyên thể, dùng cho chủ động. (B) 'Assassinates' là động từ chia ngôi thứ ba số ít hiện tại. (D) 'Assassination' là danh từ (vụ ám sát). Chỉ có quá khứ phân từ mới đúng sau 'were' để diễn tả hành động bị động trong quá khứ."
        },
        {
          id: 22,
          question: "Among ________ recognized at the history awards ceremony were presidents Lincoln and Kennedy.",
          options: [
            "they",
            "whose",
            "those",
            "who"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'those'.** Đây là cấu trúc **đảo ngữ (inversion)** với 'Among' đứng đầu. 'Those' là đại từ chỉ định, có nghĩa 'những người', thay thế cho 'the people who were recognized'. Cấu trúc đầy đủ: 'Among **those** (who were) recognized... were...' Các lựa chọn khác: (A) 'they' là đại từ nhân xưng, không thể đứng sau giới từ 'Among' mà không có mệnh đề. (B) 'whose' là đại từ quan hệ sở hữu, cần một danh từ theo sau. (D) 'who' là đại từ quan hệ, cần một tiền danh từ (antecedent) đứng trước nó."
        },
        {
          id: 23,
          question: "The Civil War has received much attention _______ it ended over 150 years ago.",
          options: [
            "despite",
            "during",
            "except",
            "since"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'since'.** Câu sử dụng **thì hiện tại hoàn thành** ('has received') để diễn tả sự chú ý kéo dài từ một thời điểm trong quá khứ ('it ended') đến hiện tại. Liên từ 'since' (kể từ khi) được dùng để nối mốc thời gian quá khứ đó. Các lựa chọn khác: (A) 'despite' (mặc dù) chỉ sự tương phản, thường đi với danh từ/V-ing. (B) 'during' (trong suốt) đi với danh từ chỉ khoảng thời gian, không phải mệnh đề. (C) 'except' (ngoại trừ) không phù hợp về nghĩa."
        },
        {
          id: 24,
          question: "All ships like Titanic are made from strong materials and contain no __________ weaknesses.",
          options: [
            "structural",
            "immediate",
            "reasonable",
            "assumed"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'structural'.** Tính từ 'structural' (thuộc về kết cấu) kết hợp với 'weaknesses' (điểm yếu) tạo thành cụm từ 'structural weaknesses' (những điểm yếu về mặt kết cấu), rất phù hợp trong ngữ cảnh nói về vật liệu đóng tàu. Các lựa chọn khác: (B) 'immediate' (ngay lập tức), (C) 'reasonable' (hợp lý), (D) 'assumed' (được giả định) đều không tạo nên sự kết hợp từ tự nhiên hoặc hợp lý với 'weaknesses' trong câu này."
        },
        {
          id: 25,
          question: "The extinction policy states that _______ protecting species enhances biodiversity and focus.",
          options: [
            "regulate",
            "regularity",
            "regularly",
            "regular"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'regular'.** Vị trí trống cần một **tính từ (adjective)** để bổ nghĩa cho cụm danh động từ 'protecting species' (việc bảo vệ các loài). 'Regular protecting' có nghĩa là 'sự bảo vệ thường xuyên/đều đặn'. Các lựa chọn khác: (A) 'regulate' là động từ (điều chỉnh). (B) 'regularity' là danh từ (tính đều đặn). (C) 'regularly' là trạng từ (một cách thường xuyên). Chỉ có tính từ mới có thể đứng trước và bổ nghĩa cho một danh động từ đóng vai trò như danh từ."
        },
        {
          id: 26,
          question: "The new lecture on civil war will begin at 9 a.m. and will _______ an overview of causes.",
          options: [
            "includes",
            "including",
            "included",
            "include"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'include'.** Câu sử dụng **thì tương lai đơn**: 'will + động từ nguyên thể không **to**'. 'Will include' là chính xác. Cấu trúc song song với 'will begin' được nối bằng 'and'. Các lựa chọn khác: (A) 'includes' là động từ hiện tại ngôi thứ ba số ít, không dùng sau 'will'. (B) 'including' là giới từ (bao gồm) hoặc danh động từ. (C) 'included' là quá khứ phân từ, không phải nguyên thể."
        },
        {
          id: 27,
          question: "To ensure safety, all ships must be thoroughly inspected _______ sailing to sea.",
          options: [
            "unless",
            "during",
            "before",
            "between"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'before'.** Giới từ 'before' + V-ing ('sailing') diễn tả một hành động xảy ra **trước** hành động khác. Ngữ cảnh an toàn hàng hải đòi hỏi kiểm tra kỹ lưỡng **trước khi** ra khơi. Các lựa chọn khác: (A) 'unless' (trừ khi) chỉ điều kiện phủ định, làm câu vô nghĩa. (B) 'during' (trong khi) chỉ thời gian đồng thời, không hợp lý vì không thể vừa kiểm tra vừa ra khơi cùng lúc. (D) 'between' (giữa) chỉ vị trí hoặc mối quan hệ giữa hai thứ, không phải trình tự thời gian."
        },
        {
          id: 28,
          question: "The biology department is seeking a researcher who can work _______ on endangered species.",
          options: [
            "dependently",
            "independent",
            "independence",
            "independently"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'independently'.** Sau động từ 'work' cần một **trạng từ (adverb)** để mô tả **cách thức** làm việc. 'Work independently' = làm việc một cách độc lập. Các lựa chọn khác: (A) 'dependently' (một cách phụ thuộc) là trạng từ nhưng nghĩa trái ngược. (B) 'independent' là tính từ, dùng để mô tả danh từ (an independent researcher). (C) 'independence' là danh từ (sự độc lập)."
        },
        {
          id: 29,
          question: "Because of the asteroid, the dinosaur event has been _______ in history.",
          options: [
            "postpones",
            "postponing",
            "postpone",
            "postponed"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'postponed'.** Câu này có ngữ cảnh hơi khó: 'dinosaur event' (sự kiện khủng long) thực chất là sự tuyệt chủng, không thể 'bị hoãn' (postponed). Tuy nhiên, xét về mặt **ngữ pháp**, cấu trúc 'has been + past participle' là thì hiện tại hoàn thành bị động. Trong số các lựa chọn, chỉ 'postponed' là quá khứ phân từ. Trong thực tế, có lẽ từ 'recorded' (được ghi lại) sẽ phù hợp hơn, nhưng dựa vào các đáp án cho sẵn, 'postponed' là lựa chọn ngữ pháp đúng duy nhất. (Lưu ý: Đây có thể là một lỗi về ngữ nghĩa trong đề bài, nhưng bài tập này kiểm tra ngữ pháp)."
        },
        {
          id: 30,
          question: "The professor reminded the students that conservation and teamwork are key factors in maintaining a positive _______.",
          options: [
            "appointment",
            "advertisement",
            "environment",
            "equipment"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'environment'.** 'Positive environment' (môi trường tích cực) là một **collocation** (kết hợp từ) rất phổ biến trong giáo dục, tâm lý và quản lý. Nó chỉ một bầu không khí hỗ trợ và xây dựng. Các lựa chọn khác: (A) 'appointment' (cuộc hẹn), (B) 'advertisement' (quảng cáo), (D) 'equipment' (thiết bị) đều không thể kết hợp với 'positive' và không phù hợp với ngữ cảnh về bảo tồn và làm việc nhóm."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 questions - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: "To: All Biology Department Staff\nFrom: Dr. Elena Rossi, Biology Director\nSubject: Upcoming Lecture on Extinction Tragedies\n\nDear Team,\nAs you all know, we are preparing for the official lecture on extinction tragedies, such as the dinosaurs disappearance, scheduled for early next quarter. In order to ensure a successful presentation, we will begin a series of meetings next week to finalize the discussion strategy. Each team member will be assigned specific responsibilities to (31) smooth coordination between sections.\n\nOur primary objective is to increase awareness of extinction events and attract potential students through both online and offline channels. The media team will focus on digital promotion, while the research team will create visual materials to (32) our educational image.\n\nAdditionally, we will collaborate closely with our guest speakers to collect feedback from attendees. This will help us make any necessary adjustments before the official event. Please note that all suggestions should be submitted to my office no later than Friday, March 22, so that we have enough time to review and (33) them.\n\nThe official conference will take place at our campus on April 5. We expect several major experts to attend, so everyone must be prepared to present our topics in the most professional manner possible. A rehearsal session will be held two days before the event to (34) that all participants are comfortable with their roles.\n\nFor those who are new to the team, we will organize a short orientation program to explain our teaching policies and internal communication procedures. Attendance is highly encouraged, as this session will provide essential information on how to (35) with other departments effectively.\n\nWe truly appreciate everyone’s dedication and teamwork during this busy time. Your hard work and creativity will certainly make this lecture a success. If you have any questions or concerns, please don’t hesitate to (36) me directly.\n\nThank you once again for your continued commitment to excellence. I am confident that, together, we will achieve outstanding results.\nBest regards,\nDr. Elena Rossi\nBiology Director",
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "Each team member will be assigned specific responsibilities to (31) smooth coordination between sections.",
          options: [
            "ensure",
            "remind",
            "suggest",
            "describe"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'ensure'.** Động từ 'ensure' (đảm bảo) thường đi với danh từ như 'coordination' để diễn tả việc đảm bảo sự phối hợp diễn ra suôn sẻ. Trong ngữ cảnh quản lý dự án, đây là từ chuẩn xác. Các lựa chọn khác: (B) 'remind' (nhắc nhở) không đủ mạnh. (C) 'suggest' (đề xuất) không phải mục đích chính của trách nhiệm. (D) 'describe' (mô tả) sai nghĩa hoàn toàn."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "The research team will create visual materials to (32) our educational image.",
          options: [
            "reinforce",
            "improve",
            "prevent",
            "attend"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'reinforce'.** Trong ngữ cảnh xây dựng thương hiệu và hình ảnh, 'reinforce' (củng cố, tăng cường) là từ chính xác để nói về việc làm cho hình ảnh giáo dục trở nên mạnh mẽ và nhất quán hơn thông qua tài liệu trực quan. Các lựa chọn khác: (B) 'improve' (cải thiện) có thể dùng nhưng không chính xác bằng 'reinforce' vì hình ảnh không hẳn là 'cải thiện' mà là 'củng cố'. (C) 'prevent' (ngăn chặn) và (D) 'attend' (tham dự) đều sai nghĩa."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "So that we have enough time to review and (33) them.",
          options: [
            "implement",
            "reject",
            "decline",
            "transfer"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'implement'.** Trong quy trình xử lý đề xuất, sau khi 'review' (xem xét), bước tiếp theo logic là 'implement' (triển khai, thực hiện) các đề xuất hợp lý. Đây là cặp động từ phổ biến. Các lựa chọn khác: (B) 'reject' và (C) 'decline' đều có nghĩa từ chối, trái ngược với mục đích tích cực của việc thu thập ý kiến. (D) 'transfer' (chuyển giao) không phù hợp."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "A rehearsal session will be held to (34) that all participants are comfortable.",
          options: [
            "ensure",
            "require",
            "warn",
            "announce"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'ensure'.** Cấu trúc 'to ensure that + clause' có nghĩa là 'để đảm bảo rằng', diễn tả mục đích của buổi tập dượt. Đây là cách dùng phổ biến để nói về việc đảm bảo một kết quả cụ thể. Các lựa chọn khác: (B) 'require' (yêu cầu), (C) 'warn' (cảnh báo), (D) 'announce' (thông báo) đều không phải mục đích chính của buổi tập."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "Information on how to (35) with other departments effectively.",
          options: [
            "cooperate",
            "complain",
            "compete",
            "compare"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'cooperate'.** 'Cooperate with' (hợp tác với) là cụm động từ chuẩn khi nói về làm việc hiệu quả giữa các phòng ban. Trong bối cảnh tổ chức, hợp tác là kỹ năng quan trọng được nhấn mạnh. Các lựa chọn khác: (B) 'complain' (phàn nàn) mang nghĩa tiêu cực. (C) 'compete' (cạnh tranh) thường không được khuyến khích trong nội bộ. (D) 'compare' (so sánh) không phù hợp với mục đích làm việc hiệu quả."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "Please don’t hesitate to (36) me directly.",
          options: [
            "reach",
            "push",
            "ignore",
            "delay"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'reach'.** Trong văn viết email trang trọng, 'reach me directly' hoặc 'reach out to me' là cách diễn đạt phổ biến để mời liên hệ. Đây là một collocation tự nhiên. Các lựa chọn khác: (B) 'push' (thúc ép), (C) 'ignore' (phớt lờ), (D) 'delay' (trì hoãn) đều có nghĩa tiêu cực hoặc không phù hợp trong ngữ cảnh này."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - The lecture on dinosaurs will most likely be held (37).",
          options: [
            "next week",
            "by the end of the year",
            "early next quarter",
            "after the conference"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'early next quarter'.** Thông tin được nêu rõ trong câu đầu tiên của email: '...the official lecture... **scheduled for early next quarter**.' Các lựa chọn khác: (A) 'next week' là thời gian bắt đầu các cuộc họp, không phải bài giảng. (B) và (D) không được đề cập hoặc không chính xác."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the main purpose of this message?",
          options: [
            "To inform staff of lecture preparations",
            "To request attendee feedback after the event",
            "To announce the cancellation of a session",
            "To introduce a new teaching policy"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'To inform staff of lecture preparations'.** Toàn bộ nội dung email xoay quanh việc chuẩn bị cho bài giảng: lên kế hoạch họp, phân công nhiệm vụ, tạo tài liệu, tổ chức tập dượt, v.v. Mục đích chính là thông báo và điều phối công việc chuẩn bị. Các lựa chọn khác: (B) Phản hồi từ người tham dự chỉ là một phần nhỏ của quá trình chuẩn bị. (C) Không có thông tin hủy bỏ. (D) Chính sách giảng dạy chỉ được nhắc đến như một phần của buổi định hướng, không phải mục đích chính."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - Who is the sender of this message?",
          options: [
            "The chief academic officer",
            "The biology director",
            "A guest speaker",
            "A research manager"
          ],
          correct: 1,
          explanation: "Đáp án đúng là **(B) 'The biology director'.** Phần tiêu đề email ghi rõ: 'From: Dr. Elena Rossi, **Biology Director**'. Đây là thông tin trực tiếp và rõ ràng về danh tính và chức vụ của người gửi."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - When will the rehearsal for the conference take place?",
          options: [
            "April 5",
            "March 22",
            "April 3",
            "The following week"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'April 3'.** Email nêu: 'The official conference will take place... on **April 5**... A rehearsal session will be held **two days before the event**.' Do đó, ngày tập dượt là: 5 tháng 4 - 2 ngày = **3 tháng 4**. Các lựa chọn khác: (A) là ngày diễn ra hội nghị. (B) là hạn nộp đề xuất. (D) quá mơ hồ."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 questions - Read the magazine advertisement and e-mail. Choose the best answer (A, B, C, D).",
      type: "reading",
      text: "http://www.historyaudiopro.com\n\n**History Audio Pro**\n\nEnhance Your Learning with Professionally Recorded Historical Lectures\n\nA professional, personalized audio lecture creates an excellent learning impression. History Audio Pro meets your specifications to record a customized historical greeting within three business days!\n\n**Services We Offer:**\n1. **Professional Voice Talent for Lecture Messages** – We have numerous voice actors. Visit historyaudiopro.com to hear examples.\n2. **On-Hold Messages** – Professional on-hold messages.\n3. **Customized Script Writing** – Craft personalized messages.\n4. **Multilingual Voice Production** – Services in multiple languages.\n\nSend e-mail to inquiry@historyaudiopro.com. A representative will call within 24 hours.\n\nTo: inquiry@historyaudiopro.com\nFrom: j.annesly@historydata.com\nDate: June 25\nSubject: Request\n\nI found your notice in the newspaper and wish to use your services for my history-processing business. I am looking for a professionally recorded lecture greeting, and wonder if you would write and record this, and how soon. Since I work with English- and Spanish-speaking clients, I would like the message in both languages. Please reach out at my mobile between 10:00 A.M. and 5:00 P.M.\n\nThank you,\nJody Annesly\nHistory Data\n512-555-6879\n342 Maymill Road, Fort Worth, TX 70609",
      questions: [
        {
          id: 41,
          question: "According to the advertisement, why should customers visit the History Audio Pro Web site?",
          options: [
            "To add a new subscription number",
            "To submit a credit card payment",
            "To request recording equipment",
            "To hear lecture samples"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'To hear lecture samples'.** Quảng cáo ghi rõ trong phần mô tả dịch vụ đầu tiên: '**Visit historyaudiopro.com to hear examples.**' Mục đích duy nhất được nêu cho việc truy cập website là để nghe các mẫu giọng đọc của diễn viên lồng tiếng. Các lựa chọn khác đều là các hành động không được đề cập đến trong quảng cáo."
        },
        {
          id: 42,
          question: "What is suggested about History Audio Pro?",
          options: [
            "It has recently expanded its business.",
            "It fills orders once a week.",
            "It advertises in the newspaper.",
            "It specializes in historical lectures."
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'It advertises in the newspaper.'** Thông tin này được **suy ra (inferred)** từ email của khách hàng, Ms. Annesly: 'I found **your notice in the newspaper**.' Việc cô ấy tìm thấy thông báo của công ty trên báo chí cho thấy History Audio Pro có sử dụng phương tiện quảng cáo này. Các lựa chọn khác không có thông tin trong văn bản để hỗ trợ."
        },
        {
          id: 43,
          question: "Who most likely is Ms. Annesly?",
          options: [
            "An actor",
            "A script writer",
            "A sales associate",
            "A history teacher"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'A history teacher'** hoặc một chuyên gia trong lĩnh vực lịch sử. Cô ấy viết email từ địa chỉ '@historydata.com' và nói về 'my **history-processing business**'. Cô ấy muốn một 'professionally recorded **lecture greeting**' (lời chào bài giảng) cho khách hàng song ngữ, điều này phù hợp với vai trò của một nhà giáo dục hoặc người cung cấp dịch vụ liên quan đến lịch sử. Các lựa chọn khác không phù hợp vì cô ấy là khách hàng tìm kiếm dịch vụ, không phải người cung cấp dịch vụ (actor, script writer) hay nhân viên bán hàng."
        },
        {
          id: 44,
          question: "What service does Ms. Annesly NOT request from History Audio Pro?",
          options: [
            "Professional voice talent",
            "Customized script writing",
            "On-hold messages",
            "Multilingual audio production"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'On-hold messages'.** Quảng cáo liệt kê 4 dịch vụ. Trong email, Ms. Annesly yêu cầu cụ thể: 1) 'professionally recorded lecture greeting' (dịch vụ voice talent), 2) hỏi 'if you would **write** and record this' (dịch vụ script writing), và 3) 'message in both languages' (dịch vụ multilingual production). Cô ấy **không hề đề cập** đến việc cần 'on-hold messages' (tin nhắn chờ điện thoại)."
        },
        {
          id: 45,
          question: "What will Ms. Annesly most likely do within 24 hours?",
          options: [
            "Meet with an actor",
            "Visit a recording studio",
            "Speak with a representative",
            "Write a script"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'Speak with a representative'.** Quảng cáo hứa hẹn: 'A **representative will call you within 24 hours**.' Vì Ms. Annesly vừa gửi email yêu cầu, cô ấy có thể mong đợi một cuộc gọi từ đại diện công ty trong vòng 24 giờ tới. Các lựa chọn khác đều là hành động có thể xảy ra sau cuộc gọi này."
        },
        {
          id: 46,
          question: "According to the advertisement, History Audio Pro will respond to customer inquiries within",
          options: [
            "48 hours",
            "12 hours",
            "three business days",
            "24 hours"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) '24 hours'.** Quảng cáo nêu rõ: 'A representative will call you **within 24 hours**.' Đây là thời gian phản hồi cho **liên hệ ban đầu**. Lưu ý phân biệt với 'three business days' - là thời gian để **hoàn thành việc ghi âm**, không phải phản hồi yêu cầu."
        },
        {
          id: 47,
          question: "What can be inferred about History Audio Pro’s services?",
          options: [
            "They are available only on weekends.",
            "They are limited to English-speaking clients.",
            "They can accommodate different languages.",
            "They require customers to visit the office in person."
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'They can accommodate different languages.'** Điều này được **suy ra** từ dịch vụ thứ 4 trong quảng cáo: '**Multilingual Voice Production** – Services in multiple languages.' Hơn nữa, yêu cầu của Ms. Annesly về bản ghi âm song ngữ (Anh-Tây Ban Nha) càng khẳng định khả năng này. Các lựa chọn khác trái ngược với thông tin trong quảng cáo."
        },
        {
          id: 48,
          question: "What does Ms. Annesly specifically request in her message?",
          options: [
            "A sample of recorded music",
            "A newspaper advertisement",
            "A bilingual lecture recording",
            "A refund for a previous order"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'A bilingual lecture recording'.** Ms. Annesly viết: 'Since I work with English- and Spanish-speaking clients, I would like the message **in both languages**.' 'Bilingual' có nghĩa là sử dụng hai ngôn ngữ. Các lựa chọn khác: (A) Cô ấy muốn 'lecture greeting', không phải nhạc. (B) Cô ấy tìm thấy quảng cáo trên báo, không yêu cầu cái mới. (D) Không có đề cập về đơn hàng trước."
        },
        {
          id: 49,
          question: "What detail does Ms. Annesly include to make communication easier?",
          options: [
            "Her company’s website link",
            "Her client list",
            "Her preferred calling hours",
            "Her office address"
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'Her preferred calling hours'.** Trong email, cô ấy chỉ định: 'Please reach out at my mobile **between 10:00 A.M. and 5:00 P.M.**' Điều này giúp đại diện công ty biết khung giờ thuận tiện để gọi điện, làm cho quá trình giao tiếp hiệu quả hơn. Các thông tin khác có trong chữ ký nhưng không phải chi tiết đặc biệt để 'make communication easier'."
        },
        {
          id: 50,
          question: "What is the likely next step for History Audio Pro?",
          options: [
            "Calling Ms. Annesly to discuss her project and pricing",
            "Posting a new advertisement in the newspaper",
            "Sending Ms. Annesly a contract to sign",
            "Visiting Ms. Annesly’s office for recording"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Calling Ms. Annesly to discuss her project and pricing'.** Dựa trên quy trình được nêu trong quảng cáo: 'A representative will call you within 24 hours to **discuss your project and provide a price estimate**.' Đây là bước tiếp theo logic sau khi nhận được email yêu cầu. Các bước khác có thể xảy ra sau cuộc gọi này."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 questions - Read the text message chain about a trip to a historical site. Choose the best answer (A, B, C, D).",
      type: "reading",
      text: "SAM BACH (11:59): My first flight was delayed, so I missed my connection in Beijing.\nSAM BACH(12:00):So now, I'm going to be on a flight arriving in Naples at 18:00.\n\nAKIRA OTANI (12:05): OK. Same airline?\n\nSAM BACH (12:06): It's still Fly Right Airlines. It will be later in the day but still in time for our client meeting.\n\nAKIRA OTANI (12:06): I'll confirm the arrival time. Do you have any checked bags?\n\nSAM BACH (12:10): I do. Would you mind meeting me at the door after I go through customs?\n\nAKIRA OTANI (12:15): Sure thing. Parking spots can be hard to find, but now I'll have extra time to drive around and look.\n\nSAM BACH (12:16): Yes, sorry about that. See you then!",
      questions: [
        {
          id: 51,
          question: "What is suggested about Mr. Bach?",
          options: [
            "He currently works in Naples.",
            "He works for Fly Right Airlines.",
            "He is on a business trip.",
            "He has been to Pompeii more than once."
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'He is on a business trip.'** Bằng chứng rõ ràng từ tin nhắn của Mr. Bach: 'It will be later... but still in time for **our client meeting**.' Cụm 'client meeting' (cuộc họp với khách hàng) chỉ ra mục đích chuyến đi là công tác. Các lựa chọn khác: (A) Anh ấy đang đến Naples, không nhất thiết làm việc ở đó. (B) Anh ấy bay với hãng Fly Right Airlines, không có bằng chứng làm việc cho họ. (D) Không có thông tin về số lần đến Pompeii."
        },
        {
          id: 52,
          question: "At 12:15, what does Mr. Otani mean when he writes, “Sure thing”?",
          options: [
            "He is certain he will be able to find a parking place.",
            "He agrees to wait at the door near the customs area.",
            "He has confirmed the arrival time of a flight.",
            "He knows Mr. Bach must pass through customs."
          ],
          correct: 1,
          explanation: "Đáp án đúng là **(B) 'He agrees to wait at the door near the customs area.'** 'Sure thing' là cách nói thân mật để đồng ý với một yêu cầu. Yêu cầu trực tiếp trước đó của Mr. Bach là: 'Would you mind **meeting me at the door after I go through customs?**' Do đó, 'Sure thing' là sự đồng ý đáp lại yêu cầu đó. Các lựa chọn khác tuy đúng về mặt thông tin nhưng không phải là ý chính của cụm từ 'Sure thing' trong ngữ cảnh này."
        },
        {
          id: 53,
          question: "Why was Mr. Bach’s flight delayed?",
          options: [
            "The airline changed the departure time.",
            "He forgot to check in early.",
            "He missed his connection in Beijing.",
            "There was bad weather in Naples."
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'He missed his connection in Beijing.'** Tuy nhiên, đọc kỹ tin nhắn đầu tiên: 'My **first flight was delayed**, so I missed my connection in Beijing.' Nguyên nhân gốc là chuyến bay đầu bị trễ (delayed), dẫn đến hệ quả là bỏ lỡ chuyến kết nối. Trong các lựa chọn, (C) mô tả hệ quả trực tiếp, nhưng cũng là lý do khiến anh ấy phải đổi sang chuyến bay muộn hơn. Các lựa chọn khác không được đề cập."
        },
        {
          id: 54,
          question: "What time is Mr. Bach’s new flight expected to arrive?",
          options: [
            "20:15",
            "12:06",
            "11:59",
            "18:00"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) '18:00'.** Thông tin được nêu rõ trong tin nhắn của Mr. Bach lúc 12:00: 'I'm going to be on a flight **arriving in Naples at 18:00**.' Các lựa chọn khác là thời gian gửi tin nhắn hoặc không có trong bài."
        },
        {
          id: 55,
          question: "What does Mr. Otani offer to do for Mr. Bach?",
          options: [
            "Pick him up at the airport",
            "Drive him to the hotel",
            "Change his flight booking",
            "Help carry his luggage"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Pick him up at the airport.'** Khi Mr. Bach hỏi 'Would you mind meeting me at the door after I go through customs?' và Mr. Otani đồng ý ('Sure thing'), điều này ngụ ý rằng Mr. Otani sẽ đến sân bay để gặp (đón) Mr. Bach. 'Pick him up' là cách diễn đạt phù hợp. Các lựa chọn khác không được đề nghị."
        },
        {
          id: 56,
          question: "What can be inferred about the two men?",
          options: [
            "They have never met before.",
            "They are family members traveling together.",
            "They are colleagues attending the same meeting.",
            "They both work for Fly Right Airlines."
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'They are colleagues attending the same meeting.'** Có hai bằng chứng: 1) Mr. Bach nói 'our client meeting' (cuộc họp khách hàng của **chúng ta**), cho thấy cả hai đều liên quan. 2) Mr. Otani sẵn sàng đi đón Mr. Bach, một hành động thường thấy giữa đồng nghiệp. Các lựa chọn khác: (A) Họ dường như đã quen biết. (B) Không có dấu hiệu cho thấy họ là người thân. (D) Chỉ Mr. Bach bay với Fly Right Airlines."
        },
        {
          id: 57,
          question: "At 12:06, why does Mr. Bach mention “still in time for our client meeting”?",
          options: [
            "To cancel his attendance",
            "To apologize for missing the meeting",
            "To ask about the meeting location",
            "To confirm he will not be late"
          ],
          correct: 3,
          explanation: "Đáp án đúng là **(D) 'To confirm he will not be late.'** Mặc dù chuyến bay mới đến muộn hơn (18:00), Mr. Bach muốn trấn an Mr. Otani rằng anh ấy vẫn sẽ **'still in time'** (vẫn kịp giờ) cho cuộc họp. Đây là cách thể hiện sự đảm bảo và trách nhiệm, giảm bớt lo lắng cho đối phương."
        },
        {
          id: 58,
          question: "What does Mr. Otani mean when he writes, “I’ll confirm the arrival time”?",
          options: [
            "He will book another ticket for Mr. Bach.",
            "He will change the meeting time.",
            "He plans to check the airline’s schedule.",
            "He needs to contact the travel agent."
          ],
          correct: 2,
          explanation: "Đáp án đúng là **(C) 'He plans to check the airline’s schedule.'** 'Confirm the arrival time' có nghĩa là xác minh, kiểm tra lại giờ đến chính xác từ nguồn thông tin của hãng hàng không (website, ứng dụng) để chắc chắn rằng chuyến bay thực sự sẽ đến lúc 18:00 và không có thay đổi nào khác. Đây là một hành động thận trọng trước khi đi đón."
        },
        {
          id: 59,
          question: "What is implied about Mr. Otani’s travel to the airport?",
          options: [
            "He works at the airport.",
            "He expects heavy traffic or limited parking.",
            "He plans to take public transportation.",
            "He has never been to Naples Airport before."
          ],
          correct: 1,
          explanation: "Đáp án đúng là **(B) 'He expects heavy traffic or limited parking.'** Mr. Otani nói: '**Parking spots can be hard to find**, but now I'll have extra time to drive around and look.' Câu này ngụ ý rằng sân bay Naples thường khó tìm chỗ đậu xe (có thể do đông đúc). Việc chuyến bay đến muộn cho anh ấy thêm thời gian để xoay xở. Các lựa chọn khác không được suy ra từ thông tin có sẵn."
        },
        {
          id: 60,
          question: "What does Mr. Bach express in his final message?",
          options: [
            "Thanks for the help",
            "Frustration with the airline",
            "Request for flight confirmation",
            "Regret about missing the meeting"
          ],
          correct: 0,
          explanation: "Đáp án đúng là **(A) 'Thanks for the help'.** Mặc dù không nói trực tiếp 'thank you', thông điệp cuối cùng của Mr. Bach: 'Yes, **sorry about that**. See you then!' bao hàm lời xin lỗi vì sự bất tiện (chuyến bay trễ, khiến Mr. Otani phải chờ và khó tìm chỗ đậu) và lòng biết ơn ngầm hiểu cho sự giúp đỡ. Trong giao tiếp, 'sorry about that' trong ngữ cảnh này thường hàm chứa cảm ơn. Các lựa chọn khác không được thể hiện trực tiếp."
        }
      ]
    }
  }
};
</file>

<file path="src/data/grammarData.js">
// grammarData.js - Complete Grammar Learning Data for HUFLIT (with English and Vietnamese translations)
export const GRAMMAR_DATA = {
  // ===== BEGINNER LEVEL =====
  beginner: {
    level: 'Beginner',
    description: 'Foundation grammar topics for beginners (Nền tảng ngữ pháp cho người mới bắt đầu)',
    topics: {
      // Topic 1: Present Simple
      presentSimple: {
        id: 'present_simple',
        title: 'Present Simple Tense (Thì Hiện Tại Đơn)',
        difficulty: 'Beginner',
        icon: '⏰',
        description: 'Learn how to form and use the simple present tense (Học cách hình thành và sử dụng thì hiện tại đơn)',
        lessons: [
          {
            lessonId: 'ps_001',
            title: 'Introduction to Present Simple (Giới thiệu Thì Hiện Tại Đơn)',
            duration: '8 mins',
            content: `
**English:**
The Present Simple tense is used to:
- Describe habits and routines
- State facts and truths
- Express regular actions

Affirmative form: Subject + Base verb (+ s/es)
Example: I play football. She plays football.

Negative form: Subject + do/does + not + Base verb
Example: I don't play football. She doesn't play football.

Question form: Do/Does + Subject + Base verb?
Example: Do you play football? Does she play football?

**Vietnamese Translation (Dịch Tiếng Việt):**
Thì Hiện Tại Đơn được sử dụng để:
- Mô tả thói quen và hoạt động hàng ngày
- Nêu sự thật và chân lý
- Bày tỏ hành động thường xuyên

Cấu trúc khẳng định: Chủ ngữ + Động từ nguyên thể (+ s/es)
Ví dụ: I play football (Tôi chơi bóng đá). She plays football (Cô ấy chơi bóng đá).

Cấu trúc phủ định: Chủ ngữ + do/does + not + Động từ nguyên thể
Ví dụ: I don't play football (Tôi không chơi bóng đá). She doesn't play football (Cô ấy không chơi bóng đá).

Cấu trúc câu hỏi: Do/Does + Chủ ngữ + Động từ nguyên thể?
Ví dụ: Do you play football? (Bạn có chơi bóng đá không?) Does she play football? (Cô ấy có chơi bóng đá không?)
            `,
            examples: [
              { 
                example: 'I wake up at 7 AM every day.', 
                explanation: 'Regular daily habit (Thói quen hàng ngày đều đặn)',
                vietnamese: {
                  example: 'Tôi thức dậy lúc 7 giờ sáng mỗi ngày.',
                  explanation: 'Thói quen hàng ngày đều đặn'
                }
              },
              { 
                example: 'She works in a bank.', 
                explanation: 'Current occupation (Nghề nghiệp hiện tại)',
                vietnamese: {
                  example: 'Cô ấy làm việc trong ngân hàng.',
                  explanation: 'Nghề nghiệp hiện tại'
                }
              },
              { 
                example: 'Water boils at 100°C.', 
                explanation: 'Scientific fact (Sự thật khoa học)',
                vietnamese: {
                  example: 'Nước sôi ở 100°C.',
                  explanation: 'Sự thật khoa học'
                }
              },
              { 
                example: 'They go to school on weekdays.', 
                explanation: 'Routine activity (Hoạt động thường xuyên)',
                vietnamese: {
                  example: 'Họ đi học vào các ngày trong tuần.',
                  explanation: 'Hoạt động thường xuyên'
                }
              },
            ],
          },
          {
            lessonId: 'ps_002',
            title: 'Present Simple - Affirmative & Negative (Thì Hiện Tại Đơn - Khẳng Định & Phủ Định)',
            duration: '10 mins',
            content: `
**English:**
Rules for adding -s or -es:

1. Regular verbs: Add -s
   play → plays, work → works

2. Verbs ending in -ch, -sh, -x, -z, -o: Add -es
   watch → watches, push → pushes, go → goes

3. Verbs ending in consonant + y: Change y to i, add -es
   study → studies, cry → cries

Common irregular verbs:
be → is/am/are
have → has
do → does
go → goes

**Vietnamese Translation (Dịch Tiếng Việt):**
Quy tắc thêm -s hoặc -es:

1. Động từ thông thường: Thêm -s
   play → plays, work → works

2. Động từ kết thúc bằng -ch, -sh, -x, -z, -o: Thêm -es
   watch → watches, push → pushes, go → goes

3. Động từ kết thúc bằng phụ âm + y: Đổi y thành i, thêm -es
   study → studies, cry → cries

Các động từ bất quy tắc phổ biến:
be → is/am/are
have → has
do → does
go → goes
            `,
            examples: [
              { 
                example: 'She studies French.', 
                explanation: 'consonant + y → ies (phụ âm + y → ies)',
                vietnamese: {
                  example: 'Cô ấy học tiếng Pháp.',
                  explanation: 'phụ âm + y → ies'
                }
              },
              { 
                example: 'He watches TV.', 
                explanation: 'ends in -ch → add -es (kết thúc bằng -ch → thêm -es)',
                vietnamese: {
                  example: 'Anh ấy xem TV.',
                  explanation: 'kết thúc bằng -ch → thêm -es'
                }
              },
              { 
                example: 'I don\'t like spicy food.', 
                explanation: 'Negative: don\'t + base verb (Phủ định: don\'t + động từ nguyên thể)',
                vietnamese: {
                  example: 'Tôi không thích thức ăn cay.',
                  explanation: 'Phủ định: don\'t + động từ nguyên thể'
                }
              },
              { 
                example: 'They don\'t work on Sundays.', 
                explanation: 'Plural negative (Phủ định số nhiều)',
                vietnamese: {
                  example: 'Họ không làm việc vào Chủ Nhật.',
                  explanation: 'Phủ định số nhiều'
                }
              },
            ],
          },
          {
            lessonId: 'ps_003',
            title: 'Present Simple - Questions (Thì Hiện Tại Đơn - Câu Hỏi)',
            duration: '9 mins',
            content: `
**English:**
Question Formation:

With do/does:
Do you like coffee? → Yes, I do. / No, I don't.
Does he like coffee? → Yes, he does. / No, he doesn't.

Question words:
What do you do? - What is your occupation?
Where do you live? - Where is your home?
Why does she study? - For what reason?
How often do they visit? - Frequency of visits
Who plays football? - Which person?

**Vietnamese Translation (Dịch Tiếng Việt):**
Hình thành câu hỏi:

Với do/does:
Do you like coffee? → Yes, I do. / No, I don't. (Bạn có thích cà phê không? → Có, tôi thích. / Không, tôi không thích.)
Does he like coffee? → Yes, he does. / No, he doesn't. (Anh ấy có thích cà phê không? → Có, anh ấy thích. / Không, anh ấy không thích.)

Từ hỏi:
What do you do? - What is your occupation? (Bạn làm nghề gì?)
Where do you live? - Where is your home? (Bạn sống ở đâu?)
Why does she study? - For what reason? (Tại sao cô ấy học? - Vì lý do gì?)
How often do they visit? - Frequency of visits (Họ thăm bao lâu một lần? - Tần suất thăm viếng)
Who plays football? - Which person? (Ai chơi bóng đá? - Người nào?)
            `,
            examples: [
              { 
                example: 'Do they play tennis?', 
                explanation: 'Yes/No question with do (Câu hỏi Yes/No với do)',
                vietnamese: {
                  example: 'Họ có chơi tennis không?',
                  explanation: 'Câu hỏi Yes/No với do'
                }
              },
              { 
                example: 'Does your mother cook?', 
                explanation: 'Yes/No question with does (Câu hỏi Yes/No với does)',
                vietnamese: {
                  example: 'Mẹ bạn có nấu ăn không?',
                  explanation: 'Câu hỏi Yes/No với does'
                }
              },
              { 
                example: 'What time do you wake up?', 
                explanation: 'Information question (Câu hỏi thông tin)',
                vietnamese: {
                  example: 'Bạn thức dậy lúc mấy giờ?',
                  explanation: 'Câu hỏi thông tin'
                }
              },
              { 
                example: 'How often does she exercise?', 
                explanation: 'Frequency question (Câu hỏi tần suất)',
                vietnamese: {
                  example: 'Cô ấy tập thể dục bao lâu một lần?',
                  explanation: 'Câu hỏi tần suất'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'ps_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'I _____ to school every day. (Tôi _____ đến trường mỗi ngày.)',
            options: [
              { text: 'go', isCorrect: true, explanation: 'Base verb form for first person (Dạng động từ nguyên thể cho ngôi thứ nhất)' },
              { text: 'goes', isCorrect: false, explanation: 'Used only with third person singular (he/she/it) (Chỉ dùng với ngôi thứ ba số ít (he/she/it))' },
              { text: 'going', isCorrect: false, explanation: 'This is present progressive, not present simple (Đây là thì hiện tại tiếp diễn, không phải hiện tại đơn)' },
              { text: 'am go', isCorrect: false, explanation: 'Incorrect grammar (Ngữ pháp sai)' },
            ],
          },
          {
            exerciseId: 'ps_ex_002',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'She _____ like vegetables. (Cô ấy _____ thích rau củ.)',
            options: [
              { text: 'does not', isCorrect: true, explanation: 'Correct negative form (Dạng phủ định đúng)' },
              { text: 'do not', isCorrect: false, explanation: 'Used with plural subjects (Dùng với chủ ngữ số nhiều)' },
              { text: 'not like', isCorrect: false, explanation: 'Incomplete negative (Phủ định không hoàn chỉnh)' },
              { text: 'is not', isCorrect: false, explanation: 'Wrong auxiliary verb (Trợ động từ sai)' },
            ],
          },
          {
            exerciseId: 'ps_ex_003',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'My brother _____ (work) in a hospital. (Anh trai tôi _____ (làm việc) trong bệnh viện.)',
            correctAnswer: 'works',
            hints: ['Think about third person singular (Nghĩ về ngôi thứ ba số ít)', 'Add -s to the verb (Thêm -s vào động từ)'],
            explanation: 'With third person singular subject (he/she/it), add -s to the base verb (Với chủ ngữ ngôi thứ ba số ít (he/she/it), thêm -s vào động từ nguyên thể)',
          },
          {
            exerciseId: 'ps_ex_004',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'What time _____ you finish work? (Bạn _____ tan sở lúc mấy giờ?)',
            options: [
              { text: 'do', isCorrect: true, explanation: 'Question form with do (Dạng câu hỏi với do)' },
              { text: 'does', isCorrect: false, explanation: 'Does is used with he/she/it (Does dùng với he/she/it)' },
              { text: 'are', isCorrect: false, explanation: 'Wrong auxiliary (Trợ động từ sai)' },
              { text: 'will', isCorrect: false, explanation: 'This is for future tense (Đây là cho thì tương lai)' },
            ],
          },
          {
            exerciseId: 'ps_ex_005',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'They _____ (not/watch) TV during dinner. (Họ _____ (không xem) TV trong bữa tối.)',
            correctAnswer: 'don\'t watch',
            hints: ['Use do/does for negative (Sử dụng do/does cho phủ định)', 'Remember plural subjects use do (Nhớ chủ ngữ số nhiều dùng do)'],
            explanation: 'Plural subjects use "don\'t" + base verb in negative form (Chủ ngữ số nhiều dùng "don\'t" + động từ nguyên thể trong dạng phủ định)',
          },
        ],
        vocabulary: [
          { 
            word: 'habit', 
            meaning: 'A regular or repeated behavior (Hành vi thường xuyên hoặc lặp lại)', 
            example: 'Reading is my daily habit. (Đọc sách là thói quen hàng ngày của tôi.)' 
          },
          { 
            word: 'routine', 
            meaning: 'A set of regular activities (Bộ các hoạt động thường xuyên)', 
            example: 'Morning routine includes breakfast. (Thói quen buổi sáng bao gồm ăn sáng.)' 
          },
          { 
            word: 'frequency', 
            meaning: 'How often something happens (Tần suất xảy ra điều gì đó)', 
            example: 'How is the frequency of your exercise? (Tần suất tập thể dục của bạn như thế nào?)' 
          },
          { 
            word: 'occur', 
            meaning: 'To happen (Xảy ra)', 
            example: 'This problem occurs frequently. (Vấn đề này xảy ra thường xuyên.)' 
          },
        ],
      },

      // Topic 2: Present Continuous
      presentContinuous: {
        id: 'present_continuous',
        title: 'Present Continuous Tense (Thì Hiện Tại Tiếp Diễn)',
        difficulty: 'Beginner',
        icon: '🔄',
        description: 'Learn actions happening right now (Học hành động đang xảy ra ngay bây giờ)',
        lessons: [
          {
            lessonId: 'pc_001',
            title: 'Introduction to Present Continuous (Giới thiệu Thì Hiện Tại Tiếp Diễn)',
            duration: '8 mins',
            content: `
**English:**
The Present Continuous (Present Progressive) is used for:
- Actions happening RIGHT NOW
- Temporary situations
- Actions in progress

Form: Subject + am/is/are + verb-ing

I am reading
You are reading
He/She/It is reading
We are reading
They are reading

Negative: Subject + am/is/are + NOT + verb-ing
Question: Am/Is/Are + Subject + verb-ing?

**Vietnamese Translation (Dịch Tiếng Việt):**
Thì Hiện Tại Tiếp Diễn (Hiện Tại Tiếp Diễn) được sử dụng để:
- Hành động đang xảy ra NGAY BÂY GIỜ
- Tình huống tạm thời
- Hành động đang diễn ra

Cấu trúc: Chủ ngữ + am/is/are + verb-ing

I am reading (Tôi đang đọc)
You are reading (Bạn đang đọc)
He/She/It is reading (Anh ấy/Cô ấy/Nó đang đọc)
We are reading (Chúng tôi đang đọc)
They are reading (Họ đang đọc)

Phủ định: Chủ ngữ + am/is/are + NOT + verb-ing
Câu hỏi: Am/Is/Are + Chủ ngữ + verb-ing?
            `,
            examples: [
              { 
                example: 'I am studying English right now.', 
                explanation: 'Action in progress now (Hành động đang diễn ra ngay bây giờ)',
                vietnamese: {
                  example: 'Tôi đang học tiếng Anh ngay bây giờ.',
                  explanation: 'Hành động đang diễn ra ngay bây giờ'
                }
              },
              { 
                example: 'She is playing tennis at the moment.', 
                explanation: 'Happening currently (Đang xảy ra hiện tại)',
                vietnamese: {
                  example: 'Cô ấy đang chơi tennis lúc này.',
                  explanation: 'Đang xảy ra hiện tại'
                }
              },
              { 
                example: 'They are not watching the movie.', 
                explanation: 'Negative form (Dạng phủ định)',
                vietnamese: {
                  example: 'Họ không đang xem phim.',
                  explanation: 'Dạng phủ định'
                }
              },
              { 
                example: 'Is he sleeping?', 
                explanation: 'Question form (Dạng câu hỏi)',
                vietnamese: {
                  example: 'Anh ấy có đang ngủ không?',
                  explanation: 'Dạng câu hỏi'
                }
              },
            ],
          },
          {
            lessonId: 'pc_002',
            title: 'Verb-ing Forms & Spelling Rules (Dạng Verb-ing & Quy Tắc Chính Tả)',
            duration: '10 mins',
            content: `
**English:**
Spelling rules for -ing:

1. Regular: Add -ing
   play → playing, read → reading

2. Verb ends in -e: Remove -e, add -ing
   dance → dancing, write → writing

3. Verb ends in consonant + vowel + consonant (CVC):
   Double the consonant, add -ing
   run → running, sit → sitting
   Exception: Single syllable only if stressed

4. Verb ends in -ie: Change to -ying
   lie → lying, die → dying

**Vietnamese Translation (Dịch Tiếng Việt):**
Quy tắc chính tả cho -ing:

1. Thông thường: Thêm -ing
   play → playing, read → reading

2. Kết thúc bằng -e: Bỏ -e, thêm -ing
   dance → dancing, write → writing

3. Kết thúc bằng phụ âm + nguyên âm + phụ âm (CVC):
   Nhân đôi phụ âm cuối, thêm -ing
   run → running, sit → sitting
   Ngoại lệ: Chỉ âm tiết đơn nếu nhấn mạnh

4. Kết thúc bằng -ie: Đổi thành -ying
   lie → lying, die → dying
            `,
            examples: [
              { 
                example: 'run → running', 
                explanation: 'Double consonant rule (CVC) (Quy tắc nhân đôi phụ âm (CVC))',
                vietnamese: {
                  example: 'run → running',
                  explanation: 'Quy tắc nhân đôi phụ âm (CVC)'
                }
              },
              { 
                example: 'make → making', 
                explanation: 'Remove silent e (Bỏ e câm)',
                vietnamese: {
                  example: 'make → making',
                  explanation: 'Bỏ e câm'
                }
              },
              { 
                example: 'work → working', 
                explanation: 'No doubling needed (Không cần nhân đôi)',
                vietnamese: {
                  example: 'work → working',
                  explanation: 'Không cần nhân đôi'
                }
              },
              { 
                example: 'swim → swimming', 
                explanation: 'Double m rule (Quy tắc nhân đôi m)',
                vietnamese: {
                  example: 'swim → swimming',
                  explanation: 'Quy tắc nhân đôi m'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'pc_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'She _____ TV right now. (Cô ấy _____ TV ngay bây giờ.)',
            options: [
              { text: 'is watching', isCorrect: true, explanation: 'Correct present continuous form (Dạng thì hiện tại tiếp diễn đúng)' },
              { text: 'watches', isCorrect: false, explanation: 'This is simple present (Đây là thì hiện tại đơn)' },
              { text: 'is watch', isCorrect: false, explanation: 'Missing -ing (Thiếu -ing)' },
              { text: 'are watching', isCorrect: false, explanation: 'Wrong form of be (Dạng be sai)' },
            ],
          },
          {
            exerciseId: 'pc_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'They are _____ (swim) in the pool. (Họ đang _____ (bơi) trong hồ bơi.)',
            correctAnswer: 'swimming',
            hints: ['Remember the CVC rule (Nhớ quy tắc CVC)', 'Double the m (Nhân đôi m)'],
            explanation: 'swim → swimming (double the final consonant before adding -ing) (swim → swimming (nhân đôi phụ âm cuối trước khi thêm -ing))',
          },
        ],
        vocabulary: [
          { 
            word: 'temporary', 
            meaning: 'Lasting for a short time (Kéo dài trong thời gian ngắn)', 
            example: 'This is a temporary job. (Đây là công việc tạm thời.)' 
          },
          { 
            word: 'progress', 
            meaning: 'Movement towards completion (Sự tiến bộ hướng tới hoàn thành)', 
            example: 'Work in progress. (Công việc đang tiến hành.)' 
          },
        ],
      },

// Topic 3: Past Simple - Complete Definition
      pastSimple: {
        id: 'past_simple',
        title: 'Past Simple Tense (Thì Quá Khứ Đơn)',
        difficulty: 'Beginner',
        icon: '⏳',
        description: 'Talk about completed past actions (Nói về hành động quá khứ đã hoàn thành)',
        lessons: [
          {
            lessonId: 'ps_past_001',
            title: 'Introduction to Past Simple (Giới thiệu Thì Quá Khứ Đơn)',
            duration: '9 mins',
            content: `
**English:**
Used for:
- Completed actions in the past
- Series of past events
- Past facts and habits

Regular verbs: Base verb + -ed
I played, she worked, they studied

Irregular verbs: Must be memorized
go → went, eat → ate, see → saw, buy → bought

Form:
Affirmative: Subject + verb-ed (or irregular)
Negative: Subject + did + not + base verb
Question: Did + Subject + base verb?

**Vietnamese Translation (Dịch Tiếng Việt):**
Sử dụng cho:
- Hành động quá khứ đã hoàn thành
- Chuỗi sự kiện quá khứ
- Sự thật và thói quen quá khứ

Động từ thông thường: Động từ nguyên thể + -ed
I played (Tôi chơi), she worked (Cô ấy làm việc), they studied (Họ học)

Động từ bất quy tắc: Phải học thuộc
go → went, eat → ate, see → saw, buy → bought

Cấu trúc:
Khẳng định: Chủ ngữ + verb-ed (hoặc bất quy tắc)
Phủ định: Chủ ngữ + did + not + động từ nguyên thể
Câu hỏi: Did + Chủ ngữ + động từ nguyên thể?
            `,
            examples: [
              { 
                example: 'I played football yesterday.', 
                explanation: 'Regular past simple (Thì quá khứ đơn thông thường)',
                vietnamese: {
                  example: 'Tôi chơi bóng đá hôm qua.',
                  explanation: 'Thì quá khứ đơn thông thường'
                }
              },
              { 
                example: 'She went to Paris last month.', 
                explanation: 'Irregular verb (Động từ bất quy tắc)',
                vietnamese: {
                  example: 'Cô ấy đi Paris tháng trước.',
                  explanation: 'Động từ bất quy tắc'
                }
              },
              { 
                example: 'They did not come to the party.', 
                explanation: 'Negative past (Quá khứ phủ định)',
                vietnamese: {
                  example: 'Họ không đến bữa tiệc.',
                  explanation: 'Quá khứ phủ định'
                }
              },
              { 
                example: 'Did you see the movie?', 
                explanation: 'Question form (Dạng câu hỏi)',
                vietnamese: {
                  example: 'Bạn có xem bộ phim không?',
                  explanation: 'Dạng câu hỏi'
                }
              },
            ],
          },
          {
            lessonId: 'ps_past_002',
            title: 'Past Simple - Regular Verbs & Spelling (Thì Quá Khứ Đơn - Động Từ Thường & Chính Tả)',
            duration: '10 mins',
            content: `
**English:**
Spelling rules for -ed:

1. Regular: Add -ed
   play → played, work → worked

2. Verb ends in -e: Add -d
   live → lived, dance → danced

3. Verb ends in consonant + y: Change y to i, add -ed
   study → studied, cry → cried

4. CVC (short vowel): Double consonant + ed
   stop → stopped (but exceptions apply)

Pronunciation: /t/, /d/, /ɪd/

**Vietnamese Translation (Dịch Tiếng Việt):**
Quy tắc chính tả cho -ed:

1. Thông thường: Thêm -ed
   play → played, work → worked

2. Kết thúc bằng -e: Thêm -d
   live → lived, dance → danced

3. Kết thúc bằng phụ âm + y: Đổi y thành i, thêm -ed
   study → studied, cry → cried

4. CVC (nguyên âm ngắn): Nhân đôi phụ âm + ed
   stop → stopped (có ngoại lệ)

Phát âm: /t/, /d/, /ɪd/
            `,
            examples: [
              { 
                example: 'We visited the museum.', 
                explanation: 'Regular -ed ending (Kết thúc -ed thông thường)',
                vietnamese: {
                  example: 'Chúng tôi thăm bảo tàng.',
                  explanation: 'Kết thúc -ed thông thường'
                }
              },
              { 
                example: 'He stopped the car.', 
                explanation: 'Double consonant (Nhân đôi phụ âm)',
                vietnamese: {
                  example: 'Anh ấy dừng xe.',
                  explanation: 'Nhân đôi phụ âm'
                }
              },
              { 
                example: 'She tried the food.', 
                explanation: 'y to i rule (Quy tắc y thành i)',
                vietnamese: {
                  example: 'Cô ấy thử món ăn.',
                  explanation: 'Quy tắc y thành i'
                }
              },
              { 
                example: 'They lived in Hanoi.', 
                explanation: '-e to -d (Quy tắc -e thành -d)',
                vietnamese: {
                  example: 'Họ sống ở Hà Nội.',
                  explanation: '-e thành -d'
                }
              },
            ],
          },
          {
            lessonId: 'ps_past_003',
            title: 'Past Simple - Negative & Questions (Thì Quá Khứ Đơn - Phủ Định & Câu Hỏi)',
            duration: '9 mins',
            content: `
**English:**
Negative: didn't + base verb
I didn't go. She didn't eat.

Questions: Did + subject + base verb?
Did you play? Did he work?

Short answers:
Yes, I did. / No, I didn't.
Yes, she did. / No, she didn't.

Wh-questions: What did you do? Where did they go?

**Vietnamese Translation (Dịch Tiếng Việt):**
Phủ định: didn't + động từ nguyên thể
I didn't go (Tôi không đi). She didn't eat (Cô ấy không ăn).

Câu hỏi: Did + chủ ngữ + động từ nguyên thể?
Did you play? (Bạn có chơi không?) Did he work? (Anh ấy có làm việc không?)

Trả lời ngắn:
Yes, I did. / No, I didn't. (Có, tôi đã. / Không, tôi chưa.)
Yes, she did. / No, she didn't. (Có, cô ấy đã. / Không, cô ấy chưa.)

Câu hỏi Wh: What did you do? (Bạn đã làm gì?) Where did they go? (Họ đã đi đâu?)
            `,
            examples: [
              { 
                example: 'We didn\'t visit the zoo.', 
                explanation: 'Plural negative (Phủ định số nhiều)',
                vietnamese: {
                  example: 'Chúng tôi không thăm sở thú.',
                  explanation: 'Phủ định số nhiều'
                }
              },
              { 
                example: 'Did she call you?', 
                explanation: 'Yes/No question (Câu hỏi Yes/No)',
                vietnamese: {
                  example: 'Cô ấy có gọi bạn không?',
                  explanation: 'Câu hỏi Yes/No'
                }
              },
              { 
                example: 'What did you eat for lunch?', 
                explanation: 'Wh-question (Câu hỏi Wh)',
                vietnamese: {
                  example: 'Bạn đã ăn gì cho bữa trưa?',
                  explanation: 'Câu hỏi Wh'
                }
              },
              { 
                example: 'No, he didn\'t finish the book.', 
                explanation: 'Short negative answer (Trả lời phủ định ngắn)',
                vietnamese: {
                  example: 'Không, anh ấy không đọc xong cuốn sách.',
                  explanation: 'Trả lời phủ định ngắn'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'ps_past_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'Last weekend, I _____ to the beach. (Cuối tuần trước, tôi _____ đến bãi biển.)',
            options: [
              { text: 'went', isCorrect: true, explanation: 'Irregular past of go (Quá khứ bất quy tắc của go)' },
              { text: 'go', isCorrect: false, explanation: 'This is present tense (Đây là thì hiện tại)' },
              { text: 'going', isCorrect: false, explanation: 'This is present continuous (Đây là thì hiện tại tiếp diễn)' },
              { text: 'gone', isCorrect: false, explanation: 'This is past participle (Đây là phân từ quá khứ)' },
            ],
          },
          {
            exerciseId: 'ps_past_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'She _____ (study) English last year. (Cô ấy _____ (học) tiếng Anh năm ngoái.)',
            correctAnswer: 'studied',
            hints: ['Change y to i for consonant + y (Đổi y thành i cho phụ âm + y)', 'Add -ed (Thêm -ed)'],
            explanation: 'study → studied (consonant + y rule) (study → studied (quy tắc phụ âm + y))',
          },
          {
            exerciseId: 'ps_past_ex_003',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: '_____ you enjoy the party? (Bạn _____ thích bữa tiệc không?)',
            options: [
              { text: 'Did', isCorrect: true, explanation: 'Question form with did (Dạng câu hỏi với did)' },
              { text: 'Do', isCorrect: false, explanation: 'This is present tense (Đây là thì hiện tại)' },
              { text: 'Does', isCorrect: false, explanation: 'Used for third person present (Dùng cho ngôi thứ ba hiện tại)' },
              { text: 'Are', isCorrect: false, explanation: 'Wrong auxiliary (Trợ động từ sai)' },
            ],
          },
          {
            exerciseId: 'ps_past_ex_004',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'They _____ (not/visit) the museum yesterday. (Họ _____ (không thăm) bảo tàng hôm qua.)',
            correctAnswer: 'didn\'t visit',
            hints: ['Use didn\'t for negative (Sử dụng didn\'t cho phủ định)', 'Base verb after did (Động từ nguyên thể sau did)'],
            explanation: 'Negative form: didn\'t + base verb (Dạng phủ định: didn\'t + động từ nguyên thể)',
          },
          {
            exerciseId: 'ps_past_ex_005',
            type: 'multiple_choice',
            difficulty: 'Hard',
            question: 'He _____ the book before the class started. (Anh ấy _____ cuốn sách trước khi lớp học bắt đầu.)',
            options: [
              { text: 'read', isCorrect: true, explanation: 'Irregular past of read (Quá khứ bất quy tắc của read)' },
              { text: 'reads', isCorrect: false, explanation: 'Present tense (Thì hiện tại)' },
              { text: 'reading', isCorrect: false, explanation: 'Present continuous (Thì hiện tại tiếp diễn)' },
              { text: 'had read', isCorrect: false, explanation: 'Past perfect, more advanced (Quá khứ hoàn thành, nâng cao hơn)' },
            ],
          },
        ],
        vocabulary: [
          { 
            word: 'completed', 
            meaning: 'Finished (Hoàn thành)', 
            example: 'The project is completed. (Dự án đã hoàn thành.)' 
          },
          { 
            word: 'yesterday', 
            meaning: 'The day before today (Ngày hôm qua)', 
            example: 'I saw him yesterday. (Tôi thấy anh ấy hôm qua.)' 
          },
          { 
            word: 'event', 
            meaning: 'Something that happens (Sự kiện xảy ra)', 
            example: 'It was a happy event. (Đó là một sự kiện vui vẻ.)' 
          },
          { 
            word: 'habit', 
            meaning: 'Regular behavior in the past (Hành vi thường xuyên trong quá khứ)', 
            example: 'She had a reading habit as a child. (Cô ấy có thói quen đọc sách khi còn nhỏ.)' 
          },
        ],
      },

      // Topic 4: Articles (a/an/the)
      articles: {
        id: 'articles',
        title: 'Articles: A, An, The (Mạo Từ: A, An, The)',
        difficulty: 'Beginner',
        icon: '📝',
        description: 'Learn definite and indefinite articles (Học mạo từ xác định và không xác định)',
        lessons: [
          {
            lessonId: 'art_001',
            title: 'Indefinite Articles: A & An (Mạo Từ Không Xác Định: A & An)',
            duration: '8 mins',
            content: `
**English:**
Indefinite articles (a/an) are used for:
- First mention of a singular countable noun
- General, non-specific things
- Jobs: I am a teacher.

A before consonant sound: a book, a university
An before vowel sound: an apple, an hour

No article for plural or uncountable: I like apples. Water is important.

**Vietnamese Translation (Dịch Tiếng Việt):**
Mạo từ không xác định (a/an) dùng cho:
- Lần đề cập đầu tiên đến danh từ đếm được số ít
- Những thứ chung chung, không cụ thể
- Nghề nghiệp: I am a teacher. (Tôi là một giáo viên.)

A trước âm phụ âm: a book (một cuốn sách), a university (một trường đại học)
An trước âm nguyên âm: an apple (một quả táo), an hour (một giờ)

Không dùng mạo từ cho số nhiều hoặc không đếm được: I like apples. (Tôi thích táo.) Water is important. (Nước rất quan trọng.)
            `,
            examples: [
              { 
                example: 'I saw a cat in the garden.', 
                explanation: 'First mention (Đề cập lần đầu)',
                vietnamese: {
                  example: 'Tôi thấy một con mèo trong vườn.',
                  explanation: 'Đề cập lần đầu'
                }
              },
              { 
                example: 'She is an engineer.', 
                explanation: 'Job with vowel sound (Nghề nghiệp với âm nguyên âm)',
                vietnamese: {
                  example: 'Cô ấy là một kỹ sư.',
                  explanation: 'Nghề nghiệp với âm nguyên âm'
                }
              },
              { 
                example: 'He wants a car.', 
                explanation: 'Consonant sound (Âm phụ âm)',
                vietnamese: {
                  example: 'Anh ấy muốn một chiếc xe hơi.',
                  explanation: 'Âm phụ âm'
                }
              },
              { 
                example: 'I eat an orange every day.', 
                explanation: 'Vowel sound (Âm nguyên âm)',
                vietnamese: {
                  example: 'Tôi ăn một quả cam mỗi ngày.',
                  explanation: 'Âm nguyên âm'
                }
              },
            ],
          },
          {
            lessonId: 'art_002',
            title: 'Definite Article: The (Mạo Từ Xác Định: The)',
            duration: '9 mins',
            content: `
**English:**
Definite article (the) is used for:
- Specific things both speaker and listener know
- Second mention: I saw a cat. The cat was black.
- Unique things: the sun, the moon
- Superlatives: the best book
- Geographical names: the Pacific Ocean

No the for: general plurals, uncountables, proper names (usually)

**Vietnamese Translation (Dịch Tiếng Việt):**
Mạo từ xác định (the) dùng cho:
- Những thứ cụ thể mà người nói và nghe đều biết
- Đề cập lần thứ hai: I saw a cat. The cat was black. (Tôi thấy một con mèo. Con mèo đó màu đen.)
- Những thứ duy nhất: the sun (mặt trời), the moon (mặt trăng)
- Tính từ so sánh nhất: the best book (cuốn sách hay nhất)
- Tên địa lý: the Pacific Ocean (Thái Bình Dương)

Không dùng the cho: số nhiều chung chung, không đếm được, tên riêng (thường)
            `,
            examples: [
              { 
                example: 'The book on the table is mine.', 
                explanation: 'Specific book (Cuốn sách cụ thể)',
                vietnamese: {
                  example: 'Cuốn sách trên bàn là của tôi.',
                  explanation: 'Cuốn sách cụ thể'
                }
              },
              { 
                example: 'Pass me the pen.', 
                explanation: 'Known object (Vật đã biết)',
                vietnamese: {
                  example: 'Đưa tôi cây bút.',
                  explanation: 'Vật đã biết'
                }
              },
              { 
                example: 'The tallest building in the world.', 
                explanation: 'Superlative (So sánh nhất)',
                vietnamese: {
                  example: 'Tòa nhà cao nhất thế giới.',
                  explanation: 'So sánh nhất'
                }
              },
              { 
                example: 'We visited the museum yesterday.', 
                explanation: 'Specific place (Nơi cụ thể)',
                vietnamese: {
                  example: 'Chúng tôi thăm bảo tàng hôm qua.',
                  explanation: 'Nơi cụ thể'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'art_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'I need _____ apple. (Tôi cần _____ quả táo.)',
            options: [
              { text: 'an', isCorrect: true, explanation: 'Vowel sound (Âm nguyên âm)' },
              { text: 'a', isCorrect: false, explanation: 'Consonant sound only (Chỉ âm phụ âm)' },
              { text: 'the', isCorrect: false, explanation: 'Not specific (Không cụ thể)' },
              { text: '-', isCorrect: false, explanation: 'For plurals, not singular (Cho số nhiều, không phải số ít)' },
            ],
          },
          {
            exerciseId: 'art_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: '_____ sun is very hot today. (_____ mặt trời rất nóng hôm nay.)',
            correctAnswer: 'The',
            hints: ['Unique thing (Thứ duy nhất)', 'Definite article (Mạo từ xác định)'],
            explanation: 'The for unique items like the sun (The cho những thứ duy nhất như mặt trời)',
          },
          {
            exerciseId: 'art_ex_003',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'She is _____ doctor. (Cô ấy là _____ bác sĩ.)',
            options: [
              { text: 'a', isCorrect: true, explanation: 'Job with consonant sound (Nghề nghiệp với âm phụ âm)' },
              { text: 'an', isCorrect: false, explanation: 'Vowel sound required (Cần âm nguyên âm)' },
              { text: 'the', isCorrect: false, explanation: 'Not specific (Không cụ thể)' },
              { text: '-', isCorrect: false, explanation: 'Articles needed for jobs (Cần mạo từ cho nghề nghiệp)' },
            ],
          },
          {
            exerciseId: 'art_ex_004',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: '_____ dogs are loyal animals. (_____ chó là động vật trung thành.)',
            correctAnswer: '-',
            hints: ['General plural (Số nhiều chung chung)', 'No article (Không dùng mạo từ)'],
            explanation: 'No article for general plurals (Không dùng mạo từ cho số nhiều chung chung)',
          },
        ],
        vocabulary: [
          { 
            word: 'countable', 
            meaning: 'Can be counted (Có thể đếm được)', 
            example: 'Apples are countable. (Táo có thể đếm được.)' 
          },
          { 
            word: 'uncountable', 
            meaning: 'Cannot be counted (Không thể đếm được)', 
            example: 'Water is uncountable. (Nước không thể đếm được.)' 
          },
          { 
            word: 'specific', 
            meaning: 'Particular or definite (Cụ thể hoặc xác định)', 
            example: 'The specific book I want. (Cuốn sách cụ thể tôi muốn.)' 
          },
          { 
            word: 'general', 
            meaning: 'Not specific (Không cụ thể)', 
            example: 'In general, cats like milk. (Nói chung, mèo thích sữa.)' 
          },
        ],
      },
    },
  },
  intermediate: {
    level: 'Intermediate',
    description: 'Intermediate grammar topics for building confidence (Các chủ đề ngữ pháp trung cấp để xây dựng sự tự tin)',
    topics: {
      // Topic 1: Present Perfect
      presentPerfect: {
        id: 'present_perfect',
        title: 'Present Perfect Tense (Thì Hiện Tại Hoàn Thành)',
        difficulty: 'Intermediate',
        icon: '✅',
        description: 'Connect past actions to the present (Kết nối hành động quá khứ với hiện tại)',
        lessons: [
          {
            lessonId: 'pp_001',
            title: 'Introduction to Present Perfect (Giới thiệu Thì Hiện Tại Hoàn Thành)',
            duration: '10 mins',
            content: `
**English:**
The Present Perfect is used for:
- Experiences in life (ever/never)
- Actions completed at an unspecified time
- Actions with present results
- With "for" (duration) and "since" (starting point)

Form: Subject + have/has + past participle
I have eaten. She has gone.

Negative: haven't/hasn't + past participle
Question: Have/Has + Subject + past participle?

**Vietnamese Translation (Dịch Tiếng Việt):**
Thì Hiện Tại Hoàn Thành dùng cho:
- Kinh nghiệm trong đời (ever/never)
- Hành động hoàn thành ở thời điểm không xác định
- Hành động có kết quả hiện tại
- Với "for" (thời gian kéo dài) và "since" (điểm bắt đầu)

Cấu trúc: Chủ ngữ + have/has + past participle
I have eaten (Tôi đã ăn). She has gone (Cô ấy đã đi).

Phủ định: haven't/hasn't + past participle
Câu hỏi: Have/Has + Chủ ngữ + past participle?
            `,
            examples: [
              { 
                example: 'I have visited Paris three times.', 
                explanation: 'Life experience (Kinh nghiệm cuộc sống)',
                vietnamese: {
                  example: 'Tôi đã thăm Paris ba lần.',
                  explanation: 'Kinh nghiệm cuộc sống'
                }
              },
              { 
                example: 'She has lost her keys.', 
                explanation: 'Present result (Kết quả hiện tại)',
                vietnamese: {
                  example: 'Cô ấy đã mất chìa khóa.',
                  explanation: 'Kết quả hiện tại'
                }
              },
              { 
                example: 'We have lived here since 2010.', 
                explanation: 'With "since" (Với "since")',
                vietnamese: {
                  example: 'Chúng tôi đã sống ở đây từ năm 2010.',
                  explanation: 'Với "since"'
                }
              },
              { 
                example: 'They haven\'t finished the project yet.', 
                explanation: 'Negative with "yet" (Phủ định với "yet")',
                vietnamese: {
                  example: 'Họ chưa hoàn thành dự án.',
                  explanation: 'Phủ định với "yet"'
                }
              },
            ],
          },
          {
            lessonId: 'pp_002',
            title: 'Present Perfect vs. Past Simple (Hiện Tại Hoàn Thành so với Quá Khứ Đơn)',
            duration: '12 mins',
            content: `
**English:**
Present Perfect: Unspecified time, connection to now
I have seen that movie. (Sometime in life, relevant now)

Past Simple: Specific time in the past
I saw that movie yesterday. (Finished, no current link)

Time expressions:
Present Perfect: ever, never, just, already, yet, for, since
Past Simple: yesterday, last week, in 2020, ago

**Vietnamese Translation (Dịch Tiếng Việt):**
Hiện Tại Hoàn Thành: Thời điểm không xác định, kết nối với hiện tại
I have seen that movie. (Một lúc nào đó trong đời, liên quan đến bây giờ)

Quá Khứ Đơn: Thời điểm cụ thể trong quá khứ
I saw that movie yesterday. (Đã xong, không liên kết hiện tại)

Biểu thức thời gian:
Hiện Tại Hoàn Thành: ever, never, just, already, yet, for, since
Quá Khứ Đơn: yesterday, last week, in 2020, ago
            `,
            examples: [
              { 
                example: 'Have you ever been to Japan?', 
                explanation: 'Experience question (Câu hỏi kinh nghiệm)',
                vietnamese: {
                  example: 'Bạn đã từng đến Nhật Bản chưa?',
                  explanation: 'Câu hỏi kinh nghiệm'
                }
              },
              { 
                example: 'I just ate lunch.', 
                explanation: 'Recent action (Hành động gần đây)',
                vietnamese: {
                  example: 'Tôi vừa ăn trưa.',
                  explanation: 'Hành động gần đây'
                }
              },
              { 
                example: 'He went to the store an hour ago.', 
                explanation: 'Specific past time (Thời điểm quá khứ cụ thể)',
                vietnamese: {
                  example: 'Anh ấy đến cửa hàng một giờ trước.',
                  explanation: 'Thời điểm quá khứ cụ thể'
                }
              },
              { 
                example: 'She has worked here for five years.', 
                explanation: 'Duration to present (Thời gian kéo dài đến hiện tại)',
                vietnamese: {
                  example: 'Cô ấy đã làm việc ở đây năm năm.',
                  explanation: 'Thời gian kéo dài đến hiện tại'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'pp_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'I _____ this book before. (Tôi _____ cuốn sách này trước đây.)',
            options: [
              { text: 'have read', isCorrect: true, explanation: 'Present perfect for unspecified time (Hiện tại hoàn thành cho thời điểm không xác định)' },
              { text: 'read', isCorrect: false, explanation: 'Past simple needs specific time (Quá khứ đơn cần thời điểm cụ thể)' },
              { text: 'am reading', isCorrect: false, explanation: 'Present continuous for now (Hiện tại tiếp diễn cho hiện tại)' },
              { text: 'will read', isCorrect: false, explanation: 'Future tense (Thì tương lai)' },
            ],
          },
          {
            exerciseId: 'pp_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'She _____ (not/see) the movie yet. (Cô ấy _____ (chưa xem) bộ phim.)',
            correctAnswer: 'hasn\'t seen',
            hints: ['Use has for third person (Dùng has cho ngôi thứ ba)', 'Past participle of see is seen (Phân từ quá khứ của see là seen)'],
            explanation: 'Negative present perfect: hasn\'t + past participle (Phủ định hiện tại hoàn thành: hasn\'t + phân từ quá khứ)',
          },
          {
            exerciseId: 'pp_ex_003',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'We _____ in this city since 2015. (Chúng tôi _____ ở thành phố này từ năm 2015.)',
            options: [
              { text: 'have lived', isCorrect: true, explanation: 'With "since" for duration to now (Với "since" cho thời gian kéo dài đến hiện tại)' },
              { text: 'lived', isCorrect: false, explanation: 'Past simple for completed period (Quá khứ đơn cho khoảng thời gian hoàn thành)' },
              { text: 'are living', isCorrect: false, explanation: 'Present continuous without duration (Hiện tại tiếp diễn không có thời gian kéo dài)' },
              { text: 'will live', isCorrect: false, explanation: 'Future intention (Ý định tương lai)' },
            ],
          },
          {
            exerciseId: 'pp_ex_004',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: '_____ you ever _____ (try) sushi? (Bạn _____ từng _____ (thử) sushi chưa?)',
            correctAnswer: 'Have ... tried',
            hints: ['Question form: Have + subject + past participle (Dạng câu hỏi: Have + chủ ngữ + phân từ quá khứ)', 'Try → tried (Try → tried)'],
            explanation: 'Present perfect question for experiences (Câu hỏi hiện tại hoàn thành cho kinh nghiệm)',
          },
        ],
        vocabulary: [
          { 
            word: 'experience', 
            meaning: 'Something that happens to you (Điều gì đó xảy ra với bạn)', 
            example: 'Traveling is a great experience. (Du lịch là một trải nghiệm tuyệt vời.)' 
          },
          { 
            word: 'duration', 
            meaning: 'Length of time (Độ dài thời gian)', 
            example: 'The duration of the flight is 10 hours. (Thời lượng chuyến bay là 10 giờ.)' 
          },
          { 
            word: 'unspecified', 
            meaning: 'Not clearly stated (Không được nêu rõ)', 
            example: 'The time is unspecified. (Thời gian không được chỉ định.)' 
          },
          { 
            word: 'participle', 
            meaning: 'Verb form used in tenses (Dạng động từ dùng trong thì)', 
            example: 'Past participle for perfect tenses. (Phân từ quá khứ cho thì hoàn thành.)' 
          },
        ],
      },

      // Topic 2: Past Continuous
      pastContinuous: {
        id: 'past_continuous',
        title: 'Past Continuous Tense (Thì Quá Khứ Tiếp Diễn)',
        difficulty: 'Intermediate',
        icon: '⏳🔄',
        description: 'Describe ongoing past actions (Mô tả hành động đang diễn ra trong quá khứ)',
        lessons: [
          {
            lessonId: 'pcont_001',
            title: 'Introduction to Past Continuous (Giới thiệu Thì Quá Khứ Tiếp Diễn)',
            duration: '10 mins',
            content: `
**English:**
Used for:
- Actions in progress at a specific past time
- Interrupted actions (with Past Simple)
- Parallel past actions
- Background in stories

Form: Subject + was/were + verb-ing
I was reading at 8 PM. They were playing.

Negative: wasn't/weren't + verb-ing
Question: Was/Were + Subject + verb-ing?

**Vietnamese Translation (Dịch Tiếng Việt):**
Dùng cho:
- Hành động đang diễn ra tại thời điểm quá khứ cụ thể
- Hành động bị gián đoạn (với Quá Khứ Đơn)
- Hành động song song trong quá khứ
- Nền tảng trong câu chuyện

Cấu trúc: Chủ ngữ + was/were + verb-ing
I was reading at 8 PM (Tôi đang đọc lúc 8 giờ tối). They were playing (Họ đang chơi).

Phủ định: wasn't/weren't + verb-ing
Câu hỏi: Was/Were + Chủ ngữ + verb-ing?
            `,
            examples: [
              { 
                example: 'I was watching TV when you called.', 
                explanation: 'Interrupted action (Hành động bị gián đoạn)',
                vietnamese: {
                  example: 'Tôi đang xem TV khi bạn gọi.',
                  explanation: 'Hành động bị gián đoạn'
                }
              },
              { 
                example: 'They were studying at midnight.', 
                explanation: 'Specific past time (Thời điểm quá khứ cụ thể)',
                vietnamese: {
                  example: 'Họ đang học lúc nửa đêm.',
                  explanation: 'Thời điểm quá khứ cụ thể'
                }
              },
              { 
                example: 'While she was cooking, he was reading.', 
                explanation: 'Parallel actions (Hành động song song)',
                vietnamese: {
                  example: 'Trong khi cô ấy đang nấu ăn, anh ấy đang đọc.',
                  explanation: 'Hành động song song'
                }
              },
              { 
                example: 'Was it raining yesterday?', 
                explanation: 'Question form (Dạng câu hỏi)',
                vietnamese: {
                  example: 'Trời có mưa hôm qua không?',
                  explanation: 'Dạng câu hỏi'
                }
              },
            ],
          },
          {
            lessonId: 'pcont_002',
            title: 'Past Continuous vs. Past Simple (Quá Khứ Tiếp Diễn so với Quá Khứ Đơn)',
            duration: '11 mins',
            content: `
**English:**
Past Continuous: Ongoing action
I was eating when the phone rang. (Background)

Past Simple: Completed/short action
I ate dinner at 7 PM. (Finished)

Interrupted: Past Continuous (longer) + Past Simple (shorter/interrupter)
She was walking home when it started to rain.

**Vietnamese Translation (Dịch Tiếng Việt):**
Quá Khứ Tiếp Diễn: Hành động đang diễn ra
I was eating when the phone rang. (Nền tảng)

Quá Khứ Đơn: Hành động hoàn thành/ngắn
I ate dinner at 7 PM. (Đã xong)

Bị gián đoạn: Quá Khứ Tiếp Diễn (dài hơn) + Quá Khứ Đơn (ngắn/gián đoạn)
She was walking home when it started to rain. (Cô ấy đang đi bộ về nhà khi trời bắt đầu mưa.)
            `,
            examples: [
              { 
                example: 'He was driving when the accident happened.', 
                explanation: 'Interrupted by Past Simple (Bị gián đoạn bởi Quá Khứ Đơn)',
                vietnamese: {
                  example: 'Anh ấy đang lái xe khi tai nạn xảy ra.',
                  explanation: 'Bị gián đoạn bởi Quá Khứ Đơn'
                }
              },
              { 
                example: 'We were having fun all evening.', 
                explanation: 'Ongoing past action (Hành động đang diễn ra trong quá khứ)',
                vietnamese: {
                  example: 'Chúng tôi đang vui vẻ suốt buổi tối.',
                  explanation: 'Hành động đang diễn ra trong quá khứ'
                }
              },
              { 
                example: 'The children were playing while the adults were talking.', 
                explanation: 'Parallel with "while" (Song song với "while")',
                vietnamese: {
                  example: 'Trẻ em đang chơi trong khi người lớn đang nói chuyện.',
                  explanation: 'Song song với "while"'
                }
              },
              { 
                example: 'I dropped my phone while I was running.', 
                explanation: 'Cause of interruption (Nguyên nhân gián đoạn)',
                vietnamese: {
                  example: 'Tôi làm rơi điện thoại trong khi đang chạy.',
                  explanation: 'Nguyên nhân gián đoạn'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'pcont_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'At 5 PM yesterday, she _____ dinner. (Lúc 5 giờ chiều hôm qua, cô ấy _____ bữa tối.)',
            options: [
              { text: 'was cooking', isCorrect: true, explanation: 'Ongoing action at specific time (Hành động đang diễn ra tại thời điểm cụ thể)' },
              { text: 'cooked', isCorrect: false, explanation: 'Past simple for completed (Quá khứ đơn cho hoàn thành)' },
              { text: 'cooks', isCorrect: false, explanation: 'Present tense (Thì hiện tại)' },
              { text: 'has cooked', isCorrect: false, explanation: 'Present perfect (Hiện tại hoàn thành)' },
            ],
          },
          {
            exerciseId: 'pcont_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'They _____ (play) football when it started to rain. (Họ _____ (chơi) bóng đá khi trời bắt đầu mưa.)',
            correctAnswer: 'were playing',
            hints: ['Use were for plural (Dùng were cho số nhiều)', 'Verb-ing form (Dạng verb-ing)'],
            explanation: 'Past continuous for interrupted action (Quá khứ tiếp diễn cho hành động bị gián đoạn)',
          },
          {
            exerciseId: 'pcont_ex_003',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: '_____ you _____ (watch) TV last night? (Bạn _____ (xem) TV tối qua không?)',
            options: [
              { text: 'Were ... watching', isCorrect: true, explanation: 'Question form for ongoing past (Dạng câu hỏi cho hành động đang diễn ra quá khứ)' },
              { text: 'Did ... watch', isCorrect: false, explanation: 'Past simple for completed (Quá khứ đơn cho hoàn thành)' },
              { text: 'Have ... watched', isCorrect: false, explanation: 'Present perfect (Hiện tại hoàn thành)' },
              { text: 'Are ... watching', isCorrect: false, explanation: 'Present continuous (Hiện tại tiếp diễn)' },
            ],
          },
          {
            exerciseId: 'pcont_ex_004',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'While I _____ (work), my colleague _____ (call) me. (Trong khi tôi _____ (làm việc), đồng nghiệp _____ (gọi) tôi.)',
            correctAnswer: 'was working ... called',
            hints: ['Past continuous for longer action (Quá khứ tiếp diễn cho hành động dài)', 'Past simple for interruption (Quá khứ đơn cho gián đoạn)'],
            explanation: 'Combination: Past continuous + Past simple (Kết hợp: Quá khứ tiếp diễn + Quá khứ đơn)',
          },
        ],
        vocabulary: [
          { 
            word: 'ongoing', 
            meaning: 'Continuing without interruption (Tiếp tục không bị gián đoạn)', 
            example: 'An ongoing project. (Dự án đang diễn ra.)' 
          },
          { 
            word: 'interrupted', 
            meaning: 'Stopped suddenly (Bị dừng đột ngột)', 
            example: 'The meeting was interrupted. (Cuộc họp bị gián đoạn.)' 
          },
          { 
            word: 'parallel', 
            meaning: 'Happening at the same time (Xảy ra cùng lúc)', 
            example: 'Parallel lines never meet. (Đường thẳng song song không bao giờ gặp nhau.)' 
          },
          { 
            word: 'background', 
            meaning: 'Setting for an event (Bối cảnh cho sự kiện)', 
            example: 'Story background. (Bối cảnh câu chuyện.)' 
          },
        ],
      },

      // Topic 3: Future Forms (Will & Going To)
      futureForms: {
        id: 'future_forms',
        title: 'Future Forms: Will & Going To (Dạng Tương Lai: Will & Going To)',
        difficulty: 'Intermediate',
        icon: '🔮',
        description: 'Express future plans and predictions (Bày tỏ kế hoạch và dự đoán tương lai)',
        lessons: [
          {
            lessonId: 'ff_001',
            title: 'Introduction to Will (Giới thiệu Will)',
            duration: '9 mins',
            content: `
**English:**
Will is used for:
- Spontaneous decisions
- Predictions without evidence
- Offers, promises, threats
- Facts about the future

Form: Subject + will + base verb
I will call you. It will rain tomorrow.

Negative: won't + base verb
Question: Will + Subject + base verb?

Contractions: I'll, you'll, he'll, etc.

**Vietnamese Translation (Dịch Tiếng Việt):**
Will dùng cho:
- Quyết định tự phát
- Dự đoán không có bằng chứng
- Đề nghị, hứa hẹn, đe dọa
- Sự thật về tương lai

Cấu trúc: Chủ ngữ + will + động từ nguyên thể
I will call you (Tôi sẽ gọi bạn). It will rain tomorrow (Trời sẽ mưa ngày mai).

Phủ định: won't + động từ nguyên thể
Câu hỏi: Will + Chủ ngữ + động từ nguyên thể?

Rút gọn: I'll, you'll, he'll, v.v.
            `,
            examples: [
              { 
                example: 'I\'ll help you with that.', 
                explanation: 'Spontaneous offer (Đề nghị tự phát)',
                vietnamese: {
                  example: 'Tôi sẽ giúp bạn việc đó.',
                  explanation: 'Đề nghị tự phát'
                }
              },
              { 
                example: 'The meeting will start at 10 AM.', 
                explanation: 'Scheduled fact (Sự thật lịch trình)',
                vietnamese: {
                  example: 'Cuộc họp sẽ bắt đầu lúc 10 giờ sáng.',
                  explanation: 'Sự thật lịch trình'
                }
              },
              { 
                example: "She won't forget your birthday.", 
                explanation: 'Promise (Hứa hẹn)',
                vietnamese: {
                  example: 'Cô ấy sẽ không quên sinh nhật bạn.',
                  explanation: 'Hứa hẹn'
                }
              },
              { 
                example: 'Will you come to the party?', 
                explanation: 'Question (Câu hỏi)',
                vietnamese: {
                  example: 'Bạn sẽ đến bữa tiệc không?',
                  explanation: 'Câu hỏi'
                }
              },
            ],
          },
          {
            lessonId: 'ff_002',
            title: 'Going To for Plans & Predictions (Going To cho Kế Hoạch & Dự Đoán)',
            duration: '10 mins',
            content: `
**English:**
Going to is used for:
- Planned intentions (with evidence of preparation)
- Predictions based on present evidence
- Near future actions

Form: Subject + am/is/are + going to + base verb
I am going to study tonight. Look, it's going to rain!

Negative: am/is/are + not + going to + base verb
Question: Am/Is/Are + Subject + going to + base verb?

**Vietnamese Translation (Dịch Tiếng Việt):**
Going to dùng cho:
- Ý định đã lên kế hoạch (với bằng chứng chuẩn bị)
- Dự đoán dựa trên bằng chứng hiện tại
- Hành động tương lai gần

Cấu trúc: Chủ ngữ + am/is/are + going to + động từ nguyên thể
I am going to study tonight (Tôi sẽ học tối nay). Look, it's going to rain! (Nhìn kìa, trời sắp mưa!)

Phủ định: am/is/are + not + going to + động từ nguyên thể
Câu hỏi: Am/Is/Are + Chủ ngữ + going to + động từ nguyên thể?
            `,
            examples: [
              { 
                example: 'We are going to visit our grandparents this weekend.', 
                explanation: 'Planned intention (Ý định đã kế hoạch)',
                vietnamese: {
                  example: 'Chúng tôi sẽ thăm ông bà cuối tuần này.',
                  explanation: 'Ý định đã kế hoạch'
                }
              },
              { 
                example: 'He\'s going to fall if he doesn\'t slow down.', 
                explanation: 'Prediction with evidence (Dự đoán với bằng chứng)',
                vietnamese: {
                  example: 'Anh ấy sẽ ngã nếu không chậm lại.',
                  explanation: 'Dự đoán với bằng chứng'
                }
              },
              { 
                example: 'Are you going to buy a new car?', 
                explanation: 'Question about plans (Câu hỏi về kế hoạch)',
                vietnamese: {
                  example: 'Bạn có định mua xe mới không?',
                  explanation: 'Câu hỏi về kế hoạch'
                }
              },
              { 
                example: "She isn't going to attend the meeting.", 
                explanation: 'Negative plan (Kế hoạch phủ định)',
                vietnamese: {
                  example: 'Cô ấy sẽ không tham dự cuộc họp.',
                  explanation: 'Kế hoạch phủ định'
                }
              },
            ],
          },
          {
            lessonId: 'ff_003',
            title: 'Will vs. Going To (Will so với Going To)',
            duration: '11 mins',
            content: `
**English:**
Will: Spontaneous, general predictions
I'll make coffee. (Decision now)
It will snow this winter. (Opinion)

Going To: Planned, evidence-based
I'm going to make coffee. (Already decided)
Look at the clouds; it's going to snow. (Evidence)

Present Continuous for fixed plans: I'm meeting him at 5 PM.

**Vietnamese Translation (Dịch Tiếng Việt):**
Will: Tự phát, dự đoán chung
I'll make coffee. (Quyết định ngay bây giờ)
It will snow this winter. (Ý kiến)

Going To: Đã kế hoạch, dựa trên bằng chứng
I'm going to make coffee. (Đã quyết định trước)
Look at the clouds; it's going to snow. (Bằng chứng)

Hiện Tại Tiếp Diễn cho kế hoạch cố định: I'm meeting him at 5 PM. (Tôi gặp anh ấy lúc 5 giờ chiều.)
            `,
            examples: [
              { 
                example: "The phone is ringing. I'll get it.", 
                explanation: 'Spontaneous decision (Quyết định tự phát)',
                vietnamese: {
                  example: 'Điện thoại reo. Tôi sẽ nghe.',
                  explanation: 'Quyết định tự phát'
                }
              },
              { 
                example: "I think she'll win the race.", 
                explanation: 'General prediction (Dự đoán chung)',
                vietnamese: {
                  example: 'Tôi nghĩ cô ấy sẽ thắng cuộc đua.',
                  explanation: 'Dự đoán chung'
                }
              },
              { 
                example: "We're going to the cinema tonight.", 
                explanation: 'Fixed plan (Kế hoạch cố định)',
                vietnamese: {
                  example: 'Chúng tôi sẽ đi xem phim tối nay.',
                  explanation: 'Kế hoạch cố định'
                }
              },
              { 
                example: "Be careful; you're going to drop that.", 
                explanation: 'Evidence-based prediction (Dự đoán dựa trên bằng chứng)',
                vietnamese: {
                  example: 'Cẩn thận; bạn sắp làm rơi cái đó.',
                  explanation: 'Dự đoán dựa trên bằng chứng'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'ff_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'Look at those clouds! It _____ rain soon. (Nhìn đám mây kìa! Trời _____ mưa sớm thôi.)',
            options: [
              { text: 'is going to', isCorrect: true, explanation: 'Prediction with present evidence (Dự đoán với bằng chứng hiện tại)' },
              { text: 'will', isCorrect: false, explanation: 'General prediction, no evidence (Dự đoán chung, không bằng chứng)' },
              { text: 'going to', isCorrect: false, explanation: 'Needs form of be (Cần dạng của be)' },
              { text: 'rains', isCorrect: false, explanation: 'Present tense (Thì hiện tại)' },
            ],
          },
          {
            exerciseId: 'ff_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'I _____ (help) you with your homework. (Tôi _____ (giúp) bạn làm bài tập.)',
            correctAnswer: 'will help',
            hints: ['Spontaneous offer (Đề nghị tự phát)', 'Will + base verb (Will + động từ nguyên thể)'],
            explanation: 'Will for offers (Will cho đề nghị)',
          },
          {
            exerciseId: 'ff_ex_003',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'We _____ to Paris next summer. (Chúng tôi _____ đến Paris hè tới.)',
            options: [
              { text: 'are going', isCorrect: true, explanation: 'Planned future with present continuous (Tương lai kế hoạch với hiện tại tiếp diễn)' },
              { text: 'will go', isCorrect: false, explanation: 'Spontaneous, not planned (Tự phát, không kế hoạch)' },
              { text: 'go', isCorrect: false, explanation: 'Present tense (Thì hiện tại)' },
              { text: 'went', isCorrect: false, explanation: 'Past tense (Thì quá khứ)' },
            ],
          },
          {
            exerciseId: 'ff_ex_004',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: '_____ you _____ (finish) the report by tomorrow? (Bạn _____ (hoàn thành) báo cáo trước ngày mai không?)',
            correctAnswer: 'Will ... finish',
            hints: ['Question with will (Câu hỏi với will)', 'For predictions or promises (Cho dự đoán hoặc hứa hẹn)'],
            explanation: 'Will question form (Dạng câu hỏi will)',
          },
          {
            exerciseId: 'ff_ex_005',
            type: 'multiple_choice',
            difficulty: 'Hard',
            question: 'I promise I _____ (not/tell) anyone your secret. (Tôi hứa tôi _____ (không kể) bí mật của bạn với ai.)',
            options: [
              { text: 'won\'t tell', isCorrect: true, explanation: 'Promise with will negative (Hứa hẹn với will phủ định)' },
              { text: 'am not telling', isCorrect: false, explanation: 'Present continuous (Hiện tại tiếp diễn)' },
              { text: 'don\'t tell', isCorrect: false, explanation: 'Present simple (Hiện tại đơn)' },
              { text: 'won\'t telling', isCorrect: false, explanation: 'Wrong form (Dạng sai)' },
            ],
          },
        ],
        vocabulary: [
          { 
            word: 'prediction', 
            meaning: 'Statement about the future (Tuyên bố về tương lai)', 
            example: 'Weather prediction. (Dự báo thời tiết.)' 
          },
          { 
            word: 'intention', 
            meaning: 'Plan to do something (Kế hoạch làm gì đó)', 
            example: 'Good intentions. (Ý định tốt.)' 
          },
          { 
            word: 'spontaneous', 
            meaning: 'Done without planning (Làm mà không lập kế hoạch)', 
            example: 'Spontaneous trip. (Chuyến đi tự phát.)' 
          },
          { 
            word: 'evidence', 
            meaning: 'Proof or signs (Bằng chứng hoặc dấu hiệu)', 
            example: 'No evidence found. (Không tìm thấy bằng chứng.)' 
          },
        ],
      },

      // Topic 4: First Conditional
      firstConditional: {
        id: 'first_conditional',
        title: 'First Conditional (Câu Điều Kiện Loại 1)',
        difficulty: 'Intermediate',
        icon: '❄️',
        description: 'Real possibilities in the future (Khả năng thực tế trong tương lai)',
        lessons: [
          {
            lessonId: 'fc_001',
            title: 'Introduction to First Conditional (Giới thiệu Câu Điều Kiện Loại 1)',
            duration: '9 mins',
            content: `
**English:**
Used for real or likely situations in the future.
If + Present Simple, will + base verb
If it rains, we will stay home.

Can use other modals: may, might, can, etc.
If you study, you can pass the exam.

Order can be reversed: We will stay home if it rains.

**Vietnamese Translation (Dịch Tiếng Việt):**
Dùng cho tình huống thực tế hoặc có khả năng xảy ra trong tương lai.
If + Hiện Tại Đơn, will + động từ nguyên thể
If it rains, we will stay home. (Nếu trời mưa, chúng tôi sẽ ở nhà.)

Có thể dùng modal khác: may, might, can, v.v.
If you study, you can pass the exam. (Nếu bạn học, bạn có thể đỗ kỳ thi.)

Có thể đảo ngược: We will stay home if it rains. (Chúng tôi sẽ ở nhà nếu trời mưa.)
            `,
            examples: [
              { 
                example: 'If you heat water to 100°C, it boils.', 
                explanation: 'General truth (Sự thật chung)',
                vietnamese: {
                  example: 'Nếu bạn đun nước đến 100°C, nó sôi.',
                  explanation: 'Sự thật chung'
                }
              },
              { 
                example: 'If I see her, I will tell her.', 
                explanation: 'Future possibility (Khả năng tương lai)',
                vietnamese: {
                  example: 'Nếu tôi gặp cô ấy, tôi sẽ nói với cô ấy.',
                  explanation: 'Khả năng tương lai'
                }
              },
              { 
                example: 'We might go out if the weather improves.', 
                explanation: 'With modal "might" (Với modal "might")',
                vietnamese: {
                  example: 'Chúng tôi có thể ra ngoài nếu thời tiết tốt hơn.',
                  explanation: 'Với modal "might"'
                }
              },
              { 
                example: 'Call me if you need help.', 
                explanation: 'Reversed order (Đảo ngược thứ tự)',
                vietnamese: {
                  example: 'Gọi tôi nếu bạn cần giúp đỡ.',
                  explanation: 'Đảo ngược thứ tự'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'fc_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'If it _____ tomorrow, we will cancel the picnic. (Nếu trời _____ ngày mai, chúng tôi sẽ hủy picnic.)',
            options: [
              { text: 'rains', isCorrect: true, explanation: 'Present simple in if-clause (Hiện tại đơn trong mệnh đề if)' },
              { text: 'will rain', isCorrect: false, explanation: 'No will in if-clause for first conditional (Không dùng will trong mệnh đề if cho loại 1)' },
              { text: 'rained', isCorrect: false, explanation: 'Past tense for second conditional (Quá khứ cho loại 2)' },
              { text: 'is raining', isCorrect: false, explanation: 'Present continuous not standard here (Hiện tại tiếp diễn không chuẩn ở đây)' },
            ],
          },
          {
            exerciseId: 'fc_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'If you _____ (study) hard, you _____ (pass) the exam. (Nếu bạn _____ (học) chăm, bạn _____ (đỗ) kỳ thi.)',
            correctAnswer: 'study ... will pass',
            hints: ['Present simple in if (Hiện tại đơn trong if)', 'Will in main clause (Will trong mệnh đề chính)'],
            explanation: 'Standard first conditional structure (Cấu trúc câu điều kiện loại 1 chuẩn)',
          },
        ],
        vocabulary: [
          { 
            word: 'possibility', 
            meaning: 'Chance of happening (Khả năng xảy ra)', 
            example: 'High possibility of rain. (Khả năng mưa cao.)' 
          },
          { 
            word: 'likely', 
            meaning: 'Probably true (Có lẽ đúng)', 
            example: 'It\'s likely to happen. (Có lẽ sẽ xảy ra.)' 
          },
          { 
            word: 'clause', 
            meaning: 'Part of a sentence (Phần của câu)', 
            example: 'If-clause. (Mệnh đề if.)' 
          },
        ],
      },

      // Topic 5: Comparatives and Superlatives
      comparativesSuperlatives: {
        id: 'comparatives_superlatives',
        title: 'Comparatives and Superlatives (So Sánh Hơn và So Sánh Nhất)',
        difficulty: 'Intermediate',
        icon: '📊',
        description: 'Compare things and people (So sánh sự vật và con người)',
        lessons: [
          {
            lessonId: 'cs_001',
            title: 'Forming Comparatives (Hình Thành So Sánh Hơn)',
            duration: '10 mins',
            content: `
**English:**
Short adjectives (1 syllable): adj + -er + than
tall → taller than

Long adjectives (2+ syllables): more + adj + than
beautiful → more beautiful than

Irregular: good → better, bad → worse, far → farther/further

As...as for equality: as tall as

**Vietnamese Translation (Dịch Tiếng Việt):**
Tính từ ngắn (1 âm tiết): adj + -er + than
tall → taller than (cao hơn)

Tính từ dài (2+ âm tiết): more + adj + than
beautiful → more beautiful than (đẹp hơn)

Bất quy tắc: good → better (tốt hơn), bad → worse (tệ hơn), far → farther/further (xa hơn)

As...as cho bằng nhau: as tall as (cao bằng)
            `,
            examples: [
              { 
                example: 'This book is more interesting than that one.', 
                explanation: 'Long adjective (Tính từ dài)',
                vietnamese: {
                  example: 'Cuốn sách này thú vị hơn cuốn kia.',
                  explanation: 'Tính từ dài'
                }
              },
              { 
                example: 'She runs faster than me.', 
                explanation: 'Short adjective (Tính từ ngắn)',
                vietnamese: {
                  example: 'Cô ấy chạy nhanh hơn tôi.',
                  explanation: 'Tính từ ngắn'
                }
              },
              { 
                example: 'My phone is as good as yours.', 
                explanation: 'Equality (Bằng nhau)',
                vietnamese: {
                  example: 'Điện thoại của tôi tốt bằng của bạn.',
                  explanation: 'Bằng nhau'
                }
              },
              { 
                example: 'This test was worse than the last one.', 
                explanation: 'Irregular (Bất quy tắc)',
                vietnamese: {
                  example: 'Bài kiểm tra này tệ hơn lần trước.',
                  explanation: 'Bất quy tắc'
                }
              },
            ],
          },
          {
            lessonId: 'cs_002',
            title: 'Forming Superlatives (Hình Thành So Sánh Nhất)',
            duration: '10 mins',
            content: `
**English:**
Short adjectives: the + adj + -est
tall → the tallest

Long adjectives: the most + adj
beautiful → the most beautiful

Irregular: good → the best, bad → the worst, far → the farthest/furthest

In a group: the tallest in the class

**Vietnamese Translation (Dịch Tiếng Việt):**
Tính từ ngắn: the + adj + -est
tall → the tallest (cao nhất)

Tính từ dài: the most + adj
beautiful → the most beautiful (đẹp nhất)

Bất quy tắc: good → the best (tốt nhất), bad → the worst (tệ nhất), far → the farthest/furthest (xa nhất)

Trong nhóm: the tallest in the class (cao nhất lớp)
            `,
            examples: [
              { 
                example: 'Mount Everest is the highest mountain.', 
                explanation: 'Short adjective (Tính từ ngắn)',
                vietnamese: {
                  example: 'Núi Everest là ngọn núi cao nhất.',
                  explanation: 'Tính từ ngắn'
                }
              },
              { 
                example: 'This is the most expensive car in the showroom.', 
                explanation: 'Long adjective (Tính từ dài)',
                vietnamese: {
                  example: 'Đây là chiếc xe đắt nhất trong showroom.',
                  explanation: 'Tính từ dài'
                }
              },
              { 
                example: 'She is the best student in school.', 
                explanation: 'Irregular (Bất quy tắc)',
                vietnamese: {
                  example: 'Cô ấy là học sinh giỏi nhất trường.',
                  explanation: 'Bất quy tắc'
                }
              },
              { 
                example: "That was the worst movie I've ever seen.", 
                explanation: 'Irregular negative (Bất quy tắc phủ định)',
                vietnamese: {
                  example: 'Đó là bộ phim tệ nhất tôi từng xem.',
                  explanation: 'Bất quy tắc phủ định'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'cs_ex_001',
            type: 'multiple_choice',
            difficulty: 'Easy',
            question: 'My house is _____ (big) than yours. (Nhà tôi _____ (lớn) hơn nhà bạn.)',
            options: [
              { text: 'bigger', isCorrect: true, explanation: 'Short adjective + -er (Tính từ ngắn + -er)' },
              { text: 'more big', isCorrect: false, explanation: 'For long adjectives only (Chỉ cho tính từ dài)' },
              { text: 'biggest', isCorrect: false, explanation: 'Superlative, not comparative (So sánh nhất, không phải hơn)' },
              { text: 'as big', isCorrect: false, explanation: 'For equality (Cho bằng nhau)' },
            ],
          },
          {
            exerciseId: 'cs_ex_002',
            type: 'fill_blank',
            difficulty: 'Medium',
            question: 'This is _____ (good) book in the library. (Đây là _____ (hay) sách nhất trong thư viện.)',
            correctAnswer: 'the best',
            hints: ['Irregular superlative (So sánh nhất bất quy tắc)', 'The + superlative (The + so sánh nhất)'],
            explanation: 'Good → the best (Good → tốt nhất)',
          },
          {
            exerciseId: 'cs_ex_003',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'She is not as _____ (tall) as her sister. (Cô ấy không _____ (cao) bằng chị gái.)',
            options: [
              { text: 'tall', isCorrect: true, explanation: 'As...as for equality (As...as cho bằng nhau)' },
              { text: 'taller', isCorrect: false, explanation: 'Comparative (So sánh hơn)' },
              { text: 'the tallest', isCorrect: false, explanation: 'Superlative (So sánh nhất)' },
              { text: 'more tall', isCorrect: false, explanation: 'Wrong form (Dạng sai)' },
            ],
          },
          {
            exerciseId: 'cs_ex_004',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'The weather today is _____ (bad) than yesterday. (Thời tiết hôm nay _____ (tệ) hơn hôm qua.)',
            correctAnswer: 'worse',
            hints: ['Irregular comparative (So sánh hơn bất quy tắc)', 'Bad → worse (Bad → tệ hơn)'],
            explanation: 'Irregular form for bad (Dạng bất quy tắc cho bad)',
          },
        ],
        vocabulary: [
          { 
            word: 'adjective', 
            meaning: 'Word describing a noun (Từ miêu tả danh từ)', 
            example: 'Beautiful adjective. (Tính từ đẹp.)' 
          },
          { 
            word: 'equality', 
            meaning: 'Being the same (Bằng nhau)', 
            example: 'Equality in height. (Bằng nhau về chiều cao.)' 
          },
          { 
            word: 'irregular', 
            meaning: 'Not following the usual rule (Không theo quy tắc thông thường)', 
            example: 'Irregular verb. (Động từ bất quy tắc.)' 
          },
          { 
            word: 'syllable', 
            meaning: 'Unit of pronunciation (Đơn vị phát âm)', 
            example: 'One-syllable word. (Từ một âm tiết.)' 
          },
        ],
      },
    },
  },
  advanced: {
    level: 'Advanced',
    description: 'Advanced grammar topics for fluency and nuance (Các chủ đề ngữ pháp nâng cao để đạt sự lưu loát và tinh tế)',
    topics: {
      // Topic 1: Past Perfect and Past Perfect Continuous
      pastPerfectContinuous: {
        id: 'past_perfect_continuous',
        title: 'Past Perfect and Past Perfect Continuous (Quá Khứ Hoàn Thành và Quá Khứ Hoàn Thành Tiếp Diễn)',
        difficulty: 'Advanced',
        icon: '⏳🔄',
        description: 'Express earlier past actions and ongoing past states (Bày tỏ hành động quá khứ trước đó và trạng thái quá khứ đang diễn ra)',
        lessons: [
          {
            lessonId: 'ppc_001',
            title: 'Past Perfect: Completed Actions Before Another Past Action (Quá Khứ Hoàn Thành: Hành Động Hoàn Thành Trước Hành Động Quá Khứ Khác)',
            duration: '12 mins',
            content: `
**English:**
Past Perfect: Actions completed before another past action
By the time we arrived, the movie had started.

Form: Subject + had + past participle
Negative: hadn't + past participle
Question: Had + Subject + past participle?

Used in reported speech for past tenses and third conditional.

**Vietnamese Translation (Dịch Tiếng Việt):**
Quá Khứ Hoàn Thành: Hành động hoàn thành trước hành động quá khứ khác
By the time we arrived, the movie had started. (Khi chúng tôi đến, bộ phim đã bắt đầu.)

Cấu trúc: Chủ ngữ + had + past participle
Phủ định: hadn't + past participle
Câu hỏi: Had + Chủ ngữ + past participle?

Dùng trong lời nói gián tiếp cho thì quá khứ và điều kiện loại 3.
            `,
            examples: [
              { 
                example: 'She had finished her homework before dinner.', 
                explanation: 'Completed before another past event (Hoàn thành trước sự kiện quá khứ khác)',
                vietnamese: {
                  example: 'Cô ấy đã làm xong bài tập trước bữa tối.',
                  explanation: 'Hoàn thành trước sự kiện quá khứ khác'
                }
              },
              { 
                example: 'They hadn\'t eaten when the guests arrived.',                explanation: 'Negative form (Dạng phủ định)',
                vietnamese: {
                  example: 'Họ chưa ăn khi khách đến.',
                  explanation: 'Dạng phủ định'
                }
              },
              { 
                example: 'Had you seen the news before the meeting?', 
                explanation: 'Question form (Dạng câu hỏi)',
                vietnamese: {
                  example: 'Bạn đã xem tin tức trước cuộc họp chưa?',
                  explanation: 'Dạng câu hỏi'
                }
              },
              { 
                example: 'If I had known, I would have helped.', 
                explanation: 'In third conditional (Trong điều kiện loại 3)',
                vietnamese: {
                  example: 'Nếu tôi biết, tôi đã giúp.',
                  explanation: 'Trong điều kiện loại 3'
                }
              },
            ],
          },
          {
            lessonId: 'ppc_002',
            title: 'Past Perfect Continuous: Ongoing Actions Before Another Past Action (Quá Khứ Hoàn Thành Tiếp Diễn: Hành Động Đang Diễn Ra Trước Hành Động Quá Khứ Khác)',
            duration: '13 mins',
            content: `
**English:**
Past Perfect Continuous: Ongoing actions before another past point, emphasizing duration or cause
She was tired because she had been working all day.

Form: Subject + had been + verb-ing
Negative: hadn't been + verb-ing
Question: Had + Subject + been + verb-ing?

Often with for/since; explains effects like "wet from rain."

**Vietnamese Translation (Dịch Tiếng Việt):**
Quá Khứ Hoàn Thành Tiếp Diễn: Hành động đang diễn ra trước điểm quá khứ khác, nhấn mạnh thời lượng hoặc nguyên nhân
She was tired because she had been working all day. (Cô ấy mệt vì đã làm việc cả ngày.)

Cấu trúc: Chủ ngữ + had been + verb-ing
Phủ định: hadn't been + verb-ing
Câu hỏi: Had + Chủ ngữ + been + verb-ing?

Thường với for/since; giải thích hiệu ứng như "wet from rain" (ướt vì mưa).
            `,
            examples: [
              { 
                example: 'They had been waiting for hours when the train finally arrived.', 
                explanation: 'Duration before past event (Thời lượng trước sự kiện quá khứ)',
                vietnamese: {
                  example: 'Họ đã chờ hàng giờ khi tàu cuối cùng đến.',
                  explanation: 'Thời lượng trước sự kiện quá khứ'
                }
              },
              { 
                example: 'He hadn\'t been sleeping well, so he was exhausted.', 
                explanation: 'Cause of past state (Nguyên nhân của trạng thái quá khứ)',
                vietnamese: {
                  example: 'Anh ấy chưa ngủ ngon, nên mệt mỏi.',
                  explanation: 'Nguyên nhân của trạng thái quá khứ'
                }
              },
              { 
                example: 'How long had you been studying English before moving abroad?', 
                explanation: 'Question with duration (Câu hỏi với thời lượng)',
                vietnamese: {
                  example: 'Bạn đã học tiếng Anh bao lâu trước khi chuyển ra nước ngoài?',
                  explanation: 'Câu hỏi với thời lượng'
                }
              },
              { 
                example: 'The ground was wet because it had been raining.', 
                explanation: 'Explaining effect (Giải thích hiệu ứng)',
                vietnamese: {
                  example: 'Mặt đất ướt vì đã mưa.',
                  explanation: 'Giải thích hiệu ứng'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'ppc_ex_001',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'By the time the police arrived, the thief _____ away. (Khi cảnh sát đến, tên trộm _____ mất.)',
            options: [
              { text: 'had run', isCorrect: true, explanation: 'Past perfect for completion before past event (Quá khứ hoàn thành cho hoàn thành trước sự kiện quá khứ)' },
              { text: 'ran', isCorrect: false, explanation: 'Past simple for simultaneous actions (Quá khứ đơn cho hành động đồng thời)' },
              { text: 'was running', isCorrect: false, explanation: 'Past continuous for ongoing (Quá khứ tiếp diễn cho đang diễn ra)' },
              { text: 'has run', isCorrect: false, explanation: 'Present perfect not for past sequence (Hiện tại hoàn thành không cho chuỗi quá khứ)' },
            ],
          },
          {
            exerciseId: 'ppc_ex_002',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'She was crying because she _____ (cry) for hours. (Cô ấy khóc vì đã _____ (khóc) hàng giờ.)',
            correctAnswer: 'had been crying',
            hints: ['Past perfect continuous for duration causing effect (Quá khứ hoàn thành tiếp diễn cho thời lượng gây hiệu ứng)', 'Had been + verb-ing (Had been + verb-ing)'],
            explanation: 'Emphasizes ongoing action leading to past result (Nhấn mạnh hành động đang diễn ra dẫn đến kết quả quá khứ)',
          },
          {
            exerciseId: 'ppc_ex_003',
            type: 'multiple_choice',
            difficulty: 'Hard',
            question: 'If we _____ (know) about the storm, we would have stayed home. (Nếu chúng tôi _____ (biết) về cơn bão, chúng tôi đã ở nhà.)',
            options: [
              { text: 'had known', isCorrect: true, explanation: 'Past perfect in third conditional (Quá khứ hoàn thành trong điều kiện loại 3)' },
              { text: 'knew', isCorrect: false, explanation: 'Past simple for second conditional (Quá khứ đơn cho loại 2)' },
              { text: 'have known', isCorrect: false, explanation: 'Present perfect for real condition (Hiện tại hoàn thành cho điều kiện thực tế)' },
              { text: 'had been knowing', isCorrect: false, explanation: 'Stative verbs not continuous (Động từ trạng thái không dùng tiếp diễn)' },
            ],
          },
        ],
        vocabulary: [
          { 
            word: 'sequence', 
            meaning: 'Order of events (Trình tự sự kiện)', 
            example: 'Past events in sequence. (Sự kiện quá khứ theo trình tự.)' 
          },
          { 
            word: 'duration', 
            meaning: 'Length of time something continues (Độ dài thời gian điều gì đó tiếp tục)', 
            example: 'Duration of the meeting. (Thời lượng cuộc họp.)' 
          },
          { 
            word: 'emphasize', 
            meaning: 'To highlight or stress (Nhấn mạnh)', 
            example: 'Emphasize the importance. (Nhấn mạnh tầm quan trọng.)' 
          },
          { 
            word: 'effect', 
            meaning: 'Result of an action (Kết quả của hành động)', 
            example: 'Side effect of medicine. (Tác dụng phụ của thuốc.)' 
          },
        ],
      },

      // Topic 2: Second and Third Conditionals
      secondThirdConditionals: {
        id: 'second_third_conditionals',
        title: 'Second and Third Conditionals (Câu Điều Kiện Loại 2 và Loại 3)',
        difficulty: 'Advanced',
        icon: '❄️⛄',
        description: 'Hypothetical and unreal situations (Tình huống giả định và không thực tế)',
        lessons: [
          {
            lessonId: 'stc_001',
            title: 'Second Conditional: Unreal Present/Future (Điều Kiện Loại 2: Hiện Tại/Tương Lai Không Thực)',
            duration: '11 mins',
            content: `
**English:**
Second Conditional: Unreal or unlikely situations in present/future
If + Past Simple, would + base verb
If I won the lottery, I would travel the world.

For advice/imagination: If I were you, I would apologize.

Mixed: Past affecting present: If I had studied harder, I would be successful now.

**Vietnamese Translation (Dịch Tiếng Việt):**
Điều Kiện Loại 2: Tình huống không thực hoặc khó xảy ra ở hiện tại/tương lai
If + Quá Khứ Đơn, would + động từ nguyên thể
If I won the lottery, I would travel the world. (Nếu tôi trúng số, tôi sẽ du lịch thế giới.)

Cho lời khuyên/tưởng tượng: If I were you, I would apologize. (Nếu là bạn, tôi sẽ xin lỗi.)

Kết hợp: Quá khứ ảnh hưởng hiện tại: If I had studied harder, I would be successful now. (Nếu tôi học chăm hơn, giờ tôi đã thành công.)
            `,
            examples: [
              { 
                example: 'If it rained, we would cancel the game.', 
                explanation: 'Unlikely future (Tương lai khó xảy ra)',
                vietnamese: {
                  example: 'Nếu trời mưa, chúng tôi sẽ hủy trận đấu.',
                  explanation: 'Tương lai khó xảy ra'
                }
              },
              { 
                example: 'If I were rich, I would buy a yacht.', 
                explanation: 'Unreal present with "were" (Hiện tại không thực với "were")',
                vietnamese: {
                  example: 'Nếu tôi giàu, tôi sẽ mua du thuyền.',
                  explanation: 'Hiện tại không thực với "were"'
                }
              },
              { 
                example: 'She would help if she had time.', 
                explanation: 'Reversed order (Đảo ngược thứ tự)',
                vietnamese: {
                  example: 'Cô ấy sẽ giúp nếu có thời gian.',
                  explanation: 'Đảo ngược thứ tự'
                }
              },
              { 
                example: 'If I had won the race, I would feel proud now.', 
                explanation: 'Mixed conditional (Điều kiện kết hợp)',
                vietnamese: {
                  example: 'Nếu tôi thắng cuộc đua, giờ tôi đã tự hào.',
                  explanation: 'Điều kiện kết hợp'
                }
              },
            ],
          },
          {
            lessonId: 'stc_002',
            title: 'Third Conditional: Unreal Past (Điều Kiện Loại 3: Quá Khứ Không Thực)',
            duration: '12 mins',
            content: `
**English:**
Third Conditional: Hypothetical past situations and regrets
If + Past Perfect, would have + past participle
If I had studied, I would have passed the exam.

For criticism/regret: If you had listened, this wouldn't have happened.

Could have/Might have for possibilities: If we had left earlier, we could have caught the train.

**Vietnamese Translation (Dịch Tiếng Việt):**
Điều Kiện Loại 3: Tình huống giả định quá khứ và hối tiếc
If + Quá Khứ Hoàn Thành, would have + past participle
If I had studied, I would have passed the exam. (Nếu tôi học, tôi đã đỗ kỳ thi.)

Cho phê phán/hối tiếc: If you had listened, this wouldn't have happened. (Nếu bạn nghe, chuyện này đã không xảy ra.)

Could have/Might have cho khả năng: If we had left earlier, we could have caught the train. (Nếu chúng tôi đi sớm, chúng tôi đã bắt kịp tàu.)
            `,
            examples: [
              { 
                example: 'If she had called, I would have answered.', 
                explanation: 'Unreal past action (Hành động quá khứ không thực)',
                vietnamese: {
                  example: 'Nếu cô ấy gọi, tôi đã trả lời.',
                  explanation: 'Hành động quá khứ không thực'
                }
              },
              { 
                example: 'We wouldn\'t have gotten lost if we had used the map.', 
                explanation: 'Negative result (Kết quả phủ định)',
                vietnamese: {
                  example: 'Chúng tôi đã không lạc nếu dùng bản đồ.',
                  explanation: 'Kết quả phủ định'
                }
              },
              { 
                example: 'If he had been careful, he might have avoided the accident.', 
                explanation: 'With "might have" for possibility (Với "might have" cho khả năng)',
                vietnamese: {
                  example: 'Nếu anh ấy cẩn thận, anh ấy đã tránh được tai nạn.',
                  explanation: 'Với "might have" cho khả năng'
                }
              },
              { 
                example: 'I wish I had learned Spanish earlier.', 
                explanation: 'Regret with third conditional implication (Hối tiếc ngụ ý điều kiện loại 3)',
                vietnamese: {
                  example: 'Ước gì tôi học tiếng Tây Ban Nha sớm hơn.',
                  explanation: 'Hối tiếc ngụ ý điều kiện loại 3'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'stc_ex_001',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'If I _____ you, I _____ the job offer. (Nếu là bạn, tôi _____ lời đề nghị công việc.)',
            options: [
              { text: 'were ... would accept', isCorrect: true, explanation: 'Second conditional for advice (Loại 2 cho lời khuyên)' },
              { text: 'am ... accept', isCorrect: false, explanation: 'Present tenses for real situations (Hiện tại cho tình huống thực tế)' },
              { text: 'had been ... had accepted', isCorrect: false, explanation: 'Third conditional for past (Loại 3 cho quá khứ)' },
              { text: 'will be ... will accept', isCorrect: false, explanation: 'First conditional for likely future (Loại 1 cho tương lai có thể)' },
            ],
          },
          {
            exerciseId: 'stc_ex_002',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'If we _____ (not/miss) the bus, we _____ (arrive) on time. (Nếu chúng tôi _____ (không trễ) xe buýt, chúng tôi _____ (đến) đúng giờ.)',
            correctAnswer: 'hadn\'t missed ... would have arrived',
            hints: ['Past perfect in if-clause (Quá khứ hoàn thành trong mệnh đề if)', 'Would have + past participle in main clause (Would have + past participle trong mệnh đề chính)'],
            explanation: 'Third conditional for unreal past (Loại 3 cho quá khứ không thực)',
          },
          {
            exerciseId: 'stc_ex_003',
            type: 'multiple_choice',
            difficulty: 'Hard',
            question: 'If she _____ harder last year, she _____ a promotion now. (Nếu cô ấy _____ chăm chỉ năm ngoái, giờ cô ấy _____ thăng chức.)',
            options: [
              { text: 'had worked ... would have', isCorrect: true, explanation: 'Mixed third-second conditional (Kết hợp loại 3-2)' },
              { text: 'worked ... would have', isCorrect: false, explanation: 'Inconsistent tenses (Thì không nhất quán)' },
              { text: 'works ... will have', isCorrect: false, explanation: 'First conditional structure (Cấu trúc loại 1)' },
              { text: 'had worked ... would work', isCorrect: false, explanation: 'Close, but main clause should be present for mixed (Mệnh đề chính nên là hiện tại cho kết hợp)' },
            ],
          },
        ],
        vocabulary: [
          { 
            word: 'hypothetical', 
            meaning: 'Based on an imagined situation (Dựa trên tình huống tưởng tượng)', 
            example: 'Hypothetical scenario. (Tình huống giả định.)' 
          },
          { 
            word: 'regret', 
            meaning: 'Feeling sorry about the past (Cảm giác tiếc nuối về quá khứ)', 
            example: 'No regrets in life. (Không hối tiếc trong đời.)' 
          },
          { 
            word: 'implication', 
            meaning: 'Something suggested but not directly stated (Điều gì đó gợi ý nhưng không nói trực tiếp)', 
            example: 'Hidden implication. (Ý ngầm.)' 
          },
          { 
            word: 'criticism', 
            meaning: 'Expression of disapproval (Bày tỏ sự không tán thành)', 
            example: 'Constructive criticism. (Phê bình mang tính xây dựng.)' 
          },
        ],
      },

      // Topic 3: Reported Speech
      reportedSpeech: {
        id: 'reported_speech',
        title: 'Reported Speech (Lời Nói Gián Tiếp)',
        difficulty: 'Advanced',
        icon: '💬',
        description: 'Convert direct speech to indirect forms (Chuyển lời nói trực tiếp sang gián tiếp)',
        lessons: [
          {
            lessonId: 'rs_001',
            title: 'Statements and Questions in Reported Speech (Câu Trần Thuật và Câu Hỏi trong Lời Nói Gián Tiếp)',
            duration: '12 mins',
            content: `
**English:**
Reported Speech: Backshift tenses for past reporting
Direct: "I am tired," he said. → Reported: He said he was tired.

Tense changes: Present Simple → Past Simple; Will → Would; Present Continuous → Past Continuous.

Questions: Say/Ask + if/whether (Yes/No); Wh-questions keep Wh-word.
Direct: "Where are you?" → He asked where I was.

No backshift if reporting verb is present or truth/universal.

**Vietnamese Translation (Dịch Tiếng Việt):**
Lời Nói Gián Tiếp: Lùi thì cho báo cáo quá khứ
Direct: "I am tired," he said. → Reported: He said he was tired. (Anh ấy nói anh ấy mệt.)

Thay đổi thì: Hiện Tại Đơn → Quá Khứ Đơn; Will → Would; Hiện Tại Tiếp Diễn → Quá Khứ Tiếp Diễn.

Câu hỏi: Say/Ask + if/whether (Yes/No); Câu hỏi Wh giữ Wh-word.
Direct: "Where are you?" → He asked where I was. (Anh ấy hỏi tôi ở đâu.)

Không lùi thì nếu động từ báo cáo ở hiện tại hoặc sự thật/vô thời.
            `,
            examples: [
              { 
                example: '"I will go tomorrow," she said. → She said she would go the next day.', 
                explanation: 'Future to conditional + time shift (Tương lai thành điều kiện + dịch thời gian)',
                vietnamese: {
                  example: 'Cô ấy nói cô ấy sẽ đi ngày hôm sau.',
                  explanation: 'Tương lai thành điều kiện + dịch thời gian'
                }
              },
              { 
                example: '"Do you like coffee?" he asked. → He asked if I liked coffee.', 
                explanation: 'Yes/No question (Câu hỏi Yes/No)',
                vietnamese: {
                  example: 'Anh ấy hỏi tôi có thích cà phê không.',
                  explanation: 'Câu hỏi Yes/No'
                }
              },
              { 
                example: '"What time is it?" → She asked what time it was.', 
                explanation: 'Wh-question (Câu hỏi Wh)',
                vietnamese: {
                  example: 'Cô ấy hỏi giờ là mấy giờ.',
                  explanation: 'Câu hỏi Wh'
                }
              },
              { 
                example: 'He says, "The Earth is round." → He says the Earth is round.', 
                explanation: 'No backshift for universal truth (Không lùi thì cho sự thật phổ quát)',
                vietnamese: {
                  example: 'Anh ấy nói Trái Đất tròn.',
                  explanation: 'Không lùi thì cho sự thật phổ quát'
                }
              },
            ],
          },
          {
            lessonId: 'rs_002',
            title: 'Commands, Requests, and Suggestions in Reported Speech (Lệnh, Yêu Cầu, và Gợi Ý trong Lời Nói Gián Tiếp)',
            duration: '11 mins',
            content: `
**English:**
Commands/Requests: Tell/Ask + object + infinitive
Direct: "Close the door!" → He told me to close the door.
Negative: "Don't touch it!" → She told him not to touch it.

Suggestions: Suggest + gerund or that-clause
Direct: "Let's go!" → He suggested going. / He suggested that we go.

Reporting verbs: Advise, warn, recommend, etc., with specific patterns.

Time/place words: Here → there; Now → then; This → that.

**Vietnamese Translation (Dịch Tiếng Việt):**
Lệnh/Yêu Cầu: Tell/Ask + tân ngữ + to infinitive
Direct: "Close the door!" → He told me to close the door. (Anh ấy bảo tôi đóng cửa.)
Phủ định: "Don't touch it!" → She told him not to touch it. (Cô ấy bảo anh ấy đừng chạm.)

Gợi Ý: Suggest + gerund hoặc that-clause
Direct: "Let's go!" → He suggested going. / He suggested that we go. (Anh ấy gợi ý chúng ta đi.)

Động từ báo cáo: Advise, warn, recommend, v.v., với mẫu cụ thể.

Từ thời gian/nơi chốn: Here → there; Now → then; This → that.
            `,
            examples: [
              { 
                example: '"Please sit down," the teacher said. → The teacher asked us to sit down.', 
                explanation: 'Polite request (Yêu cầu lịch sự)',
                vietnamese: {
                  example: 'Thầy cô yêu cầu chúng tôi ngồi xuống.',
                  explanation: 'Yêu cầu lịch sự'
                }
              },
              { 
                example: '"You should see a doctor," she said. → She advised me to see a doctor.', 
                explanation: 'Advice with "advise" (Lời khuyên với "advise")',
                vietnamese: {
                  example: 'Cô ấy khuyên tôi gặp bác sĩ.',
                  explanation: 'Lời khuyên với "advise"'
                }
              },
              { 
                example: '"Why don\'t we eat out?" → He suggested eating out.', 
                explanation: 'Suggestion with gerund (Gợi ý với gerund)',
                vietnamese: {
                  example: 'Anh ấy gợi ý ăn ngoài.',
                  explanation: 'Gợi ý với gerund'
                }
              },
              { 
                example: '"Be careful!" → She warned me to be careful.', 
                explanation: 'Warning (Cảnh báo)',
                vietnamese: {
                  example: 'Cô ấy cảnh báo tôi cẩn thận.',
                  explanation: 'Cảnh báo'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'rs_ex_001',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'Direct: "I\'m leaving now." → Reported: She said she _____ now.',
            options: [
              { text: 'was leaving then', isCorrect: true, explanation: 'Backshift + time word change (Lùi thì + đổi từ thời gian)' },
              { text: 'is leaving now', isCorrect: false, explanation: 'No backshift needed only for present reporting (Không lùi thì chỉ cho báo cáo hiện tại)' },
              { text: 'leaves now', isCorrect: false, explanation: 'Incorrect tense shift (Lùi thì sai)' },
              { text: 'will leave then', isCorrect: false, explanation: 'Wrong future form (Dạng tương lai sai)' },
            ],
          },
          {
            exerciseId: 'rs_ex_002',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'Direct: "Don\'t forget your keys!" → He told me _____ my keys. (Direct: "Đừng quên chìa khóa!")',
            correctAnswer: 'not to forget',
            hints: ['Tell + object + not to infinitive (Tell + tân ngữ + not to infinitive)', 'Negative command (Lệnh phủ định)'],
            explanation: 'Reported command structure (Cấu trúc lệnh gián tiếp)',
          },
          {
            exerciseId: 'rs_ex_003',
            type: 'multiple_choice',
            difficulty: 'Hard',
            question: 'Direct: "Shall we start?" → He suggested _____.',
            options: [
              { text: 'starting', isCorrect: true, explanation: 'Suggest + gerund (Suggest + gerund)' },
              { text: 'to start', isCorrect: false, explanation: 'Infinitive for other verbs like advise (To infinitive cho động từ khác như advise)' },
              { text: 'that we start', isCorrect: false, explanation: 'Alternative that-clause, but gerund is direct (That-clause thay thế, nhưng gerund trực tiếp hơn)' },
              { text: 'we starting', isCorrect: false, explanation: 'Incorrect structure (Cấu trúc sai)' },
            ],
          },
        ],
        vocabulary: [
          { 
            word: 'backshift', 
            meaning: 'Changing tenses in reported speech (Thay đổi thì trong lời nói gián tiếp)', 
            example: 'Tense backshift rules. (Quy tắc lùi thì.)' 
          },
          { 
            word: 'infinitive', 
            meaning: 'Base form of verb (Dạng nguyên thể của động từ)', 
            example: 'To infinitive after tell. (To infinitive sau tell.)' 
          },
          { 
            word: 'gerund', 
            meaning: 'Verb-ing as noun (Verb-ing như danh từ)', 
            example: 'Suggest + gerund. (Suggest + gerund.)' 
          },
          { 
            word: 'universal', 
            meaning: 'True for all time (Đúng cho mọi thời gian)', 
            example: 'Universal truth. (Sự thật phổ quát.)' 
          },
        ],
      },

      // Topic 4: Passive Voice
      passiveVoice: {
        id: 'passive_voice',
        title: 'Passive Voice (Thể Bị Động)',
        difficulty: 'Advanced',
        icon: '🔄',
        description: 'Focus on the action or receiver rather than the doer (Tập trung vào hành động hoặc người nhận hơn là người thực hiện)',
        lessons: [
          {
            lessonId: 'pv_001',
            title: 'Forming Passives Across Tenses (Hình Thành Thể Bị Động Qua Các Thì)',
            duration: '12 mins',
            content: `
**English:**
Passive: Object becomes subject + be + past participle (+ by agent)
Present Simple: The book is read by students.
Past Simple: The window was broken.
Present Perfect: The report has been finished.

Future: Will be done; Modals: Must be completed.

No agent if unknown/irrelevant; Get-passive for informal: The car got stolen.

**Vietnamese Translation (Dịch Tiếng Việt):**
Thể Bị Động: Tân ngữ thành chủ ngữ + be + past participle (+ by agent)
Hiện Tại Đơn: The book is read by students. (Cuốn sách được đọc bởi học sinh.)
Quá Khứ Đơn: The window was broken. (Cửa sổ bị vỡ.)
Hiện Tại Hoàn Thành: The report has been finished. (Báo cáo đã được hoàn thành.)

Tương Lai: Will be done; Modal: Must be completed. (Phải được hoàn thành.)

Không dùng agent nếu không biết/không quan trọng; Get-passive cho thân mật: The car got stolen. (Xe bị đánh cắp.)
            `,
            examples: [
              { 
                example: 'The cake was eaten by the children.', 
                explanation: 'Past simple passive (Quá khứ đơn bị động)',
                vietnamese: {
                  example: 'Chiếc bánh bị trẻ em ăn.',
                  explanation: 'Quá khứ đơn bị động'
                }
              },
              { 
                example: 'English is spoken in many countries.', 
                explanation: 'Present simple passive (Hiện tại đơn bị động)',
                vietnamese: {
                  example: 'Tiếng Anh được nói ở nhiều quốc gia.',
                  explanation: 'Hiện tại đơn bị động'
                }
              },
              { 
                example: 'The letter will be sent tomorrow.', 
                explanation: 'Future passive (Tương lai bị động)',
                vietnamese: {
                  example: 'Lá thư sẽ được gửi ngày mai.',
                  explanation: 'Tương lai bị động'
                }
              },
              { 
                example: 'This problem must be solved immediately.', 
                explanation: 'Modal passive (Modal bị động)',
                vietnamese: {
                  example: 'Vấn đề này phải được giải quyết ngay.',
                  explanation: 'Modal bị động'
                }
              },
            ],
          },
          {
            lessonId: 'pv_002',
            title: 'Advanced Uses: Causative and Impersonal Passives (Sử Dụng Nâng Cao: Thể Gây Ra và Thể Bị Động Phi Cá Nhân)',
            duration: '13 mins',
            content: `
**English:**
Causative: Have/Get something done (arrange for others to do)
I had my car repaired. (Someone repaired it for me.)

Impersonal: It is said that...; People think... → It is thought that...
Used in formal writing; He is believed to be innocent.

Passives with reporting verbs: It was reported that the economy improved.

Double object: Give someone something → Something was given to someone.

**Vietnamese Translation (Dịch Tiếng Việt):**
Thể Gây Ra: Have/Get something done (sắp xếp cho người khác làm)
I had my car repaired. (Tôi nhờ sửa xe.) (Ai đó sửa giúp tôi.)

Phi Cá Nhân: It is said that...; People think... → It is thought that... (Được cho là...)
Dùng trong viết trang trọng; He is believed to be innocent. (Anh ấy được cho là vô tội.)

Bị động với động từ báo cáo: It was reported that the economy improved. (Được báo cáo rằng kinh tế cải thiện.)

Đối tượng kép: Give someone something → Something was given to someone. (Thứ gì đó được đưa cho ai đó.)
            `,
            examples: [
              { 
                example: 'She got her hair cut yesterday.', 
                explanation: 'Informal causative (Thể gây ra thân mật)',
                vietnamese: {
                  example: 'Cô ấy nhờ cắt tóc hôm qua.',
                  explanation: 'Thể gây ra thân mật'
                }
              },
              { 
                example: 'It is believed that climate change is accelerating.', 
                explanation: 'Impersonal passive (Bị động phi cá nhân)',
                vietnamese: {
                  example: 'Được cho rằng biến đổi khí hậu đang tăng tốc.',
                  explanation: 'Bị động phi cá nhân'
                }
              },
              { 
                example: 'The news was announced to the public.', 
                explanation: 'Passive with reporting verb (Bị động với động từ báo cáo)',
                vietnamese: {
                  example: 'Tin tức được thông báo cho công chúng.',
                  explanation: 'Bị động với động từ báo cáo'
                }
              },
              { 
                example: 'A gift was given to her by the committee.', 
                explanation: 'Double object passive (Bị động đối tượng kép)',
                vietnamese: {
                  example: 'Món quà được ủy ban tặng cô ấy.',
                  explanation: 'Bị động đối tượng kép'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'pv_ex_001',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'The book _____ by the author last year. (Cuốn sách _____ bởi tác giả năm ngoái.)',
            options: [
              { text: 'was written', isCorrect: true, explanation: 'Past simple passive (Quá khứ đơn bị động)' },
              { text: 'wrote', isCorrect: false, explanation: 'Active voice (Thể chủ động)' },
              { text: 'is written', isCorrect: false, explanation: 'Present passive (Hiện tại bị động)' },
              { text: 'has written', isCorrect: false, explanation: 'Present perfect active (Hiện tại hoàn thành chủ động)' },
            ],
          },
          {
            exerciseId: 'pv_ex_002',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'I need to _____ my computer _____; it\'s broken. (Tôi cần _____ máy tính _____; nó hỏng.)',
            correctAnswer: 'have ... repaired',
            hints: ['Causative have + object + past participle (Thể gây ra have + tân ngữ + past participle)'],
            explanation: 'Causative structure for arranging service (Cấu trúc gây ra cho sắp xếp dịch vụ)',
          },
          {
            exerciseId: 'pv_ex_003',
            type: 'multiple_choice',
            difficulty: 'Hard',
            question: 'It _____ that the meeting has been postponed. (Được _____ rằng cuộc họp bị hoãn.)',
            options: [
              { text: 'is reported', isCorrect: true, explanation: 'Impersonal passive with reporting verb (Bị động phi cá nhân với động từ báo cáo)' },
              { text: 'reports', isCorrect: false, explanation: 'Active form (Thể chủ động)' },
              { text: 'reported', isCorrect: false, explanation: 'Missing "is" for present (Thiếu "is" cho hiện tại)' },
              { text: 'will report', isCorrect: false, explanation: 'Future active (Tương lai chủ động)' },
            ],
          },
        ],
        vocabulary: [
          { 
            word: 'agent', 
            meaning: 'The doer in passive (Người thực hiện trong bị động)', 
            example: 'By the agent. (Bởi người thực hiện.)' 
          },
          { 
            word: 'participle', 
            meaning: 'Past form in passive (Dạng quá khứ trong bị động)', 
            example: 'Past participle required. (Cần phân từ quá khứ.)' 
          },
          { 
            word: 'causative', 
            meaning: 'Structure for causing an action (Cấu trúc cho gây ra hành động)', 
            example: 'Causative have. (Thể gây ra have.)' 
          },
          { 
            word: 'impersonal', 
            meaning: 'General or formal without specific subject (Chung chung hoặc trang trọng không có chủ ngữ cụ thể)', 
            example: 'Impersonal construction. (Cấu trúc phi cá nhân.)' 
          },
        ],
      },

      // Topic 5: Relative Clauses
      relativeClauses: {
        id: 'relative_clauses',
        title: 'Relative Clauses (Mệnh Đề Quan Hệ)',
        difficulty: 'Advanced',
        icon: '🔗',
        description: 'Define or add information with who, which, that, etc. (Xác định hoặc thêm thông tin với who, which, that, v.v.)',
        lessons: [
          {
            lessonId: 'rc_001',
            title: 'Defining and Non-Defining Relative Clauses (Mệnh Đề Quan Hệ Xác Định và Không Xác Định)',
            duration: '12 mins',
            content: `
**English:**
Defining: Essential info, no commas (restricts meaning)
The man who lives next door is friendly. (Specifies which man)

Non-Defining: Extra info, commas (adds detail)
My brother, who lives in London, is visiting. (Assumes one brother)

Relative pronouns: Who (people), Which (things), That (both, defining only), Whose (possession).

Omission: In defining, omit if object: The book (which) I read was great.

**Vietnamese Translation (Dịch Tiếng Việt):**
Xác Định: Thông tin thiết yếu, không dấu phẩy (hạn chế ý nghĩa)
The man who lives next door is friendly. (Người đàn ông sống cạnh nhà thân thiện.) (Chỉ rõ người nào)

Không Xác Định: Thông tin thêm, có dấu phẩy (thêm chi tiết)
My brother, who lives in London, is visiting. (Anh trai tôi, sống ở London, đang thăm.) (Giả định một anh trai)

Đại từ quan hệ: Who (người), Which (vật), That (cả hai, chỉ xác định), Whose (sở hữu).

Bỏ: Trong xác định, bỏ nếu tân ngữ: The book (which) I read was great. (Cuốn sách tôi đọc hay.)
            `,
            examples: [
              { 
                example: 'The car that broke down was mine.', 
                explanation: 'Defining clause (Mệnh đề xác định)',
                vietnamese: {
                  example: 'Chiếc xe hỏng là của tôi.',
                  explanation: 'Mệnh đề xác định'
                }
              },
              { 
                example: 'Paris, which is the capital of France, is beautiful.', 
                explanation: 'Non-defining clause (Mệnh đề không xác định)',
                vietnamese: {
                  example: 'Paris, thủ đô Pháp, rất đẹp.',
                  explanation: 'Mệnh đề không xác định'
                }
              },
              { 
                example: 'The woman whose dog bit me apologized.', 
                explanation: 'Possessive "whose" (Sở hữu "whose")',
                vietnamese: {
                  example: 'Người phụ nữ có con chó cắn tôi đã xin lỗi.',
                  explanation: 'Sở hữu "whose"'
                }
              },
              { 
                example: 'This is the house we bought last year.', 
                explanation: 'Omitted relative pronoun (Bỏ đại từ quan hệ)',
                vietnamese: {
                  example: 'Đây là ngôi nhà chúng tôi mua năm ngoái.',
                  explanation: 'Bỏ đại từ quan hệ'
                }
              },
            ],
          },
          {
            lessonId: 'rc_002',
            title: 'Reduced Relative Clauses and Prepositions (Mệnh Đề Quan Hệ Rút Gọn và Giới Từ)',
            duration: '13 mins',
            content: `
**English:**
Reduced: Participles replace clauses
The man living next door → The man who lives next door.
Past: The book written by him (which was written).

Prepositions: At end (informal) or front (formal)
The house (which) we live in. / The house in which we live.

Whose with things: The company whose shares fell.

Contact clauses: Informal defining without pronoun/preposition.

**Vietnamese Translation (Dịch Tiếng Việt):**
Rút Gọn: Phân từ thay thế mệnh đề
The man living next door → The man who lives next door. (Người đàn ông sống cạnh nhà.)
Quá khứ: The book written by him (Cuốn sách được viết bởi anh ấy.)

Giới từ: Cuối (thân mật) hoặc đầu (trang trọng)
The house (which) we live in. / The house in which we live. (Ngôi nhà chúng tôi sống trong.)

Whose với vật: The company whose shares fell. (Công ty có cổ phiếu giảm.)

Contact clauses: Xác định thân mật không đại từ/giới từ.
            `,
            examples: [
              { 
                example: 'The students studying abroad miss home.', 
                explanation: 'Present participle reduced (Phân từ hiện tại rút gọn)',
                vietnamese: {
                  example: 'Học sinh học nước ngoài nhớ nhà.',
                  explanation: 'Phân từ hiện tại rút gọn'
                }
              },
              { 
                example: 'The painting stolen from the museum was recovered.', 
                explanation: 'Past participle reduced (Phân từ quá khứ rút gọn)',
                vietnamese: {
                  example: 'Bức tranh bị đánh cắp từ bảo tàng đã được lấy lại.',
                  explanation: 'Phân từ quá khứ rút gọn'
                }
              },
              { 
                example: 'The city in which I grew up is changing.', 
                explanation: 'Preposition at front (Giới từ ở đầu)',
                vietnamese: {
                  example: 'Thành phố tôi lớn lên đang thay đổi.',
                  explanation: 'Giới từ ở đầu'
                }
              },
              { 
                example: 'The software whose bugs were fixed works better.', 
                explanation: 'Whose with thing (Whose với vật)',
                vietnamese: {
                  example: 'Phần mềm sửa lỗi chạy tốt hơn.',
                  explanation: 'Whose với vật'
                }
              },
            ],
          },
        ],
        exercises: [
          {
            exerciseId: 'rc_ex_001',
            type: 'multiple_choice',
            difficulty: 'Medium',
            question: 'The restaurant, _____ serves Italian food, is always crowded. (Nhà hàng, _____ phục vụ món Ý, luôn đông.)',
            options: [
              { text: 'which', isCorrect: true, explanation: 'Non-defining relative pronoun (Đại từ quan hệ không xác định)' },
              { text: 'that', isCorrect: false, explanation: 'That only for defining (That chỉ cho xác định)' },
              { text: 'who', isCorrect: false, explanation: 'Who for people (Who cho người)' },
              { text: 'whose', isCorrect: false, explanation: 'Whose for possession (Whose cho sở hữu)' },
            ],
          },
          {
            exerciseId: 'rc_ex_002',
            type: 'fill_blank',
            difficulty: 'Hard',
            question: 'The girl _____ I met yesterday is my cousin. (Cô gái _____ tôi gặp hôm qua là em họ tôi.)',
            correctAnswer: 'who/that',
            hints: ['Defining clause for people (Mệnh đề xác định cho người)', 'Who or that (Who hoặc that)'],
            explanation: 'Defining relative clause (Mệnh đề quan hệ xác định)',
          },
          {
            exerciseId: 'rc_ex_003',
            type: 'multiple_choice',
            difficulty: 'Hard',
            question: 'The keys _____ on the table belong to John. (Chùm chìa khóa _____ trên bàn thuộc về John.)',
            options: [
              { text: 'found', isCorrect: true, explanation: 'Reduced past participle (Rút gọn phân từ quá khứ)' },
              { text: 'finding', isCorrect: false, explanation: 'Present participle for active (Phân từ hiện tại cho chủ động)' },
              { text: 'which found', isCorrect: false, explanation: 'Full clause needed if not reduced (Cần mệnh đề đầy đủ nếu không rút gọn)' },
              { text: 'who found', isCorrect: false, explanation: 'Who for people (Who cho người)' },
            ],
          },
        ],
        vocabulary: [
          { 
            word: 'restrictive', 
            meaning: 'Defining or limiting (Xác định hoặc hạn chế)', 
            example: 'Restrictive clause. (Mệnh đề hạn chế.)' 
          },
          { 
            word: 'non-restrictive', 
            meaning: 'Additional, non-essential (Thêm vào, không thiết yếu)', 
            example: 'Non-restrictive info. (Thông tin không hạn chế.)' 
          },
          { 
            word: 'omission', 
            meaning: 'Leaving out (Bỏ qua)', 
            example: 'Pronoun omission. (Bỏ đại từ.)' 
          },
          { 
            word: 'preposition', 
            meaning: 'Word showing relation (Từ chỉ mối quan hệ)', 
            example: 'Preposition in clause. (Giới từ trong mệnh đề.)' 
          },
        ],
      },
    },
  },
};

// Export helper function to get grammar data by level
export const getGrammarByLevel = (level) => {
  const levelLower = level.toLowerCase();
  if (levelLower === 'beginner') return GRAMMAR_DATA.beginner;
  if (levelLower === 'intermediate') return GRAMMAR_DATA.intermediate;
  if (levelLower === 'advanced') return GRAMMAR_DATA.advanced;
  return null;
};

// Export helper function to get all topics
export const getAllTopics = () => {
  const topics = [];
  Object.values(GRAMMAR_DATA).forEach(level => {
    Object.values(level.topics).forEach(topic => {
      topics.push(topic);
    });
  });
  return topics;
};

// Export helper function to search lessons
export const searchLessons = (keyword) => {
  const results = [];
  Object.values(GRAMMAR_DATA).forEach(level => {
    Object.values(level.topics).forEach(topic => {
      if (topic.title.toLowerCase().includes(keyword.toLowerCase()) ||
          topic.description.toLowerCase().includes(keyword.toLowerCase())) {
        results.push(topic);
      }
      topic.lessons.forEach(lesson => {
        if (lesson.title.toLowerCase().includes(keyword.toLowerCase())) {
          results.push({ ...topic, lesson });
        }
      });
    });
  });
  return results;
};

// Export helper to get exercises by difficulty
export const getExercisesByDifficulty = (topic, difficulty) => {
  return topic.exercises.filter(ex => ex.difficulty === difficulty);
};

// Quiz data structure for testing multiple topics
export const GRAMMAR_QUIZZES = [
  {
    quizId: 'quiz_beginner_1',
    title: 'Beginner Grammar Quiz - Present Tenses (Bài Kiểm Tra Ngữ Pháp Người Mới - Các Thì Hiện Tại)',
    difficulty: 'Beginner',
    duration: 20,
    passingScore: 70,
    topics: ['present_simple', 'present_continuous'],
    questions: [
      {
        id: 'q1',
        question: 'She _____ in a hospital. (Cô ấy _____ trong bệnh viện.)',
        type: 'multiple_choice',
        options: [
          { text: 'work', isCorrect: false },
          { text: 'works', isCorrect: true },
          { text: 'is working', isCorrect: false },
          { text: 'worked', isCorrect: false },
        ],
        explanation: 'Third person singular present simple needs -s: works (Ngôi thứ ba số ít thì hiện tại đơn cần -s: works)',
      },
      {
        id: 'q2',
        question: 'What are they doing right now? (Họ đang làm gì ngay bây giờ?)',
        type: 'multiple_choice',
        options: [
          { text: 'study', isCorrect: false },
          { text: 'studies', isCorrect: false },
          { text: 'studying', isCorrect: true },
          { text: 'studied', isCorrect: false },
        ],
        explanation: 'Present continuous for current action: are + studying (Hiện tại tiếp diễn cho hành động hiện tại: are + studying)',
      },
    ],
  },
  {
    quizId: 'quiz_intermediate_1',
    title: 'Intermediate Quiz - Perfect Tenses & Modals (Bài Kiểm Tra Trung Cấp - Các Thì Hoàn Thành & Modal)',
    difficulty: 'Intermediate',
    duration: 30,
    passingScore: 75,
    topics: ['present_perfect', 'modals'],
    questions: [
      {
        id: 'q1',
        question: 'I _____ to Paris three times in my life. (Tôi _____ đến Paris ba lần trong đời.)',
        type: 'multiple_choice',
        options: [
          { text: 'have been', isCorrect: true },
          { text: 'went', isCorrect: false },
          { text: 'am going', isCorrect: false },
          { text: 'was', isCorrect: false },
        ],
        explanation: 'Present perfect for life experiences: have + been (Hiện tại hoàn thành cho kinh nghiệm cuộc sống: have + been)',
      },
      {
        id: 'q2',
        question: 'You _____ eat in the library. It\'s against the rules. (Bạn _____ ăn trong thư viện. Điều này vi phạm quy định.)',
        type: 'multiple_choice',
        options: [
          { text: 'can', isCorrect: false },
          { text: 'could', isCorrect: false },
          { text: 'mustn\'t', isCorrect: true },
          { text: 'don\'t have to', isCorrect: false },
        ],
        explanation: 'Prohibition/rules: mustn\'t (Cấm đoán/quy tắc: mustn\'t)',
      },
    ],
  },
  {
    quizId: 'quiz_advanced_1',
    title: 'Advanced Quiz - Passive Voice & Reported Speech (Bài Kiểm Tra Nâng Cấp - Câu Thụ Động & Câu Gián Tiếp)',
    difficulty: 'Advanced',
    duration: 40,
    passingScore: 80,
    topics: ['passive_voice', 'reported_speech'],
    questions: [
      {
        id: 'q1',
        question: 'The project _____ by the team leader last week. (Dự án _____ bởi trưởng nhóm tuần trước.)',
        type: 'multiple_choice',
        options: [
          { text: 'was completed', isCorrect: true },
          { text: 'has been completed', isCorrect: false },
          { text: 'was being completed', isCorrect: false },
          { text: 'completed', isCorrect: false },
        ],
        explanation: 'Past simple passive: was + past participle (Quá khứ đơn thụ động: was + phân từ quá khứ)',
      },
      {
        id: 'q2',
        question: 'She said she _____ the movie yesterday. (Cô ấy nói cô ấy _____ bộ phim hôm qua.)',
        type: 'multiple_choice',
        options: [
          { text: 'has watched', isCorrect: false },
          { text: 'had watched', isCorrect: true },
          { text: 'watched', isCorrect: false },
          { text: 'watch', isCorrect: false },
        ],
        explanation: 'Reported speech: past simple becomes past perfect (Câu gián tiếp: quá khứ đơn trở thành quá khứ hoàn thành)',
      },
    ],
  },
];

// Progress tracking data structure
export const GRAMMAR_PROGRESS_TEMPLATE = {
  userId: '',
  completedLessons: [],
  completedExercises: [],
  quizScores: [],
  topicProgress: {}, // topicId: { completed: bool, progress: 0-100 }
  totalPoints: 0,
  level: 'Beginner',
  streak: 0,
  lastAccessDate: null,
};

// Difficulty levels and their characteristics
export const DIFFICULTY_LEVELS = {
  Easy: {
    color: '#10b981', // green
    icon: '⭐',
    description: 'Perfect for beginners (Hoàn hảo cho người mới)',
  },
  Medium: {
    color: '#f59e0b', // amber
    icon: '⭐⭐',
    description: 'Intermediate level (Cấp trung cấp)',
  },
  Hard: {
    color: '#ef4444', // red
    icon: '⭐⭐⭐',
    description: 'Advanced challenges (Thử thách nâng cao)',
  },
};

// Common mistakes and explanations
export const COMMON_MISTAKES = [
  {
    id: 'mistake_1',
    mistake: 'I am go to school.',
    correct: 'I go to school.',
    explanation: 'Don\'t use am/is/are + base verb. Use am/is/are + -ing for present continuous or just base verb for present simple. (Đừng dùng am/is/are + động từ nguyên thể. Dùng am/is/are + -ing cho hiện tại tiếp diễn hoặc chỉ động từ nguyên thể cho hiện tại đơn.)',
    topic: 'present_simple',
  },
  {
    id: 'mistake_2',
    mistake: 'She have completed the work.',
    correct: 'She has completed the work.',
    explanation: 'With third person singular (she, he, it), use "has" not "have". (Với ngôi thứ ba số ít (she, he, it), dùng "has" không phải "have".)',
    topic: 'present_perfect',
  },
  {
    id: 'mistake_3',
    mistake: 'If I would know, I would tell you.',
    correct: 'If I knew, I would tell you.',
    explanation: 'In second conditional (if clause), use past simple, not would + verb. (Trong câu điều kiện loại 2 (mệnh đề if), dùng quá khứ đơn, không phải would + động từ.)',
    topic: 'conditionals',
  },
  {
    id: 'mistake_4',
    mistake: 'I told him to not come.',
    correct: 'I told him not to come.',
    explanation: 'Negative infinitive: not + to + verb (Động từ nguyên thể phủ định: not + to + động từ)',
    topic: 'modals',
  },
  {
    id: 'mistake_5',
    mistake: 'The car was stolen by someone unknown.',
    correct: 'The car was stolen.',
    explanation: 'When agent is unknown or unimportant, omit the "by" phrase. (Khi người làm không rõ hoặc không quan trọng, bỏ cụm "by".)',
    topic: 'passive_voice',
  },
];

// Study tips and strategies
export const STUDY_TIPS = [
  {
    id: 'tip_1',
    title: 'Use Context Clues (Sử dụng Gợi Ý Ngữ Cảnh)',
    description: 'Always look for time expressions (yesterday, now, tomorrow) to determine the correct tense. (Luôn tìm biểu thức thời gian (hôm qua, bây giờ, ngày mai) để xác định thì đúng.)',
    relatedTopics: ['present_simple', 'past_simple', 'future_simple'],
  },
  {
    id: 'tip_2',
    title: 'Practice Conjugation (Luyện Chia Động Từ)',
    description: 'Regular conjugation practice helps internalize verb forms. Create flashcards for irregular verbs. (Luyện chia động từ thường xuyên giúp ghi nhớ dạng động từ. Tạo flashcard cho động từ bất quy tắc.)',
    relatedTopics: ['present_simple', 'past_simple', 'present_perfect'],
  },
  {
    id: 'tip_3',
    title: 'Active to Passive Conversion (Chuyển Từ Chủ Động Sang Thụ Động)',
    description: 'Practice converting sentences from active to passive voice to understand structure better. (Luyện chuyển câu từ chủ động sang thụ động để hiểu cấu trúc tốt hơn.)',
    relatedTopics: ['passive_voice'],
  },
  {
    id: 'tip_4',
    title: 'Dialogue Practice (Luyện Đối Thoại)',
    description: 'Practice reported speech by writing dialogues, then converting them to reported speech. (Luyện câu gián tiếp bằng cách viết đối thoại, sau đó chuyển sang gián tiếp.)',
    relatedTopics: ['reported_speech'],
  },
  {
    id: 'tip_5',
    description: 'Conditional Mind Mapping (Lập Bản Đồ Tư Duy Điều Kiện)',
    description: 'Create a mind map showing when to use each conditional type based on likelihood and time. (Tạo bản đồ tư duy cho thấy khi nào dùng từng loại điều kiện dựa trên khả năng và thời gian.)',
    relatedTopics: ['conditionals'],
  },
];

// Real-world examples for context
export const REAL_WORLD_EXAMPLES = [
  {
    id: 'example_1',
    context: 'Job Interview (Phỏng Vấn Việc Làm)',
    original: 'I work in software development.',
    explanation: 'Present simple for current job/role (Hiện tại đơn cho công việc/hiện tại)',
    topic: 'present_simple',
  },
  {
    id: 'example_2',
    context: 'News Report (Báo Cáo Tin Tức)',
    original: 'The bridge has been damaged by recent floods.',
    explanation: 'Passive voice for factual reporting (Thụ động cho báo cáo sự thật)',
    topic: 'passive_voice',
  },
  {
    id: 'example_3',
    context: 'Chat with Friend (Trò Chuyện Với Bạn)',
    original: 'I\'m writing an email right now.',
    explanation: 'Present continuous for current activity (Hiện tại tiếp diễn cho hoạt động hiện tại)',
    topic: 'present_continuous',
  },
  {
    id: 'example_4',
    context: 'Business Meeting (Cuộc Họp Kinh Doanh)',
    original: 'If we don\'t receive payment by Friday, we\'ll cancel the contract.',
    explanation: 'First conditional for realistic future scenario (Loại 1 cho tình huống tương lai thực tế)',
    topic: 'conditionals',
  },
  {
    id: 'example_5',
    context: 'Academic Writing (Viết Học Thuật)',
    original: 'The rapid development of artificial intelligence has revolutionized industries.',
    explanation: 'Present perfect + nominalization for formal writing (Hiện tại hoàn thành + danh từ hóa cho viết trang trọng)',
    topic: 'present_perfect',
  },
];

export default GRAMMAR_DATA;
</file>

<file path="src/data/intermediateData.js">
export const intermediate = {
  level: 'Intermediate',
  description: 'Intermediate grammar topics for building fluency',
  topics: {
    // Topic 1: Present Perfect
    presentPerfect: {
      id: 'present_perfect',
      title: 'Present Perfect Tense',
      difficulty: 'Intermediate',
      icon: '✨',
      description: 'Connect past actions with the present',
      lessons: [
        {
          lessonId: 'pf_001',
          title: 'Introduction to Present Perfect',
          duration: '10 mins',
          content: `
            Present Perfect connects past and present:
           
            Used for:
            - Recent past actions with present relevance
            - Life experiences (have you ever...?)
            - Changes over time
            - Actions that started in past, continue now
           
            Form: have/has + past participle
            I have seen, he has gone, they have studied
           
            Regular verbs: -ed form (played, worked)
            Irregular verbs: Special form (go→gone, eat→eaten, see→seen)
           
            Negative: have/has + not + past participle
            He has not finished (hasn't finished)
           
            Question: Have/Has + Subject + past participle?
            Have you finished? Has she arrived?
          `,
          examples: [
            { example: 'I have lived here for 5 years.', explanation: 'Action started in past, continues' },
            { example: 'She has never been to Japan.', explanation: 'Life experience' },
            { example: 'They have already eaten lunch.', explanation: 'Recent past action' },
            { example: 'Have you finished your homework?', explanation: 'Question form' },
          ],
        },
        {
          lessonId: 'pf_002',
          title: 'Present Perfect vs Simple Past',
          duration: '11 mins',
          content: `
            Key Differences:
           
            Present Perfect (have + past participle):
            - Used for recent past or life experiences
            - No specific time is mentioned (or recently)
            - Impact on present is important
           
            Simple Past (regular -ed):
            - Used for completed past actions
            - Specific time is mentioned (yesterday, last year, ago)
            - Focus on when it happened
           
            Examples:
            Present Perfect: I have lost my keys. (Looking for them now)
            Simple Past: I lost my keys yesterday. (Specific time given)
           
            Present Perfect: She has visited Paris. (Life experience)
            Simple Past: She visited Paris in 2019. (When = important)
           
            Time expressions:
            Present Perfect: just, recently, already, yet, for, since, ever, never
            Simple Past: yesterday, last week, 10 years ago, in 2020, at 3 PM
          `,
          examples: [
            { example: 'I have seen that movie. (General - no time)', explanation: 'Life experience' },
            { example: 'I saw that movie last week. (Specific time)', explanation: 'When is important' },
            { example: 'She has just arrived. (Recent)', explanation: 'Just = recently' },
            { example: 'They have worked here since 2015. (Duration)', explanation: 'For/since: duration' },
          ],
        },
        {
          lessonId: 'pf_003',
          title: 'Irregular Past Participles',
          duration: '12 mins',
          content: `
            Common Irregular Verbs:
           
            go → gone
            come → come
            eat → eaten
            see → seen
            drink → drunk
            write → written
            give → given
            take → taken
            make → made
            break → broken
            choose → chosen
            do → done
            have → had
            know → known
            meet → met
            pay → paid
            read → read
            run → run
            say → said
            send → sent
            speak → spoken
            spend → spent
            steal → stolen
            swim → swum
            teach → taught
            think → thought
            understand → understood
            wear → worn
            win → won
          `,
          examples: [
            { example: 'I have written a letter.', explanation: 'write → written' },
            { example: 'She has broken her arm.', explanation: 'break → broken' },
            { example: 'They have taken the exam.', explanation: 'take → taken' },
            { example: 'He has never been to Australia.', explanation: 'be → been' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'pf_ex_001',
          type: 'multiple_choice',
          difficulty: 'Medium',
          question: 'I _____ to three countries so far.',
          options: [
            { text: 'have been', isCorrect: true, explanation: 'Present perfect for life experience' },
            { text: 'went', isCorrect: false, explanation: 'Simple past - would need specific dates' },
            { text: 'am going', isCorrect: false, explanation: 'This is future/present continuous' },
            { text: 'will go', isCorrect: false, explanation: 'This is future' },
          ],
        },
        {
          exerciseId: 'pf_ex_002',
          type: 'fill_blank',
          difficulty: 'Medium',
          question: 'She _____ (finish) her project yet?',
          correctAnswer: 'has finished',
          hints: ['Use present perfect for recent past', 'With "yet" use have/has'],
          explanation: 'Present perfect: has + past participle. "Yet" indicates incomplete until now.',
        },
      ],
    },
    // Topic 2: Past Perfect
    pastPerfect: {
      id: 'past_perfect',
      title: 'Past Perfect Tense',
      difficulty: 'Intermediate',
      icon: '⏲️',
      description: 'Show which past action happened first',
      lessons: [
        {
          lessonId: 'pp_001',
          title: 'Introduction to Past Perfect',
          duration: '10 mins',
          content: `
            Past Perfect shows sequence of two past events:
            Which happened FIRST?
           
            Form: had + past participle
            I had eaten, she had gone, they had studied
           
            Used for:
            - Action completed before another past action
            - Reported speech (said that he had...)
            - Result of a past action
           
            Timeline:
            Event 1 (earlier) → had + past participle
            Event 2 (later) → simple past
           
            Example:
            When I arrived, she had already left.
            (She left first → had left)
            (I arrived second → arrived)
          `,
          examples: [
            { example: 'By the time he arrived, I had finished the work.', explanation: 'I finished first' },
            { example: 'She said she had never seen him before.', explanation: 'Reported speech' },
            { example: 'After they had eaten, they went for a walk.', explanation: 'Eat first, walk second' },
            { example: 'The train had left before we got to the station.', explanation: 'Train left first' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'pp_ex_001',
          type: 'multiple_choice',
          difficulty: 'Medium',
          question: 'By the time I called, they _____ the movie.',
          options: [
            { text: 'had finished', isCorrect: true, explanation: 'First action in past perfect' },
            { text: 'finished', isCorrect: false, explanation: 'Simple past doesn\'t show sequence' },
            { text: 'have finished', isCorrect: false, explanation: 'Present perfect is for recent past' },
            { text: 'are finishing', isCorrect: false, explanation: 'Present continuous' },
          ],
        },
      ],
    },
    // Topic 3: Modals (Can, Could, May, Might, Must, Should, Would)
    modals: {
      id: 'modals',
      title: 'Modal Verbs',
      difficulty: 'Intermediate',
      icon: '🔑',
      description: 'Express ability, permission, obligation, and possibility',
      lessons: [
        {
          lessonId: 'mod_001',
          title: 'Introduction to Modal Verbs',
          duration: '12 mins',
          content: `
            Modal verbs show:
            1. ABILITY: can, could
            2. PERMISSION: can, could, may
            3. POSSIBILITY: may, might, could
            4. OBLIGATION/NECESSITY: must, have to, should
            5. ADVICE: should, ought to
            6. PREFERENCE: would, would rather
           
            Form: Modal + base verb (NO -ing, -ed, or -s)
            I can speak, she could run, they must go
           
            ABILITY (Present/Past):
            - can: I can swim. (Present ability)
            - could: I could swim when I was young. (Past ability)
           
            PERMISSION:
            - can: Can I use your phone?
            - could: Could I borrow your pen?
            - may: May I ask a question? (Formal)
           
            POSSIBILITY:
            - may: It may rain tomorrow.
            - might: She might come to the party.
            - could: You could be right.
           
            OBLIGATION/NECESSITY:
            - must: You must wear a seatbelt. (Strong obligation)
            - have to: I have to go to work. (External obligation)
            - should: You should eat healthily. (Advice/recommendation)
           
            PREFERENCE:
            - would: I would like tea.
            - would rather: I would rather stay home.
          `,
          examples: [
            { example: 'Can you swim?', explanation: 'Ability question' },
            { example: 'May I come in?', explanation: 'Polite permission request' },
            { example: 'You should study harder.', explanation: 'Advice' },
            { example: 'It might rain tomorrow.', explanation: 'Possibility' },
            { example: 'She must be at work.', explanation: 'Deduction/certainty' },
            { example: 'I have to finish this by 5 PM.', explanation: 'External obligation' },
          ],
        },
        {
          lessonId: 'mod_002',
          title: 'Modal Verbs - Negative & Questions',
          duration: '10 mins',
          content: `
            NEGATIVES:
            can't, couldn't, mustn't, shouldn't, wouldn't
           
            Examples:
            - I can't swim. (No ability)
            - You shouldn't smoke. (Advice against)
            - You mustn't enter. (Prohibition - strong)
            - She wouldn't say that. (Unwilling)
           
            QUESTIONS:
            Can you...? Could you...? May I...? Would you...?
           
            Example responses:
            Q: Can you help me?
            A: Yes, I can. / No, I can't.
           
            Q: Would you like coffee?
            A: Yes, I would. / No, I wouldn't.
           
            MUST vs HAVE TO vs SHOULD:
           
            MUST (internal obligation):
            I must quit smoking. (Personal decision)
            You mustn't be late. (Rules)
           
            HAVE TO (external obligation):
            I have to work tomorrow. (External requirement)
            He has to attend the meeting. (Boss says so)
           
            SHOULD (advice/recommendation):
            You should see a doctor. (I recommend)
            She should study more. (Not strict, just advice)
          `,
          examples: [
            { example: 'Can\'t you help me?', explanation: 'Negative question' },
            { example: 'You mustn\'t tell anyone.', explanation: 'Prohibition' },
            { example: 'I have to leave now.', explanation: 'External obligation' },
            { example: 'Would you prefer tea or coffee?', explanation: 'Polite question' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'mod_ex_001',
          type: 'multiple_choice',
          difficulty: 'Medium',
          question: 'You _____ eat in the library. It\'s against the rules.',
          options: [
            { text: 'mustn\'t', isCorrect: true, explanation: 'Prohibition - rules' },
            { text: 'don\'t have to', isCorrect: false, explanation: 'No obligation, but mustn\'t is prohibition' },
            { text: 'shouldn\'t', isCorrect: false, explanation: 'Advice, but mustn\'t shows rules' },
            { text: 'won\'t', isCorrect: false, explanation: 'Future, doesn\'t show prohibition' },
          ],
        },
        {
          exerciseId: 'mod_ex_002',
          type: 'multiple_choice',
          difficulty: 'Medium',
          question: 'I _____ go to the dentist next week.',
          options: [
            { text: 'have to', isCorrect: true, explanation: 'External obligation - appointment' },
            { text: 'should', isCorrect: false, explanation: 'Advice, not firm obligation' },
            { text: 'might', isCorrect: false, explanation: 'Possibility, not obligation' },
            { text: 'could', isCorrect: false, explanation: 'Ability, not obligation' },
          ],
        },
      ],
      vocabulary: [
        { word: 'prohibition', meaning: 'Not allowed', example: 'Parking prohibition in this area.' },
        { word: 'obligation', meaning: 'Something you must do', example: 'It\'s an obligation to pay taxes.' },
        { word: 'permission', meaning: 'Allowed to do something', example: 'You have permission to leave.' },
        { word: 'deduction', meaning: 'Conclusion based on evidence', example: 'He must be tired (deduction).' },
      ],
    },
    // Topic 4: Conditionals (If/Unless)
    conditionals: {
      id: 'conditionals',
      title: 'Conditional Sentences',
      difficulty: 'Intermediate',
      icon: '🔀',
      description: 'Express hypothetical situations and consequences',
      lessons: [
        {
          lessonId: 'cond_001',
          title: 'Zero, First, and Second Conditionals',
          duration: '13 mins',
          content: `
            CONDITIONAL TYPES:
           
            ZERO CONDITIONAL (General truths):
            If/When + present simple, present simple
            If you heat water to 100°C, it boils.
            When you press this button, the light turns on.
            (Always true)
           
            FIRST CONDITIONAL (Possible future):
            If + present simple, will + base verb
            If it rains tomorrow, I will stay home.
            If you study hard, you will pass the exam.
            (Likely to happen)
           
            SECOND CONDITIONAL (Hypothetical/Unlikely):
            If + past simple, would + base verb
            If I won the lottery, I would travel the world.
            If she studied harder, she would pass.
            (Unlikely or impossible now, imagination)
           
            Note: With "be" in if clause, use "were"
            If I were you, I would accept the job.
            If she were here, she would help.
           
            UNLESS (= if not):
            Unless + affirmative, affirmative
            I will go unless it rains.
            (= I will go if it doesn't rain)
           
            Unless you study, you won't pass.
            (= If you don't study, you won't pass)
          `,
          examples: [
            { example: 'If you mix red and blue, you get purple.', explanation: 'Zero conditional - fact' },
            { example: 'If you see Tom, tell him to call me.', explanation: 'First conditional - likely' },
            { example: 'If I were a bird, I would fly to Paris.', explanation: 'Second conditional - imagination' },
            { example: 'Unless you apologize, he won\'t forgive you.', explanation: 'Unless = if not' },
          ],
        },
        {
          lessonId: 'cond_002',
          title: 'Third Conditional & Mixed Conditionals',
          duration: '12 mins',
          content: `
            THIRD CONDITIONAL (Past - impossible):
            If + had + past participle, would have + past participle
            If I had studied, I would have passed the exam.
            If she had known, she would have called.
            (Impossible - talking about past)
           
            Uses:
            - Regret: If only I had known!
            - Criticism: If you had listened, this wouldn't have happened.
            - Speculation: If they had arrived earlier, they would have seen the show.
           
            MIXED CONDITIONALS (Mix tenses):
           
            Type A: Present result of past condition
            If + had + past participle, would + base verb (now)
            If I had studied medicine, I would be a doctor now.
            (I didn't study, so I'm not a doctor)
           
            If she had married him, she would live in London now.
            (She didn't marry, so she doesn't live there)
           
            Type B: Past result of present condition
            If + past simple, would have + past participle (past)
            If you were more careful, you wouldn't have broken the vase.
            (You're careless - that's why you broke it)
           
            If she worked harder, she would have passed yesterday.
            (She's lazy, so didn't pass)
           
            SUMMARY TABLE:
           
            Zero: If + present, present (facts)
            First: If + present, will (likely future)
            Second: If + past, would (unlikely/imagination)
            Third: If + had + past participle, would have (impossible past)
            Mixed: Combinations of above
          `,
          examples: [
            { example: 'If I had known the truth, I wouldn\'t be angry now.', explanation: 'Mixed - past condition, present result' },
            { example: 'If you had arrived on time, we would have watched the movie.', explanation: 'Third conditional - impossible past' },
            { example: 'I would help you if I had the money.', explanation: 'Mixed - present condition, would help' },
            { example: 'If only they had listened!', explanation: 'Third conditional - regret' },
          ],
        },
      ],
      exercises: [
        {
          exerciseId: 'cond_ex_001',
          type: 'multiple_choice',
          difficulty: 'Hard',
          question: 'If I _____ you were coming, I would have prepared dinner.',
          options: [
            { text: 'had known', isCorrect: true, explanation: 'Third conditional - if + had + past participle' },
            { text: 'knew', isCorrect: false, explanation: 'Second conditional - not for past regret' },
            { text: 'would know', isCorrect: false, explanation: 'Wrong structure' },
            { text: 'have known', isCorrect: false, explanation: 'Present perfect, not past condition' },
          ],
        },
        {
          exerciseId: 'cond_ex_002',
          type: 'fill_blank',
          difficulty: 'Hard',
          question: 'If you _____ (not/be) late, we would have caught the train.',
          correctAnswer: 'hadn\'t been',
          hints: ['Third conditional for past', 'Negative: had + not + been'],
          explanation: 'Third conditional negative: If + had not + past participle',
        },
      ],
    },
  },
};
</file>

<file path="src/data/vocabulary/vocabularyDataLevel1.js">
// src/data/vocabularyDataLevel1.js
// Vocabulary data for CEFR levels A1 - A2 (Beginner & Elementary)
// Expanded with 150+ high-frequency, practical vocabulary items
// Organized by main topics and sub-topics
// Each entry: { word, phonetic (IPA), pos (part of speech), vietnamese, example, level }

export const vocabularyDataLevel1 = {
  "TRAVEL & TOURISM": {
    "Travel Activities": [
      { word: "relax", phonetic: "/rɪˈlæks/", pos: "verb", vietnamese: "thư giãn", example: "I just want to relax on the beach all day.", level: "A1" },
      { word: "visit", phonetic: "/ˈvɪz.ɪt/", pos: "verb", vietnamese: "thăm", example: "We visit my grandparents every Sunday.", level: "A1" },
      { word: "walk", phonetic: "/wɔːk/", pos: "verb", vietnamese: "đi bộ", example: "Let's walk to the park.", level: "A1" },
      { word: "swim", phonetic: "/swɪm/", pos: "verb", vietnamese: "bơi", example: "I can swim in the pool.", level: "A1" },
      { word: "play", phonetic: "/pleɪ/", pos: "verb", vietnamese: "chơi", example: "Children play football in the park.", level: "A1" },
      { word: "eat", phonetic: "/iːt/", pos: "verb", vietnamese: "ăn", example: "We eat breakfast at 7 o'clock.", level: "A1" },
      { word: "drink", phonetic: "/drɪŋk/", pos: "verb", vietnamese: "uống", example: "I drink water every morning.", level: "A1" },
      { word: "shop", phonetic: "/ʃɒp/", pos: "verb", vietnamese: "mua sắm", example: "She likes to shop on weekends.", level: "A1" },
      { word: "take photos", phonetic: "/teɪk ˈfəʊ.təʊz/", pos: "verb phrase", vietnamese: "chụp ảnh", example: "Tourists take photos of the statue.", level: "A2" },
      { word: "enjoy", phonetic: "/ɪnˈdʒɔɪ/", pos: "verb", vietnamese: "thích", example: "I enjoy the beautiful view.", level: "A2" }
    ],
    "Transportation": [
      { word: "train", phonetic: "/treɪn/", pos: "noun", vietnamese: "tàu hỏa", example: "We took the train to the countryside.", level: "A1" },
      { word: "taxi", phonetic: "/ˈtæk.si/", pos: "noun", vietnamese: "taxi", example: "She hailed a taxi to the airport.", level: "A1" },
      { word: "bus", phonetic: "/bʌs/", pos: "noun", vietnamese: "xe buýt", example: "The bus arrives every 10 minutes.", level: "A1" },
      { word: "car", phonetic: "/kɑːr/", pos: "noun", vietnamese: "xe hơi", example: "My father drives a red car.", level: "A1" },
      { word: "plane", phonetic: "/pleɪn/", pos: "noun", vietnamese: "máy bay", example: "The plane takes off at 9 AM.", level: "A1" },
      { word: "bicycle", phonetic: "/ˈbaɪ.sɪ.kəl/", pos: "noun", vietnamese: "xe đạp", example: "I ride my bicycle to school.", level: "A1" },
      { word: "boat", phonetic: "/bəʊt/", pos: "noun", vietnamese: "thuyền", example: "We crossed the river by boat.", level: "A1" },
      { word: "flight", phonetic: "/flaɪt/", pos: "noun", vietnamese: "chuyến bay", example: "Our flight was delayed due to bad weather.", level: "A2" },
      { word: "ticket", phonetic: "/ˈtɪk.ɪt/", pos: "noun", vietnamese: "vé", example: "I bought a train ticket online.", level: "A2" },
      { word: "driver", phonetic: "/ˈdraɪ.vər/", pos: "noun", vietnamese: "tài xế", example: "The bus driver is very friendly.", level: "A2" }
    ],
    "Accommodation & Shopping": [
      { word: "hotel", phonetic: "/həʊˈtel/", pos: "noun", vietnamese: "khách sạn", example: "We booked a room at a luxury hotel.", level: "A1" },
      { word: "room", phonetic: "/ruːm/", pos: "noun", vietnamese: "phòng", example: "My room has a big window.", level: "A1" },
      { word: "bed", phonetic: "/bed/", pos: "noun", vietnamese: "giường", example: "The bed is very comfortable.", level: "A1" },
      { word: "bathroom", phonetic: "/ˈbɑːθ.ruːm/", pos: "noun", vietnamese: "phòng tắm", example: "The bathroom has hot water.", level: "A1" },
      { word: "key", phonetic: "/kiː/", pos: "noun", vietnamese: "chìa khóa", example: "Here is your room key.", level: "A1" },
      { word: "shop", phonetic: "/ʃɒp/", pos: "noun", vietnamese: "cửa hàng", example: "There is a shop near the hotel.", level: "A1" },
      { word: "market", phonetic: "/ˈmɑː.kɪt/", pos: "noun", vietnamese: "chợ", example: "I bought fruit at the market.", level: "A1" },
      { word: "money", phonetic: "/ˈmʌn.i/", pos: "noun", vietnamese: "tiền", example: "I need money to buy food.", level: "A1" },
      { word: "souvenir", phonetic: "/ˌsuː.vəˈnɪər/", pos: "noun", vietnamese: "đồ lưu niệm", example: "I bought a souvenir from the market.", level: "A2" },
      { word: "price", phonetic: "/praɪs/", pos: "noun", vietnamese: "giá", example: "The price is too high.", level: "A2" },
      { word: "cheap", phonetic: "/tʃiːp/", pos: "adj", vietnamese: "rẻ", example: "This shirt is very cheap.", level: "A2" },
      { word: "expensive", phonetic: "/ɪkˈspen.sɪv/", pos: "adj", vietnamese: "đắt", example: "The hotel is expensive.", level: "A2" }
    ],
    "Travel Problems": [
      { word: "cancel", phonetic: "/ˈkæn.səl/", pos: "verb", vietnamese: "hủy bỏ", example: "The tour was canceled due to rain.", level: "A2" },
      { word: "late", phonetic: "/leɪt/", pos: "adj", vietnamese: "muộn", example: "The train is late again.", level: "A1" },
      { word: "lost", phonetic: "/lɒst/", pos: "adj", vietnamese: "lạc", example: "I am lost. Where is the station?", level: "A1" },
      { word: "problem", phonetic: "/ˈprɒb.ləm/", pos: "noun", vietnamese: "vấn đề", example: "We have a problem with the booking.", level: "A2" },
      { word: "help", phonetic: "/help/", pos: "verb", vietnamese: "giúp đỡ", example: "Can you help me, please?", level: "A1" }
    ]
  },
  "FOOD & RESTAURANTS": {
    "Ordering Food": [
      { word: "menu", phonetic: "/ˈmen.juː/", pos: "noun", vietnamese: "thực đơn", example: "Can I see the menu, please?", level: "A1" },
      { word: "water", phonetic: "/ˈwɔː.tər/", pos: "noun", vietnamese: "nước", example: "I would like a glass of water.", level: "A1" },
      { word: "coffee", phonetic: "/ˈkɒf.i/", pos: "noun", vietnamese: "cà phê", example: "I drink coffee every morning.", level: "A1" },
      { word: "tea", phonetic: "/tiː/", pos: "noun", vietnamese: "trà", example: "Would you like tea or coffee?", level: "A1" },
      { word: "bread", phonetic: "/bred/", pos: "noun", vietnamese: "bánh mì", example: "I eat bread for breakfast.", level: "A1" },
      { word: "rice", phonetic: "/raɪs/", pos: "noun", vietnamese: "cơm", example: "We eat rice every day.", level: "A1" },
      { word: "chicken", phonetic: "/ˈtʃɪk.ɪn/", pos: "noun", vietnamese: "gà", example: "I like fried chicken.", level: "A1" },
      { word: "fish", phonetic: "/fɪʃ/", pos: "noun", vietnamese: "cá", example: "Grilled fish is healthy.", level: "A1" },
      { word: "dessert", phonetic: "/dɪˈzɜːt/", pos: "noun", vietnamese: "món tráng miệng", example: "Ice cream is my favorite dessert.", level: "A2" },
      { word: "bill", phonetic: "/bɪl/", pos: "noun", vietnamese: "hóa đơn", example: "Could you bring the bill, please?", level: "A2" },
      { word: "order", phonetic: "/ˈɔː.dər/", pos: "verb", vietnamese: "gọi món", example: "I would like to order now.", level: "A2" },
      { word: "delicious", phonetic: "/dɪˈlɪʃ.əs/", pos: "adj", vietnamese: "ngon", example: "This soup is delicious!", level: "A2" }
    ],
    "Restaurant Features": [
      { word: "waiter", phonetic: "/ˈweɪ.tər/", pos: "noun", vietnamese: "bồi bàn nam", example: "The waiter took our order quickly.", level: "A1" },
      { word: "table", phonetic: "/ˈteɪ.bəl/", pos: "noun", vietnamese: "bàn", example: "We need a table for four.", level: "A1" },
      { word: "chair", phonetic: "/tʃeər/", pos: "noun", vietnamese: "ghế", example: "Please take a chair.", level: "A1" },
      { word: "clean", phonetic: "/kliːn/", pos: "adj", vietnamese: "sạch", example: "The restaurant is very clean.", level: "A1" },
      { word: "open", phonetic: "/ˈəʊ.pən/", pos: "adj", vietnamese: "mở cửa", example: "The restaurant is open from 11 AM.", level: "A1" },
      { word: "close", phonetic: "/kləʊz/", pos: "verb", vietnamese: "đóng cửa", example: "The shop closes at 10 PM.", level: "A1" },
      { word: "fast", phonetic: "/fɑːst/", pos: "adj", vietnamese: "nhanh", example: "The service is very fast.", level: "A2" },
      { word: "slow", phonetic: "/sləʊ/", pos: "adj", vietnamese: "chậm", example: "The service is a bit slow today.", level: "A2" }
    ],
    "Job & Career (Food Industry)": [
      { word: "chef", phonetic: "/ʃef/", pos: "noun", vietnamese: "đầu bếp", example: "The chef prepared a special dish.", level: "A2" },
      { word: "waitress", phonetic: "/ˈweɪ.trəs/", pos: "noun", vietnamese: "bồi bàn nữ", example: "The waitress recommended the specials.", level: "A1" },
      { word: "cook", phonetic: "/kʊk/", pos: "verb", vietnamese: "nấu ăn", example: "My mother cooks dinner every day.", level: "A1" },
      { word: "kitchen", phonetic: "/ˈkɪtʃ.ɪn/", pos: "noun", vietnamese: "bếp", example: "The chef works in the kitchen.", level: "A1" },
      { word: "food", phonetic: "/fuːd/", pos: "noun", vietnamese: "đồ ăn", example: "The food here is excellent.", level: "A1" },
      { word: "breakfast", phonetic: "/ˈbrek.fəst/", pos: "noun", vietnamese: "bữa sáng", example: "I eat breakfast at 7 AM.", level: "A1" },
      { word: "lunch", phonetic: "/lʌntʃ/", pos: "noun", vietnamese: "bữa trưa", example: "We have lunch at noon.", level: "A1" },
      { word: "dinner", phonetic: "/ˈdɪn.ər/", pos: "noun", vietnamese: "bữa tối", example: "Dinner is ready at 7 PM.", level: "A1" }
    ]
  },
  "EDUCATION": {
    "Academic Terms": [
      { word: "school", phonetic: "/skuːl/", pos: "noun", vietnamese: "trường học", example: "I go to school every day.", level: "A1" },
      { word: "teacher", phonetic: "/ˈtiː.tʃər/", pos: "noun", vietnamese: "giáo viên", example: "My teacher is very kind.", level: "A1" },
      { word: "student", phonetic: "/ˈstuː.dənt/", pos: "noun", vietnamese: "học sinh", example: "There are 30 students in my class.", level: "A1" },
      { word: "class", phonetic: "/klɑːs/", pos: "noun", vietnamese: "lớp học", example: "English class starts at 8 AM.", level: "A1" },
      { word: "book", phonetic: "/bʊk/", pos: "noun", vietnamese: "sách", example: "I read a book every night.", level: "A1" },
      { word: "pen", phonetic: "/pen/", pos: "noun", vietnamese: "bút", example: "I write with a blue pen.", level: "A1" },
      { word: "pencil", phonetic: "/ˈpen.səl/", pos: "noun", vietnamese: "bút chì", example: "Please sharpen your pencil.", level: "A1" },
      { word: "paper", phonetic: "/ˈpeɪ.pər/", pos: "noun", vietnamese: "giấy", example: "I need paper for my homework.", level: "A1" }
    ],
    "Study Requirements": [
      { word: "homework", phonetic: "/ˈhəʊm.wɜːk/", pos: "noun", vietnamese: "bài tập về nhà", example: "Finish your homework before dinner.", level: "A1" },
      { word: "exam", phonetic: "/ɪɡˈzæm/", pos: "noun", vietnamese: "kỳ thi", example: "The final exam is next week.", level: "A2" },
      { word: "test", phonetic: "/test/", pos: "noun", vietnamese: "bài kiểm tra", example: "We have a math test tomorrow.", level: "A1" },
      { word: "learn", phonetic: "/lɜːn/", pos: "verb", vietnamese: "học", example: "I learn English at school.", level: "A1" },
      { word: "read", phonetic: "/riːd/", pos: "verb", vietnamese: "đọc", example: "I read a story every day.", level: "A1" },
      { word: "write", phonetic: "/raɪt/", pos: "verb", vietnamese: "viết", example: "Please write your name here.", level: "A1" },
      { word: "listen", phonetic: "/ˈlɪs.ən/", pos: "verb", vietnamese: "nghe", example: "Listen to the teacher carefully.", level: "A1" },
      { word: "speak", phonetic: "/spiːk/", pos: "verb", vietnamese: "nói", example: "I speak Vietnamese at home.", level: "A1" }
    ],
    "Performance & Learning": [
      { word: "grade", phonetic: "/ɡreɪd/", pos: "noun", vietnamese: "điểm số", example: "She got an A grade in English.", level: "A2" },
      { word: "study", phonetic: "/ˈstʌd.i/", pos: "verb", vietnamese: "học tập", example: "I need to study for the test.", level: "A1" },
      { word: "good", phonetic: "/ɡʊd/", pos: "adj", vietnamese: "tốt", example: "You did a good job!", level: "A1" },
      { word: "bad", phonetic: "/bæd/", pos: "adj", vietnamese: "xấu", example: "This is a bad answer.", level: "A1" },
      { word: "easy", phonetic: "/ˈiː.zi/", pos: "adj", vietnamese: "dễ", example: "The test was easy.", level: "A1" },
      { word: "difficult", phonetic: "/ˈdɪf.ɪ.kəlt/", pos: "adj", vietnamese: "khó", example: "Math is difficult for me.", level: "A2" },
      { word: "pass", phonetic: "/pɑːs/", pos: "verb", vietnamese: "đỗ", example: "I hope to pass the exam.", level: "A2" },
      { word: "fail", phonetic: "/feɪl/", pos: "verb", vietnamese: "trượt", example: "I don't want to fail the test.", level: "A2" }
    ]
  },
  "SHOPPING & CUSTOMER SERVICE": {
    "Returns & Refunds": [
      { word: "return", phonetic: "/rɪˈtɜːn/", pos: "verb", vietnamese: "trả hàng", example: "I need to return this shirt because it's too small.", level: "A2" },
      { word: "receipt", phonetic: "/rɪˈsiːt/", pos: "noun", vietnamese: "biên lai", example: "Keep the receipt for returns.", level: "A2" },
      { word: "buy", phonetic: "/baɪ/", pos: "verb", vietnamese: "mua", example: "I want to buy a new phone.", level: "A1" },
      { word: "sell", phonetic: "/sel/", pos: "verb", vietnamese: "bán", example: "This shop sells clothes.", level: "A1" },
      { word: "size", phonetic: "/saɪz/", pos: "noun", vietnamese: "kích cỡ", example: "What size do you need?", level: "A2" },
      { word: "small", phonetic: "/smɔːl/", pos: "adj", vietnamese: "nhỏ", example: "This shirt is too small.", level: "A1" },
      { word: "large", phonetic: "/lɑːdʒ/", pos: "adj", vietnamese: "lớn", example: "I need a large pizza.", level: "A1" }
    ],
    "Problems & Solutions": [
      { word: "problem", phonetic: "/ˈprɒb.ləm/", pos: "noun", vietnamese: "vấn đề", example: "We have a problem with the order.", level: "A2" },
      { word: "help", phonetic: "/help/", pos: "verb", vietnamese: "giúp đỡ", example: "Can you help me find this item?", level: "A1" },
      { word: "sorry", phonetic: "/ˈsɒr.i/", pos: "int", vietnamese: "xin lỗi", example: "I'm sorry, we don't have it.", level: "A1" },
      { word: "thank you", phonetic: "/θæŋk juː/", pos: "phrase", vietnamese: "cảm ơn", example: "Thank you for your help.", level: "A1" }
    ],
    "Service & Quality": [
      { word: "service", phonetic: "/ˈsɜː.vɪs/", pos: "noun", vietnamese: "dịch vụ", example: "Customer service was outstanding.", level: "A2" },
      { word: "quality", phonetic: "/ˈkwɒl.ə.ti/", pos: "noun", vietnamese: "chất lượng", example: "The quality is very good.", level: "A2" },
      { word: "new", phonetic: "/njuː/", pos: "adj", vietnamese: "mới", example: "I want a new phone.", level: "A1" },
      { word: "old", phonetic: "/əʊld/", pos: "adj", vietnamese: "cũ", example: "This bag is old.", level: "A1" },
      { word: "big", phonetic: "/bɪɡ/", pos: "adj", vietnamese: "to", example: "The shop is very big.", level: "A1" }
    ],
    "Customer Relations": [
      { word: "customer", phonetic: "/ˈkʌs.tə.mər/", pos: "noun", vietnamese: "khách hàng", example: "The customer is always right.", level: "A2" },
      { word: "happy", phonetic: "/ˈhæp.i/", pos: "adj", vietnamese: "vui", example: "The customer is happy with the service.", level: "A1" },
      { word: "please", phonetic: "/pliːz/", pos: "int", vietnamese: "làm ơn", example: "Can I help you, please?", level: "A1" }
    ]
  },
  "BUSINESS & WORKPLACE": {
    "Company Operations": [
      { word: "company", phonetic: "/ˈkʌm.pə.ni/", pos: "noun", vietnamese: "công ty", example: "I work for a big company.", level: "A2" },
      { word: "work", phonetic: "/wɜːk/", pos: "verb", vietnamese: "làm việc", example: "I work from 9 to 5.", level: "A1" },
      { word: "job", phonetic: "/dʒɒb/", pos: "noun", vietnamese: "công việc", example: "I have a new job.", level: "A1" },
      { word: "boss", phonetic: "/bɒs/", pos: "noun", vietnamese: "sếp", example: "My boss is very nice.", level: "A2" }
    ],
    "Performance & Reviews": [
      { word: "goal", phonetic: "/ɡəʊl/", pos: "noun", vietnamese: "mục tiêu", example: "Set achievable goals for the team.", level: "A2" },
      { word: "hard", phonetic: "/hɑːd/", pos: "adj", vietnamese: "khó khăn", example: "The work is hard but interesting.", level: "A1" },
      { word: "easy", phonetic: "/ˈiː.zi/", pos: "adj", vietnamese: "dễ", example: "This task is easy.", level: "A1" }
    ],
    "Materials & Products": [
      { word: "product", phonetic: "/ˈprɒd.ʌkt/", pos: "noun", vietnamese: "sản phẩm", example: "The new product launched successfully.", level: "A2" },
      { word: "make", phonetic: "/meɪk/", pos: "verb", vietnamese: "làm", example: "We make high-quality products.", level: "A1" }
    ],
    "Work Environment": [
      { word: "office", phonetic: "/ˈɒf.ɪs/", pos: "noun", vietnamese: "văn phòng", example: "The office is modern and spacious.", level: "A1" },
      { word: "desk", phonetic: "/desk/", pos: "noun", vietnamese: "bàn làm việc", example: "My desk is near the window.", level: "A1" },
      { word: "computer", phonetic: "/kəmˈpjuː.tər/", pos: "noun", vietnamese: "máy tính", example: "I use a computer at work.", level: "A1" },
      { word: "phone", phonetic: "/fəʊn/", pos: "noun", vietnamese: "điện thoại", example: "Please answer the phone.", level: "A1" }
    ],
    "Projects & Planning": [
      { word: "plan", phonetic: "/plæn/", pos: "noun", vietnamese: "kế hoạch", example: "We have a plan for next month.", level: "A2" },
      { word: "time", phonetic: "/taɪm/", pos: "noun", vietnamese: "thời gian", example: "I don't have time today.", level: "A1" }
    ]
  },
  "COMMUNICATION": {
    "Product Launch & Marketing": [
      { word: "new", phonetic: "/njuː/", pos: "adj", vietnamese: "mới", example: "This is a new product.", level: "A1" },
      { word: "good", phonetic: "/ɡʊd/", pos: "adj", vietnamese: "tốt", example: "It's a good idea.", level: "A1" }
    ],
    "Team Collaboration": [
      { word: "meeting", phonetic: "/ˈmiː.tɪŋ/", pos: "noun", vietnamese: "cuộc họp", example: "Schedule a team meeting.", level: "A2" },
      { word: "team", phonetic: "/tiːm/", pos: "noun", vietnamese: "đội nhóm", example: "We work as a team.", level: "A1" },
      { word: "talk", phonetic: "/tɔːk/", pos: "verb", vietnamese: "nói chuyện", example: "Let's talk about the project.", level: "A1" }
    ],
    "Design & Materials": [
      { word: "color", phonetic: "/ˈkʌl.ər/", pos: "noun", vietnamese: "màu sắc", example: "I like blue color.", level: "A1" },
      { word: "big", phonetic: "/bɪɡ/", pos: "adj", vietnamese: "to", example: "The design is big.", level: "A1" }
    ],
    "Feedback & Adjustments": [
      { word: "change", phonetic: "/tʃeɪndʒ/", pos: "verb", vietnamese: "thay đổi", example: "We need to change the plan.", level: "A2" },
      { word: "better", phonetic: "/ˈbet.ər/", pos: "adj", vietnamese: "tốt hơn", example: "This is better than before.", level: "A1" }
    ],
    "Events & Presentations": [
      { word: "day", phonetic: "/deɪ/", pos: "noun", vietnamese: "ngày", example: "The event is next Monday.", level: "A1" },
      { word: "time", phonetic: "/taɪm/", pos: "noun", vietnamese: "giờ", example: "What time is the presentation?", level: "A1" }
    ]
  },
  "AUDIO & VOICE SERVICES": {
    "Voice Recording": [
      { word: "voice", phonetic: "/vɔɪs/", pos: "noun", vietnamese: "giọng nói", example: "She has a beautiful voice.", level: "A1" },
      { word: "speak", phonetic: "/spiːk/", pos: "verb", vietnamese: "nói", example: "Please speak slowly.", level: "A1" },
      { word: "record", phonetic: "/rɪˈkɔːd/", pos: "verb", vietnamese: "ghi âm", example: "I will record the meeting.", level: "A2" }
    ],
    "Service Features": [
      { word: "sound", phonetic: "/saʊnd/", pos: "noun", vietnamese: "âm thanh", example: "The sound is too loud.", level: "A1" },
      { word: "clear", phonetic: "/klɪər/", pos: "adj", vietnamese: "rõ ràng", example: "The voice is clear.", level: "A2" }
    ],
    "Audio Production": [
      { word: "music", phonetic: "/ˈmjuː.zɪk/", pos: "noun", vietnamese: "âm nhạc", example: "I like pop music.", level: "A1" },
      { word: "song", phonetic: "/sɒŋ/", pos: "noun", vietnamese: "bài hát", example: "This is my favorite song.", level: "A1" }
    ],
    "Client Communication": [
      { word: "call", phonetic: "/kɔːl/", pos: "verb", vietnamese: "gọi điện", example: "I will call you later.", level: "A1" },
      { word: "email", phonetic: "/ˈiː.meɪl/", pos: "noun", vietnamese: "thư điện tử", example: "Send me an email.", level: "A2" }
    ]
  },
  "TEXT MESSAGING": {
    "Informal Communication": [
      { word: "chat", phonetic: "/tʃæt/", pos: "noun", vietnamese: "cuộc trò chuyện", example: "Let's have a quick chat.", level: "A1" },
      { word: "emoji", phonetic: "/ɪˈməʊ.dʒi/", pos: "noun", vietnamese: "biểu tượng cảm xúc", example: "Use an emoji to express your mood.", level: "A2" },
      { word: "hi", phonetic: "/haɪ/", pos: "int", vietnamese: "xin chào", example: "Hi! How are you?", level: "A1" },
      { word: "hello", phonetic: "/həˈləʊ/", pos: "int", vietnamese: "xin chào", example: "Hello, nice to meet you.", level: "A1" },
      { word: "bye", phonetic: "/baɪ/", pos: "int", vietnamese: "tạm biệt", example: "Bye! See you tomorrow.", level: "A1" }
    ],
    "Expressing Agreement": [
      { word: "sure", phonetic: "/ʃɔːr/", pos: "adv", vietnamese: "chắc chắn", example: "Sure, that sounds good.", level: "A1" },
      { word: "okay", phonetic: "/ˌəʊˈkeɪ/", pos: "adv", vietnamese: "được", example: "Okay, let's do it.", level: "A1" },
      { word: "agree", phonetic: "/əˈɡriː/", pos: "verb", vietnamese: "đồng ý", example: "I agree with your idea.", level: "A2" },
      { word: "yes", phonetic: "/jes/", pos: "adv", vietnamese: "có", example: "Yes, I understand.", level: "A1" },
      { word: "no", phonetic: "/nəʊ/", pos: "adv", vietnamese: "không", example: "No, thank you.", level: "A1" }
    ]
  }
};
</file>

<file path="src/data/vocabulary/vocabularyDataLevel2.js">
// src/data/vocabularyDataLevel2.js
// Vocabulary data for CEFR levels B1 - B2 (Intermediate to Upper-Intermediate)
// Expanded with 300+ high-frequency, practical, and professional vocabulary items
// Organized by main topics and sub-topics
// Each entry: { word, phonetic (IPA), pos (part of speech), vietnamese, example, level }

export const vocabularyDataLevel2 = {
  "TRAVEL & TOURISM": {
    "Travel Activities": [
      { word: "explore", phonetic: "/ɪkˈsplɔːr/", pos: "verb", vietnamese: "khám phá", example: "We plan to explore the ancient ruins during our trip.", level: "A2" },
      { word: "hike", phonetic: "/haɪk/", pos: "verb", vietnamese: "đi bộ đường dài", example: "They decided to hike up the mountain for a better view.", level: "B1" },
      { word: "sightsee", phonetic: "/ˈsaɪt.siː/", pos: "verb", vietnamese: "tham quan", example: "Tourists often sightsee in the city center.", level: "B1" },
      { word: "adventure", phonetic: "/ədˈven.tʃər/", pos: "noun", vietnamese: "cuộc phiêu lưu", example: "The trip was full of adventure and excitement.", level: "B2" },
      { word: "backpack", phonetic: "/ˈbæk.pæk/", pos: "verb", vietnamese: "đi du lịch ba lô", example: "She loves to backpack through Europe in summer.", level: "B1" },
      { word: "cruise", phonetic: "/kruːz/", pos: "noun", vietnamese: "chuyến du thuyền", example: "We booked a Mediterranean cruise for our honeymoon.", level: "B1" },
      { word: "guidebook", phonetic: "/ˈɡaɪd.bʊk/", pos: "noun", vietnamese: "sách hướng dẫn du lịch", example: "The guidebook recommends the best local restaurants.", level: "B1" },
      { word: "landmark", phonetic: "/ˈlænd.mɑːk/", pos: "noun", vietnamese: "địa danh", example: "The Eiffel Tower is a famous landmark in Paris.", level: "B1" },
      { word: "itinerary", phonetic: "/aɪˈtɪn.ər.ər.i/", pos: "noun", vietnamese: "lịch trình", example: "Our itinerary includes three cities in one week.", level: "B2" },
      { word: "scenic", phonetic: "/ˈsiː.nɪk/", pos: "adj", vietnamese: "cảnh đẹp", example: "The scenic route offers stunning mountain views.", level: "B2" },
      { word: "off the beaten path", phonetic: "/ɒf ðə ˈbiː.tən pɑːθ/", pos: "phrase", vietnamese: "nơi ít người biết", example: "We prefer destinations off the beaten path.", level: "B2" },
      { word: "souvenir shop", phonetic: "/ˌsuː.vəˈnɪər ʃɒp/", pos: "noun", vietnamese: "cửa hàng lưu niệm", example: "The souvenir shop sells handmade crafts.", level: "B1" },
      { word: "passport", phonetic: "/ˈpɑː.spɔːt/", pos: "noun", vietnamese: "hộ chiếu", example: "Don’t forget your passport at the airport.", level: "B1" },
      { word: "visa", phonetic: "/ˈviː.zə/", pos: "noun", vietnamese: "thị thực", example: "You need a visa to enter this country.", level: "B1" },
      { word: "customs", phonetic: "/ˈkʌs.təmz/", pos: "noun", vietnamese: "hải quan", example: "We declared all items at customs.", level: "B2" }
    ],
    "Transportation": [
      { word: "subway", phonetic: "/ˈsʌb.weɪ/", pos: "noun", vietnamese: "tàu điện ngầm", example: "The subway is the fastest way to get around the city.", level: "B1" },
      { word: "ferry", phonetic: "/ˈfer.i/", pos: "noun", vietnamese: "phà", example: "We crossed the river by ferry.", level: "B2" },
      { word: "platform", phonetic: "/ˈplæt.fɔːm/", pos: "noun", vietnamese: "sân ga", example: "The train arrives on platform 3.", level: "B1" },
      { word: "departure", phonetic: "/dɪˈpɑː.tʃər/", pos: "noun", vietnamese: "sự khởi hành", example: "Check the departure time before leaving.", level: "B1" },
      { word: "arrival", phonetic: "/əˈraɪ.vəl/", pos: "noun", vietnamese: "sự đến nơi", example: "Flight arrival is at 8 PM.", level: "B1" },
      { word: "transfer", phonetic: "/ˈtræns.fɜːr/", pos: "noun", vietnamese: "chuyển tiếp", example: "We have a two-hour transfer in Singapore.", level: "B1" },
      { word: "boarding pass", phonetic: "/ˈbɔː.dɪŋ pɑːs/", pos: "noun", vietnamese: "thẻ lên máy bay", example: "Print your boarding pass at home.", level: "B1" },
      { word: "luggage", phonetic: "/ˈlʌɡ.ɪdʒ/", pos: "noun", vietnamese: "hành lý", example: "Each passenger can bring one piece of luggage.", level: "B1" },
      { word: "check-in", phonetic: "/ˈtʃek.ɪn/", pos: "noun", vietnamese: "làm thủ tục", example: "Online check-in opens 24 hours before the flight.", level: "B1" },
      { word: "security", phonetic: "/sɪˈkjʊə.rə.ti/", pos: "noun", vietnamese: "an ninh", example: "Remove your shoes at security.", level: "B1" },
      { word: "gate", phonetic: "/ɡeɪt/", pos: "noun", vietnamese: "cửa ra máy bay", example: "Our flight departs from gate 12.", level: "B1" },
      { word: "overhead bin", phonetic: "/ˈəʊ.və.hed bɪn/", pos: "noun", vietnamese: "khoang hành lý trên đầu", example: "Please store your bag in the overhead bin.", level: "B2" },
      { word: "turbulence", phonetic: "/ˈtɜː.bjə.ləns/", pos: "noun", vietnamese: "nhiễu động", example: "The plane experienced turbulence during the storm.", level: "B2" },
      { word: "jet", phonetic: "/dʒet/", pos: "noun", vietnamese: "máy bay phản lực", example: "We flew on a private jet to the island.", level: "B2" }
    ],
    "Accommodation & Shopping": [
      { word: "hostel", phonetic: "/ˈhɒs.təl/", pos: "noun", vietnamese: "nhà nghỉ giá rẻ", example: "Backpackers often stay in hostels to save money.", level: "B1" },
      { word: "reservation", phonetic: "/ˌrez.əˈveɪ.ʃən/", pos: "noun", vietnamese: "đặt chỗ", example: "Make a reservation for the hotel in advance.", level: "B1" },
      { word: "bargain", phonetic: "/ˈbɑː.ɡɪn/", pos: "verb", vietnamese: "mặc cả", example: "You can bargain for a better price at the flea market.", level: "B2" },
      { word: "reception", phonetic: "/rɪˈsep.ʃən/", pos: "noun", vietnamese: "lễ tân", example: "Ask at reception for extra towels.", level: "B1" },
      { word: "single room", phonetic: "/ˈsɪŋ.ɡəl ruːm/", pos: "noun", vietnamese: "phòng đơn", example: "I booked a single room for one night.", level: "B1" },
      { word: "double room", phonetic: "/ˈdʌb.əl ruːm/", pos: "noun", vietnamese: "phòng đôi", example: "The double room has a queen-size bed.", level: "B1" },
      { word: "suite", phonetic: "/swiːt/", pos: "noun", vietnamese: "phòng suite", example: "The presidential suite costs $1000 per night.", level: "B1" },
      { word: "amenities", phonetic: "/əˈmiː.nə.tiz/", pos: "noun", vietnamese: "tiện nghi", example: "The hotel offers free Wi-Fi and gym amenities.", level: "B2" },
      { word: "check-out", phonetic: "/ˈtʃek.aʊt/", pos: "noun", vietnamese: "trả phòng", example: "Check-out time is 11 AM.", level: "B1" },
      { word: "deposit", phonetic: "/dɪˈpɒz.ɪt/", pos: "noun", vietnamese: "tiền đặt cọc", example: "We require a $50 deposit for the key.", level: "B1" },
      { word: "flea market", phonetic: "/ˈfliː ˌmɑː.kɪt/", pos: "noun", vietnamese: "chợ trời", example: "You can find antiques at the flea market.", level: "B2" },
      { word: "discount", phonetic: "/ˈdɪs.kaʊnt/", pos: "noun", vietnamese: "giảm giá", example: "Students get a 10% discount.", level: "B1" },
      { word: "sale", phonetic: "/seɪl/", pos: "noun", vietnamese: "bán giảm giá", example: "The store is having a big sale this weekend.", level: "B1" },
      { word: "cash", phonetic: "/kæʃ/", pos: "noun", vietnamese: "tiền mặt", example: "I paid in cash to avoid fees.", level: "B1" },
      { word: "credit card", phonetic: "/ˈkred.ɪt kɑːd/", pos: "noun", vietnamese: "thẻ tín dụng", example: "Do you accept credit cards?", level: "B1" }
    ],
    "Travel Problems": [
      { word: "delay", phonetic: "/dɪˈleɪ/", pos: "noun", vietnamese: "sự chậm trễ", example: "The flight delay caused us to miss our connection.", level: "B1" },
      { word: "emergency", phonetic: "/ɪˈmɜː.dʒən.si/", pos: "noun", vietnamese: "tình huống khẩn cấp", example: "In case of emergency, contact the embassy.", level: "B1" },
      { word: "lost luggage", phonetic: "/lɒst ˈlʌɡ.ɪdʒ/", pos: "noun", vietnamese: "hành lý bị mất", example: "My lost luggage was found after two days.", level: "B2" },
      { word: "jet lag", phonetic: "/dʒet læɡ/", pos: "noun", vietnamese: "mệt mỏi do lệch múi giờ", example: "I suffered from jet lag after the long flight.", level: "B2" },
      { word: "miss", phonetic: "/mɪs/", pos: "verb", vietnamese: "nhỡ", example: "I missed my train because of traffic.", level: "B1" },
      { word: "cancelled", phonetic: "/ˈkæn.səld/", pos: "adj", vietnamese: "bị hủy", example: "The tour was cancelled due to bad weather.", level: "B1" },
      { word: "overbooked", phonetic: "/ˌəʊ.vəˈbʊkt/", pos: "adj", vietnamese: "đặt quá số", example: "The hotel was overbooked during the festival.", level: "B2" },
      { word: "scam", phonetic: "/skæm/", pos: "noun", vietnamese: "lừa đảo", example: "Beware of taxi scams at the airport.", level: "B2" },
      { word: "pickpocket", phonetic: "/ˈpɪkˌpɒk.ɪt/", pos: "noun", vietnamese: "kẻ móc túi", example: "Pickpockets target tourists in crowded areas.", level: "B2" },
      { word: "insurance", phonetic: "/ɪnˈʃɔː.rəns/", pos: "noun", vietnamese: "bảo hiểm", example: "Travel insurance covers medical emergencies.", level: "B1" },
      { word: "compensation", phonetic: "/ˌkɒm.penˈseɪ.ʃən/", pos: "noun", vietnamese: "bồi thường", example: "The airline offered compensation for the delay.", level: "B2" },
      { word: "stranded", phonetic: "/ˈstræn.dɪd/", pos: "adj", vietnamese: "bị kẹt", example: "Passengers were stranded overnight at the airport.", level: "B2" }
    ]
  },
  "FOOD & RESTAURANTS": {
    "Ordering Food": [
      { word: "appetizer", phonetic: "/ˈæp.ɪ.taɪ.zər/", pos: "noun", vietnamese: "món khai vị", example: "We ordered soup as an appetizer.", level: "B1" },
      { word: "main course", phonetic: "/meɪn kɔːrs/", pos: "noun", vietnamese: "món chính", example: "The steak is the main course tonight.", level: "B1" },
      { word: "side dish", phonetic: "/ˈsaɪd dɪʃ/", pos: "noun", vietnamese: "món phụ", example: "Fries come as a side dish with the burger.", level: "B1" },
      { word: "beverage", phonetic: "/ˈbev.ər.ɪdʒ/", pos: "noun", vietnamese: "đồ uống", example: "Soft drinks are included in the beverage menu.", level: "B1" },
      { word: "recommend", phonetic: "/ˌrek.əˈmend/", pos: "verb", vietnamese: "gợi ý", example: "Can you recommend a good wine?", level: "B1" },
      { word: "special", phonetic: "/ˈspeʃ.əl/", pos: "noun", vietnamese: "món đặc biệt", example: "Today’s special is grilled salmon.", level: "B1" },
      { word: "rare", phonetic: "/reər/", pos: "adj", vietnamese: "tái (thịt)", example: "I’d like my steak rare, please.", level: "B1" },
      { word: "medium", phonetic: "/ˈmiː.di.əm/", pos: "adj", vietnamese: "vừa chín tới", example: "Medium is perfect for me.", level: "B1" },
      { word: "well-done", phonetic: "/ˌwel ˈdʌn/", pos: "adj", vietnamese: "chín kỹ", example: "He always orders his meat well-done.", level: "B1" },
      { word: "allergic", phonetic: "/əˈlɜː.dʒɪk/", pos: "adj", vietnamese: "dị ứng", example: "I’m allergic to peanuts.", level: "B1" },
      { word: "vegetarian", phonetic: "/ˌvedʒ.ɪˈteə.ri.ən/", pos: "adj", vietnamese: "ăn chay", example: "Do you have vegetarian options?", level: "B1" },
      { word: "spicy", phonetic: "/ˈspaɪ.si/", pos: "adj", vietnamese: "cay", example: "This curry is too spicy for me.", level: "B1" },
      { word: "portion", phonetic: "/ˈpɔː.ʃən/", pos: "noun", vietnamese: "khẩu phần", example: "The portion size is generous here.", level: "B2" },
      { word: "gourmet", phonetic: "/ˈɡɔː.meɪ/", pos: "adj", vietnamese: "cao cấp", example: "This is a gourmet restaurant with Michelin stars.", level: "B2" }
    ],
    "Restaurant Features": [
      { word: "cuisine", phonetic: "/kwɪˈziːn/", pos: "noun", vietnamese: "ẩm thực", example: "This place serves Italian cuisine.", level: "B1" },
      { word: "reservation", phonetic: "/ˌrez.əˈveɪ.ʃən/", pos: "noun", vietnamese: "đặt bàn", example: "Do you have a reservation?", level: "B1" },
      { word: "tip", phonetic: "/tɪp/", pos: "noun", vietnamese: "tiền boa", example: "We left a generous tip for good service.", level: "B1" },
      { word: "ambiance", phonetic: "/ˈæm.bi.əns/", pos: "noun", vietnamese: "không khí", example: "The restaurant has a romantic ambiance.", level: "B2" },
      { word: "service charge", phonetic: "/ˈsɜː.vɪs tʃɑːdʒ/", pos: "noun", vietnamese: "phí dịch vụ", example: "A 10% service charge is added to the bill.", level: "B1" },
      { word: "outdoor seating", phonetic: "/ˌaʊt.dɔːr ˈsiː.tɪŋ/", pos: "noun", vietnamese: "chỗ ngồi ngoài trời", example: "We prefer outdoor seating in summer.", level: "B1" },
      { word: "live music", phonetic: "/laɪv ˈmjuː.zɪk/", pos: "noun", vietnamese: "nhạc sống", example: "The bar has live music every Friday.", level: "B1" },
      { word: "dress code", phonetic: "/ˈdres kəʊd/", pos: "noun", vietnamese: "quy định trang phục", example: "The restaurant has a smart casual dress code.", level: "B2" },
      { word: "buffet", phonetic: "/ˈbʊf.eɪ/", pos: "noun", vietnamese: "tiệc tự chọn", example: "The hotel offers a breakfast buffet.", level: "B1" },
      { word: "takeaway", phonetic: "/ˈteɪ.kə.weɪ/", pos: "noun", vietnamese: "đồ mang đi", example: "Can I get this as takeaway?", level: "B1" },
      { word: "chain", phonetic: "/tʃeɪn/", pos: "noun", vietnamese: "chuỗi cửa hàng", example: "This is part of an international restaurant chain.", level: "B2" },
      { word: "family-run", phonetic: "/ˈfæm.ɪ.li rʌn/", pos: "adj", vietnamese: "do gia đình quản lý", example: "It’s a small family-run restaurant with great food.", level: "B2" }
    ],
    "Job & Career (Food Industry)": [
      { word: "manager", phonetic: "/ˈmæn.ɪ.dʒər/", pos: "noun", vietnamese: "quản lý", example: "The restaurant manager handled the complaint.", level: "B1" },
      { word: "bartender", phonetic: "/ˈbɑːrˌten.dər/", pos: "noun", vietnamese: "người pha chế rượu", example: "The bartender mixed a cocktail.", level: "B2" },
      { word: "head chef", phonetic: "/hed ʃef/", pos: "noun", vietnamese: "đầu bếp trưởng", example: "The head chef creates the daily specials.", level: "B1" },
      { word: "sous chef", phonetic: "/ˌsuː ʃef/", pos: "noun", vietnamese: "phó đầu bếp", example: "The sous chef assists the head chef.", level: "B2" },
      { word: "dishwasher", phonetic: "/ˈdɪʃˌwɒʃ.ər/", pos: "noun", vietnamese: "nhân viên rửa bát", example: "The dishwasher works in the back kitchen.", level: "B1" },
      { word: "hostess", phonetic: "/ˈhəʊ.stes/", pos: "noun", vietnamese: "nữ tiếp tân", example: "The hostess greeted us at the door.", level: "B1" },
      { word: "shift", phonetic: "/ʃɪft/", pos: "noun", vietnamese: "ca làm", example: "I work the evening shift from 5 to 11.", level: "B1" },
      { word: "tips", phonetic: "/tɪps/", pos: "noun", vietnamese: "tiền boa", example: "Waiters earn extra from tips.", level: "B1" },
      { word: "uniform", phonetic: "/ˈjuː.nɪ.fɔːm/", pos: "noun", vietnamese: "đồng phục", example: "Staff must wear a clean uniform.", level: "B1" },
      { word: "menu planning", phonetic: "/ˈmen.juː ˌplæn.ɪŋ/", pos: "noun", vietnamese: "lập thực đơn", example: "Menu planning considers seasonal ingredients.", level: "B2" },
      { word: "hygiene", phonetic: "/ˈhaɪ.dʒiːn/", pos: "noun", vietnamese: "vệ sinh", example: "Food hygiene is strictly enforced.", level: "B2" }
    ]
  },
  "EDUCATION": {
    "Academic Terms": [
      { word: "semester", phonetic: "/sɪˈmes.tər/", pos: "noun", vietnamese: "học kỳ", example: "The fall semester starts in September.", level: "B1" },
      { word: "lecture", phonetic: "/ˈlek.tʃər/", pos: "noun", vietnamese: "bài giảng", example: "The professor gave a lecture on history.", level: "B1" },
      { word: "curriculum", phonetic: "/kəˈrɪk.jə.ləm/", pos: "noun", vietnamese: "chương trình học", example: "The curriculum includes math and science.", level: "B2" },
      { word: "diploma", phonetic: "/dɪˈpləʊ.mə/", pos: "noun", vietnamese: "bằng cấp", example: "He received his diploma after graduation.", level: "B2" },
      { word: "faculty", phonetic: "/ˈfæk.əl.ti/", pos: "noun", vietnamese: "khoa", example: "She teaches in the Faculty of Science.", level: "B1" },
      { word: "campus", phonetic: "/ˈkæm.pəs/", pos: "noun", vietnamese: "khuôn viên trường", example: "The campus has a large library.", level: "B1" },
      { word: "tuition", phonetic: "/tjuːˈɪʃ.ən/", pos: "noun", vietnamese: "học phí", example: "Tuition fees increased this year.", level: "B1" },
      { word: "scholarship", phonetic: "/ˈskɒl.ə.ʃɪp/", pos: "noun", vietnamese: "học bổng", example: "She won a scholarship to study abroad.", level: "B1" },
      { word: "deadline", phonetic: "/ˈded.laɪn/", pos: "noun", vietnamese: "hạn chót", example: "The assignment deadline is next Friday.", level: "B1" },
      { word: "enroll", phonetic: "/ɪnˈrəʊl/", pos: "verb", vietnamese: "đăng ký học", example: "You can enroll online before the semester.", level: "B1" },
      { word: "major", phonetic: "/ˈmeɪ.dʒər/", pos: "noun", vietnamese: "chuyên ngành", example: "My major is Computer Science.", level: "B1" },
      { word: "minor", phonetic: "/ˈmaɪ.nər/", pos: "noun", vietnamese: "phụ ngành", example: "I have a minor in Psychology.", level: "B2" },
      { word: "elective", phonetic: "/ɪˈlek.tɪv/", pos: "noun", vietnamese: "môn tự chọn", example: "Photography is my favorite elective.", level: "B2" },
      { word: "credit", phonetic: "/ˈkred.ɪt/", pos: "noun", vietnamese: "tín chỉ", example: "This course is worth 3 credits.", level: "B2" }
    ],
    "Study Requirements": [
      { word: "assignment", phonetic: "/əˈsaɪn.mənt/", pos: "noun", vietnamese: "bài tập", example: "Complete the assignment by Friday.", level: "B1" },
      { word: "attendance", phonetic: "/əˈten.dəns/", pos: "noun", vietnamese: "sự tham gia", example: "Attendance is mandatory for all classes.", level: "B2" },
      { word: "research", phonetic: "/rɪˈsɜːtʃ/", pos: "noun", vietnamese: "nghiên cứu", example: "Students must conduct research for the project.", level: "B1" },
      { word: "essay", phonetic: "/ˈes.eɪ/", pos: "noun", vietnamese: "bài luận", example: "Write a 1000-word essay on climate change.", level: "B1" },
      { word: "presentation", phonetic: "/ˌprez.ənˈteɪ.ʃən/", pos: "noun", vietnamese: "bài thuyết trình", example: "Prepare a 10-minute presentation.", level: "B1" },
      { word: "group work", phonetic: "/ɡruːp wɜːk/", pos: "noun", vietnamese: "làm việc nhóm", example: "This project requires group work.", level: "B1" },
      { word: "revision", phonetic: "/rɪˈvɪʒ.ən/", pos: "noun", vietnamese: "ôn tập", example: "Do revision before the exam.", level: "B1" },
      { word: "plagiarism", phonetic: "/ˈpleɪ.dʒər.ɪ.zəm/", pos: "noun", vietnamese: "đạo văn", example: "Plagiarism will result in failure.", level: "B2" },
      { word: "citation", phonetic: "/saɪˈteɪ.ʃən/", pos: "noun", vietnamese: "trích dẫn", example: "Include proper citations in your paper.", level: "B2" },
      { word: "bibliography", phonetic: "/ˌbɪb.liˈɒɡ.rə.fi/", pos: "noun", vietnamese: "tài liệu tham khảo", example: "Add a bibliography at the end of your essay.", level: "B2" }
    ],
    "Performance & Learning": [
      { word: "progress", phonetic: "/ˈprəʊ.ɡres/", pos: "noun", vietnamese: "sự tiến bộ", example: "He made good progress in his studies.", level: "B1" },
      { word: "motivation", phonetic: "/ˌməʊ.tɪˈveɪ.ʃən/", pos: "noun", vietnamese: "động lực", example: "Lack of motivation affects performance.", level: "B2" },
      { word: "feedback", phonetic: "/ˈfiːd.bæk/", pos: "noun", vietnamese: "phản hồi", example: "The teacher gave constructive feedback.", level: "B2" },
      { word: "concentration", phonetic: "/ˌkɒn.sənˈtreɪ.ʃən/", pos: "noun", vietnamese: "sự tập trung", example: "Good concentration is key to learning.", level: "B1" },
      { word: "distraction", phonetic: "/dɪˈstræk.ʃən/", pos: "noun", vietnamese: "sự phân tâm", example: "Phones are a major distraction in class.", level: "B1" },
      { word: "memory", phonetic: "/ˈmem.ər.i/", pos: "noun", vietnamese: "trí nhớ", example: "She has an excellent memory for names.", level: "B1" },
      { word: "comprehension", phonetic: "/ˌkɒm.prɪˈhen.ʃən/", pos: "noun", vietnamese: "sự hiểu", example: "Reading improves comprehension skills.", level: "B2" },
      { word: "critical thinking", phonetic: "/ˈkrɪt.ɪ.kəl ˈθɪŋ.kɪŋ/", pos: "noun", vietnamese: "tư duy phản biện", example: "The course develops critical thinking.", level: "B2" },
      { word: "self-study", phonetic: "/ˌself ˈstʌd.i/", pos: "noun", vietnamese: "tự học", example: "Self-study is important for language learning.", level: "B2" }
    ]
  },
  "SHOPPING & CUSTOMER SERVICE": {
    "Returns & Refunds": [
      { word: "refund", phonetic: "/ˈriː.fʌnd/", pos: "noun", vietnamese: "hoàn tiền", example: "The store issued a full refund.", level: "B1" },
      { word: "exchange", phonetic: "/ɪksˈtʃeɪndʒ/", pos: "verb", vietnamese: "đổi hàng", example: "Can I exchange this for a larger size?", level: "B1" },
      { word: "policy", phonetic: "/ˈpɒl.ə.si/", pos: "noun", vietnamese: "chính sách", example: "Check the return policy before buying.", level: "B2" },
      { word: "receipt", phonetic: "/rɪˈsiːt/", pos: "noun", vietnamese: "biên lai", example: "Keep your receipt for returns.", level: "B1" },
      { word: "defective", phonetic: "/dɪˈfek.tɪv/", pos: "adj", vietnamese: "lỗi", example: "The product is defective and doesn’t work.", level: "B2" },
      { word: "warranty", phonetic: "/ˈwɒr.ən.ti/", pos: "noun", vietnamese: "bảo hành", example: "This comes with a two-year warranty.", level: "B2" },
      { word: "replacement", phonetic: "/rɪˈpleɪs.mənt/", pos: "noun", vietnamese: "sản phẩm thay thế", example: "They sent a replacement within 3 days.", level: "B2" },
      { word: "faulty", phonetic: "/ˈfɔːl.ti/", pos: "adj", vietnamese: "hỏng", example: "Return faulty items within 30 days.", level: "B2" }
    ],
    "Problems & Solutions": [
      { word: "complaint", phonetic: "/kəmˈpleɪnt/", pos: "noun", vietnamese: "lời phàn nàn", example: "I filed a complaint about the service.", level: "B1" },
      { word: "apology", phonetic: "/əˈpɒl.ə.dʒi/", pos: "noun", vietnamese: "lời xin lỗi", example: "The manager offered an apology.", level: "B1" },
      { word: "resolve", phonetic: "/rɪˈzɒlv/", pos: "verb", vietnamese: "giải quyết", example: "We will resolve the issue promptly.", level: "B2" },
      { word: "escalate", phonetic: "/ˈes.kə.leɪt/", pos: "verb", vietnamese: "leo thang", example: "Escalate the issue to a supervisor.", level: "B2" },
      { word: "compensation", phonetic: "/ˌkɒm.penˈseɪ.ʃən/", pos: "noun", vietnamese: "bồi thường", example: "They offered compensation for the delay.", level: "B2" },
      { word: "satisfaction", phonetic: "/ˌsæt.ɪsˈfæk.ʃən/", pos: "noun", vietnamese: "sự hài lòng", example: "Customer satisfaction is our priority.", level: "B2" }
    ],
    "Service & Quality": [
      { word: "quality", phonetic: "/ˈkwɒl.ə.ti/", pos: "noun", vietnamese: "chất lượng", example: "The quality of the fabric is excellent.", level: "B1" },
      { word: "durable", phonetic: "/ˈdjʊə.rə.bəl/", pos: "adj", vietnamese: "bền", example: "These shoes are very durable.", level: "B2" },
      { word: "brand", phonetic: "/brænd/", pos: "noun", vietnamese: "thương hiệu", example: "This is a well-known brand.", level: "B1" },
      { word: "guarantee", phonetic: "/ˌɡær.ənˈtiː/", pos: "noun", vietnamese: "bảo đảm", example: "The product comes with a money-back guarantee.", level: "B2" },
      { word: "value for money", phonetic: "/ˈvæl.juː fə ˈmʌn.i/", pos: "phrase", vietnamese: "đáng giá", example: "This phone offers good value for money.", level: "B2" },
      { word: "premium", phonetic: "/ˈpriː.mi.əm/", pos: "adj", vietnamese: "cao cấp", example: "They sell premium quality products.", level: "B2" }
    ],
    "Customer Relations": [
      { word: "assistance", phonetic: "/əˈsɪs.təns/", pos: "noun", vietnamese: "sự hỗ trợ", example: "Do you need assistance with your purchase?", level: "B1" },
      { word: "feedback", phonetic: "/ˈfiːd.bæk/", pos: "noun", vietnamese: "phản hồi", example: "We appreciate your feedback.", level: "B2" },
      { word: "loyalty", phonetic: "/ˈlɔɪ.əl.ti/", pos: "noun", vietnamese: "lòng trung thành", example: "We reward customer loyalty with discounts.", level: "B2" },
      { word: "survey", phonetic: "/ˈsɜː.veɪ/", pos: "noun", vietnamese: "khảo sát", example: "Please complete our customer survey.", level: "B1" },
      { word: "recommendation", phonetic: "/ˌrek.ə.menˈdeɪ.ʃən/", pos: "noun", vietnamese: "lời khuyên", example: "Can you give me a recommendation?", level: "B2" },
      { word: "membership", phonetic: "/ˈmem.bə.ʃɪp/", pos: "noun", vietnamese: "thành viên", example: "Join our membership for exclusive offers.", level: "B2" }
    ]
  },
  "BUSINESS & WORKPLACE": {
    "Company Operations": [
      { word: "management", phonetic: "/ˈmæn.ɪ.dʒ.mənt/", pos: "noun", vietnamese: "quản lý", example: "Effective management is crucial.", level: "B1" },
      { word: "operation", phonetic: "/ˌɒp.əˈreɪ.ʃən/", pos: "noun", vietnamese: "hoạt động", example: "Daily operations run smoothly.", level: "B2" },
      { word: "strategy", phonetic: "/ˈstræt.ə.dʒi/", pos: "noun", vietnamese: "chiến lược", example: "The company developed a new strategy.", level: "B2" },
      { word: "supply", phonetic: "/səˈplaɪ/", pos: "noun", vietnamese: "nguồn cung", example: "We have a steady supply of materials.", level: "B2" },
      { word: "revenue", phonetic: "/ˈrev.ən.juː/", pos: "noun", vietnamese: "doanh thu", example: "Revenue increased by 20% this quarter.", level: "B2" },
      { word: "profit", phonetic: "/ˈprɒf.ɪt/", pos: "noun", vietnamese: "lợi nhuận", example: "The company made a large profit.", level: "B1" },
      { word: "loss", phonetic: "/lɒs/", pos: "noun", vietnamese: "lỗ", example: "They reported a loss this year.", level: "B1" },
      { word: "branch", phonetic: "/brɑːntʃ/", pos: "noun", vietnamese: "chi nhánh", example: "We opened a new branch in Hanoi.", level: "B1" },
      { word: "headquarters", phonetic: "/hedˈkwɔː.təz/", pos: "noun", vietnamese: "trụ sở chính", example: "The headquarters is in Singapore.", level: "B2" },
      { word: "expansion", phonetic: "/ɪkˈspæn.ʃən/", pos: "noun", vietnamese: "mở rộng", example: "The company plans international expansion.", level: "B2" }
    ],
    "Performance & Reviews": [
      { word: "review", phonetic: "/rɪˈvjuː/", pos: "noun", vietnamese: "đánh giá", example: "The employee received a positive review.", level: "B1" },
      { word: "performance", phonetic: "/pəˈfɔː.məns/", pos: "noun", vietnamese: "hiệu suất", example: "Annual performance reviews are held.", level: "B2" },
      { word: "improvement", phonetic: "/ɪmˈpruːv.mənt/", pos: "noun", vietnamese: "cải thiện", example: "Areas for improvement were identified.", level: "B2" },
      { word: "target", phonetic: "/ˈtɑː.ɡɪt/", pos: "noun", vietnamese: "mục tiêu", example: "We met our sales target.", level: "B1" },
      { word: "bonus", phonetic: "/ˈbəʊ.nəs/", pos: "noun", vietnamese: "tiền thưởng", example: "Employees get a year-end bonus.", level: "B1" },
      { word: "promotion", phonetic: "/prəˈməʊ.ʃən/", pos: "noun", vietnamese: "thăng chức", example: "She got a promotion after two years.", level: "B1" },
      { word: "appraisal", phonetic: "/əˈpreɪ.zəl/", pos: "noun", vietnamese: "đánh giá hiệu suất", example: "The annual appraisal is next month.", level: "B2" },
      { word: "strength", phonetic: "/streŋθ/", pos: "noun", vietnamese: "điểm mạnh", example: "Teamwork is her strength.", level: "B2" },
      { word: "weakness", phonetic: "/ˈwiːk.nəs/", pos: "noun", vietnamese: "điểm yếu", example: "Time management is his weakness.", level: "B2" }
    ],
    "Materials & Products": [
      { word: "material", phonetic: "/məˈtɪə.ri.əl/", pos: "noun", vietnamese: "nguyên liệu", example: "High-quality materials are used.", level: "B1" },
      { word: "fabric", phonetic: "/ˈfæb.rɪk/", pos: "noun", vietnamese: "vải", example: "The fabric is soft and durable.", level: "B2" },
      { word: "packaging", phonetic: "/ˈpæk.ɪ.dʒɪŋ/", pos: "noun", vietnamese: "bao bì", example: "Eco-friendly packaging is important.", level: "B2" },
      { word: "inventory", phonetic: "/ˈɪn.vən.tər.i/", pos: "noun", vietnamese: "hàng tồn kho", example: "Check inventory before ordering.", level: "B2" },
      { word: "launch", phonetic: "/lɔːntʃ/", pos: "noun", vietnamese: "ra mắt sản phẩm", example: "The product launch was successful.", level: "B2" }
    ],
    "Work Environment": [
      { word: "colleague", phonetic: "/ˈkɒl.iːɡ/", pos: "noun", vietnamese: "đồng nghiệp", example: "I work with great colleagues.", level: "B1" },
      { word: "safety", phonetic: "/ˈseɪf.ti/", pos: "noun", vietnamese: "an toàn", example: "Workplace safety is prioritized.", level: "B1" },
      { word: "environment", phonetic: "/ɪnˈvaɪ.rən.mənt/", pos: "noun", vietnamese: "môi trường làm việc", example: "A positive work environment boosts morale.", level: "B2" },
      { word: "flexible", phonetic: "/ˈflek.sə.bəl/", pos: "adj", vietnamese: "linh hoạt", example: "We offer flexible working hours.", level: "B1" },
      { word: "remote", phonetic: "/rɪˈməʊt/", pos: "adj", vietnamese: "từ xa", example: "Many employees work remote now.", level: "B1" },
      { word: "break", phonetic: "/breɪk/", pos: "noun", vietnamese: "nghỉ giải lao", example: "Take a 15-minute break.", level: "B1" },
      { word: "overtime", phonetic: "/ˈəʊ.və.taɪm/", pos: "noun", vietnamese: "làm thêm giờ", example: "I worked overtime last week.", level: "B2" },
      { word: "culture", phonetic: "/ˈkʌl.tʃər/", pos: "noun", vietnamese: "văn hóa công ty", example: "Company culture values innovation.", level: "B2" }
    ],
    "Projects & Planning": [
      { word: "project", phonetic: "/ˈprɒdʒ.ekt/", pos: "noun", vietnamese: "dự án", example: "The project deadline is approaching.", level: "B1" },
      { word: "planning", phonetic: "/ˈplæn.ɪŋ/", pos: "noun", vietnamese: "lập kế hoạch", example: "Careful planning ensures success.", level: "B2" },
      { word: "budget", phonetic: "/ˈbʌdʒ.ɪt/", pos: "noun", vietnamese: "ngân sách", example: "Stay within the budget.", level: "B2" },
      { word: "timeline", phonetic: "/ˈtaɪm.laɪn/", pos: "noun", vietnamese: "lịch trình", example: "The timeline shows all milestones.", level: "B2" },
      { word: "resource", phonetic: "/rɪˈzɔːs/", pos: "noun", vietnamese: "nguồn lực", example: "We need more human resources.", level: "B2" },
      { word: "milestone", phonetic: "/ˈmaɪl.stəʊn/", pos: "noun", vietnamese: "mốc quan trọng", example: "We reached a key milestone.", level: "B2" }
    ]
  },
  "COMMUNICATION": {
    "Product Launch & Marketing": [
      { word: "promotion", phonetic: "/prəˈməʊ.ʃən/", pos: "noun", vietnamese: "khuyến mãi", example: "The promotion attracted many customers.", level: "B1" },
      { word: "brand", phonetic: "/brænd/", pos: "noun", vietnamese: "thương hiệu", example: "Build a strong brand identity.", level: "B2" },
      { word: "launch", phonetic: "/lɔːntʃ/", pos: "verb", vietnamese: "ra mắt", example: "The company will launch the product next month.", level: "B2" },
      { word: "marketing", phonetic: "/ˈmɑː.kɪ.tɪŋ/", pos: "noun", vietnamese: "tiếp thị", example: "Effective marketing increases sales.", level: "B2" },
      { word: "campaign", phonetic: "/kæmˈpeɪn/", pos: "noun", vietnamese: "chiến dịch", example: "The ad campaign went viral.", level: "B2" },
      { word: "target audience", phonetic: "/ˈtɑː.ɡɪt ˈɔː.di.əns/", pos: "noun", vietnamese: "đối tượng mục tiêu", example: "Our target audience is young professionals.", level: "B2" }
    ],
    "Team Collaboration": [
      { word: "teamwork", phonetic: "/ˈtiːm.wɜːk/", pos: "noun", vietnamese: "làm việc nhóm", example: "Good teamwork is essential.", level: "B1" },
      { word: "coordinate", phonetic: "/kəʊˈɔː.dɪ.neɪt/", pos: "verb", vietnamese: "phối hợp", example: "We need to coordinate our efforts.", level: "B2" },
      { word: "collaboration", phonetic: "/kəˌlæb.əˈreɪ.ʃən/", pos: "noun", vietnamese: "hợp tác", example: "Collaboration improves results.", level: "B2" },
      { word: "brainstorm", phonetic: "/ˈbreɪn.stɔːm/", pos: "verb", vietnamese: "động não", example: "Let’s brainstorm new ideas.", level: "B2" }
    ],
    "Design & Materials": [
      { word: "design", phonetic: "/dɪˈzaɪn/", pos: "noun", vietnamese: "thiết kế", example: "The product design is innovative.", level: "B1" },
      { word: "material", phonetic: "/məˈtɪə.ri.əl/", pos: "noun", vietnamese: "chất liệu", example: "Choose sustainable materials.", level: "B1" },
      { word: "prototype", phonetic: "/ˈprəʊ.tə.taɪp/", pos: "noun", vietnamese: "mẫu thử", example: "Test the prototype before production.", level: "B2" }
    ],
    "Feedback & Adjustments": [
      { word: "improve", phonetic: "/ɪmˈpruːv/", pos: "verb", vietnamese: "cải thiện", example: "We can improve the process.", level: "B1" },
      { word: "feedback", phonetic: "/ˈfiːd.bæk/", pos: "noun", vietnamese: "phản hồi", example: "Provide constructive feedback.", level: "B2" },
      { word: "adjustment", phonetic: "/əˈdʒʌst.mənt/", pos: "noun", vietnamese: "điều chỉnh", example: "Make necessary adjustments.", level: "B2" },
      { word: "revision", phonetic: "/rɪˈvɪʒ.ən/", pos: "noun", vietnamese: "sửa đổi", example: "Submit the revision by Monday.", level: "B2" }
    ],
    "Events & Presentations": [
      { word: "event", phonetic: "/ɪˈvent/", pos: "noun", vietnamese: "sự kiện", example: "Organize a corporate event.", level: "B1" },
      { word: "presentation", phonetic: "/ˌprez.ənˈteɪ.ʃən/", pos: "noun", vietnamese: "bài thuyết trình", example: "Prepare a slide presentation.", level: "B2" },
      { word: "conference", phonetic: "/ˈkɒn.fər.əns/", pos: "noun", vietnamese: "hội nghị", example: "Attend the annual conference.", level: "B2" },
      { word: "workshop", phonetic: "/ˈwɜːk.ʃɒp/", pos: "noun", vietnamese: "xưởng làm việc", example: "Join the training workshop.", level: "B2" },
      { word: "agenda", phonetic: "/əˈdʒen.də/", pos: "noun", vietnamese: "chương trình nghị sự", example: "Check the meeting agenda.", level: "B2" }
    ]
  },
  "AUDIO & VOICE SERVICES": {
    "Voice Recording": [
      { word: "recording", phonetic: "/rɪˈkɔː.dɪŋ/", pos: "noun", vietnamese: "bản ghi âm", example: "The voice recording was clear.", level: "B1" },
      { word: "studio", phonetic: "/ˈstjuː.di.əʊ/", pos: "noun", vietnamese: "phòng thu", example: "Record in a professional studio.", level: "B1" },
      { word: "microphone", phonetic: "/ˈmaɪ.krə.fəʊn/", pos: "noun", vietnamese: "micrô", example: "Use a high-quality microphone.", level: "B2" },
      { word: "session", phonetic: "/ˈseʃ.ən/", pos: "noun", vietnamese: "buổi ghi âm", example: "The recording session lasted two hours.", level: "B2" },
      { word: "voiceover", phonetic: "/ˈvɔɪs.əʊ.vər/", pos: "noun", vietnamese: "lồng tiếng", example: "She does voiceover for commercials.", level: "B2" }
    ],
    "Service Features": [
      { word: "feature", phonetic: "/ˈfiː.tʃər/", pos: "noun", vietnamese: "tính năng", example: "The service has advanced features.", level: "B1" },
      { word: "quality", phonetic: "/ˈkwɒl.ə.ti/", pos: "noun", vietnamese: "chất lượng", example: "High audio quality is guaranteed.", level: "B1" },
      { word: "editing", phonetic: "/ˈed.ɪ.tɪŋ/", pos: "noun", vietnamese: "chỉnh sửa", example: "Audio editing improves quality.", level: "B2" },
      { word: "format", phonetic: "/ˈfɔː.mæt/", pos: "noun", vietnamese: "định dạng", example: "Export in MP3 format.", level: "B2" }
    ],
    "Audio Production": [
      { word: "track", phonetic: "/træk/", pos: "noun", vietnamese: "bản nhạc", example: "Edit the audio track.", level: "B1" },
      { word: "production", phonetic: "/prəˈdʌk.ʃən/", pos: "noun", vietnamese: "sản xuất âm thanh", example: "Audio production requires skill.", level: "B2" },
      { word: "effect", phonetic: "/ɪˈfekt/", pos: "noun", vietnamese: "hiệu ứng", example: "Add sound effects.", level: "B2" },
      { word: "mix", phonetic: "/mɪks/", pos: "verb", vietnamese: "pha trộn", example: "Mix the vocals with the music.", level: "B2" }
    ],
    "Client Communication": [
      { word: "update", phonetic: "/ʌpˈdeɪt/", pos: "noun", vietnamese: "cập nhật", example: "Send progress updates.", level: "B1" },
      { word: "client", phonetic: "/ˈklaɪ.ənt/", pos: "noun", vietnamese: "khách hàng", example: "Communicate with the client regularly.", level: "B2" },
      { word: "contract", phonetic: "/ˈkɒn.trækt/", pos: "noun", vietnamese: "hợp đồng", example: "Sign the service contract.", level: "B2" },
      { word: "deadline", phonetic: "/ˈded.laɪn/", pos: "noun", vietnamese: "hạn chót", example: "Meet the project deadline.", level: "B2" }
    ]
  },
  "TEXT MESSAGING": {
    "Informal Communication": [
      { word: "abbreviation", phonetic: "/əˌbriː.viˈeɪ.ʃən/", pos: "noun", vietnamese: "viết tắt", example: "LOL is a common abbreviation.", level: "B1" },
      { word: "casual", phonetic: "/ˈkæʒ.u.əl/", pos: "adj", vietnamese: "thân mật", example: "Keep the tone casual in texts.", level: "B1" },
      { word: "slang", phonetic: "/slæŋ/", pos: "noun", vietnamese: "tiếng lóng", example: "Text messaging often uses slang.", level: "B2" },
      { word: "emoji", phonetic: "/ɪˈməʊ.dʒi/", pos: "noun", vietnamese: "biểu tượng cảm xúc", example: "Use an emoji to show emotion.", level: "B1" },
      { word: "sticker", phonetic: "/ˈstɪk.ər/", pos: "noun", vietnamese: "nhãn dán", example: "Send a funny sticker.", level: "B2" }
    ],
    "Expressing Agreement": [
      { word: "absolutely", phonetic: "/ˌæb.səˈluːt.li/", pos: "adv", vietnamese: "hoàn toàn", example: "Absolutely, I support that.", level: "B1" },
      { word: "indeed", phonetic: "/ɪnˈdiːd/", pos: "adv", vietnamese: "thật vậy", example: "Indeed, you're right.", level: "B2" },
      { word: "definitely", phonetic: "/ˈdef.ɪ.nət.li/", pos: "adv", vietnamese: "chắc chắn", example: "Definitely, let's meet.", level: "B1" },
      { word: "totally", phonetic: "/ˈtəʊ.təl.i/", pos: "adv", vietnamese: "hoàn toàn", example: "I totally agree with you.", level: "B1" }
    ]
  }
};
</file>

<file path="src/data/vocabulary/vocabularyDataLevel3.js">
// src/data/vocabularyDataLevel3.js
// Vocabulary data for CEFR levels C1 - C2 (Advanced & Proficient)
// Expanded with 300+ high-frequency academic, business, professional, and nuanced vocabulary items
// Organized by main topics and sub-topics
// Each entry: { word, phonetic (IPA), pos (part of speech), vietnamese, example, level }

export const vocabularyDataLevel3 = {
  "TRAVEL & TOURISM": {
    "Travel Activities": [
      { word: "itinerary", phonetic: "/aɪˈtɪn.ər.ər.i/", pos: "noun", vietnamese: "lịch trình du lịch", example: "The bespoke itinerary included private tours of hidden gems.", level: "C1" },
      { word: "expedition", phonetic: "/ˌek.spəˈdɪʃ.ən/", pos: "noun", vietnamese: "cuộc thám hiểm", example: "The polar expedition required months of preparation and funding.", level: "C1" },
      { word: "pilgrimage", phonetic: "/ˈpɪl.ɡrɪ.mɪdʒ/", pos: "noun", vietnamese: "cuộc hành hương", example: "The Camino de Santiago attracts thousands on spiritual pilgrimage.", level: "C1" },
      { word: "sojourn", phonetic: "/ˈsɒdʒ.ɜːn/", pos: "noun", vietnamese: "kỳ lưu trú ngắn", example: "His sojourn in Kyoto profoundly influenced his aesthetic philosophy.", level: "C2" },
      { word: "peripatetic", phonetic: "/ˌper.ɪ.pəˈtet.ɪk/", pos: "adj", vietnamese: "di chuyển liên tục", example: "Her peripatetic career spanned five continents in a decade.", level: "C2" },
      { word: "odyssey", phonetic: "/ˈɒd.ɪ.si/", pos: "noun", vietnamese: "hành trình dài đầy thử thách", example: "The refugee’s odyssey across three countries lasted two years.", level: "C2" },
      { word: "immersion", phonetic: "/ɪˈmɜː.ʃən/", pos: "noun", vietnamese: "sự hòa nhập", example: "Cultural immersion is the most effective way to learn a language.", level: "C1" },
      { word: "ecotourism", phonetic: "/ˈiː.kəʊˌtʊə.rɪ.zəm/", pos: "noun", vietnamese: "du lịch sinh thái", example: "Ecotourism promotes conservation while supporting local economies.", level: "C1" },
      { word: "heritage", phonetic: "/ˈher.ɪ.tɪdʒ/", pos: "noun", vietnamese: "di sản", example: "UNESCO protects world heritage sites of outstanding value.", level: "C1" },
      { word: "ethnographic", phonetic: "/ˌeθ.nəˈɡræf.ɪk/", pos: "adj", vietnamese: "nhân học dân tộc", example: "The ethnographic study documented indigenous tribal rituals.", level: "C2" },
      { word: "cosmopolitan", phonetic: "/ˌkɒz.məˈpɒl.ɪ.tən/", pos: "adj", vietnamese: "quốc tế hóa", example: "Singapore is a truly cosmopolitan city with diverse cultures.", level: "C1" },
      { word: "paradisiacal", phonetic: "/ˌpær.ə.dɪˈsaɪ.ə.kəl/", pos: "adj", vietnamese: "thiên đường", example: "The island’s paradisiacal beaches attract luxury travelers.", level: "C2" }
    ],
    "Transportation": [
      { word: "charter", phonetic: "/ˈtʃɑː.tər/", pos: "verb", vietnamese: "thuê bao", example: "The firm chartered a yacht for the corporate retreat.", level: "C1" },
      { word: "transit", phonetic: "/ˈtræn.zɪt/", pos: "noun", vietnamese: "quá cảnh", example: "Visa-free transit is allowed for up to 72 hours.", level: "C1" },
      { word: "layover", phonetic: "/ˈleɪ.əʊ.vər/", pos: "noun", vietnamese: "thời gian dừng chân", example: "The 12-hour layover allowed a city tour.", level: "C1" },
      { word: "logistics", phonetic: "/ləˈdʒɪs.tɪks/", pos: "noun", vietnamese: "hậu cần", example: "Global logistics ensure timely delivery of perishable goods.", level: "C1" },
      { word: "infrastructure", phonetic: "/ˈɪn.frəˌstrʌk.tʃər/", pos: "noun", vietnamese: "cơ sở hạ tầng", example: "The country invested heavily in transport infrastructure.", level: "C1" },
      { word: "congestion", phonetic: "/kənˈdʒes.tʃən/", pos: "noun", vietnamese: "tắc nghẽn", example: "Urban congestion reduces productivity and air quality.", level: "C1" },
      { word: "intermodal", phonetic: "/ˌɪn.təˈməʊ.dəl/", pos: "adj", vietnamese: "đa phương thức", example: "Intermodal transport combines rail, road, and sea.", level: "C2" },
      { word: "hub", phonetic: "/hʌb/", pos: "noun", vietnamese: "trung tâm", example: "Dubai is a major aviation hub for the Middle East.", level: "C1" },
      { word: "freight", phonetic: "/freɪt/", pos: "noun", vietnamese: "hàng hóa vận chuyển", example: "Air freight is faster but more expensive than sea.", level: "C1" },
      { word: "carriage", phonetic: "/ˈkær.ɪdʒ/", pos: "noun", vietnamese: "phí vận chuyển", example: "Carriage is included in the quoted price.", level: "C2" },
      { word: "commuter belt", phonetic: "/kəˈmjuː.tər belt/", pos: "noun", vietnamese: "vùng ngoại ô đi làm", example: "Housing prices rise in the commuter belt.", level: "C2" },
      { word: "maglev", phonetic: "/ˈmæɡ.lev/", pos: "noun", vietnamese: "tàu từ trường", example: "Japan’s maglev train reaches 600 km/h.", level: "C2" }
    ],
    "Accommodation & Shopping": [
      { word: "concierge", phonetic: "/ˈkɒn.si.eəʒ/", pos: "noun", vietnamese: "nhân viên lễ tân cao cấp", example: "The concierge secured last-minute opera tickets.", level: "C1" },
      { word: "boutique", phonetic: "/buːˈtiːk/", pos: "noun", vietnamese: "cửa hàng thời trang cao cấp", example: "The boutique hotel offers personalized service.", level: "C1" },
      { word: "upscale", phonetic: "/ˌʌpˈskeɪl/", pos: "adj", vietnamese: "cao cấp", example: "The upscale mall features luxury brands.", level: "C1" },
      { word: "patronage", phonetic: "/ˈpæt.rə.nɪdʒ/", pos: "noun", vietnamese: "sự ủng hộ", example: "Royal patronage elevated the brand’s prestige.", level: "C2" },
      { word: "artisan", phonetic: "/ˈɑː.tɪ.zæn/", pos: "noun", vietnamese: "thợ thủ công", example: "Artisan markets showcase local craftsmanship.", level: "C1" },
      { word: "bespoke", phonetic: "/bɪˈspəʊk/", pos: "adj", vietnamese: "may theo yêu cầu", example: "He ordered a bespoke suit from Savile Row.", level: "C2" },
      { word: "curated", phonetic: "/kjʊˈreɪ.tɪd/", pos: "adj", vietnamese: "được chọn lọc", example: "The curated collection features emerging designers.", level: "C1" },
      { word: "provenance", phonetic: "/ˈprɒv.ə.nəns/", pos: "noun", vietnamese: "nguồn gốc", example: "The artwork’s provenance traces back to the Renaissance.", level: "C2" },
      { word: "haute couture", phonetic: "/ˌəʊt kuːˈtjʊər/", pos: "noun", vietnamese: "thời trang cao cấp", example: "Paris Fashion Week showcases haute couture.", level: "C2" },
      { word: "vintage", phonetic: "/ˈvɪn.tɪdʒ/", pos: "adj", vietnamese: "cổ điển", example: "She collects vintage handbags from the 1950s.", level: "C1" },
      { word: "consignment", phonetic: "/kənˈsaɪn.mənt/", pos: "noun", vietnamese: "hàng ký gửi", example: "The store sells luxury items on consignment.", level: "C2" }
    ],
    "Travel Problems": [
      { word: "contingency", phonetic: "/kənˈtɪn.dʒən.si/", pos: "noun", vietnamese: "kế hoạch dự phòng", example: "A contingency fund covers unexpected travel disruptions.", level: "C1" },
      { word: "repatriation", phonetic: "/riːˌpeɪ.triˈeɪ.ʃən/", pos: "noun", vietnamese: "hồi hương", example: "The government organized repatriation flights during the crisis.", level: "C2" },
      { word: "quarantine", phonetic: "/ˈkwɒr.ən.tiːn/", pos: "noun", vietnamese: "cách ly", example: "Mandatory quarantine applies to all inbound travelers.", level: "C1" },
      { word: "visa waiver", phonetic: "/ˈviː.zə ˈweɪ.vər/", pos: "noun", vietnamese: "miễn visa", example: "The visa waiver program facilitates short business trips.", level: "C1" },
      { word: "overbooking", phonetic: "/ˌəʊ.vəˈbʊk.ɪŋ/", pos: "noun", vietnamese: "đặt quá số lượng", example: "Overbooking is a common practice in budget airlines.", level: "C2" },
      { word: "force majeure", phonetic: "/ˌfɔːs mæˈʒɜːr/", pos: "noun", vietnamese: "bất khả kháng", example: "The contract includes a force majeure clause.", level: "C2" },
      { word: "itinerant", phonetic: "/aɪˈtɪn.ər.ənt/", pos: "adj", vietnamese: "lưu động", example: "Itinerant workers face visa complications.", level: "C2" },
      { word: "geopolitical", phonetic: "/ˌdʒiː.əʊ.pəˈlɪt.ɪ.kəl/", pos: "adj", vietnamese: "chính trị địa lý", example: "Geopolitical tensions affect travel advisories.", level: "C1" },
      { word: "sanction", phonetic: "/ˈsæŋk.ʃən/", pos: "noun", vietnamese: "cấm vận", example: "Economic sanctions restrict travel to certain nations.", level: "C1" },
      { word: "embargo", phonetic: "/ɪmˈbɑː.ɡəʊ/", pos: "noun", vietnamese: "cấm vận", example: "The trade embargo disrupted supply chains.", level: "C2" }
    ]
  },
  "FOOD & RESTAURANTS": {
    "Ordering Food": [
      { word: "sommelier", phonetic: "/ˈsɒm.əl.ieɪ/", pos: "noun", vietnamese: "chuyên gia rượu vang", example: "The sommelier curated a wine flight for the tasting menu.", level: "C1" },
      { word: "degustation", phonetic: "/ˌdeɪ.ɡʊˈsteɪ.ʃən/", pos: "noun", vietnamese: "bữa ăn nếm thử", example: "The 12-course degustation lasted four hours.", level: "C2" },
      { word: "gastronomy", phonetic: "/ɡæsˈtrɒn.ə.mi/", pos: "noun", vietnamese: "nghệ thuật ẩm thực", example: "Molecular gastronomy redefines culinary boundaries.", level: "C2" },
      { word: "palate", phonetic: "/ˈpæl.ət/", pos: "noun", vietnamese: "vị giác", example: "The sorbet serves to cleanse the palate between courses.", level: "C1" },
      { word: "terroir", phonetic: "/ˈter.wɑːr/", pos: "noun", vietnamese: "đặc trưng vùng đất", example: "The wine’s terroir reflects volcanic soil and maritime climate.", level: "C2" },
      { word: "umami", phonetic: "/uːˈmɑː.mi/", pos: "noun", vietnamese: "vị umami", example: "Miso and aged cheese are rich in umami.", level: "C1" },
      { word: "mouthfeel", phonetic: "/ˈmaʊθ.fiːl/", pos: "noun", vietnamese: "cảm giác trong miệng", example: "The dessert has a silky mouthfeel.", level: "C2" },
      { word: "pairing", phonetic: "/ˈpeə.rɪŋ/", pos: "noun", vietnamese: "kết hợp món", example: "The chef suggests a bold red for spice pairing.", level: "C1" }
    ],
    "Restaurant Features": [
      { word: "ambience", phonetic: "/ˈæm.bi.əns/", pos: "noun", vietnamese: "không gian", example: "The candlelit ambience enhances the dining experience.", level: "C1" },
      { word: "Michelin", phonetic: "/ˈmɪʃ.əl.ɪn/", pos: "adj", vietnamese: "sao Michelin", example: "Only 137 restaurants worldwide hold three Michelin stars.", level: "C1" },
      { word: "fusion", phonetic: "/ˈfjuː.ʒən/", pos: "noun", vietnamese: "kết hợp ẩm thực", example: "The menu features Franco-Japanese fusion cuisine.", level: "C1" },
      { word: "patisserie", phonetic: "/pəˈtiː.sər.i/", pos: "noun", vietnamese: "tiệm bánh ngọt", example: "The patisserie is renowned for its croissants.", level: "C1" },
       { word: "tasting menu", phonetic: "/ˈteɪ.stɪŋ ˌmen.juː/", pos: "noun", vietnamese: "thực đơn nếm thử", example: "The tasting menu changes weekly based on seasonal produce.", level: "C1" },
      { word: "farm-to-table", phonetic: "/ˌfɑːm tə ˈteɪ.bəl/", pos: "adj", vietnamese: "từ nông trại đến bàn ăn", example: "The restaurant follows a strict farm-to-table philosophy.", level: "C1" },
      { word: "nose-to-tail", phonetic: "/ˌnəʊz tə ˈteɪl/", pos: "adj", vietnamese: "toàn bộ con vật", example: "The chef practices nose-to-tail cooking to reduce waste.", level: "C2" },
      { word: "sous-vide", phonetic: "/ˌsuː ˈviːd/", pos: "noun", vietnamese: "nấu chân không", example: "Sous-vide ensures precise temperature control.", level: "C2" },
      { word: "molecular gastronomy", phonetic: "/məˌlek.jə.lər ɡæsˈtrɒn.ə.mi/", pos: "noun", vietnamese: "ẩm thực phân tử", example: "Ferran Adrià pioneered molecular gastronomy.", level: "C2" }
    ],
    "Job & Career (Food Industry)": [
      { word: "caterer", phonetic: "/ˈkeɪ.tər.ər/", pos: "noun", vietnamese: "người cung cấp dịch vụ ăn uống", example: "The caterer managed a 500-guest gala seamlessly.", level: "C1" },
      { word: "executive chef", phonetic: "/ɪɡˈzek.jə.tɪv ʃef/", pos: "noun", vietnamese: "đầu bếp trưởng", example: "The executive chef oversees multiple restaurant outlets.", level: "C1" },
      { word: "maître d'", phonetic: "/ˌmeɪ.trə ˈdiː/", pos: "noun", vietnamese: "quản lý nhà hàng", example: "The maître d’ ensures flawless front-of-house operations.", level: "C2" },
      { word: "culinary", phonetic: "/ˈkʌl.ɪ.nər.i/", pos: "adj", vietnamese: "thuộc ẩm thực", example: "She graduated from a prestigious culinary academy.", level: "C1" },
      { word: "hospitality", phonetic: "/ˌhɒs.pɪˈtæl.ə.ti/", pos: "noun", vietnamese: "ngành dịch vụ khách sạn", example: "Hospitality management requires both art and science.", level: "C1" },
      { word: "sommelier", phonetic: "/ˈsɒm.əl.ieɪ/", pos: "noun", vietnamese: "chuyên gia rượu", example: "The head sommelier holds a Master Sommelier diploma.", level: "C1" },
      { word: "pastry chef", phonetic: "/ˈpeɪ.stri ʃef/", pos: "noun", vietnamese: "đầu bếp bánh ngọt", example: "The pastry chef creates intricate sugar sculptures.", level: "C1" },
      { word: "brigade", phonetic: "/brɪˈɡeɪd/", pos: "noun", vietnamese: "đội bếp", example: "The kitchen brigade system ensures efficiency.", level: "C2" },
      { word: "mise en place", phonetic: "/ˌmiːz ɒ̃ ˈplæs/", pos: "noun", vietnamese: "chuẩn bị nguyên liệu", example: "Mise en place is completed before service begins.", level: "C2" },
      { word: "foraging", phonetic: "/ˈfɒr.ɪ.dʒɪŋ/", pos: "noun", vietnamese: "tìm kiếm nguyên liệu tự nhiên", example: "The chef incorporates foraged wild herbs.", level: "C2" }
    ]
  },
  "EDUCATION": {
    "Academic Terms": [
      { word: "thesis", phonetic: "/ˈθiː.sɪs/", pos: "noun", vietnamese: "luận văn", example: "The doctoral thesis was published by Oxford University Press.", level: "C1" },
      { word: "prerequisite", phonetic: "/ˌpriːˈrek.wɪ.zɪt/", pos: "noun", vietnamese: "tiền đề", example: "Linear algebra is a prerequisite for machine learning.", level: "C1" },
      { word: "pedagogy", phonetic: "/ˈped.ə.ɡɒdʒ.i/", pos: "noun", vietnamese: "phương pháp giảng dạy", example: "Constructivist pedagogy emphasizes student-centered learning.", level: "C2" },
      { word: "curriculum vitae", phonetic: "/kəˌrɪk.jə.ləm ˈviː.taɪ/", pos: "noun", vietnamese: "sơ yếu lý lịch", example: "Submit your curriculum vitae in PDF format.", level: "C1" },
      { word: "dissertation", phonetic: "/ˌdɪs.əˈteɪ.ʃən/", pos: "noun", vietnamese: "luận án tiến sĩ", example: "The dissertation defense is scheduled for next month.", level: "C1" },
      { word: "tenure", phonetic: "/ˈten.jər/", pos: "noun", vietnamese: "chế độ làm việc lâu dài", example: "Tenure-track positions are highly competitive.", level: "C1" },
      { word: "syllabus", phonetic: "/ˈsɪl.ə.bəs/", pos: "noun", vietnamese: "đề cương môn học", example: "The syllabus includes primary and secondary readings.", level: "C1" },
      { word: "plagiarism", phonetic: "/ˈpleɪ.dʒər.ɪ.zəm/", pos: "noun", vietnamese: "đạo văn", example: "Turnitin detects plagiarism with 98% accuracy.", level: "C1" },
      { word: "citation", phonetic: "/saɪˈteɪ.ʃən/", pos: "noun", vietnamese: "trích dẫn", example: "Use Harvard style for in-text citations.", level: "C1" },
       { word: "endowment", phonetic: "/ɪnˈdaʊ.mənt/", pos: "noun", vietnamese: "quỹ tài trợ", example: "The university’s endowment exceeds $40 billion.", level: "C2" },
      { word: "emeritus", phonetic: "/ɪˈmer.ɪ.təs/", pos: "adj", vietnamese: "nghỉ hưu danh dự", example: "Professor Smith is now emeritus after 40 years.", level: "C2" }
    ],
    "Study Requirements": [
      { word: "rigor", phonetic: "/ˈrɪɡ.ər/", pos: "noun", vietnamese: "sự nghiêm ngặt", example: "The course is known for its academic rigor.", level: "C1" },
      { word: "practicum", phonetic: "/ˈpræk.tɪ.kəm/", pos: "noun", vietnamese: "thực tập", example: "The teaching practicum lasts one semester.", level: "C1" },
      { word: "comprehensive exam", phonetic: "/ˌkɒm.prɪˈhen.sɪv ɪɡˈzæm/", pos: "noun", vietnamese: "kỳ thi tổng hợp", example: "PhD candidates must pass comprehensive exams.", level: "C1" },
      { word: "peer review", phonetic: "/ˌpɪə rɪˈvjuː/", pos: "noun", vietnamese: "đánh giá đồng nghiệp", example: "All submissions undergo blind peer review.", level: "C1" },
      { word: "grant", phonetic: "/ɡrɑːnt/", pos: "noun", vietnamese: "khoản tài trợ", example: "She received a research grant from the NSF.", level: "C1" },
      { word: "fellowship", phonetic: "/ˈfel.əʊ.ʃɪp/", pos: "noun", vietnamese: "học bổng nghiên cứu", example: "The Rhodes fellowship funds study at Oxford.", level: "C1" },
      { word: "sabbatical", phonetic: "/səˈbæt.ɪ.kəl/", pos: "noun", vietnamese: "nghỉ phép nghiên cứu", example: "Professors take sabbatical every seven years.", level: "C2" },
      { word: "interdisciplinary", phonetic: "/ˌɪn.təˈdɪs.ɪ.plɪ.nər.i/", pos: "adj", vietnamese: "liên ngành", example: "The program offers interdisciplinary studies in AI and ethics.", level: "C1" }
    ],
    "Performance & Learning": [
      { word: "cognition", phonetic: "/kɒɡˈnɪʃ.ən/", pos: "noun", vietnamese: "nhận thức", example: "The study explores cognition in aging populations.", level: "C2" },
      { word: "metacognition", phonetic: "/ˌmet.ə.kɒɡˈnɪʃ.ən/", pos: "noun", vietnamese: "siêu nhận thức", example: "Metacognition enhances self-regulated learning.", level: "C2" },
      { word: "proficiency", phonetic: "/prəˈfɪʃ.ən.si/", pos: "noun", vietnamese: "sự thành thạo", example: "C2 proficiency is required for translation work.", level: "C1" },
      { word: "retention", phonetic: "/rɪˈten.ʃən/", pos: "noun", vietnamese: "sự ghi nhớ", example: "Spaced repetition maximizes long-term retention.", level: "C1" },
      { word: "heuristic", phonetic: "/hjʊˈrɪs.tɪk/", pos: "noun", vietnamese: "phương pháp thử và sai", example: "Heuristics help solve ill-defined problems.", level: "C2" },
      { word: "schema", phonetic: "/ˈskiː.mə/", pos: "noun", vietnamese: "lược đồ", example: "Prior knowledge activates relevant schemas.", level: "C2" },
      { word: "transfer", phonetic: "/ˈtræns.fɜːr/", pos: "noun", vietnamese: "chuyển giao kiến thức", example: "Positive transfer occurs when skills overlap.", level: "C2" },
      { word: "scaffolding", phonetic: "/ˈskæf.əl.dɪŋ/", pos: "noun", vietnamese: "hỗ trợ học tập", example: "Teachers provide scaffolding for complex tasks.", level: "C2" }
    ]
  },
  "SHOPPING & CUSTOMER SERVICE": {
    "Returns & Refunds": [
      { word: "replacement", phonetic: "/rɪˈpleɪs.mənt/", pos: "noun", vietnamese: "sản phẩm thay thế", example: "A replacement was dispatched via express courier.", level: "C1" },
      { word: "reimbursement", phonetic: "/ˌriː.ɪmˈbɜːs.mənt/", pos: "noun", vietnamese: "hoàn trả tiền", example: "Expense reimbursement requires original receipts.", level: "C1" },
      { word: "warranty claim", phonetic: "/ˈwɒr.ən.ti kleɪm/", pos: "noun", vietnamese: "yêu cầu bảo hành", example: "File a warranty claim within 30 days of purchase.", level: "C1" },
      { word: "restocking fee", phonetic: "/ˌriːˈstɒk.ɪŋ fiː/", pos: "noun", vietnamese: "phí nhập lại kho", example: "A 20% restocking fee applies to opened software.", level: "C1" },
      { word: "pro rata", phonetic: "/ˌprəʊ ˈrɑː.tə/", pos: "adv", vietnamese: "tỷ lệ", example: "Refunds are calculated pro rata for partial use.", level: "C2" },
      { word: "indemnity", phonetic: "/ɪnˈdem.nə.ti/", pos: "noun", vietnamese: "bồi thường", example: "The policy provides indemnity against third-party claims.", level: "C2" },
      { word: "statutory", phonetic: "/ˈstætʃ.ə.tər.i/", pos: "adj", vietnamese: "theo luật định", example: "Consumers have statutory rights to refunds.", level: "C2" }
    ],
    "Problems & Solutions": [
      { word: "escalation", phonetic: "/ˌes.kəˈleɪ.ʃən/", pos: "noun", vietnamese: "leo thang", example: "Escalation protocols ensure swift resolution.", level: "C1" },
      { word: "mitigation", phonetic: "/ˌmɪt.ɪˈɡeɪ.ʃən/", pos: "noun", vietnamese: "giảm thiểu", example: "Risk mitigation includes backup suppliers.", level: "C1" },
      { word: "redress", phonetic: "/rɪˈdres/", pos: "noun", vietnamese: "sự khắc phục", example: "The ombudsman provides redress for consumer grievances.", level: "C2" },
      { word: "arbitration", phonetic: "/ˌɑː.bɪˈtreɪ.ʃən/", pos: "noun", vietnamese: "trọng tài", example: "Disputes are resolved through binding arbitration.", level: "C2" },
      { word: "litigation", phonetic: "/ˌlɪt.ɪˈɡeɪ.ʃən/", pos: "noun", vietnamese: "kiện tụng", example: "Class-action litigation can be costly and prolonged.", level: "C2" },
      { word: "restitution", phonetic: "/ˌres.tɪˈtjuː.ʃən/", pos: "noun", vietnamese: "bồi thường thiệt hại", example: "The court ordered full restitution to victims.", level: "C2" }
    ],
    "Service & Quality": [
      { word: "satisfaction", phonetic: "/ˌsæt.ɪsˈfæk.ʃən/", pos: "noun", vietnamese: "sự hài lòng", example: "Net Promoter Score measures customer satisfaction.", level: "C1" },
      { word: "benchmark", phonetic: "/ˈbentʃ.mɑːk/", pos: "noun", vietnamese: "tiêu chuẩn", example: "Industry benchmarks set performance expectations.", level: "C1" },
      { word: "excellence", phonetic: "/ˈek.səl.əns/", pos: "noun", vietnamese: "sự xuất sắc", example: "The brand pursues operational excellence relentlessly.", level: "C1" },
      { word: "compliance", phonetic: "/kəmˈplaɪ.əns/", pos: "noun", vietnamese: "tuân thủ", example: "GDPR compliance is mandatory for EU customers.", level: "C1" },
      { word: "certification", phonetic: "/ˌsɜː.tɪ.fɪˈkeɪ.ʃən/", pos: "noun", vietnamese: "chứng nhận", example: "ISO 9001 certification validates quality systems.", level: "C1" },
      { word: "traceability", phonetic: "/ˌtreɪ.səˈbɪl.ə.ti/", pos: "noun", vietnamese: "khả năng truy xuất", example: "Blockchain enhances supply chain traceability.", level: "C2" },
      { word: "provenance", phonetic: "/ˈprɒv.ə.nəns/", pos: "noun", vietnamese: "nguồn gốc", example: "Diamond provenance ensures ethical sourcing.", level: "C2" }
    ],
    "Customer Relations": [
      { word: "inquiry", phonetic: "/ɪnˈkwaɪə.ri/", pos: "noun", vietnamese: "thắc mắc", example: "All inquiries are tracked in the CRM system.", level: "C1" },
      { word: "relation", phonetic: "/rɪˈleɪ.ʃən/", pos: "noun", vietnamese: "mối quan hệ", example: "Long-term client relations drive recurring revenue.", level: "C1" },
      { word: "rapport", phonetic: "/ræˈpɔːr/", pos: "noun", vietnamese: "mối quan hệ tốt", example: "Sales reps build rapport through active listening.", level: "C1" },
       { word: "retention", phonetic: "/rɪˈten.ʃən/", pos: "noun", vietnamese: "giữ chân khách", example: "Churn analysis improves customer retention.", level: "C1" },
      { word: "churn", phonetic: "/tʃɜːn/", pos: "noun", vietnamese: "tỷ lệ rời bỏ", example: "High churn signals underlying dissatisfaction.", level: "C1" },
      { word: "stakeholder", phonetic: "/ˈsteɪkˌhəʊl.dər/", pos: "noun", vietnamese: "bên liên quan", example: "Engage stakeholders early in product design.", level: "C1" },
      { word: "ombudsman", phonetic: "/ˈɒm.bʊdz.mən/", pos: "noun", vietnamese: "người hòa giải", example: "The ombudsman resolves consumer disputes impartially.", level: "C2" }
    ]
  },
  "BUSINESS & WORKPLACE": {
    "Company Operations": [
      { word: "revenue", phonetic: "/ˈrev.ən.juː/", pos: "noun", vietnamese: "doanh thu", example: "Recurring revenue ensures financial stability.", level: "C1" },
      { word: "efficiency", phonetic: "/ɪˈfɪʃ.ən.si/", pos: "noun", vietnamese: "hiệu quả", example: "Lean methodologies enhance operational efficiency.", level: "C1" },
      { word: "inventory", phonetic: "/ˈɪn.vən.tər.i/", pos: "noun", vietnamese: "hàng tồn kho", example: "ABC analysis optimizes inventory management.", level: "C1" },
      { word: "prototype", phonetic: "/ˈprəʊ.tə.taɪp/", pos: "noun", vietnamese: "mẫu thử", example: "Rapid prototyping accelerates innovation cycles.", level: "C1" },
      { word: "synergy", phonetic: "/ˈsɪn.ə.dʒi/", pos: "noun", vietnamese: "hiệu ứng cộng hưởng", example: "The merger unlocked significant synergies.", level: "C1" },
      { word: "leverage", phonetic: "/ˈliː.vər.ɪdʒ/", pos: "verb", vietnamese: "tận dụng", example: "Leverage data to personalize customer experiences.", level: "C1" },
      { word: "scalability", phonetic: "/ˌskeɪ.ləˈbɪl.ə.ti/", pos: "noun", vietnamese: "khả năng mở rộng", example: "Cloud-native architecture ensures scalability.", level: "C1" },
      { word: "disruption", phonetic: "/dɪsˈrʌp.ʃən/", pos: "noun", vietnamese: "sự gián đoạn", example: "Digital disruption reshapes entire industries.", level: "C1" },
      { word: "paradigm", phonetic: "/ˈpær.ə.daɪm/", pos: "noun", vietnamese: "mô hình", example: "The platform economy represents a new paradigm.", level: "C2" },
     ],
    "Performance & Reviews": [
      { word: "appraisal", phonetic: "/əˈpreɪ.zəl/", pos: "noun", vietnamese: "đánh giá hiệu suất", example: "360-degree appraisal includes peer feedback.", level: "C1" },
      { word: "KPI", phonetic: "/ˌkeɪ piː ˈaɪ/", pos: "noun", vietnamese: "chỉ số hiệu suất chính", example: "Revenue per employee is a key KPI.", level: "C1" },
      { word: "benchmarking", phonetic: "/ˈbentʃ.mɑː.kɪŋ/", pos: "noun", vietnamese: "so sánh chuẩn", example: "Benchmarking identifies performance gaps.", level: "C1" },
      { word: "meritocracy", phonetic: "/ˌmer.ɪˈtɒk.rə.si/", pos: "noun", vietnamese: "chế độ tài năng", example: "The firm promotes a meritocracy culture.", level: "C2" },
      { word: "efficacy", phonetic: "/ˈef.ɪ.kə.si/", pos: "noun", vietnamese: "hiệu lực", example: "Randomized trials prove vaccine efficacy.", level: "C2" },
      { word: "OKR", phonetic: "/ˌəʊ keɪ ˈɑː/", pos: "noun", vietnamese: "mục tiêu và kết quả then chốt", example: "We align using OKRs at all levels.", level: "C2" }
    ],
    "Materials & Products": [
      { word: "specification", phonetic: "/ˌspes.ɪ.fɪˈkeɪ.ʃən/", pos: "noun", vietnamese: "thông số kỹ thuật", example: "The API meets industry specifications.", level: "C1" },
      { word: "patent", phonetic: "/ˈpæt.ənt/", pos: "noun", vietnamese: "bằng sáng chế", example: "The patent expires in 2030.", level: "C1" },
      { word: "iteration", phonetic: "/ˌɪt.əˈreɪ.ʃən/", pos: "noun", vietnamese: "phiên bản lặp", example: "Each iteration improves usability.", level: "C1" },
      { word: "obsolescence", phonetic: "/ˌɒb.səˈles.əns/", pos: "noun", vietnamese: "lỗi thời", example: "Planned obsolescence drives upgrade cycles.", level: "C2" },
      { word: "sustainability", phonetic: "/səˌsteɪ.nəˈbɪl.ə.ti/", pos: "noun", vietnamese: "bền vững", example: "Circular economy principles enhance sustainability.", level: "C1" }
    ],
    "Work Environment": [
      { word: "culture", phonetic: "/ˈkʌl.tʃər/", pos: "noun", vietnamese: "văn hóa công ty", example: "Toxic culture leads to high turnover.", level: "C1" },
      { word: "ergonomics", phonetic: "/ˌɜː.ɡəˈnɒm.ɪks/", pos: "noun", vietnamese: "công thái học", example: "Ergonomic chairs reduce back pain.", level: "C1" },
      { word: "hierarchy", phonetic: "/ˈhaɪə.rɑː.ki/", pos: "noun", vietnamese: "cấp bậc", example: "Flat hierarchy fosters open communication.", level: "C1" },
      { word: "autonomy", phonetic: "/ɔːˈtɒn.ə.mi/", pos: "noun", vietnamese: "tự chủ", example: "High autonomy increases job satisfaction.", level: "C1" },
      { word: "burnout", phonetic: "/ˈbɜːn.aʊt/", pos: "noun", vietnamese: "kiệt sức", example: "Chronic stress leads to burnout.", level: "C1" },
      { word: "telecommute", phonetic: "/ˈtel.ɪ.kəˌmjuːt/", pos: "verb", vietnamese: "làm việc từ xa", example: "70% of staff telecommute twice weekly.", level: "C1" },
      { word: "psychological safety", phonetic: "/ˌsaɪ.kəˈlɒdʒ.ɪ.kəl ˈseɪf.ti/", pos: "noun", vietnamese: "an toàn tâm lý", example: "Psychological safety enables risk-taking.", level: "C2" }
    ],
    "Projects & Planning": [
      { word: "timeline", phonetic: "/ˈtaɪm.laɪn/", pos: "noun", vietnamese: "lịch trình", example: "The Gantt chart visualizes the project timeline.", level: "C1" },
      { word: "milestone", phonetic: "/ˈmaɪl.stəʊn/", pos: "noun", vietnamese: "mốc quan trọng", example: "MVP launch is the next milestone.", level: "C1" },
      { word: "feasibility", phonetic: "/ˌfiː.zəˈbɪl.ə.ti/", pos: "noun", vietnamese: "tính khả thi", example: "A feasibility study precedes investment.", level: "C1" },
      { word: "contingency", phonetic: "/kənˈtɪn.dʒən.si/", pos: "noun", vietnamese: "dự phòng", example: "Allocate 15% contingency in the budget.", level: "C1" },
      { word: "stakeholder", phonetic: "/ˈsteɪkˌhəʊl.dər/", pos: "noun", vietnamese: "bên liên quan", example: "Map stakeholders by influence and interest.", level: "C1" },
      { word: "scope creep", phonetic: "/skəʊp kriːp/", pos: "noun", vietnamese: "mở rộng phạm vi", example: "Control scope creep with change requests.", level: "C2" }
    ]
  },
  "COMMUNICATION": {
    "Product Launch & Marketing": [
      { word: "campaign", phonetic: "/kæmˈpeɪn/", pos: "noun", vietnamese: "chiến dịch", example: "The omnichannel campaign integrated AR and social media.", level: "C1" },
      { word: "positioning", phonetic: "/pəˈzɪʃ.ən.ɪŋ/", pos: "noun", vietnamese: "định vị", example: "Premium positioning targets high-net-worth individuals.", level: "C1" },
      { word: "virality", phonetic: "/vaɪˈræl.ə.ti/", pos: "noun", vietnamese: "khả năng lan truyền", example: "The challenge achieved virality within 48 hours.", level: "C1" },
      { word: "penetration", phonetic: "/ˌpen.ɪˈtreɪ.ʃən/", pos: "noun", vietnamese: "độ thâm nhập", example: "Market penetration reached 40% in urban areas.", level: "C2" },
      { word: "disruptor", phonetic: "/dɪsˈrʌp.tər/", pos: "noun", vietnamese: "kẻ phá vỡ", example: "The startup is a category disruptor.", level: "C2" }
    ],
    "Team Collaboration": [
      { word: "collaboration", phonetic: "/kəˌlæb.əˈreɪ.ʃən/", pos: "noun", vietnamese: "hợp tác", example: "Cross-functional collaboration drives innovation.", level: "C1" },
      { word: "delegate", phonetic: "/ˈdel.ɪ.ɡeɪt/", pos: "verb", vietnamese: "giao phó", example: "Effective leaders delegate authority appropriately.", level: "C1" },
      { word: "consensus", phonetic: "/kənˈsen.səs/", pos: "noun", vietnamese: "đồng thuận", example: "Decision by consensus slows but improves buy-in.", level: "C1" },
      { word: "synergistic", phonetic: "/ˌsɪn.əˈdʒɪs.tɪk/", pos: "adj", vietnamese: "cộng hưởng", example: "Synergistic teams outperform individuals.", level: "C2" }
    ],
    "Design & Materials": [
      { word: "prototype", phonetic: "/ˈprəʊ.tə.taɪp/", pos: "noun", vietnamese: "mẫu thử", example: "Figma enables rapid interactive prototypes.", level: "C1" },
      { word: "aesthetic", phonetic: "/esˈθet.ɪk/", pos: "adj", vietnamese: "thẩm mỹ", example: "Minimalist aesthetic dominates modern UI design.", level: "C2" },
      { word: "ergonomic", phonetic: "/ˌɜː.ɡəˈnɒm.ɪk/", pos: "adj", vietnamese: "công thái", example: "Ergonomic keyboards reduce RSI risk.", level: "C1" },
      { word: "modular", phonetic: "/ˈmɒdʒ.ə.lər/", pos: "adj", vietnamese: "theo mô-đun", example: "Modular architecture allows flexible scaling.", level: "C1" }
    ],
    "Feedback & Adjustments": [
      { word: "revise", phonetic: "/rɪˈvaɪz/", pos: "verb", vietnamese: "sửa chữa", example: "Revise the draft based on peer feedback.", level: "C1" },
      { word: "critique", phonetic: "/krɪˈtiːk/", pos: "noun", vietnamese: "phê bình", example: "The design critique was constructive and detailed.", level: "C2" },
      { word: "iteration", phonetic: "/ˌɪt.əˈreɪ.ʃən/", pos: "noun", vietnamese: "lặp lại", example: "Each iteration refines the user flow.", level: "C1" },
      { word: "calibration", phonetic: "/ˌkæl.ɪˈbreɪ.ʃən/", pos: "noun", vietnamese: "hiệu chuẩn", example: "Regular calibration ensures data accuracy.", level: "C2" }
    ],
    "Events & Presentations": [
      { word: "seminar", phonetic: "/ˈsem.ɪ.nɑːr/", pos: "noun", vietnamese: "hội thảo", example: "The AI ethics seminar attracted 500 attendees.", level: "C1" },
      { word: "keynote", phonetic: "/ˈkiː.nəʊt/", pos: "noun", vietnamese: "bài phát biểu chính", example: "The CEO delivered the opening keynote.", level: "C1" },
      { word: "symposium", phonetic: "/sɪmˈpəʊ.zi.əm/", pos: "noun", vietnamese: "hội thảo chuyên đề", example: "The medical symposium published proceedings.", level: "C1" },
      { word: "plenary", phonetic: "/ˈpliː.nər.i/", pos: "adj", vietnamese: "toàn thể", example: "The plenary session voted on the resolution.", level: "C1" }
    ]
  },
  "AUDIO & VOICE SERVICES": {
    "Voice Recording": [
      { word: "voiceover", phonetic: "/ˈvɔɪs.əʊ.vər/", pos: "noun", vietnamese: "lồng tiếng", example: "The audiobook features a celebrity voiceover.", level: "C1" },
      { word: "narration", phonetic: "/nəˈreɪ.ʃən/", pos: "noun", vietnamese: "lời dẫn chuyện", example: "David Attenborough’s narration is iconic.", level: "C1" },
      { word: "dubbing", phonetic: "/ˈdʌb.ɪŋ/", pos: "noun", vietnamese: "lồng tiếng phim", example: "Lip-sync dubbing requires precise timing.", level: "C1" },
      { word: "soundscape", phonetic: "/ˈsaʊnd.skeɪp/", pos: "noun", vietnamese: "bối cảnh âm thanh", example: "The VR experience features immersive soundscapes.", level: "C2" },
      { word: "foley", phonetic: "/ˈfəʊ.li/", pos: "noun", vietnamese: "hiệu ứng âm thanh thực", example: "Foley artists recreate footsteps and doors.", level: "C2" }
    ],
    "Service Features": [
      { word: "transcription", phonetic: "/trænˈskrɪp.ʃən/", pos: "noun", vietnamese: "chuyển đổi âm thanh thành văn bản", example: "AI transcription achieves 99% accuracy in quiet conditions.", level: "C1" },
      { word: "customization", phonetic: "/ˌkʌs.tə.maɪˈzeɪ.ʃən/", pos: "noun", vietnamese: "tùy chỉnh", example: "Full customization of TTS voices is available.", level: "C2" },
      { word: "encoding", phonetic: "/ɪnˈkəʊ.dɪŋ/", pos: "noun", vietnamese: "mã hóa", example: "Use FLAC for lossless audio encoding.", level: "C1" },
      { word: "normalization", phonetic: "/ˌnɔː.mə.laɪˈzeɪ.ʃən/", pos: "noun", vietnamese: "chuẩn hóa âm lượng", example: "Loudness normalization ensures consistent playback.", level: "C2" }
    ],
    "Audio Production": [
      { word: "mixing", phonetic: "/ˈmɪk.sɪŋ/", pos: "noun", vietnamese: "phối âm", example: "Stem mixing allows flexible post-production.", level: "C1" },
      { word: "mastering", phonetic: "/ˈmɑː.stər.ɪŋ/", pos: "noun", vietnamese: "làm master", example: "Analog mastering adds warmth to digital tracks.", level: "C2" },
      { word: "equalization", phonetic: "/ˌiː.kwə.laɪˈzeɪ.ʃən/", pos: "noun", vietnamese: "cân bằng tần số", example: "Parametric equalization precisely shapes tone.", level: "C1" },
      { word: "artifact", phonetic: "/ˈɑː.tɪ.fækt/", pos: "noun", vietnamese: "nhiễu âm", example: "Avoid compression artifacts in high-res audio.", level: "C2" }
    ],
    "Client Communication": [
      { word: "brief", phonetic: "/briːf/", pos: "noun", vietnamese: "tóm tắt yêu cầu", example: "The creative brief defines tone and deliverables.", level: "C1" },
      { word: "revision", phonetic: "/rɪˈvɪʒ.ən/", pos: "noun", vietnamese: "bản sửa", example: "Two rounds of revision are included in the quote.", level: "C1" },
      { word: "deliverable", phonetic: "/dɪˈlɪv.ər.ə.bəl/", pos: "noun", vietnamese: "sản phẩm bàn giao", example: "Final deliverables include WAV and MP3 files.", level: "C1" },
      { word: "turnaround", phonetic: "/ˈtɜːn.əˌraʊnd/", pos: "noun", vietnamese: "thời gian hoàn thành", example: "24-hour turnaround for urgent voiceovers.", level: "C1" }
    ]
  },
  "TEXT MESSAGING": {
    "Informal Communication": [
      { word: "brevity", phonetic: "/ˈbrev.ə.ti/", pos: "noun", vietnamese: "sự ngắn gọn", example: "Brevity is valued in professional messaging.", level: "C2" },
      { word: "colloquial", phonetic: "/kəˈləʊ.kwi.əl/", pos: "adj", vietnamese: "thân mật", example: "Colloquial expressions dominate casual texting.", level: "C1" },
      { word: "paralinguistic", phonetic: "/ˌpær.ə.lɪŋˈɡwɪs.tɪk/", pos: "adj", vietnamese: "phi ngôn ngữ", example: "Emojis serve paralinguistic functions.", level: "C2" },
      { word: "asynchronous", phonetic: "/eɪˈsɪŋ.krə.nəs/", pos: "adj", vietnamese: "không đồng bộ", example: "Texting enables asynchronous communication.", level: "C1" }
    ],
    "Expressing Agreement": [
      { word: "concur", phonetic: "/kənˈkɜːr/", pos: "verb", vietnamese: "đồng tình", example: "I concur with the proposed timeline.", level: "C2" },
      { word: "unequivocally", phonetic: "/ˌʌn.ɪˈkwɪv.ə.kəl.i/", pos: "adv", vietnamese: "không mơ hồ", example: "I unequivocally endorse this initiative.", level: "C2" },
      { word: "corroborate", phonetic: "/kəˈrɒb.ə.reɪt/", pos: "verb", vietnamese: "xác nhận", example: "Your data corroborates my hypothesis.", level: "C2" },
     ]
  }
};
</file>

<file path="src/data/vocabulary/vocabularyDataLevel4.js">
// src/data/vocabularyDataLevel4.js
// Vocabulary data for CEFR levels C1 - C2 (Advanced & Proficient)
// Expanded with 100+ high-frequency, academic, business, and professional vocabulary items
// Organized by main topics and sub-topics
// Each entry: { word, phonetic (IPA), pos (part of speech), vietnamese, example, level }

export const vocabularyDataLevel4 = {
  "TRAVEL & TOURISM": {
    "Travel Activities": [
      { word: "itinerary", phonetic: "/aɪˈtɪn.ər.ər.i/", pos: "noun", vietnamese: "lịch trình du lịch", example: "The travel agent prepared a detailed itinerary for the group tour.", level: "C1" },
      { word: "expedition", phonetic: "/ˌek.spəˈdɪʃ.ən/", pos: "noun", vietnamese: "cuộc thám hiểm", example: "The Antarctic expedition required specialized gear and training.", level: "C1" },
      { word: "pilgrimage", phonetic: "/ˈpɪl.ɡrɪ.mɪdʒ/", pos: "noun", vietnamese: "cuộc hành hương", example: "Thousands make the annual pilgrimage to the sacred temple.", level: "C1" },
      { word: "sojourn", phonetic: "/ˈsɒdʒ.ɜːn/", pos: "noun", vietnamese: "kỳ lưu trú ngắn", example: "Her brief sojourn in Paris inspired her novel.", level: "C2" },
      { word: "peripatetic", phonetic: "/ˌper.ɪ.pəˈtet.ɪk/", pos: "adj", vietnamese: "di chuyển liên tục", example: "His peripatetic lifestyle took him to over 50 countries.", level: "C2" }
    ],
    "Transportation": [
      { word: "charter", phonetic: "/ˈtʃɑː.tər/", pos: "verb", vietnamese: "thuê bao (tàu, máy bay)", example: "The company chartered a private jet for the executives.", level: "C1" },
      { word: "transit", phonetic: "/ˈtræn.zɪt/", pos: "noun", vietnamese: "quá cảnh", example: "Passengers in transit do not need a visa for layovers under 24 hours.", level: "C1" },
      { word: "layover", phonetic: "/ˈleɪ.əʊ.vər/", pos: "noun", vietnamese: "thời gian dừng chân", example: "We had a six-hour layover in Dubai.", level: "C1" },
      { word: "commuter", phonetic: "/kəˈmjuː.tər/", pos: "noun", vietnamese: "người đi làm hàng ngày", example: "Commuters face heavy traffic during rush hour.", level: "C1" },
      { word: "logistics", phonetic: "/ləˈdʒɪs.tɪks/", pos: "noun", vietnamese: "hậu cần", example: "Efficient logistics are crucial for tourism supply chains.", level: "C2" }
    ],
    "Accommodation & Shopping": [
      { word: "concierge", phonetic: "/ˈkɒn.si.eəʒ/", pos: "noun", vietnamese: "nhân viên lễ tân cao cấp", example: "The concierge arranged theater tickets and dinner reservations.", level: "C1" },
      { word: "boutique", phonetic: "/buːˈtiːk/", pos: "noun", vietnamese: "cửa hàng thời trang cao cấp", example: "She prefers shopping at boutique stores rather than chains.", level: "C1" },
      { word: "upscale", phonetic: "/ˌʌpˈskeɪl/", pos: "adj", vietnamese: "cao cấp", example: "The upscale resort offers personalized spa treatments.", level: "C1" },
      { word: "patronage", phonetic: "/ˈpæt.rə.nɪdʒ/", pos: "noun", vietnamese: "sự ủng hộ (khách quen)", example: "The hotel relies on repeat patronage from loyal guests.", level: "C2" },
      { word: "artisan", phonetic: "/ˈɑː.tɪ.zæn/", pos: "noun", vietnamese: "thợ thủ công", example: "Local artisans sell handmade jewelry at the market.", level: "C1" }
    ],
    "Travel Problems": [
      { word: "contingency", phonetic: "/kənˈtɪn.dʒən.si/", pos: "noun", vietnamese: "kế hoạch dự phòng", example: "We have a contingency plan in case of flight cancellation.", level: "C1" },
      { word: "repatriation", phonetic: "/riːˌpeɪ.triˈeɪ.ʃən/", pos: "noun", vietnamese: "hồi hương", example: "The embassy arranged repatriation for stranded citizens.", level: "C2" },
      { word: "quarantine", phonetic: "/ˈkwɒr.ən.tiːn/", pos: "noun", vietnamese: "cách ly", example: "Travelers must undergo quarantine upon arrival.", level: "C1" },
      { word: "visa waiver", phonetic: "/ˈviː.zə ˈweɪ.vər/", pos: "noun", vietnamese: "miễn visa", example: "The country offers a visa waiver for short stays.", level: "C1" },
      { word: "overbooking", phonetic: "/ˌəʊ.vəˈbʊk.ɪŋ/", pos: "noun", vietnamese: "đặt quá số lượng", example: "Overbooking led to several passengers being bumped from the flight.", level: "C2" }
    ]
  },
  "FOOD & RESTAURANTS": {
    "Ordering Food": [
      { word: "sommelier", phonetic: "/ˈsɒm.əl.ieɪ/", pos: "noun", vietnamese: "chuyên gia rượu vang", example: "The sommelier recommended a vintage Bordeaux to pair with the steak.", level: "C1" },
      { word: "degustation", phonetic: "/ˌdeɪ.ɡʊˈsteɪ.ʃən/", pos: "noun", vietnamese: "bữa ăn nếm thử", example: "The restaurant offers a seven-course degustation menu.", level: "C2" },
      { word: "à la carte", phonetic: "/ˌæ lə ˈkɑːt/", pos: "adj", vietnamese: "tùy chọn món", example: "Guests can order à la carte or choose the set menu.", level: "C1" },
      { word: "gastronomy", phonetic: "/ɡæsˈtrɒn.ə.mi/", pos: "noun", vietnamese: "nghệ thuật ẩm thực", example: "Molecular gastronomy transforms traditional dishes.", level: "C2" },
      { word: "palate", phonetic: "/ˈpæl.ət/", pos: "noun", vietnamese: "vị giác", example: "The dish was designed to cleanse the palate between courses.", level: "C1" }
    ],
    "Restaurant Features": [
      { word: "ambience", phonetic: "/ˈæm.bi.əns/", pos: "noun", vietnamese: "không gian", example: "The candlelit ambience creates an intimate dining experience.", level: "C1" },
      { word: "Michelin", phonetic: "/ˈmɪʃ.əl.ɪn/", pos: "adj", vietnamese: "sao Michelin", example: "The restaurant earned its third Michelin star this year.", level: "C1" },
      { word: "fusion", phonetic: "/ˈfjuː.ʒən/", pos: "noun", vietnamese: "kết hợp ẩm thực", example: "The menu features Asian-Latin fusion cuisine.", level: "C1" },
      { word: "patisserie", phonetic: "/pəˈtiː.sər.i/", pos: "noun", vietnamese: "tiệm bánh ngọt", example: "The patisserie is famous for its macarons and éclairs.", level: "C1" },
      { word: "al fresco", phonetic: "/ˌæl ˈfres.kəʊ/", pos: "adj", vietnamese: "ngoài trời", example: "We prefer al fresco dining during summer evenings.", level: "C2" }
    ],
    "Job & Career (Food Industry)": [
      { word: "executive chef", phonetic: "/ɪɡˈzek.jə.tɪv ʃef/", pos: "noun", vietnamese: "đầu bếp trưởng", example: "The executive chef oversees all kitchen operations.", level: "C1" },
      { word: "maître d'", phonetic: "/ˌmeɪ.trə ˈdiː/", pos: "noun", vietnamese: "quản lý nhà hàng", example: "The maître d' greeted VIP guests at the entrance.", level: "C2" },
      { word: "culinary", phonetic: "/ˈkʌl.ɪ.nər.i/", pos: "adj", vietnamese: "thuộc ẩm thực", example: "She enrolled in a prestigious culinary institute.", level: "C1" },
      { word: "sous-chef", phonetic: "/ˌsuː ˈʃef/", pos: "noun", vietnamese: "phó đầu bếp", example: "The sous-chef prepared the mise en place before service.", level: "C1" },
      { word: "hospitality", phonetic: "/ˌhɒs.pɪˈtæl.ə.ti/", pos: "noun", vietnamese: "ngành dịch vụ khách sạn", example: "He has 20 years of experience in hospitality management.", level: "C1" }
    ]
  },
  "EDUCATION": {
    "Academic Terms": [
      { word: "pedagogy", phonetic: "/ˈped.ə.ɡɒdʒ.i/", pos: "noun", vietnamese: "phương pháp giảng dạy", example: "The course focuses on modern pedagogy and student engagement.", level: "C2" },
      { word: "curriculum vitae", phonetic: "/kəˌrɪk.jə.ləm ˈviː.taɪ/", pos: "noun", vietnamese: "sơ yếu lý lịch", example: "Submit your curriculum vitae with the application form.", level: "C1" },
      { word: "dissertation", phonetic: "/ˌdɪs.əˈteɪ.ʃən/", pos: "noun", vietnamese: "luận án tiến sĩ", example: "Her dissertation was published in a peer-reviewed journal.", level: "C1" },
      { word: "tenure", phonetic: "/ˈten.jər/", pos: "noun", vietnamese: "chế độ làm việc lâu dài", example: "Professors seek tenure for academic freedom and job security.", level: "C1" },
      { word: "syllabus", phonetic: "/ˈsɪl.ə.bəs/", pos: "noun", vietnamese: "đề cương môn học", example: "The syllabus outlines weekly readings and assignments.", level: "C1" }
    ],
    "Study Requirements": [
      { word: "plagiarism", phonetic: "/ˈpleɪ.dʒər.ɪ.zəm/", pos: "noun", vietnamese: "đạo văn", example: "Plagiarism results in immediate academic penalties.", level: "C1" },
      { word: "citation", phonetic: "/saɪˈteɪ.ʃən/", pos: "noun", vietnamese: "trích dẫn", example: "Use APA format for all citations in your paper.", level: "C1" },
      { word: "scholarship", phonetic: "/ˈskɒl.ə.ʃɪp/", pos: "noun", vietnamese: "học bổng", example: "She received a full scholarship to study abroad.", level: "C1" },
      { word: "practicum", phonetic: "/ˈpræk.tɪ.kəm/", pos: "noun", vietnamese: "thực tập", example: "The teaching practicum is a required component of the program.", level: "C1" },
      { word: "accreditation", phonetic: "/əˌkred.ɪˈteɪ.ʃən/", pos: "noun", vietnamese: "công nhận", example: "The university lost its accreditation due to quality issues.", level: "C2" }
    ],
    "Performance & Learning": [
      { word: "cognition", phonetic: "/kɒɡˈnɪʃ.ən/", pos: "noun", vietnamese: "nhận thức", example: "The study examines cognition in bilingual children.", level: "C2" },
      { word: "metacognition", phonetic: "/ˌmet.ə.kɒɡˈnɪʃ.ən/", pos: "noun", vietnamese: "siêu nhận thức", example: "Metacognition helps students monitor their own learning.", level: "C2" },
      { word: "proficiency", phonetic: "/prəˈfɪʃ.ən.si/", pos: "noun", vietnamese: "sự thành thạo", example: "Language proficiency is assessed through standardized tests.", level: "C1" },
      { word: "retention", phonetic: "/rɪˈten.ʃən/", pos: "noun", vietnamese: "sự ghi nhớ", example: "Spaced repetition improves long-term retention of vocabulary.", level: "C1" },
      { word: "heuristic", phonetic: "/hjʊˈrɪs.tɪk/", pos: "noun", vietnamese: "phương pháp thử và sai", example: "Students use heuristics to solve complex math problems.", level: "C2" }
    ]
  },
  "SHOPPING & CUSTOMER SERVICE": {
    "Returns & Refunds": [
      { word: "reimbursement", phonetic: "/ˌriː.ɪmˈbɜːs.mənt/", pos: "noun", vietnamese: "hoàn trả tiền", example: "Submit receipts for expense reimbursement within 30 days.", level: "C1" },
      { word: "warranty claim", phonetic: "/ˈwɒr.ən.ti kleɪm/", pos: "noun", vietnamese: "yêu cầu bảo hành", example: "File a warranty claim for defective products.", level: "C1" },
      { word: "restocking fee", phonetic: "/ˌriːˈstɒk.ɪŋ fiː/", pos: "noun", vietnamese: "phí nhập lại kho", example: "A 15% restocking fee applies to returned electronics.", level: "C1" },
      { word: "pro rata", phonetic: "/ˌprəʊ ˈrɑː.tə/", pos: "adv", vietnamese: "tỷ lệ", example: "Refunds are issued pro rata for unused subscription periods.", level: "C2" },
      { word: "indemnity", phonetic: "/ɪnˈdem.nə.ti/", pos: "noun", vietnamese: "bồi thường", example: "The policy includes indemnity against product liability.", level: "C2" }
    ],
    "Problems & Solutions": [
      { word: "escalation", phonetic: "/ˌes.kəˈleɪ.ʃən/", pos: "noun", vietnamese: "leo thang (vấn đề)", example: "Customer complaints require immediate escalation to management.", level: "C1" },
      { word: "mitigation", phonetic: "/ˌmɪt.ɪˈɡeɪ.ʃən/", pos: "noun", vietnamese: "giảm thiểu", example: "Risk mitigation strategies prevent service disruptions.", level: "C1" },
      { word: "redress", phonetic: "/rɪˈdres/", pos: "noun", vietnamese: "sự khắc phục", example: "Consumers have the right to seek redress for faulty goods.", level: "C2" },
      { word: "arbitration", phonetic: "/ˌɑː.bɪˈtreɪ.ʃən/", pos: "noun", vietnamese: "trọng tài", example: "Disputes may be resolved through binding arbitration.", level: "C2" },
      { word: "litigation", phonetic: "/ˌlɪt.ɪˈɡeɪ.ʃən/", pos: "noun", vietnamese: "kiện tụng", example: "The company faces costly litigation over false advertising.", level: "C2" }
    ],
    "Service & Quality": [
      { word: "benchmark", phonetic: "/ˈbentʃ.mɑːk/", pos: "noun", vietnamese: "tiêu chuẩn", example: "Industry benchmarks measure service quality and efficiency.", level: "C1" },
      { word: "excellence", phonetic: "/ˈek.səl.əns/", pos: "noun", vietnamese: "sự xuất sắc", example: "The brand is synonymous with excellence in craftsmanship.", level: "C1" },
      { word: "compliance", phonetic: "/kəmˈplaɪ.əns/", pos: "noun", vietnamese: "tuân thủ", example: "Regulatory compliance is mandatory for all retailers.", level: "C1" },
      { word: "certification", phonetic: "/ˌsɜː.tɪ.fɪˈkeɪ.ʃən/", pos: "noun", vietnamese: "chứng nhận", example: "ISO certification enhances credibility with customers.", level: "C1" },
      { word: "traceability", phonetic: "/ˌtreɪ.səˈbɪl.ə.ti/", pos: "noun", vietnamese: "khả năng truy xuất", example: "Supply chain traceability ensures ethical sourcing.", level: "C2" }
    ],
    "Customer Relations": [
      { word: "rapport", phonetic: "/ræˈpɔːr/", pos: "noun", vietnamese: "mối quan hệ tốt", example: "Sales staff build rapport through active listening.", level: "C1" },
      { word: "advocacy", phonetic: "/ˈæd.və.kə.si/", pos: "noun", vietnamese: "sự ủng hộ", example: "Customer advocacy drives word-of-mouth marketing.", level: "C1" },
      { word: "retention", phonetic: "/rɪˈten.ʃən/", pos: "noun", vietnamese: "giữ chân khách", example: "Loyalty programs improve customer retention rates.", level: "C1" },
      { word: "churn", phonetic: "/tʃɜːn/", pos: "noun", vietnamese: "tỷ lệ rời bỏ", example: "High churn indicates dissatisfaction with service.", level: "C1" },
      { word: "stakeholder", phonetic: "/ˈsteɪkˌhəʊl.dər/", pos: "noun", vietnamese: "bên liên quan", example: "Engage all stakeholders in product development.", level: "C1" }
    ]
  },
  "BUSINESS & WORKPLACE": {
    "Company Operations": [
      { word: "synergy", phonetic: "/ˈsɪn.ə.dʒi/", pos: "noun", vietnamese: "hiệu ứng cộng hưởng", example: "The merger created synergy between the two firms.", level: "C1" },
      { word: "leverage", phonetic: "/ˈliː.vər.ɪdʒ/", pos: "verb", vietnamese: "tận dụng", example: "Leverage data analytics to optimize operations.", level: "C1" },
      { word: "scalability", phonetic: "/ˌskeɪ.ləˈbɪl.ə.ti/", pos: "noun", vietnamese: "khả năng mở rộng", example: "Cloud infrastructure offers high scalability for growing businesses.", level: "C1" },
      { word: "disruption", phonetic: "/dɪsˈrʌp.ʃən/", pos: "noun", vietnamese: "sự gián đoạn", example: "Digital disruption transformed the retail industry.", level: "C1" },
      { word: "paradigm", phonetic: "/ˈpær.ə.daɪm/", pos: "noun", vietnamese: "mô hình", example: "The company operates under a new business paradigm.", level: "C2" }
    ],
    "Performance & Reviews": [
      { word: "KPI", phonetic: "/ˌkeɪ piː ˈaɪ/", pos: "noun", vietnamese: "chỉ số hiệu suất chính", example: "Track KPIs to measure team performance.", level: "C1" },
      { word: "benchmarking", phonetic: "/ˈbentʃ.mɑː.kɪŋ/", pos: "noun", vietnamese: "so sánh chuẩn", example: "Benchmarking against competitors reveals improvement areas.", level: "C1" },
      { word: "accountability", phonetic: "/əˌkaʊn.təˈbɪl.ə.ti/", pos: "noun", vietnamese: "trách nhiệm", example: "Managers promote a culture of accountability.", level: "C1" },
      { word: "meritocracy", phonetic: "/ˌmer.ɪˈtɒk.rə.si/", pos: "noun", vietnamese: "chế độ tài năng", example: "The firm operates as a meritocracy based on results.", level: "C2" },
      { word: "efficacy", phonetic: "/ˈef.ɪ.kə.si/", pos: "noun", vietnamese: "hiệu lực", example: "Clinical trials prove the drug's efficacy.", level: "C2" }
    ],
    "Materials & Products": [
      { word: "specification", phonetic: "/ˌspes.ɪ.fɪˈkeɪ.ʃən/", pos: "noun", vietnamese: "thông số kỹ thuật", example: "The product meets all safety specifications.", level: "C1" },
      { word: "patent", phonetic: "/ˈpæt.ənt/", pos: "noun", vietnamese: "bằng sáng chế", example: "The invention is protected by international patents.", level: "C1" },
      { word: "prototype", phonetic: "/ˈprəʊ.tə.taɪp/", pos: "noun", vietnamese: "nguyên mẫu", example: "Engineers built a working prototype in six weeks.", level: "C1" },
      { word: "iteration", phonetic: "/ˌɪt.əˈreɪ.ʃən/", pos: "noun", vietnamese: "phiên bản lặp", example: "Each iteration improves usability and performance.", level: "C1" },
      { word: "obsolescence", phonetic: "/ˌɒb.səˈles.əns/", pos: "noun", vietnamese: "lỗi thời", example: "Planned obsolescence encourages frequent upgrades.", level: "C2" }
    ],
    "Work Environment": [
      { word: "ergonomics", phonetic: "/ˌɜː.ɡəˈnɒm.ɪks/", pos: "noun", vietnamese: "công thái học", example: "Ergonomics reduce workplace injuries and fatigue.", level: "C1" },
      { word: "hierarchy", phonetic: "/ˈhaɪə.rɑː.ki/", pos: "noun", vietnamese: "cấp bậc", example: "The company has a flat organizational hierarchy.", level: "C1" },
      { word: "autonomy", phonetic: "/ɔːˈtɒn.ə.mi/", pos: "noun", vietnamese: "tự chủ", example: "Employees value autonomy in decision-making.", level: "C1" },
      { word: "burnout", phonetic: "/ˈbɜːn.aʊt/", pos: "noun", vietnamese: "kiệt sức", example: "Prevent burnout with regular breaks and support.", level: "C1" },
      { word: "telecommute", phonetic: "/ˈtel.ɪ.kəˌmjuːt/", pos: "verb", vietnamese: "làm việc từ xa", example: "Many staff telecommute two days per week.", level: "C1" }
    ],
    "Projects & Planning": [
      { word: "feasibility", phonetic: "/ˌfiː.zəˈbɪl.ə.ti/", pos: "noun", vietnamese: "tính khả thi", example: "A feasibility study was conducted before launch.", level: "C1" },
      { word: "Gantt chart", phonetic: "/ɡænt tʃɑːt/", pos: "noun", vietnamese: "biểu đồ Gantt", example: "Use a Gantt chart to visualize project timelines.", level: "C1" },
      { word: "contingency", phonetic: "/kənˈtɪn.dʒən.si/", pos: "noun", vietnamese: "dự phòng", example: "Include a 10% contingency in the budget.", level: "C1" },
      { word: "stakeholder", phonetic: "/ˈsteɪkˌhəʊl.dər/", pos: "noun", vietnamese: "bên liên quan", example: "Engage stakeholders early in project planning.", level: "C1" },
      { word: "agile", phonetic: "/ˈædʒ.aɪl/", pos: "adj", vietnamese: "linh hoạt", example: "We use agile methodology for software development.", level: "C1" }
    ]
  },
  "COMMUNICATION": {
    "Product Launch & Marketing": [
      { word: "positioning", phonetic: "/pəˈzɪʃ.ən.ɪŋ/", pos: "noun", vietnamese: "định vị thương hiệu", example: "Effective positioning differentiates the product in the market.", level: "C1" },
      { word: "guerrilla marketing", phonetic: "/ɡəˈrɪl.ə ˈmɑː.kɪ.tɪŋ/", pos: "noun", vietnamese: "tiếp thị du kích", example: "Guerrilla marketing creates buzz with low budgets.", level: "C1" },
      { word: "virality", phonetic: "/vaɪˈræl.ə.ti/", pos: "noun", vietnamese: "khả năng lan truyền", example: "The video achieved virality within 24 hours.", level: "C1" },
      { word: "demographics", phonetic: "/ˌdem.əˈɡræf.ɪks/", pos: "noun", vietnamese: "nhân khẩu học", example: "Target demographics include urban professionals aged 25-40.", level: "C1" },
      { word: "penetration", phonetic: "/ˌpen.ɪˈtreɪ.ʃən/", pos: "noun", vietnamese: "độ thâm nhập thị trường", example: "Market penetration reached 35% in the first year.", level: "C2" }
    ],
    "Team Collaboration": [
      { word: "consensus", phonetic: "/kənˈsen.səs/", pos: "noun", vietnamese: "đồng thuận", example: "The team reached consensus on the final design.", level: "C1" },
      { word: "facilitate", phonetic: "/fəˈsɪl.ɪ.teɪt/", pos: "verb", vietnamese: "hỗ trợ", example: "The manager facilitates weekly team meetings.", level: "C1" },
      { word: "synergistic", phonetic: "/ˌsɪn.əˈdʒɪs.tɪk/", pos: "adj", vietnamese: "cộng hưởng", example: "Synergistic collaboration produces innovative solutions.", level: "C2" },
      { word: "cohesive", phonetic: "/kəʊˈhiː.sɪv/", pos: "adj", vietnamese: "gắn kết", example: "A cohesive team achieves more than individuals.", level: "C1" },
      { word: "alignment", phonetic: "/əˈlaɪn.mənt/", pos: "noun", vietnamese: "sự đồng nhất", example: "Ensure alignment between goals and actions.", level: "C1" }
    ],
    "Design & Materials": [
      { word: "aesthetics", phonetic: "/esˈθet.ɪks/", pos: "noun", vietnamese: "tính thẩm mỹ", example: "Aesthetics play a key role in user experience.", level: "C1" },
      { word: "prototype", phonetic: "/ˈprəʊ.tə.taɪp/", pos: "noun", vietnamese: "mẫu thử", example: "Iterate quickly on low-fidelity prototypes.", level: "C1" },
      { word: "sustainability", phonetic: "/səˌsteɪ.nəˈbɪl.ə.ti/", pos: "noun", vietnamese: "bền vững", example: "Use sustainable materials in product design.", level: "C1" },
      { word: "ergonomic", phonetic: "/ˌɜː.ɡəˈnɒm.ɪk/", pos: "adj", vietnamese: "công thái", example: "The chair has an ergonomic design for long hours.", level: "C1" },
      { word: "modular", phonetic: "/ˈmɒdʒ.ə.lər/", pos: "adj", vietnamese: "theo mô-đun", example: "Modular furniture allows flexible configurations.", level: "C1" }
    ],
    "Feedback & Adjustments": [
      { word: "iteration", phonetic: "/ˌɪt.əˈreɪ.ʃən/", pos: "noun", vietnamese: "lặp lại", example: "Each iteration refines the user interface.", level: "C1" },
      { word: "pivot", phonetic: "/ˈpɪv.ət/", pos: "verb", vietnamese: "chuyển hướng", example: "The startup pivoted after user feedback.", level: "C1" },
      { word: "refinement", phonetic: "/rɪˈfaɪn.mənt/", pos: "noun", vietnamese: "sự tinh chỉnh", example: "Continuous refinement improves product quality.", level: "C1" },
      { word: "calibration", phonetic: "/ˌkæl.ɪˈbreɪ.ʃən/", pos: "noun", vietnamese: "hiệu chuẩn", example: "Regular calibration ensures measurement accuracy.", level: "C2" },
      { word: "validation", phonetic: "/ˌvæl.ɪˈdeɪ.ʃən/", pos: "noun", vietnamese: "xác nhận", example: "User validation confirmed the feature's value.", level: "C1" }
    ],
    "Events & Presentations": [
      { word: "keynote", phonetic: "/ˈkiː.nəʊt/", pos: "noun", vietnamese: "bài phát biểu chính", example: "The CEO delivered the keynote at the conference.", level: "C1" },
      { word: "symposium", phonetic: "/sɪmˈpəʊ.zi.əm/", pos: "noun", vietnamese: "hội thảo chuyên đề", example: "The medical symposium attracted global experts.", level: "C1" },
      { word: "panel", phonetic: "/ˈpæn.əl/", pos: "noun", vietnamese: "ban hội thảo", example: "She joined a panel on sustainable business.", level: "C1" },
      { word: "plenary", phonetic: "/ˈpliː.nər.i/", pos: "adj", vietnamese: "toàn thể", example: "The plenary session included all delegates.", level: "C1" },
      { word: "convene", phonetic: "/kənˈviːn/", pos: "verb", vietnamese: "triệu tập", example: "The board will convene next quarter.", level: "C2" }
    ]
  },
  "AUDIO & VOICE SERVICES": {
    "Voice Recording": [
      { word: "narration", phonetic: "/nəˈreɪ.ʃən/", pos: "noun", vietnamese: "lời dẫn chuyện", example: "His deep voice is perfect for documentary narration.", level: "C1" },
      { word: "dubbing", phonetic: "/ˈdʌb.ɪŋ/", pos: "noun", vietnamese: "lồng tiếng", example: "The film requires dubbing into five languages.", level: "C1" },
      { word: "soundscape", phonetic: "/ˈsaʊnd.skeɪp/", pos: "noun", vietnamese: "bối cảnh âm thanh", example: "The soundscape immerses listeners in the environment.", level: "C2" },
      { word: "post-production", phonetic: "/ˌpəʊst prəˈdʌk.ʃən/", pos: "noun", vietnamese: "hậu kỳ", example: "Post-production includes editing, mixing, and mastering.", level: "C1" },
      { word: "foley", phonetic: "/ˈfəʊ.li/", pos: "noun", vietnamese: "hiệu ứng âm thanh thực", example: "Foley artists recreate everyday sounds in studio.", level: "C2" }
    ],
    "Service Features": [
      { word: "encoding", phonetic: "/ɪnˈkəʊ.dɪŋ/", pos: "noun", vietnamese: "mã hóa", example: "Use lossless encoding for archival audio.", level: "C1" },
      { word: "metadata", phonetic: "/ˈmet.əˌdeɪ.tə/", pos: "noun", vietnamese: "siêu dữ liệu", example: "Embed metadata in audio files for cataloging.", level: "C1" },
      { word: "bitrate", phonetic: "/ˈbɪt.reɪt/", pos: "noun", vietnamese: "tốc độ bit", example: "Higher bitrate improves audio fidelity.", level: "C1" },
      { word: "compression", phonetic: "/kəmˈpreʃ.ən/", pos: "noun", vietnamese: "nén", example: "Lossless compression preserves original quality.", level: "C1" },
      { word: "normalization", phonetic: "/ˌnɔː.mə.laɪˈzeɪ.ʃən/", pos: "noun", vietnamese: "chuẩn hóa âm lượng", example: "Apply normalization to balance track volumes.", level: "C2" }
    ],
    "Audio Production": [
      { word: "equalization", phonetic: "/ˌiː.kwə.laɪˈzeɪ.ʃən/", pos: "noun", vietnamese: "cân bằng tần số", example: "Use equalization to enhance vocal clarity.", level: "C1" },
      { word: "reverb", phonetic: "/rɪˈvɜːb/", pos: "noun", vietnamese: "hồi âm", example: "Add subtle reverb to create spatial depth.", level: "C1" },
      { word: "stem", phonetic: "/stem/", pos: "noun", vietnamese: "bản phối riêng", example: "Deliver individual stems for final mixing.", level: "C1" },
      { word: "render", phonetic: "/ˈren.dər/", pos: "verb", vietnamese: "xuất file", example: "Render the final mix in WAV format.", level: "C1" },
      { word: "artifact", phonetic: "/ˈɑː.tɪ.fækt/", pos: "noun", vietnamese: "nhiễu âm", example: "Avoid compression artifacts in high-quality audio.", level: "C2" }
    ],
    "Client Communication": [
      { word: "proofing", phonetic: "/ˈpruː.fɪŋ/", pos: "noun", vietnamese: "xem trước", example: "Send audio proofing links for client approval.", level: "C1" },
      { word: "turnaround", phonetic: "/ˈtɜːn.əˌraʊnd/", pos: "noun", vietnamese: "thời gian hoàn thành", example: "We offer 24-hour turnaround for urgent projects.", level: "C1" },
      { word: "deliverable", phonetic: "/dɪˈlɪv.ər.ə.bəl/", pos: "noun", vietnamese: "sản phẩm bàn giao", example: "The final deliverable includes mastered files.", level: "C1" },
      { word: "SOW", phonetic: "/ˌes əʊ ˈdʌb.ljuː/", pos: "noun", vietnamese: "phạm vi công việc", example: "Sign the SOW before production begins.", level: "C1" },
      { word: "milestone", phonetic: "/ˈmaɪl.stəʊn/", pos: "noun", vietnamese: "mốc tiến độ", example: "Reach the first milestone by week four.", level: "C1" }
    ]
  },
  "TEXT MESSAGING": {
    "Informal Communication": [
      { word: "brevity", phonetic: "/ˈbrev.ə.ti/", pos: "noun", vietnamese: "sự ngắn gọn", example: "Text messaging favors brevity and clarity.", level: "C2" },
      { word: "colloquial", phonetic: "/kəˈləʊ.kwi.əl/", pos: "adj", vietnamese: "thân mật", example: "Use colloquial language in casual chats.", level: "C1" },
      { word: "ellipsis", phonetic: "/ɪˈlɪp.sɪs/", pos: "noun", vietnamese: "dấu chấm lửng", example: "An ellipsis implies hesitation or trailing thought.", level: "C2" },
      { word: "paralinguistic", phonetic: "/ˌpær.ə.lɪŋˈɡwɪs.tɪk/", pos: "adj", vietnamese: "phi ngôn ngữ", example: "Emojis serve paralinguistic functions in text.", level: "C2" },
      { word: "asynchronous", phonetic: "/eɪˈsɪŋ.krə.nəs/", pos: "adj", vietnamese: "không đồng bộ", example: "Texting allows asynchronous communication.", level: "C1" }
    ],
    "Expressing Agreement": [
      { word: "concur", phonetic: "/kənˈkɜːr/", pos: "verb", vietnamese: "đồng tình", example: "I concur with your assessment of the situation.", level: "C2" },
      { word: "unequivocally", phonetic: "/ˌʌn.ɪˈkwɪv.ə.kəl.i/", pos: "adv", vietnamese: "không mơ hồ", example: "I unequivocally support the proposal.", level: "C2" },
      { word: "affirmative", phonetic: "/əˈfɜː.mə.tɪv/", pos: "adj", vietnamese: "khẳng định", example: "My response is in the affirmative.", level: "C1" },
      { word: "corroborate", phonetic: "/kəˈrɒb.ə.reɪt/", pos: "verb", vietnamese: "xác nhận", example: "Your data corroborates my findings.", level: "C2" },
      { word: "endorse", phonetic: "/ɪnˈdɔːs/", pos: "verb", vietnamese: "tán thành", example: "I fully endorse this initiative.", level: "C1" }
    ]
  }
};
</file>

<file path="src/data/vocabulary/vocabularyDataLevel5.js">
// src/data/vocabularyDataLevel5.js
// Vocabulary data for CEFR levels B1 - B2 (Intermediate to Upper-Intermediate)
// 300+ NEW, UNIQUE words — NO DUPLICATES with Level1, Level2, Level3, or Level4
// Organized by main topics and sub-topics
// Each entry: { word, phonetic (IPA), pos (part of speech), vietnamese, example, level }

export const vocabularyDataLevel5 = {
  "TRAVEL & TOURISM": {
    "Travel Activities": [
      { word: "wander", phonetic: "/ˈwɒn.dər/", pos: "verb", vietnamese: "lang thang", example: "We love to wander through narrow cobblestone streets.", level: "B1" },
      { word: "stroll", phonetic: "/strəʊl/", pos: "verb", vietnamese: "dạo bước", example: "Let’s take a stroll along the riverbank at sunset.", level: "B1" },
      { word: "roam", phonetic: "/rəʊm/", pos: "verb", vietnamese: "lang thang tự do", example: "Camels roam freely in the desert.", level: "B1" },
      { word: "trek", phonetic: "/trek/", pos: "verb", vietnamese: "đi bộ đường dài", example: "We plan to trek to Everest Base Camp next year.", level: "B2" },
      { word: "safari", phonetic: "/səˈfɑː.ri/", pos: "noun", vietnamese: "chuyến săn ảnh động vật", example: "The safari in Kenya was unforgettable.", level: "B1" },
      { word: "snorkel", phonetic: "/ˈsnɔː.kəl/", pos: "verb", vietnamese: "lặn ống thở", example: "We snorkeled among colorful coral reefs.", level: "B1" },
      { word: "kayak", phonetic: "/ˈkaɪ.æk/", pos: "verb", vietnamese: "chèo thuyền kayak", example: "They kayak down the river every weekend.", level: "B1" },
      { word: "paraglide", phonetic: "/ˈpær.ə.ɡlaɪd/", pos: "verb", vietnamese: "nhảy dù lượn", example: "I want to paraglide over the cliffs in Rio.", level: "B2" },
      { word: "voluntourism", phonetic: "/ˌvɒl.ən.tʊəˈrɪ.zəm/", pos: "noun", vietnamese: "du lịch tình nguyện", example: "Voluntourism combines travel with helping local communities.", level: "B2" },
      { word: "homestay", phonetic: "/ˈhəʊm.steɪ/", pos: "noun", vietnamese: "ở nhà dân", example: "The homestay experience gave us authentic local food.", level: "B1" },
      { word: "couchsurf", phonetic: "/ˈkaʊtʃ.sɜːf/", pos: "verb", vietnamese: "ngủ nhờ nhà người lạ", example: "Many backpackers couchsurf to save money.", level: "B2" },
      { word: "flashpacker", phonetic: "/ˈflæʃˌpæk.ər/", pos: "noun", vietnamese: "du khách ba lô cao cấp", example: "Flashpackers travel with gadgets and comfort in mind.", level: "B2" }
    ],
    "Transportation": [
      { word: "scooter", phonetic: "/ˈskuː.tər/", pos: "noun", vietnamese: "xe máy nhỏ", example: "Renting a scooter is the best way to explore the island.", level: "B1" },
      { word: "rickshaw", phonetic: "/ˈrɪk.ʃɔː/", pos: "noun", vietnamese: "xe xích lô", example: "We took a rickshaw through the old town.", level: "B1" },
      { word: "cable car", phonetic: "/ˈkeɪ.bəl kɑːr/", pos: "noun", vietnamese: "cáp treo", example: "The cable car ride offers panoramic views.", level: "B1" },
      { word: "tram", phonetic: "/træm/", pos: "noun", vietnamese: "xe điện", example: "The tram system is efficient and eco-friendly.", level: "B1" },
      { word: "helicopter", phonetic: "/ˈhel.ɪˌkɒp.tər/", pos: "noun", vietnamese: "trực thăng", example: "We took a helicopter tour over the Grand Canyon.", level: "B1" },
      { word: "shuttle", phonetic: "/ˈʃʌt.əl/", pos: "noun", vietnamese: "xe đưa đón", example: "The hotel provides a free airport shuttle.", level: "B1" },
      { word: "carpool", phonetic: "/ˈkɑː.puːl/", pos: "verb", vietnamese: "đi chung xe", example: "We carpool to reduce traffic and save gas.", level: "B2" },
      { word: "round-trip", phonetic: "/ˌraʊnd ˈtrɪp/", pos: "adj", vietnamese: "khứ hồi", example: "I bought a round-trip ticket to save money.", level: "B1" },
      { word: "one-way", phonetic: "/ˌwʌn ˈweɪ/", pos: "adj", vietnamese: "một chiều", example: "I only need a one-way ticket to Berlin.", level: "B1" },
      { word: "standby", phonetic: "/ˈstænd.baɪ/", pos: "noun", vietnamese: "chờ chỗ trống", example: "I got a cheap flight on standby.", level: "B2" },
      { word: "red-eye", phonetic: "/ˈred aɪ/", pos: "noun", vietnamese: "chuyến bay đêm", example: "I took a red-eye flight to arrive early.", level: "B2" },
      { word: "layover", phonetic: "/ˈleɪ.əʊ.vər/", pos: "noun", vietnamese: "dừng chân", example: "We had a 3-hour layover in Doha.", level: "B1" }
    ],
    "Accommodation & Shopping": [
      { word: "lobby", phonetic: "/ˈlɒb.i/", pos: "noun", vietnamese: "sảnh khách sạn", example: "Meet me in the hotel lobby at 7 PM.", level: "B1" },
      { word: "balcony", phonetic: "/ˈbæl.kə.ni/", pos: "noun", vietnamese: "ban công", example: "Our room has a balcony with sea view.", level: "B1" },
      { word: "elevator", phonetic: "/ˈel.ɪ.veɪ.tər/", pos: "noun", vietnamese: "thang máy", example: "Take the elevator to the 5th floor.", level: "B1" },
      { word: "laundry", phonetic: "/ˈlɔːn.dri/", pos: "noun", vietnamese: "dịch vụ giặt ủi", example: "The hotel offers same-day laundry service.", level: "B1" },
      { word: "safe", phonetic: "/seɪf/", pos: "noun", vietnamese: "két sắt", example: "Keep your passport in the room safe.", level: "B1" },
      { word: "minibar", phonetic: "/ˈmɪn.i.bɑːr/", pos: "noun", vietnamese: "tủ lạnh nhỏ", example: "Items from the minibar are not free.", level: "B1" },
      { word: "housekeeping", phonetic: "/ˈhaʊsˌkiː.pɪŋ/", pos: "noun", vietnamese: "dịch vụ dọn phòng", example: "Housekeeping comes every morning.", level: "B1" },
      { word: "bazaar", phonetic: "/bəˈzɑːr/", pos: "noun", vietnamese: "chợ truyền thống", example: "The Grand Bazaar in Istanbul is huge.", level: "B1" },
      { word: "outlet", phonetic: "/ˈaʊt.let/", pos: "noun", vietnamese: "cửa hàng giảm giá", example: "We shopped at the designer outlet mall.", level: "B1" },
      { word: "window shopping", phonetic: "/ˈwɪn.dəʊ ˌʃɒp.ɪŋ/", pos: "noun", vietnamese: "ngắm đồ mà không mua", example: "We did some window shopping in Paris.", level: "B1" },
      { word: "impulse buy", phonetic: "/ˈɪm.pʌls baɪ/", pos: "noun", vietnamese: "mua theo cảm tính", example: "That chocolate was an impulse buy.", level: "B2" },
      { word: "haggling", phonetic: "/ˈhæɡ.lɪŋ/", pos: "noun", vietnamese: "mặc cả", example: "Haggling is expected in the night market.", level: "B2" }
    ],
    "Travel Problems": [
      { word: "motion sickness", phonetic: "/ˈməʊ.ʃən ˌsɪk.nəs/", pos: "noun", vietnamese: "say xe", example: "I get motion sickness on boats.", level: "B1" },
      { word: "homesick", phonetic: "/ˈhəʊm.sɪk/", pos: "adj", vietnamese: "nhớ nhà", example: "She felt homesick after two weeks abroad.", level: "B1" },
      { word: "culture shock", phonetic: "/ˈkʌl.tʃər ʃɒk/", pos: "noun", vietnamese: "sốc văn hóa", example: "Culture shock is normal for first-time travelers.", level: "B2" },
      { word: "scam", phonetic: "/skæm/", pos: "noun", vietnamese: "lừa đảo", example: "Beware of the fake taxi scam.", level: "B1" },
      { word: "rip-off", phonetic: "/ˈrɪp ɒf/", pos: "noun", vietnamese: "giá cắt cổ", example: "That souvenir shop is a total rip-off.", level: "B2" },
      { word: "bedbug", phonetic: "/ˈbed.bʌɡ/", pos: "noun", vietnamese: "rệp giường", example: "The hostel had a bedbug problem.", level: "B2" },
      { word: "food poisoning", phonetic: "/fuːd ˈpɔɪ.zən.ɪŋ/", pos: "noun", vietnamese: "ngộ độc thực phẩm", example: "He got food poisoning from street food.", level: "B1" },
      { word: "sunburn", phonetic: "/ˈsʌn.bɜːn/", pos: "noun", vietnamese: "cháy nắng", example: "Wear sunscreen to avoid sunburn.", level: "B1" },
      { word: "mosquito", phonetic: "/məˈskiː.təʊ/", pos: "noun", vietnamese: "muỗi", example: "Mosquitoes are bad near the lake.", level: "B1" },
      { word: "pickpocket", phonetic: "/ˈpɪkˌpɒk.ɪt/", pos: "noun", vietnamese: "kẻ móc túi", example: "Pickpockets target crowded tourist areas.", level: "B2" }
    ]
  },
  "FOOD & RESTAURANTS": {
    "Ordering Food": [
      { word: "rare", phonetic: "/reər/", pos: "adj", vietnamese: "tái (thịt)", example: "I’d like my steak rare, please.", level: "B1" },
      { word: "medium rare", phonetic: "/ˌmiː.di.əm ˈreər/", pos: "adj", vietnamese: "tái vừa", example: "Medium rare is my favorite.", level: "B1" },
      { word: "medium", phonetic: "/ˈmiː.di.əm/", pos: "adj", vietnamese: "vừa chín tới", example: "I’ll have the chicken medium.", level: "B1" },
      { word: "well done", phonetic: "/ˌwel ˈdʌn/", pos: "adj", vietnamese: "chín kỹ", example: "My dad always wants his meat well done.", level: "B1" },
      { word: "grilled", phonetic: "/ɡrɪld/", pos: "adj", vietnamese: "nướng", example: "I prefer grilled fish over fried.", level: "B1" },
      { word: "steamed", phonetic: "/stiːmd/", pos: "adj", vietnamese: "hấp", example: "Steamed vegetables are healthy.", level: "B1" },
      { word: "fried", phonetic: "/fraɪd/", pos: "adj", vietnamese: "chiên", example: "Fried chicken is my guilty pleasure.", level: "B1" },
      { word: "boiled", phonetic: "/bɔɪld/", pos: "adj", vietnamese: "luộc", example: "Boiled eggs for breakfast, please.", level: "B1" },
      { word: "roasted", phonetic: "/ˈrəʊ.stɪd/", pos: "adj", vietnamese: "quay", example: "Roasted pork smells amazing.", level: "B1" },
      { word: "baked", phonetic: "/beɪkt/", pos: "adj", vietnamese: "nướng lò", example: "Baked salmon with herbs is delicious.", level: "B1" },
      { word: "raw", phonetic: "/rɔː/", pos: "adj", vietnamese: "sống", example: "Sushi uses raw fish.", level: "B1" },
      { word: "crispy", phonetic: "/ˈkrɪs.pi/", pos: "adj", vietnamese: "giòn", example: "I love crispy fried chicken skin.", level: "B1" },
      { word: "tender", phonetic: "/ˈten.dər/", pos: "adj", vietnamese: "mềm", example: "The beef was very tender.", level: "B2" },
      { word: "juicy", phonetic: "/ˈdʒuː.si/", pos: "adj", vietnamese: "nhiều nước", example: "This burger is so juicy!", level: "B1" }
    ],
    "Restaurant Features": [
      { word: "cozy", phonetic: "/ˈkəʊ.zi/", pos: "adj", vietnamese: "ấm cúng", example: "This café is small and cozy.", level: "B1" },
      { word: "trendy", phonetic: "/ˈtren.di/", pos: "adj", vietnamese: "thời thượng", example: "The new restaurant is very trendy.", level: "B1" },
      { word: "crowded", phonetic: "/ˈkraʊ.dɪd/", pos: "adj", vietnamese: "đông đúc", example: "The market gets crowded on weekends.", level: "B1" },
      { word: "quiet", phonetic: "/ˈkwaɪ.ət/", pos: "adj", vietnamese: "yên tĩnh", example: "We want a quiet table in the corner.", level: "B1" },
      { word: "view", phonetic: "/vjuː/", pos: "noun", vietnamese: "tầm nhìn", example: "The restaurant has a great sea view.", level: "B1" },
      { word: "terrace", phonetic: "/ˈter.ɪs/", pos: "noun", vietnamese: "sân thượng", example: "Let’s sit on the terrace.", level: "B1" },
      { word: "rooftop", phonetic: "/ˈruːf.tɒp/", pos: "noun", vietnamese: "mái nhà", example: "The rooftop bar is open until midnight.", level: "B1" },
      { word: "self-service", phonetic: "/ˌself ˈsɜː.vɪs/", pos: "adj", vietnamese: "tự phục vụ", example: "This is a self-service restaurant.", level: "B1" },
      { word: "all-you-can-eat", phonetic: "/ˌɔːl ju kən ˈiːt/", pos: "adj", vietnamese: "ăn thả ga", example: "The buffet is all-you-can-eat for $20.", level: "B1" },
      { word: "set menu", phonetic: "/set ˈmen.juː/", pos: "noun", vietnamese: "thực đơn cố định", example: "The set menu includes soup and dessert.", level: "B1" },
      { word: "kids menu", phonetic: "/kɪdz ˈmen.juː/", pos: "noun", vietnamese: "thực đơn trẻ em", example: "Do you have a kids menu?", level: "B1" },
      { word: "happy hour", phonetic: "/ˈhæp.i aʊər/", pos: "noun", vietnamese: "giờ khuyến mãi", example: "Drinks are half price during happy hour.", level: "B2" }
    ],
    "Job & Career (Food Industry)": [
      { word: "barista", phonetic: "/bəˈrɪs.tə/", pos: "noun", vietnamese: "nhân viên pha cà phê", example: "The barista made a perfect latte art.", level: "B1" },
      { word: "baker", phonetic: "/ˈbeɪ.kər/", pos: "noun", vietnamese: "thợ làm bánh", example: "The baker starts work at 4 AM.", level: "B1" },
      { word: "butcher", phonetic: "/ˈbʊtʃ.ər/", pos: "noun", vietnamese: "người bán thịt", example: "Ask the butcher for fresh cuts.", level: "B1" },
      { word: "cashier", phonetic: "/kæˈʃɪər/", pos: "noun", vietnamese: "thu ngân", example: "The cashier scanned my items quickly.", level: "B1" },
      { word: "delivery", phonetic: "/dɪˈlɪv.ər.i/", pos: "noun", vietnamese: "giao hàng", example: "Food delivery is available until 10 PM.", level: "B1" },
      { word: "takeout", phonetic: "/ˈteɪk.aʊt/", pos: "noun", vietnamese: "đồ mang về", example: "I’ll get takeout from the Thai place.", level: "B1" },
      { word: "drive-thru", phonetic: "/ˈdraɪv θruː/", pos: "noun", vietnamese: "dịch vụ xe hơi", example: "Let’s use the drive-thru to save time.", level: "B1" },
      { word: "food truck", phonetic: "/fuːd trʌk/", pos: "noun", vietnamese: "xe tải đồ ăn", example: "The taco food truck is amazing.", level: "B1" },
      { word: "street food", phonetic: "/striːt fuːd/", pos: "noun", vietnamese: "đồ ăn đường phố", example: "Vietnam is famous for street food.", level: "B1" },
      { word: "pop-up", phonetic: "/ˈpɒp ʌp/", pos: "noun", vietnamese: "quán tạm thời", example: "The pop-up restaurant lasts only one month.", level: "B2" }
    ]
  },
  "EDUCATION": {
    "Academic Terms": [
      { word: "notebook", phonetic: "/ˈnəʊt.bʊk/", pos: "noun", vietnamese: "vở", example: "I write all my notes in a notebook.", level: "B1" },
      { word: "textbook", phonetic: "/ˈtekst.bʊk/", pos: "noun", vietnamese: "sách giáo khoa", example: "The textbook costs $80.", level: "B1" },
      { word: "dictionary", phonetic: "/ˈdɪk.ʃən.ər.i/", pos: "noun", vietnamese: "từ điển", example: "Use a dictionary to check spelling.", level: "B1" },
      { word: "library", phonetic: "/ˈlaɪ.brər.i/", pos: "noun", vietnamese: "thư viện", example: "The library is open until 9 PM.", level: "B1" },
      { word: "laboratory", phonetic: "/ləˈbɒr.ə.tər.i/", pos: "noun", vietnamese: "phòng thí nghiệm", example: "We do experiments in the laboratory.", level: "B1" },
      { word: "playground", phonetic: "/ˈpleɪ.ɡraʊnd/", pos: "noun", vietnamese: "sân chơi", example: "Children play in the school playground.", level: "B1" },
      { word: "canteen", phonetic: "/kænˈtiːn/", pos: "noun", vietnamese: "nhà ăn", example: "Lunch is served in the canteen.", level: "B1" },
      { word: "uniform", phonetic: "/ˈjuː.nɪ.fɔːm/", pos: "noun", vietnamese: "đồng phục", example: "Students must wear a uniform.", level: "B1" },
      { word: "principal", phonetic: "/ˈprɪn.sɪ.pəl/", pos: "noun", vietnamese: "hiệu trưởng", example: "The principal gave a speech.", level: "B1" },
      { word: "timetable", phonetic: "/ˈtaɪmˌteɪ.bəl/", pos: "noun", vietnamese: "thời khóa biểu", example: "Check the timetable for class changes.", level: "B1" },
      { word: "break time", phonetic: "/breɪk taɪm/", pos: "noun", vietnamese: "giờ giải lao", example: "We play football during break time.", level: "B1" },
      { word: "assembly", phonetic: "/əˈsem.bli/", pos: "noun", vietnamese: "buổi chào cờ", example: "The assembly starts at 8 AM.", level: "B1" }
    ],
    "Study Requirements": [
      { word: "project", phonetic: "/ˈprɒdʒ.ekt/", pos: "noun", vietnamese: "dự án", example: "We’re working on a group project.", level: "B1" },
      { word: "quiz", phonetic: "/kwɪz/", pos: "noun", vietnamese: "bài kiểm tra nhỏ", example: "We have a quiz every Friday.", level: "B1" },
      { word: "revision", phonetic: "/rɪˈvɪʒ.ən/", pos: "noun", vietnamese: "ôn tập", example: "I need two hours for revision.", level: "B1" },
      { word: "notes", phonetic: "/nəʊts/", pos: "noun", vietnamese: "ghi chép", example: "Take clear notes during the lecture.", level: "B1" },
      { word: "summary", phonetic: "/ˈsʌm.ər.i/", pos: "noun", vietnamese: "tóm tắt", example: "Write a summary of the chapter.", level: "B1" },
      { word: "deadline", phonetic: "/ˈded.laɪn/", pos: "noun", vietnamese: "hạn chót", example: "The deadline is next Monday.", level: "B1" },
      { word: "extension", phonetic: "/ɪkˈsten.ʃən/", pos: "noun", vietnamese: "gia hạn", example: "Can I get an extension for the essay?", level: "B2" },
      { word: "oral exam", phonetic: "/ˈɔː.rəl ɪɡˈzæm/", pos: "noun", vietnamese: "thi nói", example: "The oral exam is worth 30%.", level: "B1" },
      { word: "multiple choice", phonetic: "/ˌmʌl.tɪ.pəl ˈtʃɔɪs/", pos: "adj", vietnamese: "trắc nghiệm", example: "The test is multiple choice.", level: "B1" },
      { word: "true or false", phonetic: "/truː ɔːr fɔːls/", pos: "phrase", vietnamese: "đúng sai", example: "Answer true or false.", level: "B1" }
    ],
    "Performance & Learning": [
      { word: "improve", phonetic: "/ɪmˈpruːv/", pos: "verb", vietnamese: "cải thiện", example: "I want to improve my English.", level: "B1" },
      { word: "practice", phonetic: "/ˈpræk.tɪs/", pos: "verb", vietnamese: "luyện tập", example: "Practice makes perfect.", level: "B1" },
      { word: "mistake", phonetic: "/mɪˈsteɪk/", pos: "noun", vietnamese: "lỗi", example: "We learn from our mistakes.", level: "B1" },
      { word: "effort", phonetic: "/ˈef.ət/", pos: "noun", vietnamese: "nỗ lực", example: "You need to make more effort.", level: "B1" },
      { word: "skill", phonetic: "/skɪl/", pos: "noun", vietnamese: "kỹ năng", example: "Reading is an important skill.", level: "B1" },
      { word: "talent", phonetic: "/ˈtæl.ənt/", pos: "noun", vietnamese: "tài năng", example: "She has a talent for music.", level: "B1" },
      { word: "weak", phonetic: "/wiːk/", pos: "adj", vietnamese: "yếu", example: "Math is my weak subject.", level: "B1" },
      { word: "strong", phonetic: "/strɒŋ/", pos: "adj", vietnamese: "mạnh", example: "English is my strong subject.", level: "B1" },
      { word: "confident", phonetic: "/ˈkɒn.fɪ.dənt/", pos: "adj", vietnamese: "tự tin", example: "I feel confident about the exam.", level: "B1" },
      { word: "nervous", phonetic: "/ˈnɜː.vəs/", pos: "adj", vietnamese: "lo lắng", example: "I get nervous before speaking.", level: "B1" }
    ]
  },
  "SHOPPING & CUSTOMER SERVICE": {
    "Returns & Refunds": [
      { word: "fitting room", phonetic: "/ˈfɪt.ɪŋ ruːm/", pos: "noun", vietnamese: "phòng thử đồ", example: "Can I use the fitting room?", level: "B1" },
      { word: "try on", phonetic: "/traɪ ɒn/", pos: "verb", vietnamese: "thử đồ", example: "Can I try on this dress?", level: "B1" },
      { word: "fit", phonetic: "/fɪt/", pos: "verb", vietnamese: "vừa", example: "These shoes fit perfectly.", level: "B1" },
      { word: "tight", phonetic: "/taɪt/", pos: "adj", vietnamese: "chật", example: "This shirt is too tight.", level: "B1" },
      { word: "loose", phonetic: "/luːs/", pos: "adj", vietnamese: "rộng", example: "These pants are too loose.", level: "B1" },
      { word: "medium", phonetic: "/ˈmiː.di.əm/", pos: "noun", vietnamese: "cỡ vừa", example: "I wear medium size.", level: "B1" },
      { word: "refundable", phonetic: "/rɪˈfʌn.də.bəl/", pos: "adj", vietnamese: "có thể hoàn tiền", example: "Tickets are non-refundable.", level: "B2" },
      { word: "store credit", phonetic: "/stɔːr ˈkred.ɪt/", pos: "noun", vietnamese: "tín dụng cửa hàng", example: "They gave me store credit instead of cash.", level: "B2" }
    ],
    "Problems & Solutions": [
      { word: "out of stock", phonetic: "/ˌaʊt əv ˈstɒk/", pos: "phrase", vietnamese: "hết hàng", example: "Sorry, that item is out of stock.", level: "B1" },
      { word: "sold out", phonetic: "/ˌsəʊld ˈaʊt/", pos: "adj", vietnamese: "bán hết", example: "The concert is sold out.", level: "B1" },
      { word: "damaged", phonetic: "/ˈdæm.ɪdʒd/", pos: "adj", vietnamese: "hỏng", example: "This box is damaged.", level: "B1" },
      { word: "faulty", phonetic: "/ˈfɔːl.ti/", pos: "adj", vietnamese: "lỗi kỹ thuật", example: "The phone is faulty.", level: "B2" },
      { word: "replace", phonetic: "/rɪˈpleɪs/", pos: "verb", vietnamese: "thay thế", example: "Can you replace this item?", level: "B1" },
      { word: "apologize", phonetic: "/əˈpɒl.ə.dʒaɪz/", pos: "verb", vietnamese: "xin lỗi", example: "We apologize for the delay.", level: "B1" },
      { word: "complain", phonetic: "/kəmˈpleɪn/", pos: "verb", vietnamese: "phàn nàn", example: "I want to complain about the service.", level: "B1" }
    ],
    "Service & Quality": [
      { word: "helpful", phonetic: "/ˈhelp.fəl/", pos: "adj", vietnamese: "hữu ích", example: "The staff is very helpful.", level: "B1" },
      { word: "friendly", phonetic: "/ˈfrend.li/", pos: "adj", vietnamese: "thân thiện", example: "The shop assistant is friendly.", level: "B1" },
      { word: "rude", phonetic: "/ruːd/", pos: "adj", vietnamese: "thô lỗ", example: "The cashier was rude to me.", level: "B1" },
      { word: "variety", phonetic: "/vəˈraɪ.ə.ti/", pos: "noun", vietnamese: "đa dạng", example: "This store has a good variety of products.", level: "B1" },
      { word: "range", phonetic: "/reɪndʒ/", pos: "noun", vietnamese: "phạm vi", example: "They offer a wide range of sizes.", level: "B1" },
      { word: "affordable", phonetic: "/əˈfɔː.də.bəl/", pos: "adj", vietnamese: "hợp túi tiền", example: "The prices are affordable.", level: "B1" },
      { word: "overpriced", phonetic: "/ˌəʊ.vəˈpraɪst/", pos: "adj", vietnamese: "đắt đỏ", example: "This café is overpriced.", level: "B2" },
      { word: "bargain", phonetic: "/ˈbɑː.ɡɪn/", pos: "noun", vietnamese: "món hời", example: "I got these shoes at a bargain.", level: "B1" }
    ],
    "Customer Relations": [
      { word: "regular", phonetic: "/ˈreɡ.jə.lər/", pos: "adj", vietnamese: "thường xuyên", example: "He’s a regular customer here.", level: "B1" },
      { word: "recommend", phonetic: "/ˌrek.əˈmend/", pos: "verb", vietnamese: "giới thiệu", example: "Can you recommend a good phone?", level: "B1" },
      { word: "review", phonetic: "/rɪˈvjuː/", pos: "noun", vietnamese: "đánh giá", example: "I left a five-star review.", level: "B1" },
      { word: "rating", phonetic: "/ˈreɪ.tɪŋ/", pos: "noun", vietnamese: "xếp hạng", example: "The hotel has a 4.8 rating.", level: "B1" },
      { word: "loyal", phonetic: "/ˈlɔɪ.əl/", pos: "adj", vietnamese: "trung thành", example: "We reward loyal customers.", level: "B1" },
      { word: "VIP", phonetic: "/ˌviː aɪ ˈpiː/", pos: "noun", vietnamese: "khách VIP", example: "VIP members get free shipping.", level: "B1" }
    ]
  },
  "BUSINESS & WORKPLACE": {
    "Company Operations": [
      { word: "branch", phonetic: "/brɑːntʃ/", pos: "noun", vietnamese: "chi nhánh", example: "We’re opening a new branch in Da Nang.", level: "B1" },
      { word: "department", phonetic: "/dɪˈpɑːt.mənt/", pos: "noun", vietnamese: "phòng ban", example: "I work in the marketing department.", level: "B1" },
      { word: "staff", phonetic: "/stɑːf/", pos: "noun", vietnamese: "nhân viên", example: "The staff meeting is at 9 AM.", level: "B1" },
      { word: "salary", phonetic: "/ˈsæl.ər.i/", pos: "noun", vietnamese: "lương", example: "My salary is paid monthly.", level: "B1" },
      { word: "contract", phonetic: "/ˈkɒn.trækt/", pos: "noun", vietnamese: "hợp đồng", example: "Sign the contract before starting.", level: "B1" },
      { word: "client", phonetic: "/ˈklaɪ.ənt/", pos: "noun", vietnamese: "khách hàng", example: "We have a meeting with the client.", level: "B1" },
      { word: "deadline", phonetic: "/ˈded.laɪn/", pos: "noun", vietnamese: "hạn chót", example: "The project deadline is Friday.", level: "B1" },
      { word: "overtime", phonetic: "/ˈəʊ.və.taɪm/", pos: "noun", vietnamese: "tăng ca", example: "I worked overtime last week.", level: "B1" },
      { word: "remote", phonetic: "/rɪˈməʊt/", pos: "adj", vietnamese: "từ xa", example: "I work remote three days a week.", level: "B1" },
      { word: "flexible", phonetic: "/ˈflek.sə.bəl/", pos: "adj", vietnamese: "linh hoạt", example: "We offer flexible working hours.", level: "B1" }
    ],
    "Performance & Reviews": [
      { word: "raise", phonetic: "/reɪz/", pos: "noun", vietnamese: "tăng lương", example: "I got a raise after one year.", level: "B1" },
      { word: "bonus", phonetic: "/ˈbəʊ.nəs/", pos: "noun", vietnamese: "thưởng", example: "We get a year-end bonus.", level: "B1" },
      { word: "target", phonetic: "/ˈtɑː.ɡɪt/", pos: "noun", vietnamese: "mục tiêu", example: "We hit our sales target.", level: "B1" },
      { word: "feedback", phonetic: "/ˈfiːd.bæk/", pos: "noun", vietnamese: "phản hồi", example: "I need feedback on my presentation.", level: "B1" },
      { word: "strength", phonetic: "/streŋθ/", pos: "noun", vietnamese: "điểm mạnh", example: "Teamwork is my strength.", level: "B1" },
      { word: "weakness", phonetic: "/ˈwiːk.nəs/", pos: "noun", vietnamese: "điểm yếu", example: "Public speaking is my weakness.", level: "B1" },
      { word: "skill", phonetic: "/skɪl/", pos: "noun", vietnamese: "kỹ năng", example: "Communication is a key skill.", level: "B1" },
      { word: "training", phonetic: "/ˈtreɪ.nɪŋ/", pos: "noun", vietnamese: "đào tạo", example: "New staff get two weeks of training.", level: "B1" }
    ],
    "Materials & Products": [
      { word: "sample", phonetic: "/ˈsɑːm.pəl/", pos: "noun", vietnamese: "mẫu thử", example: "Can I have a free sample?", level: "B1" },
      { word: "catalog", phonetic: "/ˈkæt.ə.lɒɡ/", pos: "noun", vietnamese: "danh mục", example: "Check the catalog for new items.", level: "B1" },
      { word: "brochure", phonetic: "/ˈbrəʊ.ʃər/", pos: "noun", vietnamese: "tài liệu giới thiệu", example: "Take a brochure for more information.", level: "B1" },
      { word: "label", phonetic: "/ˈleɪ.bəl/", pos: "noun", vietnamese: "nhãn", example: "Check the label for washing instructions.", level: "B1" },
      { word: "barcode", phonetic: "/ˈbɑː.kəʊd/", pos: "noun", vietnamese: "mã vạch", example: "Scan the barcode at checkout.", level: "B1" },
      { word: "packaging", phonetic: "/ˈpæk.ɪ.dʒɪŋ/", pos: "noun", vietnamese: "bao bì", example: "The packaging is eco-friendly.", level: "B1" }
    ],
    "Work Environment": [
      { word: "meeting room", phonetic: "/ˈmiː.tɪŋ ruːm/", pos: "noun", vietnamese: "phòng họp", example: "Book the meeting room for 2 PM.", level: "B1" },
      { word: "printer", phonetic: "/ˈprɪn.tər/", pos: "noun", vietnamese: "máy in", example: "The printer is out of ink.", level: "B1" },
      { word: "copier", phonetic: "/ˈkɒp.i.ər/", pos: "noun", vietnamese: "máy photocopy", example: "Use the copier on the second floor.", level: "B1" },
      { word: "Wi-Fi", phonetic: "/ˈwaɪ.faɪ/", pos: "noun", vietnamese: "mạng không dây", example: "The office Wi-Fi is fast.", level: "B1" },
      { word: "air conditioning", phonetic: "/ˌeə kənˈdɪʃ.ən.ɪŋ/", pos: "noun", vietnamese: "máy lạnh", example: "The air conditioning is too cold.", level: "B1" },
      { word: "break room", phonetic: "/breɪk ruːm/", pos: "noun", vietnamese: "phòng nghỉ", example: "Let’s have coffee in the break room.", level: "B1" }
    ],
    "Projects & Planning": [
      { word: "schedule", phonetic: "/ˈʃed.juːl/", pos: "noun", vietnamese: "lịch trình", example: "Check the schedule for updates.", level: "B1" },
      { word: "task", phonetic: "/tɑːsk/", pos: "noun", vietnamese: "nhiệm vụ", example: "Finish this task by Friday.", level: "B1" },
      { word: "priority", phonetic: "/praɪˈɒr.ə.ti/", pos: "noun", vietnamese: "ưu tiên", example: "This is top priority.", level: "B1" },
      { word: "update", phonetic: "/ʌpˈdeɪt/", pos: "noun", vietnamese: "cập nhật", example: "Send me a project update.", level: "B1" },
      { word: "progress", phonetic: "/ˈprəʊ.ɡres/", pos: "noun", vietnamese: "tiến độ", example: "We’re making good progress.", level: "B1" }
    ]
  },
  "COMMUNICATION": {
    "Product Launch & Marketing": [
      { word: "advertisement", phonetic: "/ədˈvɜː.tɪs.mənt/", pos: "noun", vietnamese: "quảng cáo", example: "I saw your advertisement online.", level: "B1" },
      { word: "slogan", phonetic: "/ˈsləʊ.ɡən/", pos: "noun", vietnamese: "khẩu hiệu", example: "Just Do It is a famous slogan.", level: "B1" },
      { word: "poster", phonetic: "/ˈpəʊ.stər/", pos: "noun", vietnamese: "áp phích", example: "Put the poster on the wall.", level: "B1" },
      { word: "commercial", phonetic: "/kəˈmɜː.ʃəl/", pos: "noun", vietnamese: "quảng cáo TV", example: "The commercial was funny.", level: "B1" },
      { word: "influencer", phonetic: "/ˈɪn.flu.ən.sər/", pos: "noun", vietnamese: "người ảnh hưởng", example: "We hired a social media influencer.", level: "B1" },
      { word: "viral", phonetic: "/ˈvaɪ.rəl/", pos: "adj", vietnamese: "lan truyền", example: "The video went viral overnight.", level: "B1" }
    ],
    "Team Collaboration": [
      { word: "discuss", phonetic: "/dɪˈskʌs/", pos: "verb", vietnamese: "thảo luận", example: "Let’s discuss the plan.", level: "B1" },
      { word: "suggest", phonetic: "/səˈdʒest/", pos: "verb", vietnamese: "đề xuất", example: "I suggest we meet at 10 AM.", level: "B1" },
       { word: "disagree", phonetic: "/ˌdɪs.əˈɡriː/", pos: "verb", vietnamese: "không đồng ý", example: "I disagree with that decision.", level: "B1" },
      { word: "opinion", phonetic: "/əˈpɪn.jən/", pos: "noun", vietnamese: "ý kiến", example: "What’s your opinion?", level: "B1" },
      { word: "decision", phonetic: "/dɪˈsɪʒ.ən/", pos: "noun", vietnamese: "quyết định", example: "We made a final decision.", level: "B1" }
    ],
    "Design & Materials": [
      { word: "pattern", phonetic: "/ˈpæt.ən/", pos: "noun", vietnamese: "hoa văn", example: "I like the floral pattern.", level: "B1" },
      { word: "plain", phonetic: "/pleɪn/", pos: "adj", vietnamese: "trơn", example: "I prefer plain colors.", level: "B1" },
      { word: "striped", phonetic: "/straɪpt/", pos: "adj", vietnamese: "sọc", example: "He wore a striped shirt.", level: "B1" },
      { word: "checked", phonetic: "/tʃekt/", pos: "adj", vietnamese: "kẻ caro", example: "She has a checked skirt.", level: "B1" },
      { word: "leather", phonetic: "/ˈleð.ər/", pos: "noun", vietnamese: "da", example: "This bag is made of leather.", level: "B1" },
      { word: "cotton", phonetic: "/ˈkɒt.ən/", pos: "noun", vietnamese: "vải cotton", example: "I wear cotton in summer.", level: "B1" }
    ],
    "Feedback & Adjustments": [
      { word: "change", phonetic: "/tʃeɪndʒ/", pos: "verb", vietnamese: "thay đổi", example: "We need to change the design.", level: "B1" },
      { word: "fix", phonetic: "/fɪks/", pos: "verb", vietnamese: "sửa", example: "Can you fix this error?", level: "B1" },
      { word: "update", phonetic: "/ʌpˈdeɪt/", pos: "verb", vietnamese: "cập nhật", example: "Please update the file.", level: "B1" },
      { word: "correct", phonetic: "/kəˈrekt/", pos: "verb", vietnamese: "sửa lỗi", example: "Correct the spelling mistakes.", level: "B1" },
      { word: "improve", phonetic: "/ɪmˈpruːv/", pos: "verb", vietnamese: "cải thiện", example: "How can we improve this?", level: "B1" }
    ],
    "Events & Presentations": [
      { word: "audience", phonetic: "/ˈɔː.di.əns/", pos: "noun", vietnamese: "khán giả", example: "The audience clapped loudly.", level: "B1" },
      { word: "slide", phonetic: "/slaɪd/", pos: "noun", vietnamese: "trang chiếu", example: "Next slide, please.", level: "B1" },
      { word: "projector", phonetic: "/prəˈdʒek.tər/", pos: "noun", vietnamese: "máy chiếu", example: "The projector isn’t working.", level: "B1" },
      { word: "speech", phonetic: "/spiːtʃ/", pos: "noun", vietnamese: "bài phát biểu", example: "She gave a great speech.", level: "B1" },
      { word: "host", phonetic: "/həʊst/", pos: "verb", vietnamese: "dẫn chương trình", example: "He will host the event.", level: "B1" }
    ]
  },
  "AUDIO & VOICE SERVICES": {
    "Voice Recording": [
      { word: "headphones", phonetic: "/ˈhed.fəʊnz/", pos: "noun", vietnamese: "tai nghe", example: "I use headphones to record voice.", level: "B1" },
      { word: "speaker", phonetic: "/ˈspiː.kər/", pos: "noun", vietnamese: "loa", example: "The speaker volume is low.", level: "B1" },
      { word: "volume", phonetic: "/ˈvɒl.juːm/", pos: "noun", vietnamese: "âm lượng", example: "Turn up the volume.", level: "B1" },
      { word: "pause", phonetic: "/pɔːz/", pos: "verb", vietnamese: "tạm dừng", example: "Pause the recording here.", level: "B1" },
      { word: "record", phonetic: "/rɪˈkɔːd/", pos: "verb", vietnamese: "ghi âm", example: "Let me record your voice.", level: "B1" }
    ],
    "Service Features": [
      { word: "clear", phonetic: "/klɪər/", pos: "adj", vietnamese: "rõ ràng", example: "The sound is very clear.", level: "B1" },
      { word: "loud", phonetic: "/laʊd/", pos: "adj", vietnamese: "to", example: "The music is too loud.", level: "B1" },
      { word: "quiet", phonetic: "/ˈkwaɪ.ət/", pos: "adj", vietnamese: "nhỏ", example: "Keep your voice quiet.", level: "B1" },
      { word: "fast", phonetic: "/fɑːst/", pos: "adj", vietnamese: "nhanh", example: "Speak fast or slow?", level: "B1" },
      { word: "slow", phonetic: "/sləʊ/", pos: "adj", vietnamese: "chậm", example: "Please speak slow.", level: "B1" }
    ],
    "Audio Production": [
      { word: "edit", phonetic: "/ˈed.ɪt/", pos: "verb", vietnamese: "chỉnh sửa", example: "I will edit the audio.", level: "B1" },
      { word: "cut", phonetic: "/kʌt/", pos: "verb", vietnamese: "cắt", example: "Cut this part out.", level: "B1" },
      { word: "add", phonetic: "/æd/", pos: "verb", vietnamese: "thêm", example: "Add music at the beginning.", level: "B1" },
      { word: "save", phonetic: "/seɪv/", pos: "verb", vietnamese: "lưu", example: "Save the file as MP3.", level: "B1" },
      { word: "export", phonetic: "/ɪkˈspɔːt/", pos: "verb", vietnamese: "xuất file", example: "Export in high quality.", level: "B2" }
    ],
    "Client Communication": [
      { word: "message", phonetic: "/ˈmes.ɪdʒ/", pos: "noun", vietnamese: "tin nhắn", example: "I sent you a message.", level: "B1" },
      { word: "reply", phonetic: "/rɪˈplaɪ/", pos: "verb", vietnamese: "trả lời", example: "Please reply soon.", level: "B1" },
      { word: "attachment", phonetic: "/əˈtætʃ.mənt/", pos: "noun", vietnamese: "tệp đính kèm", example: "Check the attachment.", level: "B1" },
      { word: "subject", phonetic: "/ˈsʌb.dʒekt/", pos: "noun", vietnamese: "chủ đề", example: "Write a clear subject.", level: "B1" },
      { word: "forward", phonetic: "/ˈfɔː.wəd/", pos: "verb", vietnamese: "chuyển tiếp", example: "Forward this email to the team.", level: "B1" }
    ]
  },
  "TEXT MESSAGING": {
     
    "Expressing Agreement": [
      { word: "cool", phonetic: "/kuːl/", pos: "adj", vietnamese: "tuyệt", example: "Cool, see you then!", level: "B1" },
      { word: "awesome", phonetic: "/ˈɔː.səm/", pos: "adj", vietnamese: "tuyệt vời", example: "That’s awesome!", level: "B1" },
      { word: "great", phonetic: "/ɡreɪt/", pos: "adj", vietnamese: "tuyệt", example: "Great idea!", level: "B1" },
      { word: "perfect", phonetic: "/ˈpɜː.fekt/", pos: "adj", vietnamese: "hoàn hảo", example: "Perfect, let’s do it.", level: "B1" },
      { word: "sounds good", phonetic: "/saʊndz ɡʊd/", pos: "phrase", vietnamese: "nghe hay đấy", example: "Sounds good to me.", level: "B1" },
      { word: "deal", phonetic: "/diːl/", pos: "noun", vietnamese: "thỏa thuận", example: "Deal! See you at 7.", level: "B1" }
    ]
  }
};
</file>

<file path="src/data/vocabularyHelpers.js">
// vocabularyHelpers.js - Helper Functions for Vocabulary Data

import VOCABULARY_DATA from './vocabularyData';

// Get vocabulary by level
export const getVocabularyByLevel = (level) => {
  const levelLower = level.toLowerCase();
  return VOCABULARY_DATA[levelLower] || VOCABULARY_DATA.beginner;
};

// Search vocabulary across all levels
export const searchVocabulary = (query) => {
  const results = [];
  Object.values(VOCABULARY_DATA).forEach(levelData => {
    Object.values(levelData.categories).forEach(category => {
      const filtered = category.words.filter(word => 
        word.word.toLowerCase().includes(query.toLowerCase()) ||
        word.definition.toLowerCase().includes(query.toLowerCase()) ||
        word.vietnamese.toLowerCase().includes(query.toLowerCase()) ||
        word.alternatives.some(alt => alt.toLowerCase().includes(query.toLowerCase()))
      );
      results.push(...filtered);
    });
  });
  return results;
};

// Get random word from specific level
export const getRandomWord = (level = 'beginner') => {
  const levelData = getVocabularyByLevel(level);
  const allWords = [];
  Object.values(levelData.categories).forEach(category => {
    allWords.push(...category.words);
  });
  return allWords[Math.floor(Math.random() * allWords.length)];
};

// Get all words across all levels
export const getAllWords = () => {
  const allWords = [];
  Object.values(VOCABULARY_DATA).forEach(levelData => {
    Object.values(levelData.categories).forEach(category => {
      allWords.push(...category.words);
    });
  });
  return allWords;
};

// Get exam vocabulary statistics
export const getExamVocabulary = () => {
  let totalWords = 0;
  Object.values(VOCABULARY_DATA).forEach(levelData => {
    Object.values(levelData.categories).forEach(category => {
      totalWords += category.words.length;
    });
  });

  return {
    totalWords: totalWords,
    examTopics: ['Travel', 'Business', 'Communication', 'Analysis', 'Marketing', 'Professional', 'Technical'],
  };
};

// Create flashcards from vocabulary
export const createFlashcards = (level) => {
  const levelData = getVocabularyByLevel(level);
  const flashcards = [];
  
  Object.values(levelData.categories).forEach(category => {
    category.words.forEach(word => {
      flashcards.push({
        id: word.id,
        front: word.word,
        back: word.definition,
        pronunciation: word.pronunciation,
        example: word.example,
        vietnamese: word.vietnamese,
        category: category.title,
        level: level,
      });
    });
  });

  return flashcards;
};

// Get vocabulary by specific category
export const getVocabularyByCategory = (category, level = 'beginner') => {
  const levelData = getVocabularyByLevel(level);
  return levelData.categories[category]?.words || [];
};

// Create quiz with random questions
export const createQuiz = (level, count = 10) => {
  const allWords = [];
  const levelData = getVocabularyByLevel(level);
  
  Object.values(levelData.categories).forEach(category => {
    allWords.push(...category.words);
  });

  const shuffled = [...allWords].sort(() => Math.random() - 0.5);
  const selected = shuffled.slice(0, Math.min(count, allWords.length));

  return selected.map(word => ({
    id: word.id,
    word: word.word,
    options: [
      word.definition,
      word.alternatives[0],
      word.alternatives[1],
      word.alternatives[2],
    ].sort(() => Math.random() - 0.5),
    correct: word.definition,
    pronunciation: word.pronunciation,
    vietnamese: word.vietnamese,
    example: word.example,
  }));
};

// Get category statistics
export const getCategoryStats = (level = 'beginner') => {
  const levelData = getVocabularyByLevel(level);
  const stats = {};
  
  Object.entries(levelData.categories).forEach(([key, category]) => {
    stats[key] = {
      name: category.title,
      count: category.words.length,
      description: category.description,
    };
  });

  return stats;
};

// Get words by difficulty/level
export const getWordsByDifficulty = (level) => {
  const words = [];
  const levelData = getVocabularyByLevel(level);
  
  Object.values(levelData.categories).forEach(category => {
    words.push(...category.words);
  });

  return {
    level: level,
    totalWords: words.length,
    words: words,
  };
};

// Calculate learning progress
export const calculateProgress = (completedWords, vocabularyData) => {
  if (!vocabularyData || !vocabularyData.categories) return 0;
  
  let totalWords = 0;
  Object.values(vocabularyData.categories).forEach(category => {
    totalWords += category.words.length;
  });
  
  return totalWords > 0 ? Math.round((completedWords.length / totalWords) * 100) : 0;
};

// Handle flashcard navigation
export const handleFlashcardNav = (direction, currentIndex, flashcards) => {
  if (direction === 'prev') {
    return Math.max(0, currentIndex - 1);
  }
  return Math.min(flashcards.length - 1, currentIndex + 1);
};

// Get words by category with stats
export const getWordsWithStats = (level) => {
  const levelData = getVocabularyByLevel(level);
  const categoriesWithStats = {};
  
  Object.entries(levelData.categories).forEach(([key, category]) => {
    categoriesWithStats[key] = {
      id: category.id,
      title: category.title,
      description: category.description,
      words: category.words,
      wordCount: category.words.length,
    };
  });
  
  return categoriesWithStats;
};

// Filter words by difficulty range
export const filterWordsByRange = (words, minLength, maxLength) => {
  return words.filter(word => 
    word.word.length >= minLength && word.word.length <= maxLength
  );
};

// Get most common words
export const getMostCommonWords = (level, count = 20) => {
  const allWords = [];
  const levelData = getVocabularyByLevel(level);
  
  Object.values(levelData.categories).forEach(category => {
    allWords.push(...category.words);
  });

  return allWords.slice(0, count);
};

// Export all helpers as object for convenience
export const vocabHelpers = {
  getVocabularyByLevel,
  searchVocabulary,
  getRandomWord,
  getAllWords,
  getExamVocabulary,
  createFlashcards,
  getVocabularyByCategory,
  createQuiz,
  getCategoryStats,
  getWordsByDifficulty,
  calculateProgress,
  handleFlashcardNav,
  getWordsWithStats,
  filterWordsByRange,
  getMostCommonWords,
};
</file>

<file path="src/dataconnect-generated/.guides/config.json">
{
  "description": "A set of guides for interacting with the generated firebase dataconnect sdk",
  "mcpServers": {
    "firebase": {
      "command": "npx",
      "args": ["-y", "firebase-tools@latest", "experimental:mcp"]
    }
  }
}
</file>

<file path="src/dataconnect-generated/.guides/setup.md">
# Setup

If the user hasn't already installed the SDK, always run the user's node package manager of choice, and install the package in the directory ../package.json.
For more information on where the library is located, look at the connector.yaml file.

```ts
import { initializeApp } from 'firebase/app';

initializeApp({
  // fill in your project config here using the values from your Firebase project or from the `firebase_get_sdk_config` tool from the Firebase MCP server.
});
```

Then, you can run the SDK as needed.
```ts
import { ... } from '@dataconnect/generated';
```




## React
### Setup

The user should make sure to install the `@tanstack/react-query` package, along with `@tanstack-query-firebase/react` and `firebase`.

Then, they should initialize Firebase:
```ts
import { initializeApp } from 'firebase/app';
initializeApp(firebaseConfig); /* your config here. To generate this, you can use the `firebase_sdk_config` MCP tool */
```

Then, they should add a `QueryClientProvider` to their root of their application.

Here's an example:

```ts
import { initializeApp } from 'firebase/app';
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";

const firebaseConfig = {
  /* your config here. To generate this, you can use the `firebase_sdk_config` MCP tool */
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);

// Create a TanStack Query client instance
const queryClient = new QueryClient();

function App() {
  return (
    // Provide the client to your App
    <QueryClientProvider client={queryClient}>
      <MyApplication />
    </QueryClientProvider>
  )
}

render(<App />, document.getElementById('root'));
```
</file>

<file path="src/dataconnect-generated/.guides/usage.md">
# Basic Usage

Always prioritize using a supported framework over using the generated SDK
directly. Supported frameworks simplify the developer experience and help ensure
best practices are followed.




### React
For each operation, there is a wrapper hook that can be used to call the operation.

Here are all of the hooks that get generated:
```ts
import { useCreateNewList, useGetMyLists, useAddMovieToList, useGetMoviesInList } from '@dataconnect/generated/react';
// The types of these hooks are available in react/index.d.ts

const { data, isPending, isSuccess, isError, error } = useCreateNewList(createNewListVars);

const { data, isPending, isSuccess, isError, error } = useGetMyLists();

const { data, isPending, isSuccess, isError, error } = useAddMovieToList(addMovieToListVars);

const { data, isPending, isSuccess, isError, error } = useGetMoviesInList(getMoviesInListVars);

```

Here's an example from a different generated SDK:

```ts
import { useListAllMovies } from '@dataconnect/generated/react';

function MyComponent() {
  const { isLoading, data, error } = useListAllMovies();
  if(isLoading) {
    return <div>Loading...</div>
  }
  if(error) {
    return <div> An Error Occurred: {error} </div>
  }
}

// App.tsx
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import MyComponent from './my-component';

function App() {
  const queryClient = new QueryClient();
  return <QueryClientProvider client={queryClient}>
    <MyComponent />
  </QueryClientProvider>
}
```



## Advanced Usage
If a user is not using a supported framework, they can use the generated SDK directly.

Here's an example of how to use it with the first 5 operations:

```js
import { createNewList, getMyLists, addMovieToList, getMoviesInList } from '@dataconnect/generated';


// Operation CreateNewList:  For variables, look at type CreateNewListVars in ../index.d.ts
const { data } = await CreateNewList(dataConnect, createNewListVars);

// Operation GetMyLists: 
const { data } = await GetMyLists(dataConnect);

// Operation AddMovieToList:  For variables, look at type AddMovieToListVars in ../index.d.ts
const { data } = await AddMovieToList(dataConnect, addMovieToListVars);

// Operation GetMoviesInList:  For variables, look at type GetMoviesInListVars in ../index.d.ts
const { data } = await GetMoviesInList(dataConnect, getMoviesInListVars);


```
</file>

<file path="src/dataconnect-generated/esm/index.esm.js">
import { queryRef, executeQuery, mutationRef, executeMutation, validateArgs } from 'firebase/data-connect';

export const connectorConfig = {
  connector: 'example',
  service: 'listening',
  location: 'us-east4'
};

export const createNewListRef = (dcOrVars, vars) => {
  const { dc: dcInstance, vars: inputVars} = validateArgs(connectorConfig, dcOrVars, vars, true);
  dcInstance._useGeneratedSdk();
  return mutationRef(dcInstance, 'CreateNewList', inputVars);
}
createNewListRef.operationName = 'CreateNewList';

export function createNewList(dcOrVars, vars) {
  return executeMutation(createNewListRef(dcOrVars, vars));
}

export const getMyListsRef = (dc) => {
  const { dc: dcInstance} = validateArgs(connectorConfig, dc, undefined);
  dcInstance._useGeneratedSdk();
  return queryRef(dcInstance, 'GetMyLists');
}
getMyListsRef.operationName = 'GetMyLists';

export function getMyLists(dc) {
  return executeQuery(getMyListsRef(dc));
}

export const addMovieToListRef = (dcOrVars, vars) => {
  const { dc: dcInstance, vars: inputVars} = validateArgs(connectorConfig, dcOrVars, vars, true);
  dcInstance._useGeneratedSdk();
  return mutationRef(dcInstance, 'AddMovieToList', inputVars);
}
addMovieToListRef.operationName = 'AddMovieToList';

export function addMovieToList(dcOrVars, vars) {
  return executeMutation(addMovieToListRef(dcOrVars, vars));
}

export const getMoviesInListRef = (dcOrVars, vars) => {
  const { dc: dcInstance, vars: inputVars} = validateArgs(connectorConfig, dcOrVars, vars, true);
  dcInstance._useGeneratedSdk();
  return queryRef(dcInstance, 'GetMoviesInList', inputVars);
}
getMoviesInListRef.operationName = 'GetMoviesInList';

export function getMoviesInList(dcOrVars, vars) {
  return executeQuery(getMoviesInListRef(dcOrVars, vars));
}
</file>

<file path="src/dataconnect-generated/esm/package.json">
{"type":"module"}
</file>

<file path="src/dataconnect-generated/index.cjs.js">
const { queryRef, executeQuery, mutationRef, executeMutation, validateArgs } = require('firebase/data-connect');

const connectorConfig = {
  connector: 'example',
  service: 'listening',
  location: 'us-east4'
};
exports.connectorConfig = connectorConfig;

const createNewListRef = (dcOrVars, vars) => {
  const { dc: dcInstance, vars: inputVars} = validateArgs(connectorConfig, dcOrVars, vars, true);
  dcInstance._useGeneratedSdk();
  return mutationRef(dcInstance, 'CreateNewList', inputVars);
}
createNewListRef.operationName = 'CreateNewList';
exports.createNewListRef = createNewListRef;

exports.createNewList = function createNewList(dcOrVars, vars) {
  return executeMutation(createNewListRef(dcOrVars, vars));
};

const getMyListsRef = (dc) => {
  const { dc: dcInstance} = validateArgs(connectorConfig, dc, undefined);
  dcInstance._useGeneratedSdk();
  return queryRef(dcInstance, 'GetMyLists');
}
getMyListsRef.operationName = 'GetMyLists';
exports.getMyListsRef = getMyListsRef;

exports.getMyLists = function getMyLists(dc) {
  return executeQuery(getMyListsRef(dc));
};

const addMovieToListRef = (dcOrVars, vars) => {
  const { dc: dcInstance, vars: inputVars} = validateArgs(connectorConfig, dcOrVars, vars, true);
  dcInstance._useGeneratedSdk();
  return mutationRef(dcInstance, 'AddMovieToList', inputVars);
}
addMovieToListRef.operationName = 'AddMovieToList';
exports.addMovieToListRef = addMovieToListRef;

exports.addMovieToList = function addMovieToList(dcOrVars, vars) {
  return executeMutation(addMovieToListRef(dcOrVars, vars));
};

const getMoviesInListRef = (dcOrVars, vars) => {
  const { dc: dcInstance, vars: inputVars} = validateArgs(connectorConfig, dcOrVars, vars, true);
  dcInstance._useGeneratedSdk();
  return queryRef(dcInstance, 'GetMoviesInList', inputVars);
}
getMoviesInListRef.operationName = 'GetMoviesInList';
exports.getMoviesInListRef = getMoviesInListRef;

exports.getMoviesInList = function getMoviesInList(dcOrVars, vars) {
  return executeQuery(getMoviesInListRef(dcOrVars, vars));
};
</file>

<file path="src/dataconnect-generated/index.d.ts">
import { ConnectorConfig, DataConnect, QueryRef, QueryPromise, MutationRef, MutationPromise } from 'firebase/data-connect';

export const connectorConfig: ConnectorConfig;

export type TimestampString = string;
export type UUIDString = string;
export type Int64String = string;
export type DateString = string;




export interface AddMovieToListData {
  listItem_insert: ListItem_Key;
}

export interface AddMovieToListVariables {
  listId: UUIDString;
  movieId: UUIDString;
  note?: string | null;
  position: number;
}

export interface CreateNewListData {
  list_insert: List_Key;
}

export interface CreateNewListVariables {
  name: string;
  description?: string | null;
  isPublic?: boolean | null;
}

export interface GetMoviesInListData {
  list?: {
    movies_via_ListItem: ({
      id: UUIDString;
      title: string;
      year: number;
      summary?: string | null;
      runtime?: number | null;
      genres?: string[] | null;
    } & Movie_Key)[];
  };
}

export interface GetMoviesInListVariables {
  listId: UUIDString;
}

export interface GetMyListsData {
  lists: ({
    id: UUIDString;
    name: string;
    description?: string | null;
    isPublic?: boolean | null;
    createdAt: TimestampString;
    updatedAt: TimestampString;
  } & List_Key)[];
}

export interface ListItem_Key {
  listId: UUIDString;
  movieId: UUIDString;
  __typename?: 'ListItem_Key';
}

export interface List_Key {
  id: UUIDString;
  __typename?: 'List_Key';
}

export interface Movie_Key {
  id: UUIDString;
  __typename?: 'Movie_Key';
}

export interface Review_Key {
  id: UUIDString;
  __typename?: 'Review_Key';
}

export interface User_Key {
  id: UUIDString;
  __typename?: 'User_Key';
}

export interface Watch_Key {
  id: UUIDString;
  __typename?: 'Watch_Key';
}

interface CreateNewListRef {
  /* Allow users to create refs without passing in DataConnect */
  (vars: CreateNewListVariables): MutationRef<CreateNewListData, CreateNewListVariables>;
  /* Allow users to pass in custom DataConnect instances */
  (dc: DataConnect, vars: CreateNewListVariables): MutationRef<CreateNewListData, CreateNewListVariables>;
  operationName: string;
}
export const createNewListRef: CreateNewListRef;

export function createNewList(vars: CreateNewListVariables): MutationPromise<CreateNewListData, CreateNewListVariables>;
export function createNewList(dc: DataConnect, vars: CreateNewListVariables): MutationPromise<CreateNewListData, CreateNewListVariables>;

interface GetMyListsRef {
  /* Allow users to create refs without passing in DataConnect */
  (): QueryRef<GetMyListsData, undefined>;
  /* Allow users to pass in custom DataConnect instances */
  (dc: DataConnect): QueryRef<GetMyListsData, undefined>;
  operationName: string;
}
export const getMyListsRef: GetMyListsRef;

export function getMyLists(): QueryPromise<GetMyListsData, undefined>;
export function getMyLists(dc: DataConnect): QueryPromise<GetMyListsData, undefined>;

interface AddMovieToListRef {
  /* Allow users to create refs without passing in DataConnect */
  (vars: AddMovieToListVariables): MutationRef<AddMovieToListData, AddMovieToListVariables>;
  /* Allow users to pass in custom DataConnect instances */
  (dc: DataConnect, vars: AddMovieToListVariables): MutationRef<AddMovieToListData, AddMovieToListVariables>;
  operationName: string;
}
export const addMovieToListRef: AddMovieToListRef;

export function addMovieToList(vars: AddMovieToListVariables): MutationPromise<AddMovieToListData, AddMovieToListVariables>;
export function addMovieToList(dc: DataConnect, vars: AddMovieToListVariables): MutationPromise<AddMovieToListData, AddMovieToListVariables>;

interface GetMoviesInListRef {
  /* Allow users to create refs without passing in DataConnect */
  (vars: GetMoviesInListVariables): QueryRef<GetMoviesInListData, GetMoviesInListVariables>;
  /* Allow users to pass in custom DataConnect instances */
  (dc: DataConnect, vars: GetMoviesInListVariables): QueryRef<GetMoviesInListData, GetMoviesInListVariables>;
  operationName: string;
}
export const getMoviesInListRef: GetMoviesInListRef;

export function getMoviesInList(vars: GetMoviesInListVariables): QueryPromise<GetMoviesInListData, GetMoviesInListVariables>;
export function getMoviesInList(dc: DataConnect, vars: GetMoviesInListVariables): QueryPromise<GetMoviesInListData, GetMoviesInListVariables>;
</file>

<file path="src/dataconnect-generated/package.json">
{
  "name": "@dataconnect/generated",
  "version": "1.0.0",
  "author": "Firebase <firebase-support@google.com> (https://firebase.google.com/)",
  "description": "Generated SDK For example",
  "license": "Apache-2.0",
  "engines": {
    "node": " >=18.0"
  },
  "typings": "index.d.ts",
  "module": "esm/index.esm.js",
  "main": "index.cjs.js",
  "browser": "esm/index.esm.js",
  "exports": {
    ".": {
      "types": "./index.d.ts",
      "require": "./index.cjs.js",
      "default": "./esm/index.esm.js"
    },
    "./react": {
      "types": "./react/index.d.ts",
      "require": "./react/index.cjs.js",
      "import": "./react/esm/index.esm.js",
      "default": "./react/esm/index.esm.js"
    },
    "./package.json": "./package.json"
  },
  "peerDependencies": {
    "firebase": "^11.3.0 || ^12.0.0",
    "@tanstack-query-firebase/react": "^2.0.0"
  }
}
</file>

<file path="src/dataconnect-generated/react/esm/index.esm.js">
import { createNewListRef, getMyListsRef, addMovieToListRef, getMoviesInListRef, connectorConfig } from '../../esm/index.esm.js';
import { validateArgs, CallerSdkTypeEnum } from 'firebase/data-connect';
import { useDataConnectQuery, useDataConnectMutation, validateReactArgs } from '@tanstack-query-firebase/react/data-connect';

export function useCreateNewList(dcOrOptions, options) {
  const { dc: dcInstance, vars: inputOpts } = validateArgs(connectorConfig, dcOrOptions, options);
  function refFactory(vars) {
    return createNewListRef(dcInstance, vars);
  }
  return useDataConnectMutation(refFactory, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}


export function useGetMyLists(dcOrOptions, options) {
  const { dc: dcInstance, options: inputOpts } = validateReactArgs(connectorConfig, dcOrOptions, options);
  const ref = getMyListsRef(dcInstance);
  return useDataConnectQuery(ref, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}
export function useAddMovieToList(dcOrOptions, options) {
  const { dc: dcInstance, vars: inputOpts } = validateArgs(connectorConfig, dcOrOptions, options);
  function refFactory(vars) {
    return addMovieToListRef(dcInstance, vars);
  }
  return useDataConnectMutation(refFactory, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}


export function useGetMoviesInList(dcOrVars, varsOrOptions, options) {
  const { dc: dcInstance, vars: inputVars, options: inputOpts } = validateReactArgs(connectorConfig, dcOrVars, varsOrOptions, options, true, true);
  const ref = getMoviesInListRef(dcInstance, inputVars);
  return useDataConnectQuery(ref, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}
</file>

<file path="src/dataconnect-generated/react/esm/package.json">
{"type":"module"}
</file>

<file path="src/dataconnect-generated/react/index.cjs.js">
const { createNewListRef, getMyListsRef, addMovieToListRef, getMoviesInListRef, connectorConfig } = require('../index.cjs.js');
const { validateArgs, CallerSdkTypeEnum } = require('firebase/data-connect');
const { useDataConnectQuery, useDataConnectMutation, validateReactArgs } = require('@tanstack-query-firebase/react/data-connect');

exports.useCreateNewList = function useCreateNewList(dcOrOptions, options) {
  const { dc: dcInstance, vars: inputOpts } = validateArgs(connectorConfig, dcOrOptions, options);
  function refFactory(vars) {
    return createNewListRef(dcInstance, vars);
  }
  return useDataConnectMutation(refFactory, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}


exports.useGetMyLists = function useGetMyLists(dcOrOptions, options) {
  const { dc: dcInstance, options: inputOpts } = validateReactArgs(connectorConfig, dcOrOptions, options);
  const ref = getMyListsRef(dcInstance);
  return useDataConnectQuery(ref, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}
exports.useAddMovieToList = function useAddMovieToList(dcOrOptions, options) {
  const { dc: dcInstance, vars: inputOpts } = validateArgs(connectorConfig, dcOrOptions, options);
  function refFactory(vars) {
    return addMovieToListRef(dcInstance, vars);
  }
  return useDataConnectMutation(refFactory, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}


exports.useGetMoviesInList = function useGetMoviesInList(dcOrVars, varsOrOptions, options) {
  const { dc: dcInstance, vars: inputVars, options: inputOpts } = validateReactArgs(connectorConfig, dcOrVars, varsOrOptions, options, true, true);
  const ref = getMoviesInListRef(dcInstance, inputVars);
  return useDataConnectQuery(ref, inputOpts, CallerSdkTypeEnum.GeneratedReact);
}
</file>

<file path="src/dataconnect-generated/react/index.d.ts">
import { CreateNewListData, CreateNewListVariables, GetMyListsData, AddMovieToListData, AddMovieToListVariables, GetMoviesInListData, GetMoviesInListVariables } from '../';
import { UseDataConnectQueryResult, useDataConnectQueryOptions, UseDataConnectMutationResult, useDataConnectMutationOptions} from '@tanstack-query-firebase/react/data-connect';
import { UseQueryResult, UseMutationResult} from '@tanstack/react-query';
import { DataConnect } from 'firebase/data-connect';
import { FirebaseError } from 'firebase/app';


export function useCreateNewList(options?: useDataConnectMutationOptions<CreateNewListData, FirebaseError, CreateNewListVariables>): UseDataConnectMutationResult<CreateNewListData, CreateNewListVariables>;
export function useCreateNewList(dc: DataConnect, options?: useDataConnectMutationOptions<CreateNewListData, FirebaseError, CreateNewListVariables>): UseDataConnectMutationResult<CreateNewListData, CreateNewListVariables>;

export function useGetMyLists(options?: useDataConnectQueryOptions<GetMyListsData>): UseDataConnectQueryResult<GetMyListsData, undefined>;
export function useGetMyLists(dc: DataConnect, options?: useDataConnectQueryOptions<GetMyListsData>): UseDataConnectQueryResult<GetMyListsData, undefined>;

export function useAddMovieToList(options?: useDataConnectMutationOptions<AddMovieToListData, FirebaseError, AddMovieToListVariables>): UseDataConnectMutationResult<AddMovieToListData, AddMovieToListVariables>;
export function useAddMovieToList(dc: DataConnect, options?: useDataConnectMutationOptions<AddMovieToListData, FirebaseError, AddMovieToListVariables>): UseDataConnectMutationResult<AddMovieToListData, AddMovieToListVariables>;

export function useGetMoviesInList(vars: GetMoviesInListVariables, options?: useDataConnectQueryOptions<GetMoviesInListData>): UseDataConnectQueryResult<GetMoviesInListData, GetMoviesInListVariables>;
export function useGetMoviesInList(dc: DataConnect, vars: GetMoviesInListVariables, options?: useDataConnectQueryOptions<GetMoviesInListData>): UseDataConnectQueryResult<GetMoviesInListData, GetMoviesInListVariables>;
</file>

<file path="src/dataconnect-generated/react/package.json">
{
  "name": "@dataconnect/generated-react",
  "version": "1.0.0",
  "author": "Firebase <firebase-support@google.com> (https://firebase.google.com/)",
  "description": "Generated SDK For example",
  "license": "Apache-2.0",
  "engines": {
    "node": " >=18.0"
  },
  "typings": "index.d.ts",
  "main": "index.cjs.js",
  "module": "esm/index.esm.js",
  "browser": "esm/index.esm.js",
  "peerDependencies": {
    "@tanstack-query-firebase/react": "^2.0.0"
  }
}
</file>

<file path="src/dataconnect-generated/react/README.md">
# Generated React README
This README will guide you through the process of using the generated React SDK package for the connector `example`. It will also provide examples on how to use your generated SDK to call your Data Connect queries and mutations.

**If you're looking for the `JavaScript README`, you can find it at [`dataconnect-generated/README.md`](../README.md)**

***NOTE:** This README is generated alongside the generated SDK. If you make changes to this file, they will be overwritten when the SDK is regenerated.*

You can use this generated SDK by importing from the package `@dataconnect/generated/react` as shown below. Both CommonJS and ESM imports are supported.

You can also follow the instructions from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#react).

# Table of Contents
- [**Overview**](#generated-react-readme)
- [**TanStack Query Firebase & TanStack React Query**](#tanstack-query-firebase-tanstack-react-query)
  - [*Package Installation*](#installing-tanstack-query-firebase-and-tanstack-react-query-packages)
  - [*Configuring TanStack Query*](#configuring-tanstack-query)
- [**Accessing the connector**](#accessing-the-connector)
  - [*Connecting to the local Emulator*](#connecting-to-the-local-emulator)
- [**Queries**](#queries)
  - [*GetMyLists*](#getmylists)
  - [*GetMoviesInList*](#getmoviesinlist)
- [**Mutations**](#mutations)
  - [*CreateNewList*](#createnewlist)
  - [*AddMovieToList*](#addmovietolist)

# TanStack Query Firebase & TanStack React Query
This SDK provides [React](https://react.dev/) hooks generated specific to your application, for the operations found in the connector `example`. These hooks are generated using [TanStack Query Firebase](https://react-query-firebase.invertase.dev/) by our partners at Invertase, a library built on top of [TanStack React Query v5](https://tanstack.com/query/v5/docs/framework/react/overview).

***You do not need to be familiar with Tanstack Query or Tanstack Query Firebase to use this SDK.*** However, you may find it useful to learn more about them, as they will empower you as a user of this Generated React SDK.

## Installing TanStack Query Firebase and TanStack React Query Packages
In order to use the React generated SDK, you must install the `TanStack React Query` and `TanStack Query Firebase` packages.
```bash
npm i --save @tanstack/react-query @tanstack-query-firebase/react
```
```bash
npm i --save firebase@latest # Note: React has a peer dependency on ^11.3.0
```

You can also follow the installation instructions from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#tanstack-install), or the [TanStack Query Firebase documentation](https://react-query-firebase.invertase.dev/react) and [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/installation).

## Configuring TanStack Query
In order to use the React generated SDK in your application, you must wrap your application's component tree in a `QueryClientProvider` component from TanStack React Query. None of your generated React SDK hooks will work without this provider.

```javascript
import { QueryClientProvider } from '@tanstack/react-query';

// Create a TanStack Query client instance
const queryClient = new QueryClient()

function App() {
  return (
    // Provide the client to your App
    <QueryClientProvider client={queryClient}>
      <MyApplication />
    </QueryClientProvider>
  )
}
```

To learn more about `QueryClientProvider`, see the [TanStack React Query documentation](https://tanstack.com/query/latest/docs/framework/react/quick-start) and the [TanStack Query Firebase documentation](https://invertase.docs.page/tanstack-query-firebase/react#usage).

# Accessing the connector
A connector is a collection of Queries and Mutations. One SDK is generated for each connector - this SDK is generated for the connector `example`.

You can find more information about connectors in the [Data Connect documentation](https://firebase.google.com/docs/data-connect#how-does).

```javascript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig } from '@dataconnect/generated';

const dataConnect = getDataConnect(connectorConfig);
```

## Connecting to the local Emulator
By default, the connector will connect to the production service.

To connect to the emulator, you can use the following code.
You can also follow the emulator instructions from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#emulator-react-angular).

```javascript
import { connectDataConnectEmulator, getDataConnect } from 'firebase/data-connect';
import { connectorConfig } from '@dataconnect/generated';

const dataConnect = getDataConnect(connectorConfig);
connectDataConnectEmulator(dataConnect, 'localhost', 9399);
```

After it's initialized, you can call your Data Connect [queries](#queries) and [mutations](#mutations) using the hooks provided from your generated React SDK.

# Queries

The React generated SDK provides Query hook functions that call and return [`useDataConnectQuery`](https://react-query-firebase.invertase.dev/react/data-connect/querying) hooks from TanStack Query Firebase.

Calling these hook functions will return a `UseQueryResult` object. This object holds the state of your Query, including whether the Query is loading, has completed, or has succeeded/failed, and the most recent data returned by the Query, among other things. To learn more about these hooks and how to use them, see the [TanStack Query Firebase documentation](https://react-query-firebase.invertase.dev/react/data-connect/querying).

TanStack React Query caches the results of your Queries, so using the same Query hook function in multiple places in your application allows the entire application to automatically see updates to that Query's data.

Query hooks execute their Queries automatically when called, and periodically refresh, unless you change the `queryOptions` for the Query. To learn how to stop a Query from automatically executing, including how to make a query "lazy", see the [TanStack React Query documentation](https://tanstack.com/query/latest/docs/framework/react/guides/disabling-queries).

To learn more about TanStack React Query's Queries, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/guides/queries).

## Using Query Hooks
Here's a general overview of how to use the generated Query hooks in your code:

- If the Query has no variables, the Query hook function does not require arguments.
- If the Query has any required variables, the Query hook function will require at least one argument: an object that contains all the required variables for the Query.
- If the Query has some required and some optional variables, only required variables are necessary in the variables argument object, and optional variables may be provided as well.
- If all of the Query's variables are optional, the Query hook function does not require any arguments.
- Query hook functions can be called with or without passing in a `DataConnect` instance as an argument. If no `DataConnect` argument is passed in, then the generated SDK will call `getDataConnect(connectorConfig)` behind the scenes for you.
- Query hooks functions can be called with or without passing in an `options` argument of type `useDataConnectQueryOptions`. To learn more about the `options` argument, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/guides/query-options).
  - ***Special case:***  If the Query has all optional variables and you would like to provide an `options` argument to the Query hook function without providing any variables, you must pass `undefined` where you would normally pass the Query's variables, and then may provide the `options` argument.

Below are examples of how to use the `example` connector's generated Query hook functions to execute each Query. You can also follow the examples from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#operations-react-angular).

## GetMyLists
You can execute the `GetMyLists` Query using the following Query hook function, which is defined in [dataconnect-generated/react/index.d.ts](./index.d.ts):

```javascript
useGetMyLists(dc: DataConnect, options?: useDataConnectQueryOptions<GetMyListsData>): UseDataConnectQueryResult<GetMyListsData, undefined>;
```
You can also pass in a `DataConnect` instance to the Query hook function.
```javascript
useGetMyLists(options?: useDataConnectQueryOptions<GetMyListsData>): UseDataConnectQueryResult<GetMyListsData, undefined>;
```

### Variables
The `GetMyLists` Query has no variables.
### Return Type
Recall that calling the `GetMyLists` Query hook function returns a `UseQueryResult` object. This object holds the state of your Query, including whether the Query is loading, has completed, or has succeeded/failed, and any data returned by the Query, among other things.

To check the status of a Query, use the `UseQueryResult.status` field. You can also check for pending / success / error status using the `UseQueryResult.isPending`, `UseQueryResult.isSuccess`, and `UseQueryResult.isError` fields.

To access the data returned by a Query, use the `UseQueryResult.data` field. The data for the `GetMyLists` Query is of type `GetMyListsData`, which is defined in [dataconnect-generated/index.d.ts](../index.d.ts). It has the following fields:
```javascript
export interface GetMyListsData {
  lists: ({
    id: UUIDString;
    name: string;
    description?: string | null;
    isPublic?: boolean | null;
    createdAt: TimestampString;
    updatedAt: TimestampString;
  } & List_Key)[];
}
```

To learn more about the `UseQueryResult` object, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/reference/useQuery).

### Using `GetMyLists`'s Query hook function

```javascript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig } from '@dataconnect/generated';
import { useGetMyLists } from '@dataconnect/generated/react'

export default function GetMyListsComponent() {
  // You don't have to do anything to "execute" the Query.
  // Call the Query hook function to get a `UseQueryResult` object which holds the state of your Query.
  const query = useGetMyLists();

  // You can also pass in a `DataConnect` instance to the Query hook function.
  const dataConnect = getDataConnect(connectorConfig);
  const query = useGetMyLists(dataConnect);

  // You can also pass in a `useDataConnectQueryOptions` object to the Query hook function.
  const options = { staleTime: 5 * 1000 };
  const query = useGetMyLists(options);

  // You can also pass both a `DataConnect` instance and a `useDataConnectQueryOptions` object.
  const dataConnect = getDataConnect(connectorConfig);
  const options = { staleTime: 5 * 1000 };
  const query = useGetMyLists(dataConnect, options);

  // Then, you can render your component dynamically based on the status of the Query.
  if (query.isPending) {
    return <div>Loading...</div>;
  }

  if (query.isError) {
    return <div>Error: {query.error.message}</div>;
  }

  // If the Query is successful, you can access the data returned using the `UseQueryResult.data` field.
  if (query.isSuccess) {
    console.log(query.data.lists);
  }
  return <div>Query execution {query.isSuccess ? 'successful' : 'failed'}!</div>;
}
```

## GetMoviesInList
You can execute the `GetMoviesInList` Query using the following Query hook function, which is defined in [dataconnect-generated/react/index.d.ts](./index.d.ts):

```javascript
useGetMoviesInList(dc: DataConnect, vars: GetMoviesInListVariables, options?: useDataConnectQueryOptions<GetMoviesInListData>): UseDataConnectQueryResult<GetMoviesInListData, GetMoviesInListVariables>;
```
You can also pass in a `DataConnect` instance to the Query hook function.
```javascript
useGetMoviesInList(vars: GetMoviesInListVariables, options?: useDataConnectQueryOptions<GetMoviesInListData>): UseDataConnectQueryResult<GetMoviesInListData, GetMoviesInListVariables>;
```

### Variables
The `GetMoviesInList` Query requires an argument of type `GetMoviesInListVariables`, which is defined in [dataconnect-generated/index.d.ts](../index.d.ts). It has the following fields:

```javascript
export interface GetMoviesInListVariables {
  listId: UUIDString;
}
```
### Return Type
Recall that calling the `GetMoviesInList` Query hook function returns a `UseQueryResult` object. This object holds the state of your Query, including whether the Query is loading, has completed, or has succeeded/failed, and any data returned by the Query, among other things.

To check the status of a Query, use the `UseQueryResult.status` field. You can also check for pending / success / error status using the `UseQueryResult.isPending`, `UseQueryResult.isSuccess`, and `UseQueryResult.isError` fields.

To access the data returned by a Query, use the `UseQueryResult.data` field. The data for the `GetMoviesInList` Query is of type `GetMoviesInListData`, which is defined in [dataconnect-generated/index.d.ts](../index.d.ts). It has the following fields:
```javascript
export interface GetMoviesInListData {
  list?: {
    movies_via_ListItem: ({
      id: UUIDString;
      title: string;
      year: number;
      summary?: string | null;
      runtime?: number | null;
      genres?: string[] | null;
    } & Movie_Key)[];
  };
}
```

To learn more about the `UseQueryResult` object, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/reference/useQuery).

### Using `GetMoviesInList`'s Query hook function

```javascript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig, GetMoviesInListVariables } from '@dataconnect/generated';
import { useGetMoviesInList } from '@dataconnect/generated/react'

export default function GetMoviesInListComponent() {
  // The `useGetMoviesInList` Query hook requires an argument of type `GetMoviesInListVariables`:
  const getMoviesInListVars: GetMoviesInListVariables = {
    listId: ..., 
  };

  // You don't have to do anything to "execute" the Query.
  // Call the Query hook function to get a `UseQueryResult` object which holds the state of your Query.
  const query = useGetMoviesInList(getMoviesInListVars);
  // Variables can be defined inline as well.
  const query = useGetMoviesInList({ listId: ..., });

  // You can also pass in a `DataConnect` instance to the Query hook function.
  const dataConnect = getDataConnect(connectorConfig);
  const query = useGetMoviesInList(dataConnect, getMoviesInListVars);

  // You can also pass in a `useDataConnectQueryOptions` object to the Query hook function.
  const options = { staleTime: 5 * 1000 };
  const query = useGetMoviesInList(getMoviesInListVars, options);

  // You can also pass both a `DataConnect` instance and a `useDataConnectQueryOptions` object.
  const dataConnect = getDataConnect(connectorConfig);
  const options = { staleTime: 5 * 1000 };
  const query = useGetMoviesInList(dataConnect, getMoviesInListVars, options);

  // Then, you can render your component dynamically based on the status of the Query.
  if (query.isPending) {
    return <div>Loading...</div>;
  }

  if (query.isError) {
    return <div>Error: {query.error.message}</div>;
  }

  // If the Query is successful, you can access the data returned using the `UseQueryResult.data` field.
  if (query.isSuccess) {
    console.log(query.data.list);
  }
  return <div>Query execution {query.isSuccess ? 'successful' : 'failed'}!</div>;
}
```

# Mutations

The React generated SDK provides Mutations hook functions that call and return [`useDataConnectMutation`](https://react-query-firebase.invertase.dev/react/data-connect/mutations) hooks from TanStack Query Firebase.

Calling these hook functions will return a `UseMutationResult` object. This object holds the state of your Mutation, including whether the Mutation is loading, has completed, or has succeeded/failed, and the most recent data returned by the Mutation, among other things. To learn more about these hooks and how to use them, see the [TanStack Query Firebase documentation](https://react-query-firebase.invertase.dev/react/data-connect/mutations).

Mutation hooks do not execute their Mutations automatically when called. Rather, after calling the Mutation hook function and getting a `UseMutationResult` object, you must call the `UseMutationResult.mutate()` function to execute the Mutation.

To learn more about TanStack React Query's Mutations, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/guides/mutations).

## Using Mutation Hooks
Here's a general overview of how to use the generated Mutation hooks in your code:

- Mutation hook functions are not called with the arguments to the Mutation. Instead, arguments are passed to `UseMutationResult.mutate()`.
- If the Mutation has no variables, the `mutate()` function does not require arguments.
- If the Mutation has any required variables, the `mutate()` function will require at least one argument: an object that contains all the required variables for the Mutation.
- If the Mutation has some required and some optional variables, only required variables are necessary in the variables argument object, and optional variables may be provided as well.
- If all of the Mutation's variables are optional, the Mutation hook function does not require any arguments.
- Mutation hook functions can be called with or without passing in a `DataConnect` instance as an argument. If no `DataConnect` argument is passed in, then the generated SDK will call `getDataConnect(connectorConfig)` behind the scenes for you.
- Mutation hooks also accept an `options` argument of type `useDataConnectMutationOptions`. To learn more about the `options` argument, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/guides/mutations#mutation-side-effects).
  - `UseMutationResult.mutate()` also accepts an `options` argument of type `useDataConnectMutationOptions`.
  - ***Special case:*** If the Mutation has no arguments (or all optional arguments and you wish to provide none), and you want to pass `options` to `UseMutationResult.mutate()`, you must pass `undefined` where you would normally pass the Mutation's arguments, and then may provide the options argument.

Below are examples of how to use the `example` connector's generated Mutation hook functions to execute each Mutation. You can also follow the examples from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#operations-react-angular).

## CreateNewList
You can execute the `CreateNewList` Mutation using the `UseMutationResult` object returned by the following Mutation hook function (which is defined in [dataconnect-generated/react/index.d.ts](./index.d.ts)):
```javascript
useCreateNewList(options?: useDataConnectMutationOptions<CreateNewListData, FirebaseError, CreateNewListVariables>): UseDataConnectMutationResult<CreateNewListData, CreateNewListVariables>;
```
You can also pass in a `DataConnect` instance to the Mutation hook function.
```javascript
useCreateNewList(dc: DataConnect, options?: useDataConnectMutationOptions<CreateNewListData, FirebaseError, CreateNewListVariables>): UseDataConnectMutationResult<CreateNewListData, CreateNewListVariables>;
```

### Variables
The `CreateNewList` Mutation requires an argument of type `CreateNewListVariables`, which is defined in [dataconnect-generated/index.d.ts](../index.d.ts). It has the following fields:

```javascript
export interface CreateNewListVariables {
  name: string;
  description?: string | null;
  isPublic?: boolean | null;
}
```
### Return Type
Recall that calling the `CreateNewList` Mutation hook function returns a `UseMutationResult` object. This object holds the state of your Mutation, including whether the Mutation is loading, has completed, or has succeeded/failed, among other things.

To check the status of a Mutation, use the `UseMutationResult.status` field. You can also check for pending / success / error status using the `UseMutationResult.isPending`, `UseMutationResult.isSuccess`, and `UseMutationResult.isError` fields.

To execute the Mutation, call `UseMutationResult.mutate()`. This function executes the Mutation, but does not return the data from the Mutation.

To access the data returned by a Mutation, use the `UseMutationResult.data` field. The data for the `CreateNewList` Mutation is of type `CreateNewListData`, which is defined in [dataconnect-generated/index.d.ts](../index.d.ts). It has the following fields:
```javascript
export interface CreateNewListData {
  list_insert: List_Key;
}
```

To learn more about the `UseMutationResult` object, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/reference/useMutation).

### Using `CreateNewList`'s Mutation hook function

```javascript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig, CreateNewListVariables } from '@dataconnect/generated';
import { useCreateNewList } from '@dataconnect/generated/react'

export default function CreateNewListComponent() {
  // Call the Mutation hook function to get a `UseMutationResult` object which holds the state of your Mutation.
  const mutation = useCreateNewList();

  // You can also pass in a `DataConnect` instance to the Mutation hook function.
  const dataConnect = getDataConnect(connectorConfig);
  const mutation = useCreateNewList(dataConnect);

  // You can also pass in a `useDataConnectMutationOptions` object to the Mutation hook function.
  const options = {
    onSuccess: () => { console.log('Mutation succeeded!'); }
  };
  const mutation = useCreateNewList(options);

  // You can also pass both a `DataConnect` instance and a `useDataConnectMutationOptions` object.
  const dataConnect = getDataConnect(connectorConfig);
  const options = {
    onSuccess: () => { console.log('Mutation succeeded!'); }
  };
  const mutation = useCreateNewList(dataConnect, options);

  // After calling the Mutation hook function, you must call `UseMutationResult.mutate()` to execute the Mutation.
  // The `useCreateNewList` Mutation requires an argument of type `CreateNewListVariables`:
  const createNewListVars: CreateNewListVariables = {
    name: ..., 
    description: ..., // optional
    isPublic: ..., // optional
  };
  mutation.mutate(createNewListVars);
  // Variables can be defined inline as well.
  mutation.mutate({ name: ..., description: ..., isPublic: ..., });

  // You can also pass in a `useDataConnectMutationOptions` object to `UseMutationResult.mutate()`.
  const options = {
    onSuccess: () => { console.log('Mutation succeeded!'); }
  };
  mutation.mutate(createNewListVars, options);

  // Then, you can render your component dynamically based on the status of the Mutation.
  if (mutation.isPending) {
    return <div>Loading...</div>;
  }

  if (mutation.isError) {
    return <div>Error: {mutation.error.message}</div>;
  }

  // If the Mutation is successful, you can access the data returned using the `UseMutationResult.data` field.
  if (mutation.isSuccess) {
    console.log(mutation.data.list_insert);
  }
  return <div>Mutation execution {mutation.isSuccess ? 'successful' : 'failed'}!</div>;
}
```

## AddMovieToList
You can execute the `AddMovieToList` Mutation using the `UseMutationResult` object returned by the following Mutation hook function (which is defined in [dataconnect-generated/react/index.d.ts](./index.d.ts)):
```javascript
useAddMovieToList(options?: useDataConnectMutationOptions<AddMovieToListData, FirebaseError, AddMovieToListVariables>): UseDataConnectMutationResult<AddMovieToListData, AddMovieToListVariables>;
```
You can also pass in a `DataConnect` instance to the Mutation hook function.
```javascript
useAddMovieToList(dc: DataConnect, options?: useDataConnectMutationOptions<AddMovieToListData, FirebaseError, AddMovieToListVariables>): UseDataConnectMutationResult<AddMovieToListData, AddMovieToListVariables>;
```

### Variables
The `AddMovieToList` Mutation requires an argument of type `AddMovieToListVariables`, which is defined in [dataconnect-generated/index.d.ts](../index.d.ts). It has the following fields:

```javascript
export interface AddMovieToListVariables {
  listId: UUIDString;
  movieId: UUIDString;
  note?: string | null;
  position: number;
}
```
### Return Type
Recall that calling the `AddMovieToList` Mutation hook function returns a `UseMutationResult` object. This object holds the state of your Mutation, including whether the Mutation is loading, has completed, or has succeeded/failed, among other things.

To check the status of a Mutation, use the `UseMutationResult.status` field. You can also check for pending / success / error status using the `UseMutationResult.isPending`, `UseMutationResult.isSuccess`, and `UseMutationResult.isError` fields.

To execute the Mutation, call `UseMutationResult.mutate()`. This function executes the Mutation, but does not return the data from the Mutation.

To access the data returned by a Mutation, use the `UseMutationResult.data` field. The data for the `AddMovieToList` Mutation is of type `AddMovieToListData`, which is defined in [dataconnect-generated/index.d.ts](../index.d.ts). It has the following fields:
```javascript
export interface AddMovieToListData {
  listItem_insert: ListItem_Key;
}
```

To learn more about the `UseMutationResult` object, see the [TanStack React Query documentation](https://tanstack.com/query/v5/docs/framework/react/reference/useMutation).

### Using `AddMovieToList`'s Mutation hook function

```javascript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig, AddMovieToListVariables } from '@dataconnect/generated';
import { useAddMovieToList } from '@dataconnect/generated/react'

export default function AddMovieToListComponent() {
  // Call the Mutation hook function to get a `UseMutationResult` object which holds the state of your Mutation.
  const mutation = useAddMovieToList();

  // You can also pass in a `DataConnect` instance to the Mutation hook function.
  const dataConnect = getDataConnect(connectorConfig);
  const mutation = useAddMovieToList(dataConnect);

  // You can also pass in a `useDataConnectMutationOptions` object to the Mutation hook function.
  const options = {
    onSuccess: () => { console.log('Mutation succeeded!'); }
  };
  const mutation = useAddMovieToList(options);

  // You can also pass both a `DataConnect` instance and a `useDataConnectMutationOptions` object.
  const dataConnect = getDataConnect(connectorConfig);
  const options = {
    onSuccess: () => { console.log('Mutation succeeded!'); }
  };
  const mutation = useAddMovieToList(dataConnect, options);

  // After calling the Mutation hook function, you must call `UseMutationResult.mutate()` to execute the Mutation.
  // The `useAddMovieToList` Mutation requires an argument of type `AddMovieToListVariables`:
  const addMovieToListVars: AddMovieToListVariables = {
    listId: ..., 
    movieId: ..., 
    note: ..., // optional
    position: ..., 
  };
  mutation.mutate(addMovieToListVars);
  // Variables can be defined inline as well.
  mutation.mutate({ listId: ..., movieId: ..., note: ..., position: ..., });

  // You can also pass in a `useDataConnectMutationOptions` object to `UseMutationResult.mutate()`.
  const options = {
    onSuccess: () => { console.log('Mutation succeeded!'); }
  };
  mutation.mutate(addMovieToListVars, options);

  // Then, you can render your component dynamically based on the status of the Mutation.
  if (mutation.isPending) {
    return <div>Loading...</div>;
  }

  if (mutation.isError) {
    return <div>Error: {mutation.error.message}</div>;
  }

  // If the Mutation is successful, you can access the data returned using the `UseMutationResult.data` field.
  if (mutation.isSuccess) {
    console.log(mutation.data.listItem_insert);
  }
  return <div>Mutation execution {mutation.isSuccess ? 'successful' : 'failed'}!</div>;
}
```
</file>

<file path="src/dataconnect-generated/README.md">
# Generated TypeScript README
This README will guide you through the process of using the generated JavaScript SDK package for the connector `example`. It will also provide examples on how to use your generated SDK to call your Data Connect queries and mutations.

**If you're looking for the `React README`, you can find it at [`dataconnect-generated/react/README.md`](./react/README.md)**

***NOTE:** This README is generated alongside the generated SDK. If you make changes to this file, they will be overwritten when the SDK is regenerated.*

# Table of Contents
- [**Overview**](#generated-javascript-readme)
- [**Accessing the connector**](#accessing-the-connector)
  - [*Connecting to the local Emulator*](#connecting-to-the-local-emulator)
- [**Queries**](#queries)
  - [*GetMyLists*](#getmylists)
  - [*GetMoviesInList*](#getmoviesinlist)
- [**Mutations**](#mutations)
  - [*CreateNewList*](#createnewlist)
  - [*AddMovieToList*](#addmovietolist)

# Accessing the connector
A connector is a collection of Queries and Mutations. One SDK is generated for each connector - this SDK is generated for the connector `example`. You can find more information about connectors in the [Data Connect documentation](https://firebase.google.com/docs/data-connect#how-does).

You can use this generated SDK by importing from the package `@dataconnect/generated` as shown below. Both CommonJS and ESM imports are supported.

You can also follow the instructions from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#set-client).

```typescript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig } from '@dataconnect/generated';

const dataConnect = getDataConnect(connectorConfig);
```

## Connecting to the local Emulator
By default, the connector will connect to the production service.

To connect to the emulator, you can use the following code.
You can also follow the emulator instructions from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#instrument-clients).

```typescript
import { connectDataConnectEmulator, getDataConnect } from 'firebase/data-connect';
import { connectorConfig } from '@dataconnect/generated';

const dataConnect = getDataConnect(connectorConfig);
connectDataConnectEmulator(dataConnect, 'localhost', 9399);
```

After it's initialized, you can call your Data Connect [queries](#queries) and [mutations](#mutations) from your generated SDK.

# Queries

There are two ways to execute a Data Connect Query using the generated Web SDK:
- Using a Query Reference function, which returns a `QueryRef`
  - The `QueryRef` can be used as an argument to `executeQuery()`, which will execute the Query and return a `QueryPromise`
- Using an action shortcut function, which returns a `QueryPromise`
  - Calling the action shortcut function will execute the Query and return a `QueryPromise`

The following is true for both the action shortcut function and the `QueryRef` function:
- The `QueryPromise` returned will resolve to the result of the Query once it has finished executing
- If the Query accepts arguments, both the action shortcut function and the `QueryRef` function accept a single argument: an object that contains all the required variables (and the optional variables) for the Query
- Both functions can be called with or without passing in a `DataConnect` instance as an argument. If no `DataConnect` argument is passed in, then the generated SDK will call `getDataConnect(connectorConfig)` behind the scenes for you.

Below are examples of how to use the `example` connector's generated functions to execute each query. You can also follow the examples from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#using-queries).

## GetMyLists
You can execute the `GetMyLists` query using the following action shortcut function, or by calling `executeQuery()` after calling the following `QueryRef` function, both of which are defined in [dataconnect-generated/index.d.ts](./index.d.ts):
```typescript
getMyLists(): QueryPromise<GetMyListsData, undefined>;

interface GetMyListsRef {
  ...
  /* Allow users to create refs without passing in DataConnect */
  (): QueryRef<GetMyListsData, undefined>;
}
export const getMyListsRef: GetMyListsRef;
```
You can also pass in a `DataConnect` instance to the action shortcut function or `QueryRef` function.
```typescript
getMyLists(dc: DataConnect): QueryPromise<GetMyListsData, undefined>;

interface GetMyListsRef {
  ...
  (dc: DataConnect): QueryRef<GetMyListsData, undefined>;
}
export const getMyListsRef: GetMyListsRef;
```

If you need the name of the operation without creating a ref, you can retrieve the operation name by calling the `operationName` property on the getMyListsRef:
```typescript
const name = getMyListsRef.operationName;
console.log(name);
```

### Variables
The `GetMyLists` query has no variables.
### Return Type
Recall that executing the `GetMyLists` query returns a `QueryPromise` that resolves to an object with a `data` property.

The `data` property is an object of type `GetMyListsData`, which is defined in [dataconnect-generated/index.d.ts](./index.d.ts). It has the following fields:
```typescript
export interface GetMyListsData {
  lists: ({
    id: UUIDString;
    name: string;
    description?: string | null;
    isPublic?: boolean | null;
    createdAt: TimestampString;
    updatedAt: TimestampString;
  } & List_Key)[];
}
```
### Using `GetMyLists`'s action shortcut function

```typescript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig, getMyLists } from '@dataconnect/generated';


// Call the `getMyLists()` function to execute the query.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await getMyLists();

// You can also pass in a `DataConnect` instance to the action shortcut function.
const dataConnect = getDataConnect(connectorConfig);
const { data } = await getMyLists(dataConnect);

console.log(data.lists);

// Or, you can use the `Promise` API.
getMyLists().then((response) => {
  const data = response.data;
  console.log(data.lists);
});
```

### Using `GetMyLists`'s `QueryRef` function

```typescript
import { getDataConnect, executeQuery } from 'firebase/data-connect';
import { connectorConfig, getMyListsRef } from '@dataconnect/generated';


// Call the `getMyListsRef()` function to get a reference to the query.
const ref = getMyListsRef();

// You can also pass in a `DataConnect` instance to the `QueryRef` function.
const dataConnect = getDataConnect(connectorConfig);
const ref = getMyListsRef(dataConnect);

// Call `executeQuery()` on the reference to execute the query.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await executeQuery(ref);

console.log(data.lists);

// Or, you can use the `Promise` API.
executeQuery(ref).then((response) => {
  const data = response.data;
  console.log(data.lists);
});
```

## GetMoviesInList
You can execute the `GetMoviesInList` query using the following action shortcut function, or by calling `executeQuery()` after calling the following `QueryRef` function, both of which are defined in [dataconnect-generated/index.d.ts](./index.d.ts):
```typescript
getMoviesInList(vars: GetMoviesInListVariables): QueryPromise<GetMoviesInListData, GetMoviesInListVariables>;

interface GetMoviesInListRef {
  ...
  /* Allow users to create refs without passing in DataConnect */
  (vars: GetMoviesInListVariables): QueryRef<GetMoviesInListData, GetMoviesInListVariables>;
}
export const getMoviesInListRef: GetMoviesInListRef;
```
You can also pass in a `DataConnect` instance to the action shortcut function or `QueryRef` function.
```typescript
getMoviesInList(dc: DataConnect, vars: GetMoviesInListVariables): QueryPromise<GetMoviesInListData, GetMoviesInListVariables>;

interface GetMoviesInListRef {
  ...
  (dc: DataConnect, vars: GetMoviesInListVariables): QueryRef<GetMoviesInListData, GetMoviesInListVariables>;
}
export const getMoviesInListRef: GetMoviesInListRef;
```

If you need the name of the operation without creating a ref, you can retrieve the operation name by calling the `operationName` property on the getMoviesInListRef:
```typescript
const name = getMoviesInListRef.operationName;
console.log(name);
```

### Variables
The `GetMoviesInList` query requires an argument of type `GetMoviesInListVariables`, which is defined in [dataconnect-generated/index.d.ts](./index.d.ts). It has the following fields:

```typescript
export interface GetMoviesInListVariables {
  listId: UUIDString;
}
```
### Return Type
Recall that executing the `GetMoviesInList` query returns a `QueryPromise` that resolves to an object with a `data` property.

The `data` property is an object of type `GetMoviesInListData`, which is defined in [dataconnect-generated/index.d.ts](./index.d.ts). It has the following fields:
```typescript
export interface GetMoviesInListData {
  list?: {
    movies_via_ListItem: ({
      id: UUIDString;
      title: string;
      year: number;
      summary?: string | null;
      runtime?: number | null;
      genres?: string[] | null;
    } & Movie_Key)[];
  };
}
```
### Using `GetMoviesInList`'s action shortcut function

```typescript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig, getMoviesInList, GetMoviesInListVariables } from '@dataconnect/generated';

// The `GetMoviesInList` query requires an argument of type `GetMoviesInListVariables`:
const getMoviesInListVars: GetMoviesInListVariables = {
  listId: ..., 
};

// Call the `getMoviesInList()` function to execute the query.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await getMoviesInList(getMoviesInListVars);
// Variables can be defined inline as well.
const { data } = await getMoviesInList({ listId: ..., });

// You can also pass in a `DataConnect` instance to the action shortcut function.
const dataConnect = getDataConnect(connectorConfig);
const { data } = await getMoviesInList(dataConnect, getMoviesInListVars);

console.log(data.list);

// Or, you can use the `Promise` API.
getMoviesInList(getMoviesInListVars).then((response) => {
  const data = response.data;
  console.log(data.list);
});
```

### Using `GetMoviesInList`'s `QueryRef` function

```typescript
import { getDataConnect, executeQuery } from 'firebase/data-connect';
import { connectorConfig, getMoviesInListRef, GetMoviesInListVariables } from '@dataconnect/generated';

// The `GetMoviesInList` query requires an argument of type `GetMoviesInListVariables`:
const getMoviesInListVars: GetMoviesInListVariables = {
  listId: ..., 
};

// Call the `getMoviesInListRef()` function to get a reference to the query.
const ref = getMoviesInListRef(getMoviesInListVars);
// Variables can be defined inline as well.
const ref = getMoviesInListRef({ listId: ..., });

// You can also pass in a `DataConnect` instance to the `QueryRef` function.
const dataConnect = getDataConnect(connectorConfig);
const ref = getMoviesInListRef(dataConnect, getMoviesInListVars);

// Call `executeQuery()` on the reference to execute the query.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await executeQuery(ref);

console.log(data.list);

// Or, you can use the `Promise` API.
executeQuery(ref).then((response) => {
  const data = response.data;
  console.log(data.list);
});
```

# Mutations

There are two ways to execute a Data Connect Mutation using the generated Web SDK:
- Using a Mutation Reference function, which returns a `MutationRef`
  - The `MutationRef` can be used as an argument to `executeMutation()`, which will execute the Mutation and return a `MutationPromise`
- Using an action shortcut function, which returns a `MutationPromise`
  - Calling the action shortcut function will execute the Mutation and return a `MutationPromise`

The following is true for both the action shortcut function and the `MutationRef` function:
- The `MutationPromise` returned will resolve to the result of the Mutation once it has finished executing
- If the Mutation accepts arguments, both the action shortcut function and the `MutationRef` function accept a single argument: an object that contains all the required variables (and the optional variables) for the Mutation
- Both functions can be called with or without passing in a `DataConnect` instance as an argument. If no `DataConnect` argument is passed in, then the generated SDK will call `getDataConnect(connectorConfig)` behind the scenes for you.

Below are examples of how to use the `example` connector's generated functions to execute each mutation. You can also follow the examples from the [Data Connect documentation](https://firebase.google.com/docs/data-connect/web-sdk#using-mutations).

## CreateNewList
You can execute the `CreateNewList` mutation using the following action shortcut function, or by calling `executeMutation()` after calling the following `MutationRef` function, both of which are defined in [dataconnect-generated/index.d.ts](./index.d.ts):
```typescript
createNewList(vars: CreateNewListVariables): MutationPromise<CreateNewListData, CreateNewListVariables>;

interface CreateNewListRef {
  ...
  /* Allow users to create refs without passing in DataConnect */
  (vars: CreateNewListVariables): MutationRef<CreateNewListData, CreateNewListVariables>;
}
export const createNewListRef: CreateNewListRef;
```
You can also pass in a `DataConnect` instance to the action shortcut function or `MutationRef` function.
```typescript
createNewList(dc: DataConnect, vars: CreateNewListVariables): MutationPromise<CreateNewListData, CreateNewListVariables>;

interface CreateNewListRef {
  ...
  (dc: DataConnect, vars: CreateNewListVariables): MutationRef<CreateNewListData, CreateNewListVariables>;
}
export const createNewListRef: CreateNewListRef;
```

If you need the name of the operation without creating a ref, you can retrieve the operation name by calling the `operationName` property on the createNewListRef:
```typescript
const name = createNewListRef.operationName;
console.log(name);
```

### Variables
The `CreateNewList` mutation requires an argument of type `CreateNewListVariables`, which is defined in [dataconnect-generated/index.d.ts](./index.d.ts). It has the following fields:

```typescript
export interface CreateNewListVariables {
  name: string;
  description?: string | null;
  isPublic?: boolean | null;
}
```
### Return Type
Recall that executing the `CreateNewList` mutation returns a `MutationPromise` that resolves to an object with a `data` property.

The `data` property is an object of type `CreateNewListData`, which is defined in [dataconnect-generated/index.d.ts](./index.d.ts). It has the following fields:
```typescript
export interface CreateNewListData {
  list_insert: List_Key;
}
```
### Using `CreateNewList`'s action shortcut function

```typescript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig, createNewList, CreateNewListVariables } from '@dataconnect/generated';

// The `CreateNewList` mutation requires an argument of type `CreateNewListVariables`:
const createNewListVars: CreateNewListVariables = {
  name: ..., 
  description: ..., // optional
  isPublic: ..., // optional
};

// Call the `createNewList()` function to execute the mutation.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await createNewList(createNewListVars);
// Variables can be defined inline as well.
const { data } = await createNewList({ name: ..., description: ..., isPublic: ..., });

// You can also pass in a `DataConnect` instance to the action shortcut function.
const dataConnect = getDataConnect(connectorConfig);
const { data } = await createNewList(dataConnect, createNewListVars);

console.log(data.list_insert);

// Or, you can use the `Promise` API.
createNewList(createNewListVars).then((response) => {
  const data = response.data;
  console.log(data.list_insert);
});
```

### Using `CreateNewList`'s `MutationRef` function

```typescript
import { getDataConnect, executeMutation } from 'firebase/data-connect';
import { connectorConfig, createNewListRef, CreateNewListVariables } from '@dataconnect/generated';

// The `CreateNewList` mutation requires an argument of type `CreateNewListVariables`:
const createNewListVars: CreateNewListVariables = {
  name: ..., 
  description: ..., // optional
  isPublic: ..., // optional
};

// Call the `createNewListRef()` function to get a reference to the mutation.
const ref = createNewListRef(createNewListVars);
// Variables can be defined inline as well.
const ref = createNewListRef({ name: ..., description: ..., isPublic: ..., });

// You can also pass in a `DataConnect` instance to the `MutationRef` function.
const dataConnect = getDataConnect(connectorConfig);
const ref = createNewListRef(dataConnect, createNewListVars);

// Call `executeMutation()` on the reference to execute the mutation.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await executeMutation(ref);

console.log(data.list_insert);

// Or, you can use the `Promise` API.
executeMutation(ref).then((response) => {
  const data = response.data;
  console.log(data.list_insert);
});
```

## AddMovieToList
You can execute the `AddMovieToList` mutation using the following action shortcut function, or by calling `executeMutation()` after calling the following `MutationRef` function, both of which are defined in [dataconnect-generated/index.d.ts](./index.d.ts):
```typescript
addMovieToList(vars: AddMovieToListVariables): MutationPromise<AddMovieToListData, AddMovieToListVariables>;

interface AddMovieToListRef {
  ...
  /* Allow users to create refs without passing in DataConnect */
  (vars: AddMovieToListVariables): MutationRef<AddMovieToListData, AddMovieToListVariables>;
}
export const addMovieToListRef: AddMovieToListRef;
```
You can also pass in a `DataConnect` instance to the action shortcut function or `MutationRef` function.
```typescript
addMovieToList(dc: DataConnect, vars: AddMovieToListVariables): MutationPromise<AddMovieToListData, AddMovieToListVariables>;

interface AddMovieToListRef {
  ...
  (dc: DataConnect, vars: AddMovieToListVariables): MutationRef<AddMovieToListData, AddMovieToListVariables>;
}
export const addMovieToListRef: AddMovieToListRef;
```

If you need the name of the operation without creating a ref, you can retrieve the operation name by calling the `operationName` property on the addMovieToListRef:
```typescript
const name = addMovieToListRef.operationName;
console.log(name);
```

### Variables
The `AddMovieToList` mutation requires an argument of type `AddMovieToListVariables`, which is defined in [dataconnect-generated/index.d.ts](./index.d.ts). It has the following fields:

```typescript
export interface AddMovieToListVariables {
  listId: UUIDString;
  movieId: UUIDString;
  note?: string | null;
  position: number;
}
```
### Return Type
Recall that executing the `AddMovieToList` mutation returns a `MutationPromise` that resolves to an object with a `data` property.

The `data` property is an object of type `AddMovieToListData`, which is defined in [dataconnect-generated/index.d.ts](./index.d.ts). It has the following fields:
```typescript
export interface AddMovieToListData {
  listItem_insert: ListItem_Key;
}
```
### Using `AddMovieToList`'s action shortcut function

```typescript
import { getDataConnect } from 'firebase/data-connect';
import { connectorConfig, addMovieToList, AddMovieToListVariables } from '@dataconnect/generated';

// The `AddMovieToList` mutation requires an argument of type `AddMovieToListVariables`:
const addMovieToListVars: AddMovieToListVariables = {
  listId: ..., 
  movieId: ..., 
  note: ..., // optional
  position: ..., 
};

// Call the `addMovieToList()` function to execute the mutation.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await addMovieToList(addMovieToListVars);
// Variables can be defined inline as well.
const { data } = await addMovieToList({ listId: ..., movieId: ..., note: ..., position: ..., });

// You can also pass in a `DataConnect` instance to the action shortcut function.
const dataConnect = getDataConnect(connectorConfig);
const { data } = await addMovieToList(dataConnect, addMovieToListVars);

console.log(data.listItem_insert);

// Or, you can use the `Promise` API.
addMovieToList(addMovieToListVars).then((response) => {
  const data = response.data;
  console.log(data.listItem_insert);
});
```

### Using `AddMovieToList`'s `MutationRef` function

```typescript
import { getDataConnect, executeMutation } from 'firebase/data-connect';
import { connectorConfig, addMovieToListRef, AddMovieToListVariables } from '@dataconnect/generated';

// The `AddMovieToList` mutation requires an argument of type `AddMovieToListVariables`:
const addMovieToListVars: AddMovieToListVariables = {
  listId: ..., 
  movieId: ..., 
  note: ..., // optional
  position: ..., 
};

// Call the `addMovieToListRef()` function to get a reference to the mutation.
const ref = addMovieToListRef(addMovieToListVars);
// Variables can be defined inline as well.
const ref = addMovieToListRef({ listId: ..., movieId: ..., note: ..., position: ..., });

// You can also pass in a `DataConnect` instance to the `MutationRef` function.
const dataConnect = getDataConnect(connectorConfig);
const ref = addMovieToListRef(dataConnect, addMovieToListVars);

// Call `executeMutation()` on the reference to execute the mutation.
// You can use the `await` keyword to wait for the promise to resolve.
const { data } = await executeMutation(ref);

console.log(data.listItem_insert);

// Or, you can use the `Promise` API.
executeMutation(ref).then((response) => {
  const data = response.data;
  console.log(data.listItem_insert);
});
```
</file>

<file path="src/hooks/useAppNavigation.js">
import { useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import { ROUTES } from '../config/routes';

export const useAppNavigation = () => {
  const navigate = useNavigate();

  return {
    goToTest: useCallback(() => navigate(ROUTES.TEST), [navigate]),
    goToTest: useCallback(() => navigate(ROUTES.HOME), [navigate]),
    goToFullExam: useCallback(() => navigate(ROUTES.FULL_EXAM), [navigate]),
    goToGrammar: useCallback(() => navigate(ROUTES.GRAMMAR), [navigate]),
    goToVocabulary: useCallback(() => navigate(ROUTES.VOCABULARY), [navigate]),
    goToProfile: useCallback(() => navigate(ROUTES.PROFILE), [navigate]),
    goToAnswers: useCallback(() => navigate(ROUTES.ANSWERS), [navigate]),
  };
};
</file>

<file path="src/hooks/useAudio.js">
import { useState, useRef, useCallback, useEffect } from 'react';

export const useAudio = (maleVoice, femaleVoice, rate = 1) => {
  // States
  const [status, setStatus] = useState('ready');
  const [progress, setProgress] = useState(0);
  const [repeatCount, setRepeatCount] = useState(0);
  const [isPaused, setIsPaused] = useState(false);
  const [error, setError] = useState(null);

  // Refs
  const utteranceRef = useRef(null);
  const synthRef = useRef(window.speechSynthesis);
  const isPlayingRef = useRef(false);
  const shouldStopRef = useRef(false);
  const currentTimeoutRef = useRef(null);

  // Constants
  const SPEAKER_CONFIG = {
    male: { keywords: ['man', 'customer', 'professor', 'father', 'boy'], pitch: 0.9 },
    female: { keywords: ['woman', 'sales', 'student', 'mother', 'girl'], pitch: 1.1 },
  };
  const PAUSE_BETWEEN_SPEAKERS = 800;
  const PAUSE_BETWEEN_UTTERANCES = 300;
  const BREAK_BETWEEN_REPEATS = 3000;
  const REPEAT_COUNT = 2;

  // Cleanup function
  const cleanup = useCallback(() => {
    // Clear any pending timeouts
    if (currentTimeoutRef.current) {
      clearTimeout(currentTimeoutRef.current);
      currentTimeoutRef.current = null;
    }

    // Cancel speech synthesis
    if (synthRef.current) {
      synthRef.current.cancel();
    }

    // Reset refs
    utteranceRef.current = null;
    isPlayingRef.current = false;
    shouldStopRef.current = false;
  }, []);

  // Cleanup on unmount
  useEffect(() => {
    return () => {
      cleanup();
    };
  }, [cleanup]);

  // Validate voices
  useEffect(() => {
    if (!maleVoice && !femaleVoice) {
      setError('No voices provided');
    } else {
      setError(null);
    }
  }, [maleVoice, femaleVoice]);

  const getVoiceAndPitchForSpeaker = useCallback((speaker) => {
    if (!speaker) {
      return { voice: maleVoice || femaleVoice, pitch: 1 };
    }

    const lowerSpeaker = speaker.toLowerCase();

    // Check male keywords
    if (SPEAKER_CONFIG.male.keywords.some(keyword => lowerSpeaker.includes(keyword))) {
      return { voice: maleVoice, pitch: SPEAKER_CONFIG.male.pitch };
    }

    // Check female keywords
    if (SPEAKER_CONFIG.female.keywords.some(keyword => lowerSpeaker.includes(keyword))) {
      return { voice: femaleVoice, pitch: SPEAKER_CONFIG.female.pitch };
    }

    // Fallback
    return { voice: maleVoice || femaleVoice, pitch: 1 };
  }, [maleVoice, femaleVoice]);

  const parseScriptToUtterances = useCallback((script) => {
    if (!script || typeof script !== 'string') return [];

    const utteranceRegex = /(?:^|\n)([A-Z][a-z]+):?\s*(.*?)(?=\n[A-Z][a-z]+:|$)/gs;
    const matches = [...script.matchAll(utteranceRegex)];

    return matches
      .map(match => ({
        speaker: match[1].trim(),
        text: match[2].trim().replace(/^\s+|\s+$/g, '')
      }))
      .filter(u => u.text.length > 0);
  }, []);

  const speakUtterance = useCallback(
    (text, voice, pitch) => {
      return new Promise((resolve, reject) => {
        // Check if should stop
        if (shouldStopRef.current) {
          resolve();
          return;
        }

        if (!voice) {
          console.warn('Voice not available');
          resolve();
          return;
        }

        const utterance = new SpeechSynthesisUtterance(text);
        utterance.voice = voice;
        utterance.rate = Math.max(0.1, Math.min(2, rate));
        utterance.pitch = Math.max(0.1, Math.min(2, pitch));
        utterance.volume = 1;

        utterance.onend = () => {
          utteranceRef.current = null;
          resolve();
        };

        utterance.onerror = (e) => {
          console.error('Speech synthesis error:', e.error);
          utteranceRef.current = null;
          
          // Don't treat 'interrupted' as error (happens on stop)
          if (e.error === 'interrupted' || e.error === 'canceled') {
            resolve();
          } else {
            setError(`Speech error: ${e.error}`);
            reject(e);
          }
        };

        utteranceRef.current = utterance;
        
        // Double-check before speaking
        if (!shouldStopRef.current) {
          synthRef.current.speak(utterance);
        } else {
          resolve();
        }
      });
    },
    [rate]
  );

  const delay = useCallback((ms) => {
    return new Promise((resolve) => {
      // Check if should stop immediately
      if (shouldStopRef.current) {
        resolve();
        return;
      }

      currentTimeoutRef.current = setTimeout(() => {
        currentTimeoutRef.current = null;
        resolve();
      }, ms);
    });
  }, []);

  const stopAudio = useCallback(() => {
    try {
      console.log('🛑 Stopping audio...');
      
      // Set stop flag first
      shouldStopRef.current = true;
      isPlayingRef.current = false;
      
      // Clear any pending timeouts
      if (currentTimeoutRef.current) {
        clearTimeout(currentTimeoutRef.current);
        currentTimeoutRef.current = null;
      }

      // Cancel speech synthesis multiple times for reliability
      synthRef.current.cancel();
      
      // Small delay then cancel again (iOS/Safari fix)
      setTimeout(() => {
        synthRef.current.cancel();
      }, 10);

      // Reset all state
      utteranceRef.current = null;
      setIsPaused(false);
      setRepeatCount(0);
      setStatus('⏹️ Đã dừng');
      setProgress(0);
      
      console.log('✅ Audio stopped successfully');
    } catch (err) {
      console.error('❌ Stop error:', err);
      setError('Failed to stop audio');
    }
  }, []);

  const pauseAudio = useCallback(() => {
    try {
      if (synthRef.current.speaking && !isPaused && isPlayingRef.current) {
        synthRef.current.pause();
        setIsPaused(true);
        setStatus('⏸️ Đã tạm dừng');
      }
    } catch (err) {
      console.error('Pause error:', err);
      setError('Failed to pause audio');
    }
  }, [isPaused]);

  const playAudio = useCallback(
    async (script) => {
      try {
        // If paused, resume
        if (isPaused) {
          synthRef.current.resume();
          setIsPaused(false);
          setStatus('▶️ Tiếp tục phát...');
          return;
        }

        // Check for voices
        if (!maleVoice && !femaleVoice) {
          setError('Voices not available. Please wait for voices to load.');
          setStatus('❌ Giọng nói không khả dụng');
          return;
        }

        // Stop any existing playback first
        stopAudio();
        
        // Wait a bit for cleanup
        await new Promise(resolve => setTimeout(resolve, 100));

        // Reset flags
        shouldStopRef.current = false;
        isPlayingRef.current = true;
        setRepeatCount(0);
        setError(null);

        const utterances = parseScriptToUtterances(script);
        if (utterances.length === 0) {
          setError('No valid utterances found in script');
          setStatus('❌ Script không hợp lệ');
          isPlayingRef.current = false;
          return;
        }

        const isMultiSpeaker = utterances.length > 1;

        for (let repeat = 0; repeat < REPEAT_COUNT; repeat++) {
          // Check if stopped
          if (shouldStopRef.current) {
            console.log('🛑 Playback stopped by user');
            break;
          }

          setRepeatCount(repeat + 1);
          setStatus(`▶️ Đang phát lần ${repeat + 1}/${REPEAT_COUNT}...`);

          if (isMultiSpeaker) {
            for (let i = 0; i < utterances.length; i++) {
              // Check if stopped
              if (shouldStopRef.current) {
                break;
              }

              const { speaker, text } = utterances[i];
              const { voice, pitch } = getVoiceAndPitchForSpeaker(speaker);

              await speakUtterance(text, voice, pitch);

              // Check if stopped after speaking
              if (shouldStopRef.current) {
                break;
              }

              // Pause between utterances
              if (i < utterances.length - 1) {
                const nextSpeaker = utterances[i + 1]?.speaker;
                const pauseTime = 
                  speaker !== nextSpeaker
                    ? PAUSE_BETWEEN_SPEAKERS
                    : PAUSE_BETWEEN_UTTERANCES;

                await delay(pauseTime);
              }

              // Update progress
              const currentProgress = ((repeat + (i + 1) / utterances.length) / REPEAT_COUNT) * 100;
              setProgress(currentProgress);
            }
          } else {
            // Monologue: use default voice
            if (shouldStopRef.current) {
              break;
            }

            const { voice, pitch } = getVoiceAndPitchForSpeaker('');
            await speakUtterance(script, voice, pitch);
            setProgress(((repeat + 1) / REPEAT_COUNT) * 100);
          }

          // Check if stopped
          if (shouldStopRef.current) {
            break;
          }

          // Pause between repeats (except after last repeat)
          if (repeat < REPEAT_COUNT - 1) {
            setStatus('⏸️ Nghỉ 3 giây...');
            await delay(BREAK_BETWEEN_REPEATS);
          }
        }

        // Only show completion if not stopped
        if (!shouldStopRef.current) {
          setStatus('✅ Hoàn thành (đã đọc 2 lần)');
          setProgress(100);
        }

        isPlayingRef.current = false;
      } catch (err) {
        console.error('Playback error:', err);
        setError(err.message);
        setStatus('❌ Lỗi phát âm thanh');
        isPlayingRef.current = false;
      }
    },
    [
      isPaused, 
      maleVoice, 
      femaleVoice, 
      parseScriptToUtterances, 
      getVoiceAndPitchForSpeaker, 
      speakUtterance,
      delay,
      stopAudio
    ]
  );

  const resetError = useCallback(() => {
    setError(null);
  }, []);

  return {
    status,
    progress,
    repeatCount,
    isPaused,
    error,
    playAudio,
    pauseAudio,
    stopAudio,
    resetError,
  };
};
export default useAudio;
</file>

<file path="src/hooks/useAutoSaveProgress.js">
import { useEffect, useRef } from 'react';
import { useUserProgress } from './useUserProgress';

/**
 * Hook tự động lưu progress sau 30 giây không có thay đổi
 * Hỗ trợ cả Clerk và Firebase Authentication
 */
export const useAutoSaveProgress = (answers, selectedExam, selectedPart, partData) => {
  const { saveProgress, currentUser } = useUserProgress();
  const saveTimeoutRef = useRef(null);
  const lastSavedAnswersRef = useRef('{}');

  useEffect(() => {
    // Clear previous timeout
    if (saveTimeoutRef.current) {
      clearTimeout(saveTimeoutRef.current);
    }

    // ✅ FIX 1: Kiểm tra currentUser đúng cách
    if (!currentUser || !currentUser.provider) {
      console.log('⏸️ Auto-save skipped: User not logged in or provider missing', {
        currentUser,
      });
      return;
    }

    // Don't auto-save if no part data
    if (!partData || !partData.questions) {
      console.log('⏸️ Auto-save skipped: No part data');
      return;
    }

    // Check if answers changed
    const currentAnswersStr = JSON.stringify(answers);
    const answersChanged = currentAnswersStr !== lastSavedAnswersRef.current;
    const hasAnswers = Object.keys(answers).length > 0;

    console.log('🔍 Auto-save check:', {
      hasAnswers,
      answersChanged,
      answerCount: Object.keys(answers).length,
      userId: currentUser.id,
      provider: currentUser.provider,
      clerkId: currentUser.clerkId,
      firebaseUid: currentUser.firebaseUid,
    });

    if (answersChanged && hasAnswers) {
      console.log(`⏱️ Auto-save scheduled in 30 seconds (${currentUser.provider})...`);

      // Auto-save after 30 seconds of inactivity
      saveTimeoutRef.current = setTimeout(async () => {
        try {
          // Calculate score
          const correct = Object.entries(answers).filter(([questionId, answerIndex]) => {
            const question = partData.questions.find(q => q.id === questionId);
            return question && question.correct === answerIndex;
          }).length;

          const total = partData.questions.length;
          const percentage = total > 0 ? (correct / total) * 100 : 0;
          const correctAnswers = correct;

          console.log(`💾 Auto-saving progress (${currentUser.provider})...`, {
            exam: selectedExam,
            part: selectedPart,
            score: percentage,
            correctAnswers,
            totalQuestions: total,
            answersCount: Object.keys(answers).length,
            userId: currentUser.id,
            clerkId: currentUser.clerkId,
            firebaseUid: currentUser.firebaseUid,
          });

          // ✅ FIX 2: Pass correct data structure
          const result = await saveProgress({
            exam: selectedExam,
            part: selectedPart,
            score: percentage,
            answers: answers,
            totalQuestions: total,
            correctAnswers: correctAnswers,
            isDraft: true, // Mark as draft (not submitted)
            testType: 'auto-save',
          });

          if (result) {
            lastSavedAnswersRef.current = currentAnswersStr;
            console.log(`✅ Auto-save successful (${currentUser.provider})!`);
          } else {
            console.warn(`⚠️ Auto-save returned false (${currentUser.provider})`);
          }
        } catch (error) {
          console.error('❌ Error auto-saving:', {
            message: error.message,
            code: error.code,
            provider: currentUser.provider,
          });
        }
      }, 30000); // 30 seconds
    }

    return () => {
      if (saveTimeoutRef.current) {
        clearTimeout(saveTimeoutRef.current);
      }
    };
  }, [answers, selectedExam, selectedPart, partData, saveProgress, currentUser]);
};

export default useAutoSaveProgress;
</file>

<file path="src/hooks/useClerkAuth.js">
import { useAuth as useClerkAuth, useUser } from '@clerk/clerk-react';

export const useClerkAuthentication = () => {
  const { isSignedIn, isLoaded } = useClerkAuth();
  const { user } = useUser();

  return {
    isSignedIn,
    isLoaded,
    user: user
      ? {
          id: user.id,
          email: user.emailAddresses[0]?.emailAddress,
          displayName: user.firstName ? `${user.firstName} ${user.lastName}` : user.emailAddresses[0]?.emailAddress,
          photoURL: user.profileImageUrl,
        }
      : null,
  };
};
export default useClerkAuthentication;
</file>

<file path="src/hooks/useClerkFirebaseSync.js">
import { useEffect } from 'react';
import { useUser } from '@clerk/clerk-react';

export const useClerkFirebaseSync = () => {
  const { user, isLoaded, isSignedIn } = useUser();

  useEffect(() => {
    if (!isLoaded || !isSignedIn || !user) {
      return;
    }

    const initializeUser = async () => {
      try {
        console.log('✅ User authenticated:', user.id);
        console.log('📧 Email:', user.primaryEmailAddress?.emailAddress);
        console.log('👤 Name:', user.fullName);
        
        // ✅ Không cần sync vào collection 'users'
        // Clerk đã quản lý thông tin user
        // Collection 'userProgress' đã có rule: allow write: if true
        
        console.log('🎯 Ready to use userProgress collection');
      } catch (error) {
        console.error('❌ Error initializing user:', error);
      }
    };

    initializeUser();
  }, [user, isLoaded, isSignedIn]);

  // Return user info for components that need it
  return {
    userId: user?.id,
    email: user?.primaryEmailAddress?.emailAddress,
    fullName: user?.fullName,
    imageUrl: user?.imageUrl,
    isLoaded,
    isSignedIn
  };
};
export default useClerkFirebaseSync;
</file>

<file path="src/hooks/useFirebaseAuth.js">
import { useState, useEffect } from 'react';
import { 
  signInWithPopup, 
  signOut, 
  onAuthStateChanged, 
  GoogleAuthProvider,
  setPersistence,
  browserLocalPersistence
} from 'firebase/auth';
import { auth } from '../config/firebase';

/**
 * Hook Firebase Authentication với Google Sign-in
 * ✅ Fix: Popup lag, promise issue, COOP policy
 */
export const useFirebaseAuth = () => {
  const [user, setUser] = useState(null);
  const [isSignedIn, setIsSignedIn] = useState(false);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isLoaded, setIsLoaded] = useState(false);

  // ✅ FIX 1: Set persistence tại mount
  useEffect(() => {
    const initializePersistence = async () => {
      try {
        await setPersistence(auth, browserLocalPersistence);
        console.log('✅ Firebase persistence initialized');
      } catch (err) {
        console.error('⚠️ Persistence error:', err.message);
      }
    };

    initializePersistence();
  }, []);

  // ✅ FIX 2: Listen to auth state changes
  useEffect(() => {
    const unsubscribe = onAuthStateChanged(
      auth,
      (firebaseUser) => {
        if (firebaseUser) {
          console.log('✅ [Firebase Auth] User signed in:', firebaseUser.email);
          setUser(firebaseUser);
          setIsSignedIn(true);
          setError(null);
        } else {
          console.log('⚪ [Firebase Auth] User signed out');
          setUser(null);
          setIsSignedIn(false);
        }
        setLoading(false);
        setIsLoaded(true);
      },
      (err) => {
        console.error('❌ [Firebase Auth] State change error:', err.message);
        setError(err.message);
        setLoading(false);
        setIsLoaded(true);
      }
    );

    return unsubscribe;
  }, []);

  // ✅ FIX 3: Google Sign-in với error handling
  const signInWithGoogle = async () => {
    try {
      setLoading(true);
      setError(null);

      console.log('🔄 Starting Google Sign-in...');

      // Initialize Google Provider
      const provider = new GoogleAuthProvider();
      
      // ✅ FIX 4: Set persistence before popup
      await setPersistence(auth, browserLocalPersistence);

      // Add scopes for additional info
      provider.addScope('profile');
      provider.addScope('email');

      // ✅ FIX 5: Open popup with redirect fallback
      let result;
      
      try {
        // Thử popup trước
        result = await signInWithPopup(auth, provider);
        console.log('✅ Google Sign-in successful (popup)');
      } catch (popupError) {
        // Nếu popup bị block, thử redirect
        if (popupError.code === 'auth/popup-blocked' || 
            popupError.code === 'auth/popup-closed-by-user' ||
            popupError.message.includes('Cross-Origin-Opener-Policy')) {
          
          console.warn('⚠️ Popup blocked, trying alternative method...');
          // Popup bị block - return error message
          throw new Error('Popup bị block. Vui lòng cho phép popup trong trình duyệt hoặc thử lại.');
        }
        throw popupError;
      }

      // Extract user info
      const signedInUser = result.user;
      
      console.log('✅ User signed in:', {
        uid: signedInUser.uid,
        email: signedInUser.email,
        displayName: signedInUser.displayName,
        photoURL: signedInUser.photoURL,
      });

      setUser(signedInUser);
      setIsSignedIn(true);
      setError(null);
      setLoading(false);

      return {
        success: true,
        user: signedInUser,
        message: 'Đăng nhập thành công!'
      };

    } catch (err) {
      console.error('❌ Error signing in with Google:', {
        code: err.code,
        message: err.message,
      });

      const errorMessage = 
        err.code === 'auth/popup-closed-by-user' ? 'Bạn đã đóng popup đăng nhập' :
        err.code === 'auth/popup-blocked' ? 'Popup bị trình duyệt block' :
        err.message.includes('Cross-Origin') ? 'Lỗi bảo mật: COOP policy' :
        err.message;

      setError(errorMessage);
      setLoading(false);

      return {
        success: false,
        error: errorMessage,
        code: err.code
      };
    }
  };

  // ✅ FIX 6: Sign out
  const handleSignOut = async () => {
    try {
      setLoading(true);
      console.log('🔄 Signing out...');
      
      await signOut(auth);
      
      setUser(null);
      setIsSignedIn(false);
      setError(null);
      setLoading(false);
      
      console.log('✅ Sign out successful');
      return { success: true };
    } catch (err) {
      console.error('❌ Error signing out:', err.message);
      setError(err.message);
      setLoading(false);
      
      return { success: false, error: err.message };
    }
  };

  return {
    user,
    isSignedIn,
    loading,
    error,
    isLoaded,
    signInWithGoogle,
    signOut: handleSignOut,
  };
};

export default useFirebaseAuth;
</file>

<file path="src/hooks/useFirebaseUserSync.js">
import { useEffect, useState } from 'react';
import { doc, setDoc, getDoc, serverTimestamp } from 'firebase/firestore';
import { auth, db } from '../config/firebase';

/**
 * Hook để sync Firebase Auth user vào Firestore
 * Tương tự như useClerkFirebaseSync nhưng cho Firebase Authentication
 */
export const useFirebaseUserSync = () => {
  const [syncing, setSyncing] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    const unsubscribe = auth.onAuthStateChanged(async (firebaseUser) => {
      if (!firebaseUser) {
        return;
      }

      try {
        setSyncing(true);
        setError(null);

        const userRef = doc(db, 'users', firebaseUser.uid);
        const userSnap = await getDoc(userRef);

        const userData = {
          email: firebaseUser.email,
          displayName: firebaseUser.displayName,
          photoURL: firebaseUser.photoURL,
          authProvider: 'firebase',
          updatedAt: serverTimestamp(),
        };

        if (!userSnap.exists()) {
          // Tạo user mới
          await setDoc(userRef, {
            ...userData,
            createdAt: serverTimestamp(),
          });
          console.log('✅ Firebase user synced to Firestore:', firebaseUser.uid);
        } else {
          // Cập nhật thông tin user
          await setDoc(userRef, userData, { merge: true });
          console.log('✅ Firebase user info updated:', firebaseUser.uid);
        }
      } catch (err) {
        console.error('❌ Error syncing Firebase user:', err);
        setError(err.message);
      } finally {
        setSyncing(false);
      }
    });

    return unsubscribe;
  }, []);

  return { syncing, error };
};
export default useFirebaseUserSync;
</file>

<file path="src/hooks/useFirestoreData.js">
import { useState, useEffect } from 'react';
import { collection, getDocs, doc, getDoc } from 'firebase/firestore';
import { db } from '../config/firebase';

export const useFirestoreData = () => {
  const [examData, setExamData] = useState({});
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // Fetch tất cả exam data
  useEffect(() => {
    const fetchExamData = async () => {
      try {
        setLoading(true);
        const examCollection = collection(db, 'examData');
        const snapshot = await getDocs(examCollection);
        
        const data = {};
        snapshot.docs.forEach(doc => {
          const docData = doc.data();
          if (docData.examId) {
            // Đây là part document
            const examId = docData.examId;
            const partId = docData.partId;
            
            if (!data[examId]) {
              data[examId] = { parts: {} };
            }
            
            data[examId].parts[partId] = {
              title: docData.title,
              description: docData.description,
              script: docData.script,
              questions: docData.questions,
            };
          } else {
            // Đây là exam metadata
            data[doc.id] = {
              ...docData,
              parts: data[doc.id]?.parts || {}
            };
          }
        });
        
        setExamData(data);
        setError(null);
      } catch (err) {
        console.error('Error fetching exam data:', err);
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchExamData();
  }, []);

  // Fetch single exam
  const getExam = async (examId) => {
    try {
      const docRef = doc(db, 'examData', examId);
      const docSnap = await getDoc(docRef);
      return docSnap.exists() ? docSnap.data() : null;
    } catch (err) {
      console.error('Error fetching exam:', err);
      throw err;
    }
  };

  return { examData, loading, error, getExam };
};

export default useFirestoreData;
</file>

<file path="src/hooks/usePresence.js">
// src/hooks/usePresence.js
import { useEffect } from 'react';
import { onDisconnect, ref, set, serverTimestamp } from 'firebase/database';
import { rtdb } from '../config/firebase.js';
import { useFirebaseAuth } from './contexts/FirebaseAuthContext';

export const usePresence = () => {
  const { user, isSignedIn } = useFirebaseAuth();

  useEffect(() => {
    if (!isSignedIn || !user?.uid) return;

    const userStatusRef = ref(rtdb, `presence/${user.uid}`);

    // Ghi trạng thái online
    const goOnline = () => {
      set(userStatusRef, {
        online: true,
        lastSeen: serverTimestamp(),
      });
    };

    // Khi disconnect (đóng tab, mất mạng) → tự động offline
    const goOffline = () => {
      set(userStatusRef, {
        online: false,
        lastSeen: serverTimestamp(),
      });
    };

    // Đánh dấu online
    goOnline();

    // Tự động offline khi disconnect
    onDisconnect(userStatusRef).set({
      online: false,
      lastSeen: serverTimestamp(),
    });

    // Cập nhật lastSeen mỗi 30s (giữ kết nối)
    const interval = setInterval(goOnline, 30_000);

    // Cleanup
    return () => {
      clearInterval(interval);
      goOffline();
    };
  }, [isSignedIn, user?.uid]);
};
</file>

<file path="src/hooks/usePreviousAttempts.js">
import { useState, useEffect } from 'react';
import { useUser } from '@clerk/clerk-react';
import { collection, query, where, onSnapshot } from 'firebase/firestore';
import { db } from '../config/firebase';

export const usePreviousAttempts = (selectedExam, selectedPart) => {
  const { user: clerkUser, isLoaded } = useUser();
  const [attempts, setAttempts] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (!isLoaded || !clerkUser || !selectedExam || !selectedPart) {
      setAttempts([]);
      setLoading(false);
      return;
    }

    console.log('📊 Fetching previous attempts for:', { selectedExam, selectedPart });

    try {
      const q = query(
        collection(db, 'userProgress'),
        where('clerkId', '==', clerkUser.id),
        where('exam', '==', selectedExam),
        where('part', '==', selectedPart)
      );

      const unsubscribe = onSnapshot(
        q,
        (snapshot) => {
          const data = snapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data(),
            completedAt: doc.data().completedAt?.toDate?.() || new Date(doc.data().completedAt),
          }));

          // Sort by completedAt in memory (no need for Firestore index)
          const sortedData = data.sort((a, b) => {
            const dateA = a.completedAt instanceof Date ? a.completedAt : new Date(0);
            const dateB = b.completedAt instanceof Date ? b.completedAt : new Date(0);
            return dateB - dateA; // Descending (newest first)
          });

          console.log('✅ Previous attempts loaded:', sortedData.length);
          setAttempts(sortedData);
          setLoading(false);
        },
        (err) => {
          console.error('❌ Error fetching attempts:', err.code, err.message);
          setAttempts([]);
          setLoading(false);
        }
      );

      return unsubscribe;
    } catch (err) {
      console.error('❌ Error setting up attempts listener:', err);
      setAttempts([]);
      setLoading(false);
    }
  }, [clerkUser, isLoaded, selectedExam, selectedPart]);

  return { attempts, loading };
};
</file>

<file path="src/hooks/useResponsiveTTS.js">
// import { useState, useRef, useCallback, useEffect } from 'react';

// const useResponsiveTTS = (ttsOptions = { rate: 0.9, pitch: 1.0, volume: 1 }) => {
//   const [isPlaying, setIsPlaying] = useState(false);
//   const [currentIndex, setCurrentIndex] = useState(-1);
//   const [isInitialized, setIsInitialized] = useState(false);
//   const [error, setError] = useState(null);
//   const [useFallback, setUseFallback] = useState(false); // New: Track fallback usage
//   const queueRef = useRef([]);

//   // Speaker lists (unchanged)
//   const FEMALE_SPEAKERS = ['Woman', 'Sarah', 'Anna', 'Client 2', 'Sales Associate', 'Older Woman', 'Student B', 'Student 2', 'Counselor'];
//   const MALE_SPEAKERS = ['Man', 'Mark', 'Ben', 'Client 1', 'Professor', 'John', 'Mike', 'Waiter', 'Customer', 'Manager', 'HR Rep', 'Interviewer 1', 'Interviewer 2', 'Candidate', 'Professor A', 'Student 1', 'Student', 'Parent', 'Travel Agent', 'Narrator'];

//   // Voices (unchanged)
//   const voices = useRef([
//     { name: 'UK English Female', gender: 'female' },
//     { name: 'UK English Male', gender: 'male' },
//     { name: 'US English Female', gender: 'female' },
//     { name: 'US English Male', gender: 'male' },
//   ]);

//   const getSpeakerVoice = useCallback((speaker) => {
//     const isFemale = FEMALE_SPEAKERS.some(name => speaker.includes(name));
//     const isMale = MALE_SPEAKERS.some(name => speaker.includes(name));
//     if (isFemale) return voices.current.find(v => v.gender === 'female')?.name || 'US English Female';
//     if (isMale) return voices.current.find(v => v.gender === 'male')?.name || 'US English Male';
//     return 'US English Female';
//   }, []);

//   const isMaleSpeaker = useCallback((speaker) => MALE_SPEAKERS.some(name => speaker.includes(name)), []);

//   // Prepare text (unchanged)
//   const prepareTextForTTS = useCallback((text) => {
//     const sentences = text.split(/(?<=[.!?])\s+/).map(sentence => sentence.trim()).filter(Boolean);
//     let expressiveText = '';
//     sentences.forEach((sentence, idx) => {
//       const emphasized = sentence.replace(/\b[A-Z][a-z]+\b/, (match) => `<emphasis level="strong">${match}</emphasis>`);
//       expressiveText += emphasized;
//       if (idx < sentences.length - 1) expressiveText += ' [pause 800ms] ';
//     });
//     return expressiveText;
//   }, []);

//   // Fallback: Native Web Speech API
//   const speakWithFallback = useCallback((text, speaker, options) => {
//     if (!('speechSynthesis' in window)) {
//       setError('Browser does not support native TTS.');
//       return;
//     }
//     const utterance = new SpeechSynthesisUtterance(text);
//     const voice = speechSynthesis.getVoices().find(v => v.lang.startsWith('en'));
//     utterance.voice = voice;
//     utterance.rate = options.rate || ttsOptions.rate;
//     utterance.pitch = isMaleSpeaker(speaker) ? 0.7 : ttsOptions.pitch;
//     utterance.volume = options.volume || ttsOptions.volume;
//     utterance.onend = () => setIsPlaying(false);
//     speechSynthesis.speak(utterance);
//   }, [ttsOptions, isMaleSpeaker]);

//   // Speak next (enhanced with fallback)
//   const speakNext = useCallback(() => {
//     const next = queueRef.current.shift();
//     if (!next) {
//       setIsPlaying(false);
//       setCurrentIndex(-1);
//       return;
//     }
//     setCurrentIndex(next.index);
//     setIsPlaying(true);
//     const preparedText = prepareTextForTTS(next.text);
//     if (window.responsiveVoice && !useFallback) {
//       // Primary: ResponsiveVoice
//       const voice = getSpeakerVoice(next.speaker);
//       const pitch = isMaleSpeaker(next.speaker) ? 0.7 : ttsOptions.pitch;
//       window.responsiveVoice.speak(preparedText, voice, {
//         rate: next.options.rate || ttsOptions.rate,
//         pitch: pitch,
//         volume: next.options.volume || ttsOptions.volume,
//         onend: () => queueRef.current.length > 0 ? speakNext() : (setIsPlaying(false), setCurrentIndex(-1)),
//         onerror: (e) => {
//           console.error('ResponsiveVoice error:', e);
//           setUseFallback(true); // Switch to fallback
//           speakWithFallback(preparedText, next.speaker, next.options);
//         }
//       });
//     } else {
//       // Fallback: Native API
//       speakWithFallback(preparedText, next.speaker, next.options);
//       setTimeout(() => { // Simulate onend
//         if (queueRef.current.length > 0) speakNext();
//         else (setIsPlaying(false), setCurrentIndex(-1));
//       }, preparedText.length * 50); // Rough timing estimate
//     }
//   }, [ttsOptions, getSpeakerVoice, isMaleSpeaker, prepareTextForTTS, useFallback, speakWithFallback]);

//   // Play functions (unchanged structure, with fallback awareness)
//   const playScript = useCallback((conversations, filterSpeaker = null) => {
//     if (!isInitialized) {
//       setError('TTS service unavailable. Ensure browser audio is enabled.');
//       return;
//     }
//     if (window.responsiveVoice) window.responsiveVoice.cancel();
//     else if ('speechSynthesis' in window) speechSynthesis.cancel();
//     queueRef.current = conversations
//       .filter(conv => !filterSpeaker || conv.speaker === filterSpeaker)
//       .map((conv, idx) => ({ text: conv.text, speaker: conv.speaker, options: ttsOptions, index: idx }));
//     setIsPlaying(queueRef.current.length > 0);
//     setCurrentIndex(-1);
//     setError(null);
//     if (queueRef.current.length > 0) speakNext();
//   }, [ttsOptions, isInitialized, speakNext]);

//   const playSingle = useCallback((conv, index) => {
//     if (!isInitialized) return;
//     if (window.responsiveVoice) window.responsiveVoice.cancel();
//     else if ('speechSynthesis' in window) speechSynthesis.cancel();
//     queueRef.current = [{ text: conv.text, speaker: conv.speaker, options: ttsOptions, index }];
//     setIsPlaying(true);
//     setCurrentIndex(index);
//     setError(null);
//     speakNext();
//   }, [ttsOptions, isInitialized, speakNext]);

//   const pauseScript = useCallback(() => {
//     if (window.responsiveVoice) window.responsiveVoice.cancel();
//     else if ('speechSynthesis' in window) speechSynthesis.cancel();
//     queueRef.current = [];
//     setIsPlaying(false);
//     setCurrentIndex(-1);
//     setError(null);
//   }, []);

//   // Initialization (enhanced logging and fallback)
//   useEffect(() => {
//     let intervalId, timeoutId;
//     const checkInit = () => {
//       console.log('TTS Check: ResponsiveVoice available?', !!window.responsiveVoice); // Debug log
//       if (window.responsiveVoice && !isInitialized) {
//         setIsInitialized(true);
//         console.log('Primary TTS (ResponsiveVoice) initialized.');
//       } else if (!window.responsiveVoice && 'speechSynthesis' in window && !isInitialized) {
//         setIsInitialized(true);
//         setUseFallback(true);
//         console.log('Fallback TTS (Native Web Speech) activated.');
//       }
//     };
//     checkInit();
//     intervalId = setInterval(checkInit, 1000);
//     timeoutId = setTimeout(() => {
//       clearInterval(intervalId);
//       if (!isInitialized) setError('TTS connection failed. Check console for details and retry.');
//     }, 5000);
//     return () => {
//       clearInterval(intervalId);
//       clearTimeout(timeoutId);
//     };
//   }, [isInitialized]);

//   useEffect(() => {
//     return () => {
//       if (window.responsiveVoice) window.responsiveVoice.cancel();
//       else if ('speechSynthesis' in window) speechSynthesis.cancel();
//     };
//   }, []);

//   return { isPlaying, currentIndex, playScript, playSingle, pauseScript, isInitialized, error, useFallback };
// };

// export default useResponsiveTTS;
</file>

<file path="src/hooks/useSplashScreen.js">
// src/hooks/useSplashScreen.js
import { useEffect, useState } from 'react';

export const useSplashScreen = (duration = 3000) => {
  const [showSplash, setShowSplash] = useState(true);

  useEffect(() => {
    const timer = setTimeout(() => {
      setShowSplash(false);
    }, duration);

    return () => clearTimeout(timer);
  }, [duration]);

  return showSplash;
};

export default useSplashScreen;
</file>

<file path="src/hooks/useVoices.js">
import { useState, useEffect, useRef, useCallback, useMemo } from 'react';

export const useVoices = () => {
  // ========== STATE ==========
  const [allVoices, setAllVoices] = useState([]);
  const [selectedMaleIndex, setSelectedMaleIndex] = useState(-1);
  const [selectedFemaleIndex, setSelectedFemaleIndex] = useState(-1);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  
  // ========== NEW: INDIVIDUAL SPEAKER VOICES ==========
  // Travel Agent Scenario
  const [travelAgentVoiceIndex, setTravelAgentVoiceIndex] = useState(-1);
  const [client1VoiceIndex, setClient1VoiceIndex] = useState(-1);
  const [client2VoiceIndex, setClient2VoiceIndex] = useState(-1);

  // Professor Scenario
  const [professorVoiceIndex, setProfessorVoiceIndex] = useState(-1);
  const [student1VoiceIndex, setStudent1VoiceIndex] = useState(-1);
  const [student2VoiceIndex, setStudent2VoiceIndex] = useState(-1);

  // Exam 1 Speakers
  const [markVoiceIndex, setMarkVoiceIndex] = useState(-1);
  const [sarahVoiceIndex, setSarahVoiceIndex] = useState(-1);

  // Exam 2 Speakers
  const [annaVoiceIndex, setAnnaVoiceIndex] = useState(-1);
  const [benVoiceIndex, setBenVoiceIndex] = useState(-1);

  // ========== REFS ==========
  const synthRef = useRef(null);
  const voiceLoadAttemptsRef = useRef(0);
  const loadTimeoutRef = useRef(null);
  const isMountedRef = useRef(true);

  const MAX_LOAD_ATTEMPTS = 20;
  const LOAD_RETRY_DELAY = 150;

  // ========== SPEAKER CONFIGURATION ==========
  const SPEAKER_VOICES = useMemo(() => ({
    // Travel Agent Scenario
    'Travel Agent': {
      gender: 'male',
      index: travelAgentVoiceIndex,
      setIndex: setTravelAgentVoiceIndex,
    },
    'Client 1': {
      gender: 'male',
      index: client1VoiceIndex,
      setIndex: setClient1VoiceIndex,
    },
    'Client 2': {
      gender: 'female',
      index: client2VoiceIndex,
      setIndex: setClient2VoiceIndex,
    },

    // Professor Scenario
    'Professor': {
      gender: 'male',
      index: professorVoiceIndex,
      setIndex: setProfessorVoiceIndex,
    },
    'Student 1': {
      gender: 'male',
      index: student1VoiceIndex,
      setIndex: setStudent1VoiceIndex,
    },
    'Student 2': {
      gender: 'female',
      index: student2VoiceIndex,
      setIndex: setStudent2VoiceIndex,
    },

    // Exam 1
    'Mark': {
      gender: 'male',
      index: markVoiceIndex,
      setIndex: setMarkVoiceIndex,
    },
    'Sarah': {
      gender: 'female',
      index: sarahVoiceIndex,
      setIndex: setSarahVoiceIndex,
    },

    // Exam 2
    'Anna': {
      gender: 'female',
      index: annaVoiceIndex,
      setIndex: setAnnaVoiceIndex,
    },
    'Ben': {
      gender: 'male',
      index: benVoiceIndex,
      setIndex: setBenVoiceIndex,
    },
  }), [
    travelAgentVoiceIndex, client1VoiceIndex, client2VoiceIndex,
    professorVoiceIndex, student1VoiceIndex, student2VoiceIndex,
    markVoiceIndex, sarahVoiceIndex, annaVoiceIndex, benVoiceIndex
  ]);

  // ========== VOICE SELECTION PREDICATES ==========
  const VOICE_PREDICATES = useMemo(
    () => ({
      female: (v) => {
        if (!v?.name || !v?.lang) return false;
        const nameLower = v.name.toLowerCase();
        const lang = v.lang.toLowerCase();

        // Priority 1: Explicit female markers
        if (nameLower.includes('female') || nameLower.includes('woman')) return true;
        
        // Priority 2: Female names
        const femaleNames = [
          'zira', 'hazel', 'samantha', 'victoria', 'susan', 
          'karen', 'moira', 'kate', 'salli', 'joanna', 'aria', 'jenny'
        ];
        if (femaleNames.some(name => nameLower.includes(name))) return true;

        // Priority 3: UK/AU English thường có giọng nữ đẹp
        if (lang.includes('en-gb') || lang.includes('en-au')) return true;

        return false;
      },

      male: (v) => {
        if (!v?.name || !v?.lang) return false;
        const nameLower = v.name.toLowerCase();
        const lang = v.lang.toLowerCase();

        // Priority 1: Explicit male markers
        if (nameLower.includes('male') || nameLower.includes('man')) return true;
        
        // Priority 2: Male names
        const maleNames = [
          'david', 'mark', 'george', 'james', 'daniel', 
          'alex', 'thomas', 'matthew', 'joey', 'justin', 'ryan', 'tom'
        ];
        if (maleNames.some(name => nameLower.includes(name))) return true;

        // Priority 3: US English thường có giọng nam
        if (lang.includes('en-us')) return true;

        return false;
      },
    }),
    []
  );

  // SỬA ĐỔI: Hàm shuffle mảng để ngẫu nhiên hóa gán giọng
  const shuffleArray = useCallback((array) => {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
  }, []);

  // SỬA ĐỔI: Hàm gán giọng duy nhất cho từng speaker dựa trên giới tính
  const assignUniqueVoices = useCallback((filteredVoices) => {
    // Phân loại giọng theo giới tính
    const maleCandidates = filteredVoices
      .map((voice, idx) => ({ voice, idx }))
      .filter(({ voice }) => VOICE_PREDICATES.male(voice));
    const femaleCandidates = filteredVoices
      .map((voice, idx) => ({ voice, idx }))
      .filter(({ voice }) => VOICE_PREDICATES.female(voice));

    // Shuffle để đa dạng
    const shuffledMales = shuffleArray(maleCandidates);
    const shuffledFemales = shuffleArray(femaleCandidates);

    // Danh sách speaker theo giới tính
    const maleSpeakers = ['Travel Agent', 'Client 1', 'Professor', 'Student 1', 'Mark', 'Ben'];
    const femaleSpeakers = ['Client 2', 'Student 2', 'Sarah', 'Anna'];

    // Gán cho nam, ưu tiên duy nhất
    maleSpeakers.forEach((speaker, i) => {
      const availableIdx = i < shuffledMales.length ? shuffledMales[i].idx : shuffledMales[i % shuffledMales.length].idx;
      const config = SPEAKER_VOICES[speaker];
      if (config) config.setIndex(availableIdx);
    });

    // Gán cho nữ, tương tự
    femaleSpeakers.forEach((speaker, i) => {
      const availableIdx = i < shuffledFemales.length ? shuffledFemales[i].idx : shuffledFemales[i % shuffledFemales.length].idx;
      const config = SPEAKER_VOICES[speaker];
      if (config) config.setIndex(availableIdx);
    });

    // Cập nhật male/female mặc định từ speaker đầu tiên
    setSelectedMaleIndex(shuffledMales[0]?.idx ?? 0);
    setSelectedFemaleIndex(shuffledFemales[0]?.idx ?? 0);

    console.log('✅ Assigned unique voices:', {
      males: maleSpeakers.map(s => ({ speaker: s, voice: filteredVoices[SPEAKER_VOICES[s].index]?.name })),
      females: femaleSpeakers.map(s => ({ speaker: s, voice: filteredVoices[SPEAKER_VOICES[s].index]?.name })),
    });
  }, [VOICE_PREDICATES, SPEAKER_VOICES, shuffleArray]);

  // ========== INITIALIZATION ==========
  useEffect(() => {
    if (typeof window !== 'undefined' && 'speechSynthesis' in window) {
      synthRef.current = window.speechSynthesis;
      
      try {
        synthRef.current.cancel();
      } catch (e) {
        console.warn('Initial cancel failed:', e);
      }
    } else {
      setError('Trình duyệt không hỗ trợ Speech Synthesis');
      setIsLoading(false);
    }

    return () => {
      isMountedRef.current = false;
    };
  }, []);

  // ========== VOICE LOADING LOGIC ==========
  const loadVoices = useCallback(() => {
    try {
      if (!synthRef.current) {
        setError('Speech Synthesis không khả dụng trên trình duyệt này');
        setIsLoading(false);
        return;
      }

      if (synthRef.current.speaking || synthRef.current.pending) {
        synthRef.current.cancel();
      }

      const availableVoices = synthRef.current.getVoices();

      if (availableVoices.length === 0) {
        if (voiceLoadAttemptsRef.current < MAX_LOAD_ATTEMPTS) {
          voiceLoadAttemptsRef.current++;
          loadTimeoutRef.current = setTimeout(loadVoices, LOAD_RETRY_DELAY);
          return;
        }
        setError('Không tìm thấy giọng nói trên thiết bị này. Vui lòng thử trình duyệt khác.');
        setIsLoading(false);
        return;
      }

      // Lọc các giọng tiếng Anh
      const filteredVoices = availableVoices.filter(v => {
        try {
          return v?.lang && v.lang.toLowerCase().startsWith('en');
        } catch {
          return false;
        }
      });

      if (filteredVoices.length === 0) {
        setError('Không tìm thấy giọng Tiếng Anh. Vui lòng cài đặt ngôn ngữ Tiếng Anh trên thiết bị.');
        setIsLoading(false);
        return;
      }

      console.log(`✅ Loaded ${filteredVoices.length} English voices`);

      if (!isMountedRef.current) return;

      setAllVoices(filteredVoices);

      // SỬA ĐỔI: Sử dụng hàm mới để gán giọng duy nhất cho từng speaker
      assignUniqueVoices(filteredVoices);

      setError(null);
      setIsLoading(false);
      voiceLoadAttemptsRef.current = 0;
    } catch (err) {
      console.error('❌ Error loading voices:', err);
      if (isMountedRef.current) {
        setError(`Lỗi khi tải giọng nói: ${err.message}`);
        setIsLoading(false);
      }
    }
  }, [assignUniqueVoices]);  // SỬA ĐỔI: Dependency mới

  // Các phần còn lại giữ nguyên (SETUP EVENT LISTENERS, VOICE GETTERS, UPDATE HANDLERS, v.v.)
  // ... (tôi rút gọn để tập trung, nhưng bạn có thể copy nguyên từ mã gốc)

  // ========== SETUP EVENT LISTENERS ==========
  useEffect(() => {
    if (!synthRef.current) return;

    loadVoices();

    const handleVoicesChanged = () => {
      console.log('🔄 Voices changed event triggered');
      voiceLoadAttemptsRef.current = 0;
      loadVoices();
    };

    if ('onvoiceschanged' in synthRef.current) {
      synthRef.current.onvoiceschanged = handleVoicesChanged;
    }
    
    if (synthRef.current.addEventListener) {
      synthRef.current.addEventListener('voiceschanged', handleVoicesChanged);
    }

    return () => {
      if (loadTimeoutRef.current) {
        clearTimeout(loadTimeoutRef.current);
        loadTimeoutRef.current = null;
      }

      try {
        if (synthRef.current?.speaking) {
          synthRef.current.cancel();
        }
      } catch (err) {
        console.error('Cleanup error:', err);
      }

      if (synthRef.current) {
        if ('onvoiceschanged' in synthRef.current) {
          synthRef.current.onvoiceschanged = null;
        }
        if (synthRef.current.removeEventListener) {
          synthRef.current.removeEventListener('voiceschanged', handleVoicesChanged);
        }
      }

      isMountedRef.current = false;
    };
  }, [loadVoices]);

  // ========== VOICE GETTERS ==========
  const maleVoice = useMemo(
    () => (selectedMaleIndex >= 0 && allVoices[selectedMaleIndex] 
      ? allVoices[selectedMaleIndex] 
      : null),
    [selectedMaleIndex, allVoices]
  );

  const femaleVoice = useMemo(
    () => (selectedFemaleIndex >= 0 && allVoices[selectedFemaleIndex]
      ? allVoices[selectedFemaleIndex]
      : null),
    [selectedFemaleIndex, allVoices]
  );

  // ========== GET SPEAKER VOICE ==========
  const getSpeakerVoice = useCallback((speaker) => {
    const config = SPEAKER_VOICES[speaker];
    if (!config || config.index < 0 || config.index >= allVoices.length) {
      return null;
    }
    return allVoices[config.index];
  }, [SPEAKER_VOICES, allVoices]);

  // ========== VOICE UPDATE HANDLERS ==========
  const updateVoiceIndex = useCallback(
    (isMale, index) => {
      if (!Array.isArray(allVoices) || index < -1 || index >= allVoices.length) {
        console.warn(`❌ Invalid voice index: ${index}, max: ${allVoices.length - 1}`);
        setError(`Chỉ số giọng nói không hợp lệ: ${index}`);
        return false;
      }

      try {
        if (synthRef.current?.speaking) {
          synthRef.current.cancel();
        }

        if (isMale) {
          setSelectedMaleIndex(index);
          console.log(`👨 Male voice updated to index ${index}: ${allVoices[index]?.name}`);
        } else {
          setSelectedFemaleIndex(index);
          console.log(`👩 Female voice updated to index ${index}: ${allVoices[index]?.name}`);
        }
        
        setError(null);
        return true;
      } catch (err) {
        console.error('❌ Error updating voice index:', err);
        setError(`Lỗi khi cập nhật giọng nói: ${err.message}`);
        return false;
      }
    },
    [allVoices]
  );

  // ========== UPDATE INDIVIDUAL SPEAKER VOICE ==========
  const updateSpeakerVoice = useCallback((speaker, voiceIndex) => {
    if (!Array.isArray(allVoices) || voiceIndex < -1 || voiceIndex >= allVoices.length) {
      console.warn(`❌ Invalid voice index for ${speaker}: ${voiceIndex}`);
      setError(`Chỉ số giọng nói không hợp lệ cho ${speaker}`);
      return false;
    }

    try {
      if (synthRef.current?.speaking) {
        synthRef.current.cancel();
      }

      const config = SPEAKER_VOICES[speaker];
      if (!config) {
        console.warn(`❌ Unknown speaker: ${speaker}`);
        return false;
      }

      config.setIndex(voiceIndex);
      console.log(`👤 ${speaker} voice updated to index ${voiceIndex}: ${allVoices[voiceIndex]?.name}`);
      setError(null);
      return true;
    } catch (err) {
      console.error(`❌ Error updating ${speaker} voice:`, err);
      setError(`Lỗi khi cập nhật giọng nói cho ${speaker}: ${err.message}`);
      return false;
    }
  }, [allVoices, SPEAKER_VOICES]);

  // Legacy API support
  const updateVoice = useCallback(
    (isMale, index, speaker = null) => {
      if (speaker && SPEAKER_VOICES[speaker]) {
        return updateSpeakerVoice(speaker, index);
      }
      return updateVoiceIndex(isMale, index);
    },
    [updateVoiceIndex, updateSpeakerVoice, SPEAKER_VOICES]
  );

  // ========== FORCE RELOAD VOICES ==========
  const reloadVoices = useCallback(() => {
    console.log('🔄 Force reloading voices...');
    voiceLoadAttemptsRef.current = 0;
    setIsLoading(true);
    setError(null);
    loadVoices();
  }, [loadVoices]);

  // ========== GET SPEAKER VOICE INDEX ==========
  const getSpeakerVoiceIndex = useCallback((speaker) => {
    const config = SPEAKER_VOICES[speaker];
    return config ? config.index : -1;
  }, [SPEAKER_VOICES]);

  // ========== RETURN PUBLIC API ==========
  return {
    // Voice data
    allVoices,
    maleVoice,
    femaleVoice,
    
    // Voice indices
    selectedMaleIndex,
    selectedFemaleIndex,

    // ========== NEW: INDIVIDUAL SPEAKER VOICES ==========
    // Travel Agent
    travelAgentVoiceIndex,
    client1VoiceIndex,
    client2VoiceIndex,

    // Professor
    professorVoiceIndex,
    student1VoiceIndex,
    student2VoiceIndex,

    // Exam 1
    markVoiceIndex,
    sarahVoiceIndex,

    // Exam 2
    annaVoiceIndex,
    benVoiceIndex,

    // Speaker configuration
    SPEAKER_VOICES,

    // Update functions
    updateVoice, // Legacy
    updateVoiceIndex, // For male/female
    updateSpeakerVoice, // NEW: Update individual speaker
    getSpeakerVoice, // NEW: Get voice object for speaker
    getSpeakerVoiceIndex, // NEW: Get voice index for speaker
    reloadVoices,
    
    // Refs
    synthRef,
    
    // Status
    isLoading,
    error,
    
    // Voice info
    voiceInfo: {
      total: allVoices.length,
      male: maleVoice?.name || 'Not selected',
      female: femaleVoice?.name || 'Not selected',
      speakers: {
        'Travel Agent': allVoices[travelAgentVoiceIndex]?.name || 'Not selected',
        'Client 1': allVoices[client1VoiceIndex]?.name || 'Not selected',
        'Client 2': allVoices[client2VoiceIndex]?.name || 'Not selected',
        'Professor': allVoices[professorVoiceIndex]?.name || 'Not selected',
        'Student 1': allVoices[student1VoiceIndex]?.name || 'Not selected',
        'Student 2': allVoices[student2VoiceIndex]?.name || 'Not selected',
        'Mark': allVoices[markVoiceIndex]?.name || 'Not selected',
        'Sarah': allVoices[sarahVoiceIndex]?.name || 'Not selected',
        'Anna': allVoices[annaVoiceIndex]?.name || 'Not selected',
        'Ben': allVoices[benVoiceIndex]?.name || 'Not selected',
      }
    }
  };
};
</file>

<file path="src/styles/animations.css">
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slideDown {
  animation: slideDown 0.3s ease-out forwards;
}

@keyframes blob {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

.animate-blob {
  animation: blob 7s infinite;
}

.animation-delay-2000 {
  animation-delay: 2s;
}
</file>

<file path="src/utils/helpers.js">
export const calculateProgress = (completedWords, vocabularyData) => {
    if (!vocabularyData) return 0;
    const allWords = Object.values(vocabularyData.categories)
        .flat()
        .map(cat => cat.words)
        .flat();
    return allWords.length > 0 ? Math.round((completedWords.length / allWords.length) * 100) : 0;
};

export const toggleWord = (wordId, completedWords, setCompletedWords) => {
    setCompletedWords(prev => 
        prev.includes(wordId) ? prev.filter(id => id !== wordId) : [...prev, wordId]
    );
};

export const handleFlashcardNav = (direction, flashcardIndex, flashcards) => {
    if (direction === 'next') {
        return (flashcardIndex + 1) % flashcards.length;
    } else {
        return flashcardIndex === 0 ? flashcards.length - 1 : flashcardIndex - 1;
    }
};
</file>

<file path="src/views/CategoriesView.jsx">
import React from "react";
import { motion } from "framer-motion";
import Card from "../components/ui/Card";
import { LEVELS } from "../constants/levels";
import { BookOpen } from "lucide-react";

export default function CategoriesView() {
  const categories = [
    { name: "Công việc", words: 20 },
    { name: "Kinh doanh", words: 25 },
    { name: "Công nghệ", words: 15 },
    { name: "Du lịch", words: 18 },
    { name: "Mua sắm", words: 22 },
  ];

  return (
    <motion.div
      className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.4 }}
    >
      {categories.map((cat, index) => (
        <Card key={index} className="p-6 hover:shadow-2xl cursor-pointer">
          <div className="flex items-center gap-4">
            <div className="p-3 bg-indigo-100 rounded-full">
              <BookOpen className="text-indigo-600 w-6 h-6" />
            </div>
            <div>
              <h3 className="text-lg font-semibold text-gray-900">{cat.name}</h3>
              <p className="text-sm text-gray-500">
                {cat.words} từ vựng • Cấp độ{" "}
                <span className="font-medium text-indigo-600">
                  {LEVELS[index % LEVELS.length]}
                </span>
              </p>
            </div>
          </div>
        </Card>
      ))}
    </motion.div>
  );
}
</file>

<file path="src/views/FlashcardsView.jsx">
import React from "react";
import { motion } from "framer-motion";
import WordCard from "../components/WordCard";

export default function FlashcardsView({
  vocabularyData,
  completedWords,
  onSpeak,
  playingId,
  onComplete,
}) {
  return (
    <motion.div
      className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.4 }}
    >
      {vocabularyData.map((word, index) => (
        <WordCard
          key={index}
          {...word}
          onSpeak={() => onSpeak(word.word, index)}
          isPlaying={playingId === index}
          onComplete={() => onComplete(word.word)}
          isCompleted={completedWords.includes(word.word)}
        />
      ))}
    </motion.div>
  );
}
</file>

<file path="src/views/QuizView.jsx">
import React, { useState } from "react";
import { motion } from "framer-motion";
import Card from "../components/ui/Card";
import Button from "../components/ui/Button";

export default function QuizView() {
  const questions = [
    {
      question: "Từ nào có nghĩa là 'cuộc họp'?",
      options: ["meeting", "factory", "product", "price"],
      correct: "meeting",
    },
    {
      question: "Từ nào có nghĩa là 'máy tính xách tay'?",
      options: ["phone", "tablet", "laptop", "keyboard"],
      correct: "laptop",
    },
  ];

  const [current, setCurrent] = useState(0);
  const [selected, setSelected] = useState(null);
  const [score, setScore] = useState(0);
  const [finished, setFinished] = useState(false);

  const handleAnswer = (option) => {
    setSelected(option);
    if (option === questions[current].correct) setScore(score + 1);
    setTimeout(() => {
      if (current + 1 < questions.length) {
        setCurrent(current + 1);
        setSelected(null);
      } else {
        setFinished(true);
      }
    }, 800);
  };

  if (finished)
    return (
      <motion.div
        className="text-center space-y-4"
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
      >
        <h2 className="text-3xl font-extrabold text-indigo-700">Hoàn thành!</h2>
        <p className="text-lg text-gray-600">
          Bạn trả lời đúng{" "}
          <span className="text-indigo-600 font-bold">{score}</span> /
          {questions.length} câu.
        </p>
        <Button variant="primary" onClick={() => window.location.reload()}>
          Làm lại
        </Button>
      </motion.div>
    );

  return (
    <Card className="max-w-xl mx-auto p-8 text-center space-y-6">
      <h3 className="text-xl font-semibold text-gray-800">
        Câu {current + 1} / {questions.length}
      </h3>
      <p className="text-2xl font-bold text-indigo-700">
        {questions[current].question}
      </p>
      <div className="grid gap-3">
        {questions[current].options.map((option, index) => (
          <Button
            key={index}
            variant={
              selected === option
                ? option === questions[current].correct
                  ? "success"
                  : "danger"
                : "secondary"
            }
            onClick={() => handleAnswer(option)}
            disabled={!!selected}
          >
            {option}
          </Button>
        ))}
      </div>
    </Card>
  );
}
</file>

<file path="src/views/StatsView.jsx">
import React from "react";
import { motion } from "framer-motion";
import StatBox from "../components/ui/StatBox";
import { CheckCircle, Book, BarChart3 } from "lucide-react";

export default function StatsView({ completedWords, totalWords }) {
  const percent = ((completedWords.length / totalWords) * 100).toFixed(1);

  return (
    <motion.div
      className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.4 }}
    >
      <StatBox
        label="Từ đã học"
        value={completedWords.length}
        icon={CheckCircle}
        trend={+percent}
      />
      <StatBox
        label="Tổng số từ"
        value={totalWords}
        icon={Book}
        trend={0}
      />
      <StatBox
        label="Tiến độ"
        value={`${percent}%`}
        icon={BarChart3}
        trend={percent > 50 ? +percent : 0}
      />
    </motion.div>
  );
}
</file>

<file path="tailwind.config.js">
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{jsx,js,ts,tsx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        inter: ['Inter', 'Segoe UI', 'system-ui', '-apple-system', 'sans-serif'],
      },
      colors: {
        // Primary gradient colors
        'primary-orange': '#f97316',
        'primary-yellow': '#fbbf24',
        'primary-dark': '#0f172a',
        'primary-darker': '#1f2937',
        'purple-1': '#667eea',
        'purple-2': '#764ba2',
        'pink-1': '#f093fb',
      },
      backgroundImage: {
        'gradient-app': 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',
        'gradient-primary': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        'gradient-success': 'linear-gradient(90deg, #10b981 0%, #059669 50%, #047857 100%)',
        'gradient-navbar': 'linear-gradient(to right, #f97316, #fbbf24, #f97316)',
        'gradient-orange': 'linear-gradient(135deg, #f97316, #fbbf24)',
      },
      boxShadow: {
        'app': '0 30px 90px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.8)',
        'glass': '0 4px 6px -1px rgba(249, 115, 22, 0.1), 0 2px 4px -1px rgba(251, 191, 36, 0.06)',
      },
      animation: {
        'float': 'float 6s ease-in-out infinite',
        'gradient-shift': 'gradientShift 3s ease infinite',
        'progress-shine': 'progressShine 2s linear infinite',
        'score-shine': 'scoreShine 2s ease infinite',
        'glow': 'glow 2s ease-in-out infinite',
        'pulse-custom': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
        'slide-down': 'slideDown 0.3s ease',
        'blob': 'blob 7s infinite', 
        'confetti': 'confetti 3s ease-out forwards',
      },
      keyframes: {
        float: {
          '0%, 100%': { transform: 'translateY(0px)' },
          '50%': { transform: 'translateY(-5px)' },
        },
        blob: {
          "0%, 100%": { transform: "translate(0px, 0px) scale(1)" },
          "33%": { transform: "translate(30px, -50px) scale(1.1)" },
          "66%": { transform: "translate(-20px, 20px) scale(0.9)" },
        },
        gradientShift: {
          '0%, 100%': { backgroundPosition: '0% 50%' },
          '50%': { backgroundPosition: '100% 50%' },
        },
        progressShine: {
          '0%': { backgroundPosition: '0% 50%' },
          '100%': { backgroundPosition: '200% 50%' },
        },
        scoreShine: {
          '0%, 100%': { backgroundPosition: '0% 50%' },
          '50%': { backgroundPosition: '100% 50%' },
        },
        glow: {
          '0%, 100%': { boxShadow: '0 0 20px rgba(102, 126, 234, 0.3)' },
          '50%': { boxShadow: '0 0 30px rgba(102, 126, 234, 0.6)' },
        },
        slideDown: {
          'from': { opacity: '0', transform: 'translateY(-10px)' },
          'to': { opacity: '1', transform: 'translateY(0)' },
        },
      },
      spacing: {
        'safe': 'max(1rem, env(safe-area-inset-bottom))',
      },
      borderWidth: {
        '5': '5px',
      },
      backdropBlur: {
        'xl': '20px',
        '3xl': '32px',
      },
      screens: {
        'xs': '320px',
        'sm': '480px',
        'md': '768px',
        'lg': '1024px',
        'xl': '1280px',
        '2xl': '1536px',
      },
      // Thêm max-width responsive
      maxWidth: {
        'screen-xs': '320px',
        'screen-sm': '480px',
        'screen-md': '768px',
        'screen-lg': '1024px',
        'screen-xl': '1280px',
        'screen-2xl': '1536px',
      },
    },
  },
  plugins: [
    function ({ addBase, addComponents, addUtilities, theme }) {
      // Add base styles to prevent overflow
      addBase({
        'html': {
          overflowX: 'hidden',
          width: '100%',
          maxWidth: '100vw',
        },
        'body': {
          overflowX: 'hidden',
          width: '100%',
          maxWidth: '100vw',
          position: 'relative',
        },
        // Prevent horizontal scroll on all elements
        '*': {
          boxSizing: 'border-box',
        },
        // Mobile-specific optimizations
        '@media (max-width: 768px)': {
          'html, body': {
            overscrollBehavior: 'none',
            WebkitOverflowScrolling: 'touch',
          },
        },
      });

      // Add custom utilities
      addUtilities({
        '.letter-spacing-tight': {
          letterSpacing: '-0.3px',
        },
        '.text-shadow': {
          textShadow: '0 2px 20px rgba(102, 126, 234, 0.2)',
        },
        '.bg-glass': {
          backgroundColor: 'rgba(255, 255, 255, 0.98)',
          backdropFilter: 'blur(20px)',
        },
        '.border-gradient': {
          borderImage: 'linear-gradient(90deg, #667eea, #764ba2) 1',
        },
        '.animation-delay-2000': {
          'animationDelay': '2000ms',
        },
        '.animation-delay-4000': {
          'animationDelay': '4000ms',
        },
        // Utilities to prevent overflow
        '.no-scrollbar': {
          '-ms-overflow-style': 'none',
          'scrollbar-width': 'none',
          '&::-webkit-scrollbar': {
            display: 'none',
          },
        },
        '.prevent-overflow': {
          overflowX: 'hidden',
          maxWidth: '100vw',
          width: '100%',
        },
        '.safe-padding-x': {
          paddingLeft: 'max(1rem, env(safe-area-inset-left))',
          paddingRight: 'max(1rem, env(safe-area-inset-right))',
        },
        '.safe-padding-y': {
          paddingTop: 'max(1rem, env(safe-area-inset-top))',
          paddingBottom: 'max(1rem, env(safe-area-inset-bottom))',
        },
        // Text overflow utilities
        '.text-ellipsis-2': {
          display: '-webkit-box',
          '-webkit-line-clamp': '2',
          '-webkit-box-orient': 'vertical',
          overflow: 'hidden',
          textOverflow: 'ellipsis',
        },
        '.text-ellipsis-3': {
          display: '-webkit-box',
          '-webkit-line-clamp': '3',
          '-webkit-box-orient': 'vertical',
          overflow: 'hidden',
          textOverflow: 'ellipsis',
        },
        // Container utilities for responsive layouts
        '.container-fluid': {
          width: '100%',
          maxWidth: '100vw',
          paddingLeft: '1rem',
          paddingRight: '1rem',
          marginLeft: 'auto',
          marginRight: 'auto',
          '@screen sm': {
            paddingLeft: '1.5rem',
            paddingRight: '1.5rem',
          },
          '@screen md': {
            paddingLeft: '2rem',
            paddingRight: '2rem',
          },
          '@screen lg': {
            paddingLeft: '2.5rem',
            paddingRight: '2.5rem',
          },
        },
      });

      // Add custom components with responsive improvements
      addComponents({
        '.btn-base': {
          '@apply px-4 py-3 sm:px-6 sm:py-4 rounded-xl sm:rounded-2xl font-bold cursor-pointer transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1 active:-translate-y-0.5 text-sm sm:text-base': {},
        },
        '.btn-primary': {
          '@apply btn-base bg-gradient-primary text-white': {},
        },
        '.btn-secondary': {
          '@apply btn-base bg-slate-700 text-white hover:bg-slate-600': {},
        },
        '.btn-gradient-primary': {
          '@apply btn-base bg-gradient-to-r from-purple-1 to-purple-2 text-white': {},
        },
        '.card-glass': {
          '@apply bg-white/98 backdrop-blur-3xl rounded-2xl sm:rounded-3xl shadow-lg border border-white/50 p-4 sm:p-6': {},
        },
        '.input-base': {
          '@apply px-4 py-2.5 sm:px-5 sm:py-3 border-2 border-gray-300 rounded-lg sm:rounded-xl text-sm sm:text-base bg-white transition-all font-medium hover:border-purple-1 focus:outline-none focus:border-purple-1 w-full': {},
        },
        // Responsive container
        '.container-responsive': {
          '@apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8': {},
        },
        // Grid responsive
        '.grid-responsive': {
          '@apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6': {},
        },
        // Card responsive
        '.card-responsive': {
          '@apply p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl md:rounded-2xl': {},
        },
      });
    },
  ],
};
</file>

<file path="vercel.json">
{
  "rewrites": [
    { "source": "/(.*)", "destination": "/index.html" }
  ]
}
</file>

<file path="Backend/.gitignore">
# backend/.gitignore
node_modules/
.env
.env.local
.env.*.local
dist/
build/
*.log
.DS_Store
.vscode/
*.pem
firebase-key.json
.vercel
</file>

<file path="Backend/controllers/chatController.js">
// backend/controllers/chatController.js
import { db, isFirebaseEnabled } from '../firebase-config.js';
import admin from 'firebase-admin';

// In-memory storage for online users only
let users = new Map();

// In-memory message cache (fallback when Firebase unavailable)
let messageCache = [];

/**
 * Handle user join event
 */
export const handleUserJoin = async (socket, io, data) => {
  try {
    const { userId, userName, avatar } = data;

    const user = {
      socketId: socket.id,
      userId,
      userName,
      avatar,
      joinedAt: new Date(),
      isOnline: true,
    };

    users.set(socket.id, user);

    // Broadcast user joined
    io.emit('user-joined', {
      message: `${userName} đã tham gia phòng chat`,
      user,
      users: Array.from(users.values()),
      timestamp: new Date(),
    });

    console.log('👥 Online users:', users.size);
    console.log('✅ User joined:', userName);
  } catch (error) {
    console.error('❌ Error in handleUserJoin:', error.message);
  }
};

/**
 * Handle send message event - Save to Firestore or cache
 */
export const handleSendMessage = async (socket, io, data) => {
  try {
    const { content, sender, senderId } = data;

    const message = {
      id: Date.now(),
      content,
      sender,
      senderId,
      timestamp: isFirebaseEnabled ? admin.firestore.Timestamp.now() : new Date(),
      socketId: socket.id,
    };

    // Try to save to Firestore
    if (isFirebaseEnabled) {
      try {
        await db.collection('messages').doc(String(message.id)).set(message);
        console.log('✅ Message saved to Firestore:', sender);
      } catch (firestoreError) {
        console.warn('⚠️ Firestore save failed, using cache:', firestoreError.message);
        messageCache.push(message);
      }
    } else {
      // Use cache if Firebase disabled
      messageCache.push(message);
      console.log('📝 Message cached (Firebase disabled)');
    }

    // Broadcast message to all clients
    const broadcastMessage = {
      ...message,
      timestamp: message.timestamp instanceof admin.firestore.Timestamp 
        ? new Date(message.timestamp.toMillis())
        : message.timestamp,
    };

    io.emit('receive-message', broadcastMessage);
    console.log('💬 Message broadcast:', sender, '-', content);
  } catch (error) {
    console.error('❌ Error in handleSendMessage:', error.message);
  }
};

/**
 * Handle delete message event
 */
export const handleDeleteMessage = async (socket, io, messageId) => {
  try {
    // Delete from Firestore if enabled
    if (isFirebaseEnabled) {
      try {
        await db.collection('messages').doc(String(messageId)).delete();
        console.log('✅ Message deleted from Firestore:', messageId);
      } catch (firestoreError) {
        console.warn('⚠️ Firestore delete failed:', firestoreError.message);
      }
    }

    // Delete from cache
    messageCache = messageCache.filter(msg => msg.id !== messageId);
    console.log('📝 Message removed from cache');

    io.emit('message-deleted', messageId);
    console.log('🗑️ Message deleted:', messageId);
  } catch (error) {
    console.error('❌ Error in handleDeleteMessage:', error.message);
  }
};

/**
 * Handle user disconnect event
 */
export const handleUserDisconnect = (socket, io) => {
  try {
    const user = users.get(socket.id);

    if (user) {
      users.delete(socket.id);
      
      io.emit('user-left', {
        message: `${user.userName} đã rời phòng chat`,
        userId: user.userId,
        userName: user.userName,
        users: Array.from(users.values()),
        timestamp: new Date(),
      });

      console.log('👋 User disconnected:', user.userName, `(${socket.id})`);
      console.log('👥 Remaining online users:', users.size);
    }
  } catch (error) {
    console.error('❌ Error in handleUserDisconnect:', error.message);
  }
};

/**
 * Get all messages from Firestore or cache
 */
export const getAllMessages = async () => {
  try {
    let messages = [];

    // Try to fetch from Firestore if enabled
    if (isFirebaseEnabled) {
      try {
        const snapshot = await db.collection('messages')
          .orderBy('timestamp', 'asc')
          .limit(100)
          .get();

        messages = snapshot.docs.map((doc) => {
          const data = doc.data();
          return {
            ...data,
            timestamp: data.timestamp instanceof admin.firestore.Timestamp
              ? new Date(data.timestamp.toMillis())
              : data.timestamp,
          };
        });

        console.log('✅ Fetched', messages.length, 'messages from Firestore');
      } catch (firestoreError) {
        console.warn('⚠️ Firestore fetch failed, using cache:', firestoreError.message);
        messages = messageCache;
      }
    } else {
      // Use cache if Firebase disabled
      messages = messageCache;
      console.log('📝 Using cached messages:', messages.length);
    }

    return messages;
  } catch (error) {
    console.error('❌ Error fetching messages:', error.message);
    return messageCache; // Fallback to cache
  }
};

/**
 * Get all online users
 */
export const getAllUsers = () => {
  const userArray = Array.from(users.values());
  console.log('👥 Active users:', userArray.length);
  return userArray;
};

/**
 * Clear all messages from Firestore and cache
 */
export const clearMessages = async () => {
  try {
    // Clear from Firestore if enabled
    if (isFirebaseEnabled) {
      try {
        const batch = db.batch();
        const snapshot = await db.collection('messages').get();

        snapshot.docs.forEach((doc) => {
          batch.delete(doc.ref);
        });

        await batch.commit();
        console.log('✅ Cleared messages from Firestore');
      } catch (firestoreError) {
        console.warn('⚠️ Firestore clear failed:', firestoreError.message);
      }
    }

    // Clear cache
    const count = messageCache.length;
    messageCache = [];
    console.log('🗑️ Cleared', count, 'messages from cache');
  } catch (error) {
    console.error('❌ Error clearing messages:', error.message);
  }
};

/**
 * Clear all users (admin only)
 */
export const clearUsers = () => {
  try {
    const count = users.size;
    users.clear();
    console.log('🗑️ Cleared all', count, 'users');
  } catch (error) {
    console.error('❌ Error clearing users:', error.message);
  }
};

/**
 * Get message count
 */
export const getMessageCount = () => {
  return messageCache.length;
};

/**
 * Get user count
 */
export const getUserCount = () => {
  return users.size;
};

/**
 * Get system stats
 */
export const getSystemStats = () => {
  return {
    onlineUsers: users.size,
    cachedMessages: messageCache.length,
    firebaseEnabled: isFirebaseEnabled,
    timestamp: new Date(),
  };
};
</file>

<file path="Backend/package.json">
{
  "name": "huflit-chat-backend",
  "version": "1.0.0",
  "description": "HUFLIT Chat Server - Socket.IO Backend",
  "main": "index.js",
  "type": "module",
  "scripts": {
    "dev": "nodemon",
    "start": "node index.js",
    "build": "echo 'No build needed'",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "chat",
    "socket.io",
    "express",
    "real-time"
  ],
  "author": "",
  "license": "ISC",
  "engines": {
    "node": "20.x"
  },
  "dependencies": {
    "cors": "^2.8.5",
    "dotenv": "^17.2.3",
    "express": "^5.1.0",
    "socket.io": "^4.8.1",
    "firebase-admin": "^13.6.0"
  },
  "devDependencies": {
    "nodemon": "^3.1.11"
  }
}
</file>

<file path="firebase.json">
{
  "emulators": {
    "dataconnect": {
      "dataDir": "dataconnect/.dataconnect/pgliteData"
    }
  },
  "dataconnect": {
    "source": "dataconnect"
  },
  "firestore": {
    "database": "(default)",
    "location": "nam5",
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  },
  "storage": {
    "rules": "  "
  },
  "functions": [
    {
      "source": "functions",
      "codebase": "default",
      "disallowLegacyRuntimeConfig": true,
      "ignore": [
        "node_modules",
        ".git",
        "firebase-debug.log",
        "firebase-debug.*.log",
        "*.local"
      ],
      "predeploy": [
        "npm --prefix \"$RESOURCE_DIR\" run lint"
      ]
    }
  ]
}
</file>

<file path="README.md">
<div align="center">

# 🎧 HUFLIT Test Practice

### *Nền tảng luyện thi TOEIC với công nghệ hiện đại*

[![Live Demo](https://img.shields.io/badge/🌐_Live_Demo-Visit_Site-ff8c42?style=for-the-badge&labelColor=1a1a1a)](https://huflit-test.vercel.app)
[![Vercel](https://img.shields.io/badge/Deployed_on-Vercel-000000?style=for-the-badge&logo=vercel&logoColor=white)](https://vercel.com)
[![React](https://img.shields.io/badge/React_18-61DAFB?style=for-the-badge&logo=react&logoColor=black)](https://reactjs.org)
[![Firebase](https://img.shields.io/badge/Firebase_10-FFCA28?style=for-the-badge&logo=firebase&logoColor=black)](https://firebase.google.com)
[![License](https://img.shields.io/badge/License-MIT-10b981?style=for-the-badge)](LICENSE)

**[🚀 Truy cập ứng dụng](https://huflit-test.vercel.app) • [📖 Tài liệu](https://github.com/khoale-dev-code/huflit-test) • [🐛 Báo lỗi](https://github.com/khoale-dev-code/huflit-test/issues) • [💬 Thảo luận](https://github.com/khoale-dev-code/huflit-test/discussions)**

</div>

---

## 📑 Mục lục

- [✨ Tính năng nổi bật](#-tính-năng-nổi-bật)
- [🎬 Demo & Screenshots](#-demo--screenshots)
- [🚀 Bắt đầu nhanh](#-bắt-đầu-nhanh)
- [🛠️ Stack công nghệ](#️-stack-công-nghệ)
- [📁 Cấu trúc dự án](#-cấu-trúc-dự-án)
- [📚 Hướng dẫn sử dụng](#-hướng-dẫn-sử-dụng)
- [⚙️ Cấu hình & Triển khai](#️-cấu-hình--triển-khai)
- [🔒 Bảo mật](#-bảo-mật)
- [🎯 Tính năng nâng cao](#-tính-năng-nâng-cao)
- [🧪 Testing](#-testing)
- [🐛 Troubleshooting](#-troubleshooting)
- [🔄 Changelog](#-changelog)
- [🤝 Đóng góp](#-đóng-góp)
- [📞 Liên hệ & Hỗ trợ](#-liên-hệ--hỗ-trợ)
- [📜 License](#-license)
- [🙏 Acknowledgments](#-acknowledgments)

---

## ✨ Tính năng nổi bật

### 🎧 **Bài thi Nghe (Listening)**

| Tính năng | Mô tả |
|-----------|-------|
| 🗣️ **Đa giọng nói** | Nam/Nữ tự nhiên, có thể điều chỉnh |
| ⚡ **Tốc độ linh hoạt** | 0.5x - 2.0x (phù hợp ôn luyện) |
| 🔁 **Nghe lại không giới hạn** | Tái phát từng phần bất cứ lúc nào |
| 🎯 **Đầy đủ 4 Parts** | Part 1-4 theo chuẩn TOEIC |
| 🎮 **Chế độ practise & test** | Linh hoạt chọn luyện tập hoặc thi thử |

### 📖 **Bài thi Đọc (Reading)**

| Tính năng | Mô tả |
|-----------|-------|
| 📝 **Đọc hiểu hoàn chỉnh** | Part 5, 6, 7 theo đủ chuẩn TOEIC |
| 🧠 **Bài tập ngữ pháp** | Tương tác, giải thích chi tiết |
| 📚 **Học từ vựng theo chủ đề** | Hệ thống từ vựng có sắp xếp |
| ✅ **Chấm điểm tự động** | Kết quả tức thì + phân tích |
| 💡 **Xem giải thích** | Đáp án + lý do chi tiết |

### 👤 **Tài khoản & Tiến độ**

| Tính năng | Mô tả |
|-----------|-------|
| 🔐 **Xác thực an toàn** | Google OAuth + Email (Clerk) |
| 💾 **Lưu tiến độ tự động** | Đồng bộ Firebase Firestore |
| 📊 **Thống kê chi tiết** | Điểm theo từng part & bài làm |
| 🏆 **Lịch sử bài thi** | Xem lại tất cả bài làm trước đó |
| 📈 **Phân tích hiệu suất** | Theo dõi tiến bộ qua thời gian |

### 🎨 **Giao diện & Trải nghiệm**

| Tính năng | Mô tả |
|-----------|-------|
| 📱 **Responsive thiết kế** | Hoàn hảo trên mobile/tablet/desktop |
| 🌈 **Theme gradient cam-vàng** | Đẹp mắt, hiện đại, dễ sử dụng |
| ⚡ **Animation mượt mà** | Hiệu ứng chuyển tiếp tự nhiên |
| 🚀 **Tốc độ tải cực nhanh** | Optimized build, code splitting |
| 🌙 **Dark mode support** | (Tùy chọn trong cài đặt) |

---

## 🎬 Demo & Screenshots

### 🖼️ Trang chủ & Dashboard

```
┌─────────────────────────────────────┐
│  HUFLIT Test Practice               │
│  ────────────────────────────────── │
│  [🎧 Listening]  [📖 Reading]       │
│  [🧠 Grammar]    [📚 Vocabulary]    │
│  [🏆 My Results]                    │
└─────────────────────────────────────┘
```

### 🎧 Chế độ Listening

```
┌──────────────────────────────┐
│ 📊 Part 1 - Photographs      │
├──────────────────────────────┤
│ Question 1/10                │
│ ▶️ 🔊 ▌▌▌▌▌ 00:15 / 01:00    │
│ 🎚️ Speed: 1.0x              │
│ 🗣️ Voice: Female             │
├──────────────────────────────┤
│ (A) ☐  (B) ☐  (C) ☐ (D) ☐   │
│ ⬅️ Prev    Next ➡️            │
├──────────────────────────────┤
│ [Submit] [Review]            │
└──────────────────────────────┘
```

### 📖 Chế độ Reading (2 cột trên desktop)

```
┌──────────────────────────────────────────────┐
│  Part 7 - Reading Comprehension              │
├──────────────┬──────────────────────────────┤
│ 📄 Passage   │  Question 1/5                │
│              │  ────────────────────────────│
│ Long text    │  What is the main topic?    │
│ here...      │                             │
│              │  (A) ☐  (B) ☐              │
│              │  (C) ☐  (D) ☐              │
│              │                             │
│              │  ⬅️ Prev    Next ➡️         │
│              │  [Submit]                   │
└──────────────┴──────────────────────────────┘
```

### 📊 Kết quả & Thống kê

```
┌────────────────────────────────┐
│ 🏆 Results - Part 1             │
├────────────────────────────────┤
│ Score: 8/10 ████░░░░░░ 80%     │
│ Time: 12:45 / 15:00            │
│ Accuracy: 80%                  │
├────────────────────────────────┤
│ ✅ Correct: 8     ❌ Wrong: 2   │
│ ⏭️ Skipped: 0                   │
├────────────────────────────────┤
│ [Review] [Try Again] [Next]    │
└────────────────────────────────┘
```

> 💡 **Live demo**: Truy cập [huflit-test.vercel.app](https://huflit-test.vercel.app) để xem giao diện thực tế

---

## 🚀 Bắt đầu nhanh

### 📋 Yêu cầu hệ thống

```bash
✅ Node.js >= 16.x (khuyến nghị 18.x+)
✅ npm >= 8.x hoặc yarn >= 1.22.x
✅ Git >= 2.0
```

### 📥 Cài đặt & Chạy

**Bước 1: Clone repository**

```bash
git clone https://github.com/khoale-dev-code/huflit-test.git
cd huflit-test
```

**Bước 2: Cài đặt dependencies**

```bash
npm install
# hoặc
yarn install
```

**Bước 3: Tạo file `.env.local`**

```bash
cp .env.example .env.local
# Rồi điền thông tin (xem mục Cấu hình)
```

**Bước 4: Chạy development server**

```bash
npm run dev
# Server sẽ chạy tại http://localhost:5173
```

**Bước 5: Mở trình duyệt**

```
👉 Mở http://localhost:5173 trong trình duyệt yêu thích
```

---

## 🛠️ Stack công nghệ

### 🎨 Frontend

```
React 18.2.0           Thư viện UI hiện đại
├─ React Router v6     Navigation & routing
├─ Vite 5.x            Build tool siêu nhanh
├─ Tailwind CSS 3      Styling utility-first
├─ Lucide Icons        Icon library đẹp
└─ Zustand/Context API State management
```

### ☁️ Backend & Services

```
Firebase 10+           Backend-as-a-Service
├─ Firestore           NoSQL realtime database
├─ Authentication      User auth & management
├─ Storage             Cloud file storage
└─ Analytics           User behavior tracking

Clerk v4+              Modern auth platform
├─ Google OAuth        SSO với Google
├─ Email/Password      Auth traditional
└─ User Management     Dashboard quản lý user
```

### 🚀 DevOps & Deployment

```
Vercel                 Hosting & CI/CD
├─ Auto-deploy         Tự động deploy khi push
├─ Edge Functions      Serverless functions
└─ Analytics           Performance monitoring
```

### 📦 Dependencies chính

```json
{
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "react-router-dom": "^6.20.0",
  "firebase": "^10.7.0",
  "@clerk/clerk-react": "^4.29.0",
  "zustand": "^4.4.0",
  "tailwindcss": "^3.4.0",
  "lucide-react": "^0.302.0",
  "@hookform/resolvers": "^3.3.0",
  "react-hook-form": "^7.48.0"
}
```

---

## 📁 Cấu trúc dự án

```
huflit-test/
│
├── 📂 public/                      # Static files
│   ├── favicon.ico
│   └── audio/                      # Audio files
│       ├── listening/
│       └── pronunciations/
│
├── 📂 src/
│   │
│   ├── 📂 components/              # React components
│   │   ├── 📂 layout/
│   │   │   ├── 🧩 MainLayout.jsx
│   │   │   ├── 🧩 Navbar.jsx
│   │   │   └── 🧩 Footer.jsx
│   │   │
│   │   ├── 📂 auth/
│   │   │   ├── 🧩 AuthModal.jsx
│   │   │   ├── 🧩 UserProfile.jsx
│   │   │   └── 🧩 LoginButton.jsx
│   │   │
│   │   ├── 📂 display/
│   │   │   ├── 🧩 PartSelector.jsx
│   │   │   ├── 🧩 QuestionDisplay.jsx
│   │   │   ├── 🧩 ContentDisplay.jsx
│   │   │   ├── 🧩 ResultsDisplay.jsx
│   │   │   └── 🧩 ProgressBar.jsx
│   │   │
│   │   ├── 📂 controls/
│   │   │   ├── 🧩 AudioControls.jsx
│   │   │   ├── 🧩 VoiceControls.jsx
│   │   │   ├── 🧩 PlaybackSpeed.jsx
│   │   │   └── 🧩 VoiceSelector.jsx
│   │   │
│   │   ├── 📂 common/
│   │   │   ├── 🧩 LoadingSpinner.jsx
│   │   │   ├── 🧩 ErrorBoundary.jsx
│   │   │   ├── 🧩 Button.jsx
│   │   │   └── 🧩 Modal.jsx
│   │   │
│   │   ├── 📂 voca/
│   │   │   ├── 🧩 VocabularyPractice.jsx
│   │   │   └── 🧩 VocabCard.jsx
│   │   │
│   │   ├── 📂 grammar/
│   │   │   └── 🧩 GrammarReview.jsx
│   │   │
│   │   └── 📂 fullexam/
│   │       ├── 🧩 FullExamMode.jsx
│   │       ├── 🧩 ExamTimer.jsx
│   │       └── 🧩 ExamResults.jsx
│   │
│   ├── 📂 hooks/                  # Custom React hooks
│   │   ├── 🪝 useAppState.js       # App-wide state
│   │   ├── 🪝 useAudio.js          # Audio playback
│   │   ├── 🪝 useVoices.js         # Text-to-speech
│   │   ├── 🪝 useUserProgress.js   # Progress tracking
│   │   ├── 🪝 useClerkAuth.js      # Clerk authentication
│   │   ├── 🪝 useFirebaseSync.js   # Firebase sync
│   │   ├── 🪝 useAutoSave.js       # Auto-save logic
│   │   └── 🪝 useOnlineUsers.js    # Real-time user count
│   │
│   ├── 📂 data/                   # Exam data
│   │   ├── 📄 examData.js          # All test questions
│   │   ├── 📄 vocabularyData.js    # Vocabulary list
│   │   └── 📄 grammarRules.js      # Grammar explanations
│   │
│   ├── 📂 config/                 # Configuration
│   │   ├── ⚙️ firebase.js          # Firebase config
│   │   ├── ⚙️ routes.js            # App routes
│   │   └── ⚙️ constants.js         # App constants
│   │
│   ├── 📂 utils/                  # Utility functions
│   │   ├── 📝 formatters.js        # Data formatters
│   │   ├── 📝 validators.js        # Input validation
│   │   ├── 📝 scoringEngine.js     # Score calculation
│   │   └── 📝 audioProcessor.js    # Audio utilities
│   │
│   ├── 📂 pages/                  # Page components
│   │   ├── 📄 HomePage.jsx
│   │   ├── 📄 TestPage.jsx
│   │   ├── 📄 ResultsPage.jsx
│   │   └── 📄 ProfilePage.jsx
│   │
│   ├── 🎨 App.jsx                 # Main app component
│   ├── 🎨 main.jsx                # Entry point
│   ├── 📝 index.css               # Global styles
│   └── 📝 tailwind.css            # Tailwind directives
│
├── 📄 .env.example                # Environment template
├── 📄 .env.local                  # Local environment (⚠️ KHÔNG commit)
├── 📄 .gitignore                  # Git ignore rules
├── 📄 package.json                # Dependencies
├── 📄 package-lock.json
├── 📄 vite.config.js              # Vite configuration
├── 📄 tailwind.config.js          # Tailwind config
├── 📄 postcss.config.js           # PostCSS config
├── 📄 eslint.config.js            # ESLint rules
└── 📄 README.md                   # Documentation
```

---

## 📚 Hướng dẫn sử dụng

### 1️⃣ Đăng nhập / Đăng ký

```
🔐 Cách thực hiện:
1. Click nút "Đăng nhập" ở góc trên phải
2. Chọn một trong các tùy chọn:
   ✓ Đăng nhập với Google
   ✓ Đăng nhập với Email
3. Hoàn thành xác thực
4. Bấm "Cho phép" để lưu tiến độ
```

### 2️⃣ Chọn bài thi

```
📚 Bước chọn bài:

┌─ LISTENING (🎧)
├─ Part 1: Photographs
├─ Part 2: Question-Response  
├─ Part 3: Conversations
└─ Part 4: Short Talks

┌─ READING (📖)
├─ Part 5: Incomplete Sentences
├─ Part 6: Text Completion
└─ Part 7: Reading Comprehension

┌─ PRACTICE (🧠)
├─ Grammar Review
├─ Vocabulary Practice
└─ Full Mock Test
```

### 3️⃣ Làm bài Listening

**Chuẩn bị:**

```bash
1. Chọn giọng nói (nam/nữ) cho từng vai diễn
2. Điều chỉnh tốc độ phát (0.5x - 2.0x)
3. Kiểm tra âm lượng
```

**Trong khi làm:**

```bash
▶️  Play          Bắt đầu nghe
⏸️  Pause         Tạm dừng
🔁  Replay        Nghe lại từ đầu
⏩  Skip          Bỏ qua câu này
📊  Progress      Xem tiến độ (X/Y câu)
```

**Chọn đáp án:**

```bash
(A) ☐  Click để chọn đáp án A
(B) ☐  Click để chọn đáp án B
(C) ☐  Click để chọn đáp án C
(D) ☐  Click để chọn đáp án D
```

**Kết thúc:**

```bash
[Submit]         Nộp bài
[Review]         Xem lại câu trả lời
[Try Again]      Làm lại từ đầu
```

### 4️⃣ Làm bài Reading

**Layout:**

```
Trên desktop (2 cột):
┌─ Đoạn văn (TRÁI)  │  Câu hỏi (PHẢI) ┐
│ Để đọc            │  Để chọn đáp án  │
│ Tự động scroll    │  Xem lại đoạn   │

Trên mobile (1 cột):
┌─ Đoạn văn ┐
├─ Câu hỏi  ┤
└─ Đáp án   ┘
```

**Quy trình:**

```
1. Đọc kỹ đoạn văn/câu hỏi
2. Phân tích từng đáp án
3. Chọn câu trả lời phù hợp
4. Click "Next" để câu tiếp theo
5. Xem tổng hợp kết quả
```

### 5️⃣ Xem kết quả & Phân tích

```
📊 Bảng điểm:
├─ Tổng điểm: XX/100
├─ Câu đúng: XX ✅
├─ Câu sai: XX ❌
└─ Tỷ lệ: XX%

📈 Phân tích:
├─ Điểm từng part
├─ Thời gian/câu
├─ Câu dễ bị nhầm
└─ Gợi ý cải thiện
```

### 6️⃣ Theo dõi tiến độ

```
👤 Hồ sơ cá nhân:
├─ 📊 Dashboard: Tổng hợp thống kê
├─ 📈 Progress: Biểu đồ tiến bộ
├─ 🏆 Rankings: Xếp hạng (nếu có)
└─ ⚙️ Settings: Cài đặt cá nhân

🎖️ Thống kê chi tiết:
├─ Tổng bài làm: XX
├─ Thời gian học: XXh
├─ Điểm trung bình: XX%
└─ Mục tiêu: Cấp đặt mục tiêu
```

---

## ⚙️ Cấu hình & Triển khai

### 🔧 Cấu hình Environment Variables

Tạo file `.env.local` trong thư mục gốc:

```env
# 🔥 FIREBASE CONFIGURATION
# Lấy từ Firebase Console > Project Settings
VITE_FIREBASE_API_KEY=AIzaSyDxxxxxxxxxxxxxxxxxxxx
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789
VITE_FIREBASE_APP_ID=1:123456789:web:abc123def456

# 🔐 CLERK CONFIGURATION
# Lấy từ Clerk Dashboard > API Keys
VITE_CLERK_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxx

# 📊 GOOGLE ANALYTICS (tùy chọn)
VITE_GA_TRACKING_ID=G-XXXXXXXXXX

# 🌐 APP CONFIGURATION
VITE_APP_URL=http://localhost:5173
VITE_API_URL=https://api.example.com
```

**Cách lấy thông tin:**

#### Firebase:
1. Truy cập [Firebase Console](https://console.firebase.google.com)
2. Tạo hoặc chọn dự án
3. Vào Settings > Project Settings
4. Copy config từ SDK setup

#### Clerk:
1. Truy cập [Clerk Dashboard](https://dashboard.clerk.com)
2. Vào Settings > API Keys
3. Copy `Publishable Key`

### 🏗️ Build cho Production

```bash
# Build optimized
npm run build

# Preview build locally
npm run preview

# Kiểm tra size bundle
npm run build -- --stats
```

### 🚀 Triển khai lên Vercel

**Cách 1: Automatic Deployment (Khuyến nghị)**

```bash
# 1. Push code lên GitHub
git add .
git commit -m "Initial commit"
git push origin main

# 2. Vào https://vercel.com/new
# 3. Import repository
# 4. Vercel tự động deploy mỗi khi push
```

**Cách 2: Manual Deployment**

```bash
# Cài Vercel CLI
npm i -g vercel

# Login vào Vercel
vercel login

# Deploy
vercel --prod
```

**Cách 3: Deploy khác (Netlify, GitHub Pages)**

```bash
# Netlify
npm run build
# Kéo thả folder `dist` vào Netlify

# GitHub Pages
npm run build
git subtree push --prefix dist origin gh-pages
```

---

## 🔒 Bảo mật

### ⚠️ Files KHÔNG được commit

```gitignore
# 🔐 Sensitive files
.env
.env.local
.env.production.local
.env.development.local
serviceAccountKey.json
credentials.json
**/*.key
**/*.pem

# 📦 Dependencies & Build
node_modules/
dist/
build/
.cache/

# 🔧 IDE & OS
.vscode/
.idea/
*.swp
.DS_Store
Thumbs.db

# 🔍 Logs
npm-debug.log*
yarn-debug.log*
```

### 🛡️ Best Practices

| ✅ DO | ❌ DON'T |
|-------|----------|
| Dùng environment variables | Hard-code API keys |
| Gitignore .env file | Commit secrets |
| Rotate keys nếu bị lộ | Reuse compromised keys |
| Sử dụng HTTPS | HTTP cho production |
| Enable Firebase Security Rules | Public database |
| Regular security audits | Ignore vulnerabilities |
| Update dependencies | Outdated packages |

### 🔐 Firebase Security Rules

```javascript
// Firestore Rules (firestore.rules)
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // User data - chỉ user đó mới truy cập
    match /users/{userId} {
      allow read, write: if request.auth.uid == userId;
    }
    
    // Public data - ai cũng xem được
    match /public/{document=**} {
      allow read: if true;
      allow write: if false;
    }
    
    // Test results - chỉ owner mới truy cập
    match /results/{resultId} {
      allow read, write: if request.auth.uid == resource.data.userId;
    }
  }
}
```

---

### 🎮 Chế độ Phát triển

```
1️⃣ PRACTICE MODE (Luyện tập)
   • Nghe lại không giới hạn
   • Xem đáp án ngay sau khi chọn
   • Không tính giờ
   • Có thể bỏ qua câu
   
2️⃣ TEST MODE (Thi thử)
   • Nghe 1 lần duy nhất
   • Không xem đáp án trước khi submit
   • Có bộ đếm thời gian
   • Không được bỏ qua

3️⃣ REVIEW MODE (Ôn tập)
   • Xem lại bài cũ
   • So sánh câu trả lời
   • Xem giải thích chi tiết
   • Theo dõi tiến bộ
```

### 🎙️ Text-to-Speech Engine

```javascript
// Web Speech API Integration
const { speak, voices, setVoice, setRate } = useVoices();

// ✅ Tính năng hỗ trợ:
- Giọng nam/nữ tự chọn
- Tốc độ từ 0.5x - 2.0x
- Trọng âm TOEIC chuẩn
- Hỗ trợ đa ngôn ngữ
- Phát âm tự nhiên

// 🎯 Cách sử dụng:
// 1. Chọn giọng
setVoice('Google US English Female');

// 2. Điều chỉnh tốc độ
setRate(1.2); // 120% tốc độ bình thường

// 3. Phát âm
speak('Hello, welcome to HUFLIT Test Practice!');

// 4. Dừng phát
stopSpeaking();
```

**Danh sách giọng được hỗ trợ:**

| Giọng | Mô tả | Use Case |
|-------|-------|----------|
| 🇺🇸 US Female | Giọng nữ Mỹ | Narrator, Instructions |
| 🇺🇸 US Male | Giọng nam Mỹ | Questions, Conversations |
| 🇬🇧 UK Female | Giọng nữ Anh | Formal texts |
| 🇬🇧 UK Male | Giọng nam Anh | Business scenarios |
| 🇦🇺 AU Female | Giọng nữ Úc | Diverse accents |
| 🇨🇦 CA Male | Giọng nam Canada | International contexts |

### 💾 Auto-Save System

```javascript
// Tự động lưu mỗi khi có thay đổi
useEffect(() => {
  const timer = setTimeout(() => {
    saveProgress({
      answers,
      currentQuestion,
      timeSpent,
      timestamp: new Date().toISOString(),
      examId: selectedExam,
      partId: selectedPart
    });
  }, 2000); // Debounce 2 giây
  
  return () => clearTimeout(timer);
}, [answers, currentQuestion, timeSpent]);

// 🎯 Features:
✅ Auto-save mỗi 2 giây
✅ Sync realtime với Firestore
✅ Offline support với IndexedDB
✅ Conflict resolution tự động
✅ Retry mechanism nếu fail
✅ Visual indicator khi đang lưu
```

**Cơ chế hoạt động:**

```
┌─────────────────────────────────┐
│ User thay đổi câu trả lời       │
└──────────┬──────────────────────┘
           │
           ▼
┌─────────────────────────────────┐
│ Debounce 2 giây                 │
└──────────┬──────────────────────┘
           │
           ▼
┌─────────────────────────────────┐
│ Kiểm tra kết nối                │
├─────────────────────────────────┤
│ Online?  │ Offline?             │
│ ✓ Firebase │ ✓ IndexedDB        │
└──────────┬──────────────────────┘
           │
           ▼
┌─────────────────────────────────┐
│ Lưu thành công                  │
│ Show: "💾 Đã lưu"               │
└─────────────────────────────────┘
```

### 📈 Analytics & Tracking

```javascript
// Google Analytics Events
import { logEvent } from 'firebase/analytics';

// Track exam completion
logEvent(analytics, 'exam_complete', {
  exam_type: 'listening',
  part: 'part1',
  score: 85,
  time_spent: 720, // seconds
  user_id: userId
});

// Custom tracking events:
✅ Thời gian làm bài (time_tracking)
✅ Tỷ lệ hoàn thành (completion_rate)
✅ Điểm trung bình (average_score)
✅ User engagement (session_duration)
✅ Popular sections (feature_usage)
✅ Error rates (error_tracking)
```

**Dashboard Analytics:**

```
📊 Real-time Metrics:
├─ Active users: 247
├─ Today's tests: 1,234
├─ Avg. score: 78.5%
├─ Completion rate: 92%
└─ Server uptime: 99.9%

📈 User Behavior:
├─ Most popular: Part 7
├─ Avg. session: 45 min
├─ Return rate: 68%
└─ Peak hours: 7PM-10PM
```

---

## 🧪 Testing

### 🔬 Chạy Tests

```bash
# Unit tests
npm run test

# E2E tests with Playwright
npm run test:e2e

# Coverage report
npm run test:coverage

# Watch mode (development)
npm run test:watch

# UI mode (interactive)
npm run test:ui
```

### 📝 Test Structure

```
tests/
├── unit/
│   ├── components/
│   │   ├── QuestionDisplay.test.jsx
│   │   ├── AudioControls.test.jsx
│   │   ├── ResultsDisplay.test.jsx
│   │   └── VocabularyPractice.test.jsx
│   ├── hooks/
│   │   ├── useAppState.test.js
│   │   ├── useAudio.test.js
│   │   ├── useVoices.test.js
│   │   └── useAutoSave.test.js
│   └── utils/
│       ├── scoringEngine.test.js
│       ├── validators.test.js
│       └── formatters.test.js
├── integration/
│   ├── auth-flow.test.jsx
│   ├── exam-flow.test.jsx
│   ├── progress-sync.test.jsx
│   └── full-exam-mode.test.jsx
└── e2e/
    ├── complete-exam.spec.js
    ├── user-journey.spec.js
    ├── mobile-responsive.spec.js
    └── performance.spec.js
```

### 🎯 Test Coverage Goals

```
Component Tests:    > 80%  ████████░░
Hook Tests:         > 90%  █████████░
Utility Tests:      > 95%  ██████████
Integration Tests:  > 70%  ███████░░░
E2E Tests:          Critical paths only
```

**Example Test:**

```javascript
import { render, screen, fireEvent } from '@testing-library/react';
import QuestionDisplay from './QuestionDisplay';

describe('QuestionDisplay Component', () => {
  test('renders question and options correctly', () => {
    const mockQuestion = {
      id: 1,
      text: 'What is the capital of France?',
      options: ['London', 'Paris', 'Berlin', 'Madrid']
    };

    render(<QuestionDisplay question={mockQuestion} />);
    
    expect(screen.getByText(/capital of France/i)).toBeInTheDocument();
    expect(screen.getByText('Paris')).toBeInTheDocument();
  });

  test('calls onAnswer when option selected', () => {
    const handleAnswer = jest.fn();
    render(<QuestionDisplay onAnswer={handleAnswer} />);
    
    fireEvent.click(screen.getByText('Paris'));
    expect(handleAnswer).toHaveBeenCalledWith('Paris');
  });
});
```

---

## 🐛 Troubleshooting

### ❓ Các vấn đề thường gặp

#### 1. 🔇 Audio không phát được

```bash
🔍 Nguyên nhân:
- Browser chặn autoplay
- Thiếu quyền microphone
- File audio không tồn tại
- Web Speech API không được hỗ trợ

✅ Giải pháp:
1. Click vào trang trước khi phát (Chrome requirement)
2. Cho phép audio trong browser settings
3. Kiểm tra đường dẫn audio file
4. Clear cache và reload (Ctrl + Shift + R)
5. Thử browser khác (Chrome/Edge recommended)
6. Kiểm tra console logs: F12 > Console
```

#### 2. 🔥 Firebase Authentication Failed

```bash
🔍 Nguyên nhân:
- API key không hợp lệ
- Domain chưa được whitelist
- Firebase project bị disabled
- Quota exceeded

✅ Giải pháp:
1. Kiểm tra .env.local có đúng không
2. Thêm domain vào Firebase Console:
   Authentication > Settings > Authorized domains
3. Enable Authentication providers:
   Authentication > Sign-in method
4. Kiểm tra Firebase quota & billing
5. Verify Firebase project is active
```

#### 3. 🔐 Clerk Authentication Issues

```bash
🔍 Nguyên nhân:
- Publishable key sai
- Domain không match
- Session expired
- CORS issues

✅ Giải pháp:
1. Verify VITE_CLERK_PUBLISHABLE_KEY in .env.local
2. Check allowed domains in Clerk Dashboard:
   Settings > Domains
3. Clear cookies và login lại
4. Update Clerk SDK: npm update @clerk/clerk-react
5. Check Clerk status: status.clerk.com
```

#### 4. 🏗️ Build Errors

```bash
🔍 Nguyên nhân:
- Dependencies version conflicts
- Missing environment variables
- Syntax errors in code
- Node version mismatch

✅ Giải pháp:
1. Clean install:
   rm -rf node_modules package-lock.json
   npm install

2. Check Node version:
   node -v  # Should be >= 16.x
   nvm use 18  # If using nvm

3. Verify .env.local exists and complete

4. Run linting:
   npm run lint
   npm run lint:fix

5. Check build logs for specific errors
```

#### 5. 🐌 Slow Performance

```bash
🔍 Nguyên nhân:
- Large bundle size
- Unoptimized images
- Too many re-renders
- Memory leaks
- Network issues

✅ Giải pháp:
1. Analyze bundle:
   npm run build -- --stats
   
2. Optimize images:
   - Convert to WebP format
   - Compress với TinyPNG
   - Lazy load images

3. Use React.memo() cho heavy components:
   const MemoComponent = memo(Component);

4. Check re-renders với React DevTools:
   - Highlight updates
   - Profile component renders

5. Enable code splitting:
   const Component = lazy(() => import('./Component'));

6. Clear browser cache & cookies
```

#### 6. 📱 Mobile Display Issues

```bash
🔍 Nguyên nhân:
- Viewport không responsive
- Fixed positioning problems
- Font size quá nhỏ
- Touch targets too small
- CSS overflow issues

✅ Giải pháp:
1. Check viewport meta tag:
   <meta name="viewport" content="width=device-width, initial-scale=1">

2. Test trên DevTools mobile mode:
   F12 > Toggle device toolbar (Ctrl+Shift+M)

3. Use Tailwind responsive classes:
   className="text-sm sm:text-base md:text-lg"

4. Test on real devices:
   - Android: Chrome DevTools remote debugging
   - iOS: Safari Web Inspector

5. Check CSS:
   - Avoid fixed widths
   - Use flexbox/grid
   - Test landscape orientation
```

#### 7. 💾 Data Not Saving

```bash
🔍 Nguyên nhân:
- Firestore rules blocking writes
- Network connectivity issues
- User not authenticated
- Quota exceeded

✅ Giải pháp:
1. Check Firestore rules in Firebase Console

2. Verify user is logged in:
   console.log(user);

3. Check browser console for errors

4. Test with Firebase Emulator:
   npm run firebase:emulators

5. Verify Firestore quota not exceeded
```

### 🆘 Báo lỗi

Nếu gặp vấn đề không được liệt kê:

```bash
1. ✅ Check console logs (F12 > Console)
2. ✅ Search existing issues on GitHub
3. ✅ Try incognito/private mode
4. ✅ Test on different browser
5. ✅ Create new issue với template dưới đây
```

**Template báo lỗi:**

```markdown
### 🐛 Bug Report

**Mô tả ngắn gọn:**
[Mô tả vấn đề bằng 1-2 câu]

**Steps to reproduce:**
1. Go to '...'
2. Click on '...'
3. See error

**Expected behavior:**
[Điều bạn mong đợi xảy ra]

**Actual behavior:**
[Điều thực sự xảy ra]

**Screenshots:**
[Đính kèm ảnh chụp màn hình nếu có]

**Console Logs:**
```
[Paste error logs from console]
```

**Environment:**
- OS: [e.g. Windows 11 / macOS 14.0 / Ubuntu 22.04]
- Browser: [e.g. Chrome 120.0 / Firefox 119.0 / Safari 17.0]
- Device: [e.g. Desktop / iPhone 14 / Samsung Galaxy S23]
- App Version: [e.g. 1.0.0]
- Node Version: [e.g. 18.17.0]

**Additional context:**
[Thông tin bổ sung, đã thử gì chưa hiệu quả]

**Checklist:**
- [ ] Đã check console logs
- [ ] Đã clear cache & cookies
- [ ] Đã thử trên browser khác
- [ ] Đã search existing issues
```

---

## 🔄 Changelog

### 📅 Version 1.0.0 (Current - December 2024)

```
🎉 Initial Release

✨ New Features:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ Complete TOEIC Listening (Part 1-4)
   - 60 questions với audio files
   - Text-to-speech với giọng nam/nữ
   - Adjustable playback speed (0.5x-2.0x)
   
✅ Complete TOEIC Reading (Part 5-7)
   - 100 questions đầy đủ
   - Split-screen layout cho Part 6,7
   - Highlight text support
   
✅ Full Mock Exam Mode
   - 160 questions (60 Listening + 100 Reading)
   - Real-time timer
   - Auto-submit khi hết giờ
   
✅ Grammar Review System
   - 50+ grammar rules
   - Interactive exercises
   - Detailed explanations
   
✅ Vocabulary Practice
   - 1000+ từ vựng theo chủ đề
   - Flashcard system
   - Spaced repetition algorithm
   
✅ User Authentication
   - Clerk integration
   - Google OAuth
   - Email/Password login
   
✅ Progress Tracking
   - Firebase Firestore sync
   - Auto-save every 2 seconds
   - Detailed statistics
   
✅ Results Analytics
   - Score breakdown by part
   - Time spent analysis
   - Mistake patterns
   - Performance trends

🎨 UI/UX Improvements:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ Modern gradient theme (Orange-Yellow)
✅ Smooth animations & transitions
✅ Loading states & skeleton screens
✅ Error boundaries & fallbacks
✅ Responsive design (Mobile/Tablet/Desktop)
✅ Accessibility improvements (WCAG 2.1)

🔧 Technical Enhancements:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ React 18 with Concurrent Features
✅ Vite for lightning-fast builds
✅ Firebase v10 integration
✅ React Router v6 with lazy loading
✅ Tailwind CSS v3 utility classes
✅ Code splitting & optimization
✅ Service Worker for offline support

📊 Performance Metrics:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ Lighthouse Score: 95+
✅ First Contentful Paint: < 1.5s
✅ Time to Interactive: < 3s
✅ Bundle size: < 500KB (gzipped)
✅ 99.9% uptime on Vercel
```

### 🚀 Version 1.1.0 (Planned - Q1 2025)

```
📋 Upcoming Features:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔜 Dark Mode support
   - Toggle switch in settings
   - Persistent preference
   - Eye-friendly colors

🔜 Leaderboard System
   - Global rankings
   - Weekly/Monthly boards
   - Friend comparisons
   
🔜 Social Features
   - Share scores on social media
   - Challenge friends
   - Study groups
   
🔜 More Exam Sets
   - 10+ additional test sets
   - Various difficulty levels
   - Topic-specific tests
   
🔜 PDF Export Results
   - Detailed score reports
   - Progress charts
   - Study recommendations
   
🔜 Email Notifications
   - Daily reminders
   - Achievement alerts
   - Study streak tracking
   
🔜 Advanced Filtering
   - Filter by difficulty
   - Filter by topic
   - Custom test creation
```

### 🎯 Version 1.2.0 (Planned - Q2 2025)

```
📋 Advanced Features:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔜 AI-Powered Feedback
   - Personalized study tips
   - Weakness analysis
   - Smart recommendations
   
🔜 Personalized Study Plans
   - Adaptive learning paths
   - Goal-based schedules
   - Progress milestones
   
🔜 Speaking Practice (Experimental)
   - Voice recognition
   - Pronunciation feedback
   - Conversation simulation
   
🔜 Writing Practice
   - Essay prompts
   - Auto-grading (basic)
   - Sample answers
   
🔜 Mobile App
   - React Native version
   - Offline mode
   - Push notifications
   
🔜 Offline Mode Improvements
   - Download test sets
   - Sync when online
   - Better IndexedDB usage
```

### 🚀 Version 2.0.0 (Vision - Q3 2025)

```
📋 Premium & Enterprise:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔜 Premium Subscription
   - Unlimited test sets
   - Ad-free experience
   - Priority support
   - Advanced analytics
   
🔜 Live Classes Integration
   - Video lessons
   - Live Q&A sessions
   - Expert tutors
   
🔜 Tutor Matching
   - Find qualified tutors
   - Book 1-on-1 sessions
   - In-app video calls
   
🔜 Advanced Analytics Dashboard
   - Detailed insights
   - Comparison with peers
   - Predictive scoring
   
🔜 Custom Exam Creator
   - Build your own tests
   - Share with community
   - Monetization options
   
🔜 API for Integration
   - Public API
   - Webhooks
   - Third-party integrations
   - LMS compatibility
```

---

## 🤝 Đóng góp

### 💡 Cách đóng góp

Chúng tôi rất hoan nghênh mọi đóng góp! Dưới đây là các cách bạn có thể tham gia:

#### 1️⃣ Báo lỗi (Bug Reports)

```bash
# Tạo issue mới tại:
https://github.com/khoale-dev-code/huflit-test/issues/new

# Chọn template "Bug Report"
# Điền đầy đủ thông tin theo form
```

#### 2️⃣ Đề xuất tính năng (Feature Requests)

```bash
# Tạo issue với label "enhancement"
# Mô tả chi tiết:
- Use case cụ thể
- Lợi ích mang lại
- Đề xuất implementation (nếu có)
```

#### 3️⃣ Pull Requests

```bash
# 1. Fork repository
git clone https://github.com/YOUR_USERNAME/huflit-test.git
cd huflit-test

# 2. Tạo branch mới
git checkout -b feature/amazing-feature
# hoặc
git checkout -b fix/bug-description

# 3. Make changes & commit
git add .
git commit -m "feat: add amazing feature"
# hoặc
git commit -m "fix: resolve audio playback issue"

# 4. Push to branch
git push origin feature/amazing-feature

# 5. Tạo Pull Request trên GitHub
# Điền description đầy đủ, link issue liên quan
```

### 📋 Contribution Guidelines

#### ✅ DO:

```markdown
✅ Follow existing code style
   - Use Prettier & ESLint configs
   - Match indentation (2 spaces)
   - Consistent naming conventions

✅ Write clear commit messages
   - feat: new feature
   - fix: bug fix
   - docs: documentation
   - style: formatting
   - refactor: code restructure
   - test: adding tests
   - chore: maintenance

✅ Add comments for complex logic
   - Explain "why", not just "what"
   - Use JSDoc for functions
   - Keep comments up-to-date

✅ Update documentation
   - README if needed
   - Inline code comments
   - API documentation

✅ Test your changes
   - Write unit tests
   - Test manually
   - Check on mobile

✅ Keep PRs focused and small
   - One feature/fix per PR
   - Max 400 lines changed
   - Easy to review
```

#### ❌ DON'T:

```markdown
❌ Break existing functionality
   - Run tests before pushing
   - Check backward compatibility

❌ Commit directly to main
   - Always use feature branches
   - Never force push to main

❌ Include unrelated changes
   - Keep commits focused
   - No "drive-by" fixes

❌ Ignore linting errors
   - Fix all ESLint warnings
   - Use `npm run lint:fix`

❌ Skip testing
   - Test edge cases
   - Verify on different browsers

❌ Use placeholder text
   - Complete all TODOs
   - Remove debug code
   - No console.logs
```

### 🎨 Code Style Guide

#### JavaScript/React:

```javascript
// ✅ GOOD: Descriptive names, clean code
const calculateTotalScore = (answers, correctAnswers) => {
  return answers.reduce((score, answer, index) => {
    return answer === correctAnswers[index] 
      ? score + 1 
      : score;
  }, 0);
};

// Component with proper memo usage
const QuestionCard = memo(({ question, onAnswer }) => {
  return (
    <div className="p-4 bg-white rounded-lg shadow">
      <h3 className="text-lg font-bold">{question.text}</h3>
      <button onClick={() => onAnswer(question.id)}>
        Submit
      </button>
    </div>
  );
});

// ❌ BAD: Unclear, no comments, poor naming
const calc = (a, b) => {
  let x = 0;
  for (let i = 0; i < a.length; i++) {
    if (a[i] === b[i]) x++;
  }
  return x;
};

// Component without memo (unnecessary re-renders)
const QuestionCard = ({ q, fn }) => {
  return <div>{q.t}</div>;
};
```

#### CSS/Tailwind:

```javascript
// ✅ GOOD: Organized, responsive
<div className="
  flex flex-col gap-4
  p-4 sm:p-6 md:p-8
  bg-white rounded-lg shadow-md
  hover:shadow-lg transition-shadow
">

// ❌ BAD: Messy, hard to read
<div className="flex p-4 bg-white gap-4 flex-col rounded-lg shadow-md sm:p-6 hover:shadow-lg md:p-8 transition-shadow">
```

### 🏆 Contributors

<div align="center">

**Cảm ơn những người đã đóng góp cho dự án này! 🙏**

| Avatar | Name | Role | Contribution |
|--------|------|------|--------------|
| 👨‍💻 | **Khoa Le** | Creator & Maintainer | Core development, Architecture |
| 🎨 | **Contributors** | Designers | UI/UX improvements |
| 🐛 | **Beta Testers** | QA Team | Bug reports & testing |
| 📝 | **Community** | Documentation | Translations, guides |

<a href="https://github.com/khoale-dev-code/huflit-test/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=khoale-dev-code/huflit-test" />
</a>

**[Xem tất cả contributors →](https://github.com/khoale-dev-code/huflit-test/graphs/contributors)**

</div>

### 🎁 Recognition

Chúng tôi ghi nhận những đóng góp xuất sắc với:

```
🏅 Top Contributor Badge
🎖️ Special Mention in Release Notes
💎 Access to Beta Features
📜 Certificate of Appreciation
🎁 Exclusive Swag (for major contributions)
```

---

## 📞 Liên hệ & Hỗ trợ

### 💬 Kênh hỗ trợ

<div align="center">

| 🌐 Website | [huflit-test.vercel.app](https://huflit-test.vercel.app) |
|------------|-----------------------------------------------------------|
| 📧 Email | khoale.dev.code@gmail.com |
| 💼 LinkedIn | [linkedin.com/in/khoale-dev](https://linkedin.com/in/khoale-dev) |
| 🐙 GitHub | [github.com/khoale-dev-code](https://github.com/khoale-dev-code) |
| 💬 Discord | [Join Server](https://discord.gg/huflit-test) |
| 📱 Telegram | [@huflit_test_group](https://t.me/huflit_test_group) |
| 🐦 Twitter | [@huflit_test](https://twitter.com/huflit_test) |

</div>

### 🆘 Trợ giúp nhanh

```markdown
📖 Đọc tài liệu đầy đủ:
   → https://github.com/khoale-dev-code/huflit-test/wiki

🔍 Tìm kiếm trong Issues:
   → https://github.com/khoale-dev-code/huflit-test/issues

💬 Thảo luận cộng đồng:
   → https://github.com/khoale-dev-code/huflit-test/discussions

❓ Câu hỏi thường gặp (FAQ):
   → https://github.com/khoale-dev-code/huflit-test/wiki/FAQ

📹 Video hướng dẫn:
   → https://youtube.com/@huflit-test

📚 Blog & Tutorials:
   → https://blog.huflit-test.com
```

### 🕐 Response Time

<div align="center">

| Priority | Response Time | Resolution Time |
|----------|---------------|-----------------|
| 🔴 Critical bugs | < 24 hours | < 3 days |
| 🟡 Feature requests | < 1 week | Best effort |
| 🟢 General questions | < 3 days | N/A |
| ⚪ Enhancements | Best effort | Scheduled |

</div>

### 📋 Support Checklist

Trước khi liên hệ hỗ trợ, hãy đảm bảo bạn đã:

```
✅ Check FAQ & Documentation
✅ Search existing issues
✅ Try troubleshooting steps
✅ Clear cache & cookies
✅ Test on different browser
✅ Gather error logs/screenshots
✅ Note steps to reproduce
✅ Check system requirements
```

---

## 📜 License

```
MIT License

Copyright (c) 2024 Khoa Le

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

### 📖 License Explanation

```
✅ You CAN:
   - Use for personal projects
   - Use for commercial projects
   - Modify the source code
   - Distribute copies
   - Sublicense
   - Use privately

❌ You CANNOT:
   - Hold author liable
   - Use author's name for promotion
   - Remove copyright notices

⚠️ You MUST:
   - Include original license
   - Include copyright notice
   - State changes made
```

---

## 🙏 Acknowledgments

### 💖 Cảm ơn đặc biệt

<div align="center">

#### 🎓 **HUFLIT University (Trường Đại học Ngoại ngữ - Tin học TP.HCM)**

*Cảm hứng ban đầu và môi trường học tập tuyệt vời đã tạo nên dự án này*

#### 👥 **Beta Testers & Early Users**

*Những người dùng đầu tiên đã tin tưởng, thử nghiệm và đóng góp feedback quý báu*

#### 🌟 **Open Source Community**

*Cộng đồng mã nguồn mở đã cung cấp những công cụ tuyệt vời*

</div>

---

### 🛠️ Built With Love Using

<div align="center">

#### 🎨 **Frontend Technologies**

![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)
![Vite](https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=vite&logoColor=white)
![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)
![React Router](https://img.shields.io/badge/React_Router-CA4245?style=for-the-badge&logo=react-router&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)

#### ☁️ **Backend & Services**

![Firebase](https://img.shields.io/badge/Firebase-FFCA28?style=for-the-badge&logo=firebase&logoColor=black)
![Clerk](https://img.shields.io/badge/Clerk-6C47FF?style=for-the-badge&logo=clerk&logoColor=white)
![Vercel](https://img.shields.io/badge/Vercel-000000?style=for-the-badge&logo=vercel&logoColor=white)

#### 🔧 **Development Tools**

![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)
![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)
![VS Code](https://img.shields.io/badge/VS_Code-007ACC?style=for-the-badge&logo=visual-studio-code&logoColor=white)
![npm](https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=npm&logoColor=white)
![ESLint](https://img.shields.io/badge/ESLint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white)
![Prettier](https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=black)

</div>

---

### 📚 **Libraries & Frameworks**

```
🎯 Core Dependencies:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
├─ react@18.2.0              - UI Library
├─ react-dom@18.2.0          - DOM Rendering
├─ react-router-dom@6.20.0   - Routing
├─ vite@5.0.0                - Build Tool
└─ tailwindcss@3.4.0         - CSS Framework

🔥 Firebase Ecosystem:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
├─ firebase@10.7.0           - Backend SDK
├─ firestore                 - Database
├─ firebase-auth             - Authentication
└─ firebase-analytics        - Analytics

🔐 Authentication:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
└─ @clerk/clerk-react@4.29.0 - Auth Platform

🎨 UI Components:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
├─ lucide-react@0.302.0      - Icons
├─ react-hook-form@7.48.0    - Forms
└─ @hookform/resolvers@3.3.0 - Form Validation

⚡ State Management:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
├─ zustand@4.4.0             - State Library
└─ Context API               - React Context

🧪 Testing:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
├─ vitest                    - Test Runner
├─ @testing-library/react    - Component Testing
└─ playwright                - E2E Testing
```

---

### 🌟 **Special Thanks To**

#### 🎵 **Audio Resources**

```
🔊 Text-to-Speech:
   ├─ Web Speech API
   │  └─ Browser-native TTS engine
   │     Cung cấp giọng đọc tự nhiên miễn phí
   │
   ├─ Google Text-to-Speech
   │  └─ High-quality voices
   │     Giọng nói chất lượng cao, tự nhiên
   │
   └─ ResponsiveVoice API (Deprecated)
      └─ Legacy support cho browsers cũ

📻 Audio Processing:
   ├─ Web Audio API
   │  └─ Real-time audio manipulation
   │     Xử lý âm thanh realtime
   │
   └─ Howler.js (Considered)
      └─ Cross-browser audio library
```

#### 🎨 **Design Inspiration**

```
🖌️ UI/UX References:
   ├─ Material Design (Google)
   │  └─ Design principles & guidelines
   │     Nguyên tắc thiết kế hiện đại
   │
   ├─ Tailwind UI
   │  └─ Component examples
   │     Thư viện component đẹp
   │
   ├─ DaisyUI
   │  └─ Tailwind component library
   │     Components Tailwind có sẵn
   │
   ├─ Shadcn/ui
   │  └─ Beautifully designed components
   │     Components đẹp, accessible
   │
   └─ Dribbble & Behance
      └─ Creative inspiration
         Cảm hứng thiết kế sáng tạo
```

#### 📖 **Educational Content**

```
📚 TOEIC Content Sources:
   ├─ Educational Testing Service (ETS)
   │  └─ Official TOEIC test format
   │     Định dạng thi chính thức
   │
   ├─ Cambridge English
   │  └─ Language testing standards
   │     Tiêu chuẩn kiểm tra ngôn ngữ
   │
   ├─ British Council
   │  └─ English learning resources
   │     Tài nguyên học tiếng Anh
   │
   └─ Public Domain Resources
      └─ Free educational materials
         Tài liệu giáo dục miễn phí
```

#### 🛠️ **Development Tools**

```
🔧 Essential Tools:
   ├─ Visual Studio Code
   │  └─ By Microsoft
   │     Editor mạnh mẽ, extensions phong phú
   │
   ├─ Chrome DevTools
   │  └─ By Google
   │     Debug & performance profiling
   │
   ├─ Firefox Developer Tools
   │  └─ By Mozilla
   │     Accessibility testing
   │
   ├─ React Developer Tools
   │  └─ By Meta
   │     Component inspection
   │
   ├─ Redux DevTools
   │  └─ By Redux Team
   │     State management debugging
   │
   └─ Postman
      └─ By Postman Inc.
         API testing & documentation
```

#### 🎓 **Learning Resources**

```
📖 Documentation & Tutorials:
   ├─ React Documentation
   │  └─ https://react.dev
   │     Official React docs (excellent!)
   │
   ├─ MDN Web Docs
   │  └─ https://developer.mozilla.org
   │     Web standards reference
   │
   ├─ Firebase Documentation
   │  └─ https://firebase.google.com/docs
   │     Comprehensive guides
   │
   ├─ Tailwind CSS Documentation
   │  └─ https://tailwindcss.com/docs
   │     Utility-first CSS guide
   │
   ├─ Stack Overflow
   │  └─ Community Q&A
   │     Giải đáp thắc mắc lập trình
   │
   └─ Dev.to & Medium
      └─ Developer blogs
         Bài viết kỹ thuật chất lượng
```

---

### 🌍 **Community & Contributors**

```
👥 Amazing People Who Helped:

🎖️ Core Team:
   ├─ Khoa Le (@khoale-dev-code)
   │  └─ Project Creator & Lead Developer
   │
   ├─ [Your Name]
   │  └─ Contributor
   │
   └─ [Your Name]
      └─ Contributor

🐛 Bug Hunters:
   ├─ All users who reported issues
   ├─ Beta testers who found edge cases
   └─ QA volunteers

💡 Feature Suggesters:
   ├─ Community members with great ideas
   ├─ Students who shared feedback
   └─ Teachers who provided insights

📝 Documentation Writers:
   ├─ Translation contributors
   ├─ Tutorial creators
   └─ Wiki maintainers

🎨 Designers:
   ├─ UI/UX feedback providers
   ├─ Icon & asset contributors
   └─ Theme designers
```

---

### 🏆 **Awards & Recognition**

```
🥇 Achievements:
   ├─ ⭐ 100+ GitHub Stars
   ├─ 🍴 50+ Forks
   ├─ 👥 1,000+ Active Users
   ├─ 📈 50,000+ Monthly Pageviews
   └─ 💯 4.8/5 User Rating

📰 Featured On:
   ├─ Hacker News Front Page
   ├─ Reddit r/webdev
   ├─ Dev.to Featured Post
   ├─ GitHub Trending (React)
   └─ Vietnamese Tech Community
```

---

### 💝 **Personal Thanks**

```
🙏 Heartfelt Gratitude To:

👨‍👩‍👧‍👦 Family & Friends:
   └─ For endless support and patience during late-night coding sessions

👨‍🏫 Teachers & Mentors:
   └─ For inspiring the love of learning and teaching

👥 HUFLIT Community:
   └─ For being the reason this project exists

🌏 Open Source Community:
   └─ For proving that collaboration beats competition

💻 Every Single User:
   └─ Your usage and feedback make this project meaningful

"Alone we can do so little; together we can do so much."
                                        - Helen Keller
```

---

## 📊 Project Statistics

<div align="center">

### 📈 **GitHub Stats**

![GitHub stars](https://img.shields.io/github/stars/khoale-dev-code/huflit-test?style=social)
![GitHub forks](https://img.shields.io/github/forks/khoale-dev-code/huflit-test?style=social)
![GitHub watchers](https://img.shields.io/github/watchers/khoale-dev-code/huflit-test?style=social)
![GitHub followers](https://img.shields.io/github/followers/khoale-dev-code?style=social)

### 📦 **Repository Info**

![GitHub repo size](https://img.shields.io/github/repo-size/khoale-dev-code/huflit-test)
![GitHub language count](https://img.shields.io/github/languages/count/khoale-dev-code/huflit-test)
![GitHub top language](https://img.shields.io/github/languages/top/khoale-dev-code/huflit-test)
![Lines of code](https://img.shields.io/tokei/lines/github/khoale-dev-code/huflit-test)

### 🔄 **Activity**

![GitHub last commit](https://img.shields.io/github/last-commit/khoale-dev-code/huflit-test)
![GitHub commit activity](https://img.shields.io/github/commit-activity/m/khoale-dev-code/huflit-test)
![GitHub contributors](https://img.shields.io/github/contributors/khoale-dev-code/huflit-test)

### 🐛 **Issues & PRs**

![GitHub issues](https://img.shields.io/github/issues/khoale-dev-code/huflit-test)
![GitHub closed issues](https://img.shields.io/github/issues-closed/khoale-dev-code/huflit-test)
![GitHub pull requests](https://img.shields.io/github/issues-pr/khoale-dev-code/huflit-test)
![GitHub closed pull requests](https://img.shields.io/github/issues-pr-closed/khoale-dev-code/huflit-test)

### ⚡ **Performance**

![Website](https://img.shields.io/website?url=https%3A%2F%2Fhuflit-test.vercel.app)
![Uptime Robot status](https://img.shields.io/uptimerobot/status/m793740595-2f98c1d6f29e7d4f62b3e1e6)
![Lighthouse Score](https://img.shields.io/badge/Lighthouse-95%2B-success)

</div>

---

## 🎯 Project Goals & Mission

### 🎓 **Educational Mission**

```
📚 Our Core Mission:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🌟 Democratize TOEIC Preparation
   └─ Make quality test prep accessible to everyone
      Regardless of economic background

💯 Provide Free Quality Resources
   └─ No paywalls for essential features
      Premium content should remain affordable

🇻🇳 Support Vietnamese Students
   └─ Localized content & interface
      Understand local learning needs

👥 Build Learning Community
   └─ Foster collaboration over competition
      Students helping students succeed
```

### 💡 **Technical Excellence**

```
🚀 Technical Goals:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚡ Modern Web Technologies
   ├─ Stay current with latest standards
   ├─ Adopt best practices early
   └─ Performance-first approach

🎨 Best Practices & Patterns
   ├─ Clean, maintainable code
   ├─ Comprehensive documentation
   └─ Test-driven development

📈 Performance Optimization
   ├─ Sub-second load times
   ├─ Smooth 60fps animations
   └─ Efficient bundle sizes

🏗️ Scalable Architecture
   ├─ Modular component design
   ├─ Flexible data structures
   └─ Easy to extend & customize
```

### 🌱 **Community Growth**

```
👥 Community Goals:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🤝 Open Source Contributions
   ├─ Welcome first-time contributors
   ├─ Mentorship for new developers
   └─ Collaborative decision-making

📖 Knowledge Sharing
   ├─ Write tutorials & guides
   ├─ Share lessons learned
   └─ Document best practices

💻 Collaborative Development
   ├─ Code reviews & feedback
   ├─ Pair programming sessions
   └─ Open discussions on features

🔄 Continuous Improvement
   ├─ Regular updates & fixes
   ├─ User feedback integration
   └─ Performance monitoring
```

---

## 🚀 Quick Links & Resources

<div align="center">

### 🌐 **Essential Links**

| Resource | URL | Description |
|----------|-----|-------------|
| 🏠 **Homepage** | [huflit-test.vercel.app](https://huflit-test.vercel.app) | Live application |
| 📖 **Documentation** | [Wiki](https://github.com/khoale-dev-code/huflit-test/wiki) | Full documentation |
| 🐛 **Report Bug** | [Issues](https://github.com/khoale-dev-code/huflit-test/issues) | Bug tracker |
| 💡 **Request Feature** | [Discussions](https://github.com/khoale-dev-code/huflit-test/discussions) | Feature requests |
| ⭐ **Star Project** | [GitHub](https://github.com/khoale-dev-code/huflit-test) | Show support |
| 🍴 **Fork Project** | [Fork](https://github.com/khoale-dev-code/huflit-test/fork) | Create your copy |
| 📊 **Project Board** | [Projects](https://github.com/khoale-dev-code/huflit-test/projects) | Development roadmap |
| 📈 **Analytics** | [Insights](https://github.com/khoale-dev-code/huflit-test/pulse) | Project activity |

</div>

---

## 🔗 Related Projects

```
🌟 Check Out These Similar Projects:

📚 TOEIC Practice Apps:
├─ TOEIC Test Pro
│  └─ Mobile-first TOEIC practice
│
├─ English Central
│  └─ Video-based English learning
│
└─ Duolingo English Test
   └─ Adaptive testing platform

🎓 Educational Platforms:
├─ Khan Academy
│  └─ Free education for all
│
├─ Coursera
│  └─ Online learning platform
│
└─ edX
   └─ University-level courses

💻 Open Source Learning:
├─ FreeCodeCamp
│  └─ Learn to code for free
│
├─ The Odin Project
│  └─ Full-stack curriculum
│
└─ Exercism
   └─ Code practice & mentorship
```

---

## 🌟 Support the Project

<div align="center">

### 💖 **Show Your Support**

If you find this project helpful, please consider:

[![Star on GitHub](https://img.shields.io/badge/⭐_Star_on_GitHub-yellow?style=for-the-badge&logo=github)](https://github.com/khoale-dev-code/huflit-test)
[![Share on Twitter](https://img.shields.io/badge/Share_on_Twitter-1DA1F2?style=for-the-badge&logo=twitter&logoColor=white)](https://twitter.com/intent/tweet?text=Check%20out%20HUFLIT%20Test%20Practice%20-%20Free%20TOEIC%20prep%20platform!&url=https://github.com/khoale-dev-code/huflit-test)
[![Share on Facebook](https://img.shields.io/badge/Share_on_Facebook-1877F2?style=for-the-badge&logo=facebook&logoColor=white)](https://www.facebook.com/sharer/sharer.php?u=https://github.com/khoale-dev-code/huflit-test)
[![Share on LinkedIn](https://img.shields.io/badge/Share_on_LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/sharing/share-offsite/?url=https://github.com/khoale-dev-code/huflit-test)

### 🎁 **Ways to Support**

```
⭐ Star the repository
🍴 Fork and contribute
🐛 Report bugs & issues
💡 Suggest new features
📖 Improve documentation
🌍 Translate to other languages
📢 Spread the word
💰 Sponsor the project (coming soon)
```

</div>

---

## 📱 Stay Connected

<div align="center">

### 🔔 **Get Updates**

[![Watch on GitHub](https://img.shields.io/badge/Watch-Releases-green?style=for-the-badge&logo=github)](https://github.com/khoale-dev-code/huflit-test/subscription)
[![Follow on Twitter](https://img.shields.io/badge/Follow-Twitter-1DA1F2?style=for-the-badge&logo=twitter&logoColor=white)](https://twitter.com/huflit_test)
[![Join Discord](https://img.shields.io/badge/Join-Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white)](https://discord.gg/huflit-test)
[![Subscribe Newsletter](https://img.shields.io/badge/Subscribe-Newsletter-FF6B6B?style=for-the-badge&logo=gmail&logoColor=white)](https://huflit-test.vercel.app/newsletter)

### 📊 **Project Status**

[![Maintenance](https://img.shields.io/badge/Maintained%3F-yes-green.svg?style=for-the-badge)](https://github.com/khoale-dev-code/huflit-test/graphs/commit-activity)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=for-the-badge)](http://makeapullrequest.com)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge)](https://opensource.org/licenses/MIT)

</div>

---

## 🎓 For Students

```
💡 Tips for TOEIC Success:

📚 Study Smart:
├─ Practice consistently (30min/day better than 3hrs once/week)
├─ Focus on weak areas
├─ Review mistakes regularly
└─ Use spaced repetition

🎯 Test Strategy:
├─ Time management is crucial
├─ Don't spend too long on one question
├─ Eliminate obviously wrong answers first
└─ Trust your first instinct

🔊 Listening Tips:
├─ Listen to English daily (podcasts, news, TV shows)
├─ Practice with different accents
├─ Focus on understanding context
└─ Don't translate in your head

📖 Reading Tips:
├─ Read English content daily (articles, books)
├─ Build vocabulary systematically
├─ Learn common grammar patterns
└─ Practice skimming & scanning

🎯 Target Score:
├─ Set realistic goals
├─ Track your progress
├─ Celebrate small wins
└─ Stay motivated!
```

---

## 👨‍💻 For Developers

```
🛠️ Development Tips:

📖 Code Review Checklist:
├─ [ ] Code follows style guide
├─ [ ] All tests passing
├─ [ ] No console.logs left
├─ [ ] Documentation updated
├─ [ ] Performance optimized
└─ [ ] Accessibility checked

🚀 Performance Best Practices:
├─ Use React.memo for expensive components
├─ Implement code splitting with lazy loading
├─ Optimize images (WebP, lazy load)
├─ Minimize bundle size
├─ Use production builds
└─ Monitor with Lighthouse

🔒 Security Checklist:
├─ Never commit .env files
├─ Use environment variables
├─ Validate all user inputs
├─ Sanitize data before display
├─ Keep dependencies updated
└─ Use HTTPS in production

🧪 Testing Strategy:
├─ Write tests for critical paths
├─ Test edge cases
├─ Use snapshot testing wisely
├─ Mock external dependencies
└─ Aim for >80% coverage
```

---

<div align="center">

## 🎉 Thank You!

### **Made with ❤️ by [Khoa Le](https://github.com/khoale-dev-code)**

---

*"Education is the most powerful weapon which you can use to change the world."*  
**— Nelson Mandela**

---

*"The beautiful thing about learning is that nobody can take it away from you."*  
**— B.B. King**

---

### 🌟 **Star History**

[![Star History Chart](https://api.star-history.com/svg?repos=khoale-dev-code/huflit-test&type=Date)](https://star-history.com/#khoale-dev-code/huflit-test&Date)

---

### 📅 **Last Updated:** December 2024

**Version:** 1.0.0  
**Status:** 🟢 Active Development  
**License:** MIT  

---

© 2025 HUFLIT Test Practice. All rights reserved.

**Built with passion 💙 for education 📚**

[⬆️ Back to Top](#-huflit-test-practice)

</div>
</file>

<file path="src/admin/AdminApp.jsx">
// src/admin/AdminApp.jsx
import React from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';
import { useAdminAuth } from './hooks/useAdminAuth';
import AdminLogin from './pages/AdminLogin';
import AdminDashboard from './pages/AdminDashboard';
import { LoadingSpinner } from '../components/common/LoadingSpinner';

const ProtectedRoute = ({ children }) => {
  const { isAdmin, loading } = useAdminAuth();

  if (loading) {
    return <LoadingSpinner />;
  }

  return isAdmin ? children : <Navigate to="/admin/login" replace />;
};

const AdminApp = () => {
  return (
    <Routes>
      <Route path="/login" element={<AdminLogin />} />
      
      {/* ⚠️ ROUTE TẠM - XÓA SAU KHI TẠO ADMIN
      <Route path="/setup" element={<AdminSetup />} /> */}
      
      <Route 
        path="/dashboard" 
        element={
          <ProtectedRoute>
            <AdminDashboard />
          </ProtectedRoute>
        } 
      />
      
      <Route path="/" element={<Navigate to="/admin/dashboard" replace />} />
    </Routes>
  );
};

export default AdminApp;
</file>

<file path="src/admin/components/AdminSetup.jsx">
// // src/admin/components/AdminSetup.jsx
// import React, { useState } from 'react';
// import { Shield, CheckCircle, XCircle, AlertTriangle } from 'lucide-react';
// import createFirstAdmin from '../../../scripts/createFirstAdmin';

// const AdminSetup = () => {
//   const [status, setStatus] = useState(null);
//   const [loading, setLoading] = useState(false);

//   const handleCreateAdmin = async () => {
//     if (!window.confirm('⚠️ Bạn có chắc chắn muốn tạo admin với UID: nxd50HYmtQXkaezI4c8b1bkhDug2?')) {
//       return;
//     }

//     setLoading(true);
//     setStatus(null);
    
//     const result = await createFirstAdmin();
    
//     setStatus(result);
//     setLoading(false);

//     if (result.success) {
//       setTimeout(() => {
//         alert('✅ Admin đã được tạo thành công!\n\nBây giờ bạn có thể:\n1. Xóa route /admin/setup\n2. Đăng nhập tại /admin/login');
//       }, 500);
//     }
//   };

//   return (
//     <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4">
//       <div className="max-w-lg w-full bg-white rounded-2xl shadow-2xl p-8">
//         {/* Header */}
//         <div className="text-center mb-8">
//           <div className="inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-4">
//             <Shield className="w-10 h-10 text-blue-600" />
//           </div>
//           <h1 className="text-3xl font-bold text-gray-900 mb-2">
//             Khởi tạo Admin
//           </h1>
//           <p className="text-gray-600">
//             Tạo Super Admin đầu tiên cho hệ thống
//           </p>
//         </div>

//         {/* Warning */}
//         <div className="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
//           <div className="flex items-start gap-3">
//             <AlertTriangle className="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5" />
//             <div className="flex-1">
//               <p className="text-sm font-medium text-amber-900 mb-1">
//                 Lưu ý quan trọng
//               </p>
//               <ul className="text-xs text-amber-800 space-y-1">
//                 <li>• Chỉ chạy script này <strong>một lần duy nhất</strong></li>
//                 <li>• Đảm bảo UID đã được tạo trong Firebase Authentication</li>
//                 <li>• Admin sẽ được tạo trong collection <code>admin_accounts</code></li>
//                 <li>• Sau khi tạo, xóa route này khỏi code</li>
//               </ul>
//             </div>
//           </div>
//         </div>

//         {/* Admin Info */}
//         <div className="space-y-4 mb-6">
//           <div className="bg-gray-50 rounded-lg p-4">
//             <p className="text-sm font-medium text-gray-700 mb-2">Admin UID:</p>
//             <code className="block text-xs bg-white p-3 rounded border border-gray-200 overflow-x-auto font-mono">
//               nxd50HYmtQXkaezI4c8b1bkhDug2
//             </code>
//           </div>

//           <div className="bg-gray-50 rounded-lg p-4">
//             <p className="text-sm font-medium text-gray-700 mb-2">Email:</p>
//             <code className="block text-xs bg-white p-3 rounded border border-gray-200 overflow-x-auto">
//               admin@example.com
//             </code>
//             <p className="text-xs text-amber-600 mt-2">
//               ⚠️ Nhớ thay email này trong file script!
//             </p>
//           </div>

//           <div className="bg-gray-50 rounded-lg p-4">
//             <p className="text-sm font-medium text-gray-700 mb-2">Quyền:</p>
//             <div className="flex flex-wrap gap-2">
//               <span className="inline-flex items-center px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-medium">
//                 Super Admin
//               </span>
//               <span className="inline-flex items-center px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium">
//                 manage_users
//               </span>
//               <span className="inline-flex items-center px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium">
//                 manage_exams
//               </span>
//               <span className="inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-medium">
//                 manage_grammar
//               </span>
//               <span className="inline-flex items-center px-2 py-1 bg-pink-100 text-pink-700 rounded text-xs font-medium">
//                 manage_vocabulary
//               </span>
//             </div>
//           </div>
//         </div>

//         {/* Action Button */}
//         <button
//           onClick={handleCreateAdmin}
//           disabled={loading || status?.success}
//           className="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
//         >
//           {loading ? (
//             <>
//               <div className="animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"></div>
//               <span>Đang tạo Admin...</span>
//             </>
//           ) : status?.success ? (
//             <>
//               <CheckCircle className="w-5 h-5" />
//               <span>Đã tạo thành công!</span>
//             </>
//           ) : (
//             <>
//               <Shield className="w-5 h-5" />
//               <span>Tạo Super Admin</span>
//             </>
//           )}
//         </button>

//         {/* Status Message */}
//         {status && (
//           <div className={`mt-4 flex items-start gap-3 p-4 rounded-lg ${
//             status.success 
//               ? 'bg-green-50 border border-green-200' 
//               : 'bg-red-50 border border-red-200'
//           }`}>
//             {status.success ? (
//               <>
//                 <CheckCircle className="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" />
//                 <div className="flex-1">
//                   <p className="text-sm font-medium text-green-900 mb-2">
//                     🎉 Tạo Super Admin thành công!
//                   </p>
//                   <div className="space-y-1 text-xs text-green-700">
//                     <p>📧 Email: {status.email}</p>
//                     <p>🆔 UID: {status.adminUID}</p>
//                     <p>📦 Collection: admin_accounts</p>
//                   </div>
//                   <p className="text-xs text-green-600 mt-3 font-medium">
//                     ➡️ Bây giờ bạn có thể đăng nhập tại /admin/login
//                   </p>
//                 </div>
//               </>
//             ) : (
//               <>
//                 <XCircle className="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" />
//                 <div className="flex-1">
//                   <p className="text-sm font-medium text-red-900 mb-1">
//                     Lỗi khi tạo admin
//                   </p>
//                   <p className="text-xs text-red-700">
//                     {status.error}
//                   </p>
//                 </div>
//               </>
//             )}
//           </div>
//         )}

//         {/* Footer */}
//         <div className="mt-6 pt-6 border-t border-gray-200">
//           <p className="text-xs text-gray-500 text-center">
//             🔒 Admin Panel - Collection: admin_accounts
//           </p>
//         </div>
//       </div>
//     </div>
//   );
// };

// export default AdminSetup;
</file>

<file path="src/admin/pages/AdminDashboard.jsx">
// src/admin/pages/AdminDashboard.jsx
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { 
  LogOut, Users, BookOpen, FileText, Languages, 
  BarChart3, Settings, Shield, Activity, Database,
  ChevronRight, UserCog, Bell, MessageSquare,
  HelpCircle, AlertCircle, CheckCircle, Clock,
  Eye, Download, Edit, Trash2, Search, Filter,
  Home, TrendingUp, Users as UsersIcon, FileCheck
} from 'lucide-react';
import { useAdminAuth } from '../hooks/useAdminAuth';

const AdminDashboard = () => {
  const navigate = useNavigate();
  const { admin, signOut } = useAdminAuth();
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    // Simulate loading
    const timer = setTimeout(() => {
      setIsLoading(false);
    }, 1000);
    return () => clearTimeout(timer);
  }, []);

  const handleSignOut = async () => {
    await signOut();
    navigate('/admin/login');
  };

  const mainMenuItems = [
    { 
      icon: Users, 
      label: 'Quản lý Users', 
      path: '/admin/users',
      color: 'bg-gradient-to-br from-blue-500 to-cyan-500',
      count: '1.2K',
      description: 'Quản lý người dùng và phân quyền',
      badge: 'New'
    },
    { 
      icon: BookOpen, 
      label: 'Quản lý Exams', 
      path: '/admin/exams',
      color: 'bg-gradient-to-br from-purple-500 to-pink-500',
      count: '45',
      description: 'Tạo và chỉnh sửa đề thi',
      badge: ''
    },
    { 
      icon: FileText, 
      label: 'Quản lý Grammar', 
      path: '/admin/grammar',
      color: 'bg-gradient-to-br from-green-500 to-emerald-500',
      count: '320',
      description: 'Ngữ pháp và bài học',
      badge: 'Updated'
    },
    { 
      icon: Languages, 
      label: 'Quản lý Vocabulary', 
      path: '/admin/vocabulary',
      color: 'bg-gradient-to-br from-orange-500 to-red-500',
      count: '5K+',
      description: 'Từ vựng và flashcard',
      badge: ''
    },
    { 
      icon: Database, 
      label: 'Database', 
      path: '/admin/database',
      color: 'bg-gradient-to-br from-indigo-500 to-blue-500',
      count: '12GB',
      description: 'Quản lý dữ liệu hệ thống',
      badge: ''
    },
    { 
      icon: Settings, 
      label: 'Cài đặt', 
      path: '/admin/settings',
      color: 'bg-gradient-to-br from-gray-600 to-gray-800',
      count: '',
      description: 'Cấu hình hệ thống',
      badge: ''
    }
  ];

  const statsCards = [
    { 
      title: 'Total Users', 
      value: '1,254', 
      change: '+12%', 
      icon: UsersIcon,
      color: 'text-blue-600 bg-blue-100',
      trend: 'up'
    },
    { 
      title: 'Active Exams', 
      value: '45', 
      change: '+3', 
      icon: BookOpen,
      color: 'text-purple-600 bg-purple-100',
      trend: 'up'
    },
    { 
      title: 'Questions', 
      value: '1,845', 
      change: '+89', 
      icon: FileCheck,
      color: 'text-green-600 bg-green-100',
      trend: 'up'
    },
    { 
      title: 'Completion Rate', 
      value: '92%', 
      change: '+5%', 
      icon: TrendingUp,
      color: 'text-orange-600 bg-orange-100',
      trend: 'up'
    },
  ];

  const recentActivities = [
    { user: 'Nguyễn Văn A', action: 'đã hoàn thành bài test', time: '2 phút trước', type: 'success' },
    { user: 'Trần Thị B', action: 'đã đăng ký tài khoản mới', time: '15 phút trước', type: 'info' },
    { user: 'Lê Văn C', action: 'đã upload tài liệu mới', time: '1 giờ trước', type: 'warning' },
    { user: 'Phạm Thị D', action: 'đã báo cáo lỗi', time: '2 giờ trước', type: 'error' },
  ];

  const quickActions = [
    { icon: Download, label: 'Export Data', color: 'from-blue-500 to-cyan-500' },
    { icon: Edit, label: 'Edit Content', color: 'from-purple-500 to-pink-500' },
    { icon: Eye, label: 'Preview Site', color: 'from-green-500 to-emerald-500' },
    { icon: Filter, label: 'Filter Users', color: 'from-orange-500 to-red-500' },
  ];

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center">
        <div className="text-center">
          <div className="w-20 h-20 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
          <p className="text-gray-600 font-medium">Loading Admin Dashboard...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
      {/* Animated Background */}
      <div className="fixed inset-0 overflow-hidden pointer-events-none">
        <div className="absolute -top-40 -right-40 w-80 h-80 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"></div>
        <div className="absolute -bottom-40 -left-40 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse animation-delay-2000"></div>
      </div>

      <style>
        {`
          @keyframes slideIn {
            from {
              transform: translateY(20px);
              opacity: 0;
            }
            to {
              transform: translateY(0);
              opacity: 1;
            }
          }
          .animate-slide-in {
            animation: slideIn 0.5s ease-out forwards;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
        `}
      </style>

      {/* Header */}
      <header className="sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-200/50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-4">
              <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg">
                <Shield className="w-6 h-6 text-white" />
              </div>
              <div>
                <h1 className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                  Admin Dashboard
                </h1>
                <p className="text-sm text-gray-600 flex items-center gap-1">
                  <span>Xin chào,</span>
                  <span className="font-semibold text-blue-600">{admin?.email}</span>
                  <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                </p>
              </div>
            </div>
            
            <div className="flex items-center gap-4">
              <button className="relative p-2 rounded-xl hover:bg-gray-100 transition-colors group">
                <Bell className="w-5 h-5 text-gray-600 group-hover:text-blue-600 transition-colors" />
                <span className="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
              </button>
              
              <div className="hidden md:flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-xl">
                <Clock className="w-4 h-4 text-gray-500" />
                <span className="text-sm text-gray-600">Today: {new Date().toLocaleDateString('vi-VN')}</span>
              </div>
              
              <button
                onClick={handleSignOut}
                className="group flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl transition-all duration-300 shadow-sm hover:shadow-md transform hover:-translate-y-0.5"
              >
                <LogOut className="w-4 h-4 group-hover:rotate-12 transition-transform" />
                <span className="font-medium">Đăng xuất</span>
              </button>
            </div>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {/* Welcome Section */}
        <div className="mb-8 animate-slide-in">
          <div className="bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg">
            <div className="flex flex-col md:flex-row justify-between items-center gap-4">
              <div>
                <h2 className="text-2xl font-bold mb-2 text-white">Chào mừng trở lại, Admin!</h2>
                <p className="text-blue-100">Bạn có <span className="font-bold">12</span> công việc mới cần xử lý hôm nay.</p>
              </div>
              <button 
                onClick={() => navigate('/admin/tasks')}
                className="px-6 py-3 bg-white text-blue-600 hover:bg-blue-50 font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg"
              >
                Xem tất cả công việc
              </button>
            </div>
          </div>
        </div>

        {/* Stats Grid */}
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
          {statsCards.map((stat, index) => (
            <div 
              key={index}
              className="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 animate-slide-in"
              style={{ animationDelay: `${index * 0.1}s` }}
            >
              <div className="flex items-center justify-between mb-4">
                <div className={`p-3 rounded-xl ${stat.color}`}>
                  <stat.icon className="w-6 h-6" />
                </div>
                <span className={`text-sm font-medium px-2 py-1 rounded-full ${stat.trend === 'up' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                  {stat.change}
                </span>
              </div>
              <p className="text-3xl font-bold text-gray-900 mb-1">{stat.value}</p>
              <p className="text-sm text-gray-600">{stat.title}</p>
              <div className="mt-4 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full rounded-full ${stat.trend === 'up' ? 'bg-green-500' : 'bg-red-500'}`}
                  style={{ width: `${Math.min(100, parseInt(stat.value) / 20)}%` }}
                ></div>
              </div>
            </div>
          ))}
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Main Features Grid */}
          <div className="lg:col-span-2">
            <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mb-6">
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-xl font-bold text-gray-900">Quản lý Hệ thống</h2>
                <div className="relative">
                  <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
                  <input
                    type="text"
                    placeholder="Tìm kiếm module..."
                    className="pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                </div>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {mainMenuItems.map((item, index) => (
                  <button
                    key={index}
                    onClick={() => navigate(item.path)}
                    className="group relative bg-white rounded-xl p-4 border border-gray-200 hover:border-blue-300 transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1 text-left animate-slide-in"
                    style={{ animationDelay: `${index * 0.05}s` }}
                  >
                    <div className="flex items-start justify-between">
                      <div className="flex items-start gap-4">
                        <div className={`w-14 h-14 rounded-xl ${item.color} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`}>
                          <item.icon className="w-7 h-7 text-white" />
                        </div>
                        <div>
                          <div className="flex items-center gap-2 mb-1">
                            <h3 className="font-bold text-gray-900">{item.label}</h3>
                            {item.badge && (
                              <span className="text-xs font-medium px-2 py-1 rounded-full bg-blue-100 text-blue-700">
                                {item.badge}
                              </span>
                            )}
                          </div>
                          <p className="text-sm text-gray-600 mb-2">{item.description}</p>
                          {item.count && (
                            <p className="text-lg font-bold text-gray-900">{item.count}</p>
                          )}
                        </div>
                      </div>
                      <ChevronRight className="w-5 h-5 text-gray-400 group-hover:text-blue-500 group-hover:translate-x-2 transition-all duration-300" />
                    </div>
                  </button>
                ))}
              </div>
            </div>

            {/* Quick Actions */}
            <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm">
              <h3 className="text-lg font-bold text-gray-900 mb-4">Quick Actions</h3>
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                {quickActions.map((action, index) => (
                  <button
                    key={index}
                    className="group flex flex-col items-center justify-center p-4 rounded-xl border border-gray-200 hover:border-blue-300 transition-all duration-300 hover:shadow-md transform hover:-translate-y-1"
                  >
                    <div className={`w-12 h-12 rounded-xl bg-gradient-to-br ${action.color} flex items-center justify-center mb-3 group-hover:rotate-12 transition-transform duration-300`}>
                      <action.icon className="w-6 h-6 text-white" />
                    </div>
                    <span className="text-sm font-medium text-gray-900">{action.label}</span>
                  </button>
                ))}
              </div>
            </div>
          </div>

          {/* Right Sidebar */}
          <div className="space-y-6">
            {/* Recent Activities */}
            <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm">
              <div className="flex items-center justify-between mb-6">
                <h3 className="text-lg font-bold text-gray-900">Hoạt động gần đây</h3>
                <button className="text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline">
                  Xem tất cả
                </button>
              </div>
              
              <div className="space-y-4">
                {recentActivities.map((activity, index) => (
                  <div 
                    key={index} 
                    className="flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors animate-slide-in"
                    style={{ animationDelay: `${index * 0.1}s` }}
                  >
                    <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${
                      activity.type === 'success' ? 'bg-green-100' :
                      activity.type === 'warning' ? 'bg-yellow-100' :
                      activity.type === 'error' ? 'bg-red-100' : 'bg-blue-100'
                    }`}>
                      {activity.type === 'success' && <CheckCircle className="w-4 h-4 text-green-600" />}
                      {activity.type === 'warning' && <AlertCircle className="w-4 h-4 text-yellow-600" />}
                      {activity.type === 'error' && <AlertCircle className="w-4 h-4 text-red-600" />}
                      {activity.type === 'info' && <UserCog className="w-4 h-4 text-blue-600" />}
                    </div>
                    <div className="flex-1 min-w-0">
                      <p className="text-sm font-medium text-gray-900">{activity.user}</p>
                      <p className="text-sm text-gray-600">{activity.action}</p>
                      <p className="text-xs text-gray-500 mt-1">{activity.time}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* System Status */}
            <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm">
              <h3 className="text-lg font-bold text-gray-900 mb-4">Trạng thái hệ thống</h3>
              
              <div className="space-y-4">
                <div>
                  <div className="flex justify-between mb-1">
                    <span className="text-sm text-gray-600">Server Load</span>
                    <span className="text-sm font-medium text-green-600">42%</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div className="bg-green-500 h-2 rounded-full animate-pulse" style={{ width: '42%' }}></div>
                  </div>
                </div>
                
                <div>
                  <div className="flex justify-between mb-1">
                    <span className="text-sm text-gray-600">Database</span>
                    <span className="text-sm font-medium text-green-600 flex items-center gap-1">
                      <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                      Online
                    </span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div className="bg-blue-500 h-2 rounded-full" style={{ width: '85%' }}></div>
                  </div>
                </div>
                
                <div>
                  <div className="flex justify-between mb-1">
                    <span className="text-sm text-gray-600">Storage</span>
                    <span className="text-sm font-medium text-orange-600">12.5/20GB</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div className="bg-orange-500 h-2 rounded-full" style={{ width: '62.5%' }}></div>
                  </div>
                </div>
              </div>
              
              <div className="mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <div className="flex items-center gap-3">
                  <AlertCircle className="w-5 h-5 text-blue-600" />
                  <div>
                    <p className="text-sm font-medium text-blue-900">Hệ thống hoạt động ổn định</p>
                    <p className="text-xs text-blue-700">Uptime: 99.9% trong 30 ngày qua</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

      {/* Footer */}
      <footer className="border-t border-gray-200 mt-8 py-6 bg-white/80 backdrop-blur-sm">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex flex-col md:flex-row justify-between items-center gap-4">
            <div className="text-sm text-gray-600">
              <span className="font-medium">© 2024 Admin Panel</span> • Version 2.1.0
            </div>
            <div className="flex items-center gap-6">
              <div className="flex items-center gap-2 text-sm text-gray-600">
                <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                <span className="font-medium text-green-600">All Systems Operational</span>
              </div>
              <span className="text-sm text-gray-600 hidden md:block">
                Last updated: {new Date().toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}
              </span>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default AdminDashboard;
</file>

<file path="src/admin/pages/AdminLogin.jsx">
// src/admin/pages/AdminLogin.jsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Shield, Mail, Lock, AlertCircle } from 'lucide-react';
import { useAdminAuth } from '../hooks/useAdminAuth';

const AdminLogin = () => {
  const navigate = useNavigate();
  const { signIn, loading } = useAdminAuth();
  
  const [formData, setFormData] = useState({
    email: '',
    password: ''
  });
  const [error, setError] = useState('');

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
    setError('');
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');

    if (!formData.email || !formData.password) {
      setError('Vui lòng nhập đầy đủ thông tin');
      return;
    }

    const result = await signIn(formData.email, formData.password);
    
    if (result.success) {
      navigate('/admin/dashboard');
    } else {
      setError(result.error || 'Đăng nhập thất bại');
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4">
      <div className="max-w-md w-full">
        {/* Logo & Title */}
        <div className="text-center mb-8">
          <div className="inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4">
            <Shield className="w-8 h-8 text-white" />
          </div>
          <h1 className="text-3xl font-bold text-white mb-2">Admin Panel</h1>
          <p className="text-slate-400">Đăng nhập để quản lý hệ thống</p>
        </div>

        {/* Login Form */}
        <div className="bg-white rounded-2xl shadow-xl p-8">
          <form onSubmit={handleSubmit} className="space-y-6">
            {/* Email */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Email
              </label>
              <div className="relative">
                <Mail className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
                <input
                  type="email"
                  name="email"
                  value={formData.email}
                  onChange={handleChange}
                  className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="admin@example.com"
                  disabled={loading}
                />
              </div>
            </div>

            {/* Password */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Mật khẩu
              </label>
              <div className="relative">
                <Lock className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
                <input
                  type="password"
                  name="password"
                  value={formData.password}
                  onChange={handleChange}
                  className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="••••••••"
                  disabled={loading}
                />
              </div>
            </div>

            {/* Error Message */}
            {error && (
              <div className="flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg">
                <AlertCircle className="w-5 h-5 text-red-600 flex-shrink-0" />
                <p className="text-sm text-red-600">{error}</p>
              </div>
            )}

            {/* Submit Button */}
            <button
              type="submit"
              disabled={loading}
              className="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {loading ? 'Đang đăng nhập...' : 'Đăng nhập'}
            </button>
          </form>
        </div>

        {/* Footer */}
        <p className="text-center text-slate-400 text-sm mt-6">
          © 2025 Admin Panel. Bảo mật và riêng tư.
        </p>
      </div>
    </div>
  );
};

export default AdminLogin;
</file>

<file path="src/components/Audio/AudioControls.css">
/* @keyframes progressShine {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.audio-progress-bar {
  background: linear-gradient(90deg, #f97316 0%, #fbbf24 50%, #f97316 100%);
  background-size: 200% 100%;
  animation: progressShine 2s linear infinite;
}

.animate-shimmer {
  animation: shimmer 2s infinite;
} */
</file>

<file path="src/components/Audio/AudioControls.jsx">
// import React, { useState, useEffect } from 'react';
// import { 
//   Play, Pause, Square, RotateCcw, Volume2, VolumeX,
//   Radio, Waves, Headphones, Info, Zap, Timer, Activity
// } from 'lucide-react';

// const AudioControls = ({ 
//   status, 
//   progress, 
//   playAudio, 
//   pauseAudio, 
//   stopAudio, 
//   partData, 
//   selectedPart, 
//   currentQuestionIndex, 
//   testType 
// }) => {
//   const [volume, setVolume] = useState(1);
//   const [isMuted, setIsMuted] = useState(false);
//   const [playCount, setPlayCount] = useState(0);
//   const [showTip, setShowTip] = useState(true);

//   // Reset play count when question changes
//   useEffect(() => {
//     setPlayCount(0);
//   }, [currentQuestionIndex, selectedPart]);

//   if (testType !== 'listening' || !partData) return null;

//   const handlePlay = () => {
//     let script = '';
//     if (selectedPart === 'part1') {
//       // For Part 1: Use shared script for the whole conversation
//       script = partData.script || '';
//     } else {
//       // For other parts: Use question-specific script if available, else part script
//       script = partData.questions?.[currentQuestionIndex]?.script || partData.script || '';
//     }
    
//     if (!script.trim()) {
//       alert('⚠️ Vui lòng chọn một Part có script trước!');
//       return;
//     }
//     setPlayCount(prev => prev + 1);
//     playAudio(script);
//   };

//   const toggleMute = () => {
//     setIsMuted(!isMuted);
//   };

//   // Determine current status
//   const isPlaying = status.includes('▶️');
//   const isPaused = status.includes('⏸️');
//   const isStopped = !isPlaying && !isPaused;

//   // Status configuration với màu theme
//   const statusConfig = {
//     playing: {
//       icon: Waves,
//       text: 'Đang phát',
//       emoji: '🔊',
//       bgGradient: 'from-orange-500 to-yellow-500',
//       bgColor: 'bg-orange-50',
//       textColor: 'text-orange-700',
//       borderColor: 'border-orange-400',
//       dotColor: 'bg-orange-500'
//     },
//     paused: {
//       icon: Radio,
//       text: 'Tạm dừng',
//       emoji: '⏸️',
//       bgGradient: 'from-amber-500 to-yellow-400',
//       bgColor: 'bg-amber-50',
//       textColor: 'text-amber-700',
//       borderColor: 'border-amber-400',
//       dotColor: 'bg-amber-500'
//     },
//     stopped: {
//       icon: Headphones,
//       text: 'Sẵn sàng',
//       emoji: '🎧',
//       bgGradient: 'from-gray-400 to-gray-500',
//       bgColor: 'bg-gray-50',
//       textColor: 'text-gray-700',
//       borderColor: 'border-gray-400',
//       dotColor: 'bg-gray-500'
//     }
//   };

//   const currentStatus = isPlaying ? statusConfig.playing : 
//                         isPaused ? statusConfig.paused : 
//                         statusConfig.stopped;

//   const StatusIcon = currentStatus.icon;

//   return (
//     <div className="w-full">
//       {/* CSS for animations */}
//       <style dangerouslySetInnerHTML={{__html: `
//         @keyframes shimmer {
//           0% { transform: translateX(-100%); }
//           100% { transform: translateX(100%); }
//         }
//         @keyframes wave {
//           0%, 100% { transform: scaleY(1); }
//           50% { transform: scaleY(1.5); }
//         }
//         .animate-shimmer {
//           animation: shimmer 2s infinite;
//         }
//         .animate-wave {
//           animation: wave 1s ease-in-out infinite;
//         }
//       `}} />

//       {/* Main Control Card */}
//       <div className="bg-gradient-to-br from-orange-50 via-yellow-50 to-amber-50 rounded-2xl sm:rounded-3xl shadow-xl overflow-hidden border-2 border-orange-200">
        
//         {/* Header Section */}
//         <div className="relative bg-white/80 backdrop-blur-sm p-3 sm:p-4 md:p-5 border-b-2 border-orange-200">
//           <div className="flex items-center justify-between gap-3">
//             {/* Status Display */}
//             <div className="flex items-center gap-2 sm:gap-3 flex-1 min-w-0">
//               <div className={`relative p-2 sm:p-2.5 rounded-xl bg-gradient-to-br ${currentStatus.bgGradient} shadow-lg flex-shrink-0`}>
//                 <StatusIcon className="w-4 h-4 sm:w-5 sm:h-5 text-white" />
//                 {isPlaying && (
//                   <>
//                     <div className="absolute inset-0 rounded-xl bg-white/30 animate-ping"></div>
//                     <div className="absolute -top-1 -right-1 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-red-500 rounded-full animate-pulse"></div>
//                   </>
//                 )}
//               </div>
//               <div className="min-w-0 flex-1">
//                 <div className="flex items-center gap-1.5 sm:gap-2 mb-0.5">
//                   <h3 className="text-sm sm:text-base md:text-lg font-black text-gray-900 truncate">
//                     Điều khiển Audio
//                   </h3>
//                   <span className="text-xs sm:text-sm font-semibold text-orange-600 bg-orange-100 px-1.5 sm:px-2 py-0.5 rounded-lg border border-orange-300 flex-shrink-0">
//                     {selectedPart?.toUpperCase()}
//                   </span>
//                 </div>
//                 <div className="flex items-center gap-2 text-[10px] sm:text-xs text-gray-600">
//                   <span className={`flex items-center gap-1 font-semibold ${currentStatus.textColor}`}>
//                     <span className={`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${currentStatus.dotColor} ${isPlaying ? 'animate-pulse' : ''}`}></span>
//                     {currentStatus.text}
//                   </span>
//                   <span className="text-gray-400">•</span>
//                   <span className="font-semibold">
//                     {playCount > 0 ? `${playCount} lần phát` : 'Chưa phát'}
//                   </span>
//                 </div>
//               </div>
//             </div>
            
//             {/* Volume Control */}
//             <div className="flex items-center gap-1.5 sm:gap-2 flex-shrink-0">
//               <button
//                 onClick={toggleMute}
//                 className="p-1.5 sm:p-2 rounded-lg bg-orange-100 hover:bg-orange-200 border border-orange-300 transition-all group"
//                 title={isMuted ? 'Bật âm thanh' : 'Tắt âm thanh'}
//               >
//                 {isMuted ? (
//                   <VolumeX className="w-3.5 h-3.5 sm:w-4 sm:h-4 text-orange-700" />
//                 ) : (
//                   <Volume2 className="w-3.5 h-3.5 sm:w-4 sm:h-4 text-orange-700 group-hover:scale-110 transition-transform" />
//                 )}
//               </button>
              
//               {/* Volume Slider - Desktop only */}
//               <div className="hidden lg:flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-orange-200">
//                 <Volume2 className="w-3.5 h-3.5 text-orange-600 flex-shrink-0" />
//                 <input
//                   type="range"
//                   min="0"
//                   max="1"
//                   step="0.1"
//                   value={isMuted ? 0 : volume}
//                   onChange={(e) => {
//                     setVolume(parseFloat(e.target.value));
//                     if (parseFloat(e.target.value) > 0) setIsMuted(false);
//                   }}
//                   className="w-20 h-1.5 bg-orange-200 rounded-lg appearance-none cursor-pointer
//                     [&::-webkit-slider-thumb]:appearance-none
//                     [&::-webkit-slider-thumb]:w-3.5
//                     [&::-webkit-slider-thumb]:h-3.5
//                     [&::-webkit-slider-thumb]:rounded-full
//                     [&::-webkit-slider-thumb]:bg-gradient-to-r
//                     [&::-webkit-slider-thumb]:from-orange-500
//                     [&::-webkit-slider-thumb]:to-yellow-500
//                     [&::-webkit-slider-thumb]:cursor-pointer
//                     [&::-webkit-slider-thumb]:shadow-lg
//                     [&::-webkit-slider-thumb]:border-2
//                     [&::-webkit-slider-thumb]:border-white"
//                 />
//                 <span className="text-xs text-gray-700 font-bold w-8 text-right">
//                   {Math.round((isMuted ? 0 : volume) * 100)}%
//                 </span>
//               </div>
//             </div>
//           </div>
//         </div>

//         {/* Progress Section */}
//         <div className="p-3 sm:p-4 md:p-5">
//           {/* Progress Bar */}
//           <div className="mb-3 sm:mb-4">
//             <div className="flex items-center justify-between mb-2">
//               <span className="text-xs sm:text-sm font-bold text-gray-700 flex items-center gap-1.5">
//                 <Timer className="w-3 h-3 sm:w-4 sm:h-4 text-orange-600" />
//                 Tiến độ phát
//               </span>
//               <span className="text-xs sm:text-sm font-black text-orange-700 bg-orange-100 px-2 sm:px-3 py-1 rounded-lg border-2 border-orange-300">
//                 {Math.round(progress)}%
//               </span>
//             </div>
            
//             {/* Enhanced Progress Bar */}
//             <div className="relative h-3 sm:h-4 bg-white/80 backdrop-blur-sm rounded-full overflow-hidden border-2 border-orange-200 shadow-inner">
//               {/* Progress Fill */}
//               <div
//                 className="absolute inset-y-0 left-0 bg-gradient-to-r from-orange-500 via-yellow-500 to-orange-400 rounded-full transition-all duration-300 ease-out shadow-lg"
//                 style={{ width: `${progress}%` }}
//               >
//                 {/* Shimmer Effect */}
//                 <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"></div>
                
//                 {/* Animated Dot */}
//                 {isPlaying && progress > 0 && (
//                   <div className="absolute -right-1.5 sm:-right-2 top-1/2 -translate-y-1/2 flex items-center justify-center">
//                     <div className="w-3 h-3 sm:w-4 sm:h-4 bg-white rounded-full shadow-lg border-2 border-orange-500 animate-pulse"></div>
//                     <div className="absolute w-5 h-5 sm:w-6 sm:h-6 bg-orange-400/30 rounded-full animate-ping"></div>
//                   </div>
//                 )}
//               </div>
//             </div>

//             {/* Wave Animation */}
//             {isPlaying && (
//               <div className="flex items-center justify-center gap-0.5 sm:gap-1 mt-2 sm:mt-3">
//                 {[...Array(20)].map((_, i) => (
//                   <div
//                     key={i}
//                     className="w-0.5 sm:w-1 bg-gradient-to-t from-orange-500 to-yellow-500 rounded-full animate-wave"
//                     style={{
//                       height: `${Math.random() * 16 + 8}px`,
//                       animationDelay: `${i * 0.05}s`
//                     }}
//                   ></div>
//                 ))}
//               </div>
//             )}
//           </div>

//           {/* Control Buttons Grid */}
//           <div className="grid grid-cols-4 gap-2 sm:gap-3 mb-3 sm:mb-4">
//             {/* Play Button - 2 columns */}
//             <button
//               onClick={handlePlay}
//               disabled={isPlaying}
//               className="col-span-2 group relative bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold py-3 sm:py-4 rounded-xl transition-all duration-300 hover:shadow-xl hover:shadow-orange-500/50 hover:-translate-y-1 active:translate-y-0 disabled:hover:translate-y-0 disabled:hover:shadow-none overflow-hidden border-2 border-white/50"
//             >
//               <div className="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div>
//               <div className="relative z-10 flex items-center justify-center gap-1.5 sm:gap-2">
//                 <Play className="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" />
//                 <span className="text-xs sm:text-sm md:text-base font-black">Phát Audio</span>
//               </div>
//             </button>

//             {/* Pause Button */}
//             <button
//               onClick={pauseAudio}
//               disabled={!isPlaying}
//               className="group relative bg-gradient-to-r from-amber-500 to-yellow-400 hover:from-amber-600 hover:to-yellow-500 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold py-3 sm:py-4 rounded-xl transition-all duration-300 hover:shadow-xl hover:shadow-amber-500/50 hover:-translate-y-1 active:translate-y-0 disabled:hover:translate-y-0 disabled:hover:shadow-none overflow-hidden border-2 border-white/50"
//             >
//               <div className="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div>
//               <div className="relative z-10 flex flex-col items-center justify-center gap-0.5 sm:gap-1">
//                 <Pause className="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" />
//                 <span className="text-[10px] sm:text-xs font-bold">Tạm dừng</span>
//               </div>
//             </button>

//             {/* Stop Button */}
//             <button
//               onClick={stopAudio}
//               disabled={isStopped}
//               className="group relative bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-bold py-3 sm:py-4 rounded-xl transition-all duration-300 hover:shadow-xl hover:shadow-red-500/50 hover:-translate-y-1 active:translate-y-0 disabled:hover:translate-y-0 disabled:hover:shadow-none overflow-hidden border-2 border-white/50"
//             >
//               <div className="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div>
//               <div className="relative z-10 flex flex-col items-center justify-center gap-0.5 sm:gap-1">
//                 <Square className="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" />
//                 <span className="text-[10px] sm:text-xs font-bold">Dừng</span>
//               </div>
//             </button>
//           </div>

//           {/* Repeat Button - Full Width */}
//           <button
//             onClick={handlePlay}
//             className="group w-full relative bg-gradient-to-r from-orange-400 via-yellow-400 to-orange-500 hover:from-orange-500 hover:via-yellow-500 hover:to-orange-600 text-white font-bold py-3 sm:py-4 rounded-xl transition-all duration-300 hover:shadow-xl hover:shadow-orange-400/50 hover:-translate-y-1 active:translate-y-0 overflow-hidden border-2 border-white/50"
//           >
//             <div className="absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"></div>
//             <div className="relative z-10 flex items-center justify-center gap-2">
//               <RotateCcw className="w-4 h-4 sm:w-5 sm:h-5 group-hover:rotate-180 transition-transform duration-500" />
//               <span className="text-xs sm:text-sm md:text-base font-black">Nghe lại (Repeat)</span>
//             </div>
//           </button>
//         </div>

//         {/* Info/Tip Section */}
//         {showTip && (
//           <div className="relative p-3 sm:p-4 md:p-5 border-t-2 border-orange-200 bg-gradient-to-br from-orange-100/50 to-yellow-100/50 backdrop-blur-sm">
//             <button
//               onClick={() => setShowTip(false)}
//               className="absolute top-2 right-2 sm:top-3 sm:right-3 text-gray-500 hover:text-gray-700 transition-colors bg-white/80 rounded-lg p-1 hover:bg-white border border-orange-200"
//               title="Đóng"
//             >
//               ✕
//             </button>
            
//             <div className="flex items-start gap-2 sm:gap-3 pr-6 sm:pr-8">
//               <div className="flex-shrink-0 p-1.5 sm:p-2 bg-orange-200 rounded-lg border border-orange-300">
//                 <Info className="w-4 h-4 sm:w-5 sm:h-5 text-orange-700" />
//               </div>
//               <div className="flex-1">
//                 <h4 className="text-xs sm:text-sm font-black text-gray-900 mb-1.5 sm:mb-2 flex items-center gap-1.5">
//                   <Zap className="w-3 h-3 sm:w-4 sm:h-4 text-yellow-600" />
//                   Mẹo sử dụng
//                 </h4>
//                 <ul className="space-y-1 sm:space-y-1.5 text-[10px] sm:text-xs text-gray-700">
//                   <li className="flex items-start gap-1.5">
//                     <span className="text-orange-600 font-bold mt-0.5 flex-shrink-0">•</span>
//                     <span>Audio sẽ được <strong className="text-gray-900">phát tự động 2 lần</strong> liên tiếp</span>
//                   </li>
//                   <li className="flex items-start gap-1.5">
//                     <span className="text-orange-600 font-bold mt-0.5 flex-shrink-0">•</span>
//                     <span>Nhấn <strong className="text-gray-900">Tạm dừng</strong> để dừng tạm thời, <strong className="text-gray-900">Nghe lại</strong> để phát từ đầu</span>
//                   </li>
//                   <li className="flex items-start gap-1.5">
//                     <span className="text-orange-600 font-bold mt-0.5 flex-shrink-0">•</span>
//                     <span>Trải nghiệm tốt nhất với <strong className="text-gray-900">tai nghe 🎧</strong></span>
//                   </li>
//                 </ul>
//               </div>
//             </div>
//           </div>
//         )}

//         {/* Stats Cards */}
//         <div className="grid grid-cols-3 gap-2 sm:gap-3 mt-3 sm:mt-4">
//           {/* Status Card */}
//           <div className="bg-white rounded-xl sm:rounded-2xl p-2 sm:p-3 md:p-4 shadow-lg border-2 border-orange-200 hover:border-orange-400 transition-all hover:shadow-xl group">
//             <div className="flex items-center gap-1.5 sm:gap-2 mb-1 sm:mb-1.5">
//               <div className={`${currentStatus.bgColor} p-1 sm:p-1.5 rounded-lg border ${currentStatus.borderColor} group-hover:scale-110 transition-transform`}>
//                 <Activity className="w-3 h-3 sm:w-4 sm:h-4 text-orange-600" />
//               </div>
//               <span className="text-[10px] sm:text-xs text-gray-600 font-bold">Trạng thái</span>
//             </div>
//             <p className="text-xs sm:text-sm font-black text-gray-900 truncate">
//               {currentStatus.emoji} {currentStatus.text}
//             </p>
//           </div>

//           {/* Plays Card */}
//           <div className="bg-white rounded-xl sm:rounded-2xl p-2 sm:p-3 md:p-4 shadow-lg border-2 border-orange-200 hover:border-orange-400 transition-all hover:shadow-xl group">
//             <div className="flex items-center gap-1.5 sm:gap-2 mb-1 sm:mb-1.5">
//               <div className="bg-blue-100 p-1 sm:p-1.5 rounded-lg border border-blue-300 group-hover:scale-110 transition-transform">
//                 <Radio className="w-3 h-3 sm:w-4 sm:h-4 text-blue-600" />
//               </div>
//               <span className="text-[10px] sm:text-xs text-gray-600 font-bold">Lượt phát</span>
//             </div>
//             <p className="text-xs sm:text-sm font-black text-gray-900">
//               {playCount} <span className="text-gray-400 text-[10px] sm:text-xs">/ ∞</span>
//             </p>
//           </div>

//           {/* Volume Card */}
//           <div className="bg-white rounded-xl sm:rounded-2xl p-2 sm:p-3 md:p-4 shadow-lg border-2 border-orange-200 hover:border-orange-400 transition-all hover:shadow-xl group">
//             <div className="flex items-center gap-1.5 sm:gap-2 mb-1 sm:mb-1.5">
//               <div className="bg-orange-100 p-1 sm:p-1.5 rounded-lg border border-orange-300 group-hover:scale-110 transition-transform">
//                 <Volume2 className="w-3 h-3 sm:w-4 sm:h-4 text-orange-600" />
//               </div>
//               <span className="text-[10px] sm:text-xs text-gray-600 font-bold">Âm lượng</span>
//             </div>
//             <p className="text-xs sm:text-sm font-black text-gray-900">
//               {isMuted ? '🔇 Tắt' : `🔊 ${Math.round(volume * 100)}%`}
//             </p>
//           </div>
//         </div>
//       </div>
//     </div>
//   );
// };

// export default AudioControls;
</file>

<file path="src/components/Auth/UserProfile.jsx">
import React, { useState, useMemo, memo, useEffect } from 'react';
import { motion } from 'framer-motion';
import {
  User, Trophy, TrendingUp, BookOpen, Clock, Target, Award,
  Calendar, Flame, Star, Activity, BarChart3, Zap, Brain,
  CheckCircle2, AlertCircle
} from 'lucide-react';
import { collection, query, where, onSnapshot } from 'firebase/firestore';
import { db } from '../../config/firebase';
import { useUserProgress } from '../../hooks/useUserProgress';

// ✅ Animation Variants
const fadeInUp = {
  initial: { opacity: 0, y: 20 },
  animate: { opacity: 1, y: 0, transition: { duration: 0.5, ease: 'easeOut' } },
};

const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: { staggerChildren: 0.08, delayChildren: 0.15 }
  }
};

const listItemVariants = {
  initial: { opacity: 0, y: 15 },
  animate: { opacity: 1, y: 0, transition: { duration: 0.4, ease: 'easeOut' } },
  exit: { opacity: 0, y: -10, transition: { duration: 0.2 } }
};

// ✅ Score Badge
const ScoreBadge = memo(({ score, size = 'md' }) => {
  const getScoreColor = (s) => {
    if (s >= 85) return { bg: 'from-green-400 to-emerald-500', text: 'text-green-600', light: 'bg-green-100' };
    if (s >= 70) return { bg: 'from-blue-400 to-cyan-500', text: 'text-blue-600', light: 'bg-blue-100' };
    if (s >= 50) return { bg: 'from-amber-400 to-orange-500', text: 'text-amber-600', light: 'bg-amber-100' };
    return { bg: 'from-red-400 to-pink-500', text: 'text-red-600', light: 'bg-red-100' };
  };

  const colors = getScoreColor(score);
  const sizeClass = size === 'lg' ? 'w-20 h-20 text-4xl' : size === 'sm' ? 'w-14 h-14 text-lg' : 'w-16 h-16 text-2xl';

  return (
    <motion.div
      initial={{ scale: 0.5, opacity: 0 }}
      animate={{ scale: 1, opacity: 1 }}
      transition={{ type: 'spring', stiffness: 300, damping: 20 }}
      className={`${sizeClass} rounded-xl ${colors.light} border-2 ${colors.text} flex items-center justify-center font-black`}
    >
      {score.toFixed(0)}
    </motion.div>
  );
});

ScoreBadge.displayName = 'ScoreBadge';

// ✅ Premium Stat Card
const StatCard = memo(({ icon: Icon, label, value, sublabel, color }) => {
  const colorConfig = {
    blue: { bg: 'from-blue-50 to-cyan-50', icon: 'text-blue-500', border: 'border-blue-200', accent: 'bg-blue-100' },
    orange: { bg: 'from-orange-50 to-amber-50', icon: 'text-orange-500', border: 'border-orange-200', accent: 'bg-orange-100' },
    green: { bg: 'from-green-50 to-emerald-50', icon: 'text-green-500', border: 'border-green-200', accent: 'bg-green-100' },
    purple: { bg: 'from-purple-50 to-pink-50', icon: 'text-purple-500', border: 'border-purple-200', accent: 'bg-purple-100' },
  };

  const cfg = colorConfig[color] || colorConfig.blue;

  return (
    <motion.div
      variants={fadeInUp}
      whileHover={{ y: -4 }}
      className={`group relative bg-gradient-to-br ${cfg.bg} rounded-2xl p-6 border-2 ${cfg.border} overflow-hidden cursor-pointer`}
    >
      <div className="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300" />
      <div className="relative z-10 space-y-3">
        <div className={`inline-flex p-3 rounded-xl ${cfg.accent}`}>
          <Icon className={`w-6 h-6 ${cfg.icon}`} />
        </div>
        <div>
          <p className="text-sm font-semibold text-gray-600 uppercase tracking-wide">{label}</p>
          <div className="flex items-baseline gap-2 mt-2">
            <span className="text-4xl font-black text-gray-900">{value}</span>
            {sublabel && <span className="text-sm font-medium text-gray-500">{sublabel}</span>}
          </div>
        </div>
      </div>
    </motion.div>
  );
});

StatCard.displayName = 'StatCard';

// ✅ Timeline Activity Item
const TimelineItem = memo(({ item, index, isLast }) => {
  const score = parseFloat(item.score);
  const correctAnswers = Math.round(item.totalQuestions * (score / 100));

  const getScoreStatus = (s) => {
    if (s >= 85) return { icon: Star, color: 'text-green-600', label: 'Xuất sắc' };
    if (s >= 70) return { icon: CheckCircle2, color: 'text-blue-600', label: 'Tốt' };
    return { icon: AlertCircle, color: 'text-amber-600', label: 'Cần cải thiện' };
  };

  const status = getScoreStatus(score);
  const StatusIcon = status.icon;

  return (
    <motion.div
      variants={fadeInUp}
      className="relative flex gap-4 md:gap-6 w-full"
    >
      {/* Timeline dot */}
      <div className="flex flex-col items-center flex-shrink-0 pt-1">
        <motion.div
          initial={{ scale: 0 }}
          animate={{ scale: 1 }}
          transition={{ delay: index * 0.1 }}
          className="w-4 h-4 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 ring-4 ring-white relative z-20 flex-shrink-0 shadow-lg"
        />
        {!isLast && <div className="w-1 h-24 bg-gradient-to-b from-blue-300 to-blue-100 my-2 flex-shrink-0 rounded-full" />}
      </div>

      {/* Content */}
      <motion.div
        whileHover={{ x: 4 }}
        className="flex-1 pb-8 min-w-0 relative z-10"
      >
        <div className="bg-gradient-to-br from-white to-blue-50 rounded-xl p-4 md:p-5 border-2 border-blue-300 shadow-md hover:shadow-lg transition-all duration-200 w-full">
          <div className="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-4">
            <div className="flex-1 min-w-0">
              <div className="flex items-center gap-2 mb-3 flex-wrap">
                <span className="px-3 py-1 rounded-lg bg-blue-200 text-blue-800 text-xs font-bold uppercase tracking-wide whitespace-nowrap">
                  {item.exam}
                </span>
                <span className="px-3 py-1 rounded-lg bg-orange-200 text-orange-800 text-xs font-bold uppercase tracking-wide whitespace-nowrap">
                  {item.part}
                </span>
              </div>
              <div className="flex flex-col gap-2 text-sm text-gray-700">
                <div className="flex items-center gap-2">
                  <Calendar className="w-4 h-4 flex-shrink-0 text-gray-500" />
                  <span className="truncate">{item.completedAt.toLocaleDateString('vi-VN', { weekday: 'short', month: 'short', day: 'numeric' })}</span>
                </div>
                <div className="flex items-center gap-2">
                  <Clock className="w-4 h-4 flex-shrink-0 text-gray-500" />
                  <span>{item.duration || 0} phút</span>
                </div>
              </div>
            </div>

            {/* Score */}
            <div className="text-right flex flex-col items-end gap-3 flex-shrink-0">
              <ScoreBadge score={score} size="md" />
              <div className="text-center">
                <p className={`text-sm font-bold flex items-center gap-1 whitespace-nowrap ${status.color}`}>
                  <StatusIcon className="w-4 h-4 flex-shrink-0" />
                  {status.label}
                </p>
              </div>
            </div>
          </div>

          {/* Progress bar */}
          <div className="space-y-2 pt-2 border-t border-blue-200">
            <div className="flex justify-between text-xs font-medium text-gray-600">
              <span>✅ {correctAnswers}/{item.totalQuestions} câu</span>
              <span className="text-blue-600 font-bold">{score.toFixed(1)}%</span>
            </div>
            <div className="w-full h-2.5 bg-gray-200 rounded-full overflow-hidden">
              <motion.div
                initial={{ width: 0 }}
                whileInView={{ width: `${score}%` }}
                viewport={{ once: true }}
                transition={{ duration: 0.8, ease: 'easeOut' }}
                className={`h-full ${
                  score >= 85 ? 'bg-gradient-to-r from-green-400 to-emerald-500' :
                  score >= 70 ? 'bg-gradient-to-r from-blue-400 to-cyan-500' :
                  'bg-gradient-to-r from-amber-400 to-orange-500'
                } rounded-full shadow-md`}
              />
            </div>
          </div>
        </div>
      </motion.div>
    </motion.div>
  );
});

TimelineItem.displayName = 'TimelineItem';

// ✅ Header Section
const ProfileHeader = memo(({ currentUser, stats }) => {
  return (
    <motion.div
      variants={fadeInUp}
      className="relative rounded-3xl overflow-hidden"
    >
      {/* Animated Background */}
      <div className="absolute inset-0 bg-gradient-to-br from-blue-600 via-blue-700 to-purple-800">
        <motion.div
          animate={{ opacity: [0.3, 0.5, 0.3] }}
          transition={{ duration: 8, repeat: Infinity }}
          className="absolute inset-0 bg-gradient-to-tr from-cyan-400 to-transparent opacity-30"
        />
      </div>

      {/* Content */}
      <div className="relative z-10 p-8 md:p-12">
        <div className="flex flex-col md:flex-row items-start md:items-center gap-8">
          {/* Avatar */}
          <motion.div
            initial={{ scale: 0.8, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            className="relative flex-shrink-0"
          >
            <div className="w-32 h-32 rounded-3xl bg-white/20 backdrop-blur-sm border-3 border-white/30 p-1 shadow-2xl overflow-hidden">
              {currentUser?.photoURL ? (
                <img
                  src={currentUser.photoURL}
                  alt={currentUser.name}
                  className="w-full h-full object-cover rounded-2xl"
                />
              ) : (
                <div className="w-full h-full rounded-2xl bg-gradient-to-br from-cyan-300 to-blue-500 flex items-center justify-center">
                  <User className="w-16 h-16 text-white/80" />
                </div>
              )}
            </div>

            {/* Streak Badge */}
            {stats.recentStreak > 0 && (
              <motion.div
                initial={{ scale: 0, rotate: -180 }}
                animate={{ scale: 1, rotate: 0 }}
                transition={{ type: 'spring', stiffness: 300, damping: 20 }}
                className="absolute -bottom-3 -right-3 flex items-center gap-2 px-4 py-2 bg-orange-400 text-white font-bold rounded-full shadow-lg border-3 border-white backdrop-blur-sm"
              >
                <Flame className="w-5 h-5" />
                <span>{stats.recentStreak}</span>
              </motion.div>
            )}
          </motion.div>

          {/* User Info */}
          <motion.div variants={fadeInUp} className="flex-1">
            <h1 className="text-5xl font-black text-white mb-3 leading-tight">
              {currentUser?.name || 'Người dùng'}
            </h1>
            {currentUser?.email && (
              <p className="text-white/90 text-lg font-medium mb-4">{currentUser.email}</p>
            )}

            {/* Quick Stats - Row */}
            <div className="grid grid-cols-3 gap-4">
              <div className="bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20">
                <p className="text-white/70 text-sm font-semibold uppercase tracking-wide mb-1">Bài Tập</p>
                <p className="text-3xl font-black text-white">{stats.totalAttempts}</p>
              </div>
              <div className="bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20">
                <p className="text-white/70 text-sm font-semibold uppercase tracking-wide mb-1">Cao Nhất</p>
                <p className="text-3xl font-black text-orange-300">{stats.bestScore.toFixed(0)}%</p>
              </div>
              <div className="bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20">
                <p className="text-white/70 text-sm font-semibold uppercase tracking-wide mb-1">Trung Bình</p>
                <p className="text-3xl font-black text-cyan-300">{stats.averageScore.toFixed(0)}%</p>
              </div>
            </div>
          </motion.div>
        </div>
      </div>
    </motion.div>
  );
});

ProfileHeader.displayName = 'ProfileHeader';

// ✅ Main Component
export default function UserProfile({ currentUser: currentUserProp }) {
  const { currentUser: currentUserFromHook } = useUserProgress();
  const currentUser = useMemo(
    () => currentUserProp || currentUserFromHook,
    [currentUserProp, currentUserFromHook]
  );

  const [progress, setProgress] = useState([]);
  const [loading, setLoading] = useState(true);
  const [itemsToShow, setItemsToShow] = useState(5);

  // ✅ Firestore Listener
  useEffect(() => {
    if (!currentUser?.provider) {
      setLoading(false);
      return;
    }

    try {
      let q;
      if (currentUser.provider === 'firebase' && currentUser.firebaseUid) {
        q = query(collection(db, 'userProgress'), where('firebaseUid', '==', currentUser.firebaseUid));
      } else if (currentUser.provider === 'clerk' && currentUser.clerkId) {
        q = query(collection(db, 'userProgress'), where('clerkId', '==', currentUser.clerkId));
      } else {
        setLoading(false);
        return;
      }

      const unsubscribe = onSnapshot(q, (snapshot) => {
        const data = snapshot.docs.map(doc => {
          const d = doc.data();
          return {
            id: doc.id,
            ...d,
            completedAt: d.completedAt?.toDate?.() || new Date(d.completedAt),
          };
        }).sort((a, b) => {
          const dateA = a.completedAt instanceof Date ? a.completedAt : new Date(0);
          const dateB = b.completedAt instanceof Date ? b.completedAt : new Date(0);
          return dateB - dateA;
        });

        setProgress(data);
        setLoading(false);
      }, () => setLoading(false));

      return unsubscribe;
    } catch {
      setLoading(false);
    }
  }, [currentUser]);

  // ✅ Calculate Stats
  const stats = useMemo(() => {
    if (!progress?.length) {
      return {
        totalAttempts: 0,
        bestScore: 0,
        averageScore: 0,
        totalQuestions: 0,
        correctAnswers: 0,
        recentStreak: 0,
        lastActivity: null
      };
    }

    const validScores = progress.map(p => parseFloat(p.score)).filter(s => !isNaN(s) && s >= 0);
    const totalQs = progress.reduce((sum, p) => sum + (p.totalQuestions || 0), 0);
    const correctQs = progress.reduce((sum, p) => sum + Math.round((p.totalQuestions || 0) * (parseFloat(p.score) || 0) / 100), 0);

    let streak = 0;
    const dates = progress
      .map(p => new Date(p.completedAt))
      .sort((a, b) => b - a);

    if (dates.length > 0) {
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      for (let i = 0; i < dates.length; i++) {
        const d = new Date(dates[i]);
        d.setHours(0, 0, 0, 0);
        const diff = Math.floor((today - d) / (1000 * 60 * 60 * 24));
        if (diff === streak) streak++;
        else if (diff > streak) break;
      }
    }

    return {
      totalAttempts: progress.length,
      bestScore: validScores.length ? Math.max(...validScores) : 0,
      averageScore: validScores.length ? (validScores.reduce((a, b) => a + b, 0) / validScores.length) : 0,
      totalQuestions: totalQs,
      correctAnswers: correctQs,
      recentStreak: streak,
      lastActivity: dates[0] || null
    };
  }, [progress]);

  const accuracy = stats.totalQuestions ? (stats.correctAnswers / stats.totalQuestions * 100) : 0;

  const trend = useMemo(() => {
    if (progress.length < 2) return 'stable';
    const recent = progress.slice(0, 5).map(p => parseFloat(p.score) || 0);
    const older = progress.slice(5, 10).map(p => parseFloat(p.score) || 0);
    if (!recent.length || !older.length) return 'stable';
    const rAvg = recent.reduce((a, b) => a + b, 0) / recent.length;
    const oAvg = older.reduce((a, b) => a + b, 0) / older.length;
    return rAvg > oAvg + 5 ? 'improving' : rAvg < oAvg - 5 ? 'declining' : 'stable';
  }, [progress]);

  if (loading) {
    return (
      <div className="w-full bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8">
        <motion.div
          variants={containerVariants}
          initial="hidden"
          animate="visible"
          className="space-y-6 sm:space-y-8"
        >
          <ProfileHeader currentUser={currentUser} stats={stats} />
          <div className="flex items-center justify-center py-12 sm:py-16 md:py-20">
            <div className="text-center">
              <div className="w-10 h-10 sm:w-12 sm:h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-3 sm:mb-4" />
              <p className="text-gray-600 font-semibold text-sm sm:text-base">Đang tải dữ liệu...</p>
            </div>
          </div>
        </motion.div>
      </div>
    );
  }

  if (!progress || progress.length === 0) {
    return (
      <div className="w-full bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8">
        <motion.div
          variants={containerVariants}
          initial="hidden"
          animate="visible"
          className="space-y-6 sm:space-y-8"
        >
          <ProfileHeader currentUser={currentUser} stats={stats} />
          <motion.div variants={fadeInUp} className="text-center py-12 sm:py-16 md:py-20 px-4">
            <motion.div
              initial={{ scale: 0 }}
              animate={{ scale: 1 }}
              className="inline-flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-gradient-to-br from-blue-100 to-cyan-100 mb-4 sm:mb-6"
            >
              <Brain className="w-10 h-10 sm:w-12 sm:h-12 text-blue-600" />
            </motion.div>
            <h3 className="text-2xl sm:text-3xl font-black text-gray-900 mb-2 sm:mb-3">Chưa có bài tập nào</h3>
            <p className="text-gray-600 text-sm sm:text-lg max-w-md mx-auto">Bắt đầu làm bài để theo dõi tiến độ và thống kê chi tiết!</p>
          </motion.div>
        </motion.div>
      </div>
    );
  }

  return (
    <div className="w-full bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8">
      <motion.div
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        className="space-y-6 sm:space-y-8 md:space-y-10 w-full"
      >
        {/* Header */}
        <ProfileHeader currentUser={currentUser} stats={stats} />

        {/* Stats Grid */}
        <motion.div variants={fadeInUp} className="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6">
          <StatCard icon={Activity} label="Tổng Bài Tập" value={stats.totalAttempts} color="blue" />
          <StatCard icon={Trophy} label="Cao Nhất" value={`${stats.bestScore.toFixed(0)}%`} color="orange" />
          <StatCard icon={BarChart3} label="Trung Bình" value={`${stats.averageScore.toFixed(0)}%`} color="purple" />
          <StatCard icon={Target} label="Chính Xác" value={`${accuracy.toFixed(0)}%`} color="green" />
        </motion.div>

        {/* Detail Cards */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">
          {/* Streak Card */}
          <motion.div
            variants={fadeInUp}
            className="group relative bg-gradient-to-br from-orange-50 to-amber-50 rounded-lg sm:rounded-xl md:rounded-2xl p-4 sm:p-6 border-2 border-orange-300 overflow-hidden shadow-md"
          >
            <div className="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300" />
            <div className="relative z-10 space-y-3 sm:space-y-4">
              <div className="flex items-center justify-between">
                <h3 className="font-bold text-gray-900 flex items-center gap-2 text-sm sm:text-base">
                  <Flame className="w-4 h-4 sm:w-5 sm:h-5 text-orange-500" />
                  Chuỗi Ngày
                </h3>
                <span className="text-2xl sm:text-3xl font-black text-orange-500">{stats.recentStreak}</span>
              </div>
              <div className="w-full h-2 bg-orange-200 rounded-full overflow-hidden">
                <motion.div
                  initial={{ width: 0 }}
                  whileInView={{ width: `${Math.min((stats.recentStreak / 30) * 100, 100)}%` }}
                  viewport={{ once: true }}
                  transition={{ duration: 0.6 }}
                  className="h-full bg-gradient-to-r from-orange-400 to-orange-500"
                />
              </div>
              <p className="text-xs sm:text-sm text-gray-700 font-medium">Tiếp tục duy trì phần thưởng!</p>
            </div>
          </motion.div>

          {/* Questions Card */}
          <motion.div
            variants={fadeInUp}
            className="group relative bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg sm:rounded-xl md:rounded-2xl p-4 sm:p-6 border-2 border-blue-300 overflow-hidden shadow-md"
          >
            <div className="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300" />
            <div className="relative z-10 space-y-3 sm:space-y-4">
              <div className="flex items-center justify-between">
                <h3 className="font-bold text-gray-900 flex items-center gap-2 text-sm sm:text-base">
                  <Award className="w-4 h-4 sm:w-5 sm:h-5 text-blue-500" />
                  Tổng Câu
                </h3>
                <span className="text-2xl sm:text-3xl font-black text-blue-500">{stats.totalQuestions}</span>
              </div>
              <div className="flex justify-between text-xs sm:text-sm font-semibold mb-2 text-gray-700">
                <span className="flex items-center gap-1"><CheckCircle2 className="w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-500" /> {stats.correctAnswers}</span>
                <span className="flex items-center gap-1"><AlertCircle className="w-3.5 h-3.5 sm:w-4 sm:h-4 text-red-500" /> {stats.totalQuestions - stats.correctAnswers}</span>
              </div>
              <div className="w-full h-2 bg-blue-200 rounded-full overflow-hidden">
                <motion.div
                  initial={{ width: 0 }}
                  whileInView={{ width: `${accuracy}%` }}
                  viewport={{ once: true }}
                  transition={{ duration: 0.6 }}
                  className="h-full bg-gradient-to-r from-blue-400 to-cyan-500"
                />
              </div>
            </div>
          </motion.div>

          {/* Trend Card */}
          <motion.div
            variants={fadeInUp}
            className={`group relative rounded-lg sm:rounded-xl md:rounded-2xl p-4 sm:p-6 border-2 overflow-hidden shadow-md ${
              trend === 'improving' ? 'bg-gradient-to-br from-green-50 to-emerald-50 border-green-300' :
              trend === 'declining' ? 'bg-gradient-to-br from-red-50 to-pink-50 border-red-300' :
              'bg-gradient-to-br from-gray-50 to-slate-50 border-gray-300'
            }`}
          >
            <div className="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300" />
            <div className="relative z-10 space-y-3 sm:space-y-4">
              <h3 className="font-bold text-gray-900 flex items-center gap-2 text-sm sm:text-base">
                <TrendingUp className="w-4 h-4 sm:w-5 sm:h-5" />
                Xu Hướng
              </h3>
              <div className={`text-2xl sm:text-3xl font-black ${
                trend === 'improving' ? 'text-green-600' :
                trend === 'declining' ? 'text-red-600' :
                'text-gray-600'
              }`}>
                {trend === 'improving' ? '📈 Tiến Bộ' : trend === 'declining' ? '📉 Giảm' : '➡️ Ổn Định'}
              </div>
              <p className="text-xs sm:text-sm font-medium text-gray-700">
                {trend === 'improving' ? 'Điểm tăng lên!' :
                 trend === 'declining' ? 'Hãy cố gắng thêm!' :
                 'Ổn định'}
              </p>
            </div>
          </motion.div>
        </div>

        {/* Timeline Activity */}
        {progress && progress.length > 0 && (
          <motion.div variants={fadeInUp} className="space-y-4 sm:space-y-6 md:space-y-8">
            <div className="flex items-center justify-between gap-2">
              <h2 className="text-xl sm:text-2xl md:text-3xl font-black text-gray-900 flex items-center gap-2 sm:gap-3">
                <Zap className="w-6 h-6 sm:w-7 sm:h-7 text-orange-500" />
                <span className="truncate">Hoạt Động</span>
              </h2>
              <span className="px-3 sm:px-4 py-1.5 sm:py-2 rounded-full bg-orange-100 text-orange-700 text-xs sm:text-sm font-bold whitespace-nowrap">
                {progress.length}
              </span>
            </div>

            {/* Timeline Items */}
            <div className="space-y-2 sm:space-y-3">
              {progress.slice(0, itemsToShow).map((item, index) => (
                <TimelineItem
                  key={item.id || index}
                  item={item}
                  index={index}
                  isLast={index === Math.min(itemsToShow - 1, progress.length - 1)}
                />
              ))}
            </div>

            {/* Load More Button */}
            {itemsToShow < progress.length && (
              <motion.button
                initial={{ opacity: 0, y: 10 }}
                animate={{ opacity: 1, y: 0 }}
                whileHover={{ scale: 1.02 }}
                whileTap={{ scale: 0.98 }}
                onClick={() => setItemsToShow(prev => Math.min(prev + 5, progress.length))}
                className="w-full py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg sm:rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold uppercase tracking-wide text-xs sm:text-sm shadow-md hover:shadow-lg transition-all duration-300"
              >
                <span>Xem Thêm</span>
                <span className="text-xs ml-2">({itemsToShow} / {progress.length})</span>
              </motion.button>
            )}

            {/* Show All Loaded Message */}
            {itemsToShow >= progress.length && progress.length > 5 && (
              <motion.div
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                className="text-center py-3 sm:py-4"
              >
                <p className="text-gray-500 font-medium text-sm sm:text-base">✓ Đã hiển thị tất cả {progress.length} bài</p>
              </motion.div>
            )}
          </motion.div>
        )}
      </motion.div>
    </div>
  );
}
</file>

<file path="src/components/Display/ContentDisplay.jsx">
import React, { useMemo, memo, useEffect } from 'react';
import { AlertCircle, Headphones, FileText, BookOpen, Zap, Target, Clock, BarChart3 } from 'lucide-react';

import Part6Display from './ReadingPart6Display';
import ReadingPart7Display from './ReadingPart7Display';
import ReadingPart8Display from './ReadingPart8Display';
import ScriptDisplay from './ScriptDisplay';

// Helper function để lấy audio path
const getAudioPath = (examId, partId) => {
  if (!examId || !partId) return null;
  return `/public/data/audio/${examId}/listening/${partId}.mp3`;
};

// ========================================
// HELPER COMPONENT: InfoCard
// ========================================
const InfoCard = memo(({ icon: Icon, label, value, color = 'indigo' }) => {
  const colorMap = {
    indigo: 'text-indigo-600 bg-indigo-50',
    purple: 'text-purple-600 bg-purple-50',
    emerald: 'text-emerald-600 bg-emerald-50',
    amber: 'text-amber-600 bg-amber-50',
  };

  return (
    <div className="flex items-center gap-3 p-3 rounded-lg bg-slate-50 border border-slate-200 hover:bg-slate-100 transition-colors">
      <div className={`p-2 rounded-lg ${colorMap[color]}`}>
        <Icon className={`w-4 h-4`} strokeWidth={2} />
      </div>
      <div className="flex-1 min-w-0">
        <p className="text-xs font-semibold text-slate-600 uppercase tracking-wider">{label}</p>
        <p className="text-sm font-bold text-slate-900 truncate">{value}</p>
      </div>
    </div>
  );
});

InfoCard.displayName = 'InfoCard';

// ========================================
// MAIN COMPONENT: Listening Content
// ========================================
const ListeningContent = memo(({ 
  partData, 
  selectedPart,
  testType,
  examId
}) => {
  const partNumber = selectedPart.replace('part', '');
  
  // Script extraction logic (unchanged)
  const script = useMemo(() => {
    if (!partData) {
      console.warn('❌ partData is null');
      return '';
    }
    
    console.log('📋 partData keys:', Object.keys(partData));
    
    if (partData.script) {
      console.log('✅ Found script in partData.script');
      return partData.script;
    }
    
    if (partData.text) {
      console.log('✅ Found text in partData.text');
      return partData.text;
    }
    
    if (partData.questions && Array.isArray(partData.questions)) {
      console.log(`📍 Found ${partData.questions.length} questions, extracting scripts...`);
      
      const scripts = partData.questions
        .filter(q => q.script)
        .map(q => q.script)
        .join('\n\n---\n\n');
      
      if (scripts.trim()) {
        console.log('✅ Extracted scripts from questions');
        return scripts;
      }
    }
    
    if (partData.description) {
      console.log('✅ Using description as fallback');
      return partData.description;
    }
    
    console.warn('⚠️ No script found in any property');
    return '';
  }, [partData]);

  // Audio URL - Ưu tiên từ partData, nếu không thì tạo mặc định
  const audioUrl = useMemo(() => {
    if (!examId) return null;
    
    // Nếu partData đã có audioUrl, dùng nó
    if (partData?.audioUrl) {
      return partData.audioUrl;
    }
    
    // Nếu không, tạo đường dẫn mặc định
    return getAudioPath(examId, selectedPart);
  }, [examId, selectedPart, partData]);
  const DEBUG_ADDITION = `
  // 🔍 DEBUG LOG
  useEffect(() => {
    console.log('📍 ListeningContent DEBUG:');
    console.log('  examId:', examId);
    console.log('  selectedPart:', selectedPart);
    console.log('  partData?.audioUrl:', partData?.audioUrl);
    console.log('  computed audioUrl:', audioUrl);
  }, [examId, selectedPart, partData, audioUrl]);
`;

  const partTitle = useMemo(() => {
    return partData?.title || `Part ${partNumber} - Phần Nghe`;
  }, [partData, partNumber]);

  if (!script) {
    return (
      <div className="bg-gradient-to-br from-slate-50 to-white rounded-2xl border-2 border-slate-200 p-8 text-center">
        <div className="w-16 h-16 rounded-xl bg-slate-100 flex items-center justify-center mx-auto mb-4">
          <Headphones className="w-8 h-8 text-slate-400" strokeWidth={1.5} />
        </div>
        <p className="text-slate-900 font-bold text-lg">Chưa có kịch bản</p>
        <p className="text-slate-600 text-sm mt-2">Kịch bản cho phần này sẽ sớm có</p>
        <p className="text-slate-500 text-xs mt-4">Part: {partNumber}</p>
      </div>
    );
  }

  return (
    <div className="animate-in fade-in duration-300 w-full relative z-20">
      <ScriptDisplay 
        script={script}
        audioUrl={audioUrl}
        partTitle={partTitle}
      />
    </div>
  );
});

ListeningContent.displayName = 'ListeningContent';

// ========================================
// MAIN COMPONENT: Reading Content
// ========================================
const ReadingContent = memo(({ partData, content, selectedPart }) => {
  const partNumber = selectedPart.replace('part', '');
  
  const readingTime = useMemo(() => {
    return Math.ceil(content.length / 1250);
  }, [content.length]);

  return (
    <div className="space-y-6 animate-in fade-in duration-500 w-full">
      
      {/* ===== READING SECTION HEADER ===== */}
      <div className="flex items-center gap-3 px-1">
        <div className="p-2.5 rounded-lg bg-emerald-100">
          <BookOpen className="w-5 h-5 text-emerald-700" strokeWidth={2} />
        </div>
        <div>
          <h2 className="text-xl font-bold text-slate-900">Phần Đọc</h2>
          <p className="text-sm text-slate-500 mt-0.5">Part {partNumber}</p>
        </div>
      </div>

      {/* ===== INFO PANEL ===== */}
      <div className="bg-emerald-50 border-2 border-emerald-200 rounded-2xl p-5">
        <div className="flex items-center gap-2 mb-4">
          <BarChart3 className="w-4 h-4 text-emerald-700" strokeWidth={2} />
          <p className="text-sm font-bold text-emerald-900 uppercase tracking-wider">Thông tin</p>
        </div>
        <div className="space-y-2">
          <InfoCard 
            icon={Target} 
            label="Part" 
            value={partNumber}
            color="indigo"
          />
          <InfoCard 
            icon={FileText} 
            label="Độ dài" 
            value={`${content.length} ký tự`}
            color="amber"
          />
          <InfoCard 
            icon={Clock} 
            label="Thời gian dự tính" 
            value={`~${readingTime} phút`}
            color="emerald"
          />
        </div>
      </div>

      {/* ===== READING CONTENT ===== */}
      <div>
        <p className="text-xs font-bold text-slate-600 uppercase tracking-wider mb-3">Nội dung</p>
        <div className="bg-white rounded-2xl border-2 border-slate-200 overflow-visible w-full">
          
          {/* Content Title Bar */}
          <div className="px-6 py-4 bg-gradient-to-r from-slate-50 to-white border-b border-slate-200">
            <p className="text-sm font-bold text-slate-900">
              {partData.title || `Nội dung Part ${partNumber}`}
            </p>
          </div>

          {/* Text Container */}
          <div className="p-6 max-h-[40rem] overflow-y-auto">
            <p className="text-base leading-relaxed whitespace-pre-wrap text-slate-800 break-words font-medium">
              {content}
            </p>
          </div>
        </div>
      </div>
    </div>
  );
});

ReadingContent.displayName = 'ReadingContent';

// ========================================
// MAIN COMPONENT: Empty State
// ========================================
const EmptyState = memo(({ type = 'no-part' }) => {
  const states = {
    'no-part': {
      icon: AlertCircle,
      iconColor: 'text-slate-400',
      bgColor: 'from-slate-50 to-white',
      borderColor: 'border-slate-200',
      title: 'Chọn Part để bắt đầu',
      description: 'Vui lòng chọn một phần thi từ danh sách trên'
    },
    'no-content': {
      icon: FileText,
      iconColor: 'text-amber-600',
      bgColor: 'from-amber-50 to-white',
      borderColor: 'border-amber-200',
      title: 'Không có nội dung',
      description: 'Nội dung cho phần này chưa được tải hoặc cập nhật'
    }
  };

  const state = states[type] || states['no-part'];
  const Icon = state.icon;

  return (
    <div className={`bg-gradient-to-br ${state.bgColor} rounded-2xl border-2 ${state.borderColor} p-8 sm:p-12 animate-in fade-in duration-300 w-full`}>
      <div className="text-center py-12">
        <div className="w-20 h-20 rounded-xl bg-white border-2 border-slate-200 flex items-center justify-center mx-auto mb-6 shadow-sm">
          <Icon className={`w-10 h-10 ${state.iconColor}`} strokeWidth={1.5} />
        </div>
        <p className="text-slate-900 font-bold text-xl mb-2">
          {state.title}
        </p>
        <p className="text-slate-600 text-base">
          {state.description}
        </p>
      </div>
    </div>
  );
});

EmptyState.displayName = 'EmptyState';

// ========================================
// MAIN COMPONENT: ContentDisplay
// ========================================
const ContentDisplay = memo(({ 
  partData, 
  selectedPart, 
  currentQuestionIndex, 
  testType,
  examId  // 👈 Thêm props này
}) => {
  
  // Extract content
  const content = useMemo(() => {
    if (!partData) return '';

    if (testType === 'listening') {
      if (partData.script) {
        return partData.script;
      }
      if (partData.text) {
        return partData.text;
      }
      if (partData.questions && Array.isArray(partData.questions)) {
        const scripts = partData.questions
          .filter(q => q.script)
          .map(q => q.script)
          .join('\n\n');
        return scripts;
      }
      return '';
    }
    
    return partData.text || '';
  }, [partData, testType]);

  // CASE 1: Hide for reading part 5
  if (testType === 'reading' && selectedPart === 'part5') {
    return null;
  }

  // CASE 2: No part data
  if (!partData) {
    return <EmptyState type="no-part" />;
  }

  // CASE 3: No content
  if (!content.trim()) {
    return <EmptyState type="no-content" />;
  }

  // ========================================
  // RENDER: READING PARTS (Special Cases)
  // ========================================
  if (testType === 'reading') {
    
    if (selectedPart === 'part6') {
      return (
        <div className="animate-in fade-in duration-300 overflow-visible w-full">
          <Part6Display part6={partData} />
        </div>
      );
    }

    if (selectedPart === 'part7') {
      return (
        <div className="animate-in fade-in duration-300 overflow-visible w-full">
          <ReadingPart7Display text={content} type="reading" />
        </div>
      );
    }

    if (selectedPart === 'part8') {
      return (
        <div className="animate-in fade-in duration-300 overflow-visible w-full">
          <ReadingPart8Display text={content} type="reading" />
        </div>
      );
    }
    
    // Default Reading Content (Part 1-4)
    return (
      <ReadingContent 
        partData={partData} 
        content={content} 
        selectedPart={selectedPart} 
      />
    );
  }

  // ========================================
  // RENDER: LISTENING PARTS
  // ========================================
  if (testType === 'listening') {
    return (
      <ListeningContent 
        partData={partData}
        selectedPart={selectedPart}
        testType={testType}
        examId={examId}  // 👈 Pass examId
      />
    );
  }

  return null;
});

ContentDisplay.displayName = 'ContentDisplay';

export default ContentDisplay;
</file>

<file path="src/components/Display/PreviousResults.jsx">
import React from 'react';
import { TrendingUp, Trophy, Clock, CheckCircle, XCircle, Activity } from 'lucide-react';

export default function PreviousResults({ attempts, loading, selectedExam, selectedPart }) {
  if (loading) {
    return (
      <div className="bg-white border border-slate-200 rounded-xl p-5 shadow-sm">
        <div className="flex items-center gap-3">
          <div className="w-4 h-4 bg-slate-300 rounded-full animate-pulse" />
          <p className="text-slate-600 font-medium text-sm">Đang tải kết quả...</p>
        </div>
      </div>
    );
  }

  if (!attempts || attempts.length === 0) {
    return (
      <div className="bg-slate-50 border border-slate-200 rounded-xl p-6">
        <p className="text-slate-900 font-semibold text-sm mb-1">Lần đầu tiên</p>
        <p className="text-slate-600 text-sm">Kết quả sẽ được lưu sau khi nộp bài</p>
      </div>
    );
  }

  const bestAttempt = attempts.reduce((best, current) => 
    (current.score > best.score) ? current : best
  );
  
  const latestAttempt = attempts[0];
  const scoreImprovement = latestAttempt.score - bestAttempt.score;
  const isImproving = scoreImprovement >= 0;

  return (
    <div className="space-y-5">
      {/* Summary Stats Grid - Flat & Minimal */}
      <div className="grid grid-cols-3 gap-3">
        {/* Best Score */}
        <div className="bg-white border border-slate-200 rounded-xl p-4 hover:shadow-sm transition-shadow duration-200">
          <div className="flex items-start justify-between mb-3">
            <Trophy className="w-4 h-4 text-slate-700" strokeWidth={1.5} />
            <span className="text-xs font-bold text-slate-500 uppercase tracking-wider">Cao nhất</span>
          </div>
          <p className="text-3xl font-bold text-slate-900">
            {bestAttempt.score?.toFixed(0)}%
          </p>
          <p className="text-xs text-slate-500 mt-2">Điểm tốt nhất</p>
        </div>

        {/* Latest Score */}
        <div className="bg-white border border-slate-200 rounded-xl p-4 hover:shadow-sm transition-shadow duration-200">
          <div className="flex items-start justify-between mb-3">
            <TrendingUp className="w-4 h-4 text-slate-700" strokeWidth={1.5} />
            <span className="text-xs font-bold text-slate-500 uppercase tracking-wider">Gần nhất</span>
          </div>
          <p className="text-3xl font-bold text-slate-900">
            {latestAttempt.score?.toFixed(0)}%
          </p>
          <p className="text-xs text-slate-500 mt-2">Lần làm cuối</p>
        </div>

        {/* Attempts Count */}
        <div className="bg-white border border-slate-200 rounded-xl p-4 hover:shadow-sm transition-shadow duration-200">
          <div className="flex items-start justify-between mb-3">
            <Activity className="w-4 h-4 text-slate-700" strokeWidth={1.5} />
            <span className="text-xs font-bold text-slate-500 uppercase tracking-wider">Số lần</span>
          </div>
          <p className="text-3xl font-bold text-slate-900">
            {attempts.length}
          </p>
          <p className="text-xs text-slate-500 mt-2">Lần nộp bài</p>
        </div>
      </div>

      {/* Trend Indicator - Subtle Progress */}
      {attempts.length > 1 && (
        <div className="bg-slate-50 border border-slate-200 rounded-xl p-4">
          <div className="flex items-center justify-between mb-3">
            <p className="text-sm font-semibold text-slate-900">Xu hướng</p>
            <span className={`text-xs font-bold ${
              isImproving 
                ? 'text-emerald-600' 
                : 'text-amber-600'
            }`}>
              {isImproving ? '↗' : '↘'} {Math.abs(scoreImprovement).toFixed(1)}%
            </span>
          </div>
          <div className="w-full bg-slate-200 rounded-lg h-2">
            <div
              className={`h-2 rounded-lg transition-all duration-500 ${
                isImproving
                  ? 'bg-emerald-500'
                  : 'bg-amber-500'
              }`}
              style={{ width: `${Math.min(latestAttempt.score, 100)}%` }}
            />
          </div>
          <p className="text-xs text-slate-600 mt-2">
            {isImproving 
              ? `Tăng ${scoreImprovement.toFixed(1)}% so với lần trước` 
              : `Giảm ${Math.abs(scoreImprovement).toFixed(1)}% so với lần trước`}
          </p>
        </div>
      )}

      {/* Attempts History - Clean Timeline */}
      <div className="bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm">
        {/* Header */}
        <div className="px-5 py-3.5 border-b border-slate-200 bg-slate-50">
          <div className="flex items-center gap-2">
            <Clock className="w-4 h-4 text-slate-700" strokeWidth={1.5} />
            <h3 className="font-semibold text-slate-900 text-sm">Lịch sử nộp bài</h3>
            <span className="ml-auto text-xs font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded-full">
              {attempts.length}
            </span>
          </div>
        </div>

        {/* Attempts List */}
        <div className="divide-y divide-slate-200 max-h-96 overflow-y-auto">
          {attempts.map((attempt, index) => {
            const correct = Object.entries(attempt.answers || {}).filter(
              ([questionId, answerIndex]) => answerIndex !== undefined
            ).length;

            const total = attempt.totalQuestions || 0;
            const isBest = attempt.score === bestAttempt.score;
            const isDraft = attempt.isDraft;
            const attemptNumber = attempts.length - index;

            return (
              <div
                key={attempt.id}
                className={`px-5 py-4 transition-colors duration-200 hover:bg-slate-50 ${
                  isBest ? 'bg-amber-50/30' : ''
                }`}
              >
                <div className="flex items-center justify-between gap-3">
                  {/* Left: Meta Info */}
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center gap-2 mb-2 flex-wrap">
                      <span className="font-semibold text-slate-900 text-sm">
                        Lần {attemptNumber}
                      </span>
                      {isBest && (
                        <span className="text-xs font-bold text-amber-700 bg-amber-100 px-2 py-1 rounded-md">
                          🏆 Tốt nhất
                        </span>
                      )}
                      {isDraft && (
                        <span className="text-xs font-bold text-slate-600 bg-slate-100 px-2 py-1 rounded-md">
                          💾 Nháp
                        </span>
                      )}
                    </div>
                    <p className="text-xs text-slate-600">
                      {attempt.completedAt
                        ? new Date(attempt.completedAt).toLocaleString('vi-VN', {
                            year: 'numeric',
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit'
                          })
                        : 'Đang làm'}
                    </p>
                  </div>

                  {/* Right: Score & Status */}
                  <div className="flex items-center gap-3 flex-shrink-0">
                    {/* Stats */}
                    <div className="text-right">
                      <p className="text-2xl font-bold text-slate-900">
                        {attempt.score?.toFixed(0)}%
                      </p>
                      <p className="text-xs text-slate-500 mt-0.5">
                        {correct}/{total}
                      </p>
                    </div>

                    {/* Icon Status */}
                    {attempt.score >= 70 ? (
                      <div className="p-2 bg-emerald-50 rounded-lg">
                        <CheckCircle className="w-5 h-5 text-emerald-600" strokeWidth={1.5} />
                      </div>
                    ) : (
                      <div className="p-2 bg-rose-50 rounded-lg">
                        <XCircle className="w-5 h-5 text-rose-600" strokeWidth={1.5} />
                      </div>
                    )}
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>

      {/* Performance Summary */}
      {attempts.length > 2 && (
        <div className="bg-indigo-50 border border-indigo-200 rounded-xl p-4">
          <p className="text-sm font-semibold text-indigo-900 mb-2">
            📊 Phân tích hiệu suất
          </p>
          <div className="grid grid-cols-2 gap-3 text-xs text-indigo-800">
            <div>
              <p className="text-slate-600 text-xs mb-1">Điểm trung bình</p>
              <p className="font-bold text-lg">
                {(attempts.reduce((sum, a) => sum + a.score, 0) / attempts.length).toFixed(1)}%
              </p>
            </div>
            <div>
              <p className="text-slate-600 text-xs mb-1">Cải thiện</p>
              <p className={`font-bold text-lg ${
                bestAttempt.score > latestAttempt.score 
                  ? 'text-amber-600' 
                  : 'text-emerald-600'
              }`}>
                {Math.abs(bestAttempt.score - attempts[attempts.length - 1].score).toFixed(1)}%
              </p>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
</file>

<file path="src/components/Display/QuestionDisplay.jsx">
import React, { useMemo, useCallback, useState } from 'react';
import { Save, CheckCircle, AlertCircle, Volume2, Check, BookOpen, Award } from 'lucide-react';
import { collection, addDoc, serverTimestamp } from 'firebase/firestore';
import { db } from '../../config/firebase';
import { useUnifiedAuth } from '../../hooks/useUnifiedAuth';

// ========================================
// SUB-COMPONENT: Progress Bar
// ========================================
const ProgressBar = ({ percentage }) => (
  <div className="h-1.5 bg-slate-100 rounded-full overflow-hidden">
    <div
      className="h-full bg-gradient-to-r from-cyan-500 to-blue-600 transition-all duration-500 ease-out"
      style={{ width: `${percentage}%` }}
    />
  </div>
);

// ========================================
// SUB-COMPONENT: Status Badge
// ========================================
const StatusBadge = ({ answersCount, totalQuestions }) => {
  const isAllAnswered = answersCount === totalQuestions && totalQuestions > 0;

  return (
    <div className="flex items-center justify-between text-sm">
      {/* Left side: Progress count */}
      <span className="text-slate-600 font-medium">
        Đã trả lời: <span className="text-cyan-700 font-bold">{answersCount}</span> / {totalQuestions}
      </span>
      
      {/* Right side: Status indicator */}
      {isAllAnswered ? (
        <div className="flex items-center gap-1.5 text-green-600 font-semibold text-xs">
          <div className="w-2 h-2 rounded-full bg-green-500" />
          Hoàn thành
        </div>
      ) : (
        <div className="flex items-center gap-1.5 text-amber-600 font-medium text-xs">
          <div className="w-2 h-2 rounded-full bg-amber-500" />
          Còn {totalQuestions - answersCount} câu
        </div>
      )}
    </div>
  );
};

// ========================================
// SUB-COMPONENT: Auth Notice
// ========================================
const AuthNotice = ({ isSignedIn }) => (
  <div className={`p-3 border rounded-xl text-sm transition-all ${
    isSignedIn
      ? 'bg-green-50 border-green-200'
      : 'bg-amber-50 border-amber-200'
  }`}>
    <div className="flex items-start gap-2.5">
      {/* Icon */}
      <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${
        isSignedIn 
          ? 'bg-green-100' 
          : 'bg-amber-100'
      }`}>
        {isSignedIn ? (
          <CheckCircle className="w-4 h-4 text-green-600" strokeWidth={2} />
        ) : (
          <AlertCircle className="w-4 h-4 text-amber-600" strokeWidth={2} />
        )}
      </div>
      
      {/* Message */}
      <div className="flex-1 min-w-0">
        <p className={`font-semibold mb-0.5 ${
          isSignedIn ? 'text-green-900' : 'text-amber-900'
        }`}>
          {isSignedIn
            ? 'Đã đăng nhập - Kết quả sẽ được lưu tự động'
            : 'Vui lòng đăng nhập để lưu kết quả'
          }
        </p>
        {!isSignedIn && (
          <p className="text-xs text-amber-700 leading-relaxed">
            Kết quả sẽ không được lưu nếu bạn chưa đăng nhập.
          </p>
        )}
      </div>
    </div>
  </div>
);

// ========================================
// SUB-COMPONENT: Submit Status Notification
// ========================================
const SubmitStatusNotification = ({ status }) => {
  if (!status.show) return null;

  const isSuccess = status.success;
  const isLoading = status.message.includes('Đang');

  return (
    <div className={`p-3 rounded-xl border flex items-start gap-2.5 text-sm animate-in fade-in duration-200 ${
      isSuccess
        ? 'bg-green-50 border-green-200'
        : isLoading
        ? 'bg-blue-50 border-blue-200'
        : 'bg-red-50 border-red-200'
    }`}>
      {/* Icon */}
      <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${
        isSuccess 
          ? 'bg-green-100' 
          : isLoading 
          ? 'bg-blue-100' 
          : 'bg-red-100'
      }`}>
        {isSuccess ? (
          <CheckCircle className="w-4 h-4 text-green-600" strokeWidth={2} />
        ) : isLoading ? (
          <div className="w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin" />
        ) : (
          <AlertCircle className="w-4 h-4 text-red-600" strokeWidth={2} />
        )}
      </div>
      
      {/* Message */}
      <span className={`font-medium flex-1 ${
        isSuccess ? 'text-green-900' : isLoading ? 'text-blue-900' : 'text-red-900'
      }`}>
        {status.message}
      </span>
    </div>
  );
};

// ========================================
// SUB-COMPONENT: Question Option (Single Choice)
// ========================================
const QuestionOption = ({ option, index, isSelected, onSelect, questionId }) => {
  const optionLabel = String.fromCharCode(65 + index); // A, B, C, D

  return (
    <label 
      htmlFor={`q${questionId}-opt${index}`}
      className={`
        group relative flex items-start p-3.5 rounded-xl cursor-pointer 
        transition-all duration-200 border
        ${isSelected
          ? 'bg-gradient-to-r from-cyan-50 to-blue-50 border-cyan-300 shadow-sm'
          : 'bg-white border-slate-200 hover:border-cyan-200 hover:bg-slate-50'
        }
      `}
    >
      <div className="flex items-start gap-3 flex-1 min-w-0">
        {/* Radio Circle */}
        <div className={`
          relative w-7 h-7 rounded-full border-2 
          flex items-center justify-center font-semibold text-xs flex-shrink-0 
          transition-all
          ${isSelected
            ? 'bg-gradient-to-br from-cyan-500 to-blue-600 border-cyan-600 text-white shadow-md'
            : 'border-slate-300 text-slate-500 bg-white group-hover:border-cyan-300 group-hover:bg-cyan-50'
          }
        `}>
          {isSelected ? (
            <Check className="w-3.5 h-3.5 stroke-[3]" />
          ) : (
            <span className="text-xs font-bold">{optionLabel}</span>
          )}
        </div>

        {/* Option Text */}
        <div className="flex-1 min-w-0 pt-0.5">
          <span className={`
            text-sm leading-relaxed break-words block
            ${isSelected ? 'text-slate-900 font-medium' : 'text-slate-700'}
          `} style={{ lineHeight: '1.6' }}>
            {option}
          </span>
          
          {/* Selected Badge */}
          {isSelected && (
            <div className="mt-2 inline-flex items-center gap-1 text-xs font-semibold text-cyan-700 bg-cyan-100 px-2.5 py-1 rounded-full">
              <Check className="w-3 h-3" />
              Đã chọn
            </div>
          )}
        </div>
      </div>

      {/* Hidden Radio Input */}
      <input
        type="radio"
        id={`q${questionId}-opt${index}`}
        name={`question-${questionId}`}
        checked={isSelected}
        onChange={onSelect}
        className="sr-only"
      />
    </label>
  );
};

// ========================================
// SUB-COMPONENT: Question Card
// ========================================
const QuestionCard = ({ 
  question, 
  script, 
  options, 
  isAnswered, 
  selectedAnswer, 
  onAnswerSelect 
}) => {
  return (
    <div className="p-4 bg-white rounded-xl border border-slate-200 hover:border-slate-300 transition-all">
      
      {/* Script Section (if exists) */}
      {script && (
        <div className="mb-4 p-3.5 bg-blue-50 rounded-xl border border-blue-200">
          <div className="flex items-center gap-2 mb-2">
            <div className="w-7 h-7 rounded-lg bg-blue-100 flex items-center justify-center">
              <Volume2 className="w-4 h-4 text-blue-600" strokeWidth={2} />
            </div>
            <p className="text-xs font-semibold text-blue-900 uppercase tracking-wide">
              Script
            </p>
          </div>
          <p className="text-sm text-slate-700 leading-relaxed italic pl-9">
            {script}
          </p>
        </div>
      )}

      {/* Question Header */}
      <div className="mb-4">
        <div className="flex items-start gap-3">
          <div className="flex-1">
            <div className="flex items-center gap-2 mb-2">
              <span className="text-cyan-700 font-bold text-base">Câu {question.id}</span>
              {/* Answered Badge */}
              {isAnswered && (
                <div className="flex items-center gap-1 text-xs font-semibold text-green-600 bg-green-50 px-2.5 py-1 rounded-full border border-green-200">
                  <CheckCircle className="w-3 h-3" />
                  <span className="hidden sm:inline">Đã trả lời</span>
                </div>
              )}
            </div>
            <h3 className="text-sm font-medium text-slate-900 leading-relaxed">
              {question.question}
            </h3>
          </div>
        </div>
      </div>

      {/* Options List */}
      <div className="space-y-2.5">
        {options?.map((option, index) => (
          <QuestionOption
            key={`${question.id}-${index}`}
            questionId={question.id}
            option={option}
            index={index}
            isSelected={selectedAnswer === index}
            onSelect={() => onAnswerSelect(question.id, index)}
          />
        ))}
      </div>

      {/* Selected Answer Summary */}
      {isAnswered && selectedAnswer !== undefined && (
        <div className="mt-4 pt-4 border-t border-slate-200">
          <div className="flex items-center gap-2 text-sm bg-slate-50 p-3 rounded-lg">
            <span className="text-slate-600 font-medium">Lựa chọn của bạn:</span>
            <span className="font-semibold text-cyan-700">
              ({String.fromCharCode(65 + selectedAnswer)}) {options[selectedAnswer]}
            </span>
          </div>
        </div>
      )}
    </div>
  );
};

// ========================================
// MAIN COMPONENT: QuestionDisplay
// ========================================
const QuestionDisplay = ({
  selectedPart,
  selectedExam,
  partData,
  answers,
  onAnswerSelect,
  showResults,
  onSubmit,
  testType
}) => {
  // ===== HOOKS =====
  // Firebase authentication via unified auth hook (Clerk removed)
  const { user: firebaseUser, isSignedIn } = useUnifiedAuth();
  const [submitStatus, setSubmitStatus] = useState({ 
    show: false, 
    success: false, 
    message: '' 
  });

  // ===== CHECK IF SPLIT LAYOUT PART (6, 7, 8) =====
  const isSplitLayoutPart = testType === 'reading' && 
    (selectedPart === 'part6' || selectedPart === 'part7' || selectedPart === 'part8');

  // ===== COMPUTED VALUES =====
  
  // Đếm số câu đã trả lời
  const answersCount = useMemo(() => 
    Object.keys(answers).length, 
    [answers]
  );
  
  // Tổng số câu hỏi
  const totalQuestions = useMemo(() => 
    partData?.questions?.length || 0, 
    [partData?.questions?.length]
  );
  
  // Phần trăm hoàn thành
  const progressPercentage = useMemo(() => {
    return totalQuestions > 0 ? (answersCount / totalQuestions) * 100 : 0;
  }, [answersCount, totalQuestions]);
  
  // Kiểm tra đã trả lời hết chưa
  const isAllAnswered = useMemo(() => {
    return answersCount === totalQuestions && totalQuestions > 0;
  }, [answersCount, totalQuestions]);

  // Tính điểm số
  const score = useMemo(() => {
    if (!partData?.questions) {
      return { correct: 0, total: 0, percentage: 0 };
    }
    
    let correct = 0;
    for (let i = 0; i < partData.questions.length; i++) {
      const question = partData.questions[i];
      if (answers[question.id] === question.correct) {
        correct++;
      }
    }
    
    return {
      correct,
      total: totalQuestions,
      percentage: totalQuestions > 0 ? (correct / totalQuestions) * 100 : 0
    };
  }, [answers, partData?.questions, totalQuestions]);

  // ===== HELPER FUNCTIONS =====
  
  // Lấy thông tin user identifier từ Firebase
  const getUserIdentifier = useCallback(() => {
    if (firebaseUser) {
      return {
        firebaseUid: firebaseUser.uid,
        email: firebaseUser.email || '',
        displayName: firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'Anonymous'
      };
    }
    return null;
  }, [firebaseUser]);

  // ===== EVENT HANDLERS =====
  
  // Xử lý nộp bài và lưu vào Firebase
  const handleSubmitWithSave = useCallback(async () => {
    try {
      // 1. Gọi callback onSubmit từ parent
      onSubmit();

      // 2. Kiểm tra đăng nhập
      if (!isSignedIn) {
        setSubmitStatus({
          show: true,
          success: false,
          message: 'Vui lòng đăng nhập để lưu kết quả'
        });
        setTimeout(() => setSubmitStatus({ show: false, success: false, message: '' }), 4000);
        return;
      }

      // 3. Lấy thông tin user
      const userIdentifier = getUserIdentifier();
      if (!userIdentifier) {
        setSubmitStatus({
          show: true,
          success: false,
          message: 'Không thể xác định người dùng'
        });
        setTimeout(() => setSubmitStatus({ show: false, success: false, message: '' }), 4000);
        return;
      }

      // 4. Hiển thị trạng thái đang lưu
      setSubmitStatus({
        show: true,
        success: false,
        message: 'Đang lưu kết quả...'
      });

      // 5. Chuẩn bị dữ liệu để lưu
      const dataToSave = {
        firebaseUid: userIdentifier.firebaseUid,
        email: userIdentifier.email || '',
        displayName: userIdentifier.displayName || 'Anonymous',
        exam: selectedExam,
        part: selectedPart,
        score: score.percentage,
        answers: answers,
        totalQuestions: score.total,
        correctAnswers: score.correct,
        isDraft: false,
        testType: testType,
        createdAt: serverTimestamp(),
        completedAt: serverTimestamp(),
        updatedAt: serverTimestamp()
      };

      // 6. Lưu vào Firestore
      await addDoc(collection(db, 'userProgress'), dataToSave);

      // 7. Hiển thị thông báo thành công
      setSubmitStatus({
        show: true,
        success: true,
        message: `Đã lưu thành công! Điểm: ${score.correct}/${score.total} (${score.percentage.toFixed(0)}%)`
      });

      // 8. Tự động ẩn thông báo sau 4 giây
      setTimeout(() => setSubmitStatus({ show: false, success: false, message: '' }), 4000);

    } catch (error) {
      console.error('Error saving progress:', error);
      setSubmitStatus({
        show: true,
        success: false,
        message: `Lỗi khi lưu: ${error.message}`
      });
      setTimeout(() => setSubmitStatus({ show: false, success: false, message: '' }), 4000);
    }
  }, [isSignedIn, getUserIdentifier, onSubmit, selectedExam, selectedPart, score, answers, testType]);

  // ===== RENDER CONDITIONS =====
  
  // Không hiển thị nếu không có data hoặc đã show results
  if (!partData || showResults || !partData.questions) {
    return null;
  }

  // ===== MAIN RENDER =====
  return (
    <div className={`relative bg-slate-50 ${
      isSplitLayoutPart ? '' : 'min-h-screen py-6 px-4'
    }`}>
      
      {/* ===== MAIN CONTAINER (Conditional Scroll) ===== */}
      <div className={`relative max-w-4xl mx-auto space-y-4 ${
        isSplitLayoutPart 
          ? 'max-h-[calc(100vh-8rem)] lg:max-h-[calc(100vh-7rem)] overflow-y-auto px-4 py-4' 
          : ''
      }`}>
        
        {/* ===== QUESTIONS SECTION ===== */}
        <div className="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
          
          {/* Gradient accent */}
          <div className="bg-gradient-to-r from-cyan-500 to-blue-600 h-1.5" />
          
          {/* Content */}
          <div className="p-5">
            {/* Header (Sticky only for split layout) */}
            <div className={`flex items-center justify-between mb-4 pb-4 border-b border-slate-200 ${
              isSplitLayoutPart ? 'sticky top-0 bg-white z-10 -mx-5 px-5 pt-5' : ''
            }`}>
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-md">
                  <BookOpen className="w-5 h-5 text-white" strokeWidth={2} />
                </div>
                <div>
                  <h2 className="text-slate-900 font-bold text-base">Câu hỏi</h2>
                  <p className="text-slate-500 text-xs font-medium">
                    {testType === 'listening' ? 'Phần nghe' : 'Phần đọc'}
                  </p>
                </div>
              </div>
              
              <div className="flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-100 border border-slate-200">
                <span className="text-slate-700 text-sm font-semibold">{answersCount}/{totalQuestions}</span>
              </div>
            </div>

            {/* Questions List (Scroll only for split layout) */}
            <div className={`space-y-3 ${
              isSplitLayoutPart 
                ? 'max-h-[50vh] lg:max-h-[55vh] overflow-y-auto pr-2'
                : ''
            }`} style={{ scrollbarWidth: 'thin', scrollbarColor: '#cbd5e1 transparent' }}>
              {partData.questions.map((q) => {
                const selectedAns = answers[q.id];
                
                return (
                  <QuestionCard
                    key={q.id}
                    question={q}
                    script={q.script}
                    options={q.options}
                    isAnswered={selectedAns !== undefined}
                    selectedAnswer={selectedAns}
                    onAnswerSelect={onAnswerSelect}
                  />
                );
              })}
            </div>
          </div>
        </div>

        {/* ===== PROGRESS & SUBMIT SECTION (Sticky only for split layout) ===== */}
        <div className={`bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden ${
          isSplitLayoutPart ? 'sticky bottom-4 z-10' : ''
        }`}>
          {/* Gradient accent */}
          <div className="bg-gradient-to-r from-cyan-500 to-blue-600 h-1.5" />
          
          {/* Content */}
          <div className="p-5 space-y-4">
            {/* Section Title */}
            <div className="flex items-center gap-3 pb-3 border-b border-slate-200">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-md">
                <Award className="w-5 h-5 text-white" strokeWidth={2} />
              </div>
              <div>
                <h3 className="text-slate-900 font-bold text-base">Tiến độ làm bài</h3>
                <p className="text-slate-500 text-xs font-medium">Theo dõi quá trình hoàn thành</p>
              </div>
            </div>

            {/* Progress Bar */}
            <div className="space-y-2">
              <ProgressBar percentage={progressPercentage} />
              <StatusBadge
                answersCount={answersCount}
                totalQuestions={totalQuestions}
              />
            </div>

            {/* Submit Status Notification */}
            <SubmitStatusNotification status={submitStatus} />

            {/* Auth Notice - Updated to not show authProvider */}
            <AuthNotice isSignedIn={isSignedIn} />

            {/* Submit Button */}
            <button
              onClick={handleSubmitWithSave}
              disabled={!isAllAnswered}
              className={`
                w-full py-3.5 px-4 font-semibold rounded-full 
                transition-all duration-300
                flex items-center justify-center gap-2.5 text-sm shadow-lg
                ${isAllAnswered
                  ? 'bg-gradient-to-r from-cyan-500 to-blue-600 text-white hover:from-cyan-600 hover:to-blue-700 active:scale-95 hover:shadow-xl'
                  : 'bg-slate-200 text-slate-400 cursor-not-allowed'
                }
              `}
            >
              <Save className="w-5 h-5" strokeWidth={2} />
              <span className="font-bold">
                {isSignedIn ? 'Nộp bài & Lưu kết quả' : 'Nộp bài'}
              </span>
              {isAllAnswered && (
                <span className="text-xs bg-white/20 px-2.5 py-0.5 rounded-full font-medium">
                  {totalQuestions} câu
                </span>
              )}
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default QuestionDisplay;
</file>

<file path="src/components/footer/Footer.css">

</file>

<file path="src/components/hooks/useScriptParser.js">
import { useMemo } from 'react';

export const useScriptParser = (script) => {
  // ✅ Parse script và tính toán speakers + counts trong 1 lần duyệt
  const { parsedScript, speakers, speakerCounts } = useMemo(() => {
    // Early return cho các trường hợp không hợp lệ
    if (!script || typeof script !== 'string') {
      return { parsedScript: [], speakers: [], speakerCounts: {} };
    }

    // ✅ Tối ưu: Sử dụng regex compiled một lần
    const SPEAKER_PATTERN = /^([A-Za-z\s\d\-]+(?:\s*\([A-Z0-9]\))?)\s*:\s*(.+)$/;
    const SPEAKER_LABEL_PATTERN = /\s*\([A-Z0-9]\)\s*$/;
    
    // Preprocessing: Split và filter trong 1 bước
    const lines = script
      .split('\n')
      .map(line => line.trim())
      .filter(Boolean);

    // Nếu không có lines hợp lệ
    if (lines.length === 0) {
      return { parsedScript: [], speakers: [], speakerCounts: {} };
    }

    // ✅ Parse conversations
    const conversations = [];
    const speakerSet = new Set();
    const counts = {};
    
    let currentSpeaker = null;
    let currentText = '';

    // Helper function để push conversation
    const pushConversation = () => {
      if (currentSpeaker && currentText) {
        const trimmedText = currentText.trim();
        if (trimmedText) {
          conversations.push({ 
            speaker: currentSpeaker, 
            text: trimmedText 
          });
          
          // ✅ Tính toán speakers và counts ngay trong quá trình parse
          speakerSet.add(currentSpeaker);
          counts[currentSpeaker] = (counts[currentSpeaker] || 0) + 1;
        }
      }
    };

    // Main parsing loop
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const match = line.match(SPEAKER_PATTERN);

      if (match) {
        // Tìm thấy dòng mới với speaker
        pushConversation();
        
        // Clean speaker name (remove label như (A), (B))
        currentSpeaker = match[1].replace(SPEAKER_LABEL_PATTERN, '').trim();
        currentText = match[2].trim();
      } else if (currentSpeaker) {
        // Continuation của text hiện tại
        currentText += ' ' + line;
      } else {
        // Dòng không có speaker → gán cho Narrator
        if (currentText) currentText += ' ';
        currentText += line;
        currentSpeaker = 'Narrator';
      }
    }

    // Push conversation cuối cùng
    pushConversation();

    // ✅ Tạo sorted speakers list (loại bỏ Narrator)
    const sortedSpeakers = Array.from(speakerSet)
      .filter(speaker => speaker !== 'Narrator')
      .sort();

    return {
      parsedScript: conversations,
      speakers: sortedSpeakers,
      speakerCounts: counts
    };
  }, [script]);

  return { parsedScript, speakers, speakerCounts };
};
</file>

<file path="src/components/hooks/useSpeech.js">
// src/components/hooks/useSpeech.js
import { useState, useEffect, useCallback, useRef } from 'react';

export const useSpeech = () => {
    const synth = window.speechSynthesis;
    const [playingId, setPlayingId] = useState(null);
    const [sentenceId, setSentenceId] = useState(null); // <-- THÊM DÒNG NÀY
    const [isSupported, setIsSupported] = useState(true);
    const [error, setError] = useState(null);
    const [rate, setRate] = useState(0.8);
    const [pitch, setPitch] = useState(1);
    const voicesRef = useRef([]);

    useEffect(() => {
        if (!synth) {
            setIsSupported(false);
            return;
        }
        const updateVoices = () => {
            voicesRef.current = synth.getVoices();
        };
        updateVoices();
        synth.addEventListener('voiceschanged', updateVoices);
        return () => synth.removeEventListener('voiceschanged', updateVoices);
    }, [synth]);

    const getVoiceByLanguage = useCallback((lang = 'en') => {
        if (!voicesRef.current.length) return null;
        let voice = voicesRef.current.find(v => v.lang.startsWith(lang));
        if (!voice && lang !== 'en') voice = voicesRef.current.find(v => v.lang.includes('en'));
        return voice || voicesRef.current[0];
    }, []);

    const speak = useCallback((text, id = null, lang = 'en', isSentence = false) => {
        if (!isSupported || !text) return;

        try {
            setError(null);
            synth.cancel();

            // Xử lý riêng cho câu ví dụ
            if (isSentence) {
                if (sentenceId === id) {
                    setSentenceId(null);
                    return;
                }
                setSentenceId(id);
            } else {
                if (playingId === id) {
                    setPlayingId(null);
                    return;
                }
                setPlayingId(id);
            }

            const utterance = new SpeechSynthesisUtterance(text);
            const voice = getVoiceByLanguage(lang);
            if (voice) utterance.voice = voice;
            utterance.rate = rate;
            utterance.pitch = pitch;
            utterance.lang = lang;

            utterance.onend = () => {
                if (isSentence) setSentenceId(null);
                else setPlayingId(null);
            };
            utterance.onerror = (event) => {
                setError(`Speech error: ${event.error}`);
                if (isSentence) setSentenceId(null);
                else setPlayingId(null);
            };

            synth.speak(utterance);
        } catch (err) {
            setError(err.message);
            setPlayingId(null);
            setSentenceId(null);
        }
    }, [synth, playingId, sentenceId, isSupported, rate, pitch, getVoiceByLanguage]);

    const stop = useCallback(() => {
        synth.cancel();
        setPlayingId(null);
        setSentenceId(null);
    }, [synth]);

    const pause = useCallback(() => {
        synth.paused ? synth.resume() : synth.pause();
    }, [synth]);

    useEffect(() => () => synth?.cancel(), [synth]);

    return {
        speak,
        stop,
        pause,
        playingId,
        sentenceId, // <-- TRẢ VỀ
        isSupported,
        error,
        rate,
        setRate,
        pitch,
        setPitch,
        voices: voicesRef.current,
    };
};
</file>

<file path="src/components/hooks/useTextToSpeechWithExpression.js">
import { useState, useCallback, useRef, useEffect } from 'react';
import { useVoiceExpression } from './useVoiceExpression';
import { VOICE_EMOTIONS } from '../config/voiceExpression';


export const useTextToSpeechWithExpression = ({
  getSpeakerVoice,
  synthRef,
  isScriptPlaying,
  filteredConversations
}) => {
  const [currentPlayingIndex, setCurrentPlayingIndex] = useState(-1);
  const [playingTime, setPlayingTime] = useState(0);
  const [isPaused, setIsPaused] = useState(false);
  const [globalEmotion, setGlobalEmotion] = useState('NEUTRAL');
  const [enableExpression, setEnableExpression] = useState(true);

  const utteranceQueueRef = useRef([]);
  const currentUtteranceRef = useRef(null);
  const isPlayingRef = useRef(false);
  const pausedUtteranceRef = useRef(null);
  const metricsRef = useRef({
    totalUtterances: 0,
    emotionsUsed: {},
    emphasisCount: 0
  });

  const { 
    applyVoiceExpression,
    createExpressionUtterance,
    extractEmotionMarker
  } = useVoiceExpression();

  // Clean up utterance
  const cleanupUtterance = useCallback(() => {
    if (currentUtteranceRef.current) {
      currentUtteranceRef.current.onend = null;
      currentUtteranceRef.current.onerror = null;
      currentUtteranceRef.current = null;
    }
  }, []);

  // Stop all speech
  const stopAllSpeech = useCallback(() => {
    try {
      if (synthRef.current) {
        synthRef.current.cancel();
      }
    } catch (err) {
      console.error('Error stopping speech:', err);
    }
  }, [synthRef]);

  // Pause speech
  const pauseScript = useCallback(() => {
    if (!synthRef.current) return;

    try {
      if (synthRef.current.speaking && !synthRef.current.paused) {
        pausedUtteranceRef.current = currentUtteranceRef.current;
        synthRef.current.pause();
        setIsPaused(true);
        isPlayingRef.current = false;
      }
    } catch (err) {
      console.error('Error pausing speech:', err);
      stopAllSpeech();
    }
  }, [synthRef, stopAllSpeech]);

  // Resume speech
  const resumeScript = useCallback(() => {
    if (!synthRef.current) return;

    try {
      if (synthRef.current.paused) {
        synthRef.current.resume();
        setIsPaused(false);
        isPlayingRef.current = true;
      }
    } catch (err) {
      console.error('Error resuming speech:', err);
    }
  }, [synthRef]);

  // Stop and reset
  const stopScript = useCallback(() => {
    stopAllSpeech();
    cleanupUtterance();
    utteranceQueueRef.current = [];
    pausedUtteranceRef.current = null;
    setCurrentPlayingIndex(-1);
    setPlayingTime(0);
    setIsPaused(false);
    isPlayingRef.current = false;
  }, [stopAllSpeech, cleanupUtterance]);

  // Play next with expression
  const speakNextInQueue = useCallback(() => {
    if (!synthRef.current || currentUtteranceRef.current) {
      return;
    }

    if (utteranceQueueRef.current.length === 0) {
      if (isPlayingRef.current) {
        setCurrentPlayingIndex(-1);
        setPlayingTime(0);
        isPlayingRef.current = false;
      }
      return;
    }

    const next = utteranceQueueRef.current.shift();
    if (!next) return;

    // Find index in filtered conversations
    const newIndex = filteredConversations.findIndex(
      conv => conv.text === next.text && conv.speaker === next.speaker
    );

    if (newIndex !== -1) {
      setCurrentPlayingIndex(newIndex);
    }

    // Get voice for speaker
    const voice = getSpeakerVoice(next.speaker);
    if (!voice) {
      console.warn(`No voice available for ${next.speaker}`);
      return speakNextInQueue();
    }

    try {
      // Áp dụng voice expression
      const expressionResult = enableExpression
        ? applyVoiceExpression(next.text, next.options)
        : {
            params: next.options,
            text: next.text,
            emotion: 'NEUTRAL',
            hasEmphasis: false
          };

      // Track metrics
      metricsRef.current.totalUtterances++;
      metricsRef.current.emotionsUsed[expressionResult.emotion] = 
        (metricsRef.current.emotionsUsed[expressionResult.emotion] || 0) + 1;
      if (expressionResult.hasEmphasis) {
        metricsRef.current.emphasisCount++;
      }

      // Create utterance with expression
      const utterance = new SpeechSynthesisUtterance(expressionResult.text);
      utterance.voice = voice;
      utterance.rate = expressionResult.params.rate;
      utterance.pitch = expressionResult.params.pitch;
      utterance.volume = expressionResult.params.volume;
      utterance.lang = voice.lang;

      currentUtteranceRef.current = utterance;
      setPlayingTime(prev => prev + 1);

      utterance.onend = () => {
        cleanupUtterance();
        speakNextInQueue();
      };

      utterance.onerror = (event) => {
        console.error('Utterance error:', event.error);
        cleanupUtterance();
        speakNextInQueue();
      };

      synthRef.current.speak(utterance);
    } catch (err) {
      console.error('Error creating utterance:', err);
      cleanupUtterance();
      speakNextInQueue();
    }
  }, [synthRef, getSpeakerVoice, filteredConversations, cleanupUtterance, enableExpression, applyVoiceExpression]);

  // Queue conversations with expression support
  const queueConversations = useCallback((conversations, getTTSOptions) => {
    if (!synthRef.current) return false;

    try {
      stopAllSpeech();
      cleanupUtterance();
      utteranceQueueRef.current = [];
      pausedUtteranceRef.current = null;
      setPlayingTime(0);

      const queue = conversations.map(conv => {
        // Extract emotion marker if exists
        const { emotion, cleanText } = extractEmotionMarker(conv.text);
        const emotionToUse = emotion || (globalEmotion !== 'NEUTRAL' ? VOICE_EMOTIONS[globalEmotion] : null);

        return {
          text: conv.text,
          cleanText: cleanText,
          speaker: conv.speaker,
          options: getTTSOptions(conv.speaker),
          emotion: emotionToUse
        };
      });

      utteranceQueueRef.current = queue;
      isPlayingRef.current = true;
      return queue.length > 0;
    } catch (err) {
      console.error('Error queueing conversations:', err);
      return false;
    }
  }, [synthRef, stopAllSpeech, cleanupUtterance, globalEmotion, extractEmotionMarker]);

  // Get expression metrics
  const getExpressionMetrics = useCallback(() => {
    const { totalUtterances, emotionsUsed, emphasisCount } = metricsRef.current;
    
    return {
      totalUtterances,
      emphasisCount,
      emotionsUsed,
      emphasisRate: totalUtterances > 0 ? ((emphasisCount / totalUtterances) * 100).toFixed(2) : 0,
      dominantEmotion: Object.entries(emotionsUsed).sort(([, a], [, b]) => b - a)[0]?.[0] || 'NEUTRAL'
    };
  }, []);

  // Reset metrics
  const resetExpressionMetrics = useCallback(() => {
    metricsRef.current = {
      totalUtterances: 0,
      emotionsUsed: {},
      emphasisCount: 0
    };
  }, []);

  // Cleanup on unmount
  useEffect(() => {
    return () => {
      stopScript();
    };
  }, [stopScript]);

  return {
    // State & Control
    currentPlayingIndex,
    setCurrentPlayingIndex,
    playingTime,
    isPaused,
    pauseScript,
    resumeScript,
    stopScript,
    speakNextInQueue,
    queueConversations,

    // Expression controls
    globalEmotion,
    setGlobalEmotion,
    enableExpression,
    setEnableExpression,

    // Metrics
    getExpressionMetrics,
    resetExpressionMetrics,

    // Internal refs
    utteranceQueueRef,
    currentUtteranceRef
  };
};
</file>

<file path="src/components/hooks/useVoiceExpression.js">
import { useCallback, useMemo, useRef, useEffect } from 'react';
import {
  VOICE_EMOTIONS,
  EMPHASIS_PATTERNS,
  PAUSE_PATTERNS,
  detectEmotionFromText,
  getFinalVoiceParams,
  cleanTextMarkers,
  addPausesToText,
  extractEmotionMarker as extractEmotionMarkerConfig,
  extractStressWords,
  validateVoiceParams,
  debugEmotionDetection,
  getCacheStats
} from '../config/voiceExpression';

/**
 * ✨ OPTIMIZED: useVoiceExpression Hook
 * Cải thiện: performance, memory management, type safety, debugging
 */
export const useVoiceExpression = (enableDebug = false) => {
  const expressionCacheRef = useRef(new Map());
  const utteranceCacheRef = useRef(new Map());
  const maxCacheSize = 150; // ✅ IMPROVEMENT: Configurable cache size

  // ==================== 1. PERFORMANCE IMPROVEMENTS ====================

  /**
   * ✅ IMPROVEMENT: Memoize emotions để tránh recompute
   */
  const memoizedEmotions = useMemo(() => {
    return Object.entries(VOICE_EMOTIONS).map(([key, emotion]) => ({
      key,
      ...emotion
    }));
  }, []);

  /**
   * ✅ IMPROVEMENT: Memoize emphasis patterns
   */
  const memoizedPatterns = useMemo(() => {
    return Object.entries(EMPHASIS_PATTERNS).map(([key, pattern]) => ({
      key,
      ...pattern
    }));
  }, []);

  // ==================== 2. CACHE MANAGEMENT ====================

  /**
   * ✅ NEW: LRU Cache implementation (Least Recently Used)
   * Tránh memory leak từ unlimited cache growth
   */
  const addToCache = useCallback((cacheRef, key, value) => {
    // Remove oldest if at capacity
    if (cacheRef.current.size >= maxCacheSize) {
      const firstKey = cacheRef.current.keys().next().value;
      cacheRef.current.delete(firstKey);
    }
    cacheRef.current.set(key, value);
  }, [maxCacheSize]);

  /**
   * ✅ NEW: Get from cache with LRU (move to end = most recently used)
   */
  const getFromCache = useCallback((cacheRef, key) => {
    if (!cacheRef.current.has(key)) return null;
    
    const value = cacheRef.current.get(key);
    // Move to end (most recently used)
    cacheRef.current.delete(key);
    cacheRef.current.set(key, value);
    return value;
  }, []);

  /**
   * ✅ NEW: Clear all caches
   */
  const clearAllCaches = useCallback(() => {
    expressionCacheRef.current.clear();
    utteranceCacheRef.current.clear();
    if (enableDebug) console.log('✅ All caches cleared');
  }, [enableDebug]);

  /**
   * ✅ NEW: Get cache statistics
   */
  const getCacheInfo = useCallback(() => {
    return {
      expressionCache: expressionCacheRef.current.size,
      utteranceCache: utteranceCacheRef.current.size,
      totalCached: expressionCacheRef.current.size + utteranceCacheRef.current.size,
      estimatedMemory: `~${(expressionCacheRef.current.size * 0.3 + utteranceCacheRef.current.size * 0.5).toFixed(1)}KB`
    };
  }, []);

  // ==================== 3. CORE FUNCTIONS ====================

  /**
   * ✅ IMPROVED: Extract emotion marker (use config version)
   */
  const extractEmotionMarker = useCallback((text) => {
    if (!text || typeof text !== 'string') {
      return { emotion: null, cleanText: text };
    }
    return extractEmotionMarkerConfig(text);
  }, []);

  /**
   * ✅ IMPROVED: Apply voice expression with better caching
   */
  const applyVoiceExpression = useCallback((text, baseParams, options = {}) => {
    if (!text || !baseParams) {
      return { params: baseParams, text: '', emotion: 'Neutral', hasEmphasis: false };
    }

    // ✅ IMPROVEMENT: Simple cache key (avoid JSON.stringify overhead)
    const cacheKey = `${text}|${baseParams.rate}|${baseParams.pitch}|${baseParams.volume}`;
    
    // Check cache with LRU
    const cached = getFromCache(expressionCacheRef, cacheKey);
    if (cached) return cached;

    // Extract emotion marker
    const { emotion, cleanText } = extractEmotionMarker(text);

    // Get final voice parameters
    const finalParams = getFinalVoiceParams(baseParams, cleanText, emotion);

    // ✅ IMPROVEMENT: Validate params
    const { valid, issues } = validateVoiceParams(finalParams);
    if (!valid && enableDebug) {
      console.warn('⚠️ Voice params invalid:', issues);
    }

    // Check for emphasis patterns
    const hasEmphasis = memoizedPatterns.some(p => p.pattern.test(cleanText));

    const result = {
      params: finalParams,
      text: cleanTextMarkers(cleanText),
      emotion: emotion?.label || 'Neutral',
      hasEmphasis,
      stressWords: options.includeStress ? extractStressWords(cleanText) : [],
      valid
    };

    // Add to cache with LRU
    addToCache(expressionCacheRef, cacheKey, result);

    return result;
  }, [getFromCache, extractEmotionMarker, memoizedPatterns, addToCache, enableDebug]);

  /**
   * ✅ IMPROVED: Create utterance with better error handling
   */
  const createExpressionUtterance = useCallback((text, baseParams, voice, options = {}) => {
    if (!text || !baseParams) {
      console.error('❌ Missing required params for utterance creation');
      return null;
    }

    // Check cache
    const cacheKey = `${text}|${voice?.name || 'default'}`;
    const cached = getFromCache(utteranceCacheRef, cacheKey);
    if (cached) return cached;

    // Apply expression
    const { params, text: cleanText } = applyVoiceExpression(text, baseParams, options);

    try {
      const utterance = new SpeechSynthesisUtterance(cleanText);
      utterance.voice = voice;
      utterance.rate = params.rate;
      utterance.pitch = params.pitch;
      utterance.volume = params.volume;
      utterance.lang = voice?.lang || options.lang || 'en-US';

      // ✅ IMPROVEMENT: Add event listeners for debugging
      if (enableDebug) {
        utterance.onstart = () => console.log('🔊 Speech started:', text);
        utterance.onend = () => console.log('✅ Speech ended');
        utterance.onerror = (e) => console.error('❌ Speech error:', e);
      }

      // Cache it
      addToCache(utteranceCacheRef, cacheKey, utterance);

      return utterance;
    } catch (error) {
      console.error('❌ Failed to create utterance:', error);
      return null;
    }
  }, [applyVoiceExpression, getFromCache, addToCache, enableDebug]);

  /**
   * ✅ IMPROVED: Break text by expression with validation
   */
  const breakTextByExpression = useCallback((text) => {
    if (!text || typeof text !== 'string') return [];

    const chunks = text.split(/(?=\{[A-Z_]+\})/);

    return chunks
      .filter(chunk => chunk.trim())
      .map((chunk, index) => {
        const { emotion, cleanText } = extractEmotionMarker(chunk);
        return {
          index,
          text: cleanText.trim(),
          emotion: emotion?.label || 'Neutral',
          hasMarker: !!emotion,
          length: cleanText.trim().length
        };
      });
  }, [extractEmotionMarker]);

  /**
   * ✅ IMPROVED: Analyze suggestions with more details
   */
  const analyzeSuggestions = useCallback((text) => {
    if (!text || typeof text !== 'string') return [];

    const suggestions = [];

    // ✅ IMPROVEMENT: Pre-compiled regex test
    if (/[A-Z]{2,}/.test(text)) {
      suggestions.push({ type: 'emphasis', message: 'Uppercase found - will add emphasis' });
    }

    if (/!/.test(text)) {
      suggestions.push({ type: 'exclamation', message: 'Exclamation - will raise pitch' });
    }

    if (/\?/.test(text)) {
      suggestions.push({ type: 'question', message: 'Question mark - will adjust intonation' });
    }

    if (/\.{2,}|…/.test(text)) {
      suggestions.push({ type: 'pause', message: 'Ellipsis detected - will slow down' });
    }

    // Emotion detection
    const emotion = detectEmotionFromText(text);
    if (emotion !== VOICE_EMOTIONS.NEUTRAL) {
      suggestions.push({ 
        type: 'emotion', 
        message: `Emotion detected: ${emotion.label}`,
        details: emotion
      });
    }

    // ✅ NEW: Stress words detection
    const stressWords = extractStressWords(text);
    if (stressWords.length > 0) {
      suggestions.push({
        type: 'stress',
        message: `${stressWords.length} stress word(s): ${stressWords.join(', ')}`
      });
    }

    return suggestions;
  }, []);

  /**
   * ✅ NEW: Detailed debug analysis
   */
  const debugTextExpression = useCallback((text) => {
    if (!enableDebug) {
      console.warn('⚠️ Debug mode not enabled. Pass enableDebug=true');
      return null;
    }

    return debugEmotionDetection(text);
  }, [enableDebug]);

  /**
   * ✅ IMPROVED: Get expression stats with memory info
   */
  const getExpressionStats = useCallback(() => {
    return {
      cacheInfo: getCacheInfo(),
      emotionCount: Object.keys(VOICE_EMOTIONS).length,
      patternCount: Object.keys(EMPHASIS_PATTERNS).length,
      pauseTypes: Object.keys(PAUSE_PATTERNS),
      memoizedEmotions: memoizedEmotions.length,
      memoizedPatterns: memoizedPatterns.length
    };
  }, [getCacheInfo, memoizedEmotions, memoizedPatterns]);

  /**
   * ✅ NEW: Batch process multiple texts efficiently
   */
  const batchApplyVoiceExpression = useCallback((texts, baseParams, options = {}) => {
    if (!Array.isArray(texts)) return [];

    return texts.map((text, index) => ({
      index,
      originalText: text,
      result: applyVoiceExpression(text, baseParams, options)
    }));
  }, [applyVoiceExpression]);

  /**
   * ✅ NEW: Get available voices (with caching)
   */
  const getAvailableVoices = useMemo(() => {
    if (typeof window !== 'undefined' && window.speechSynthesis) {
      return window.speechSynthesis.getVoices();
    }
    return [];
  }, []);

  // ==================== 4. LIFECYCLE MANAGEMENT ====================

  /**
   * ✅ NEW: Cleanup on unmount
   */
  useEffect(() => {
    return () => {
      clearAllCaches();
    };
  }, [clearAllCaches]);

  /**
   * ✅ NEW: Optional cache size warning
   */
  useEffect(() => {
    if (!enableDebug) return;

    const interval = setInterval(() => {
      const { totalCached } = getCacheInfo();
      if (totalCached > maxCacheSize * 0.8) {
        console.warn(`⚠️ Cache approaching limit: ${totalCached}/${maxCacheSize}`);
      }
    }, 5000);

    return () => clearInterval(interval);
  }, [enableDebug, maxCacheSize, getCacheInfo]);

  // ==================== RETURN ====================

  return {
    // Core functions
    applyVoiceExpression,
    createExpressionUtterance,
    extractEmotionMarker,
    
    // Text processing
    breakTextByExpression,
    batchApplyVoiceExpression,

    // Analysis & suggestions
    analyzeSuggestions,
    debugTextExpression,

    // Information
    getExpressionStats,
    getCacheInfo,
    getAvailableVoices,
    getAvailableEmotions: useCallback(() => memoizedEmotions, [memoizedEmotions]),

    // Cache management
    clearAllCaches,

    // Constants (memoized)
    VOICE_EMOTIONS,
    EMPHASIS_PATTERNS: memoizedPatterns,
    PAUSE_PATTERNS
  };
};

// ==================== USAGE EXAMPLES ====================

/**
 * 📝 Basic Usage:
 * 
 * const { applyVoiceExpression, createExpressionUtterance } = useVoiceExpression();
 * 
 * const result = applyVoiceExpression("{EXCITED} Wow!", baseParams);
 * console.log(result); // { params, text, emotion, hasEmphasis, valid }
 * 
 * const utterance = createExpressionUtterance("{HAPPY} Great!", baseParams, voice);
 * window.speechSynthesis.speak(utterance);
 */

/**
 * 📝 Debug Mode:
 * 
 * const { debugTextExpression, getCacheInfo } = useVoiceExpression(true);
 * 
 * console.log(debugTextExpression("{ANGRY} This is terrible!"));
 * console.log(getCacheInfo()); // { expressionCache: X, utteranceCache: Y, ... }
 */

/**
 * 📝 Batch Processing:
 * 
 * const { batchApplyVoiceExpression } = useVoiceExpression();
 * 
 * const texts = ["{HAPPY} Great!", "{SAD} Oh no...", "Normal text"];
 * const results = batchApplyVoiceExpression(texts, baseParams);
 * results.forEach(({ originalText, result }) => {
 *   console.log(`${originalText} -> ${result.emotion}`);
 * });
 */

/**
 * 📝 Advanced: Multiple utterances with cleanup:
 * 
 * const { createExpressionUtterance, clearAllCaches } = useVoiceExpression(true);
 * 
 * try {
 *   const u1 = createExpressionUtterance("First", baseParams, voice);
 *   const u2 = createExpressionUtterance("Second", baseParams, voice);
 *   window.speechSynthesis.speak(u1);
 *   // ...
 * } finally {
 *   clearAllCaches();
 * }
 */
</file>

<file path="src/components/hooks/useVoices.js">
import { useState, useCallback, useRef, useEffect } from 'react';
  import { VOICE_CONFIG } from '../../config/voiceConfig';
  import { 
    VOICE_EMOTIONS, 
    detectEmotionFromText,
    getFinalVoiceParams,
    cleanTextMarkers
  } from '../../config/voiceExpression';

  const VOICE_CACHE = new Map();
  const CACHE_DURATION = 5 * 60 * 1000; // 5 minutes
  const VOICE_WARMUP_CACHE = new Set();
  const EXPRESSION_CACHE = new Map();

  export const useVoices = () => {
    const [isLoading, setIsLoading] = useState(false);
    const [error, setError] = useState(null);
    const [enableExpression, setEnableExpression] = useState(true);
    const [globalEmotion, setGlobalEmotion] = useState('NEUTRAL');
    
    const synthRef = useRef(null);
    const [allVoices, setAllVoices] = useState([]);
    const voicesLoadedRef = useRef(false);
    const cacheTimerRef = useRef(null);
    
    const performanceMetricsRef = useRef({
      voiceLoadTime: 0,
      speakAttempts: 0,
      successCount: 0,
      errorCount: 0,
      emotionsUsed: {},
      emphasisCount: 0
    });

    // Initialize synth safely
    useEffect(() => {
      if (typeof window !== 'undefined' && window.speechSynthesis) {
        synthRef.current = window.speechSynthesis;
      }
    }, []);

    // ==================== VOICE SELECTION ====================

    const getSpeakerVoice = useCallback((speaker) => {
      if (!speaker || allVoices.length === 0) return null;

      // Check cache first
      if (VOICE_CACHE.has(speaker)) {
        const cached = VOICE_CACHE.get(speaker);
        if (Date.now() - cached.timestamp < CACHE_DURATION) {
          return cached.voice;
        }
        VOICE_CACHE.delete(speaker);
      }

      const isFemale = VOICE_CONFIG.FEMALE_SPEAKERS.some(name => speaker.includes(name));
      const isMale = VOICE_CONFIG.MALE_SPEAKERS.some(name => speaker.includes(name));

      let voice = null;

      if (isFemale) {
        voice = allVoices.find(v => v.name.toLowerCase().includes('female') || v.name.toLowerCase().includes('woman')) 
          || allVoices.find(v => !v.name.toLowerCase().includes('male')) 
          || allVoices[0];
      } else if (isMale) {
        voice = allVoices.find(v => v.name.toLowerCase().includes('male') || v.name.toLowerCase().includes('man')) 
          || allVoices.find(v => !v.name.toLowerCase().includes('female')) 
          || allVoices[0];
      } else {
        voice = allVoices[0];
      }

      // Cache voice
      if (voice) {
        VOICE_CACHE.set(speaker, { voice, timestamp: Date.now() });
      }

      return voice;
    }, [allVoices]);

    const reloadVoices = useCallback(() => {
      if (!synthRef.current) {
        setError("Speech Synthesis not available in this browser");
        setIsLoading(false);
        return;
      }

      try {
        const startTime = performance.now();
        const voices = synthRef.current.getVoices().filter(v => v.lang.startsWith('en'));
        
        performanceMetricsRef.current.voiceLoadTime = performance.now() - startTime;

        if (voices.length === 0) {
          setError("No voices available. Check browser settings.");
          setAllVoices([]);
        } else {
          setAllVoices(voices);
          setError(null);
          voicesLoadedRef.current = true;
        }
      } catch (err) {
        console.error('Error loading voices:', err);
        setError("Failed to load voices: " + err.message);
      } finally {
        setIsLoading(false);
      }
    }, []);

    // ==================== VOICE EXPRESSION ====================

    /**
     * Extract emotion marker từ text
     * Example: "{HAPPY} Great job!" -> emotion = HAPPY
     */
    const extractEmotionFromText = useCallback((text) => {
      const match = text.match(/^\{([A-Z_]+)\}\s*/);
      if (match && VOICE_EMOTIONS[match[1]]) {
        return {
          emotion: VOICE_EMOTIONS[match[1]],
          cleanText: text.replace(/^\{[A-Z_]+\}\s*/, '')
        };
      }
      return {
        emotion: null,
        cleanText: text
      };
    }, []);

    /**
     * Apply voice expression to text
     */
    const applyVoiceExpression = useCallback((text, baseParams) => {
      if (!enableExpression) {
        return {
          params: baseParams,
          text: text,
          emotion: 'NEUTRAL',
          hasEmphasis: false
        };
      }

      const cacheKey = `${text}|${JSON.stringify(baseParams)}|${globalEmotion}`;

      // Check cache
      if (EXPRESSION_CACHE.has(cacheKey)) {
        return EXPRESSION_CACHE.get(cacheKey);
      }

      // Extract emotion marker from text
      const { emotion: markerEmotion, cleanText } = extractEmotionFromText(text);

      // Determine final emotion (marker > global > detected)
      let finalEmotion = markerEmotion;
      if (!finalEmotion && globalEmotion !== 'NEUTRAL') {
        finalEmotion = VOICE_EMOTIONS[globalEmotion];
      }
      if (!finalEmotion) {
        finalEmotion = detectEmotionFromText(cleanText);
      }

      // Get final parameters with all effects
      const finalParams = getFinalVoiceParams(baseParams, cleanText, finalEmotion);

      // Check if text has emphasis markers
      const hasEmphasis = /\*[^*]+\*|_[^_]+_|\[[^\]]+\]|[A-Z]{2,}/.test(cleanText);

      const result = {
        params: finalParams,
        text: cleanTextMarkers(cleanText),
        emotion: finalEmotion?.label || 'Neutral',
        hasEmphasis
      };

      // Cache result
      EXPRESSION_CACHE.set(cacheKey, result);

      // Limit cache size
      if (EXPRESSION_CACHE.size > 100) {
        const firstKey = EXPRESSION_CACHE.keys().next().value;
        EXPRESSION_CACHE.delete(firstKey);
      }

      return result;
    }, [enableExpression, globalEmotion, extractEmotionFromText]);

    /**
     * Create utterance with voice expression
     */
    const createExpressiveUtterance = useCallback((text, speaker, baseParams = null) => {
      const voice = getSpeakerVoice(speaker);
      if (!voice) return null;

      // Get speaker config or default
      const speakerConfig = VOICE_CONFIG.SPEAKER_CONFIG[speaker] || VOICE_CONFIG.SPEAKER_CONFIG.default;
      const params = baseParams || speakerConfig;

      // Apply expression
      const expressionResult = applyVoiceExpression(text, params);

      // Track metrics
      performanceMetricsRef.current.emotionsUsed[expressionResult.emotion] = 
        (performanceMetricsRef.current.emotionsUsed[expressionResult.emotion] || 0) + 1;
      if (expressionResult.hasEmphasis) {
        performanceMetricsRef.current.emphasisCount++;
      }

      // Create utterance
      const utterance = new SpeechSynthesisUtterance(expressionResult.text);
      utterance.voice = voice;
      utterance.rate = expressionResult.params.rate;
      utterance.pitch = expressionResult.params.pitch;
      utterance.volume = expressionResult.params.volume;
      utterance.lang = voice.lang || 'en-US';

      return {
        utterance,
        metadata: {
          emotion: expressionResult.emotion,
          hasEmphasis: expressionResult.hasEmphasis,
          originalText: text,
          cleanText: expressionResult.text
        }
      };
    }, [getSpeakerVoice, applyVoiceExpression]);

    // ==================== VOICE WARMUP ====================
    
    const warmupVoice = useCallback(async (speaker) => {
      if (!synthRef.current || !speaker) return false;

      if (VOICE_WARMUP_CACHE.has(speaker)) {
        return true;
      }

      try {
        const voice = getSpeakerVoice(speaker);
        if (!voice) return false;

        return new Promise((resolve) => {
          const utterance = new SpeechSynthesisUtterance('.');
          utterance.voice = voice;
          utterance.volume = 0;
          utterance.rate = 2;

          const timeoutId = setTimeout(() => {
            synthRef.current.cancel();
            resolve(false);
          }, 3000);

          utterance.onend = () => {
            clearTimeout(timeoutId);
            VOICE_WARMUP_CACHE.add(speaker);
            resolve(true);
          };

          utterance.onerror = () => {
            clearTimeout(timeoutId);
            resolve(false);
          };

          synthRef.current.speak(utterance);
        });
      } catch (err) {
        console.warn(`Warmup error for ${speaker}:`, err);
        return false;
      }
    }, [getSpeakerVoice, synthRef]);

    const warmupVoices = useCallback(async (speakers = []) => {
      if (!synthRef.current || speakers.length === 0) return;

      try {
        for (const speaker of speakers) {
          await warmupVoice(speaker);
          await new Promise(r => setTimeout(r, 100));
        }
      } catch (err) {
        console.warn('Batch warmup error:', err);
      }
    }, [warmupVoice, synthRef]);

    // ==================== SPEECH CONTROL ====================

    const pauseAllSpeech = useCallback(() => {
      if (!synthRef.current) return;
      
      try {
        if (synthRef.current.speaking) {
          synthRef.current.pause();
        }
      } catch (err) {
        console.error('Error pausing speech:', err);
      }
    }, []);

    const resumeSpeech = useCallback(() => {
      if (!synthRef.current) return;
      
      try {
        if (synthRef.current.paused) {
          synthRef.current.resume();
        }
      } catch (err) {
        console.error('Error resuming speech:', err);
      }
    }, []);

    const cancelAllSpeech = useCallback(() => {
      if (!synthRef.current) return;

      try {
        synthRef.current.cancel();
      } catch (err) {
        console.error('Error canceling speech:', err);
      }
    }, []);

    // ==================== PERFORMANCE DETECTION ====================

    const getPerformanceLevel = useCallback(() => {
      const memory = navigator.deviceMemory || 4;
      const connection = navigator.connection?.effectiveType || '4g';

      const levels = {
        '4g': { 
          rate: 1.1, 
          pitch: 1.0, 
          chunkSize: 250,
          warmupEnabled: true,
          cacheEnabled: true,
          label: 'Optimal'
        },
        '3g': { 
          rate: 0.9, 
          pitch: 0.95, 
          chunkSize: 150,
          warmupEnabled: true,
          cacheEnabled: true,
          label: 'Good'
        },
        '2g': { 
          rate: 0.7, 
          pitch: 0.9, 
          chunkSize: 100,
          warmupEnabled: false,
          cacheEnabled: true,
          label: 'Limited'
        },
        'slow-4g': { 
          rate: 0.8, 
          pitch: 0.9, 
          chunkSize: 120,
          warmupEnabled: false,
          cacheEnabled: true,
          label: 'Slow'
        }
      };

      return levels[connection] || levels['4g'];
    }, []);

    const autoOptimizeSettings = useCallback(() => {
      const quality = {
        HIGH: { pitch: 1.0, rate: 0.95, volume: 1.0 },
        MEDIUM: { pitch: 0.95, rate: 0.85, volume: 0.95 },
        LOW: { pitch: 0.9, rate: 0.75, volume: 0.9 }
      };

      try {
        const memUsage = performance.memory?.usedJSHeapSize || 0;
        const totalMemory = performance.memory?.jsHeapSizeLimit || 1;
        const usagePercent = memUsage / totalMemory;

        if (usagePercent > 0.8) return quality.LOW;
        if (usagePercent > 0.5) return quality.MEDIUM;
        return quality.HIGH;
      } catch (error) {
        return quality.HIGH;
      }
    }, []);

    // ==================== CACHE & METRICS ====================

    const clearVoiceCache = useCallback(() => {
      VOICE_CACHE.clear();
      VOICE_WARMUP_CACHE.clear();
      EXPRESSION_CACHE.clear();
    }, []);

    const getVoiceMetrics = useCallback(() => {
      const { voiceLoadTime, speakAttempts, successCount, errorCount, emotionsUsed, emphasisCount } = performanceMetricsRef.current;
      
      const dominantEmotion = Object.entries(emotionsUsed)
        .sort(([, a], [, b]) => b - a)[0]?.[0] || 'Neutral';
      
      return {
        voiceLoadTime: Math.round(voiceLoadTime),
        speakAttempts,
        successCount,
        errorCount,
        successRate: speakAttempts > 0 ? ((successCount / speakAttempts) * 100).toFixed(2) : 0,
        cachedVoices: VOICE_CACHE.size,
        warmedUpVoices: VOICE_WARMUP_CACHE.size,
        // Expression metrics
        emotionsUsed,
        emphasisCount,
        emphasisRate: speakAttempts > 0 ? ((emphasisCount / speakAttempts) * 100).toFixed(2) : 0,
        dominantEmotion,
        expressionCacheSize: EXPRESSION_CACHE.size
      };
    }, []);

    const resetMetrics = useCallback(() => {
      performanceMetricsRef.current = {
        voiceLoadTime: 0,
        speakAttempts: 0,
        successCount: 0,
        errorCount: 0,
        emotionsUsed: {},
        emphasisCount: 0
      };
    }, []);

    const trackSpeechAttempt = useCallback((success = true) => {
      performanceMetricsRef.current.speakAttempts++;
      if (success) {
        performanceMetricsRef.current.successCount++;
      } else {
        performanceMetricsRef.current.errorCount++;
      }
    }, []);

    // ==================== ERROR RECOVERY ====================

    const speakWithRetry = useCallback(async (utterance, maxRetries = 3) => {
      if (!synthRef.current) {
        throw new Error('Speech Synthesis not available');
      }

      for (let attempt = 0; attempt < maxRetries; attempt++) {
        try {
          return await new Promise((resolve, reject) => {
            const timeoutId = setTimeout(() => {
              synthRef.current.cancel();
              reject(new Error('Speech synthesis timeout'));
            }, 30000);

            utterance.onend = () => {
              clearTimeout(timeoutId);
              trackSpeechAttempt(true);
              resolve();
            };

            utterance.onerror = (event) => {
              clearTimeout(timeoutId);
              reject(new Error(`Speech error: ${event.error}`));
            };

            synthRef.current.speak(utterance);
          });
        } catch (error) {
          console.warn(`Speech attempt ${attempt + 1}/${maxRetries}:`, error.message);
          trackSpeechAttempt(false);

          try {
            synthRef.current.cancel();
          } catch (e) {
            console.error('Error during retry cleanup:', e);
          }

          if (attempt === maxRetries - 1) {
            throw error;
          }

          await new Promise(r => setTimeout(r, 500 * Math.pow(1.5, attempt)));
        }
      }
    }, [synthRef, trackSpeechAttempt]);

    // ==================== VOICE EXPRESSION UTILITIES ====================

    const getAvailableEmotions = useCallback(() => {
      return Object.entries(VOICE_EMOTIONS).map(([key, emotion]) => ({
        key,
        ...emotion
      }));
    }, []);

    const analyzeSuggestions = useCallback((text) => {
      const suggestions = [];

      if (/[A-Z]{2,}/.test(text)) {
        suggestions.push('Found uppercase - will add emphasis');
      }

      if (/!/.test(text)) {
        suggestions.push('Exclamation mark - will raise pitch');
      }

      if (/\?/.test(text)) {
        suggestions.push('Question mark - will adjust intonation');
      }

      if (/\.{2,}|…/.test(text)) {
        suggestions.push('Ellipsis - will slow down');
      }

      const emotion = detectEmotionFromText(text);
      if (emotion !== VOICE_EMOTIONS.NEUTRAL) {
        suggestions.push(`Detected emotion: ${emotion.label}`);
      }

      return suggestions;
    }, []);

    // Load voices on mount
    useEffect(() => {
      if (!synthRef.current) return;

      setIsLoading(true);

      if (synthRef.current.getVoices().length > 0) {
        reloadVoices();
      } else {
        const handleVoicesChanged = () => {
          reloadVoices();
        };

        synthRef.current.addEventListener('voiceschanged', handleVoicesChanged);

        const timeoutId = setTimeout(() => {
          if (!voicesLoadedRef.current) {
            reloadVoices();
          }
        }, 2000);

        return () => {
          clearTimeout(timeoutId);
          if (synthRef.current) {
            synthRef.current.removeEventListener('voiceschanged', handleVoicesChanged);
          }
        };
      }
    }, [reloadVoices]);

    // Setup cache cleanup on unmount
    useEffect(() => {
      return () => {
        clearVoiceCache();
        cancelAllSpeech();
        if (cacheTimerRef.current) {
          clearTimeout(cacheTimerRef.current);
        }
      };
    }, [clearVoiceCache, cancelAllSpeech]);

    return {
      // Voices & Access
      allVoices,
      getSpeakerVoice,
      synthRef,
      
      // Loading & Errors
      isLoading,
      error,
      reloadVoices,
      
      // Speech Control
      pauseAllSpeech,
      resumeSpeech,
      cancelAllSpeech,
      
      // Voice Warmup
      warmupVoice,
      warmupVoices,
      
      // Performance & Optimization
      getPerformanceLevel,
      autoOptimizeSettings,
      
      // Metrics & Tracking
      getVoiceMetrics,
      trackSpeechAttempt,
      resetMetrics,
      
      // Error Recovery
      speakWithRetry,
      
      // Cache Management
      clearVoiceCache,
      getVoiceCacheSize: () => VOICE_CACHE.size,
      getWarmedUpVoicesCount: () => VOICE_WARMUP_CACHE.size,
      
      // ===== VOICE EXPRESSION =====
      enableExpression,
      setEnableExpression,
      globalEmotion,
      setGlobalEmotion,
      
      // Expression Functions
      applyVoiceExpression,
      createExpressiveUtterance,
      extractEmotionFromText,
      
      // Expression Utilities
      getAvailableEmotions,
      analyzeSuggestions,
      
      // Expression Constants
      VOICE_EMOTIONS
    };
  };
</file>

<file path="src/components/sections/InstructionsSection.jsx">
import React, { memo } from 'react';
import { BookOpen, Info, Zap } from 'lucide-react';
// Giả định các component này đã được tối ưu hóa
import { CollapsibleSection } from '../common/CollapsibleSection'; 
import { InfoCard } from '../common/InfoCard'; 

// Sử dụng memo để tránh re-render không cần thiết nếu props không đổi
export const InstructionsSection = memo(({ 
  isOpen, 
  onToggle, 
  isSignedIn, 
  authProvider 
}) => {
  
  // 1. Tối ưu hóa dữ liệu: Trực quan hóa thông tin đăng nhập
  const authStatus = isSignedIn 
    ? {
      text: `✓ Đã đăng nhập. Tiến độ được lưu tự động! (Provider: ${authProvider === 'clerk' ? 'Clerk' : 'Firebase'})`,
      className: "text-green-700 font-bold",
    }
    : {
      text: "Đăng nhập để lưu tiến độ học tập và theo dõi thành tích.",
      className: "text-red-600 font-bold",
    };

  const instructionItems = [
    { key: "1", label: "Navbar:", detail: "Chuyển đổi giữa Listening, Reading, Ngữ Pháp, Từ Vựng" },
    { key: "2", label: "Listening:", detail: "Chọn giọng nam/nữ, điều chỉnh tốc độ, nhấn Play để nghe" },
    { key: "3", label: "Reading:", detail: "Đọc đoạn văn và chọn đáp án phù hợp" },
    { key: "4", label: "Full Exam:", detail: "Thi thử toàn bộ bài thi với timer tự động" },
    { key: "5", label: "", detail: authStatus.text, className: authStatus.className },
  ];

  const importantNotes = [
    { key: "1", label: "Listening:", detail: "Dùng Chrome/Edge cho trải nghiệm tốt nhất" },
    { key: "2", label: "Chấm điểm:", detail: "Listening 5đ/câu, Reading 2.5đ/câu" },
    { key: "3", label: "Tự động lưu:", detail: "Tiến độ được lưu sau mỗi lần hoàn thành bài tập khi đã đăng nhập" },
    { key: "4", label: "Full Exam:", detail: "Tổng 90 phút. Tự động chuyển section sau 30/60 phút" }
  ];

  // Hàm chuyển đổi data thành JSX (sử dụng list/table đơn giản thay vì chỉ là span)
  const renderItems = (items) => {
    return items.map(item => (
      <li key={item.key} className={`text-gray-700 text-sm py-1 border-b border-gray-100 last:border-b-0 ${item.className || ''}`}>
        {item.label && <strong className="text-gray-800 mr-1">{item.label}</strong>}
        {item.detail}
      </li>
    ));
  };

  // --- Thay thế InfoCard bằng cấu trúc đã tối ưu (nếu không thể chỉnh sửa InfoCard) ---
  // Nếu InfoCard đã tối ưu, ta vẫn gọi nó. Tôi sẽ giả định InfoCard được tối ưu.
  
  return (
    // Thêm một container nhẹ nhàng, mượt mà cho toàn bộ section
    <div className="space-y-4 md:space-y-6"> 
      {/* 1. Hướng dẫn sử dụng (Collapsible) */}
      <CollapsibleSection
        title="Hướng dẫn sử dụng"
        icon={BookOpen}
        iconColor="text-blue-500" // Thêm màu cho icon để trực quan hơn
        bgColor="bg-blue-50" // Thêm màu nền nhẹ nhàng
        isOpen={isOpen}
        onToggle={onToggle}
      >
        <div className="p-4 bg-white border border-blue-200 rounded-lg shadow-inner">
          <ul className="list-none p-0 m-0">
            {renderItems(instructionItems)}
          </ul>
        </div>
      </CollapsibleSection>

      {/* 2. Lưu ý quan trọng (Luôn mở) */}
      {/* Sử dụng lại InfoCard nhưng với style trực quan hơn */}
      <div className="bg-orange-50 border-2 border-orange-300 rounded-xl p-4 md:p-6 shadow-lg transition duration-300 hover:shadow-xl">
        <div className="flex items-start gap-4 mb-4 border-b pb-3 border-orange-200">
          <Zap className="w-6 h-6 text-orange-600 flex-shrink-0 mt-0.5" />
          <h3 className="text-xl font-bold text-orange-800">Lưu ý quan trọng</h3>
        </div>
        
        <ul className="list-disc list-inside space-y-2 pl-2">
          {importantNotes.map(item => (
            <li key={item.key} className="text-sm text-gray-700">
              <strong className="text-orange-700 mr-1">{item.label}</strong>
              {item.detail}
            </li>
          ))}
        </ul>
      </div>
      
    </div>
  );
});

export default InstructionsSection;
</file>

<file path="src/components/styles/FullExamMode.css">
/* FullExamMode.css */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

* {
  box-sizing: border-box;
}

.exam-container {
  font-family: 'Inter', sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
  min-height: 100vh;
}

/* Setup Screen Styles */
.exam-header {
  background: linear-gradient(135deg, #d97706 0%, #f59e0b 50%, #fbbf24 100%);
  border-radius: 1.5rem;
  padding: 2rem;
  text-align: center;
  color: white;
  margin-bottom: 2rem;
  position: relative;
  overflow: hidden;
}

.exam-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
  opacity: 0.3;
}

.exam-title {
  font-size: 2.5rem;
  font-weight: 900;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.exam-subtitle {
  font-size: 1.25rem;
  opacity: 0.9;
  margin-bottom: 0.5rem;
}

.user-greeting {
  font-size: 0.875rem;
  opacity: 0.8;
  background: rgba(255, 255, 255, 0.2);
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  display: inline-block;
  margin-top: 0.5rem;
}

/* Exam Selection Card */
.exam-selection-card {
  background: white;
  border-radius: 1.5rem;
  border: 2px solid #fcd34d;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 10px 25px -5px rgba(251, 191, 36, 0.1);
  transition: all 0.3s ease;
}

.exam-selection-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 20px 40px -10px rgba(251, 191, 36, 0.2);
}

.selection-header {
  display: flex;
  align-items: center;
  margin-bottom: 1.5rem;
}

.selection-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  background: linear-gradient(135deg, #f59e0b, #d97706);
  border-radius: 0.75rem;
  margin-right: 1rem;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
}

.selection-icon .icon {
  width: 1.5rem;
  height: 1.5rem;
  color: white;
}

.selection-title {
  font-size: 1.875rem;
  font-weight: 800;
  background: linear-gradient(135deg, #d97706, #b45309);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.selection-container {
  position: relative;
  width: 100%;
  margin-bottom: 1rem;
}

.exam-select {
  width: 100;
  padding: 1rem 1.25rem;
  border-radius: 0.75rem;
  font-weight: 600;
  color: #1f2937;
  border: 2px solid #e5e7eb;
  background: white;
  appearance: none;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.exam-select:focus {
  outline: none;
  border-color: #f59e0b;
  box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.1);
}

.exam-select:hover {
  border-color: #fbbf24;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.placeholder {
  color: #9ca3af;
}

.exam-option {
  font-weight: 500;
  padding: 0.75rem;
}

.select-arrow {
  pointer-events: none;
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: #f59e0b;
  transition: transform 0.3s ease;
}

.selection-container:hover .select-arrow {
  transform: translateY(-50%) scale(1.1);
}

.arrow-icon {
  width: 1.25rem;
  height: 1.25rem;
}

.selected-exam {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #fffbeb;
  border: 1px solid #fcd34d;
  border-radius: 0.75rem;
  padding: 1rem 1.5rem;
  animation: fade-in 0.5s ease-out;
}

.selected-indicator {
  display: flex;
  align-items: center;
}

.pulse-dot {
  width: 0.5rem;
  height: 0.5rem;
  background: #f59e0b;
  border-radius: 50%;
  margin-right: 0.5rem;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.1);
  }
}

.selected-label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #6b7280;
}

.exam-name {
  font-weight: 700;
  color: #b45309;
  background: #fef3c7;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  display: flex;
  align-items: center;
}

.exam-icon {
  width: 1rem;
  height: 1rem;
  margin-right: 0.5rem;
}

/* Exam Sections */
.exam-sections {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.section-card {
  background: white;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.section-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
}

.exam-card-listening {
  border-color: #3b82f6;
  box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
}

.exam-card-reading {
  border-color: #10b981;
  box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.1);
}

.section-header {
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
}

.section-icon {
  width: 1.75rem;
  height: 1.75rem;
  margin-right: 0.75rem;
}

.exam-card-listening .section-icon {
  color: #3b82f6;
}

.exam-card-reading .section-icon {
  color: #10b981;
}

.section-title {
  font-size: 1.25rem;
  font-weight: 700;
}

.exam-card-listening .section-title {
  color: #1e40af;
}

.exam-card-reading .section-title {
  color: #065f46;
}

.section-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

@media (min-width: 768px) {
  .section-stats {
    grid-template-columns: repeat(4, 1fr);
  }
}

.stat-item {
  background: #f8fafc;
  border-radius: 0.5rem;
  padding: 1rem;
  text-align: center;
  border: 1px solid #e2e8f0;
}

.exam-card-listening .stat-item {
  background: #dbeafe;
  border-color: #bfdbfe;
}

.exam-card-reading .stat-item {
  background: #d1fae5;
  border-color: #a7f3d0;
}

.stat-value {
  font-size: 1.5rem;
  font-weight: 900;
  margin-bottom: 0.25rem;
}

.exam-card-listening .stat-value {
  color: #1d4ed8;
}

.exam-card-reading .stat-value {
  color: #047857;
}

.stat-label {
  font-size: 0.75rem;
  color: #6b7280;
  font-weight: 500;
}

/* Exam Notes */
.exam-notes {
  background: #fffbeb;
  border: 2px solid #fcd34d;
  border-radius: 1rem;
  padding: 1.5rem;
}

.notes-title {
  font-weight: 700;
  color: #b45309;
  margin-bottom: 0.75rem;
  font-size: 1.125rem;
}

.notes-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.notes-list li {
  font-size: 0.875rem;
  color: #6b7280;
  padding-left: 0;
}

/* Buttons */
.exam-btn-primary {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  color: white;
  font-weight: 800;
  border: none;
  border-radius: 0.75rem;
  padding: 1.25rem 2rem;
  font-size: 1.125rem;
  box-shadow: 0 4px 15px -3px rgba(245, 158, 11, 0.3);
  transition: all 0.3s ease;
  cursor: pointer;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.exam-btn-primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px -5px rgba(245, 158, 11, 0.5);
  background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
}

.exam-btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.start-exam-btn {
  margin-top: 1rem;
}

.btn-icon {
  width: 1.25rem;
  height: 1.25rem;
  margin-right: 0.5rem;
}

/* Exam Mode Styles */
.exam-mode-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.exam-header-sticky {
  background: white;
  border-radius: 1rem;
  border: 2px solid #fcd34d;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  position: sticky;
  top: 1rem;
  z-index: 40;
}

.header-content {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 1rem;
  gap: 1rem;
}

.header-info {
  flex: 1;
  min-width: 0;
}

.section-header {
  font-size: 1.25rem;
  font-weight: 700;
  color: #1f2937;
  margin-bottom: 0.25rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.part-info {
  font-size: 0.875rem;
  color: #6b7280;
}

.auto-save-indicator {
  color: #059669;
  margin-left: 0.5rem;
  font-weight: 600;
}

.timer-container {
  text-align: right;
  flex-shrink: 0;
}

.timer-display {
  font-size: 2rem;
  font-weight: 900;
  margin-bottom: 0.25rem;
}

.timer-normal {
  color: #f59e0b;
}

.timer-warning {
  color: #ef4444;
  animation: pulse 1s infinite;
}

.timer-label {
  font-size: 0.75rem;
  color: #6b7280;
}

.progress-section {
  margin-bottom: 1rem;
}

.progress-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.75rem;
  color: #6b7280;
  margin-bottom: 0.5rem;
}

.progress-bar-container {
  height: 0.5rem;
  background: #e5e7eb;
  border-radius: 9999px;
  overflow: hidden;
}

.exam-progress-bar {
  height: 100%;
  border-radius: 9999px;
  transition: width 0.5s ease-in-out, background-color 0.3s ease;
  background: linear-gradient(90deg, #f59e0b, #fbbf24);
  position: relative;
}

.exam-progress-bar.warning {
  background: linear-gradient(90deg, #ef4444, #f87171);
}

.exam-progress-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

.exam-controls {
  display: flex;
  gap: 0.5rem;
}

.control-btn {
  padding: 0.5rem 1rem;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 0.5rem;
  font-weight: 600;
  font-size: 0.875rem;
  transition: all 0.2s ease;
  cursor: pointer;
  display: flex;
  align-items: center;
}

.control-btn:hover {
  background: #e5e7eb;
  border-color: #9ca3af;
}

.control-icon {
  width: 1rem;
  height: 1rem;
  margin-right: 0.25rem;
}

/* Alerts */
.warning-alert,
.error-alert {
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  animation: fade-in 0.3s ease-out;
}

.warning-alert {
  background: #fef2f2;
  border: 2px solid #fecaca;
}

.error-alert {
  background: #fffbeb;
  border: 2px solid #fcd34d;
}

.warning-icon,
.error-icon {
  width: 1.25rem;
  height: 1.25rem;
  flex-shrink: 0;
}

.warning-icon {
  color: #dc2626;
}

.error-icon {
  color: #d97706;
}

.warning-text,
.error-text {
  font-weight: 700;
  font-size: 0.875rem;
}

.warning-text {
  color: #dc2626;
}

.error-text {
  color: #92400e;
}

/* Part Navigation */
.part-navigation {
  background: linear-gradient(135deg, #fef3c7, #fde68a);
  border-radius: 1rem;
  border: 2px solid #f59e0b;
  padding: 1.5rem;
}

.part-nav-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.part-nav-title {
  font-weight: 700;
  color: #92400e;
  font-size: 0.875rem;
}

.part-nav-counter {
  font-size: 0.75rem;
  font-weight: 600;
  color: #6b7280;
}

.part-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.5rem;
}

.part-nav-btn {
  padding: 0.75rem 0.5rem;
  border-radius: 0.5rem;
  font-weight: 700;
  font-size: 0.75rem;
  transition: all 0.3s ease;
  cursor: pointer;
  border: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.part-nav-btn:not(.current):not(.completed) {
  background: #fef3c7;
  color: #1f2937;
  border: 2px solid #fcd34d;
}

.part-nav-btn:not(.current):not(.completed):hover {
  background: #fde68a;
  border-color: #f59e0b;
  transform: scale(1.05);
}

.part-nav-btn.current {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: white;
  transform: scale(1.05);
  box-shadow: 0 4px 15px -3px rgba(245, 158, 11, 0.4);
  border: 2px solid #d97706;
}

.part-nav-btn.completed {
  background: #10b981;
  color: white;
  border: 2px solid #059669;
}

.part-nav-btn.completed:hover {
  background: #059669;
  transform: scale(1.05);
}

.part-number {
  font-size: 1rem;
  font-weight: 800;
  margin-bottom: 0.25rem;
}

.part-progress {
  font-size: 0.625rem;
  opacity: 0.9;
}

/* Questions Container */
.questions-container {
  background: white;
  border-radius: 1rem;
  border: 1px solid #e5e7eb;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.questions-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: #1f2937;
  margin-bottom: 1rem;
  padding-bottom: 0.75rem;
  border-bottom: 2px solid #fcd34d;
}

.part-description {
  font-size: 0.875rem;
  color: #6b7280;
  font-style: italic;
  background: #fffbeb;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  border-left: 4px solid #f59e0b;
  margin-bottom: 1rem;
}

.questions-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.no-questions {
  text-align: center;
  padding: 3rem 1rem;
  color: #6b7280;
}

.no-questions-icon {
  width: 2.5rem;
  height: 2.5rem;
  margin: 0 auto 1rem;
  opacity: 0.5;
}

.no-questions-text {
  font-weight: 600;
  font-size: 1rem;
}

/* Question Card */
.question-card {
  background: white;
  border-radius: 0.75rem;
  border-left: 4px solid #f59e0b;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.question-card:hover {
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
}

.question-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 1rem;
  gap: 1rem;
}

.question-title {
  font-size: 1rem;
  font-weight: 700;
  color: #1f2937;
  flex: 1;
  line-height: 1.5;
}

.question-number {
  color: #d97706;
}

.answered-badge {
  padding: 0.25rem 0.75rem;
  background: #d1fae5;
  color: #065f46;
  font-size: 0.75rem;
  font-weight: 700;
  border-radius: 9999px;
  white-space: nowrap;
  flex-shrink: 0;
}

.options-container {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.option-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 2px solid #e5e7eb;
  background: #f9fafb;
}

.option-card:hover {
  border-color: #fbbf24;
  background: #fef3c7;
}

.option-card.selected {
  background: #fef3c7;
  border-color: #f59e0b;
  box-shadow: 0 2px 10px -2px rgba(245, 158, 11, 0.3);
}

.option-indicator {
  width: 1.75rem;
  height: 1.75rem;
  border-radius: 50%;
  border: 2px solid #9ca3af;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.75rem;
  color: #6b7280;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.option-indicator.selected {
  background: #f59e0b;
  border-color: #d97706;
  color: white;
}

.option-text {
  font-size: 0.875rem;
  color: #374151;
  flex: 1;
  line-height: 1.4;
}

.option-text.selected {
  color: #1f2937;
  font-weight: 600;
}

.option-input {
  display: none;
}

.no-options {
  font-size: 0.875rem;
  color: #6b7280;
  font-style: italic;
  text-align: center;
  padding: 1rem;
}

/* Navigation Buttons */
.navigation-buttons {
  display: flex;
  gap: 0.75rem;
  padding-bottom: 1rem;
}

.nav-btn {
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  font-weight: 600;
  font-size: 0.875rem;
  transition: all 0.3s ease;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
}

.prev-btn {
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
}

.prev-btn:hover:not(:disabled) {
  background: #e5e7eb;
  border-color: #9ca3af;
}

.prev-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.next-btn {
  flex: 1;
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  color: white;
}

.next-btn:hover {
  background: linear-gradient(135deg, #1d4ed8, #1e40af);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

.complete-btn {
  flex: 1;
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
}

.complete-btn:hover {
  background: linear-gradient(135deg, #059669, #047857);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.nav-icon {
  width: 1rem;
  height: 1rem;
  margin-right: 0.25rem;
}

/* Results Screen */
.results-container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.results-header {
  border-radius: 1.5rem;
  padding: 2rem;
  text-align: center;
  color: white;
  position: relative;
  overflow: hidden;
}

.performance-excellent {
  background: linear-gradient(135deg, #10b981, #059669);
}

.performance-good {
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
}

.performance-average {
  background: linear-gradient(135deg, #f59e0b, #d97706);
}

.performance-fair {
  background: linear-gradient(135deg, #f59e0b, #d97706);
}

.performance-poor {
  background: linear-gradient(135deg, #f59e0b, #d97706);
}

.performance-fail {
  background: linear-gradient(135deg, #ef4444, #dc2626);
}

.trophy-icon {
  width: 5rem;
  height: 5rem;
  margin: 0 auto 1rem;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.results-title {
  font-size: 2.5rem;
  font-weight: 900;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.results-subtitle {
  font-size: 1.25rem;
  opacity: 0.9;
  margin-bottom: 1rem;
}

.performance-badge {
  display: inline-block;
  padding: 0.5rem 1.5rem;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 9999px;
  border: 2px solid rgba(255, 255, 255, 0.5);
  margin-bottom: 1rem;
}

.performance-text {
  font-weight: 700;
  font-size: 0.875rem;
}

.performance-level {
  font-size: 1.125rem;
}

.save-status {
  font-size: 0.875rem;
  font-weight: 600;
  background: rgba(255, 255, 255, 0.2);
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  display: inline-block;
}

/* Score Cards */
.score-cards {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

@media (min-width: 768px) {
  .score-cards {
    grid-template-columns: repeat(3, 1fr);
  }
}

.score-card {
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  text-align: center;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  border: 2px solid;
}

.score-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
}

.listening-card {
  border-color: #93c5fd;
}

.reading-card {
  border-color: #a7f3d0;
}

.average-card {
  border-color: #fcd34d;
}

.score-icon {
  width: 3rem;
  height: 3rem;
  margin: 0 auto 1rem;
}

.listening-card .score-icon {
  color: #3b82f6;
}

.reading-card .score-icon {
  color: #10b981;
}

.average-card .score-icon {
  color: #f59e0b;
}

.score-label {
  font-weight: 600;
  color: #6b7280;
  margin-bottom: 1rem;
  font-size: 0.875rem;
}

.score-value {
  font-size: 3rem;
  font-weight: 900;
  margin-bottom: 0.5rem;
}

.listening-card .score-value {
  color: #1d4ed8;
}

.reading-card .score-value {
  color: #047857;
}

.average-value {
  font-size: 3rem;
  font-weight: 900;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, #d97706, #b45309);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.score-detail {
  font-size: 0.875rem;
  color: #6b7280;
}

/* Results Progress */
.results-progress {
  background: white;
  border-radius: 1rem;
  border: 2px solid #e5e7eb;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.progress-title {
  font-size: 1.125rem;
  font-weight: 700;
  color: #1f2937;
}

.progress-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #6b7280;
}

.progress-bar-background {
  background: #e5e7eb;
  border-radius: 9999px;
  height: 1.5rem;
  overflow: hidden;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

.results-progress-bar {
  height: 100%;
  border-radius: 9999px;
  transition: width 1s ease-out;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 0.75rem;
  position: relative;
}

.progress-percent {
  color: white;
  font-size: 0.75rem;
  font-weight: 700;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Detailed Results */
.detailed-results {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

@media (min-width: 1024px) {
  .detailed-results {
    grid-template-columns: 1fr 1fr;
  }
}

.section-results {
  background: white;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  border: 2px solid;
}

.listening-results {
  border-color: #93c5fd;
}

.reading-results {
  border-color: #a7f3d0;
}

.section-results-title {
  font-size: 1.125rem;
  font-weight: 700;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.listening-results .section-results-title {
  color: #1e40af;
}

.reading-results .section-results-title {
  color: #065f46;
}

.section-icon {
  width: 1.25rem;
  height: 1.25rem;
}

.results-stats {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.result-stat {
  display: flex;
  justify-content: space-between;
  padding: 0.5rem;
  background: #f8fafc;
  border-radius: 0.5rem;
  font-size: 0.875rem;
}

.listening-results .result-stat {
  background: #dbeafe;
}

.reading-results .result-stat {
  background: #d1fae5;
}

.stat-value {
  font-weight: 700;
}

.listening-results .stat-value {
  color: #1d4ed8;
}

.reading-results .stat-value {
  color: #047857;
}

.part-breakdown {
  background: #f8fafc;
  border-radius: 0.75rem;
  padding: 1rem;
  border: 1px solid #e2e8f0;
}

.listening-results .part-breakdown {
  background: #dbeafe;
  border-color: #bfdbfe;
}

.reading-results .part-breakdown {
  background: #d1fae5;
  border-color: #a7f3d0;
}

.breakdown-title {
  font-weight: 700;
  font-size: 0.75rem;
  margin-bottom: 0.75rem;
}

.listening-results .breakdown-title {
  color: #1e40af;
}

.reading-results .breakdown-title {
  color: #065f46;
}

.parts-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.375rem;
}

.part-result {
  background: white;
  border-radius: 0.5rem;
  padding: 0.75rem 0.5rem;
  text-align: center;
  border: 1px solid #e2e8f0;
}

.listening-results .part-result {
  border-color: #93c5fd;
}

.reading-results .part-result {
  border-color: #a7f3d0;
}

.part-name {
  font-weight: 700;
  font-size: 0.75rem;
  color: #6b7280;
  margin-bottom: 0.25rem;
}

.part-score {
  font-size: 1.125rem;
  font-weight: 800;
  margin-bottom: 0.125rem;
}

.listening-results .part-score {
  color: #3b82f6;
}

.reading-results .part-score {
  color: #10b981;
}

.part-total {
  font-size: 0.625rem;
  color: #9ca3af;
}

/* Feedback */
.feedback {
  background: #fffbeb;
  border: 2px solid #fcd34d;
  border-radius: 1rem;
  padding: 1.5rem;
}

.feedback-title {
  font-size: 1.125rem;
  font-weight: 700;
  color: #b45309;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.feedback-icon {
  width: 1.25rem;
  height: 1.25rem;
}

.feedback-content {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.feedback-content p {
  font-size: 0.875rem;
  color: #6b7280;
  line-height: 1.5;
}

/* Answer Review Sections */
.answer-review-section {
  background: white;
  border-radius: 1rem;
  border: 2px solid;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.listening-review {
  border-color: #93c5fd;
}

.reading-review {
  border-color: #a7f3d0;
}

.review-title {
  font-size: 1.5rem;
  font-weight: 900;
  margin-bottom: 1.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 4px solid;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.listening-review .review-title {
  color: #1e40af;
  border-bottom-color: #3b82f6;
}

.reading-review .review-title {
  color: #065f46;
  border-bottom-color: #10b981;
}

.review-icon {
  width: 1.75rem;
  height: 1.75rem;
}

/* Answer Review Container */
.answer-review-container {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.explanation-toggle {
  display: flex;
  justify-content: center;
}

.toggle-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: #4f46e5;
  color: white;
  border: none;
  border-radius: 0.75rem;
  font-weight: 700;
  box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
  transition: all 0.3s ease;
  cursor: pointer;
}

.toggle-btn:hover {
  background: #4338ca;
  box-shadow: 0 6px 20px -2px rgba(79, 70, 229, 0.4);
  transform: translateY(-1px);
}

.toggle-icon {
  width: 1.25rem;
  height: 1.25rem;
}

.answers-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.answer-item {
  padding: 1.25rem;
  border-radius: 0.75rem;
  border: 2px solid;
  transition: all 0.3s ease;
}

.answer-item:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

.answer-item.correct {
  background: linear-gradient(135deg, #d1fae5, #a7f3d0);
  border-color: #10b981;
}

.answer-item.incorrect {
  background: linear-gradient(135deg, #fecaca, #fca5a5);
  border-color: #ef4444;
}

.answer-header {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.status-icon {
  padding: 0.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.status-icon.correct {
  background: #10b981;
}

.status-icon.incorrect {
  background: #ef4444;
}

.status-icon .icon {
  width: 1.5rem;
  height: 1.5rem;
  color: white;
}

.answer-info {
  flex: 1;
}

.question-meta {
  font-size: 0.875rem;
  font-weight: 600;
  color: #6b7280;
  margin-bottom: 0.25rem;
}

.question-text {
  font-weight: 700;
  color: #1f2937;
  font-size: 1.125rem;
  line-height: 1.4;
}

.answer-details {
  margin-left: 3.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.answer-comparison {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.answer-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: #6b7280;
}

.user-answer,
.correct-answer {
  font-weight: 700;
  padding: 0.25rem 0.75rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
}

.user-answer.correct {
  background: #d1fae5;
  color: #065f46;
}

.user-answer.incorrect {
  background: #fecaca;
  color: #dc2626;
}

.correct-answer {
  background: #d1fae5;
  color: #065f46;
}

.explanation {
  margin-top: 0.75rem;
  padding: 1rem;
  background: #dbeafe;
  border-left: 4px solid #3b82f6;
  border-radius: 0.5rem;
}

.explanation-title {
  font-size: 0.875rem;
  font-weight: 700;
  color: #1e40af;
  margin-bottom: 0.25rem;
}

.explanation-text {
  font-size: 0.875rem;
  color: #374151;
  line-height: 1.5;
}

/* Action Buttons */
.action-buttons {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.75rem;
  padding-bottom: 1rem;
}

@media (min-width: 640px) {
  .action-buttons {
    grid-template-columns: 1fr 1fr;
  }
}

.action-btn {
  padding: 1rem 1.5rem;
  border-radius: 0.75rem;
  font-weight: 700;
  font-size: 0.875rem;
  transition: all 0.3s ease;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

@media (min-width: 768px) {
  .action-btn {
    font-size: 1rem;
    padding: 1.25rem 2rem;
  }
}

.retry-btn {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: white;
}

.retry-btn:hover {
  background: linear-gradient(135deg, #d97706, #b45309);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px -5px rgba(245, 158, 11, 0.4);
}

.back-btn {
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  color: white;
}

.back-btn:hover {
  background: linear-gradient(135deg, #1d4ed8, #1e40af);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px -5px rgba(59, 130, 246, 0.4);
}

/* Motivational Message */
.motivational-message {
  border-radius: 1rem;
  border: 2px solid;
  padding: 1.5rem;
  text-align: center;
}

.motivational-message.success {
  background: linear-gradient(135deg, #d1fae5, #a7f3d0);
  border-color: #10b981;
}

.motivational-message.encourage {
  background: linear-gradient(135deg, #fed7aa, #fdba74);
  border-color: #f59e0b;
}

.message-text {
  font-size: 1.125rem;
  font-weight: 700;
  color: #1f2937;
  margin-bottom: 0.5rem;
  line-height: 1.4;
}

.message-subtext {
  font-size: 0.875rem;
  color: #6b7280;
  line-height: 1.5;
}

/* Animations */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out;
}

/* Responsive Design */
@media (max-width: 768px) {
  .exam-container,
  .exam-mode-container,
  .results-container {
    padding: 0.5rem;
  }
  
  .exam-title {
    font-size: 2rem;
  }
  
  .exam-subtitle {
    font-size: 1rem;
  }
  
  .exam-selection-card {
    padding: 1.5rem;
  }
  
  .selection-title {
    font-size: 1.5rem;
  }
  
  .results-title {
    font-size: 2rem;
  }
  
  .score-value,
  .average-value {
    font-size: 2.5rem;
  }
  
  .header-content {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .timer-container {
    text-align: left;
  }
  
  .answer-details {
    margin-left: 0;
  }
  
  .answer-header {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .status-icon {
    align-self: flex-start;
  }
}

@media (max-width: 480px) {
  .exam-header {
    padding: 1.5rem 1rem;
  }
  
  .exam-title {
    font-size: 1.75rem;
  }
  
  .section-stats {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .part-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .navigation-buttons {
    flex-direction: column;
  }
  
  .action-buttons {
    grid-template-columns: 1fr;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  .exam-card,
  .section-card,
  .question-card,
  .score-card {
    border-width: 3px;
  }
  
  .option-card.selected {
    border-width: 3px;
  }
  
  .exam-btn-primary,
  .action-btn {
    border: 2px solid;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .exam-progress-bar::after,
  .pulse-dot {
    animation: none;
  }
}

/* Print Styles */
@media print {
  .exam-btn-primary,
  .exam-btn-secondary,
  .control-btn,
  .nav-btn,
  .action-btn,
  .toggle-btn,
  .part-navigation,
  .exam-controls {
    display: none;
  }
  
  .exam-card,
  .section-card,
  .question-card,
  .score-card {
    box-shadow: none;
    border: 1px solid #d1d5db;
    break-inside: avoid;
  }
  
  .exam-container,
  .exam-mode-container,
  .results-container {
    padding: 0;
  }
}
/* ExamDropdown styles */
.exam-dropdown-container {
  position: relative;
  width: 100%;
  margin-bottom: 16px;
}

.exam-dropdown {
  position: relative;
}

.exam-dropdown-button {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 12px 16px;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 500;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.exam-dropdown-button:hover {
  border-color: #3b82f6;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
}

.exam-dropdown-button:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.exam-dropdown-button-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

.exam-dropdown-list {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  width: 100%;
  background: white;
  border-radius: 8px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  border: 1px solid #e5e7eb;
  z-index: 1000;
  max-height: 300px;
  overflow-y: auto;
}

.exam-dropdown-list::-webkit-scrollbar {
  width: 6px;
}

.exam-dropdown-list::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.exam-dropdown-list::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

.exam-dropdown-item {
  padding: 12px 16px;
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid #f3f4f6;
}

.exam-dropdown-item:last-child {
  border-bottom: none;
}

.exam-dropdown-item:hover {
  background-color: #f8fafc;
}

.exam-dropdown-item.selected {
  background-color: #eff6ff;
  color: #1d4ed8;
}

/* Dropdown animation */
.dropdown-enter {
  opacity: 0;
  transform: translateY(-10px) scale(0.95);
}

.dropdown-enter-active {
  opacity: 1;
  transform: translateY(0) scale(1);
  transition: opacity 200ms, transform 200ms;
}

.dropdown-exit {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.dropdown-exit-active {
  opacity: 0;
  transform: translateY(-10px) scale(0.95);
  transition: opacity 200ms, transform 200ms;
}

/* Selection card styles */
.selection-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.selection-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 10px;
  color: white;
}

.selection-title {
  font-size: 20px;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
}

.selected-exam {
  margin-top: 16px;
  padding: 12px 16px;
  background: #f0f9ff;
  border: 1px solid #bae6fd;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 12px;
  animation: fadeIn 0.3s ease;
}

.selected-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
}

.pulse-dot {
  width: 8px;
  height: 8px;
  background: #10b981;
  border-radius: 50%;
  animation: pulse 2s infinite;
}

.selected-label {
  font-size: 14px;
  font-weight: 500;
  color: #059669;
}

.exam-name {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 16px;
  font-weight: 500;
  color: #1f2937;
}

.exam-icon {
  width: 16px;
  height: 16px;
  color: #3b82f6;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.1);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.selection-container {
  position: relative;
  width: 100%;
  max-width: 500px;
  margin: 0 auto;
}

.exam-select-button {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 16px 20px;
  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  border: 2px solid #e2e8f0;
  border-radius: 16px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 56px;
  position: relative;
  overflow: hidden;
}

.exam-select-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(147, 51, 234, 0.05) 100%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.exam-select-button:hover {
  border-color: #3b82f6;
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15),
              0 2px 8px rgba(0, 0, 0, 0.05);
}

.exam-select-button:hover::before {
  opacity: 1;
}

.exam-select-button:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.12),
              0 4px 16px rgba(59, 130, 246, 0.2);
}

.exam-select-button:active {
  transform: translateY(0);
}

.placeholder-text {
  color: #94a3b8;
  font-weight: 400;
  letter-spacing: 0.01em;
}

.selected-text {
  color: #0f172a;
  font-weight: 600;
  letter-spacing: -0.01em;
}

.select-arrow {
  display: flex;
  align-items: center;
  color: #64748b;
  flex-shrink: 0;
  transition: color 0.3s ease;
}

.exam-select-button:hover .select-arrow {
  color: #3b82f6;
}

.arrow-icon {
  width: 22px;
  height: 22px;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.05));
}

.exam-dropdown-list {
  position: absolute;
  top: calc(100% + 12px);
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 16px;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12),
              0 4px 12px rgba(0, 0, 0, 0.08);
  max-height: 360px;
  overflow-y: auto;
  z-index: 50;
  padding: 8px;
  list-style: none;
  margin: 0;
  backdrop-filter: blur(10px);
  background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
}

.exam-option {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 15px;
  color: #334155;
  position: relative;
  overflow: hidden;
}

.exam-option::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(147, 51, 234, 0.08) 100%);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.exam-option:hover {
  background: linear-gradient(135deg, #f1f5f9 0%, #f8fafc 100%);
  transform: translateX(4px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.exam-option:hover::before {
  opacity: 1;
}

.exam-option.active {
  background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
  color: #2563eb;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.exam-option.active::before {
  opacity: 0;
}

.option-icon {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  color: #64748b;
  transition: all 0.2s ease;
}

.exam-option:hover .option-icon {
  color: #3b82f6;
  transform: scale(1.1);
}

.exam-option.active .option-icon {
  color: #2563eb;
  transform: scale(1.15);
  filter: drop-shadow(0 2px 4px rgba(37, 99, 235, 0.3));
}

.option-text {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.5;
  position: relative;
  z-index: 1;
}

.check-icon {
  color: #2563eb;
  font-weight: bold;
  font-size: 20px;
  flex-shrink: 0;
  filter: drop-shadow(0 2px 4px rgba(37, 99, 235, 0.3));
  animation: checkBounce 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes checkBounce {
  0% {
    transform: scale(0) rotate(-45deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.2) rotate(10deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

/* Mobile responsiveness */
@media (max-width: 640px) {
  .exam-select-button {
    padding: 14px 18px;
    font-size: 15px;
    min-height: 52px;
    border-radius: 14px;
  }
  
  .exam-dropdown-list {
    max-height: 300px;
    border-radius: 14px;
    padding: 6px;
  }
  
  .exam-option {
    padding: 12px 14px;
    font-size: 14px;
    border-radius: 10px;
    gap: 12px;
  }

  .option-icon {
    width: 18px;
    height: 18px;
  }

  .check-icon {
    font-size: 18px;
  }
}

/* Tablet */
@media (max-width: 768px) and (min-width: 641px) {
  .exam-select-button {
    padding: 15px 19px;
  }
  
  .exam-dropdown-list {
    max-height: 320px;
  }
}

/* Scrollbar styling - Modern */
.exam-dropdown-list::-webkit-scrollbar {
  width: 8px;
}

.exam-dropdown-list::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.02);
  border-radius: 10px;
  margin: 8px 0;
}

.exam-dropdown-list::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #cbd5e1 0%, #94a3b8 100%);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
  transition: background 0.3s ease;
}

.exam-dropdown-list::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #94a3b8 0%, #64748b 100%);
  background-clip: padding-box;
}

/* Firefox scrollbar */
.exam-dropdown-list {
  scrollbar-width: thin;
  scrollbar-color: #cbd5e1 rgba(0, 0, 0, 0.02);
}

/* Touch device optimization */
@media (hover: none) and (pointer: coarse) {
  .exam-option {
    padding: 16px 14px;
    min-height: 48px;
  }
  
  .exam-select-button {
    min-height: 54px;
  }
}

/* Dark mode support (optional) */
@media (prefers-color-scheme: dark) {
  .exam-select-button {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-color: #334155;
    color: #f1f5f9;
  }
  
  .exam-dropdown-list {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-color: #334155;
  }
  
  .exam-option {
    color: #e2e8f0;
  }
  
  .exam-option:hover {
    background: linear-gradient(135deg, #334155 0%, #1e293b 100%);
  }
  
  .exam-option.active {
    background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
    color: #93c5fd;
  }
}
</file>

<file path="src/components/styles/GrammarReview.css">
/* ===== GLOBAL RESET & BASE ===== */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* Container & Wrapper */
.grammar-container {
  width: 100%;
  min-height: 100vh;
  background: #fafafa;
  padding: 0.75rem;
}

.grammar-wrapper {
  max-width: 800px;
  margin: 0 auto;
  width: 100%;
}

/* ===== TYPOGRAPHY SYSTEM ===== */
/* Mobile-first: 14px base */
:root {
  --text-xs: 0.688rem;    /* 11px */
  --text-sm: 0.75rem;     /* 12px */
  --text-base: 0.813rem;  /* 13px */
  --text-md: 0.875rem;    /* 14px */
  --text-lg: 1rem;        /* 16px */
  --text-xl: 1.125rem;    /* 18px */
  --text-2xl: 1.25rem;    /* 20px */
  
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 0.75rem;
  --spacing-lg: 1rem;
  --spacing-xl: 1.5rem;
  
  --radius-sm: 0.5rem;
  --radius-md: 0.625rem;
  --radius-lg: 0.75rem;
  
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 2px 6px rgba(0, 0, 0, 0.06);
}

/* Tablet: 16px base */
@media (min-width: 640px) {
  :root {
    --text-xs: 0.75rem;     /* 12px */
    --text-sm: 0.813rem;    /* 13px */
    --text-base: 0.875rem;  /* 14px */
    --text-md: 0.938rem;    /* 15px */
    --text-lg: 1.063rem;    /* 17px */
    --text-xl: 1.25rem;     /* 20px */
    --text-2xl: 1.5rem;     /* 24px */
    
    --spacing-md: 1rem;
    --spacing-lg: 1.25rem;
    --spacing-xl: 2rem;
  }
}

/* Desktop: 17px base */
@media (min-width: 1024px) {
  :root {
    --text-xs: 0.813rem;    /* 13px */
    --text-sm: 0.875rem;    /* 14px */
    --text-base: 0.938rem;  /* 15px */
    --text-md: 1rem;        /* 16px */
    --text-lg: 1.125rem;    /* 18px */
    --text-xl: 1.375rem;    /* 22px */
    --text-2xl: 1.625rem;   /* 26px */
  }
}

/* ===== HEADER SECTION ===== */
.grammar-header {
  margin-bottom: var(--spacing-xl);
}

.grammar-header-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
}

.grammar-title {
  font-size: var(--text-2xl);
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
  letter-spacing: -0.02em;
}

.grammar-subtitle {
  color: #666;
  font-size: var(--text-base);
  font-weight: 400;
  line-height: 1.5;
  margin-top: var(--spacing-xs);
}

.grammar-progress-card {
  background: white;
  padding: var(--spacing-md) var(--spacing-lg);
  border-radius: var(--radius-md);
  border: 1px solid #e5e5e5;
  text-align: center;
  align-self: flex-start;
  box-shadow: var(--shadow-sm);
}

.grammar-progress-value {
  font-size: var(--text-xl);
  font-weight: 600;
  color: #f97316;
  line-height: 1;
}

.grammar-progress-label {
  color: #666;
  font-weight: 400;
  font-size: var(--text-sm);
  margin-top: var(--spacing-xs);
}

/* ===== LEVEL BUTTONS ===== */
.grammar-level-buttons {
  display: flex;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.grammar-level-btn {
  padding: var(--spacing-sm) var(--spacing-lg);
  border-radius: var(--radius-sm);
  font-weight: 500;
  font-size: var(--text-base);
  transition: all 0.2s ease;
  border: 1px solid #e0e0e0;
  background: white;
  color: #333;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
}

.grammar-level-btn:hover {
  border-color: #f97316;
  background: #fff7ed;
}

.grammar-level-btn.active {
  background: #f97316;
  color: white;
  border-color: #f97316;
}

/* ===== SEARCH SECTION ===== */
.grammar-search-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-xl);
}

.grammar-search-wrapper {
  position: relative;
  flex: 1;
}

.grammar-search-icon {
  position: absolute;
  left: var(--spacing-md);
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  width: 1rem;
  height: 1rem;
  pointer-events: none;
}

.grammar-search-input {
  width: 100%;
  padding: var(--spacing-md) var(--spacing-md) var(--spacing-md) 2.5rem;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  transition: all 0.2s ease;
  background: white;
  color: #333;
}

.grammar-search-input::placeholder {
  color: #999;
}

.grammar-search-input:focus {
  outline: none;
  border-color: #f97316;
  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.08);
}

/* ===== FILTER BUTTONS ===== */
.grammar-filter-buttons {
  display: flex;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.grammar-filter-btn {
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-sm);
  font-weight: 400;
  font-size: var(--text-sm);
  transition: all 0.2s ease;
  border: 1px solid #e0e0e0;
  background: white;
  color: #666;
  cursor: pointer;
  white-space: nowrap;
}

.grammar-filter-btn:hover {
  border-color: #ccc;
}

.grammar-filter-btn.active {
  background: #333;
  color: white;
  border-color: #333;
}

/* ===== TABS ===== */
.grammar-tabs-container {
  margin-bottom: var(--spacing-xl);
  border-bottom: 1px solid #e5e5e5;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}

.grammar-tabs-container::-webkit-scrollbar {
  display: none;
}

.grammar-tabs {
  display: flex;
  gap: 0;
  min-width: min-content;
}

.grammar-tab {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  border: none;
  background: none;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #666;
  font-weight: 400;
  font-size: var(--text-base);
  white-space: nowrap;
  position: relative;
  border-bottom: 2px solid transparent;
}

.grammar-tab:hover {
  color: #333;
}

.grammar-tab.active {
  color: #f97316;
  border-bottom-color: #f97316;
}

.grammar-tab-icon {
  font-size: var(--text-lg);
  flex-shrink: 0;
}

/* ===== TOPICS LIST ===== */
.grammar-topics-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.grammar-topic-card {
  background: white;
  border-radius: var(--radius-md);
  border: 1px solid #e5e5e5;
  overflow: hidden;
  transition: all 0.2s ease;
}

.grammar-topic-card:hover {
  border-color: #d0d0d0;
  box-shadow: var(--shadow-md);
}

.grammar-topic-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-lg);
  border: none;
  background: none;
  cursor: pointer;
  text-align: left;
  gap: var(--spacing-md);
  transition: background 0.2s ease;
}

.grammar-topic-btn:hover {
  background: #fafafa;
}

.grammar-topic-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  flex: 1;
  min-width: 0;
}

.grammar-topic-icon {
  font-size: var(--text-2xl);
  flex-shrink: 0;
  line-height: 1;
}

.grammar-topic-info {
  flex: 1;
  min-width: 0;
}

.grammar-topic-title {
  font-size: var(--text-lg);
  font-weight: 500;
  color: #1a1a1a;
  margin-bottom: var(--spacing-xs);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.grammar-topic-desc {
  font-size: var(--text-sm);
  color: #666;
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.grammar-topic-meta {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}

.grammar-difficulty-badge {
  padding: var(--spacing-xs) var(--spacing-sm);
  background: #f5f5f5;
  color: #666;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 500;
  white-space: nowrap;
}

.grammar-chevron {
  width: 1rem;
  height: 1rem;
  color: #999;
  flex-shrink: 0;
}

/* ===== CONTENT CARDS ===== */
.grammar-content-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

/* Mistake Cards */
.grammar-mistake-card {
  background: white;
  border-radius: var(--radius-md);
  border: 1px solid #e5e5e5;
  padding: var(--spacing-lg);
}

.grammar-mistake-content {
  display: flex;
  gap: var(--spacing-md);
}

.grammar-mistake-icon {
  width: 1.25rem;
  height: 1.25rem;
  color: #ef4444;
  flex-shrink: 0;
  margin-top: 0.125rem;
}

.grammar-mistake-body {
  flex: 1;
  min-width: 0;
}

.grammar-mistake-section {
  margin-bottom: var(--spacing-md);
}

.grammar-mistake-section:last-of-type {
  margin-bottom: var(--spacing-sm);
}

.grammar-mistake-heading {
  font-weight: 500;
  color: #1a1a1a;
  font-size: var(--text-sm);
  margin-bottom: var(--spacing-sm);
}

.grammar-example-wrong {
  background: #fef2f2;
  padding: var(--spacing-md);
  border-radius: var(--radius-sm);
  border: 1px solid #fee2e2;
  color: #dc2626;
  font-size: var(--text-base);
  word-wrap: break-word;
  line-height: 1.6;
}

.grammar-example-right {
  background: #f0fdf4;
  padding: var(--spacing-md);
  border-radius: var(--radius-sm);
  border: 1px solid #dcfce7;
  color: #16a34a;
  font-size: var(--text-base);
  word-wrap: break-word;
  line-height: 1.6;
}

.grammar-explanation {
  color: #4a4a4a;
  font-size: var(--text-base);
  line-height: 1.6;
}

.grammar-topic-badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: #f5f5f5;
  color: #666;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 500;
}

/* Tip Cards */
.grammar-tip-card {
  background: white;
  border-radius: var(--radius-md);
  border: 1px solid #e5e5e5;
  padding: var(--spacing-lg);
}

.grammar-tip-content {
  display: flex;
  gap: var(--spacing-md);
}

.grammar-tip-icon {
  width: 1.25rem;
  height: 1.25rem;
  color: #f59e0b;
  flex-shrink: 0;
  margin-top: 0.125rem;
}

.grammar-tip-body {
  flex: 1;
  min-width: 0;
}

.grammar-tip-title {
  font-size: var(--text-md);
  font-weight: 500;
  color: #1a1a1a;
  margin-bottom: var(--spacing-sm);
}

.grammar-tip-desc {
  color: #4a4a4a;
  font-size: var(--text-base);
  line-height: 1.6;
  margin-bottom: var(--spacing-md);
}

.grammar-tip-topics {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.grammar-tip-topics-label {
  font-size: var(--text-xs);
  color: #666;
  font-weight: 500;
}

.grammar-tip-topics-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
}

.grammar-related-badge {
  padding: var(--spacing-xs) var(--spacing-sm);
  background: #f5f5f5;
  color: #666;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 400;
  text-transform: capitalize;
}

/* Example Cards */
.grammar-example-card {
  background: white;
  border-radius: var(--radius-md);
  border: 1px solid #e5e5e5;
  padding: var(--spacing-lg);
}

.grammar-example-context {
  display: inline-block;
  background: #f5f5f5;
  color: #666;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 500;
  border: 1px solid #e0e0e0;
  margin-bottom: var(--spacing-md);
}

.grammar-example-section {
  margin-bottom: var(--spacing-md);
}

.grammar-example-label {
  color: #666;
  font-size: var(--text-sm);
  margin-bottom: var(--spacing-sm);
  font-weight: 500;
}

.grammar-example-text {
  background: #f9fafb;
  border-radius: var(--radius-sm);
  padding: var(--spacing-md);
  border: 1px solid #e5e5e5;
  color: #1a1a1a;
  font-family: 'Courier New', monospace;
  font-size: var(--text-base);
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 1.6;
}

.grammar-example-explanation {
  color: #4a4a4a;
  font-size: var(--text-base);
  line-height: 1.6;
}

.grammar-example-badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: #f5f5f5;
  color: #666;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 500;
}

/* Quiz Cards */
.grammar-quiz-card {
  background: white;
  border-radius: var(--radius-md);
  border: 1px solid #e5e5e5;
  padding: var(--spacing-lg);
}

.grammar-quiz-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.grammar-quiz-info {
  flex: 1;
  min-width: 0;
}

.grammar-quiz-title {
  font-size: var(--text-md);
  font-weight: 500;
  color: #1a1a1a;
  margin-bottom: var(--spacing-xs);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.grammar-quiz-meta {
  color: #666;
  font-size: var(--text-sm);
}

.grammar-quiz-difficulty {
  padding: var(--spacing-xs) var(--spacing-sm);
  background: #f5f5f5;
  color: #666;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 500;
  flex-shrink: 0;
}

.grammar-quiz-topics {
  background: #fafafa;
  border-radius: var(--radius-sm);
  padding: var(--spacing-md);
  border: 1px solid #e5e5e5;
  margin-bottom: var(--spacing-md);
}

.grammar-quiz-topics-label {
  color: #4a4a4a;
  font-size: var(--text-sm);
  font-weight: 500;
  margin-bottom: var(--spacing-sm);
  display: block;
}

.grammar-quiz-topics-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
}

.grammar-quiz-topic-badge {
  padding: var(--spacing-xs) var(--spacing-sm);
  background: white;
  color: #666;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 400;
}

.grammar-quiz-score {
  padding: var(--spacing-md);
  background: #fffbeb;
  border: 1px solid #fef3c7;
  border-radius: var(--radius-sm);
  color: #92400e;
  font-size: var(--text-sm);
  margin-bottom: var(--spacing-md);
}

.grammar-quiz-score-label {
  font-weight: 500;
}

.grammar-quiz-btn {
  width: 100%;
  padding: var(--spacing-md);
  background: #f97316;
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-weight: 500;
  font-size: var(--text-base);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  transition: all 0.2s ease;
}

.grammar-quiz-btn:hover {
  background: #ea580c;
}

.grammar-quiz-btn:active {
  transform: scale(0.98);
}

.grammar-quiz-btn-icon {
  width: 1rem;
  height: 1rem;
}

/* ===== BACK BUTTON ===== */
.grammar-back-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background: white;
  color: #666;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-sm);
  font-weight: 400;
  font-size: var(--text-base);
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: var(--spacing-lg);
}

.grammar-back-btn:hover {
  background: #fafafa;
  border-color: #ccc;
}

/* ===== NO RESULTS ===== */
.grammar-no-results {
  text-align: center;
  padding: var(--spacing-xl) var(--spacing-lg);
}

.grammar-no-results-icon {
  width: 2.5rem;
  height: 2.5rem;
  color: #ccc;
  margin: 0 auto var(--spacing-md);
}

.grammar-no-results-text {
  color: #666;
  font-weight: 400;
  font-size: var(--text-base);
}

/* ===== ANIMATIONS ===== */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.grammar-topic-page {
  animation: slideIn 0.3s ease;
}

/* ===== RESPONSIVE DESIGN ===== */
@media (min-width: 640px) {
  .grammar-container {
    padding: 1.5rem;
  }

  .grammar-search-section {
    flex-direction: row;
    align-items: center;
  }

  .grammar-header-content {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }

  .grammar-progress-card {
    align-self: auto;
  }
}

@media (min-width: 768px) {
  .grammar-container {
    padding: 2rem;
  }

  .grammar-wrapper {
    max-width: 900px;
  }
}

@media (min-width: 1024px) {
  .grammar-container {
    padding: 2.5rem;
  }

  .grammar-wrapper {
    max-width: 1000px;
  }
}

/* ===== TOUCH-FRIENDLY ===== */
@media (hover: none) and (pointer: coarse) {
  .grammar-topic-btn,
  .grammar-level-btn,
  .grammar-filter-btn,
  .grammar-tab,
  .grammar-quiz-btn,
  .grammar-back-btn {
    min-height: 44px;
  }
}

/* ===== FOCUS STYLES ===== */
button:focus-visible,
input:focus-visible {
  outline: 2px solid #f97316;
  outline-offset: 2px;
}

/* ===== SMOOTH SCROLLING ===== */
html {
  scroll-behavior: smooth;
}

/* ===== ACCESSIBILITY ===== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</file>

<file path="src/components/styles/GrammarTopicPage.css">
/* ============================================
   GRAMMAR TOPIC PAGE STYLES - OPTIMIZED
   ============================================ */

/* Core Animations */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes scaleIn {
  0% {
    transform: scale(0.95);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Base Styles */
html {
  scroll-behavior: smooth;
}

* {
  -webkit-tap-highlight-color: transparent;
}

/* Badges */
.grammar-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.875rem;
  border-radius: 1rem;
  font-size: 0.75rem;
  font-weight: 600;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  transition: transform 0.2s ease;
}

.grammar-badge:hover {
  transform: scale(1.05);
}

.badge-difficulty {
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: white;
}

.badge-streak {
  background: linear-gradient(135deg, #fb923c, #ec4899);
  color: white;
}

.badge-completion {
  background: linear-gradient(135deg, #4ade80, #10b981);
  color: white;
}

.badge-completed {
  background-color: #dcfce7;
  color: #15803d;
  border: 1px solid #86efac;
}

/* Lesson Card */
.lesson-card {
  background: white;
  border-radius: 0.875rem;
  padding: 1.25rem;
  border: 2px solid #e9d5ff;
  transition: all 0.25s ease;
  animation: slideIn 0.3s ease-out;
}

.lesson-card:hover {
  border-color: #c084fc;
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
}

.lesson-number {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #8b5cf6);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 1rem;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
  flex-shrink: 0;
}

/* Language Toggle */
.language-toggle-container {
  display: flex;
  background: #f3f4f6;
  border-radius: 0.75rem;
  padding: 0.375rem;
  margin-bottom: 1.25rem;
  gap: 0.375rem;
}

.language-toggle-button {
  flex: 1;
  padding: 0.625rem 1rem;
  border-radius: 0.5rem;
  font-size: 0.813rem;
  font-weight: 600;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.375rem;
  cursor: pointer;
  border: none;
  background: transparent;
  color: #6b7280;
  white-space: nowrap;
  min-height: 40px;
}

.language-toggle-button.active {
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: white;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.25);
}

.language-toggle-button:not(.active):hover {
  background-color: rgba(255, 255, 255, 0.8);
  color: #374151;
}

/* Content Area */
.content-area {
  background: linear-gradient(135deg, white, #f0f9ff, #faf5ff);
  padding: 1.25rem;
  border-radius: 0.75rem;
  border: 2px solid #dbeafe;
  margin-bottom: 1.5rem;
}

/* Example Cards */
.example-card {
  background: white;
  padding: 1.25rem;
  border-radius: 0.75rem;
  border: 2px solid #dbeafe;
  margin-bottom: 1rem;
  transition: all 0.25s ease;
}

.example-card:hover {
  border-color: #60a5fa;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.example-vietnamese {
  padding: 0.875rem;
  background: #f0fdf4;
  border-radius: 0.5rem;
  border: 1px solid #86efac;
  margin-top: 0.875rem;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* Exercise Card */
.exercise-card {
  background: white;
  border-radius: 0.875rem;
  padding: 1.25rem;
  border: 2px solid #fed7aa;
  margin-bottom: 1.5rem;
  animation: slideIn 0.3s ease-out;
}

.exercise-card:hover {
  border-color: #fb923c;
  box-shadow: 0 4px 12px rgba(251, 146, 60, 0.15);
}

.exercise-number {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  background: linear-gradient(135deg, #fb923c, #ec4899);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 1rem;
  box-shadow: 0 2px 8px rgba(251, 146, 60, 0.3);
  flex-shrink: 0;
}

.exercise-question {
  padding: 1rem;
  background: linear-gradient(135deg, #fef3c7, #fed7aa);
  border-radius: 0.625rem;
  border: 2px solid #fcd34d;
  margin-bottom: 1rem;
  font-size: 0.938rem;
  line-height: 1.6;
}

/* Exercise Options */
.exercise-option {
  display: flex;
  align-items: center;
  padding: 1rem;
  background: white;
  border-radius: 0.625rem;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 2px solid #e5e7eb;
  margin-bottom: 0.75rem;
}

.exercise-option:hover {
  background: #f0f9ff;
  border-color: #60a5fa;
}

.exercise-option input[type="radio"] {
  margin-right: 0.875rem;
  width: 1.125rem;
  height: 1.125rem;
  accent-color: #3b82f6;
  flex-shrink: 0;
  cursor: pointer;
}

.exercise-option label {
  cursor: pointer;
  font-size: 0.875rem;
  line-height: 1.5;
  flex: 1;
}

/* Exercise Feedback */
.exercise-feedback {
  margin-top: 0.875rem;
  padding: 1rem;
  border-radius: 0.625rem;
  font-size: 0.813rem;
  line-height: 1.5;
  border: 2px solid;
  animation: scaleIn 0.2s ease-out;
}

.exercise-feedback.correct {
  background-color: #f0fdf4;
  border-color: #86efac;
  color: #15803d;
}

.exercise-feedback.incorrect {
  background-color: #fef2f2;
  border-color: #fca5a5;
  color: #991b1b;
}

/* Hints Box */
.hints-box {
  margin-top: 0.875rem;
  padding: 1rem;
  background-color: #eff6ff;
  border-radius: 0.625rem;
  border: 2px solid #93c5fd;
  font-size: 0.813rem;
  line-height: 1.5;
}

/* Vocabulary Table */
.vocabulary-table {
  background: white;
  border-radius: 0.875rem;
  overflow: hidden;
  border: 2px solid #86efac;
  width: 100%;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.vocabulary-table thead {
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
}

.vocabulary-table th {
  padding: 0.875rem 1rem;
  text-align: left;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.vocabulary-table tbody tr {
  transition: background 0.2s ease;
  border-bottom: 1px solid #e5e7eb;
}

.vocabulary-table tbody tr:hover {
  background: #f0fdf4;
}

.vocabulary-table tbody tr:last-child {
  border-bottom: none;
}

.vocabulary-table td {
  padding: 1rem;
  font-size: 0.875rem;
}

.vocabulary-word {
  font-size: 0.938rem;
  font-weight: 600;
  color: #15803d;
  background-color: #dcfce7;
  padding: 0.375rem 0.625rem;
  border-radius: 0.375rem;
  display: inline-block;
  transition: background 0.2s ease;
}

.vocabulary-table tbody tr:hover .vocabulary-word {
  background-color: #bbf7d0;
}

.vocabulary-example {
  background-color: #f9fafb;
  color: #374151;
  padding: 0.5rem 0.625rem;
  border-radius: 0.375rem;
  font-size: 0.813rem;
  display: block;
  border: 1px solid #e5e7eb;
  font-family: 'Courier New', monospace;
  margin-top: 0.375rem;
  line-height: 1.4;
  word-break: break-word;
}

/* Section Headers */
.section-header {
  font-size: 1.375rem;
  font-weight: 700;
  margin-bottom: 1.25rem;
  text-align: center;
  padding: 1.125rem;
  border-radius: 0.875rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.625rem;
  color: white;
}

.section-header.lessons {
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
}

.section-header.exercises {
  background: linear-gradient(135deg, #fb923c, #ec4899);
}

.section-header.vocabulary {
  background: linear-gradient(135deg, #4ade80, #10b981);
}

/* Accordion */
.accordion-button {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  background: white;
  border-radius: 0.625rem;
  transition: all 0.2s ease;
  border: 2px solid #e5e7eb;
  cursor: pointer;
  font-size: 0.938rem;
  font-weight: 600;
  text-align: left;
  gap: 0.75rem;
  min-height: 48px;
}

.accordion-button:hover {
  background: #f0f9ff;
  border-color: #60a5fa;
}

.accordion-content {
  margin-top: 0.875rem;
  padding: 1.125rem;
  background: white;
  border-radius: 0.625rem;
  border: 2px solid #c084fc;
  animation: slideIn 0.3s ease-out;
}

/* Motivational Footer */
.motivational-footer {
  background: linear-gradient(135deg, #8b5cf6, #ec4899, #ef4444);
  border-radius: 0.875rem;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
  padding: 1.5rem;
  text-align: center;
  color: white;
  margin-top: 2rem;
}

.motivational-footer h3 {
  font-size: 1.125rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.footer-stats {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  font-size: 0.813rem;
  flex-wrap: wrap;
}

.footer-stat-item {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  background-color: rgba(255, 255, 255, 0.2);
  padding: 0.5rem 0.875rem;
  border-radius: 1rem;
  backdrop-filter: blur(10px);
}

/* Buttons */
.btn-complete {
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #4ade80, #10b981);
  color: white;
  border-radius: 0.625rem;
  transition: all 0.2s ease;
  font-weight: 600;
  font-size: 0.875rem;
  box-shadow: 0 2px 8px rgba(74, 222, 128, 0.3);
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  min-height: 44px;
}

.btn-complete:hover {
  background: linear-gradient(135deg, #22c55e, #059669);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(74, 222, 128, 0.4);
}

.btn-complete:active {
  transform: translateY(0);
}

.btn-submit {
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: white;
  border-radius: 0.625rem;
  transition: all 0.2s ease;
  font-weight: 600;
  font-size: 0.875rem;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  min-height: 44px;
}

.btn-submit:hover {
  background: linear-gradient(135deg, #2563eb, #7c3aed);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
}

.btn-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* Input Styles */
.exercise-input {
  width: 100%;
  padding: 0.875rem;
  border: 2px solid #d1d5db;
  border-radius: 0.625rem;
  font-size: 0.938rem;
  transition: all 0.2s ease;
  background: white;
}

.exercise-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.exercise-input::placeholder {
  color: #9ca3af;
}

/* Prose Styles */
.prose h2 {
  font-size: 1.25rem;
  font-weight: 700;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 0.875rem;
  margin-top: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.prose h3 {
  font-size: 1.063rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 0.625rem;
  margin-top: 1.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.prose p {
  color: #374151;
  line-height: 1.6;
  margin-bottom: 0.875rem;
  font-size: 0.938rem;
}

.prose ul {
  margin-bottom: 0.875rem;
  padding-left: 0;
}

.prose li {
  color: #374151;
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  margin-bottom: 0.625rem;
  font-size: 0.875rem;
  line-height: 1.5;
}

.prose strong {
  color: #1e40af;
  font-weight: 600;
  background-color: #dbeafe;
  padding: 0 0.25rem;
  border-radius: 0.25rem;
}

.prose code {
  background: linear-gradient(135deg, #f3e8ff, #fce7f3);
  color: #7c3aed;
  padding: 0.25rem 0.625rem;
  border-radius: 0.375rem;
  font-size: 0.813rem;
  font-family: 'Courier New', monospace;
  border: 1px solid #e9d5ff;
}

.prose blockquote {
  border-left: 3px solid #4ade80;
  background: #f0fdf4;
  padding: 1rem;
  font-style: italic;
  margin: 0.875rem 0;
  border-radius: 0 0.375rem 0.375rem 0;
  font-size: 0.875rem;
  line-height: 1.5;
  color: #15803d;
}

/* Confetti (simplified) */
.confetti-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 100;
}

.confetti-piece {
  position: absolute;
  width: 10px;
  height: 10px;
  animation: confetti 3s ease-out forwards;
}

@keyframes confetti {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

/* Progress Bar */
.progress-bar {
  height: 0.5rem;
  background: #e5e7eb;
  border-radius: 1rem;
  overflow: hidden;
  position: relative;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(135deg, #4ade80, #10b981);
  border-radius: 1rem;
  transition: width 0.3s ease;
  position: relative;
  overflow: hidden;
}

.progress-bar-shimmer {
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  animation: shimmer 2s infinite;
}

/* Loading Skeleton */
.skeleton {
  background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
  background-size: 200% 100%;
  animation: loading 1.5s ease-in-out infinite;
  border-radius: 0.5rem;
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Responsive Design */
@media (max-width: 640px) {
  .lesson-card,
  .exercise-card {
    padding: 1rem;
  }

  .content-area {
    padding: 1rem;
  }

  .section-header {
    font-size: 1.125rem;
    padding: 0.875rem;
    flex-direction: column;
    gap: 0.375rem;
  }

  .vocabulary-table th,
  .vocabulary-table td {
    padding: 0.75rem 0.625rem;
    font-size: 0.813rem;
  }

  .vocabulary-word {
    font-size: 0.875rem;
  }

  .footer-stats {
    flex-direction: column;
    gap: 0.625rem;
  }

  .language-toggle-button {
    padding: 0.625rem 0.75rem;
    font-size: 0.75rem;
  }

  .exercise-question {
    font-size: 0.875rem;
    padding: 0.875rem;
  }

  .prose h2 {
    font-size: 1.125rem;
  }

  .prose h3 {
    font-size: 1rem;
  }

  .motivational-footer {
    padding: 1.25rem;
  }
}

@media (min-width: 768px) {
  .section-header {
    font-size: 1.5rem;
  }

  .lesson-card,
  .exercise-card {
    padding: 1.5rem;
  }

  .content-area {
    padding: 1.5rem;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

button:focus-visible,
input:focus-visible,
.accordion-button:focus-visible,
.exercise-option:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* Performance Optimization */
.lesson-card,
.exercise-card,
.example-card {
  will-change: transform;
  transform: translateZ(0);
}

/* Print Styles */
@media print {
  .btn-complete,
  .btn-submit,
  .motivational-footer {
    display: none;
  }

  .lesson-card,
  .exercise-card {
    break-inside: avoid;
    box-shadow: none;
    border: 1px solid #e5e7eb;
  }
}
</file>

<file path="src/components/styles/Navbar.module.css">

</file>

<file path="src/config/routes.js">
export const ROUTES = {
  TEST: '/test',
  FULL_EXAM: '/full-exam',
  GRAMMAR: '/grammar',
  VOCABULARY: '/vocabulary',
  PROFILE: '/profile',
  ANSWERS: '/answers',
  HOME: '/',
  NOT_FOUND: '/not-found',
  // ADMIN: '/admin',
};

/**
 * Navigation helper functions
 */
export const gettestRoute = () => ROUTES.TEST;
export const getHomeRoute = () => ROUTES.HOME;
export const getFullExamRoute = () => ROUTES.FULL_EXAM;
export const getGrammarRoute = () => ROUTES.GRAMMAR;
export const getVocabularyRoute = () => ROUTES.VOCABULARY;
export const getProfileRoute = () => ROUTES.PROFILE;
export const getAnswersRoute = () => ROUTES.ANSWERS;
export const getNotFoundRoute = () => ROUTES.NOT_FOUND;


// export const getAdminRoute = () => ROUTES.ADMIN;
</file>

<file path="src/config/voiceExpression.js">
/**
 * ✨ OPTIMIZED Voice Expression System
 * Cải thiện performance, maintainability, và accuracy
 */

// ==================== 1. OPTIMIZED EMOTION DEFINITIONS ====================

export const VOICE_EMOTIONS = {
  NEUTRAL: { rate: 0.9, pitch: 1.0, volume: 0.9, label: 'Neutral', description: 'Normal speaking tone' },
  HAPPY: { rate: 1.1, pitch: 1.15, volume: 1.0, label: 'Happy', description: 'Cheerful, upbeat tone' },
  SAD: { rate: 0.75, pitch: 0.85, volume: 0.8, label: 'Sad', description: 'Slow, low tone' },
  ANGRY: { rate: 0.95, pitch: 1.25, volume: 1.0, label: 'Angry', description: 'Intense, high pitch' },
  EXCITED: { rate: 1.25, pitch: 1.3, volume: 1.0, label: 'Excited', description: 'Fast, energetic tone' },
  SERIOUS: { rate: 0.8, pitch: 0.9, volume: 0.95, label: 'Serious', description: 'Slow, formal tone' },
  CONFUSED: { rate: 0.85, pitch: 1.1, volume: 0.9, label: 'Confused', description: 'Questioning, slightly higher pitch' },
  WHISPER: { rate: 0.7, pitch: 0.95, volume: 0.6, label: 'Whisper', description: 'Soft, quiet tone' },
  LOUD: { rate: 0.9, pitch: 1.05, volume: 1.0, label: 'Loud', description: 'Prominent, confident tone' }
};

// ==================== 2. OPTIMIZED EMOTION KEYWORDS (Compiled Regex) ====================

/**
 * ✅ IMPROVEMENT: Pre-compiled regex patterns untuk tránh recompile nhiều lần
 * ✅ IMPROVEMENT: Grouped emotions logically
 * ✅ IMPROVEMENT: Thêm priority ordering (HAPPY trước SAD vì HAPPY có word overlap)
 */
const EMOTION_PATTERNS = [
  {
    emotion: 'EXCITED',
    pattern: /\b(wow|amazing|incredible|awesome|fantastic|thrilling|exciting|urgent|genius|brilliant|outstanding)\b/i,
    priority: 1
  },
  {
    emotion: 'HAPPY',
    pattern: /\b(great|good|wonderful|excellent|love|happy|joy|yes|hurray|perfect|lovely|beautiful|fantastic|brilliant)\b/i,
    priority: 1
  },
  {
    emotion: 'ANGRY',
    pattern: /\b(angry|furious|mad|hate|terrible|awful|disgusting|unacceptable|horrible|annoyed|irritated)\b/i,
    priority: 2
  },
  {
    emotion: 'SAD',
    pattern: /\b(sad|depressed|unhappy|unfortunate|terrible|lost|pain|crying|devastated|miserable)\b/i,
    priority: 2
  },
  {
    emotion: 'SERIOUS',
    pattern: /\b(important|critical|serious|must|required|essential|vital|urgent|matter|crucial)\b/i,
    priority: 3
  },
  {
    emotion: 'CONFUSED',
    pattern: /\b(what|why|how|confused|unclear|not sure|question|don't understand|unclear)\b/i,
    priority: 4
  }
];

/**
 * ✅ IMPROVEMENT: Cached emotion detection result
 */
const emotionCache = new Map();

export const detectEmotionFromText = (text, useCache = true) => {
  if (!text || typeof text !== 'string') return VOICE_EMOTIONS.NEUTRAL;

  // Check cache first
  if (useCache && emotionCache.has(text)) {
    return emotionCache.get(text);
  }

  const lowerText = text.toLowerCase();
  let detectedEmotion = VOICE_EMOTIONS.NEUTRAL;
  let highestPriority = Infinity;

  // ✅ IMPROVEMENT: Single pass through patterns (not multiple .test() calls)
  for (const { emotion, pattern, priority } of EMOTION_PATTERNS) {
    if (priority < highestPriority && pattern.test(lowerText)) {
      detectedEmotion = VOICE_EMOTIONS[emotion];
      highestPriority = priority;
    }
  }

  if (useCache) {
    emotionCache.set(text, detectedEmotion);
  }

  return detectedEmotion;
};

// ==================== 3. OPTIMIZED EMPHASIS PATTERNS ====================

/**
 * ✅ IMPROVEMENT: Pre-compile all regex patterns
 * ✅ IMPROVEMENT: Consolidate apply logic
 * ✅ IMPROVEMENT: Add caching for emphasis detection
 */
export const EMPHASIS_PATTERNS = {
  UPPERCASE: {
    pattern: /[A-Z]{2,}/,
    apply: (p) => ({ ...p, pitch: p.pitch * 1.15, volume: Math.min(p.volume * 1.1, 1.0), rate: p.rate * 0.95 }),
    label: 'Uppercase'
  },
  EXCLAMATION: {
    pattern: /!/,
    apply: (p) => ({ ...p, pitch: p.pitch * 1.2, volume: Math.min(p.volume * 1.05, 1.0), rate: p.rate * 0.9 }),
    label: 'Exclamation'
  },
  QUESTION: {
    pattern: /\?/,
    apply: (p) => ({ ...p, pitch: p.pitch * 1.1, rate: p.rate * 0.95 }),
    label: 'Question'
  },
  ELLIPSIS: {
    pattern: /\.{2,}|…/,
    apply: (p) => ({ ...p, rate: p.rate * 0.7, pitch: p.pitch * 0.9 }),
    label: 'Ellipsis'
  },
  PARENTHESIS: {
    pattern: /\([^)]+\)/,
    apply: (p) => ({ ...p, volume: Math.max(p.volume * 0.85, 0.5), rate: p.rate * 1.05 }),
    label: 'Parenthesis'
  },
  BRACKET: {
    pattern: /\[[^\]]+\]/,
    apply: (p) => ({ ...p, volume: Math.min(p.volume * 1.15, 1.0), pitch: p.pitch * 1.1 }),
    label: 'Bracket'
  },
  STRESS: {
    pattern: /_[\w\s]+_|\*[\w\s]+\*/,
    apply: (p) => ({ ...p, pitch: p.pitch * 1.25, volume: Math.min(p.volume * 1.1, 1.0), rate: p.rate * 0.85 }),
    label: 'Stress'
  }
};

// ==================== 4. OPTIMIZED PAUSE PATTERNS ====================

export const PAUSE_PATTERNS = {
  SHORT: 200,
  MEDIUM: 500,
  LONG: 1000,
  VERY_LONG: 1500
};

/**
 * ✅ IMPROVEMENT: Simplify pause addition (không cần Unicode, dùng marker instead)
 * ✅ IMPROVEMENT: More efficient regex replacement
 */
export const addPausesToText = (text) => {
  if (!text) return text;
  
  return text
    .replace(/\./g, '.<pause-long/>')
    .replace(/,/g, ',<pause-short/>')
    .replace(/;/g, ';<pause-medium/>')
    .replace(/\?/g, '?<pause-long/>')
    .replace(/!/g, '!<pause-medium/>');
};

/**
 * ✅ IMPROVEMENT: Extract pause info từ marked text
 */
export const extractPausesFromText = (markedText) => {
  const pauses = [];
  const regex = /<pause-(short|medium|long)\/>/g;
  let match;

  while ((match = regex.exec(markedText)) !== null) {
    pauses.push({
      position: match.index,
      duration: PAUSE_PATTERNS[match[1].toUpperCase()]
    });
  }

  return pauses;
};

/**
 * ✅ IMPROVEMENT: Remove pause markers để text cleaner
 */
export const removePauseMarkers = (text) => {
  return text.replace(/<pause-\w+\/>/g, '');
};

// ==================== 5. OPTIMIZED STRESS MARKERS ====================

export const STRESS_MARKERS = {
  ASTERISK: /\*([^*]+)\*/g,
  UNDERSCORE: /_([^_]+)_/g,
  DOUBLE_CAPS: /\b([A-Z]{2,})\b/g
};

/**
 * ✅ IMPROVEMENT: Extract stress words in single pass
 */
export const extractStressWords = (text) => {
  const stressWords = new Set();
  
  for (const [, pattern] of Object.entries(STRESS_MARKERS)) {
    let match;
    const tempPattern = new RegExp(pattern.source, 'g');
    while ((match = tempPattern.exec(text)) !== null) {
      stressWords.add(match[1] || match[0]);
    }
  }

  return Array.from(stressWords);
};

// ==================== 6. OPTIMIZED EMOTION EXTRACTION ====================

/**
 * ✅ IMPROVEMENT: Extract emotion marker quickly
 */
const EMOTION_MARKER_REGEX = /^\{([A-Z_]+)\}\s*/;

export const extractEmotionMarker = (text) => {
  if (!text || typeof text !== 'string') {
    return { emotion: null, cleanText: text };
  }

  const match = text.match(EMOTION_MARKER_REGEX);
  if (match && VOICE_EMOTIONS[match[1]]) {
    return {
      emotion: VOICE_EMOTIONS[match[1]],
      cleanText: text.slice(match[0].length)
    };
  }

  return { emotion: null, cleanText: text };
};

// ==================== 7. OPTIMIZED TEXT CLEANING ====================

/**
 * ✅ IMPROVEMENT: Single pass text cleaning
 * ✅ IMPROVEMENT: Efficient string manipulation
 */
const MARKER_PATTERNS = [
  { regex: /\*([^*]+)\*/g, replace: '$1' },      // *word* -> word
  { regex: /_([^_]+)_/g, replace: '$1' },        // _word_ -> word
  { regex: /\[[^\]]+\]/g, replace: (m) => m.slice(1, -1) }, // [text] -> text
  { regex: /\([^)]+\)/g, replace: (m) => m.slice(1, -1) }   // (text) -> text
];

export const cleanTextMarkers = (text) => {
  if (!text) return text;
  
  return MARKER_PATTERNS.reduce((acc, { regex, replace }) => 
    acc.replace(regex, replace), text
  );
};

// ==================== 8. MAIN OPTIMIZATION: getFinalVoiceParams ====================

/**
 * ✅ IMPROVEMENT: Optimized parameter calculation
 * ✅ IMPROVEMENT: Single calculation pass
 * ✅ IMPROVEMENT: Avoid unnecessary multiplications
 */
const MULTIPLIER_BASE = 1.0 / VOICE_EMOTIONS.NEUTRAL.rate; // Pre-calculate

export const getFinalVoiceParams = (baseParams, text, emotionOverride = null) => {
  if (!baseParams || !text) {
    return { rate: 0.9, pitch: 1.0, volume: 0.9 };
  }

  // Step 1: Get emotion
  const emotion = emotionOverride || detectEmotionFromText(text, true);
  
  // Step 2: Calculate emotion multipliers (avoid division, pre-calculate if possible)
  const rateMultiplier = emotion.rate / VOICE_EMOTIONS.NEUTRAL.rate;
  const pitchMultiplier = emotion.pitch / VOICE_EMOTIONS.NEUTRAL.pitch;
  const volumeMultiplier = emotion.volume / VOICE_EMOTIONS.NEUTRAL.volume;

  // Step 3: Apply emotion to base
  let params = {
    rate: baseParams.rate * rateMultiplier,
    pitch: baseParams.pitch * pitchMultiplier,
    volume: baseParams.volume * volumeMultiplier
  };

  // Step 4: Apply emphasis patterns (early exit if no matches)
  for (const [, patternObj] of Object.entries(EMPHASIS_PATTERNS)) {
    if (patternObj.pattern.test(text)) {
      params = patternObj.apply(params);
    }
  }

  // Step 5: Clamp values (optimized)
  return {
    rate: Math.max(0.5, Math.min(2.0, params.rate)),
    pitch: Math.max(0.5, Math.min(2.0, params.pitch)),
    volume: Math.max(0.0, Math.min(1.0, params.volume))
  };
};

// ==================== 9. BATCH PROCESSING (NEW) ====================

/**
 * ✅ NEW FEATURE: Process multiple texts efficiently
 * Tránh recompile regex + emotion detection nhiều lần
 */
export const getFinalVoiceParamsBatch = (baseParams, texts, emotionOverride = null) => {
  return texts.map((text, index) => ({
    index,
    text,
    params: getFinalVoiceParams(baseParams, text, emotionOverride),
    emotion: detectEmotionFromText(text, true)
  }));
};

// ==================== 10. CACHE MANAGEMENT ====================

export const clearEmotionCache = () => {
  emotionCache.clear();
  console.log('✅ Emotion cache cleared');
};

export const getCacheStats = () => {
  return {
    cachedEmotions: emotionCache.size,
    cacheMemory: `~${emotionCache.size * 0.1}KB` // Rough estimate
  };
};

// ==================== 11. VALIDATION & DEBUGGING ====================

/**
 * ✅ NEW: Validate and debug voice parameters
 */
export const validateVoiceParams = (params) => {
  const issues = [];

  if (params.rate < 0.5 || params.rate > 2.0) issues.push(`Rate ${params.rate} out of range`);
  if (params.pitch < 0.5 || params.pitch > 2.0) issues.push(`Pitch ${params.pitch} out of range`);
  if (params.volume < 0.0 || params.volume > 1.0) issues.push(`Volume ${params.volume} out of range`);

  return {
    valid: issues.length === 0,
    issues
  };
};

/**
 * ✅ NEW: Debug emotion detection
 */
export const debugEmotionDetection = (text) => {
  const { emotion, cleanText } = extractEmotionMarker(text);
  const detectedEmotion = detectEmotionFromText(cleanText || text, false); // No cache for debug
  const stressWords = extractStressWords(text);

  return {
    text,
    markerEmotion: emotion,
    detectedEmotion,
    stressWords,
    hasExclamation: /!/.test(text),
    hasQuestion: /\?/.test(text),
    hasEllipsis: /\.{2,}|…/.test(text)
  };
};

// ==================== EXPORT DEFAULT ====================

export default {
  // Core
  VOICE_EMOTIONS,
  EMPHASIS_PATTERNS,
  PAUSE_PATTERNS,
  STRESS_MARKERS,

  // Detection & Processing
  detectEmotionFromText,
  extractEmotionMarker,
  extractStressWords,
  extractPausesFromText,
  
  // Text Cleaning
  cleanTextMarkers,
  addPausesToText,
  removePauseMarkers,

  // Voice Parameters
  getFinalVoiceParams,
  getFinalVoiceParamsBatch,
  validateVoiceParams,

  // Debugging
  debugEmotionDetection,
  clearEmotionCache,
  getCacheStats
};

// ==================== USAGE EXAMPLE ====================

/**
 * 📝 USAGE:
 * 
 * // Basic usage
 * const baseParams = { rate: 1.0, pitch: 1.0, volume: 0.9 };
 * const text = "This is AMAZING!";
 * const voiceParams = getFinalVoiceParams(baseParams, text);
 * 
 * // With emotion marker
 * const markedText = "{EXCITED} This is amazing!";
 * const { emotion, cleanText } = extractEmotionMarker(markedText);
 * const voiceParams = getFinalVoiceParams(baseParams, cleanText, emotion);
 * 
 * // Batch processing
 * const texts = ["Great!", "Why?", "*Really* important"];
 * const results = getFinalVoiceParamsBatch(baseParams, texts);
 * 
 * // Debug
 * console.log(debugEmotionDetection("{EXCITED} Wow!"));
 * console.log(getCacheStats());
 */
</file>

<file path="src/data/vocabularyData.js">
// src/data/vocabularyData.js
import { vocabularyDataLevel1 } from './vocabulary/vocabularyDataLevel1.js';
import { vocabularyDataLevel2 } from './vocabulary/vocabularyDataLevel2.js';
import { vocabularyDataLevel3 } from './vocabulary/vocabularyDataLevel3.js';
import { vocabularyDataLevel4 } from './vocabulary/vocabularyDataLevel4.js';
import { vocabularyDataLevel5 } from './vocabulary/vocabularyDataLevel5.js';

const mergeData = () => {
  const result = {};
  [vocabularyDataLevel1, vocabularyDataLevel2, vocabularyDataLevel3, vocabularyDataLevel4, vocabularyDataLevel5].forEach(data => {
    Object.entries(data).forEach(([topic, subtopics]) => {
      if (!result[topic]) result[topic] = {};
      Object.entries(subtopics).forEach(([sub, words]) => {
        if (!result[topic][sub]) result[topic][sub] = [];
        result[topic][sub].push(...words);
      });
    });
  });
  return result;
};

export const vocabularyData = mergeData();
</file>

<file path="src/hooks/useAppState.js">
import { useReducer, useRef, useCallback } from 'react';

const initialState = {
  // UI States
  showInstructions: true,
  showVoiceControls: true,
  showAuthModal: false,
  
  // Test States
  selectedExam: 'exam1',
  testType: 'listening',
  practiceType: '',
  selectedPart: 'part1',
  currentQuestionIndex: 0,
  rate: 1.0,
  answers: {},
  showResults: false,
};

const actionTypes = {
  // UI Actions
  SET_SHOW_INSTRUCTIONS: 'SET_SHOW_INSTRUCTIONS',
  SET_SHOW_VOICE_CONTROLS: 'SET_SHOW_VOICE_CONTROLS',
  SET_SHOW_AUTH_MODAL: 'SET_SHOW_AUTH_MODAL',
  
  // Test Actions
  SET_EXAM: 'SET_EXAM',
  SET_TEST_TYPE: 'SET_TEST_TYPE',
  SET_PRACTICE_TYPE: 'SET_PRACTICE_TYPE',
  SET_PART: 'SET_PART',
  SET_QUESTION_INDEX: 'SET_QUESTION_INDEX',
  SET_RATE: 'SET_RATE',
  SET_ANSWER: 'SET_ANSWER',
  RESET_ANSWERS: 'RESET_ANSWERS',
  SET_SHOW_RESULTS: 'SET_SHOW_RESULTS',
  RESET_TEST: 'RESET_TEST',
};

const reducer = (state, action) => {
  switch (action.type) {
    case actionTypes.SET_SHOW_INSTRUCTIONS:
      return { ...state, showInstructions: action.payload };
    
    case actionTypes.SET_SHOW_VOICE_CONTROLS:
      return { ...state, showVoiceControls: action.payload };
    
    case actionTypes.SET_SHOW_AUTH_MODAL:
      return { ...state, showAuthModal: action.payload };
    
    case actionTypes.SET_EXAM:
      return {
        ...state,
        selectedExam: action.payload,
        selectedPart: 'part1',
        currentQuestionIndex: 0,
        answers: {},
        showResults: false,
      };
    
    case actionTypes.SET_TEST_TYPE:
      return {
        ...state,
        testType: action.payload,
        practiceType: '',
        selectedPart: action.payload === 'listening' ? 'part1' : 'part5',
        currentQuestionIndex: 0,
        answers: {},
        showResults: false,
      };
    
    case actionTypes.SET_PRACTICE_TYPE:
      return {
        ...state,
        practiceType: action.payload,
        testType: '',
        selectedPart: '',
        currentQuestionIndex: 0,
        answers: {},
        showResults: false,
      };
    
    case actionTypes.SET_PART:
      return {
        ...state,
        selectedPart: action.payload,
        currentQuestionIndex: 0,
        answers: {},
        showResults: false,
      };
    
    case actionTypes.SET_QUESTION_INDEX:
      return { ...state, currentQuestionIndex: action.payload };
    
    case actionTypes.SET_RATE:
      return { ...state, rate: action.payload };
    
    case actionTypes.SET_ANSWER:
      return {
        ...state,
        answers: { ...state.answers, [action.payload.questionId]: action.payload.answer },
      };
    
    case actionTypes.RESET_ANSWERS:
      return { ...state, answers: {}, showResults: false, currentQuestionIndex: 0 };
    
    case actionTypes.SET_SHOW_RESULTS:
      return { ...state, showResults: action.payload };
    
    case actionTypes.RESET_TEST:
      return {
        ...state,
        selectedPart: 'part1',
        currentQuestionIndex: 0,
        answers: {},
        showResults: false,
        rate: 1.0,
      };
    
    default:
      return state;
  }
};

// Helper to clear speech synthesis
const cancelSpeech = () => {
  try {
    window.speechSynthesis?.cancel();
  } catch (e) {
    console.error('Error canceling speech:', e);
  }
};

export const useAppState = () => {
  const [state, dispatch] = useReducer(reducer, initialState);
  const callbackCacheRef = useRef({});

  // Create callbacks only once - stored in ref to maintain stable references
  if (!callbackCacheRef.current.handleExamChange) {
    callbackCacheRef.current = {
      handleExamChange: (e) => {
        cancelSpeech();
        dispatch({ type: actionTypes.SET_EXAM, payload: e.target.value });
      },
      
      handleTestTypeChange: (value) => {
        cancelSpeech();
        dispatch({ type: actionTypes.SET_TEST_TYPE, payload: value });
      },
      
      handlePracticeTypeChange: (value) => {
        cancelSpeech();
        dispatch({ type: actionTypes.SET_PRACTICE_TYPE, payload: value });
      },
      
      handlePartChange: (e) => {
        cancelSpeech();
        dispatch({ type: actionTypes.SET_PART, payload: e.target.value });
      },
      
      handleAnswerSelect: (questionId, answerIndex) => {
        dispatch({ 
          type: actionTypes.SET_ANSWER, 
          payload: { questionId, answer: answerIndex } 
        });
      },
      
      handleSubmit: () => {
        dispatch({ type: actionTypes.SET_SHOW_RESULTS, payload: true });
      },
      
      handleReset: () => {
        cancelSpeech();
        dispatch({ type: actionTypes.RESET_ANSWERS });
      },
      
      // UI Handlers
      toggleInstructions: (value) => {
        dispatch({ type: actionTypes.SET_SHOW_INSTRUCTIONS, payload: value });
      },
      
      toggleVoiceControls: (value) => {
        dispatch({ type: actionTypes.SET_SHOW_VOICE_CONTROLS, payload: value });
      },
      
      toggleAuthModal: (value) => {
        dispatch({ type: actionTypes.SET_SHOW_AUTH_MODAL, payload: value });
      },
      
      setRate: (rate) => {
        dispatch({ type: actionTypes.SET_RATE, payload: rate });
      },
      
      setCurrentQuestionIndex: (index) => {
        dispatch({ type: actionTypes.SET_QUESTION_INDEX, payload: index });
      },
    };
  }

  return {
    // UI States
    showInstructions: state.showInstructions,
    showVoiceControls: state.showVoiceControls,
    showAuthModal: state.showAuthModal,
    
    // Test States
    selectedExam: state.selectedExam,
    testType: state.testType,
    practiceType: state.practiceType,
    selectedPart: state.selectedPart,
    currentQuestionIndex: state.currentQuestionIndex,
    rate: state.rate,
    answers: state.answers,
    showResults: state.showResults,
    
    // Event Handlers - stable references
    handleExamChange: callbackCacheRef.current.handleExamChange,
    handleTestTypeChange: callbackCacheRef.current.handleTestTypeChange,
    handlePracticeTypeChange: callbackCacheRef.current.handlePracticeTypeChange,
    handlePartChange: callbackCacheRef.current.handlePartChange,
    handleAnswerSelect: callbackCacheRef.current.handleAnswerSelect,
    handleSubmit: callbackCacheRef.current.handleSubmit,
    handleReset: callbackCacheRef.current.handleReset,
    toggleInstructions: callbackCacheRef.current.toggleInstructions,
    toggleVoiceControls: callbackCacheRef.current.toggleVoiceControls,
    toggleAuthModal: callbackCacheRef.current.toggleAuthModal,
    setRate: callbackCacheRef.current.setRate,
    setCurrentQuestionIndex: callbackCacheRef.current.setCurrentQuestionIndex,
  };
};

export default useAppState;
</file>

<file path="src/hooks/useFirestore.js">
import { useState, useEffect, useCallback, useRef } from "react";
import {
  collection,
  addDoc,
  updateDoc,
  deleteDoc,
  doc,
  getDocs,
  serverTimestamp,
  query,
  where,
  orderBy,
  limit,
  onSnapshot,
  getCountFromServer,
} from "firebase/firestore";
import { db } from "../config/firebase";

export const useFirestore = (collectionName) => {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  const unsubscribeRef = useRef(null);

  // -----------------------------------------
  // 1. GET ALL DOCUMENTS (ONCE)
  // -----------------------------------------
  const getAll = useCallback(
    async (filters = [], sort = null, limitSize = null) => {
      try {
        setLoading(true);

        let q = collection(db, collectionName);

        // Apply filters WHERE
        if (filters.length > 0) {
          filters.forEach((f) => {
            q = query(q, where(f.field, f.op, f.value));
          });
        }

        // Apply ORDER BY
        if (sort) {
          q = query(q, orderBy(sort.field, sort.direction ?? "asc"));
        }

        // Apply LIMIT
        if (limitSize) {
          q = query(q, limit(limitSize));
        }

        const snapshot = await getDocs(q);
        const docs = snapshot.docs.map((d) => ({ id: d.id, ...d.data() }));
        setData(docs);
        setError(null);
        return docs;
      } catch (err) {
        setError(err.message);
        console.error("🔥 getAll error:", err);
        return [];
      } finally {
        setLoading(false);
      }
    },
    [collectionName]
  );

  // -----------------------------------------
  // 2. REALTIME SUBSCRIBE
  // -----------------------------------------
  const subscribe = useCallback(
    (filters = [], sort = null, limitSize = null) => {
      try {
        let q = collection(db, collectionName);

        if (filters.length > 0) {
          filters.forEach((f) => {
            q = query(q, where(f.field, f.op, f.value));
          });
        }

        if (sort) {
          q = query(q, orderBy(sort.field, sort.direction ?? "asc"));
        }

        if (limitSize) {
          q = query(q, limit(limitSize));
        }

        if (unsubscribeRef.current) unsubscribeRef.current();

        const unsub = onSnapshot(
          q,
          (snapshot) => {
            const docs = snapshot.docs.map((d) => ({
              id: d.id,
              ...d.data(),
            }));
            setData(docs);
            setError(null);
          },
          (err) => {
            setError(err.message);
            console.error("🔥 Snapshot error:", err);
          }
        );

        unsubscribeRef.current = unsub;

        return unsub;
      } catch (err) {
        setError(err.message);
        console.error("🔥 subscribe error:", err);
      }
    },
    [collectionName]
  );

  // -----------------------------------------
  // 3. GET COUNT (AGGREGATION – SIÊU RẺ)
  // -----------------------------------------
  const getCount = useCallback(async (filters = []) => {
    try {
      let q = collection(db, collectionName);

      if (filters.length > 0) {
        filters.forEach((f) => {
          q = query(q, where(f.field, f.op, f.value));
        });
      }

      const snapshot = await getCountFromServer(q);
      return snapshot.data().count;
    } catch (err) {
      console.error("🔥 getCount error:", err);
      return 0;
    }
  }, [collectionName]);

  // -----------------------------------------
  // 4. LISTEN TO ONE DOCUMENT
  // -----------------------------------------
  const subscribeDoc = useCallback((docId, callback) => {
    try {
      const ref = doc(db, collectionName, docId);

      const unsub = onSnapshot(
        ref,
        (snapshot) => {
          callback(snapshot.exists() ? { id: snapshot.id, ...snapshot.data() } : null);
        },
        (err) => console.error("🔥 subscribeDoc error:", err)
      );

      return unsub;
    } catch (err) {
      console.error("🔥 subscribeDoc error:", err);
    }
  }, [collectionName]);

  // -----------------------------------------
  // 5. ADD DOCUMENT
  // -----------------------------------------
  const add = useCallback(
    async (newData) => {
      try {
        setLoading(true);
        const docRef = await addDoc(collection(db, collectionName), {
          ...newData,
          createdAt: serverTimestamp(),
        });
        setError(null);
        return docRef.id;
      } catch (err) {
        setError(err.message);
        console.error("🔥 add error:", err);
      } finally {
        setLoading(false);
      }
    },
    [collectionName]
  );

  // -----------------------------------------
  // 6. UPDATE DOCUMENT
  // -----------------------------------------
  const update = useCallback(
    async (docId, updatedData) => {
      try {
        setLoading(true);
        await updateDoc(doc(db, collectionName, docId), {
          ...updatedData,
          updatedAt: serverTimestamp(),
        });
        setError(null);
      } catch (err) {
        setError(err.message);
        console.error("🔥 update error:", err);
      } finally {
        setLoading(false);
      }
    },
    [collectionName]
  );

  // -----------------------------------------
  // 7. DELETE DOCUMENT
  // -----------------------------------------
  const remove = useCallback(
    async (docId) => {
      try {
        setLoading(true);
        await deleteDoc(doc(db, collectionName, docId));
        setError(null);
      } catch (err) {
        setError(err.message);
        console.error("🔥 delete error:", err);
      } finally {
        setLoading(false);
      }
    },
    [collectionName]
  );

  // Cleanup listener on unmount
  useEffect(() => {
    return () => {
      if (unsubscribeRef.current) {
        unsubscribeRef.current();
      }
    };
  }, []);

  return {
    data,
    loading,
    error,

    // MAIN API
    getAll,
    subscribe,
    getCount,
    subscribeDoc,

    // CRUD
    add,
    update,
    remove,
  };
};

export default useFirestore;
</file>

<file path="src/hooks/useUnifiedAuth.js">
import { useFirebaseAuth } from './useFirebaseAuth';

/**
 * Hook thống nhất authentication - chỉ dùng Firebase
 * Clerk đã bị loại bỏ khỏi dự án
 */
export const useUnifiedAuth = () => {
  // Chỉ sử dụng Firebase authentication
  const firebaseAuth = useFirebaseAuth();

  const isLoaded = firebaseAuth.isLoaded;
  const isSignedIn = firebaseAuth.isSignedIn;
  
  // Lấy user từ Firebase
  let user = null;
  let authProvider = 'firebase'; // Luôn là 'firebase' bây giờ

  if (firebaseAuth.isSignedIn && firebaseAuth.user) {
    user = firebaseAuth.user;
    console.log('✅ [useUnifiedAuth] Firebase user authenticated');
  } else if (isLoaded) {
    console.log('⚪ [useUnifiedAuth] No user logged in (auth loaded)');
  }

  return {
    isSignedIn,
    isLoaded,
    user,
    authProvider, // Luôn là 'firebase'
    firebaseAuth,
  };
};

export default useUnifiedAuth;
</file>

<file path="src/hooks/useUserProgress.js">
import { useState, useEffect } from 'react';
import { 
  collection, 
  addDoc, 
  updateDoc, 
  doc, 
  query, 
  where, 
  getDocs, 
  onSnapshot, 
  serverTimestamp 
} from 'firebase/firestore';
import { auth, db } from '../config/firebase';

/**
 * Hook để quản lý tiến độ luyện thi của người dùng
 * Chỉ sử dụng Firebase Authentication (Clerk đã bị loại bỏ)
 */
export const useUserProgress = () => {
  // Firebase authentication state
  const [firebaseUser, setFirebaseUser] = useState(null);
  const [firebaseLoaded, setFirebaseLoaded] = useState(false);
  
  // Progress data và status
  const [progress, setProgress] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [currentUser, setCurrentUser] = useState(null);

  // ============================================
  // Listen to Firebase Auth State
  // ============================================
  useEffect(() => {
    const unsubscribe = auth.onAuthStateChanged((user) => {
      setFirebaseUser(user);
      setFirebaseLoaded(true);
    });
    return unsubscribe;
  }, []);

  // ============================================
  // Get Current User Info (Firebase Only)
  // ============================================
  const getCurrentUser = () => {
    if (firebaseUser) {
      return {
        id: firebaseUser.uid,
        firebaseUid: firebaseUser.uid,
        email: firebaseUser.email,
        name: firebaseUser.displayName || firebaseUser.email || 'Anonymous',
        provider: 'firebase',
        photoURL: firebaseUser.photoURL,
      };
    }
    
    return null;
  };

  // Update currentUser whenever Firebase auth changes
  useEffect(() => {
    const user = getCurrentUser();
    setCurrentUser(user);
  }, [firebaseUser]);

  // ============================================
  // Subscribe to User's Progress from Firestore
  // ============================================
  useEffect(() => {
    // Đợi Firebase auth load xong
    if (!firebaseLoaded) {
      return;
    }

    const user = getCurrentUser();
    
    if (!user) {
      setProgress([]);
      return;
    }

    console.log('📊 Setting up progress listener:', {
      provider: user.provider,
      firebaseUid: user.firebaseUid,
      email: user.email,
    });

    try {
      // Query Firestore cho user này
      const q = query(
        collection(db, 'userProgress'),
        where('firebaseUid', '==', user.firebaseUid)
      );

      console.log('🔥 Querying Firebase user with firebaseUid:', user.firebaseUid);

      const unsubscribe = onSnapshot(
        q,
        (snapshot) => {
          console.log(`📥 Progress snapshot received: ${snapshot.size} documents`);
          const data = snapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data(),
            // Convert Firestore timestamp to JavaScript Date
            completedAt: doc.data().completedAt?.toDate?.() || doc.data().completedAt,
          }));
          
          // Sort by completedAt (newest first)
          const sortedData = data.sort((a, b) => {
            const dateA = a.completedAt instanceof Date ? a.completedAt : new Date(0);
            const dateB = b.completedAt instanceof Date ? b.completedAt : new Date(0);
            return dateB - dateA;
          });

          console.log('📊 Progress data loaded:', sortedData.length, 'documents');
          setProgress(sortedData);
          setError(null);
        },
        (err) => {
          console.error('❌ Snapshot listener error:', err.code, err.message);
          if (err.code === 'permission-denied') {
            console.warn('⚠️ Permission denied - Check Firestore Rules!');
            setError('Permission denied - check Firestore rules');
          } else {
            setError(err.message);
          }
        }
      );

      return unsubscribe;
    } catch (err) {
      console.error('❌ Error setting up listener:', err);
      setError(err.message);
    }
  }, [firebaseUser, firebaseLoaded]);

  // ============================================
  // Save or Update Progress to Firestore
  // ============================================
  const saveProgress = async (testData) => {
    const user = getCurrentUser();
    
    if (!user) {
      console.warn('⚠️ User not authenticated');
      return false;
    }

    try {
      setLoading(true);

      // ✅ Build progress data object - ONLY include defined fields
      // Firestore strictly forbids undefined values
      const progressData = {
        // Required user info
        firebaseUid: user.firebaseUid,
        userEmail: user.email || '',
        userName: user.name || 'Anonymous',
        
        // Test data
        exam: testData.exam,
        part: testData.part,
        score: testData.score || 0,
        answers: testData.answers || {},
        totalQuestions: testData.totalQuestions || 0,
        correctAnswers: testData.correctAnswers || 0,
        isDraft: testData.isDraft || false,
        testType: testData.testType || 'unknown',  // ✅ FIXED: testData.testType not testType
        
        // Timestamps
        createdAt: serverTimestamp(),
        completedAt: serverTimestamp(),
        updatedAt: serverTimestamp(),
      };

      // Optional fields - only add if they have values
      if (user.photoURL) {
        progressData.photoURL = user.photoURL;
      }

      // Include additional listening/reading specific data if provided
      if (testData.listeningScore !== undefined) {
        progressData.listeningScore = testData.listeningScore;
      }
      if (testData.readingScore !== undefined) {
        progressData.readingScore = testData.readingScore;
      }
      if (testData.listeningCorrect !== undefined) {
        progressData.listeningCorrect = testData.listeningCorrect;
      }
      if (testData.readingCorrect !== undefined) {
        progressData.readingCorrect = testData.readingCorrect;
      }

      // ✅ CRITICAL: Verify no undefined values
      for (const [key, value] of Object.entries(progressData)) {
        if (value === undefined) {
          console.warn(`⚠️ WARNING: Field "${key}" is undefined, removing it`);
          delete progressData[key];
        }
      }

      console.log('📋 Final progressData to save:', progressData);
      console.log('💾 Saving progress - User info:', {
        firebaseUid: user.firebaseUid,
        email: user.email,
      });
      console.log('💾 Saving progress - Test data:', {
        exam: testData.exam,
        part: testData.part,
        score: testData.score,
        testType: testData.testType,
      });

      // Check if progress already exists for this test
      const existingQuery = query(
        collection(db, 'userProgress'),
        where('firebaseUid', '==', user.firebaseUid),
        where('exam', '==', testData.exam),
        where('part', '==', testData.part)
      );

      const existingDocs = await getDocs(existingQuery);

      if (existingDocs.size > 0) {
        // Update existing document
        const existingDoc = existingDocs.docs[0];
        await updateDoc(doc(db, 'userProgress', existingDoc.id), progressData);
        console.log(`✅ Progress updated:`, existingDoc.id);
      } else {
        // Create new document
        const docRef = await addDoc(collection(db, 'userProgress'), progressData);
        console.log(`✅ Progress saved:`, docRef.id);
      }

      setError(null);
      return true;
    } catch (err) {
      console.error('❌ Error saving progress:', err.code, err.message);
      if (err.code === 'permission-denied') {
        setError('Cannot save progress - check Firestore rules');
        console.error('⚠️ Permission denied! Make sure Firestore rules allow writes.');
      } else {
        setError(err.message);
      }
      throw err;
    } finally {
      setLoading(false);
    }
  };

  return {
    progress,
    loading,
    error,
    saveProgress,
    currentUser, // User info from Firebase
    isLoaded: firebaseLoaded, // Auth state is loaded
  };
};
</file>

<file path="src/pages/HomePage.jsx">
import React, { memo, useCallback, useMemo } from 'react'
import { useNavigate } from 'react-router-dom'
import {
  Users, ArrowRight, Zap, TrendingUp,
  Headphones, FileText, Brain, Database, Rocket, MousePointer2, Star
} from 'lucide-react'

import { ROUTES } from '../config/routes'
import { useAppState } from '../hooks/useAppState'
import { useOnlineUsers } from '../hooks/useOnlineUsers'
import MemoizedHeaderSection from '../components/sections/HeaderSection'

/* ===================== SMALL PURE COMPONENTS ===================== */

const StatCard = memo(({ Icon, value, label }) => (
  <div className="flex flex-col items-center md:items-start p-6 bg-white rounded-3xl border border-slate-100 shadow-sm hover:shadow-md transition">
    <div className="w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center mb-4">
      <Icon className="w-5 h-5 text-blue-600" />
    </div>
    <span className="text-3xl font-black text-slate-900">{value}</span>
    <span className="text-xs font-bold text-slate-400 uppercase mt-1">{label}</span>
  </div>
))

const FeatureCard = memo(({ Icon, title, description, gradient, number, onClick }) => (
  <div
    onClick={onClick}
    className="group cursor-pointer bg-white border border-slate-100 p-6 sm:p-8 rounded-[2rem] shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 relative"
  >
    <div className={`w-12 h-12 rounded-2xl bg-gradient-to-br ${gradient} flex items-center justify-center mb-6`}>
      <Icon className="w-6 h-6 text-white" />
    </div>

    <h3 className="text-lg sm:text-xl font-bold text-slate-900 mb-2">{title}</h3>
    <p className="text-sm text-slate-500 font-medium leading-relaxed mb-6 line-clamp-3">{description}</p>

    <div className="flex items-center gap-2 text-blue-600 font-bold text-xs uppercase">
      <span>Khám phá bài học</span>
      <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition" />
    </div>

    <div className="absolute top-4 right-6 text-5xl font-black text-slate-50 italic select-none">
      0{number}
    </div>
  </div>
))

/* ===================== MAIN ===================== */

const HomePage = memo(() => {
  const navigate = useNavigate()
  const { onlineCount } = useOnlineUsers()
  const { isSignedIn, user, handleTestTypeChange } = useAppState()

  /* stable callbacks */
  const goFullTest = useCallback(() => {
    handleTestTypeChange('full')
    navigate(ROUTES.FULL_EXAM)
  }, [navigate, handleTestTypeChange])

  const goListening = useCallback(() => {
    handleTestTypeChange('listening')
    navigate(ROUTES.TEST)
  }, [navigate, handleTestTypeChange])

  const goReading = useCallback(() => {
    handleTestTypeChange('reading')
    navigate(ROUTES.TEST)
  }, [navigate, handleTestTypeChange])

  const features = useMemo(() => [
    {
      number: '1',
      Icon: Headphones,
      title: 'Listening Lab',
      description: 'Hệ thống bài nghe mô phỏng thực tế với tốc độ linh hoạt.',
      gradient: 'from-blue-600 to-blue-400',
      onClick: goListening
    },
    {
      number: '2',
      Icon: FileText,
      title: 'Reading Pro',
      description: 'Kho dữ liệu bài đọc phong phú kèm giải thích từ vựng.',
      gradient: 'from-cyan-500 to-teal-400',
      onClick: goReading
    },
    {
      number: '3',
      Icon: Brain,
      title: 'Grammar Master',
      description: 'Học ngữ pháp qua sơ đồ tư duy và bài tập áp dụng.',
      gradient: 'from-indigo-600 to-blue-500',
      onClick: () => navigate(ROUTES.GRAMMAR)
    },
    {
      number: '4',
      Icon: Database,
      title: 'Vocab Vault',
      description: 'Ghi nhớ từ vựng qua phương pháp Spaced Repetition.',
      gradient: 'from-violet-600 to-purple-500',
      onClick: () => navigate(ROUTES.VOCABULARY)
    }
  ], [goListening, goReading, navigate])

  return (
    <div className="min-h-screen bg-[#FDFEFF] text-slate-900 font-sans">
      <MemoizedHeaderSection isSignedIn={isSignedIn} user={user} />

      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-28">

        {/* HERO */}
        <section className="grid lg:grid-cols-2 gap-12 items-center">
          <div className="space-y-8 text-center lg:text-left">
            <h1 className="text-4xl sm:text-6xl lg:text-7xl font-black leading-tight">
              Luyện thi <br />
              <span className="text-blue-600">Thông minh hơn</span>
            </h1>

            <p className="text-base sm:text-lg text-slate-500 max-w-xl mx-auto lg:mx-0 font-medium">
              Prep.vn (HUFLIT Edition) đồng hành cùng bạn chinh phục chuẩn đầu ra.
            </p>

            <div className="flex flex-col sm:flex-row gap-4">
              <button
                onClick={goFullTest}
                className="px-8 py-4 bg-blue-600 text-white rounded-2xl font-bold shadow-lg hover:bg-blue-700 transition"
              >
                <Rocket className="w-5 h-5 inline mr-2" />
                Thi thử Full Test
              </button>

              <button className="px-8 py-4 bg-white border border-slate-200 rounded-2xl font-bold hover:bg-slate-50 transition">
                <MousePointer2 className="w-5 h-5 inline mr-2" />
                Dùng thử Free
              </button>
            </div>
          </div>

          <div className="hidden lg:block">
            <img
              src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=800&q=80"
              alt="Students learning"
              loading="lazy"
              decoding="async"
              className="rounded-[3rem] shadow-xl"
            />
          </div>
        </section>

        {/* STATS */}
        <section className="grid grid-cols-2 lg:grid-cols-4 gap-6">
          <StatCard Icon={Users} value="5,000+" label="Học viên tin dùng" />
          <StatCard Icon={Zap} value={onlineCount || '320'} label="Đang luyện tập" />
          <StatCard Icon={Star} value="4.9/5" label="Đánh giá chất lượng" />
          <StatCard Icon={TrendingUp} value="95%" label="Tỉ lệ đạt chuẩn" />
        </section>

        {/* FEATURES */}
        <section className="space-y-12">
          <h2 className="text-3xl sm:text-4xl font-black text-center lg:text-left">
            Luyện tập <span className="text-blue-600">đa kỹ năng</span>
          </h2>

          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {features.map((f) => (
              <FeatureCard key={f.number} {...f} />
            ))}
          </div>
        </section>

        {/* CTA */}
        <section className="bg-blue-600 rounded-[3rem] px-8 py-16 text-center">
          <h2 className="text-4xl sm:text-6xl font-black text-white">
            Bắt đầu lộ trình đạt điểm cao ngay!
          </h2>
          <button
            onClick={goFullTest}
            className="mt-8 bg-white text-blue-600 px-12 py-5 rounded-2xl font-black text-xl shadow-lg hover:scale-105 transition"
          >
            VÀO THI NGAY <ArrowRight className="inline ml-2" />
          </button>
        </section>

      </main>
    </div>
  )
})

HomePage.displayName = 'HomePage'
export default HomePage
</file>

<file path="scripts/uploadExamData.js">
import admin from 'firebase-admin';
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ============================================
// Initialize Firebase
// ============================================
const serviceAccountPath = path.join(__dirname, 'serviceAccountKey.json');

if (!fs.existsSync(serviceAccountPath)) {
  console.error('\nERROR: serviceAccountKey.json not found!');
  console.error('Expected: scripts/serviceAccountKey.json\n');
  console.error('How to fix: Generate from Firebase Console > Project Settings > Service Accounts > Generate New Private Key');
  process.exit(1);
}

const serviceAccount = JSON.parse(fs.readFileSync(serviceAccountPath, 'utf8'));

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  projectId: 'huflit-test-4ce25'
});

const db = admin.firestore();

// ============================================
// Import Individual Exam Files
// ============================================
let EXAMS = {}; // { exam1: EXAM1_DATA, exam2: EXAM2_DATA, ... exam12: EXAM12_DATA }

const examNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];

try {
  for (const num of examNumbers) {
    const examKey = `exam${num}`;
    const examModule = await import(`../src/data/exams/${examKey}.js`);
    const dataKey = `EXAM${num}_DATA`;
    EXAMS[examKey] = examModule[dataKey] || examModule.default || {};
    console.log(`${examKey}.js loaded`);
  }
} catch (e) {
  console.error('Import error for one or more exam files:', e.message);
  console.error('Fix: Ensure files exist at src/data/exams/exam1.js through exam12.js and export const EXAMN_DATA = { ... };');
  process.exit(1);
}

if (Object.keys(EXAMS).length < 12) {
  console.error('Less than 12 exams loaded. Check files.');
  process.exit(1);
}

console.log('Loaded exams:', Object.keys(EXAMS).length);

// ============================================
// Utility Functions
// ============================================
function cleanData(obj) {
  if (obj === null || obj === undefined) return null;
  if (Array.isArray(obj)) {
    return obj.map(item => cleanData(item)).filter(item => item !== null);
  }
  if (typeof obj !== 'object') return obj;
  
  const cleaned = {};
  for (const [key, value] of Object.entries(obj)) {
    if (value !== undefined && value !== null) {
      if (typeof value === 'object') {
        cleaned[key] = cleanData(value);
      } else {
        cleaned[key] = value;
      }
    }
  }
  return cleaned;
}

function logSection(title) {
  console.log(`\n${'='.repeat(60)}`);
  console.log(title);
  console.log(`${'='.repeat(60)}`);
}

function logSuccess(msg) {
  console.log(`  ${msg}`);
}

function logInfo(msg) {
  console.log(`  ${msg}`);
}

function logError(msg) {
  console.log(`  ${msg}`);
}

// ============================================
// Upload Functions
// ============================================
async function uploadExamMetadata() {
  logSection('Uploading Exam Metadata');

  let totalExams = 0;

  for (const [examKey, examData] of Object.entries(EXAMS)) {
    const examId = examKey; // e.g., exam1
    console.log(`\n  Exam: ${examId}`);

    try {
      // Upload exam metadata
      await db.collection('examData').doc(examId).set(
        cleanData({
          id: examId,
          title: examData.title || examId,
          description: examData.description || '',
          type: 'exam',
          totalParts: Object.keys(examData.parts || {}).length,
          totalQuestions: Object.values(examData.parts || {}).reduce((acc, part) => acc + (part.questions || []).length, 0),
          createdAt: new Date()
        }),
        { merge: true }
      );
      logSuccess(`${examId} metadata`);

      totalExams++;
    } catch (error) {
      logError(`${examId}: ${error.message}`);
    }
  }

  console.log(`\nTotal exams metadata uploaded/updated: ${totalExams}`);
  return totalExams;
}

async function uploadExamParts() {
  logSection('Uploading Exam Parts');

  let totalParts = 0;

  for (const [examKey, examData] of Object.entries(EXAMS)) {
    const examId = examKey;
    if (!examData.parts) {
      logInfo(`${examId}: No parts found, skipping.`);
      continue;
    }

    for (const [partId, partData] of Object.entries(examData.parts)) {
      const docId = `${examId}__${partId}`;

      try {
        // Clean questions array - Ensure explanation exists for each
        const cleanQuestions = (partData.questions || []).map(q => ({
          id: q.id,
          question: q.question || '',
          options: q.options || [],
          correct: q.correct || 0,
          explanation: q.explanation || 'No explanation provided.' // Fallback if missing
        })).filter(q => q.question); // Only keep if question exists

        await db.collection('examData').doc(docId).set(
          cleanData({
            examId,
            examTitle: examData.title,
            partId,
            title: partData.title || partId,
            description: partData.description || '',
            type: partData.type || 'listening',
            script: partData.script || '', // For audio/text
            questionsCount: cleanQuestions.length,
            questions: cleanQuestions,
            createdAt: new Date()
          }),
          { merge: true }
        );

        totalParts++;
        logSuccess(`${examId} - ${partData.title || partId} (${cleanQuestions.length} questions)`);
      } catch (error) {
        logError(`${docId}: ${error.message}`);
      }
    }
  }

  console.log(`\nTotal exam parts uploaded/updated: ${totalParts}`);
  return totalParts;
}

async function uploadExamStats() {
  logSection('Uploading Exam Statistics');

  try {
    let totalQuestions = 0;
    let totalParts = 0;
    let totalExams = Object.keys(EXAMS).length;

    for (const examData of Object.values(EXAMS)) {
      for (const partData of Object.values(examData.parts || {})) {
        totalParts++;
        totalQuestions += (partData.questions || []).length;
      }
    }

    const stats = {
      totalExams,
      totalParts,
      totalQuestions,
      updatedAt: new Date()
    };

    await db.collection('metadata').doc('examStats').set(stats, { merge: true });
    
    logSuccess('Exam statistics updated');
    console.log(`   Exams: ${totalExams}`);
    console.log(`   Parts: ${totalParts}`);
    console.log(`   Questions: ${totalQuestions}`);
  } catch (error) {
    logError(`Statistics: ${error.message}`);
  }
}

// ============================================
// Main
// ============================================
async function main() {
  logSection('Firebase Exam Data Upload (Fixed Version - Separate Imports)');
  logInfo('This will upload data from exam1.js through exam12.js to Firebase');

  try {
    console.log('\nLoading exam files...\n');

    const exams = await uploadExamMetadata();
    const parts = await uploadExamParts();
    await uploadExamStats();

    logSection('Upload Complete!');
    console.log(`\nSummary:`);
    console.log(`   Exams: ${exams}`);
    console.log(`   Parts: ${parts}`);
    console.log(`\nAll exam data from 12 files successfully uploaded to Firebase Firestore!`);
    console.log(`\nView your data:`);
    console.log(`   https://console.firebase.google.com/u/0/project/huflit-test-4ce25/firestore (collection: examData)\n`);

    process.exit(0);
  } catch (error) {
    console.error('\nFatal error:', error.message);
    process.exit(1);
  }
}

main();
</file>

<file path="src/components/Display/ExplanationDisplay.jsx">
import React, { useState } from 'react';
import { 
  Lightbulb, ChevronDown, ChevronUp, Brain, 
  CheckCircle2, XCircle, Copy, Check, Sparkles, Target
} from 'lucide-react';

const ExplanationSection = ({ 
  explanation, 
  question, 
  userAnswer, 
  correctAnswer, 
  isCorrect,
  questionId,
  options = []
}) => {
  const [isExpanded, setIsExpanded] = useState(false);
  const [isCopied, setIsCopied] = useState(false);
  const [isExplanationExpanded, setIsExplanationExpanded] = useState(false);

  const selectedAnswerText = options[userAnswer] || 'Chưa chọn';
  const correctAnswerText = options[correctAnswer] || 'N/A';

  const isLongExplanation = explanation && explanation.length > 300;
  const previewLength = 300;
  const displayedExplanation = isExplanationExpanded || !isLongExplanation 
    ? explanation 
    : explanation?.substring(0, previewLength);

  const copyToClipboard = () => {
    navigator.clipboard.writeText(explanation);
    setIsCopied(true);
    setTimeout(() => setIsCopied(false), 2000);
  };

  const renderFormattedText = (text) => {
    if (!text) return null;
    const parts = text.split(/(\*\*[^*]+\*\*)/g);
    
    return parts.map((part, idx) => {
      if (part.startsWith('**') && part.endsWith('**')) {
        const boldText = part.slice(2, -2);
        return (
          <span 
            key={idx} 
            className="font-semibold text-blue-700 bg-blue-50/50 px-1.5 py-0.5 rounded text-sm"
          >
            {boldText}
          </span>
        );
      }
      return <span key={idx}>{part}</span>;
    });
  };

  if (!explanation) return null;

  return (
    <div className="w-full my-6 space-y-4">
      {/* ===== INSIGHT BAR (Header Toggle) ===== */}
      <button
        onClick={() => setIsExpanded(!isExpanded)}
        className={`
          w-full text-left transition-all duration-300 ease-out 
          px-5 py-4 rounded-xl
          ${isExpanded 
            ? 'bg-slate-50 border border-slate-200 shadow-soft' 
            : 'bg-white border border-slate-100 hover:border-slate-200 shadow-xs hover:shadow-sm'
          }
        `}
      >
        <div className="flex items-center justify-between gap-4">
          <div className="flex items-center gap-3 flex-1">
            <Lightbulb className={`w-5 h-5 flex-shrink-0 transition-colors ${
              isCorrect ? 'text-amber-500' : 'text-slate-400'
            }`} />
            <div className="flex-1 min-w-0">
              <p className="text-sm font-semibold text-slate-900">
                {isCorrect ? 'Giải thích' : 'Phân tích'}
              </p>
              <p className="text-xs text-slate-500 mt-0.5">
                {isExpanded ? 'Thu gọn' : 'Xem chi tiết'}
              </p>
            </div>
          </div>
          
          {/* Status Badge */}
          <div className={`
            px-3 py-1.5 rounded-full text-xs font-medium flex-shrink-0
            transition-colors
            ${isCorrect 
              ? 'bg-emerald-50 text-emerald-700' 
              : 'bg-rose-50 text-rose-700'
            }
          `}>
            {isCorrect ? '✓ Chính xác' : '✕ Sai'}
          </div>
          
          <ChevronDown className={`w-4 h-4 text-slate-600 transition-transform duration-300 ${
            isExpanded ? 'rotate-180' : ''
          }`} />
        </div>
      </button>

      {/* ===== EXPANDED CONTENT ===== */}
      <div className={`
        overflow-hidden transition-all duration-500 ease-in-out
        ${isExpanded ? 'opacity-100' : 'max-h-0 opacity-0 hidden'}
      `}>
        <div className="space-y-4 animate-in fade-in">
          
          {/* ===== COMPARISON BOX ===== */}
          <div className="bg-white border border-slate-100 rounded-xl shadow-soft overflow-hidden">
            {/* Header */}
            <div className="px-5 py-3 border-b border-slate-100 bg-slate-50">
              <h3 className="text-sm font-semibold text-slate-900">So sánh câu trả lời</h3>
            </div>
            
            {/* Content - 2 column layout */}
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-0 divide-y sm:divide-y-0 sm:divide-x divide-slate-100">
              {/* Your Answer */}
              <div className="p-5">
                <div className="flex items-center gap-2 mb-3">
                  <div className={`
                    flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold flex-shrink-0
                    ${isCorrect 
                      ? 'bg-emerald-100 text-emerald-700' 
                      : 'bg-rose-100 text-rose-700'
                    }
                  `}>
                    {userAnswer !== undefined ? String.fromCharCode(65 + userAnswer) : '?'}
                  </div>
                  <span className="text-sm font-medium text-slate-700">Câu trả lời của bạn</span>
                </div>
                <p className="text-sm text-slate-800 leading-relaxed">
                  {selectedAnswerText}
                </p>
              </div>

              {/* Correct Answer (if incorrect) */}
              {!isCorrect && (
                <div className="p-5">
                  <div className="flex items-center gap-2 mb-3">
                    <div className="flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-700 text-xs font-bold flex-shrink-0">
                      {String.fromCharCode(65 + correctAnswer)}
                    </div>
                    <span className="text-sm font-medium text-emerald-700">Đáp án đúng</span>
                  </div>
                  <p className="text-sm text-slate-800 leading-relaxed">
                    {correctAnswerText}
                  </p>
                </div>
              )}
            </div>
          </div>

          {/* ===== MAIN EXPLANATION CARD ===== */}
          <div className="bg-white border border-slate-100 rounded-xl shadow-soft overflow-hidden">
            {/* Header */}
            <div className="px-5 py-3 border-b border-slate-100 bg-slate-50">
              <div className="flex items-center gap-2">
                <Brain className="w-4 h-4 text-slate-600" />
                <h3 className="text-sm font-semibold text-slate-900">Giải thích chi tiết</h3>
              </div>
            </div>
            
            {/* Content */}
            <div className="p-6">
              <div className="relative">
                <div className={`
                  text-sm leading-relaxed text-slate-800 whitespace-pre-wrap break-words
                  ${isLongExplanation && !isExplanationExpanded 
                    ? 'line-clamp-4 bg-gradient-to-b from-slate-900 via-slate-900 to-transparent bg-clip-text' 
                    : ''
                  }
                `}>
                  {renderFormattedText(displayedExplanation)}
                </div>
                
                {/* Fade out effect for long explanations */}
                {isLongExplanation && !isExplanationExpanded && (
                  <div className="absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-white to-transparent pointer-events-none" />
                )}
              </div>

              {/* Expand/Collapse button */}
              {isLongExplanation && (
                <button
                  onClick={() => setIsExplanationExpanded(!isExplanationExpanded)}
                  className="mt-5 flex items-center gap-2 text-slate-600 hover:text-slate-900 text-sm font-medium transition-colors group"
                >
                  {isExplanationExpanded ? (
                    <>
                      <ChevronUp className="w-4 h-4 transition-transform group-hover:scale-110" />
                      <span>Thu gọn</span>
                    </>
                  ) : (
                    <>
                      <ChevronDown className="w-4 h-4 transition-transform group-hover:scale-110" />
                      <span>Xem toàn bộ ({explanation.length} ký tự)</span>
                    </>
                  )}
                </button>
              )}
            </div>
          </div>

          {/* ===== PRO TIP / STICKY NOTE ===== */}
          <div className="bg-violet-50 border border-violet-100 rounded-xl overflow-hidden shadow-soft">
            <div className="p-6 relative">
              {/* Decorative icon in corner */}
              <div className="absolute top-4 right-4 opacity-10">
                <Sparkles className="w-8 h-8 text-violet-600" />
              </div>
              
              <div className="flex items-start gap-3 relative z-10">
                <Target className="w-5 h-5 text-violet-600 flex-shrink-0 mt-0.5" />
                <div className="flex-1">
                  <h4 className="text-sm font-semibold text-violet-900 mb-2">Lời khuyên</h4>
                  <p className="text-sm text-violet-800 leading-relaxed">
                    {isCorrect 
                      ? 'Bạn đã nắm vững kiến thức này. Tiếp tục luyện tập để ghi nhớ lâu dài hơn.'
                      : 'Mỗi sai lầm là bài học quý giá. Hãy xem lại phần lý thuyết liên quan và luyện tập thêm 3-5 bài tương tự.'}
                  </p>
                </div>
              </div>
            </div>
          </div>

          {/* ===== COPY BUTTON (Ghost Style) ===== */}
          <button
            onClick={copyToClipboard}
            className={`
              w-full flex items-center justify-center gap-2
              py-3 px-5 rounded-xl font-medium text-sm
              transition-all duration-200
              ${isCopied
                ? 'bg-emerald-50 text-emerald-700 border border-emerald-200' 
                : 'bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 hover:border-slate-300'
              }
            `}
          >
            {isCopied ? (
              <>
                <Check className="w-4 h-4" />
                <span>Đã sao chép!</span>
              </>
            ) : (
              <>
                <Copy className="w-4 h-4" />
                <span>Sao chép giải thích</span>
              </>
            )}
          </button>
        </div>
      </div>
    </div>
  );
};

export default ExplanationSection;
</file>

<file path="src/components/Display/PartSelector.jsx">
import React, { useCallback, useMemo, useState, memo, useEffect } from 'react';
import { ChevronDown, BookOpen, Headphones, Zap, Target, Award, ListChecks, Loader2, CheckCircle2, TrendingUp, Clock, Lightbulb } from 'lucide-react';
import { loadExamData, getAllExamMetadata, preloadExamData } from '../../data/examData';

// --- Memoized Sub-Components ---

const DropdownItem = memo(({ children, isActive, onClick }) => (
  <li>
    <button
      onClick={onClick}
      className={`w-full px-4 py-3 rounded-lg transition-all duration-200 text-sm text-left flex items-center justify-between ${
        isActive 
          ? 'bg-indigo-100 text-indigo-900 font-semibold shadow-sm' 
          : 'text-slate-700 hover:bg-slate-100 hover:text-slate-900 font-medium'
      }`}
    >
      <span>{children}</span>
      {isActive && <CheckCircle2 className="w-4 h-4 flex-shrink-0" />}
    </button>
  </li>
), (prev, next) => prev.isActive === next.isActive && prev.children === next.children);

DropdownItem.displayName = 'DropdownItem';

const OptimizedBackground = () => (
  <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden">
    <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-slate-50 via-white to-slate-50" />
    <svg className="absolute inset-0 w-full h-full opacity-[0.03]" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
          <path d="M 40 0 L 0 0 0 40" fill="none" stroke="currentColor" strokeWidth="0.5"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)" />
    </svg>
  </div>
);

const HeaderSectionPartPart = memo(() => (
  <div className="mb-10">
    <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-3">
      <div className="flex items-center gap-3.5">
        <div className="p-3 bg-gradient-to-br from-indigo-600 to-indigo-700 rounded-xl shadow-lg flex-shrink-0">
          <BookOpen className="w-6 h-6 text-white" />
        </div>
        <div className="min-w-0">
          <h1 className="text-3xl sm:text-4xl font-black text-slate-900 truncate">
            Luyện Tập
          </h1>
          <p className="text-slate-500 text-sm font-medium leading-tight mt-1">
            Chọn bài tập phù hợp với mục tiêu của bạn
          </p>
        </div>
      </div>
      
      <div className="hidden lg:flex items-center gap-2 px-4 py-2.5 rounded-lg bg-indigo-50 border border-indigo-200">
        <TrendingUp className="w-4 h-4 text-indigo-600" />
        <span className="text-xs font-semibold text-indigo-700">Tiến độ học tập</span>
      </div>
    </div>
    <div className="h-1 w-full bg-gradient-to-r from-indigo-600 via-indigo-500 to-transparent rounded-full" />
  </div>
));

HeaderSectionPartPart.displayName = 'HeaderSectionPartPart';

// ===== EXAM SELECTION MODAL =====
const ExamSelectionModal = memo(({
  isOpen,
  examList,
  selectedExam,
  isLoading,
  onSelectExam,
  onClose
}) => {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-40 flex items-center justify-center md:items-end pointer-events-none">
      {/* Backdrop */}
      <div 
        className="fixed inset-0 bg-black/40 transition-opacity duration-300 pointer-events-auto"
        onClick={onClose}
      />
      
      {/* Modal */}
      <div className="relative bg-white rounded-t-2xl md:rounded-2xl shadow-2xl max-h-[70vh] md:max-h-96 w-full md:w-96 flex flex-col overflow-hidden animate-in fade-in slide-in-from-bottom-5 md:zoom-in-95 duration-300 pointer-events-auto">
        
        {/* Header */}
        <div className="flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-indigo-50 to-slate-50 flex-shrink-0">
          <div>
            <h3 className="text-lg font-bold text-slate-900">Chọn Bộ Đề</h3>
            <p className="text-xs text-slate-500 mt-0.5">{examList.length} bộ đề khả dụng</p>
          </div>
          <button
            onClick={onClose}
            className="p-1.5 hover:bg-slate-200 rounded-lg transition-colors"
          >
            <svg className="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        {/* Exam List */}
        <div className="overflow-y-auto flex-1">
          <ul className="divide-y divide-slate-100 p-2">
            {examList.map(exam => (
              <li key={exam.id}>
                <button
                  onClick={() => onSelectExam(exam.id)}
                  disabled={isLoading}
                  className={`w-full text-left px-4 py-3 transition-all duration-200 flex items-center justify-between hover:bg-indigo-50 ${
                    selectedExam === exam.id 
                      ? 'bg-indigo-50 border-l-4 border-indigo-600' 
                      : 'border-l-4 border-transparent'
                  } disabled:opacity-50`}
                >
                  <div className="flex-1 min-w-0">
                    <p className="font-semibold text-slate-900 truncate">{exam.title}</p>
                    <p className="text-xs text-slate-500 mt-0.5">ID: {exam.id}</p>
                  </div>
                  {selectedExam === exam.id && (
                    <CheckCircle2 className="w-5 h-5 text-indigo-600 flex-shrink-0 ml-2" />
                  )}
                </button>
              </li>
            ))}
          </ul>
        </div>

        {/* Footer */}
        <div className="px-6 py-4 border-t border-slate-200 bg-slate-50 flex-shrink-0">
          <button
            onClick={onClose}
            className="w-full py-2.5 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg transition-colors shadow-sm"
          >
            Xác Nhận
          </button>
        </div>
      </div>
    </div>
  );
});

ExamSelectionModal.displayName = 'ExamSelectionModal';

// ===== HORIZONTAL CONTROL BAR =====
const ControlBar = memo(({
  selectedExam,
  isDropdownOpen,
  isLoading,
  onToggleDropdown,
  onSelectExam,
  examList,
  testType,
  onTestTypeChange
}) => {
  return (
    <div className="relative z-10 mb-10">
      <div className="bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden">
        <div className="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-200">
          
          {/* Exam Selection */}
          <div className="p-6">
            <label className="text-xs font-bold text-slate-600 tracking-wider uppercase block mb-3 flex items-center gap-2">
              <Target className="w-4 h-4 text-indigo-600" />
              Bộ Đề
            </label>
            
            <button
              onClick={onToggleDropdown}
              disabled={isLoading}
              className="w-full flex items-center justify-between bg-slate-50 hover:bg-slate-100 border-2 border-slate-200 hover:border-indigo-400 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 font-semibold rounded-xl px-4 py-3 focus:outline-none transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <span className="truncate text-slate-900 flex items-center gap-2 flex-1 min-w-0">
                {isLoading && <Loader2 className="w-4 h-4 animate-spin text-indigo-600 flex-shrink-0" />}
                <span className="truncate">{selectedExam ? examList.find(e => e.id === selectedExam)?.title : '-- Chọn bộ đề --'}</span>
              </span>
              <ChevronDown className={`w-4 h-4 ml-2 flex-shrink-0 transition-transform duration-300 text-slate-600 ${
                isDropdownOpen ? 'rotate-180 text-indigo-600' : ''
              }`} />
            </button>
          </div>

          {/* Test Type - Segmented Control */}
          <div className="p-6">
            <label className="text-xs font-bold text-slate-600 tracking-wider uppercase block mb-3 flex items-center gap-2">
              <Zap className="w-4 h-4 text-indigo-600" />
              Loại Bài
            </label>
            
            <div className="flex gap-2 bg-slate-100 p-1.5 rounded-xl">
              {['listening', 'reading'].map(type => (
                <button
                  key={type}
                  onClick={() => onTestTypeChange(type)}
                  className={`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 ${
                    testType === type
                      ? 'bg-white text-indigo-700 shadow-md border-2 border-indigo-300'
                      : 'bg-transparent text-slate-700 border-2 border-transparent hover:text-indigo-700'
                  }`}
                >
                  {type === 'listening' ? (
                    <Headphones className="w-4 h-4" />
                  ) : (
                    <BookOpen className="w-4 h-4" />
                  )}
                  <span className="hidden sm:inline">{type === 'listening' ? 'Nghe' : 'Đọc'}</span>
                  <span className="inline sm:hidden">{type === 'listening' ? 'N' : 'Đ'}</span>
                </button>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
});

ControlBar.displayName = 'ControlBar';

// ===== BENTO GRID PART BUTTON =====
const PartButton = memo(({
  partKey,
  info,
  isActive,
  onClick,
  hoveredPart,
  onHover,
  onHoverLeave
}) => {
  const isOtherHovered = hoveredPart && hoveredPart !== partKey;

  return (
    <button
      onClick={onClick}
      onMouseEnter={() => onHover(partKey)}
      onMouseLeave={onHoverLeave}
      className={`
        relative p-5 rounded-2xl transition-all duration-300 border-2 text-left
        overflow-hidden group
        ${isActive
          ? 'bg-white border-indigo-600 shadow-lg scale-100 z-20'
          : 'bg-white/60 border-slate-200 hover:border-indigo-400 shadow-sm hover:shadow-md'
        }
        ${isOtherHovered ? 'opacity-40 scale-95' : 'opacity-100 scale-100'}
      `}
    >
      {/* Background accent */}
      <div className={`absolute inset-0 opacity-0 transition-opacity duration-300 ${
        isActive ? 'bg-gradient-to-br from-indigo-50 to-slate-50' : ''
      }`} />
      
      <div className="relative z-10 space-y-3.5">
        {/* Part Number & Progress */}
        <div className="flex items-center justify-between">
          <div>
            <span className={`text-3xl font-black transition-colors block ${
              isActive ? 'text-indigo-700' : 'text-slate-600'
            }`}>
              {partKey.replace(/part(\d+)/i, 'P$1')}
            </span>
            <p className={`text-xs font-semibold mt-1 transition-colors ${
              isActive ? 'text-indigo-600' : 'text-slate-500'
            }`}>
              Part {partKey.replace(/part(\d+)/i, '$1')}
            </p>
          </div>
          
          {/* Progress Circle */}
          <div className="relative w-10 h-10 flex items-center justify-center flex-shrink-0">
            <svg className="absolute w-full h-full -rotate-90" viewBox="0 0 32 32">
              <circle cx="16" cy="16" r="14" fill="none" stroke={isActive ? '#e0e7ff' : '#f1f5f9'} strokeWidth="2" />
              <circle 
                cx="16" cy="16" r="14" 
                fill="none" 
                stroke={isActive ? '#4f46e5' : '#cbd5e1'} 
                strokeWidth="2" 
                strokeDasharray="87.96" 
                strokeDashoffset={isActive ? '0' : '43.98'}
                className="transition-all duration-500"
              />
            </svg>
            <span className={`text-xs font-bold ${isActive ? 'text-indigo-700' : 'text-slate-600'}`}>
              {Math.floor((info.questions / 30) * 100)}%
            </span>
          </div>
        </div>

        {/* Title */}
        <div>
          <h4 className={`text-sm font-bold line-clamp-2 transition-colors ${
            isActive ? 'text-slate-900' : 'text-slate-700'
          }`}>
            {info.title}
          </h4>
        </div>

        {/* Questions count */}
        <div className={`pt-3 border-t transition-colors ${
          isActive ? 'border-indigo-200' : 'border-slate-200'
        }`}>
          <div className="flex items-center justify-between">
            <div>
              <p className={`text-xs font-semibold ${
                isActive ? 'text-indigo-700' : 'text-slate-600'
              }`}>
                {info.questions} câu
              </p>
            </div>
            {isActive && <CheckCircle2 className="w-4 h-4 text-indigo-600" />}
          </div>
        </div>
      </div>
    </button>
  );
}, (prev, next) => {
  return prev.isActive === next.isActive && 
    prev.hoveredPart === next.hoveredPart &&
    prev.info.questions === next.info.questions;
});

PartButton.displayName = 'PartButton';

// ===== PARTS GRID LOADING =====
const PartsGridLoading = () => (
  <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
    {[...Array(8)].map((_, i) => (
      <div key={i} className="p-5 rounded-2xl bg-slate-100 animate-pulse border-2 border-slate-200 space-y-4">
        <div className="h-10 bg-slate-300 rounded-lg w-2/3" />
        <div className="h-4 bg-slate-200 rounded" />
        <div className="h-3 bg-slate-200 rounded w-3/4" />
        <div className="h-3 bg-slate-200 rounded w-1/2" />
      </div>
    ))}
  </div>
);

const PartsGrid = memo(({
  availableParts,
  partInfoMap,
  selectedPart,
  onPartChange,
  isLoading
}) => {
  const [hoveredPart, setHoveredPart] = useState(null);

  if (isLoading) {
    return <PartsGridLoading />;
  }

  if (availableParts.length === 0) {
    return (
      <div className="text-center py-12 bg-white border-2 border-dashed border-slate-300 rounded-2xl shadow-sm">
        <div className="w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4">
          <BookOpen className="w-6 h-6 text-slate-400" />
        </div>
        <p className="text-slate-600 font-semibold">Vui lòng chọn bộ đề</p>
        <p className="text-xs text-slate-500 mt-1">để xem danh sách các phần thi</p>
      </div>
    );
  }

  return (
    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
      {availableParts.map(partKey => (
        <PartButton
          key={partKey}
          partKey={partKey}
          info={partInfoMap[partKey]}
          isActive={selectedPart === partKey}
          onClick={() => onPartChange(partKey)}
          hoveredPart={hoveredPart}
          onHover={setHoveredPart}
          onHoverLeave={() => setHoveredPart(null)}
        />
      ))}
    </div>
  );
}, (prev, next) => {
  return prev.selectedPart === next.selectedPart &&
    prev.availableParts.length === next.availableParts.length &&
    prev.isLoading === next.isLoading;
});

PartsGrid.displayName = 'PartsGrid';

// ===== PART DETAILS CARD (Summary Panel) =====
const PartDetailsCard = memo(({ partData, testType, isLoading }) => {
  if (isLoading) {
    return (
      <div className="bg-white rounded-2xl overflow-hidden shadow-sm border border-slate-200 p-12 flex items-center justify-center">
        <Loader2 className="w-8 h-8 text-indigo-600 animate-spin" />
      </div>
    );
  }

  if (!partData) return null;

  const stats = [
    {
      label: 'Câu hỏi',
      value: partData.questions?.length || 0,
      icon: ListChecks,
      color: 'text-indigo-600',
      bgColor: 'bg-indigo-50'
    },
    {
      label: 'Loại bài',
      value: testType === 'listening' ? 'Nghe' : 'Đọc',
      icon: testType === 'listening' ? Headphones : BookOpen,
      color: 'text-emerald-600',
      bgColor: 'bg-emerald-50'
    },
    {
      label: 'Điểm/Câu',
      value: testType === 'listening' ? '~5' : '~2.5',
      icon: Award,
      color: 'text-amber-600',
      bgColor: 'bg-amber-50'
    }
  ];

  const tips = testType === 'listening' 
    ? [
        'Đọc câu hỏi trước khi nghe để biết cần tìm gì',
        'Chú ý các từ khóa và cấu trúc câu',
        'Nghe toàn bộ phần rồi mới trả lời, đừng đoán',
        'Ghi chú nhanh gọn trong quá trình nghe'
      ]
    : [
      'Scan bài đọc để hiểu cấu trúc chung trước',
      'Định vị từ khóa từ câu hỏi trong bài',
      'Đọc các dòng xung quanh để hiểu ngữ cảnh',
      'Loại bỏ đáp án sai rõ ràng trước tiên'
    ];

  return (
    <div className="space-y-8">
      {/* Main Details Card */}
      <div className="bg-white rounded-2xl overflow-hidden shadow-sm border border-slate-200">
        {/* Header */}
        <div className="px-6 sm:px-8 py-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-white">
          <div className="flex items-start gap-4 mb-4">
            <div className={`p-3 rounded-xl flex-shrink-0 ${
              testType === 'listening' ? 'bg-purple-100' : 'bg-teal-100'
            }`}>
              {testType === 'listening' ? (
                <Headphones className="w-6 h-6 text-purple-700" strokeWidth={2} />
              ) : (
                <BookOpen className="w-6 h-6 text-teal-700" strokeWidth={2} />
              )}
            </div>
            <div className="flex-1 min-w-0">
              <p className="text-xs font-bold text-slate-600 uppercase mb-1.5 tracking-wider">
                Chi tiết phần thi
              </p>
              <h3 className="text-xl font-bold text-slate-900 line-clamp-1">
                {partData.title}
              </h3>
              <p className="text-sm text-slate-600 line-clamp-2 mt-2">
                {partData.description}
              </p>
            </div>
          </div>
        </div>

        {/* Stats Grid */}
        <div className="p-6 sm:p-8 grid grid-cols-3 gap-4">
          {stats.map((stat, idx) => {
            const Icon = stat.icon;
            return (
              <div 
                key={idx}
                className={`${stat.bgColor} border border-slate-200 rounded-xl p-4 transition-all duration-300 hover:shadow-md hover:scale-105`}
              >
                <div className="flex items-center gap-2 mb-3">
                  <Icon className={`w-5 h-5 ${stat.color}`} strokeWidth={2} />
                </div>
                <p className="text-xs font-bold text-slate-600 uppercase tracking-wider mb-2">
                  {stat.label}
                </p>
                <p className="text-2xl sm:text-3xl font-black text-slate-900">
                  {stat.value}
                </p>
              </div>
            );
          })}
        </div>

        {/* Footer Info */}
        <div className="px-6 sm:px-8 py-4 bg-slate-50 border-t border-slate-200 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
          <div className="flex items-center gap-2 text-xs text-slate-600 font-medium">
            <Clock className="w-3.5 h-3.5 flex-shrink-0" />
            Thời gian: ~{testType === 'listening' ? '30' : '50'} phút
          </div>
          <div className="text-xs font-semibold text-indigo-700 px-3 py-1.5 bg-indigo-50 rounded-full border border-indigo-200">
            {testType === 'listening' ? 'Kỹ năng Nghe' : 'Kỹ năng Đọc'}
          </div>
        </div>
      </div>

      {/* Tips Card */}
      <div className="bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 rounded-2xl shadow-sm border border-amber-200 overflow-hidden">
        {/* Header */}
        <div className="px-6 sm:px-8 py-4 border-b border-amber-200 bg-gradient-to-r from-amber-100 to-yellow-100 flex items-center gap-3">
          <div className="p-2.5 rounded-lg bg-amber-200/50 flex-shrink-0">
            <Lightbulb className="w-5 h-5 text-amber-700" strokeWidth={2} />
          </div>
          <div>
            <h4 className="text-sm font-bold text-amber-900">💡 Mẹo {testType === 'listening' ? 'Nghe' : 'Đọc'} Hiệu Quả</h4>
            <p className="text-xs text-amber-700 mt-0.5">Áp dụng những mẹo này để đạt điểm cao hơn</p>
          </div>
        </div>

        {/* Tips Content */}
        <div className="p-6 sm:p-8">
          <div className="space-y-3">
            {tips.map((tip, idx) => (
              <div key={idx} className="flex gap-3.5 items-start group">
                {/* Number Badge */}
                <div className="flex-shrink-0 w-7 h-7 rounded-full bg-amber-200 border-2 border-amber-300 flex items-center justify-center">
                  <span className="text-xs font-bold text-amber-900">{idx + 1}</span>
                </div>
                
                {/* Tip Text */}
                <div className="flex-1 pt-0.5">
                  <p className="text-sm text-amber-900 font-medium leading-relaxed">
                    {tip}
                  </p>
                </div>
              </div>
            ))}
          </div>

          {/* Motivational Message */}
          <div className="mt-6 pt-6 border-t border-amber-200">
            <p className="text-xs text-amber-800 font-medium text-center italic">
              "Luyện tập thường xuyên với các mẹo trên sẽ giúp bạn cải thiện kỹ năng đáng kể! 🌟"
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}, (prev, next) => {
  return prev.partData?.title === next.partData?.title && 
    prev.testType === next.testType && 
    prev.isLoading === next.isLoading;
});

PartDetailsCard.displayName = 'PartDetailsCard';

// ===== MAIN COMPONENT =====

const PartSelector = React.memo(({
  selectedExam = 'exam1',
  onExamChange = () => {},
  testType = 'listening',
  onTestTypeChange = () => {},
  selectedPart = 'part1',
  onPartChange = () => {}
}) => {
  const [isExamDropdownOpen, setIsExamDropdownOpen] = useState(false);
  const [examData, setExamData] = useState(null);
  const [isLoading, setIsLoading] = useState(false);
  const [examList] = useState(() => getAllExamMetadata());

  useEffect(() => {
    let cancelled = false;

    const loadData = async () => {
      if (!selectedExam) {
        setExamData(null);
        return;
      }

      setIsLoading(true);
      
      try {
        const data = await loadExamData(selectedExam);
        
        if (!cancelled) {
          setExamData(data);
          
          const currentIndex = examList.findIndex(e => e.id === selectedExam);
          if (currentIndex < examList.length - 1) {
            preloadExamData(examList[currentIndex + 1].id);
          }
        }
      } catch (error) {
        console.error('Error loading exam:', error);
        if (!cancelled) {
          setExamData(null);
        }
      } finally {
        if (!cancelled) {
          setIsLoading(false);
        }
      }
    };

    loadData();

    return () => {
      cancelled = true;
    };
  }, [selectedExam, examList]);

  const partInfoMap = useMemo(() => {
    if (!examData?.parts) return {};
    
    const map = {};
    const parts = Object.entries(examData.parts);
    
    for (let i = 0; i < parts.length; i++) {
      const [part, data] = parts[i];
      if (data.type === testType) {
        map[part] = {
          title: data.title || part,
          questions: data.questions?.length || 0,
          description: data.description || ''
        };
      }
    }
    return map;
  }, [examData, testType]);

  const availableParts = useMemo(
    () => Object.keys(partInfoMap),
    [partInfoMap]
  );

  const partData = useMemo(
    () => examData?.parts?.[selectedPart] || null,
    [examData, selectedPart]
  );

  const handleExamChange = useCallback((examKey) => {
    onExamChange({ target: { value: examKey } });
    setIsExamDropdownOpen(false);
  }, [onExamChange]);

  const handleTestTypeChange = useCallback((type) => {
    onTestTypeChange({ target: { value: type } });
  }, [onTestTypeChange]);

  const handlePartChange = useCallback((partKey) => {
    onPartChange({ target: { value: partKey } });
  }, [onPartChange]);

  const handleToggleDropdown = useCallback(() => {
    setIsExamDropdownOpen(prev => !prev);
  }, []);

  return (
    <div className="w-full bg-white relative overflow-visible">
      <OptimizedBackground />

      <div className="relative max-w-7xl mx-auto z-10 p-6 sm:p-8 lg:p-10">         
        <HeaderSectionPartPart /> 
        
        {/* Exam Selection Modal */}
        <ExamSelectionModal
          isOpen={isExamDropdownOpen}
          examList={examList}
          selectedExam={selectedExam}
          isLoading={isLoading}
          onSelectExam={handleExamChange}
          onClose={() => setIsExamDropdownOpen(false)}
        />
        
        {/* Control Bar - Exam & Test Type */}
        <ControlBar
          selectedExam={selectedExam}
          isDropdownOpen={isExamDropdownOpen}
          isLoading={isLoading}
          onToggleDropdown={handleToggleDropdown}
          onSelectExam={handleExamChange}
          examList={examList}
          testType={testType}
          onTestTypeChange={handleTestTypeChange}
        />

        {/* Parts Section */}
        {selectedExam && (
          <div className="mb-10">
            <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-6">
              <div className="flex items-center gap-3">
                <div className="p-2.5 bg-indigo-100 rounded-xl flex-shrink-0">
                  <ListChecks className="w-5 h-5 text-indigo-700" />
                </div>
                <div className="min-w-0">
                  <h2 className="text-xl font-bold text-slate-900">Chọn phần thi</h2>
                  <p className="text-xs text-slate-500 mt-0.5">Có {availableParts.length} phần {testType === 'listening' ? 'Nghe' : 'Đọc'}</p>
                </div>
              </div>
              <span className="text-xs font-bold text-indigo-700 px-4 py-2 bg-indigo-100 rounded-full border border-indigo-300 whitespace-nowrap">
                {availableParts.length} phần thi
              </span>
            </div>

            <PartsGrid
              availableParts={availableParts}
              partInfoMap={partInfoMap}
              selectedPart={selectedPart}
              onPartChange={handlePartChange}
              isLoading={isLoading}
            />
          </div>
        )}

        {/* Part Details */}
        <PartDetailsCard
          partData={partData}
          testType={testType}
          isLoading={isLoading}
        />
      </div>
    </div>
  );
});

PartSelector.displayName = 'PartSelector';

export default PartSelector;
</file>

<file path="src/components/Display/ScriptDisplay.jsx">
import React, { useState, memo, useRef, useEffect } from 'react';
  import { Play, Pause, Square, Volume2, VolumeX, AlertCircle, Loader2, ChevronDown, Info } from 'lucide-react';
  import { useAudioPlayer } from '../../hooks/useAudioPlayer';

  // ==================== STATE COMPONENTS ====================
  const ErrorState = memo(({ error, onRetry }) => (
    <div className="w-full bg-red-50 border-2 border-red-200 rounded-xl p-6">
      <div className="flex items-start gap-3">
        <AlertCircle className="w-6 h-6 text-red-500 flex-shrink-0 mt-1" />
        <div className="flex-1">
          <h3 className="font-semibold text-red-900 mb-1">Error Loading Audio</h3>
          <p className="text-sm text-red-700 mb-3">{error}</p>
          {onRetry && (
            <button
              onClick={onRetry}
              className="inline-flex items-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg transition-all active:scale-95"
            >
              Try Again
            </button>
          )}
        </div>
      </div>
    </div>
  ));
  ErrorState.displayName = 'ErrorState';

  const LoadingState = memo(() => (
    <div className="w-full flex items-center justify-center p-6 bg-slate-50 rounded-xl border border-slate-200">
      <div className="flex flex-col items-center gap-3">
        <Loader2 className="w-8 h-8 text-blue-500 animate-spin" />
        <p className="text-sm text-slate-600 font-medium">Loading audio...</p>
      </div>
    </div>
  ));
  LoadingState.displayName = 'LoadingState';

  // ==================== PROGRESS BAR ====================
  const ProgressBar = memo(({
    currentTime,
    duration,
    onSeek,
    isDisabled
  }) => {
    const containerRef = useRef(null);

    const handleClick = (e) => {
      if (!containerRef.current || isDisabled) return;
      const rect = containerRef.current.getBoundingClientRect();
      const percent = (e.clientX - rect.left) / rect.width;
      const newTime = percent * duration;
      onSeek(newTime);
    };

    const handleMouseDown = (e) => {
      handleClick(e);
    };

    const percent = duration > 0 ? (currentTime / duration) * 100 : 0;

    return (
      <div
        ref={containerRef}
        onClick={handleClick}
        onMouseDown={handleMouseDown}
        className={`w-full h-2 bg-slate-200 rounded-full cursor-pointer hover:h-3 transition-all ${
          isDisabled ? 'opacity-50 cursor-not-allowed' : ''
        }`}
      >
        <div
          className="h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all"
          style={{ width: `${percent}%` }}
        />
      </div>
    );
  });
  ProgressBar.displayName = 'ProgressBar';

  // ==================== VOLUME CONTROL ====================
  const VolumeControl = memo(({ volume, onVolumeChange }) => {
    const [showVolumeSlider, setShowVolumeSlider] = useState(false);

    return (
      <div className="relative flex items-center gap-2">
        <button
          onClick={() => setShowVolumeSlider(!showVolumeSlider)}
          className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
          title={volume === 0 ? 'Unmute' : 'Mute'}
        >
          {volume === 0 ? (
            <VolumeX className="w-4 h-4 text-slate-600" />
          ) : (
            <Volume2 className="w-4 h-4 text-slate-600" />
          )}
        </button>

        {showVolumeSlider && (
          <div className="absolute bottom-full mb-2 left-0 bg-white border border-slate-200 rounded-lg shadow-lg p-2">
            <input
              type="range"
              min="0"
              max="1"
              step="0.1"
              value={volume}
              onChange={(e) => onVolumeChange(parseFloat(e.target.value))}
              className="w-20 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"
              style={{
                background: `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${volume * 100}%, #e2e8f0 ${volume * 100}%, #e2e8f0 100%)`
              }}
            />
          </div>
        )}
      </div>
    );
  });
  VolumeControl.displayName = 'VolumeControl';

  // ==================== CONTROL BUTTONS ====================
  const ControlButtons = memo(({
    isPlaying,
    isPaused,
    isLoading,
    isDisabled,
    onPlay,
    onPause,
    onStop,
    volume,
    onVolumeChange
  }) => (
    <div className="flex items-center gap-3 w-full">
      {!isPlaying ? (
        <button
          onClick={onPlay}
          disabled={isDisabled || isLoading}
          className="flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 disabled:from-slate-300 disabled:to-slate-400 text-white font-semibold py-3 rounded-lg transition-all duration-200 active:scale-95 disabled:cursor-not-allowed flex items-center justify-center gap-2"
          title="Play"
        >
          {isLoading ? (
            <>
              <Loader2 className="w-5 h-5 animate-spin" />
              <span className="text-sm">Loading...</span>
            </>
          ) : (
            <>
              <Play className="w-5 h-5 fill-current" />
              <span className="text-sm">Play</span>
            </>
          )}
        </button>
      ) : (
        <>
          <button
            onClick={onPause}
            className="flex-1 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-semibold py-3 rounded-lg transition-all duration-200 active:scale-95 flex items-center justify-center gap-2"
            title="Pause"
          >
            <Pause className="w-5 h-5 fill-current" />
            <span className="text-sm">Pause</span>
          </button>
          <button
            onClick={onStop}
            className="flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold py-3 rounded-lg transition-all duration-200 active:scale-95 flex items-center justify-center gap-2"
            title="Stop"
          >
            <Square className="w-5 h-5 fill-current" />
            <span className="text-sm">Stop</span>
          </button>
        </>
      )}

      <VolumeControl volume={volume} onVolumeChange={onVolumeChange} />
    </div>
  ));
  ControlButtons.displayName = 'ControlButtons';

  // ==================== SCRIPT CONTENT ====================
  const ScriptContent = memo(({ script }) => {
    const lines = script.split('\n').filter(line => line.trim());

    return (
      <div className="flex-1 overflow-y-auto p-8 space-y-6 min-h-0">
        {lines.map((line, index) => {
          const isSpeaker = line.includes(':') && !line.startsWith(' ');
          const trimmedLine = line.trim();

          return (
            <div key={index} className="flex gap-4">
              {isSpeaker ? (
                <>
                  <div className="flex-shrink-0 text-2xl">👤</div>
                  <div className="flex-1 min-w-0">
                    <p className="text-xs font-bold text-blue-600 uppercase tracking-widest mb-2">
                      {trimmedLine.split(':')[0].trim()}
                    </p>
                    <p className="text-base text-slate-800 leading-relaxed break-words font-medium">
                      {trimmedLine.split(':').slice(1).join(':').trim()}
                    </p>
                  </div>
                </>
              ) : (
                <div className="flex-1 min-w-0">
                  <p className="text-sm text-slate-600 leading-relaxed break-words italic">
                    {trimmedLine}
                  </p>
                </div>
              )}
            </div>
          );
        })}
      </div>
    );
  });
  ScriptContent.displayName = 'ScriptContent';

  // ==================== MAIN COMPONENT ====================
  const ScriptDisplay = memo(({
    script = '',
    audioUrl = null,
    partTitle = 'Script',
    onAudioEnd = null,
  }) => {
    const {
      isPlaying,
      isPaused,
      isLoading,
      currentTime,
      duration,
      volume,
      error,
      play,
      pause,
      stop,
      seek,
      setVolume,
      formatTime,
    } = useAudioPlayer(audioUrl);

    const [showScript, setShowScript] = useState(false);
    const [hasPlayedOnce, setHasPlayedOnce] = useState(false);

    // Track when audio ends
    useEffect(() => {
      if (!isPlaying && hasPlayedOnce && duration > 0 && currentTime >= duration - 0.1) {
        // Audio finished
        onAudioEnd?.();
      }
    }, [isPlaying, hasPlayedOnce, duration, currentTime, onAudioEnd]);

    const hasAudio = audioUrl && audioUrl.trim().length > 0;

    if (!script) {
      return (
        <div className="w-full bg-slate-50 border-2 border-slate-200 rounded-xl p-8 text-center">
          <div className="w-16 h-16 rounded-xl bg-slate-100 flex items-center justify-center mx-auto mb-4">
            <AlertCircle className="w-8 h-8 text-slate-400" />
          </div>
          <p className="text-slate-900 font-bold text-lg">No Script Available</p>
          <p className="text-slate-600 text-sm mt-2">Script content will be available soon</p>
        </div>
      );
    }

    return (
      <div className="w-full bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col relative z-30">
        {/* Header */}
        <div className="flex-shrink-0 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-slate-200 px-6 py-5 rounded-t-2xl">
          <div className="flex items-center justify-between gap-4">
            <div className="flex-1">
              <h1 className="text-2xl md:text-3xl font-bold text-slate-900">{partTitle}</h1>
              <p className="text-sm text-slate-600 mt-1">{script.split('\n').filter(line => line.trim()).length} lines</p>
            </div>

            {/* Time Info */}
            {hasAudio && (
              <div className="flex items-center justify-between text-xs">
                <div className="flex items-center gap-2">
                  {isPlaying && (
                    <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse" />
                  )}
                  <span className="font-medium text-slate-700 whitespace-nowrap">
                    {formatTime(currentTime)} / {formatTime(duration)}
                  </span>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Audio Section */}
        {hasAudio && (
          <div className="flex-shrink-0 border-b border-slate-200 px-6 py-4 bg-slate-50 space-y-3">
            {error && <ErrorState error={error} />}

            {!error && (
              <>
                {/* Progress Bar */}
                <ProgressBar
                  currentTime={currentTime}
                  duration={duration}
                  onSeek={seek}
                  isDisabled={isLoading}
                />

                {/* Controls */}
                <ControlButtons
                  isPlaying={isPlaying}
                  isPaused={isPaused}
                  isLoading={isLoading}
                  isDisabled={false}
                  onPlay={() => {
                    play();
                    setHasPlayedOnce(true);
                  }}
                  onPause={pause}
                  onStop={stop}
                  volume={volume}
                  onVolumeChange={setVolume}
                />
              </>
            )}
          </div>
        )}

        {/* Script Toggle Button */}
        <div className="flex-shrink-0 px-6 py-3 bg-white border-b border-slate-200 flex items-center justify-between">
          <div className="flex items-center gap-2">
            <Info className="w-4 h-4 text-blue-500" />
            <span className="text-sm font-semibold text-slate-700">
              Bạn có thể tham khảo kịch bản dưới đây
            </span>
          </div>
          <button
            onClick={() => setShowScript(!showScript)}
            className={`inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all duration-300 ${
              showScript
                ? 'bg-blue-500 text-white'
                : 'bg-slate-100 hover:bg-slate-200 text-slate-700'
            }`}
          >
            <span>{showScript ? 'Ẩn' : 'Hiển thị'} Script</span>
            <ChevronDown
              className={`w-4 h-4 transition-transform duration-300 ${
                showScript ? 'rotate-180' : ''
              }`}
            />
          </button>
        </div>

        {/* Script Content - Conditional Render */}
        {showScript && (
          <div className="flex-1 overflow-hidden min-h-[400px] flex flex-col bg-gradient-to-b from-white to-slate-50 border-t border-slate-200 animate-in fade-in duration-300">
            <ScriptContent script={script} />
          </div>
        )}

        {!showScript && (
          <div className="flex-1 flex items-center justify-center py-12 px-6 text-center">
            <div className="space-y-3">
              <div className="w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto">
                <ChevronDown className="w-8 h-8 text-slate-400" />
              </div>
              <p className="text-slate-600 font-medium">Bấm "Hiển thị Script" để xem nội dung</p>
            </div>
          </div>
        )}
      </div>
    );
  });

  ScriptDisplay.displayName = 'ScriptDisplay';

  export default ScriptDisplay;
</file>

<file path="src/components/footer/ScrollToTopButton.jsx">
// import React, { useState, useEffect, useRef } from 'react';
// import { ArrowUp } from 'lucide-react';

// const ScrollToTopButton = () => {
//   const [isVisible, setIsVisible] = useState(false);
//   const [scrollProgress, setScrollProgress] = useState(0);
//   const timeoutRef = useRef(null);

//   useEffect(() => {
//     const handleScroll = () => {
//       const scrolled = window.pageYOffset;
//       const docHeight = document.documentElement.scrollHeight - window.innerHeight;
//       const scrollPercent = docHeight > 0 ? (scrolled / docHeight) * 100 : 0;
      
//       setScrollProgress(scrollPercent);
//       setIsVisible(scrolled > 300);
//     };

//     // Throttle scroll event
//     let ticking = false;
//     const throttledScroll = () => {
//       if (!ticking) {
//         window.requestAnimationFrame(handleScroll);
//         ticking = true;
//         setTimeout(() => { ticking = false; }, 100);
//       }
//     };

//     window.addEventListener('scroll', throttledScroll, { passive: true });
//     return () => window.removeEventListener('scroll', throttledScroll);
//   }, []);

//   const scrollToTop = () => {
//     // Disable button during scroll
//     setIsVisible(false);
    
//     window.scrollTo({
//       top: 0,
//       behavior: 'smooth',
//     });

//     // Re-enable after scroll completes
//     if (timeoutRef.current) clearTimeout(timeoutRef.current);
//     timeoutRef.current = setTimeout(() => {
//       setIsVisible(window.pageYOffset > 300);
//     }, 1000);
//   };

//   return (
//     <>
//       {/* Progress Ring Background */}
//       <div className={`fixed bottom-8 right-8 w-14 h-14 z-40 transition-opacity duration-300 ${
//         isVisible ? 'opacity-100' : 'opacity-0 pointer-events-none'
//       }`}>
//         {/* Outer glow effect */}
//         <div className="absolute inset-0 bg-gradient-to-r from-orange-500 to-amber-500 rounded-full blur-lg opacity-20 group-hover:opacity-30 transition-opacity"></div>
        
//         {/* Progress ring */}
//         <svg className="absolute inset-0 w-full h-full -rotate-90 drop-shadow-lg">
//           <circle
//             cx="28"
//             cy="28"
//             r="26"
//             fill="none"
//             stroke="rgba(255, 255, 255, 0.1)"
//             strokeWidth="2"
//           />
//           <circle
//             cx="28"
//             cy="28"
//             r="26"
//             fill="none"
//             stroke="url(#gradient)"
//             strokeWidth="2"
//             strokeDasharray={`${(scrollProgress / 100) * 163.36} 163.36`}
//             className="transition-all duration-300"
//             strokeLinecap="round"
//           />
//           <defs>
//             <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
//               <stop offset="0%" stopColor="#f97316" />
//               <stop offset="100%" stopColor="#f59e0b" />
//             </linearGradient>
//           </defs>
//         </svg>
//       </div>

//       {/* Main Button */}
//       <button
//         onClick={scrollToTop}
//         disabled={!isVisible}
//         className={`fixed bottom-8 right-8 w-14 h-14 bg-gradient-to-br from-orange-500 to-amber-500 text-white rounded-full shadow-xl hover:shadow-2xl active:shadow-lg transition-all duration-300 z-50 flex items-center justify-center group transform ${
//           isVisible 
//             ? 'opacity-100 translate-y-0 hover:scale-110 active:scale-95' 
//             : 'opacity-0 translate-y-10 pointer-events-none'
//         }`}
//         title="Lên đầu trang"
//         aria-label="Scroll to top"
//       >
//         {/* Animated arrow icon */}
//         <ArrowUp className="w-6 h-6 transition-all duration-300 group-hover:-translate-y-1.5 group-active:translate-y-0.5" />
        
//         {/* Shine effect on hover */}
//         <div className="absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
//           <div className="absolute inset-0 rounded-full bg-gradient-to-r from-white/0 via-white/20 to-white/0 group-hover:animate-pulse"></div>
//         </div>
//       </button>
//     </>
//   );
// };

// export default ScrollToTopButton;
</file>

<file path="src/components/hooks/useTextToSpeech.js">
import { useState, useCallback, useRef, useEffect } from 'react';

export const useTextToSpeech = ({ 
  getSpeakerVoice, 
  synthRef, 
  isScriptPlaying, 
  filteredConversations 
}) => {
  // ==================== STATE ====================
  const [currentPlayingIndex, setCurrentPlayingIndex] = useState(-1);
  const [playingTime, setPlayingTime] = useState(0);
  const [isPaused, setIsPaused] = useState(false);
  
  // ==================== REFS ====================
  const utteranceQueueRef = useRef([]);
  const currentUtteranceRef = useRef(null);
  const isPlayingRef = useRef(false);
  const pausedUtteranceRef = useRef(null);
  const isStoppingRef = useRef(false);
  const isMountedRef = useRef(true);
  const playbackTimeoutRef = useRef(null);
  const retryCountRef = useRef(0);
  const lastSuccessTimeRef = useRef(Date.now());
  
  const metricsRef = useRef({
    totalUtterances: 0,
    totalDuration: 0,
    errorCount: 0,
    interruptCount: 0,
    retryCount: 0
  });

  // ==================== CONSTANTS ====================
  const CONFIG = {
    MAX_RETRY_ATTEMPTS: 3,
    RETRY_DELAY: 300,
    INTER_UTTERANCE_DELAY: 150, // Tăng delay giữa các câu để tự nhiên hơn
    CHUNK_SIZE: 180, // Giảm chunk size để phát âm chính xác hơn
    TIMEOUT_THRESHOLD: 5000,
    MIN_RATE: 0.7, // Tốc độ tối thiểu chậm hơn để rõ ràng
    MAX_RATE: 1.3, // Tốc độ tối đa không quá nhanh
    OPTIMAL_RATE: 0.95, // Tốc độ tối ưu cho sự tự nhiên
  };

  // ==================== SAFETY CHECKS ====================

  const isSynthAvailable = useCallback(() => {
    return synthRef?.current && typeof synthRef.current.speak === 'function';
  }, [synthRef]);

  const safeSetState = useCallback((setter, value) => {
    if (isMountedRef.current) {
      setter(value);
    }
  }, []);

  // ==================== ADVANCED TEXT OPTIMIZATION ====================

  /**
   * 🎨 Tối ưu hóa text cho TTS - Cải thiện chất lượng phát âm
   */
  const optimizeText = useCallback((text) => {
    if (!text || typeof text !== 'string') return '';
    
    return text
      // Normalize whitespace
      .replace(/\s+/g, ' ')
      
      // Fix common abbreviations for better pronunciation
      .replace(/\bMr\./gi, 'Mister')
      .replace(/\bMrs\./gi, 'Missus')
      .replace(/\bMs\./gi, 'Miss')
      .replace(/\bDr\./gi, 'Doctor')
      .replace(/\bProf\./gi, 'Professor')
      .replace(/\bSt\./gi, 'Saint')
      
      // Fix numbers for natural reading
      .replace(/(\d+)%/g, '$1 percent')
      .replace(/\$(\d+)/g, '$1 dollars')
      .replace(/(\d+)°C/g, '$1 degrees Celsius')
      .replace(/(\d+)°F/g, '$1 degrees Fahrenheit')
      
      // Add natural pauses with SSML-like markers (converted to punctuation)
      .replace(/\s*\.\.\.\s*/g, '... ') // Ellipsis pause
      .replace(/\s*--\s*/g, ' — ') // Em dash pause
      
      // Fix sentence spacing for natural rhythm
      .replace(/([.!?])\s+/g, '$1  ') // Double space after sentence
      .replace(/([,;:])\s*/g, '$1 ') // Single space after comma
      
      // Remove problematic characters but keep important punctuation
      .replace(/[^\w\s.,!?'"\-—]/g, '')
      
      // Clean up multiple punctuation
      .replace(/([.!?]){2,}/g, '$1')
      
      // Final trim and normalize
      .trim()
      .replace(/\s+/g, ' ');
  }, []);

  /**
   * 🔪 Chunk text intelligently tại ranh giới tự nhiên
   */
  const chunkText = useCallback((text, maxLength = CONFIG.CHUNK_SIZE) => {
    if (!text || text.length <= maxLength) return [text];

    const chunks = [];
    
    // Ưu tiên cắt tại dấu câu chính
    const sentences = text.match(/[^.!?]+[.!?]+|[^.!?]+$/g) || [text];
    
    let currentChunk = '';
    
    for (const sentence of sentences) {
      const trimmed = sentence.trim();
      if (!trimmed) continue;
      
      // Nếu câu hiện tại + chunk quá dài
      if ((currentChunk + trimmed).length > maxLength) {
        if (currentChunk) {
          chunks.push(currentChunk.trim());
          currentChunk = '';
        }
        
        // Nếu câu đơn lẻ quá dài, cắt tại dấu phẩy
        if (trimmed.length > maxLength) {
          const subParts = trimmed.split(/([,;:])/g);
          let subChunk = '';
          
          for (const part of subParts) {
            if ((subChunk + part).length > maxLength) {
              if (subChunk) chunks.push(subChunk.trim());
              subChunk = part;
            } else {
              subChunk += part;
            }
          }
          
          if (subChunk) currentChunk = subChunk;
        } else {
          currentChunk = trimmed;
        }
      } else {
        currentChunk += (currentChunk ? ' ' : '') + trimmed;
      }
    }
    
    if (currentChunk) chunks.push(currentChunk.trim());
    
    return chunks.length > 0 ? chunks : [text];
  }, []);

  /**
   * 📦 Optimize toàn bộ conversations
   */
  const optimizeConversations = useCallback((conversations, chunkSize = CONFIG.CHUNK_SIZE) => {
    if (!Array.isArray(conversations) || conversations.length === 0) return [];
    
    return conversations.flatMap((conv, convIndex) => {
      if (!conv || !conv.text) return [];
      
      const optimized = optimizeText(conv.text);
      if (!optimized) return [];
      
      const chunks = chunkText(optimized, chunkSize);
      
      return chunks.map((chunk, chunkIndex) => ({
        ...conv,
        text: chunk,
        chunkIndex,
        totalChunks: chunks.length,
        isChunked: chunks.length > 1,
        originalIndex: convIndex,
        // Thêm metadata để xử lý tốt hơn
        isFirstChunk: chunkIndex === 0,
        isLastChunk: chunkIndex === chunks.length - 1
      }));
    });
  }, [optimizeText, chunkText]);

  // ==================== CLEANUP ====================

  const cleanupUtterance = useCallback(() => {
    if (currentUtteranceRef.current) {
      try {
        const utterance = currentUtteranceRef.current;
        utterance.onend = null;
        utterance.onerror = null;
        utterance.onpause = null;
        utterance.onresume = null;
        utterance.onstart = null;
        utterance.onboundary = null;
        currentUtteranceRef.current = null;
      } catch (err) {
        console.warn('⚠️ Error cleaning up utterance:', err);
      }
    }
  }, []);

  const clearPlaybackTimeout = useCallback(() => {
    if (playbackTimeoutRef.current) {
      clearTimeout(playbackTimeoutRef.current);
      playbackTimeoutRef.current = null;
    }
  }, []);

  // ==================== SPEECH CONTROL ====================

  const stopAllSpeech = useCallback(() => {
    isStoppingRef.current = true;
    clearPlaybackTimeout();
    
    try {
      if (isSynthAvailable()) {
        synthRef.current.cancel();
      }
    } catch (err) {
      console.error('❌ Error stopping speech:', err);
    }
    
    // Reset stopping flag sau khi cancel
    playbackTimeoutRef.current = setTimeout(() => {
      isStoppingRef.current = false;
    }, 100);
  }, [synthRef, isSynthAvailable, clearPlaybackTimeout]);

  const pauseScript = useCallback(() => {
    if (!isSynthAvailable()) return;

    try {
      if (synthRef.current.speaking && !synthRef.current.paused) {
        pausedUtteranceRef.current = currentUtteranceRef.current;
        synthRef.current.pause();
        safeSetState(setIsPaused, true);
        isPlayingRef.current = false;
        console.log('⏸️ Script paused');
      }
    } catch (err) {
      console.error('❌ Error pausing speech:', err);
      stopAllSpeech();
    }
  }, [synthRef, isSynthAvailable, stopAllSpeech, safeSetState]);

  const resumeScript = useCallback(() => {
    if (!isSynthAvailable()) return;

    try {
      if (synthRef.current.paused) {
        synthRef.current.resume();
        safeSetState(setIsPaused, false);
        isPlayingRef.current = true;
        console.log('▶️ Script resumed');
      }
    } catch (err) {
      console.error('❌ Error resuming speech:', err);
      // Nếu resume fail, thử phát lại từ vị trí hiện tại
      if (pausedUtteranceRef.current) {
        speakNextInQueue();
      }
    }
  }, [synthRef, isSynthAvailable, safeSetState]);

  const stopScript = useCallback(() => {
    console.log('⏹️ Stopping script');
    stopAllSpeech();
    cleanupUtterance();
    utteranceQueueRef.current = [];
    pausedUtteranceRef.current = null;
    retryCountRef.current = 0;
    safeSetState(setCurrentPlayingIndex, -1);
    safeSetState(setPlayingTime, 0);
    safeSetState(setIsPaused, false);
    isPlayingRef.current = false;
  }, [stopAllSpeech, cleanupUtterance, safeSetState]);

  // ==================== ADVANCED PLAYBACK ====================

  /**
   * 🎙️ Speak next utterance with advanced error handling
   */
  const speakNextInQueue = useCallback(() => {
    // Safety checks
    if (!isSynthAvailable() || !isMountedRef.current) {
      return;
    }

    // Đợi utterance hiện tại kết thúc
    if (currentUtteranceRef.current) {
      return;
    }

    // Queue empty - kết thúc script
    if (utteranceQueueRef.current.length === 0) {
      if (isPlayingRef.current) {
        console.log('✅ Script finished');
        safeSetState(setCurrentPlayingIndex, -1);
        safeSetState(setPlayingTime, 0);
        isPlayingRef.current = false;
      }
      return;
    }

    // Lấy utterance tiếp theo
    const next = utteranceQueueRef.current.shift();
    if (!next || !next.text) {
      return speakNextInQueue();
    }

    // Tìm index trong danh sách gốc
    const newIndex = Array.isArray(filteredConversations) 
      ? filteredConversations.findIndex(
          conv => conv?.speaker === next.speaker && 
                  conv?.text?.includes(next.text.substring(0, 50))
        )
      : -1;

    if (newIndex !== -1) {
      safeSetState(setCurrentPlayingIndex, newIndex);
    }

    // Lấy voice cho speaker
    const voice = getSpeakerVoice(next.speaker);
    if (!voice) {
      console.warn(`⚠️ No voice for ${next.speaker}, skipping`);
      metricsRef.current.errorCount++;
      return speakNextInQueue();
    }

    try {
      // 🎨 Tạo utterance với cấu hình tối ưu
      const utterance = new SpeechSynthesisUtterance(next.text);
      utterance.voice = voice;
      
      // 🎯 Tối ưu hóa tham số cho sự tự nhiên
      const options = next.options || {};
      utterance.rate = Math.max(
        CONFIG.MIN_RATE, 
        Math.min(CONFIG.MAX_RATE, options.rate || CONFIG.OPTIMAL_RATE)
      );
      utterance.pitch = Math.max(0.8, Math.min(1.2, options.pitch || 1));
      utterance.volume = Math.max(0.8, Math.min(1, options.volume || 1));
      utterance.lang = voice.lang || 'en-US';

      currentUtteranceRef.current = utterance;
      lastSuccessTimeRef.current = Date.now();
      
      // 📊 Update metrics
      safeSetState(setPlayingTime, prev => prev + 1);

      // ==================== EVENT HANDLERS ====================

      utterance.onstart = () => {
        if (!isMountedRef.current) return;
        retryCountRef.current = 0; // Reset retry khi bắt đầu thành công
        console.log(`🎤 Speaking: "${next.text.substring(0, 30)}..."`);
      };

      utterance.onend = () => {
        if (!isMountedRef.current) return;
        
        // 📊 Metrics
        metricsRef.current.totalUtterances++;
        const duration = Date.now() - lastSuccessTimeRef.current;
        metricsRef.current.totalDuration += duration;
        
        console.log(`✓ Finished (${duration}ms)`);
        
        cleanupUtterance();
        
        // ⏭️ Tiếp tục với delay tự nhiên
        if (isPlayingRef.current) {
          const delay = next.isLastChunk 
            ? CONFIG.INTER_UTTERANCE_DELAY * 1.5  // Pause dài hơn giữa các speaker
            : CONFIG.INTER_UTTERANCE_DELAY;       // Pause ngắn trong cùng speaker
          
          playbackTimeoutRef.current = setTimeout(() => {
            if (isMountedRef.current && isPlayingRef.current) {
              speakNextInQueue();
            }
          }, delay);
        }
      };

      utterance.onerror = (event) => {
        if (!isMountedRef.current) return;
        
        const errorType = event.error;
        console.warn(`⚠️ Speech error: ${errorType}`);
        
        // Xử lý interrupted khi đang stopping
        if (errorType === 'interrupted' && isStoppingRef.current) {
          cleanupUtterance();
          return;
        }

        // Xử lý interrupted khi queue empty (bình thường)
        if (errorType === 'interrupted' && utteranceQueueRef.current.length === 0) {
          cleanupUtterance();
          return;
        }

        // Xử lý canceled
        if (errorType === 'canceled') {
          cleanupUtterance();
          return;
        }

        // Track metrics
        if (errorType === 'interrupted') {
          metricsRef.current.interruptCount++;
        } else {
          metricsRef.current.errorCount++;
        }

        cleanupUtterance();
        
        // 🔄 Retry logic cho các lỗi khác
        if (errorType !== 'interrupted' && 
            errorType !== 'canceled' && 
            retryCountRef.current < CONFIG.MAX_RETRY_ATTEMPTS) {
          
          retryCountRef.current++;
          metricsRef.current.retryCount++;
          
          console.log(`🔄 Retry attempt ${retryCountRef.current}/${CONFIG.MAX_RETRY_ATTEMPTS}`);
          
          // Đưa utterance lại vào đầu queue
          utteranceQueueRef.current.unshift(next);
          
          playbackTimeoutRef.current = setTimeout(() => {
            if (isMountedRef.current && isPlayingRef.current) {
              speakNextInQueue();
            }
          }, CONFIG.RETRY_DELAY);
        } else {
          // Đã hết retry hoặc lỗi không retry được
          if (retryCountRef.current >= CONFIG.MAX_RETRY_ATTEMPTS) {
            console.error(`❌ Max retries reached for: "${next.text.substring(0, 30)}..."`);
          }
          
          // Skip và tiếp tục
          if (isPlayingRef.current) {
            playbackTimeoutRef.current = setTimeout(() => {
              if (isMountedRef.current) {
                retryCountRef.current = 0;
                speakNextInQueue();
              }
            }, CONFIG.RETRY_DELAY);
          }
        }
      };

      // 🎯 Speak!
      synthRef.current.speak(utterance);
      
    } catch (err) {
      console.error('❌ Error creating utterance:', err);
      metricsRef.current.errorCount++;
      cleanupUtterance();
      
      // Retry hoặc skip
      if (retryCountRef.current < CONFIG.MAX_RETRY_ATTEMPTS) {
        retryCountRef.current++;
        utteranceQueueRef.current.unshift(next);
        
        playbackTimeoutRef.current = setTimeout(() => {
          if (isMountedRef.current) {
            speakNextInQueue();
          }
        }, CONFIG.RETRY_DELAY);
      } else {
        retryCountRef.current = 0;
        playbackTimeoutRef.current = setTimeout(() => {
          if (isMountedRef.current) {
            speakNextInQueue();
          }
        }, CONFIG.RETRY_DELAY);
      }
    }
  }, [
    synthRef, 
    getSpeakerVoice, 
    filteredConversations, 
    cleanupUtterance, 
    isSynthAvailable, 
    safeSetState
  ]);

  // ==================== QUEUE MANAGEMENT ====================

  /**
   * 📋 Queue conversations với tối ưu hóa
   */
  const queueConversations = useCallback((conversations, getTTSOptions, autoOptimize = true) => {
    if (!isSynthAvailable() || !Array.isArray(conversations) || conversations.length === 0) {
      console.warn('⚠️ Cannot queue: invalid input or synth unavailable');
      return false;
    }

    try {
      console.log(`📋 Queueing ${conversations.length} conversations`);
      
      // Stop hiện tại
      isStoppingRef.current = true;
      stopAllSpeech();
      cleanupUtterance();
      
      // Reset state
      utteranceQueueRef.current = [];
      pausedUtteranceRef.current = null;
      retryCountRef.current = 0;
      safeSetState(setPlayingTime, 0);

      // Optimize conversations
      const toQueue = autoOptimize 
        ? optimizeConversations(conversations) 
        : conversations;
      
      console.log(`📦 Optimized to ${toQueue.length} chunks`);
      
      // Build queue
      const queue = toQueue
        .filter(conv => conv && conv.text && conv.speaker)
        .map(conv => ({
          text: conv.text,
          speaker: conv.speaker,
          isFirstChunk: conv.isFirstChunk,
          isLastChunk: conv.isLastChunk,
          options: typeof getTTSOptions === 'function' 
            ? getTTSOptions(conv.speaker) 
            : { 
                rate: CONFIG.OPTIMAL_RATE, 
                pitch: 1, 
                volume: 1 
              }
        }));

      if (queue.length === 0) {
        console.warn('⚠️ No valid items to queue');
        isStoppingRef.current = false;
        return false;
      }

      utteranceQueueRef.current = queue;
      isPlayingRef.current = true;
      
      console.log(`✅ Queued ${queue.length} utterances`);
      
      // Reset stopping flag
      playbackTimeoutRef.current = setTimeout(() => {
        isStoppingRef.current = false;
      }, 100);
      
      return true;
      
    } catch (err) {
      console.error('❌ Error queueing conversations:', err);
      isStoppingRef.current = false;
      isPlayingRef.current = false;
      return false;
    }
  }, [
    synthRef, 
    stopAllSpeech, 
    cleanupUtterance, 
    optimizeConversations, 
    isSynthAvailable, 
    safeSetState
  ]);

  // ==================== METRICS ====================

  const getTTSMetrics = useCallback(() => {
    const { totalUtterances, totalDuration, errorCount, interruptCount, retryCount } = metricsRef.current;
    
    const avgDuration = totalUtterances > 0 ? Math.round(totalDuration / totalUtterances) : 0;
    const errorRate = totalUtterances > 0 ? ((errorCount / totalUtterances) * 100).toFixed(2) : '0.00';
    const successRate = totalUtterances > 0 ? (((totalUtterances - errorCount) / totalUtterances) * 100).toFixed(2) : '0.00';
    
    return {
      totalUtterances,
      totalDuration: Math.round(totalDuration / 1000), // Convert to seconds
      errorCount,
      interruptCount,
      retryCount,
      avgDuration,
      errorRate: `${errorRate}%`,
      successRate: `${successRate}%`,
      queueLength: utteranceQueueRef.current.length,
      isPlaying: isPlayingRef.current
    };
  }, []);

  const resetMetrics = useCallback(() => {
    metricsRef.current = {
      totalUtterances: 0,
      totalDuration: 0,
      errorCount: 0,
      interruptCount: 0,
      retryCount: 0
    };
    console.log('📊 Metrics reset');
  }, []);

  const isSpeaking = useCallback(() => {
    return isSynthAvailable() && (synthRef.current?.speaking ?? false);
  }, [synthRef, isSynthAvailable]);

  // ==================== HEALTH CHECK ====================

  /**
   * 🏥 Kiểm tra health của TTS engine
   */
  const checkHealth = useCallback(() => {
    const now = Date.now();
    const timeSinceLastSuccess = now - lastSuccessTimeRef.current;
    
    return {
      isHealthy: isSynthAvailable() && timeSinceLastSuccess < CONFIG.TIMEOUT_THRESHOLD,
      synthAvailable: isSynthAvailable(),
      timeSinceLastSuccess,
      currentUtterance: currentUtteranceRef.current !== null,
      queueLength: utteranceQueueRef.current.length,
      isPlaying: isPlayingRef.current
    };
  }, [isSynthAvailable]);

  // ==================== LIFECYCLE ====================

  useEffect(() => {
    isMountedRef.current = true;
    lastSuccessTimeRef.current = Date.now();
    
    console.log('🎙️ TTS Hook initialized');
    
    return () => {
      console.log('🔚 TTS Hook cleanup');
      isMountedRef.current = false;
      clearPlaybackTimeout();
      stopScript();
    };
  }, [stopScript, clearPlaybackTimeout]);

  // ==================== RETURN ====================

  return {
    // State
    currentPlayingIndex,
    setCurrentPlayingIndex,
    playingTime,
    setPlayingTime,
    isPaused,
    
    // Controls
    pauseScript,
    resumeScript,
    stopScript,
    speakNextInQueue,
    queueConversations,
    isSpeaking,
    
    // Text optimization
    optimizeText,
    chunkText,
    optimizeConversations,
    
    // Metrics & Health
    getTTSMetrics,
    resetMetrics,
    checkHealth,
    
    // Refs (for advanced usage)
    utteranceQueueRef,
    currentUtteranceRef,
    
    // Config
    CONFIG
  };
};
</file>

<file path="src/components/pages/ExamAnswersPage.jsx">
import React, { useState, useEffect, useRef } from 'react';
import { 
  loadExamData, 
  getAllExamMetadata,
  getExamQuestions 
} from '../../data/examData';
import { 
  BookOpen, FileText, CheckCircle, Sparkles, ChevronDown, Award, 
  Target, ChevronUp, Loader2, Search, Filter, Clock, Zap, 
  Brain, X, ChevronRight, BarChart3, Lightbulb, ArrowLeft,
  Home, Bookmark, Download, Eye, Layers, Shield, Trophy, Star
} from 'lucide-react';

// Animated Background Component
const AnimatedBackground = () => {
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = 500;

    const particles = [];
    const particleCount = 35;

    for (let i = 0; i < particleCount; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 1.5 + 0.5,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.3,
        opacity: Math.random() * 0.2 + 0.1,
        color: Math.random() > 0.7 ? '#B45309' : '#78350F',
      });
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      particles.forEach((particle) => {
        particle.x += particle.vx;
        particle.y += particle.vy;

        if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1;
        if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1;

        ctx.beginPath();
        ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
        ctx.fillStyle = particle.color === '#B45309' 
          ? `rgba(180, 83, 9, ${particle.opacity})`
          : `rgba(120, 53, 15, ${particle.opacity})`;
        ctx.fill();
      });

      requestAnimationFrame(animate);
    }

    animate();

    const handleResize = () => {
      canvas.width = window.innerWidth;
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return (
    <canvas
      ref={canvasRef}
      className="absolute inset-0 pointer-events-none"
      style={{ height: '100%' }}
    />
  );
};

// Animated Dropdown Menu Component
const AnimatedDropdown = ({ value, options, onChange, label, icon: Icon, disabled }) => {
  const [isOpen, setIsOpen] = useState(false);
  const dropdownRef = useRef(null);

  useEffect(() => {
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setIsOpen(false);
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  const selectedOption = options.find(opt => opt.value === value);

  return (
    <div ref={dropdownRef} className="relative">
      <label className="flex items-center gap-2 text-sm font-bold text-amber-900 mb-2">
        {Icon && <Icon className="w-4 h-4 text-amber-700" />}
        {label}
      </label>
      
      <button
        onClick={() => !disabled && setIsOpen(!isOpen)}
        disabled={disabled}
        className={`w-full flex items-center justify-between px-4 py-3.5 bg-white text-amber-900 font-semibold rounded-xl border transition-all duration-300 text-sm shadow-sm ${
          disabled 
            ? 'opacity-50 cursor-not-allowed border-amber-200' 
            : 'hover:border-amber-500 hover:shadow-md border-amber-300'
        }`}
      >
        <span className="truncate">{selectedOption?.label || 'Chọn...'}</span>
        <ChevronDown 
          className={`w-5 h-5 text-amber-600 transition-transform duration-300 flex-shrink-0 ${
            isOpen ? 'rotate-180' : ''
          }`}
        />
      </button>

      {/* Animated Dropdown Menu */}
      <div
        className={`absolute z-50 w-full mt-2 bg-white rounded-xl shadow-xl border border-amber-200 overflow-hidden transition-all duration-300 origin-top ${
          isOpen ? 'opacity-100 scale-y-100' : 'opacity-0 scale-y-0 pointer-events-none'
        }`}
      >
        <div className="max-h-64 overflow-y-auto">
          {options.map((option, index) => (
            <button
              key={option.value}
              onClick={() => {
                onChange(option.value);
                setIsOpen(false);
              }}
              className={`w-full px-4 py-3 text-left text-sm font-medium transition-all duration-200 flex items-center gap-3 group ${
                option.value === value
                  ? 'bg-amber-50 text-amber-700'
                  : 'text-amber-900 hover:bg-amber-50'
              }`}
              style={{
                animation: isOpen ? `slideIn 0.3s ease-out ${index * 0.05}s both` : 'none'
              }}
            >
              <div className={`w-2 h-2 rounded-full transition-all duration-200 ${
                option.value === value 
                  ? 'bg-amber-500 scale-100' 
                  : 'bg-amber-300 scale-0 group-hover:scale-100'
              }`} />
              <span className="flex-1 truncate">{option.label}</span>
              {option.value === value && (
                <CheckCircle className="w-4 h-4 text-amber-500" />
              )}
            </button>
          ))}
        </div>
      </div>
    </div>
  );
};

// Explanation Section with Animation
const ExplanationSection = ({ explanation }) => {
  const [isExpanded, setIsExpanded] = useState(false);
  
  if (!explanation) return null;

  const isLongText = explanation.length > 200;
  const previewLength = 200;
  
  const displayText = isExpanded || !isLongText 
    ? explanation 
    : explanation.substring(0, previewLength) + '...';

  return (
    <div className="relative overflow-hidden bg-gradient-to-br from-amber-50 to-amber-100/80 border-t border-amber-200">
      <div className="relative p-5 sm:p-6">
        <div className="flex gap-4">
          <div className="flex-shrink-0">
            <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-lg">
              <Lightbulb className="w-6 h-6 text-white" />
            </div>
          </div>
          <div className="flex-1 min-w-0">
            <div className="flex items-center gap-2 mb-3">
              <h4 className="text-base font-bold text-amber-900">
                Giải Thích Chi Tiết
              </h4>
              <Sparkles className="w-4 h-4 text-amber-500 animate-pulse" />
            </div>
            
            <div 
              className={`prose prose-sm max-w-none transition-all duration-500 ${
                isExpanded ? 'max-h-[2000px]' : 'max-h-[200px]'
              }`}
            >
              <p className="text-sm text-amber-900/90 leading-relaxed whitespace-pre-wrap">
                {displayText}
              </p>
            </div>
            
            {isLongText && (
              <button
                onClick={() => setIsExpanded(!isExpanded)}
                className="mt-4 inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-amber-50 border border-amber-300 hover:border-amber-400 rounded-lg text-sm font-semibold text-amber-700 hover:text-amber-800 transition-all duration-200"
              >
                {isExpanded ? (
                  <>
                    <ChevronUp className="w-4 h-4" />
                    Thu gọn
                  </>
                ) : (
                  <>
                    <ChevronDown className="w-4 h-4" />
                    Xem đầy đủ
                  </>
                )}
              </button>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

// Floating Stats Card
const FloatingStatsCard = ({ icon: Icon, label, value, color, delay }) => {
  return (
    <div 
      className="group bg-white/80 backdrop-blur-sm rounded-2xl p-5 border border-amber-200 hover:border-amber-300 transition-all duration-500 hover:scale-105 cursor-pointer shadow-sm hover:shadow"
      style={{
        animation: `float 3s ease-in-out ${delay}s infinite`
      }}
    >
      <div className={`w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br ${color} flex items-center justify-center shadow-md group-hover:rotate-12 transition-transform duration-300`}>
        <Icon className="w-6 h-6 text-white" />
      </div>
      <p className="text-2xl font-bold text-amber-900 mb-1">{value}</p>
      <p className="text-xs text-amber-700 font-medium">{label}</p>
    </div>
  );
};

const ExamAnswersPage = () => {
  const [selectedExam, setSelectedExam] = useState('exam1');
  const [selectedPart, setSelectedPart] = useState('');
  const [currentExam, setCurrentExam] = useState(null);
  const [parts, setParts] = useState([]);
  const [questions, setQuestions] = useState([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [isLoadingExam, setIsLoadingExam] = useState(false);
  const [isLoadingQuestions, setIsLoadingQuestions] = useState(false);

  const examList = getAllExamMetadata();

  // Function to handle back navigation
  const handleGoBack = () => {
    window.history.back();
  };

  useEffect(() => {
    const loadExam = async () => {
      if (!selectedExam) {
        setCurrentExam(null);
        setParts([]);
        return;
      }

      setIsLoadingExam(true);
      try {
        const examData = await loadExamData(selectedExam);
        setCurrentExam(examData);
        
        if (examData?.parts) {
          setParts(Object.keys(examData.parts));
        } else {
          setParts([]);
        }
        
        setSelectedPart('');
      } catch (error) {
        console.error('Error loading exam:', error);
        setCurrentExam(null);
        setParts([]);
      } finally {
        setIsLoadingExam(false);
      }
    };

    loadExam();
  }, [selectedExam]);

  useEffect(() => {
    const loadQuestions = async () => {
      if (!selectedExam || !selectedPart) {
        setQuestions([]);
        return;
      }

      setIsLoadingQuestions(true);
      try {
        const questionsData = await getExamQuestions(selectedExam, selectedPart);
        setQuestions(questionsData || []);
      } catch (error) {
        console.error('Error loading questions:', error);
        setQuestions([]);
      } finally {
        setIsLoadingQuestions(false);
      }
    };

    loadQuestions();
  }, [selectedExam, selectedPart]);

  const filteredQuestions = questions.filter(q => 
    q.question.toLowerCase().includes(searchQuery.toLowerCase()) ||
    q.options?.some(opt => opt.toLowerCase().includes(searchQuery.toLowerCase()))
  );

  const examOptions = examList.map(exam => ({
    value: exam.id,
    label: exam.title
  }));

  const partOptions = [
    { value: '', label: '-- Chọn phần thi --' },
    ...parts.map(partId => ({
      value: partId,
      label: currentExam?.parts[partId]?.title || partId
    }))
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-50 via-amber-100/50 to-amber-50/30">
      <style>
        {`
          @keyframes slideIn {
            from {
              opacity: 0;
              transform: translateX(-10px);
            }
            to {
              opacity: 1;
              transform: translateX(0);
            }
          }
          @keyframes float {
            0%, 100% {
              transform: translateY(0px);
            }
            50% {
              transform: translateY(-8px);
            }
          }
        `}
      </style>

       

        {/* Modern Header with Animated Background */}
        <div className="relative bg-gradient-to-r from-amber-600 via-amber-500 to-amber-400 overflow-hidden border-b border-amber-300">
          <AnimatedBackground />
          
          <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
            {/* Header Content with proper spacing for back button */}
            <div className="pt-8">
              {/* Header Badge */}
              <div className="flex justify-center mb-6">
                <div className="inline-flex items-center gap-2 px-5 py-2.5 bg-white/20 backdrop-blur-sm rounded-full border border-white/30">
                  <Shield className="w-5 h-5 text-white" />
                  <span className="text-sm font-bold text-amber-900">HỆ THỐNG TRA CỨU ĐÁP ÁN</span>
                </div>
              </div>

              {/* Main Title */}
              <div className="text-center space-y-4 mb-10">
                <div className="flex justify-center mb-4">
                  <div className="w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm border border-white/30 flex items-center justify-center shadow-lg">
                    <BookOpen className="w-10 h-10 text-amber-900" />
                  </div>
                </div>
                <h1 className="text-4xl sm:text-5xl font-bold text-amber-900 tracking-tight">
                  TRA CỨU <span className="text-white">ĐÁP ÁN</span>
                </h1>
                <p className="text-lg text-amber-800/90 max-w-3xl mx-auto leading-relaxed">
                  Hệ thống cung cấp giải thích chi tiết và phân tích chuyên sâu
                </p>
              </div>

              {/* Stats Grid */}
              <div className="grid grid-cols-2 lg:grid-cols-4 gap-4 max-w-5xl mx-auto">
                <FloatingStatsCard 
                  icon={BookOpen} 
                  label="Đề thi" 
                  value={examList.length} 
                  color="from-amber-500 to-amber-600"
                  delay={0}
                />
                <FloatingStatsCard 
                  icon={FileText} 
                  label="Câu hỏi" 
                  value="2000+" 
                  color="from-amber-600 to-amber-700"
                  delay={0.2}
                />
                <FloatingStatsCard 
                  icon={BarChart3} 
                  label="Tỷ lệ đúng" 
                  value="98%" 
                  color="from-amber-700 to-amber-800"
                  delay={0.4}
                />
                <FloatingStatsCard 
                  icon={Award} 
                  label="Chất lượng" 
                  value="A+" 
                  color="from-amber-800 to-amber-900"
                  delay={0.6}
                />
              </div>
            </div>
          </div>
        </div>
    

      {/* Main Content with additional top margin for back button */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {/* Filter Panel */}
        <div className="bg-white rounded-2xl shadow-lg border border-amber-200 p-6 mb-8">
          <div className="flex items-center gap-3 mb-6 pb-4 border-b border-amber-200">
            <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center">
              <Filter className="w-5 h-5 text-white" />
            </div>
            <h2 className="text-xl font-bold text-amber-900">Tìm Kiếm & Lọc</h2>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {/* Custom Animated Dropdowns */}
            <AnimatedDropdown
              value={selectedExam}
              options={examOptions}
              onChange={setSelectedExam}
              label="Chọn Đề Thi"
              icon={BookOpen}
              disabled={isLoadingExam}
            />

            {currentExam && parts.length > 0 && (
              <AnimatedDropdown
                value={selectedPart}
                options={partOptions}
                onChange={setSelectedPart}
                label="Chọn Phần Thi"
                icon={FileText}
                disabled={isLoadingQuestions}
              />
            )}
          </div>

          {/* Search Bar */}
          {selectedPart && questions.length > 0 && (
            <div className="mt-6 relative">
              <div className="flex items-center gap-2 mb-2">
                <Search className="w-4 h-4 text-amber-600" />
                <span className="text-sm font-bold text-amber-900">Tìm kiếm câu hỏi</span>
              </div>
              <div className="relative">
                <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-amber-500" />
                <input
                  type="text"
                  placeholder="Nhập từ khóa tìm kiếm..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className="w-full pl-12 pr-4 py-3.5 bg-amber-50 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all duration-300 text-amber-900 placeholder:text-amber-500/60 font-medium"
                />
                {searchQuery && (
                  <button
                    onClick={() => setSearchQuery('')}
                    className="absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-amber-200 hover:bg-amber-300 flex items-center justify-center transition-colors"
                  >
                    <X className="w-4 h-4 text-amber-700" />
                  </button>
                )}
              </div>
            </div>
          )}
        </div>

        {/* Content Area */}
        {isLoadingQuestions ? (
          <div className="flex flex-col items-center justify-center py-16">
            <div className="relative">
              <Loader2 className="w-16 h-16 text-amber-600 animate-spin" />
              <div className="absolute inset-0 blur-2xl bg-amber-400/20"></div>
            </div>
            <p className="mt-6 text-amber-900 font-semibold text-lg">Đang tải dữ liệu...</p>
          </div>
        ) : selectedPart && filteredQuestions.length > 0 ? (
          <div className="space-y-6 pb-12">
            {/* Part Header */}
            <div className="bg-gradient-to-r from-amber-500 to-amber-600 rounded-2xl p-6 border border-amber-400">
              <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                <div className="flex items-center gap-4">
                  <div className="w-14 h-14 rounded-xl bg-white/20 backdrop-blur-sm border border-white/30 flex items-center justify-center">
                    <Target className="w-7 h-7 text-white" />
                  </div>
                  <div>
                    <h2 className="text-2xl font-bold text-white mb-1">
                      {currentExam.parts[selectedPart].title}
                    </h2>
                    <div className="flex items-center gap-2 text-amber-100">
                      <BookOpen className="w-4 h-4" />
                      <span>{currentExam.title}</span>
                    </div>
                  </div>
                </div>
                <div className="flex gap-4">
                  <div className="bg-white/20 backdrop-blur-sm px-4 py-3 rounded-xl border border-white/30">
                    <p className="text-xs text-amber-100">Tổng số câu</p>
                    <p className="text-2xl font-bold text-white">{filteredQuestions.length}</p>
                  </div>
                  <div className="bg-white/20 backdrop-blur-sm px-4 py-3 rounded-xl border border-white/30">
                    <p className="text-xs text-amber-100">Đã hoàn thành</p>
                    <p className="text-2xl font-bold text-emerald-300">0</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Questions List */}
            <div className="space-y-4">
              {filteredQuestions.map((q, index) => (
                <div
                  key={q.id}
                  className="bg-white rounded-2xl overflow-hidden border border-amber-200 hover:border-amber-300 transition-all duration-300 shadow-sm hover:shadow"
                  style={{
                    animation: `slideIn 0.5s ease-out ${index * 0.1}s both`
                  }}
                >
                  {/* Question Header */}
                  <div className="p-6 border-b border-amber-100">
                    <div className="flex items-start gap-4">
                      <div className="flex-shrink-0">
                        <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-100 to-amber-200 flex items-center justify-center border border-amber-200">
                          <span className="text-amber-900 font-bold text-lg">{q.id}</span>
                        </div>
                      </div>
                      <div className="flex-1">
                        <p className="text-base font-semibold text-amber-900 leading-relaxed">
                          {q.question}
                        </p>
                      </div>
                      <button className="flex-shrink-0 w-10 h-10 rounded-lg bg-amber-100 hover:bg-amber-200 flex items-center justify-center transition-colors">
                        <Bookmark className="w-5 h-5 text-amber-600" />
                      </button>
                    </div>
                  </div>

                  {/* Options */}
                  <div className="p-6 space-y-3">
                    {q.options && q.options.map((opt, i) => (
                      <div
                        key={i}
                        className={`relative p-4 rounded-xl border transition-all duration-300 ${
                          i === q.correct
                            ? 'bg-gradient-to-r from-emerald-50 to-emerald-100/50 border-emerald-300'
                            : 'bg-amber-50/50 border-amber-200 hover:border-amber-300'
                        }`}
                      >
                        <div className="flex items-center gap-4">
                          <div className={`w-10 h-10 rounded-lg flex items-center justify-center font-bold ${
                            i === q.correct
                              ? 'bg-gradient-to-br from-emerald-500 to-emerald-600 text-white'
                              : 'bg-amber-100 text-amber-700'
                          }`}>
                            {String.fromCharCode(65 + i)}
                          </div>
                          <span className={`flex-1 font-medium text-sm ${
                            i === q.correct ? 'text-emerald-900' : 'text-amber-900'
                          }`}>
                            {opt}
                          </span>
                          {i === q.correct && (
                            <div className="flex-shrink-0">
                              <div className="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center">
                                <CheckCircle className="w-5 h-5 text-white" />
                              </div>
                            </div>
                          )}
                        </div>
                        {i === q.correct && (
                          <div className="absolute top-0 right-0 -translate-y-1/2 translate-x-1/2">
                            <div className="bg-gradient-to-br from-emerald-500 to-emerald-600 text-white text-xs font-bold px-2 py-1 rounded">
                              ĐÁP ÁN ĐÚNG
                            </div>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>

                  {/* Explanation Section */}
                  <ExplanationSection explanation={q.explanation} />
                </div>
              ))}
            </div>
          </div>
        ) : selectedPart && searchQuery ? (
          <div className="flex flex-col items-center justify-center py-20">
            <div className="w-24 h-24 bg-gradient-to-br from-amber-100 to-amber-200 rounded-full flex items-center justify-center mb-6 border border-amber-300">
              <Search className="w-12 h-12 text-amber-600" />
            </div>
            <h3 className="text-2xl font-bold text-amber-900 mb-3">Không tìm thấy kết quả</h3>
            <p className="text-amber-700 text-center max-w-md">
              Không có câu hỏi nào phù hợp với "<span className="font-bold text-amber-600">{searchQuery}</span>"
            </p>
          </div>
        ) : selectedPart ? (
          <div className="flex flex-col items-center justify-center py-20">
            <div className="w-24 h-24 bg-gradient-to-br from-amber-100 to-amber-200 rounded-full flex items-center justify-center mb-6 border border-amber-300">
              <FileText className="w-12 h-12 text-amber-600" />
            </div>
            <h3 className="text-2xl font-bold text-amber-900 mb-3">Chưa có dữ liệu</h3>
            <p className="text-amber-700 text-center max-w-md">
              Phần <span className="font-bold text-amber-600">{currentExam?.parts[selectedPart]?.title}</span> đang được cập nhật
            </p>
          </div>
        ) : (
          <div className="flex flex-col items-center justify-center py-24">
            <div className="relative mb-10">
              <div className="w-32 h-32 bg-gradient-to-br from-amber-100 to-amber-200 rounded-full flex items-center justify-center shadow-lg border border-amber-300">
                <BookOpen className="w-16 h-16 text-amber-600" />
              </div>
              <div className="absolute -inset-4 bg-amber-300/10 rounded-full blur-3xl"></div>
            </div>
            <h3 className="text-3xl font-bold text-amber-900 mb-4 text-center">Chào mừng bạn!</h3>
            <p className="text-amber-700 text-center text-xl max-w-2xl leading-relaxed">
              Vui lòng chọn <span className="font-bold text-amber-600">đề thi</span> và <span className="font-bold text-amber-600">phần thi</span> để bắt đầu tra cứu đáp án
            </p>
            <div className="mt-8 grid grid-cols-2 gap-4">
              <div className="flex items-center gap-2 px-4 py-3 bg-gradient-to-br from-amber-50 to-amber-100/50 rounded-xl border border-amber-200">
                <Star className="w-5 h-5 text-amber-600" />
                <span className="text-amber-800">100% miễn phí</span>
              </div>
              <div className="flex items-center gap-2 px-4 py-3 bg-gradient-to-br from-amber-50 to-amber-100/50 rounded-xl border border-amber-200">
                <Layers className="w-5 h-5 text-amber-600" />
                <span className="text-amber-800">Nhiều đề thi</span>
              </div>
            </div>
          </div>
        )}
      </div>

    
    </div>
  );
};

export default ExamAnswersPage;
</file>

<file path="src/components/sections/HeaderSection.jsx">
import React, { useState, useEffect } from 'react';
import { 
  Sparkles, 
  Zap, 
  BookOpen, 
  Headphones, 
  Play,
  Award,
  ChevronRight,
  User,
  LogOut,
  Settings
} from 'lucide-react';

// --- Styles Injection (Cho Animation mượt mà) ---
const styleTag = `
  @keyframes blob {
    0% { transform: translate(0px, 0px) scale(1); }
    33% { transform: translate(30px, -50px) scale(1.1); }
    66% { transform: translate(-20px, 20px) scale(0.9); }
    100% { transform: translate(0px, 0px) scale(1); }
  }
  @keyframes float-slow {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  @keyframes float-delayed {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(10px); }
  }
  .animate-blob { animation: blob 7s infinite; }
  .animation-delay-2000 { animation-delay: 2s; }
  .animation-delay-4000 { animation-delay: 4s; }
  .animate-float-slow { animation: float-slow 4s ease-in-out infinite; }
  .animate-float-delayed { animation: float-delayed 5s ease-in-out infinite; }
`;

// --- Floating Card Component (Vệ tinh) ---
const OrbitCard = ({ icon: Icon, title, subtitle, className, delayClass }) => (
  <div className={`
    absolute hidden lg:flex items-center gap-3 p-3 rounded-2xl 
    bg-white/80 backdrop-blur-md border border-white/50 shadow-lg shadow-blue-500/5
    hover:scale-110 transition-transform duration-300 cursor-default select-none
    ${className} ${delayClass}
  `}>
    <div className="w-10 h-10 rounded-full bg-gradient-to-br from-blue-100 to-indigo-50 flex items-center justify-center text-blue-600">
      <Icon size={20} />
    </div>
    <div>
      <p className="text-xs font-bold text-slate-400 uppercase tracking-wider">{subtitle}</p>
      <p className="text-sm font-bold text-slate-700">{title}</p>
    </div>
  </div>
);

// --- Main Header ---
const HeaderSection = ({ isSignedIn, user, authProvider }) => {
  const [isScrolled, setIsScrolled] = useState(false);
  const [showUserMenu, setShowUserMenu] = useState(false);

  useEffect(() => {
    const handleScroll = () => setIsScrolled(window.scrollY > 20);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  return (
    <div className="relative w-full min-h-[85vh] flex flex-col items-center justify-center overflow-hidden bg-slate-50 font-sans selection:bg-blue-200">
      <style>{styleTag}</style>

      {/* --- 1. Dynamic Background (Màu Prep nhưng sống động) --- */}
      <div className="absolute inset-0 w-full h-full overflow-hidden pointer-events-none">
        {/* Grid nền nhẹ */}
        <div className="absolute inset-0 bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-[size:32px_32px]" />
        
        {/* Các quả cầu màu di chuyển (Blobs) */}
        <div className="absolute top-0 left-1/4 w-96 h-96 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob" />
        <div className="absolute top-0 right-1/4 w-96 h-96 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000" />
        <div className="absolute -bottom-32 left-1/3 w-96 h-96 bg-cyan-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000" />
      </div>

      {/* --- 3. Center Hero Content (Trái tim của giao diện) --- */}
      <div className="relative z-10 text-center max-w-4xl px-4 mt-16 sm:mt-0">
        
        {/* Tagline Badge */}
        <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-50 border border-blue-100 text-blue-700 text-sm font-bold mb-8 animate-float-slow">
          <span className="relative flex h-2.5 w-2.5">
            <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
            <span className="relative inline-flex rounded-full h-2.5 w-2.5 bg-blue-500"></span>
          </span>
          Nền tảng luyện thi thông minh 2026
        </div>

        {/* Big Headline */}
        <h1 className="text-5xl sm:text-6xl md:text-7xl font-black text-slate-900 tracking-tight leading-[1.1] mb-6">
          Luyện thi HUFLIT <br />
          <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-600 bg-[length:200%_auto] animate-blob">
            Không còn nỗi lo.
          </span>
        </h1>

        <p className="text-lg sm:text-xl text-slate-600 max-w-2xl mx-auto mb-10 leading-relaxed">
          Trải nghiệm phòng thi ảo sát thực tế. Ngân hàng đề thi phong phú và phân tích điểm yếu bằng công nghệ AI.
        </p>

        {/* Main CTA - Glow Effect */}
        <div className="relative group inline-block">
          <div className="absolute -inset-1 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl blur opacity-30 group-hover:opacity-70 transition duration-200"></div>
          <button className="relative flex items-center gap-3 px-8 py-4 bg-white rounded-xl leading-none text-slate-900 font-bold border border-slate-200 hover:bg-slate-50 transition-all active:scale-95 shadow-xl">
            <div className="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white">
              <Play className="w-4 h-4 fill-current ml-0.5" />
            </div>
            <span className="text-lg">Bắt đầu thi thử ngay</span>
            <ChevronRight className="w-5 h-5 text-slate-400 group-hover:translate-x-1 transition-transform" />
          </button>
        </div>

        {/* Stats Strip (Mobile Friendly) */}
        <div className="mt-12 pt-8 border-t border-slate-200/60 flex flex-wrap justify-center gap-8 sm:gap-16">
          <div className="text-center">
            <p className="text-2xl font-bold text-slate-900">500+</p>
            <p className="text-sm font-semibold text-slate-500 uppercase tracking-wide">Đề thi</p>
          </div>
          <div className="text-center">
            <p className="text-2xl font-bold text-slate-900">24/7</p>
            <p className="text-sm font-semibold text-slate-500 uppercase tracking-wide">Hỗ trợ</p>
          </div>
          <div className="text-center">
            <p className="text-2xl font-bold text-slate-900">Top 1</p>
            <p className="text-sm font-semibold text-slate-500 uppercase tracking-wide">Uy tín</p>
          </div>
        </div>

      </div>

      {/* --- 4. Orbiting Elements (Vệ tinh trang trí) --- */}
      {/* Vị trí được đặt absolute so với khung hình, tạo cảm giác bao quanh nội dung */}
      
      {/* Trái Trên: Listening */}
      <OrbitCard 
        icon={Headphones} 
        title="Listening Part 1" 
        subtitle="Đang luyện"
        className="top-[20%] left-[10%] -rotate-6"
        delayClass="animate-float-slow"
      />

      {/* Phải Trên: Reading */}
      <OrbitCard 
        icon={BookOpen} 
        title="Reading Part 4" 
        subtitle="Mới nhất"
        className="top-[25%] right-[10%] rotate-3"
        delayClass="animate-float-delayed"
      />

      {/* Trái Dưới: Điểm số */}
      <OrbitCard 
        icon={Award} 
        title="Target: 9.0" 
        subtitle="Mục tiêu"
        className="bottom-[20%] left-[15%] rotate-6"
        delayClass="animate-float-delayed"
      />

      {/* Phải Dưới: Streak */}
      <OrbitCard 
        icon={Zap} 
        title="5 Ngày Streak" 
        subtitle="Chăm chỉ"
        className="bottom-[25%] right-[12%] -rotate-3"
        delayClass="animate-float-slow"
      />

    </div>
  );
};

export default HeaderSection;
</file>

<file path="src/data/exams/exam10.js">
export const EXAM10_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 10 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài về kế hoạch du lịch.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Tom và Emma về kế hoạch du lịch. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Tom: Hey Emma, I heard you're planning a trip next month. Where are you thinking of going?\nEmma: Yes! I'm considering Southeast Asia. I've been saving money for three years to make this dream come true. I'm most interested in visiting Vietnam, Thailand, and Cambodia.\nTom: That sounds amazing! How long will you be gone?\nEmma: About two weeks, I think. But I'm a little worried about the budget. Flights are quite expensive this season, and I'm trying to find the best deals online.\nTom: Have you thought about traveling with a tour group? That might be cheaper than going solo.\nEmma: Actually, I prefer traveling alone. I want complete freedom to explore at my own pace. Tour groups are too rigid for me – they have fixed schedules and I can't really enjoy the local culture in depth.\nTom: I understand. What about accommodation? Hotels can be pricey.\nEmma: True, but I've read that hostels in Southeast Asia are very affordable and provide a great way to meet other travelers. Plus, many hostels offer free breakfast, which saves money.",
      questions: [
        {
          id: 1,
          options: [
            "For three weeks.",
            "For approximately two weeks.",
            "For one week.",
            "For one month."
          ],
          correct: 1,
          explanation: "Emma nói: 'About two weeks, I think.' (Khoảng hai tuần, tôi nghĩ vậy). Đáp án đúng là (B) 'For approximately two weeks'. Ngữ pháp: Present Progressive tense (will be gone). Collocation: 'planning a trip'. Kỹ năng nghe: Xác định khoảng thời gian từ lời thoại."
        },
        {
          id: 2,
          options: [
            "She has been saving for five years.",
            "She has been saving for three years.",
            "She just started saving.",
            "She has been saving for one year."
          ],
          correct: 1,
          explanation: "Emma nói: 'I've been saving money for three years to make this dream come true.' (Tôi đã tiết kiệm tiền trong ba năm để thực hiện ước mơ này). Đáp án đúng là (B). Ngữ pháp: Present Perfect Continuous (have been saving) chỉ hành động bắt đầu trong quá khứ kéo dài đến hiện tại. Collocation: 'save money', 'make a dream come true'. Kỹ năng nghe: Xác định thời gian cụ thể."
        },
        {
          id: 3,
          options: [
            "Vietnam, Malaysia, and Singapore.",
            "Thailand, Cambodia, and Myanmar.",
            "Vietnam, Thailand, and Cambodia.",
            "Vietnam, Thailand, and Laos."
          ],
          correct: 2,
          explanation: "Emma nói: 'I'm most interested in visiting Vietnam, Thailand, and Cambodia.' (Tôi hứng thú nhất với việc thăm Vietnam, Thailand, và Cambodia). Đáp án đúng là (C). Ngữ pháp: Present Progressive (am interested). Collocation: 'interested in visiting'. Kỹ năng nghe: Xác định các địa điểm cụ thể."
        },
        {
          id: 4,
          options: [
            "Tour groups provide free transportation.",
            "Tour groups have flexible schedules.",
            "Tour groups are too rigid and don't allow her to enjoy local culture in depth.",
            "Tour groups are too expensive."
          ],
          correct: 2,
          explanation: "Emma nói: 'Tour groups are too rigid for me – they have fixed schedules and I can't really enjoy the local culture in depth.' (Tour groups quá cứng nhắc với tôi – chúng có những lịch trình cố định và tôi không thể thực sự tận hưởng văn hóa địa phương sâu sắc). Đáp án đúng là (C). Ngữ pháp: Adjective (rigid), Relative Clauses (they have fixed schedules). Collocation: 'local culture', 'enjoy in depth'. Kỹ năng nghe: Hiểu lý do sở thích."
        },
        {
          id: 5,
          options: [
            "Accommodation costs are not important.",
            "Hostels in Southeast Asia are very affordable and offer free breakfast.",
            "Hostels don't meet international standards.",
            "Hotels are always the best choice."
          ],
          correct: 1,
          explanation: "Emma nói: 'I've read that hostels in Southeast Asia are very affordable and provide a great way to meet other travelers. Plus, many hostels offer free breakfast.' (Tôi đã đọc rằng hostels ở Đông Nam Á rất giá cả phải chăng và cung cấp cách tuyệt vời để gặp gỡ các du khách khác. Ngoài ra, nhiều hostels cung cấp bữa sáng miễn phí). Đáp án đúng là (B). Ngữ pháp: Present Perfect (have read), Present Simple (offer). Collocation: 'meet other travelers', 'free breakfast'. Kỹ năng nghe: Xác định thông tin lợi ích."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người tại phòng họp công ty. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: At a business meeting.\nManager: Good morning, everyone. Today we're reviewing the quarterly sales report. Our team exceeded the target by 15%. Ben, can you share the details from the marketing department?\nBen: Absolutely. The digital campaign we launched last month was very successful. We saw a 40% increase in online engagement.\nManager: Excellent! Anna, what about the sales numbers?\nAnna: We had strong sales across all regions. However, the Northwest region underperformed compared to last quarter. We need to investigate why.\nBen: I think the problem might be staffing. The Northwest team lost two experienced salespeople recently.\nManager: That's a valid point. We should prioritize hiring and training new staff there. Anna, when can you have a report ready?\nAnna: I can have the recruitment plan prepared by next Friday. I'll also schedule meetings with the Northwest team to understand their challenges better.\nBen: Great idea. We should also increase marketing support in that region.\nManager: Agreed. Let's reconvene next week to review the action plan. Thank you both for your dedication.",
      questions: [
        {
          id: 6,
          question: "By how much did the team exceed the sales target?",
          options: [
            "By 25%.",
            "By 15%.",
            "By 10%.",
            "By 20%."
          ],
          correct: 1,
          explanation: "Manager nói: 'Our team exceeded the target by 15%.' (Đội của chúng ta vượt quá mục tiêu 15%). Đáp án đúng là (B). Ngữ pháp: Past Simple (exceeded). Collocation: 'exceed target'. Kỹ năng nghe: Xác định con số phần trăm."
        },
        {
          id: 7,
          question: "What was the result of the digital marketing campaign?",
          options: [
            "A 50% decrease in engagement.",
            "A 40% increase in online engagement.",
            "No significant change.",
            "A 20% increase in engagement."
          ],
          correct: 1,
          explanation: "Ben nói: 'We saw a 40% increase in online engagement.' (Chúng tôi thấy tăng 40% trong lượng tương tác trực tuyến). Đáp án đúng là (B). Ngữ pháp: Past Simple (saw), Noun (increase). Collocation: 'digital campaign', 'online engagement'. Kỹ năng nghe: Xác định kết quả chiến dịch."
        },
        {
          id: 8,
          question: "Which region underperformed?",
          options: [
            "The Northeast region.",
            "The Southwest region.",
            "The Northwest region.",
            "The Southeast region."
          ],
          correct: 2,
          explanation: "Anna nói: 'However, the Northwest region underperformed compared to last quarter.' (Tuy nhiên, khu vực Tây Bắc có kết quả kém hơn so với quý trước). Đáp án đúng là (C). Ngữ pháp: Past Simple (underperformed), Adjective (underperformed). Collocation: 'underperform', 'region'. Kỹ năng nghe: Xác định vùng địa lý."
        },
        {
          id: 9,
          question: "What does Ben suggest as the reason for the Northwest region's underperformance?",
          options: [
            "Low product quality.",
            "High customer complaints.",
            "Staffing issues - the team lost experienced salespeople.",
            "Poor marketing support."
          ],
          correct: 2,
          explanation: "Ben nói: 'I think the problem might be staffing. The Northwest team lost two experienced salespeople recently.' (Tôi nghĩ vấn đề có thể là nhân sự. Đội Tây Bắc đã mất hai nhân viên bán hàng giàu kinh nghiệm gần đây). Đáp án đúng là (C). Ngữ pháp: Past Simple (lost), Adjective (experienced). Collocation: 'staffing issues', 'experienced salespeople'. Kỹ năng nghe: Xác định nguyên nhân vấn đề."
        },
        {
          id: 10,
          question: "When will Anna have the recruitment plan ready?",
          options: [
            "By the end of the month.",
            "By next week.",
            "By next Friday.",
            "By tomorrow."
          ],
          correct: 2,
          explanation: "Anna nói: 'I can have the recruitment plan prepared by next Friday.' (Tôi có thể chuẩn bị kế hoạch tuyển dụng vào thứ Sáu tuần tới). Đáp án đúng là (C). Ngữ pháp: Future Simple (can have prepared), Passive Voice (be prepared). Collocation: 'recruitment plan'. Kỹ năng nghe: Xác định thời hạn."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: A company announcement.\nSystem: Attention, all employees. We are pleased to announce our annual company picnic scheduled for next Saturday at Central Park. The event will run from 10 a.m. to 5 p.m. We have arranged various activities including volleyball, badminton, and a barbecue. Bring your family and friends! There is no cost to attend. Please register by Wednesday to help us plan for food quantities. In case of rain, we will reschedule the event to the following weekend. Parking is available at the north entrance, and we strongly recommend carpooling to reduce traffic congestion. A detailed agenda and parking information will be sent via email tomorrow. We look forward to a wonderful day of team building and fun. For more information, contact the HR department.",
      questions: [
        {
          id: 11,
          question: "When is the company picnic scheduled?",
          options: [
            "Next Sunday.",
            "Next Saturday.",
            "The following weekend.",
            "Next Friday."
          ],
          correct: 1,
          explanation: "System nói: 'We are pleased to announce our annual company picnic scheduled for next Saturday at Central Park.' (Chúng tôi rất vui thông báo buổi dã ngoại hàng năm được lên lịch vào thứ Bảy tới tại Central Park). Đáp án đúng là (B). Ngữ pháp: Present Passive (be scheduled), Adjective (annual). Collocation: 'company picnic', 'central park'. Kỹ năng nghe: Xác định ngày tháng."
        },
        {
          id: 12,
          question: "What is the cost of attending the picnic?",
          options: [
            "$50 per employee.",
            "No cost.",
            "$25 per family.",
            "$10 per person."
          ],
          correct: 1,
          explanation: "System nói: 'There is no cost to attend.' (Không có chi phí tham gia). Đáp án đúng là (B). Ngữ pháp: Existential (There is), Negative (no). Collocation: 'cost to attend'. Kỹ năng nghe: Xác định chi phí."
        },
        {
          id: 13,
          question: "What activities are mentioned?",
          options: [
            "Hiking, cycling, and kayaking.",
            "Volleyball, badminton, and a barbecue.",
            "Soccer, basketball, and swimming.",
            "Tennis, golf, and swimming."
          ],
          correct: 1,
          explanation: "System nói: 'We have arranged various activities including volleyball, badminton, and a barbecue.' (Chúng tôi đã sắp xếp các hoạt động khác nhau bao gồm bóng chuyền, cầu lông, và nướng thịt). Đáp án đúng là (B). Ngữ pháp: Present Perfect (have arranged), Including (liên từ). Collocation: 'various activities'. Kỹ năng nghe: Xác định hoạt động."
        },
        {
          id: 14,
          question: "When is the registration deadline?",
          options: [
            "Thursday.",
            "Wednesday.",
            "Friday.",
            "Tuesday."
          ],
          correct: 1,
          explanation: "System nói: 'Please register by Wednesday to help us plan for food quantities.' (Vui lòng đăng ký vào Thứ Tư để giúp chúng tôi lên kế hoạch về số lượng thực phẩm). Đáp án đúng là (B). Ngữ pháp: Imperative (register), Preposition (by). Collocation: 'registration deadline'. Kỹ năng nghe: Xác định thời hạn đăng ký."
        },
        {
          id: 15,
          question: "What will happen if it rains?",
          options: [
            "The event will be shortened.",
            "The event will be rescheduled to the following weekend.",
            "The event will move indoors.",
            "The event will be cancelled."
          ],
          correct: 1,
          explanation: "System nói: 'In case of rain, we will reschedule the event to the following weekend.' (Trong trường hợp mưa, chúng tôi sẽ lên lịch lại sự kiện vào cuối tuần sau). Đáp án đúng là (B). Ngữ pháp: Conditional (in case of), Future Simple (will reschedule), Noun (rain). Collocation: 'in case of rain', 'reschedule event'. Kỹ năng nghe: Xác định kế hoạch dự phòng."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Student 1: Hi Doctor Chen, I wanted to discuss my recent exam grade. I'm not happy with the result.\nDoctor Chen: Of course, let's sit down. What specifically are you concerned about?\nStudent 1: I studied hard, but I think I didn't understand some of the questions. Also, the material covered in the last chapter was confusing.\nDoctor Chen: I see. Which topics were most difficult for you?\nStudent 1: The section on statistical analysis was really challenging. I struggled with the formulas and how to apply them.\nDoctor Chen: That's understandable. Many students find that section challenging. I recommend reviewing the textbook chapter again and watching the online tutorial videos I posted.\nStudent 1: Will that be enough? I'm worried about the final exam.\nDoctor Chen: It should help significantly. Additionally, I can arrange tutoring sessions with a teaching assistant. We have slots available on Mondays and Thursdays after class.\nStudent 1: That would be great! Can I sign up today?\nDoctor Chen: Absolutely. I'll give you the contact information. Work hard, and I'm confident you'll improve. Don't hesitate to reach out if you have questions.",
      questions: [
        {
          id: 16,
          question: "What is the student's main concern?",
          options: [
            "The classroom is too noisy.",
            "The exam was too long.",
            "The student is not happy with the exam grade.",
            "The teacher is unfair in grading."
          ],
          correct: 2,
          explanation: "Student 1 nói: 'Hi Doctor Chen, I wanted to discuss my recent exam grade. I'm not happy with the result.' (Xin chào tiến sĩ Chen, tôi muốn thảo luận về điểm thi gần đây. Tôi không hài lòng với kết quả). Đáp án đúng là (C). Ngữ pháp: Present Perfect (have got), Negative (not happy). Collocation: 'exam grade', 'not happy'. Kỹ năng nghe: Xác định mối quan tâm chính."
        },
        {
          id: 17,
          question: "Which topic did the student find most difficult?",
          options: [
            "Chemistry formulas.",
            "Statistical analysis.",
            "Historical events.",
            "General mathematics."
          ],
          correct: 1,
          explanation: "Student 1 nói: 'The section on statistical analysis was really challenging. I struggled with the formulas and how to apply them.' (Phần về phân tích thống kê thực sự đầy thách thức. Tôi gặp khó khăn với các công thức và cách áp dụng chúng). Đáp án đúng là (B). Ngữ pháp: Past Simple (was), Adjective (challenging). Collocation: 'statistical analysis', 'struggle with formulas'. Kỹ năng nghe: Xác định chủ đề khó."
        },
        {
          id: 18,
          question: "What does Doctor Chen recommend first?",
          options: [
            "Skipping the final exam.",
            "Reviewing the textbook chapter and watching online tutorial videos.",
            "Changing to a different class.",
            "Taking the exam again immediately."
          ],
          correct: 1,
          explanation: "Doctor Chen nói: 'I recommend reviewing the textbook chapter again and watching the online tutorial videos I posted.' (Tôi khuyến nghị xem lại chương sách giáo khoa và xem các video hướng dẫn trực tuyến tôi đã đăng). Đáp án đúng là (B). Ngữ pháp: Present Continuous (recommend + V-ing), Present Perfect (I posted). Collocation: 'review textbook', 'tutorial videos'. Kỹ năng nghe: Xác định gợi ý đầu tiên."
        },
        {
          id: 19,
          question: "When are tutoring sessions available?",
          options: [
            "Wednesday and Saturday evenings.",
            "Monday and Thursday after class.",
            "Tuesday and Friday afternoons.",
            "Monday and Wednesday mornings."
          ],
          correct: 1,
          explanation: "Doctor Chen nói: 'We have slots available on Mondays and Thursdays after class.' (Chúng tôi có các slot trống vào thứ Hai và thứ Năm sau giờ học). Đáp án đúng là (B). Ngữ pháp: Present Simple (have), Preposition (on, after). Collocation: 'tutoring sessions', 'after class'. Kỹ năng nghe: Xác định thời gian khả dụng."
        },
        {
          id: 20,
          question: "What does Doctor Chen offer to do?",
          options: [
            "Excuse the student from the final exam.",
            "Provide contact information for tutoring sessions.",
            "Allow the student to retake the exam.",
            "Give the student a higher grade immediately."
          ],
          correct: 1,
          explanation: "Doctor Chen nói: 'I'll give you the contact information.' (Tôi sẽ cung cấp cho bạn thông tin liên lạc) liên quan đến buổi dạy kèm. Đáp án đúng là (B). Ngữ pháp: Future Simple (will give). Collocation: 'contact information', 'tutoring sessions'. Kỹ năng nghe: Xác định lời đề nghị."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The new software system has proven to be __________ user-friendly, reducing training time significantly.",
          options: ["slightly", "barely", "remarkably", "somewhat"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'remarkably' (một cách đáng chú ý) vì nó diễn tả mức độ cao của tính năng thân thiện. Ngữ pháp: Adverb (remarkably) bổ nghĩa adjective (user-friendly); Present Perfect (has proven). Collocation: 'user-friendly'. Từ vựng: 'barely' (hầu như không), 'slightly' (nhẹ nhàng), 'somewhat' (phần nào) không thể hiện sự tích cực như 'remarkably'."
        },
        {
          id: 22,
          question: "Among the candidates interviewed yesterday, Lisa demonstrated the most __________ leadership qualities.",
          options: ["mediocre", "doubtful", "concerning", "promising"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'promising' (hứa hẹn) vì nó chỉ phẩm chất tích cực. Ngữ pháp: Adjective (promising) bổ nghĩa noun (qualities); Superlative (most). Collocation: 'leadership qualities'. Từ vựng: 'doubtful' (nghi ngờ), 'mediocre' (trung bình), 'concerning' (đáng lo ngại) không phù hợp."
        },
        {
          id: 23,
          question: "The company has been investing in renewable energy __________ it joined the sustainability initiative.",
          options: ["despite", "unless", "while", "since"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'since' (vì, từ khi) chỉ thời điểm bắt đầu. Ngữ pháp: Present Perfect Continuous (has been investing); Time Conjunction (since + Past Simple); Preposition (since). Collocation: 'invest in renewable energy', 'sustainability initiative'. Từ vựng: 'while' (trong khi), 'unless' (trừ khi), 'despite' (mặc dù) không phù hợp."
        },
        {
          id: 24,
          question: "The company's commitment to ethical practices has earned it numerous __________ from international organizations.",
          options: ["complaints", "controversies", "criticisms", "recognitions"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'recognitions' (sự công nhận) vì đi cùng với 'commitment to ethical practices' (cam kết thực hành đạo đức). Ngữ pháp: Present Perfect (has earned); Noun (recognitions). Collocation: 'earn recognition'. Từ vựng: 'criticisms' (chỉ trích), 'controversies' (tranh cãi), 'complaints' (phàn nàn) mang tính tiêu cực."
        },
        {
          id: 25,
          question: "Health and safety protocols are __________ enforced across all department to ensure employee well-being.",
          options: ["informally", "loosely", "carelessly", "strictly"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'strictly' (nghiêm ngặt) vì các quy định an toàn cần được tuân thủ chặt chẽ. Ngữ pháp: Present Simple Passive (are enforced); Adverb (strictly). Collocation: 'enforce protocols', 'employee well-being'. Từ vựng: 'carelessly' (bất cẩn), 'loosely' (lỏng lẻo), 'informally' (không chính thức) không phù hợp."
        },
        {
          id: 26,
          question: "The new office space will __________ state-of-the-art technology and modern furniture.",
          options: ["featuring", "features", "featured", "feature"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'feature' vì đây là động từ nguyên thể sau 'will' (tương lai đơn). Ngữ pháp: Future Simple (will + V); Verb (feature). Collocation: 'feature technology', 'office space'. Từ vựng: 'features' (ngôi thứ ba), 'featured' (quá khứ), 'featuring' (V-ing) không phù hợp."
        },
        {
          id: 27,
          question: "The project must be completed __________ the end of Q3 to meet our strategic objectives.",
          options: ["through", "until", "within", "by"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'by' (vào lúc) chỉ hạn chót thời gian. Ngữ pháp: Passive Voice (must be completed); Preposition (by + thời điểm). Collocation: 'meet objectives', 'strategic objectives'. Từ vựng: 'until' (cho đến), 'through' (xuyên suốt), 'within' (trong vòng) không thể hiện hạn chót."
        },
        {
          id: 28,
          question: "Team members must communicate __________ and transparently to avoid misunderstandings.",
          options: ["occasionally", "poorly", "reluctantly", "effectively"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'effectively' (có hiệu quả) vì nó kết hợp với 'transparently' (một cách minh bạch). Ngữ pháp: Adverb (effectively, transparently) bổ nghĩa verb (communicate). Collocation: 'communicate transparently', 'avoid misunderstandings'. Từ vựng: 'poorly' (kém), 'reluctantly' (miễn cưỡng), 'occasionally' (thỉnh thoảng) không phù hợp."
        },
        {
          id: 29,
          question: "Due to budget constraints, several non-essential positions have been __________.",
          options: ["eliminate", "eliminating", "eliminates", "eliminated"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'eliminated' (quá khứ phân từ) trong thì Present Perfect Passive (have been + V3). Ngữ pháp: Present Perfect Passive (have been eliminated); Verb form. Collocation: 'positions eliminated'. Từ vựng: 'eliminating' (V-ing), 'eliminates' (hiện tại), 'eliminate' (nguyên thể) không phù hợp."
        },
        {
          id: 30,
          question: "The HR department is responsible for maintaining a positive and inclusive workplace __________.",
          options: ["development", "agreement", "environment", "environment"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'environment' (môi trường) vì diễn tả bối cảnh làm việc. Ngữ pháp: Noun (environment); Be responsible for + N + Adjective. Collocation: 'workplace environment', 'positive and inclusive'. Từ vựng: 'development' (phát triển), 'agreement' (thỏa thuận) không phù hợp."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D). Câu 31-36: Điền từ thích hợp. Câu 37-40: Đọc hiểu.",
      type: "reading",
      text: `To: All Marketing Staff
From: Sarah Johnson, Marketing Manager
Subject: Update on Q4 Campaign Timeline and Task Coordination

Dear Team,

I want to provide an important update regarding our fourth-quarter marketing campaign. Due to recent changes in customer behavior, our leadership team has decided to (31) our promotional activities earlier than initially planned. This adjustment allows us to better position our brand for the peak shopping period.

To ensure that everything proceeds smoothly, each department must (32) the revised schedule attached to this email. The social media team is expected to finalize the content calendar by October 20, while the design team should deliver the visual assets no later than October 25. These deadlines are essential (33) we are working under a compressed timeline.

Additionally, we will be conducting a series of short internal workshops, (34) will help streamline communication and improve cross-team collaboration. More details will be shared in the upcoming meeting.

All team members must also remember to track their expenses (35) following the standard reporting guidelines. Any deviation from the procedures may result in delays in reimbursement.

I appreciate your flexibility and dedication during this busy period. The adjustments we are making now will significantly enhance campaign performance. Please do not (36) to contact me if you have any concerns or suggestions.

Best regards,
Sarah Johnson
Marketing Manager
Global Marketing Solutions`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "...decided to (31) our promotional activities earlier...",
          options: ["postpone", "initiate", "abandon", "limit"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'initiate' (bắt đầu) vì công ty quyết định triển khai hoạt động sớm hơn. Ngữ pháp: Verb (initiate) sau 'decided to' (decided + to + V); Modal auxiliary. Collocation: 'initiate activities'. Từ vựng: 'postpone' (hoãn lại), 'abandon' (bỏ qua), 'limit' (giới hạn) mang ý nghĩa ngược lại."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "each department must (32) the revised schedule...",
          options: ["reject", "follow", "delay", "ignore"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'follow' (tuân theo). Ngữ pháp: Verb (follow) sau modal 'must' (must + V); Subject-Verb Agreement (each department). Collocation: 'follow schedule'. Từ vựng: 'reject' (từ chối), 'delay' (trì hoãn), 'ignore' (bỏ qua) không phù hợp."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...deadlines are essential (33) we are working under a compressed timeline.",
          options: ["although", "because", "whether", "unless"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'because' (vì). Ngữ pháp: Conjunction (because) giải thích lý do; Present Continuous (are working). Collocation: 'essential because'. Từ vựng: 'although' (mặc dù), 'whether' (liệu), 'unless' (trừ khi) không phù hợp."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "internal workshops, (34) will help streamline communication...",
          options: ["where", "that", "what", "who"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'that' (mà) — Relative Pronoun cho sự vật (workshops). Ngữ pháp: Relative Clause (that + will help); Future Simple (will help). Collocation: 'workshops that help'. Từ vựng: 'where' (nơi), 'what' (cái gì), 'who' (ai) không phù hợp."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "track their expenses (35) following the standard reporting guidelines.",
          options: ["rarely", "properly", "closely", "approximately"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'properly' (đúng cách). Ngữ pháp: Adverb (properly) bổ nghĩa verb (track); Gerund (following). Collocation: 'track expenses properly'. Từ vựng: 'rarely' (hiếm khi), 'closely' (chặt chẽ), 'approximately' (xấp xỉ) không phù hợp."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "Please do not (36) to contact me...",
          options: ["attempt", "hesitate", "refuse", "forget"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'hesitate' (do dự) — cụm cố định 'do not hesitate to + V'. Ngữ pháp: Imperative (do not + V); Infinitive (to contact). Collocation: 'do not hesitate to contact'. Từ vựng: 'attempt' (cố gắng), 'refuse' (từ chối), 'forget' (quên) không phù hợp."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - Why did the company adjust the campaign timeline?",
          options: [
            "Because a new product was postponed.",
            "Because customer behavior changed.",
            "Because team members requested more time.",
            "Because budget approval was delayed."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email nêu rõ 'Due to recent changes in customer behavior' (Do những thay đổi gần đây trong hành vi khách hàng). Ngữ pháp: Passive Voice (changes in customer behavior). Kỹ năng đọc hiểu: Xác định lý do."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the purpose of the internal workshops?",
          options: [
            "To recruit temporary staff.",
            "To improve communication and collaboration.",
            "To evaluate individual performance.",
            "To train new employees."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email nêu 'workshops... will help streamline communication and improve cross-team collaboration' (sẽ giúp hợp lý hóa giao tiếp và cải thiện hợp tác). Ngữ pháp: Infinitive (to improve), Noun (collaboration). Kỹ năng đọc hiểu: Xác định mục đích."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - What must the design team deliver by October 25?",
          options: [
            "Workshop schedules",
            "Visual assets",
            "Email templates",
            "Marketing budget reports"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email nêu 'design team should deliver the visual assets no later than October 25' (đội thiết kế phải giao các tài sản hình ảnh không muộn hơn ngày 25 tháng 10). Ngữ pháp: Modal (should deliver); Noun (visual assets). Kỹ năng đọc hiểu: Xác định đặc vụ."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - What should employees do before submitting expense reports?",
          options: [
            "Submit them directly to the CEO",
            "Follow the standard reporting guidelines",
            "Convert files into PDF format",
            "Request approval from the finance director"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email yêu cầu 'track their expenses properly following the standard reporting guidelines' (theo dõi chi phí của họ đúng cách theo quy tắc báo cáo tiêu chuẩn). Ngữ pháp: Gerund (following); Noun (guidelines). Kỹ năng đọc hiểu: Xác định hướng dẫn."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**Premium Language Training Institute Advertisement**

Unlock Your Language Potential with Expert Instructors

Our comprehensive language training programs are designed to help professionals achieve fluency in multiple languages. We offer customized courses tailored to your specific needs and proficiency levels.

**Programs We Offer:**
1. **Business Language Courses** – Specialized training for corporate professionals. We provide intensive courses in English, Mandarin, Spanish, and German, focusing on business terminology, negotiation skills, and cross-cultural communication.

2. **Executive Coaching** – One-on-one sessions with certified language coaches who have extensive experience working with senior management. Flexible scheduling ensures minimal disruption to your busy schedule.

3. **Language Certification Preparation** – We prepare students for internationally recognized certifications including TOEFL, IELTS, TOEIC, and Cambridge exams. Our success rate is 95% for first-time test takers.

4. **Cultural Immersion Programs** – Combine language learning with cultural experience. We offer immersion weekends and international study trips to enhance your learning journey.

Enroll today and receive a 20% discount on your first course. Our institute has trained over 10,000 professionals since our establishment in 2008. Contact us at info@languagetrain.com or call 1-800-LANGUAGE for a free consultation and assessment.

---

**Email Message**

**To:** info@languagetrain.com
**From:** mark.chen@businesscorp.com
**Date:** September 18
**Subject:** Inquiry About Business Language Training Program

Dear Language Training Institute,

I am writing to inquire about your Business Language Courses, specifically the English and Mandarin programs. As a middle manager at a multinational corporation, I frequently communicate with international colleagues and clients. I believe your training would significantly improve my professional communication skills.

I am particularly interested in learning about the curriculum structure and duration of the courses. Additionally, I would like to know if your institute offers customized programs tailored to the specific terminology used in the technology and finance sectors, as my company specializes in these areas.

My current English proficiency is intermediate – I can hold basic conversations but struggle with technical vocabulary and presentation skills. For Mandarin, I am a complete beginner. My schedule is quite demanding, but I can dedicate approximately 10 hours per week to language training. Would your Executive Coaching program accommodate these time constraints?

Furthermore, I am interested in preparing for the TOEIC certification, as it is required for my upcoming promotion. Could you provide information about your certification preparation program and the expected timeline to achieve a score of 850 or higher?

I would appreciate receiving your course brochure and pricing information. I am also eager to know if you currently offer any promotional discounts or package deals for employees from large corporations. Please feel free to contact me at your earliest convenience at the phone number or email address provided below.

Thank you for your time and consideration.

Best regards,
Mark Chen
Middle Manager, Technology Division
Business Corporation Inc.
mark.chen@businesscorp.com
(888) 555-0123`,
      questions: [
        {
          id: 41,
          question: "How many professionals has the institute trained since its establishment?",
          options: [
            "Over 15,000",
            "Over 8,000",
            "Over 10,000",
            "Over 5,000"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì quảng cáo nêu 'Our institute has trained over 10,000 professionals since our establishment in 2008' (Viện của chúng tôi đã đào tạo hơn 10.000 chuyên gia). Ngữ pháp: Present Perfect (have trained). Collocation: 'trained professionals'. Kỹ năng đọc hiểu: Trích dẫn con số."
        },
        {
          id: 42,
          question: "What is the success rate for first-time test takers in certification programs?",
          options: [
            "90%",
            "85%",
            "80%",
            "95%"
          ],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì quảng cáo nêu 'Our success rate is 95% for first-time test takers' (Tỷ lệ thành công của chúng tôi là 95%). Ngữ pháp: Present Simple (is). Collocation: 'success rate', 'first-time test takers'. Kỹ năng đọc hiểu: Xác định con số phần trăm."
        },
        {
          id: 43,
          question: "Which language programs are NOT mentioned in the advertisement?",
          options: [
            "All of the above are mentioned",
            "Spanish and German",
            "French and Italian",
            "English and Mandarin"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì quảng cáo chỉ đề cập English, Mandarin, Spanish, German; French và Italian không được đề cập. Ngữ pháp: Adjective (specialized). Collocation: 'business courses'. Kỹ năng đọc hiểu: Xác định thông tin bị thiếu."
        },
        {
          id: 44,
          question: "What is Mark's current English proficiency level?",
          options: [
            "Fluent",
            "Intermediate",
            "Advanced",
            "Beginner"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Mark nói 'My current English proficiency is intermediate – I can hold basic conversations' (Trình độ tiếng Anh hiện tại của tôi là trung cấp). Ngữ pháp: Adjective (intermediate). Collocation: 'English proficiency', 'basic conversations'. Kỹ năng đọc hiểu: Xác định mức độ."
        },
        {
          id: 45,
          question: "How many hours per week can Mark dedicate to language training?",
          options: [
            "15 hours",
            "8 hours",
            "10 hours",
            "5 hours"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Mark nói 'I can dedicate approximately 10 hours per week' (Tôi có thể dành khoảng 10 giờ mỗi tuần). Ngữ pháp: Modal (can + V). Collocation: 'dedicate hours', 'language training'. Kỹ năng đọc hiểu: Xác định thời gian."
        },
        {
          id: 46,
          question: "What TOEIC score is Mark aiming to achieve?",
          options: [
            "800 or higher",
            "750 or higher",
            "700 or higher",
            "850 or higher"
          ],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì Mark nói 'achieve a score of 850 or higher' (đạt điểm 850 trở lên). Ngữ pháp: Infinitive (to achieve). Collocation: 'TOEIC score', 'achieve score'. Kỹ năng đọc hiểu: Xác định mục tiêu."
        },
        {
          id: 47,
          question: "What is Mark's primary motivation for seeking language training?",
          options: [
            "To relocate to another country",
            "His job requires communication with international colleagues and clients",
            "To impress his colleagues",
            "Personal interest in languages"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Mark nói 'I frequently communicate with international colleagues and clients' (Tôi thường xuyên giao tiếp với các đồng nghiệp quốc tế). Ngữ pháp: Present Simple (communicate). Collocation: 'international colleagues', 'professional communication'. Kỹ năng đọc hiểu: Suy luận động cơ."
        },
        {
          id: 48,
          question: "Which sectors does Mark's company specialize in?",
          options: [
            "Healthcare and education",
            "Technology and finance",
            "Tourism and hospitality",
            "Retail and manufacturing"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Mark nói 'my company specializes in these areas' referring to 'technology and finance sectors' (công ty tôi chuyên về lĩnh vực công nghệ và tài chính). Ngữ pháp: Present Simple (specializes). Collocation: 'specializes in'. Kỹ năng đọc hiểu: Xác định ngành công nghiệp."
        },
        {
          id: 49,
          question: "What promotion-related incentive is mentioned in the advertisement?",
          options: [
            "Free weekend immersion program",
            "20% discount on first course",
            "Free certification exam fee",
            "10% discount for first-time students"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì quảng cáo nêu 'Enroll today and receive a 20% discount on your first course' (Đăng ký ngay hôm nay và nhận 20% giảm giá). Ngữ pháp: Imperative (Enroll); Verb (receive). Collocation: 'discount on course'. Kỹ năng đọc hiểu: Xác định ưu đãi."
        },
        {
          id: 50,
          question: "What is Mark's position at his company?",
          options: [
            "Executive Director",
            "Middle Manager",
            "Senior Manager",
            "Junior Manager"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Mark ký tên 'Middle Manager, Technology Division' (Trưởng phòng Công nghệ, Bộ phận Công nghệ). Ngữ pháp: Noun (position). Collocation: 'Middle Manager'. Kỹ năng đọc hiểu: Xác định vị trí công việc."
        }
      ]
    },
    part8: {
      title: "PART 8: Professional Message Thread",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn công việc, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Manager (09:30): Good morning, team. I've just received feedback from the client regarding the prototype. Overall positive, but they requested some modifications to the user interface. Can everyone review the attached document by noon today?

Designer (09:45): Thanks for sharing. I can see the requested changes. Most are feasible, but the color scheme change might affect our brand consistency. Should I consult with the branding team before proceeding?

Manager (10:00): Good thinking. Yes, please coordinate with them. We need to ensure all changes align with our brand guidelines.

Developer 1 (10:15): I've reviewed the feedback. The backend modifications are straightforward. I estimate 2-3 days to implement all the changes.

Project Coordinator (10:30): That timeline works well. The client expects delivery by next Friday. This gives us a comfortable buffer. I'll update the project timeline and notify all stakeholders.

Developer 2 (11:00): Quick question - do we need to re-test everything after the modifications, or just the changed features?

Manager (11:15): Thorough testing is required. After any significant changes, we need full regression testing to ensure nothing else breaks. This should be factored into the timeline.

Developer 1 (11:30): Understood. Adding 2 days for testing. So total will be 4-5 days from start to completion.

Project Coordinator (11:45): Got it. I'll revise the schedule and create a detailed project plan. Everyone will have their copies by end of business today. Please confirm receipt.

Designer (12:00): I'll have the branding team's input by tomorrow morning. Planning to start redesign work by afternoon.

Manager (12:15): Excellent. Let's reconvene tomorrow at 10 a.m. to review progress and address any issues. This project is on track!`,
      questions: [
        {
          id: 51,
          question: "What feedback did the client provide about the prototype?",
          options: [
            "They asked for a complete redesign.",
            "Overall positive, but requested modifications to the user interface.",
            "They loved it without any changes needed.",
            "They rejected the entire prototype."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Manager nói 'Overall positive, but they requested some modifications' (Tích cực nói chung, nhưng họ yêu cầu sửa đổi). Ngữ pháp: Passive Voice (requested modifications). Collocation: 'client feedback'. Kỹ năng đọc hiểu: Xác định nội dung phản hồi."
        },
        {
          id: 52,
          question: "What concern does the Designer raise about the modifications?",
          options: [
            "The technical team cannot do it.",
            "The color scheme change might affect brand consistency.",
            "It will take too long to implement.",
            "The changes are too expensive."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Designer nói 'the color scheme change might affect our brand consistency' (thay đổi bảng màu có thể ảnh hưởng). Ngữ pháp: Modal (might affect). Collocation: 'brand consistency'. Kỹ năng đọc hiểu: Xác định mối lo ngại."
        },
        {
          id: 53,
          question: "How long does Developer 1 estimate for implementing the changes?",
          options: [
            "3-4 days",
            "2-3 days",
            "4-5 days",
            "1-2 days"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Developer 1 nói 'I estimate 2-3 days to implement' (Tôi ước tính 2-3 ngày). Ngữ pháp: Verb (estimate); Infinitive (to implement). Collocation: 'estimate time'. Kỹ năng đọc hiểu: Xác định thời gian ước tính."
        },
        {
          id: 54,
          question: "What is the client's expected delivery date?",
          options: [
            "Two weeks from now",
            "Next week",
            "Next Friday",
            "This Friday"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Project Coordinator nói 'The client expects delivery by next Friday' (Khách hàng dự kiến giao vào thứ Sáu tuần tới). Ngữ pháp: Present Simple (expects). Collocation: 'expected delivery'. Kỹ năng đọc hiểu: Xác định thời hạn."
        },
        {
          id: 55,
          question: "What type of testing is required after modifications?",
          options: [
            "No testing is needed.",
            "Full regression testing.",
            "Only testing of changed features.",
            "Unit testing only."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Manager nói 'we need full regression testing' (chúng ta cần kiểm tra hồi quy đầy đủ). Ngữ pháp: Modal (need); Noun (regression testing). Collocation: 'regression testing'. Kỹ năng đọc hiểu: Xác định loại kiểm tra."
        },
        {
          id: 56,
          question: "What is the revised total timeline including testing?",
          options: [
            "5-6 days",
            "3-4 days",
            "4-5 days",
            "2-3 days"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Developer 1 nói 'So total will be 4-5 days' (Vậy tổng cộng sẽ là 4-5 ngày). Ngữ pháp: Future Simple (will be). Collocation: 'total timeline'. Kỹ năng đọc hiểu: Xác định thời gian tổng cộng."
        },
        {
          id: 57,
          question: "When does the Designer plan to start the redesign work?",
          options: [
            "Next week",
            "Tomorrow morning",
            "Tomorrow afternoon",
            "Immediately"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Designer nói 'Planning to start redesign work by afternoon' (Kế hoạch bắt đầu vào buổi chiều). Ngữ pháp: Present Continuous (Planning); Preposition (by). Collocation: 'redesign work'. Kỹ năng đọc hiểu: Xác định thời gian bắt đầu."
        },
        {
          id: 58,
          question: "What is the Project Coordinator responsible for?",
          options: [
            "Testing the software.",
            "Updating the project timeline and notifying stakeholders.",
            "Writing the code.",
            "Designing the user interface."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Project Coordinator nói 'I'll update the project timeline and notify all stakeholders' (Tôi sẽ cập nhật lịch trình và thông báo). Ngữ pháp: Future Simple (will update, will notify). Collocation: 'update timeline', 'notify stakeholders'. Kỹ năng đọc hiểu: Xác định trách nhiệm."
        },
        {
          id: 59,
          question: "When is the team scheduled to reconvene?",
          options: [
            "Next week",
            "Tomorrow at 9 a.m.",
            "Tomorrow at 10 a.m.",
            "Today at 2 p.m."
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Manager nói 'Let's reconvene tomorrow at 10 a.m.' (Hãy gặp lại vào ngày mai lúc 10 giờ). Ngữ pháp: Imperative (let's); Preposition (at). Collocation: 'reconvene', 'review progress'. Kỹ năng đọc hiểu: Xác định thời gian họp."
        },
        {
          id: 60,
          question: "What is the Manager's overall assessment of the project?",
          options: [
            "The project will be late.",
            "The project is on track.",
            "The project is behind schedule.",
            "The project is not feasible."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Manager nói 'This project is on track!' (Dự án này đang đúng hướng!). Ngữ pháp: Present Simple (is). Collocation: 'on track'. Kỹ năng đọc hiểu: Xác định đánh giá tổng thể."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam11.js">
export const EXAM11_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 11 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài. Tích hợp 100 collocations phổ biến TOEIC (như 'make a decision', 'take advantage of', ...) và các điểm ngữ pháp: Present Perfect, Present Perfect Passive, Future Simple, Past Simple vs Present Perfect, Word Forms (Noun/Adjective/Adverb/Verb), Tính từ + Danh từ, Trạng từ + Động từ, Be + Adjective, Passive Voice với Past Participle, Relative Pronouns, Inverted Structure, Time/Contrast Conjunctions, Passive Voice, Gerund vs Infinitive (Preposition + V-ing, Verb + to V/V-ing), Conditional Sentences, Từ vựng theo ngữ cảnh, Subject-Verb Agreement, Articles (a/an/the).",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Mark và Sarah về kế hoạch kinh doanh. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Mark: Sarah, we need to make a decision on the new project. Have you analyzed the data yet?\nSarah: Yes, I have conducted research and built relationships with potential partners who can help us expand markets. The market has been penetrated by competitors, but we can take advantage of our strengths.\nMark: Good. We will launch the product next month if we meet the deadline. Last year, we overcame obstacles and achieved success, but this time, it's different.\nSarah: Exactly. We must allocate budget wisely and foster teamwork. The team has been empowered to generate ideas, which is why we will succeed.\nMark: I agree. Let's hold a discussion tomorrow to set goals and prioritize tasks.",
      questions: [
        {
          id: 1,
          options: [
            "They have not conducted research.",
            "They built relationships last year.",
            "They will penetrate the market.",
            "They have analyzed the data."
          ],
          correct: 3,
          explanation: "Sarah nói: 'I have conducted research and built relationships...' (Tôi đã tiến hành nghiên cứu và xây dựng mối quan hệ...). Đáp án đúng là (D) vì sử dụng Present Perfect (have + V3: have analyzed) để diễn tả hành động hoàn thành gần đây với kết quả hiện tại. Ngữ pháp: Present Perfect nhấn mạn kết quả hiện tại; Subject-Verb Agreement (They have analyzed). Collocation: 'conduct research', 'analyze data'."
        },
        {
          id: 2,
          options: [
            "They have met the deadline.",
            "They overcame obstacles last year.",
            "They will achieve success next year.",
            "They launched the product."
          ],
          correct: 1,
          explanation: "Mark nói: 'Last year, we overcame obstacles and achieved success...' (Năm ngoái, chúng tôi đã vượt qua trở ngại và đạt được thành công...). Đáp án đúng là (B) vì sử dụng Past Simple (overcame, achieved) cho hành động hoàn tất trong quá khứ cụ thể với mốc thời gian 'last year'. Ngữ pháp: Past Simple dùng cho hành động kết thúc, khác Present Perfect. Collocation: 'overcome obstacles', 'achieve success'. Time Reference: 'Last year'."
        },
        {
          id: 3,
          options: [
            "The team is empowered.",
            "The team will empower others.",
            "The team has been empowered to generate ideas.",
            "The team generated ideas."
          ],
          correct: 2,
          explanation: "Sarah nói: 'The team has been empowered to generate ideas...' (Nhóm đã được trao quyền để tạo ý tưởng...). Đáp án đúng là (C) vì sử dụng Present Perfect Passive (has been + V3: has been empowered) nhấn mạnh hành động bị động hoàn thành với kết quả hiện tại. Ngữ pháp: Present Perfect Passive = have/has been + V3; Verb + to V (empowered to generate) diễn tả mục đích. Collocation: 'generate ideas', 'empower team'."
        },
        {
          id: 4,
          options: [
            "They have held discussions.",
            "They are holding now.",
            "They held a discussion yesterday.",
            "They will hold a discussion tomorrow."
          ],
          correct: 3,
          explanation: "Mark nói: 'Let's hold a discussion tomorrow...' (Hãy tổ chức thảo luận ngày mai...). Đáp án đúng là (D) vì sử dụng Future Simple (will + V: will hold) để diễn tả kế hoạch tương lai với mốc thời gian 'tomorrow'. Ngữ pháp: Future Simple = will + V nguyên thể. Collocation: 'hold discussions', 'set goals'. Time Reference: 'tomorrow'."
        },
        {
          id: 5,
          options: [
            "The budget is allocated.",
            "Budget allocation is wise.",
            "They allocated budget last month.",
            "We must allocate budget wisely."
          ],
          correct: 3,
          explanation: "Sarah nói: 'We must allocate budget wisely...' (Chúng ta phải phân bổ ngân sách một cách khôn ngoan...). Đáp án đúng là (D) vì sử dụng Trạng từ + Động từ (wisely allocate) trong cấu trúc modal (must + V). Ngữ pháp: Adverb (wisely) bổ nghĩa động từ (allocate), đứng sau động từ; Subject-Verb Agreement (We must allocate). Collocation: 'allocate budget'."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người ở văn phòng. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: At the office.\nJohn: Mike, Emma, we need to boost productivity despite facing challenges.\nEmma: Yes, we have implemented strategies that the manager, who oversees projects, approved.\nMike: Although we reduced expenses, we still need to train staff after assessing risks.\nJohn: If we comply with regulations, we will secure funding. The report has been scrutinized by experts.\nEmma: Let's collaborate closely to resolve conflicts and nurture relationships.",
      questions: [
        {
          id: 6,
          question: "How many people are in the conversation?",
          options: [
            "Two",
            "Three",
            "Four",
            "Five"
          ],
          correct: 1,
          explanation: "Có ba người: John, Emma, và Mike. Đáp án đúng là (B). Ngữ pháp: Subject-Verb Agreement (we need). Collocation: 'boost productivity', 'face challenges'."
        },
        {
          id: 7,
          question: "Why do they need to implement strategies?",
          options: [
            "Because they have been approved.",
            "Because they reduced expenses.",
            "Because of regulations.",
            "Because they will secure funding."
          ],
          correct: 0,
          explanation: "Emma nói: 'we have implemented strategies that the manager... approved.' (chúng tôi đã triển khai chiến lược mà quản lý phê duyệt). Đáp án đúng là (A) vì sử dụng Relative Pronoun (that) để chỉ định strategies đã được phê duyệt. Ngữ pháp: Relative Pronouns (that) nối mệnh đề phụ; Present Perfect (have implemented). Collocation: 'implement strategies'."
        },
        {
          id: 8,
          question: "What has been scrutinized?",
          options: [
            "The funding.",
            "The risks.",
            "The report.",
            "The staff."
          ],
          correct: 2,
          explanation: "John nói: 'The report has been scrutinized by experts.' (Báo cáo đã được kiểm tra kỹ bởi chuyên gia). Đáp án đúng là (C) vì sử dụng Present Perfect Passive (has been + V3). Ngữ pháp: Present Perfect Passive = have/has been + V3; Tác nhân được chỉ định với 'by experts'. Collocation: 'scrutinize reports'."
        },
        {
          id: 9,
          question: "What will happen if they comply with regulations?",
          options: [
            "They train staff.",
            "They will secure funding.",
            "They resolve conflicts.",
            "They reduced expenses."
          ],
          correct: 1,
          explanation: "John nói: 'If we comply with regulations, we will secure funding.' (Nếu chúng ta tuân thủ quy định, chúng ta sẽ đảm bảo tài trợ). Đáp án đúng là (B) vì sử dụng Conditional Sentences Type 1 (If + Present Simple, will + V). Ngữ pháp: Type 1 diễn tả tình huống thực tế tương lai. Collocation: 'comply with regulations', 'secure funding'."
        },
        {
          id: 10,
          question: "What do they plan to do to resolve conflicts?",
          options: [
            "Collaborate closely.",
            "Assess risks.",
            "Train staff.",
            "Reduce expenses."
          ],
          correct: 0,
          explanation: "Emma nói: 'Let's collaborate closely to resolve conflicts...' (Hãy hợp tác chặt chẽ để giải quyết xung đột...). Đáp án đúng là (A) vì sử dụng Pattern 2: Verb + to V (collaborate to resolve). Ngữ pháp: Infinitive (to + V) sau động từ diễn tả mục đích; Adverb (closely) bổ nghĩa động từ. Collocation: 'collaborate closely', 'resolve conflicts'."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Professor: Welcome to the seminar on business innovation. We will deliver a speech on how to promote innovation, which is essential for sustaining growth. Although challenges arise, we can overcome them by harnessing potential. The project has been undertaken successfully in the past, but now we must adapt to changes. In no way should we ignore opportunities that we identify. After evaluating options, we will execute plans efficiently.",
      questions: [
        {
          id: 11,
          question: "The seminar is __________.",
          options: ["(A) essential", "(B) successful", "(C) innovative", "(D) challenging"],
          correct: 2,
          explanation: "Professor đề cập seminar về 'business innovation'. Đáp án đúng là (C) vì sử dụng Adjective (innovative) từ ngữ cảnh. Ngữ pháp: Be + Adjective (is innovative) mô tả tính chất. Collocation: 'promote innovation'."
        },
        {
          id: 12,
          question: "We have just _________.",
          options: ["(A) adapted to changes", "(B) executed plans", "(C) evaluated options", "(D) undertaken a project"],
          correct: 3,
          explanation: "Professor: 'The project has been undertaken successfully...' (Dự án đã được thực hiện thành công...). Đáp án đúng là (D) vì sử dụng Present Perfect Passive (has been undertaken). Ngữ pháp: Present Perfect Passive = have/has been + V3. Collocation: 'undertake projects'."
        },
        {
          id: 13,
          question: "If we ignore opportunities, we __________.",
          options: ["(A) will succeed", "(B) should not", "(C) must adapt", "(D) can overcome"],
          correct: 1,
          explanation: "Professor: 'In no way should we ignore opportunities...' (Không nên bỏ qua cơ hội...). Đáp án đúng là (B) vì sử dụng Inverted Structure (In no way should we). Ngữ pháp: Inverted Structure đảo chủ ngữ-động từ sau cụm phủ định. Collocation: 'identify opportunities'."
        },
        {
          id: 14,
          question: "The project was __________.",
          options: [
            "(A) adapted later",
            "(B) executed now",
            "(C) undertaken in the past",
            "(D) evaluated always"
          ],
          correct: 2,
          explanation: "Professor: 'The project has been undertaken successfully in the past...' (Dự án đã được thực hiện thành công trong quá khứ...). Đáp án đúng là (C) vì sử dụng Time Reference (in the past). Ngữ pháp: Present Perfect với 'in the past' chỉ thời gian. Collocation: 'execute plans'."
        },
        {
          id: 15,
          question: "We will execute plans __________.",
          options: ["(A) efficiency", "(B) successful", "(C) all correct", "(D) efficiently"],
          correct: 3,
          explanation: "Professor: '...we will execute plans efficiently.' (chúng ta sẽ thực hiện kế hoạch một cách hiệu quả). Đáp án đúng là (D) vì sử dụng Adverb (efficiently) + Verb (execute). Ngữ pháp: Word Forms - Adverb (efficiently) từ adjective (efficient), bổ nghĩa động từ. Collocation: 'execute plans'."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Customer: Hello, I need to handle a complaint about the product that was delivered late.\nSales Associate: I'm sorry. We have verified details and will resolve the issue. The delay was caused by bad weather, but we will compensate.\nCustomer: If you had informed me earlier, I would have adjusted my schedule. Anyway, let's reach an agreement.\nSales Associate: Certainly. We prefer negotiating terms after providing feedback. Your order has been updated.",
      questions: [
        {
          id: 16,
          question: "The product __________.",
          options: ["(A) is on time", "(B) all correct", "(C) was early", "(D) was delivered late"],
          correct: 3,
          explanation: "Customer: '...the product that was delivered late.' (sản phẩm được giao muộn). Đáp án đúng là (D) vì sử dụng Passive Voice (was delivered) với Past Participle. Ngữ pháp: Passive Voice = be + V3 (was delivered); Relative Pronouns (that was). Collocation: 'handle complaints'."
        },
        {
          id: 17,
          question: "The delay was caused ___________.",
          options: ["(A) by the customer", "(B) by bad weather", "(C) two years ago", "(D) by the associate"],
          correct: 1,
          explanation: "Sales Associate: 'The delay was caused by bad weather...' (Sự chậm trễ do thời tiết xấu). Đáp án đúng là (B) vì sử dụng Passive Voice (was caused by). Ngữ pháp: Passive Voice với 'by' chỉ tác nhân; Contrast Conjunctions (but). Collocation: 'verify details'."
        },
        {
          id: 18,
          question: "If informed earlier, the customer __________.",
          options: ["(A) would adjust", "(B) would have adjusted", "(C) adjusted", "(D) adjusts"],
          correct: 1,
          explanation: "Customer: 'If you had informed me earlier, I would have adjusted...' (Nếu bạn thông báo sớm hơn, tôi đã điều chỉnh). Đáp án đúng là (B) vì sử dụng Conditional Sentences Type 3 (If + Past Perfect, would have + V3). Ngữ pháp: Type 3 cho tình huống giả định quá khứ không thực. Collocation: 'reach an agreement'."
        },
        {
          id: 19,
          question: "They prefer __________.",
          options: [
            "(A) updating orders",
            "(B) compensating now",
            "(C) negotiating after feedback",
            "(D) providing before"
          ],
          correct: 2,
          explanation: "Sales Associate: 'We prefer negotiating terms after providing feedback.' (Chúng tôi thích đàm phán điều khoản sau khi cung cấp phản hồi). Đáp án đúng là (C) vì sử dụng Pattern 1: Preposition + V-ing (after providing). Ngữ pháp: Gerund (V-ing) sau giới từ (after). Collocation: 'negotiate terms', 'provide feedback'."
        },
        {
          id: 20,
          question: "The order has been __________.",
          options: ["(A) delayed", "(B) updated", "(C) ignored", "(D) canceled"],
          correct: 1,
          explanation: "Sales Associate: 'Your order has been updated.' (Đơn hàng của bạn đã được cập nhật). Đáp án đúng là (B) vì sử dụng Present Perfect Passive (has been updated). Ngữ pháp: Present Perfect Passive = has been + V3; Subject-Verb Agreement (order has been). Collocation: 'update systems'."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The company has __________ a new strategy to boost productivity, which is a key factor in achieving success.",
          options: ["implement", "implementation", "implemented", "implements"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'implemented' vì sử dụng Present Perfect (has + V3) để diễn tả hành động hoàn thành gần đây. Ngữ pháp: Present Perfect = have/has + V3 (implemented); Verb + to V (to boost); Relative Pronouns (which is). Collocation: 'boost productivity', 'achieve success'."
        },
        {
          id: 22,
          question: "Among __________ evaluated were the options that we will choose for the project.",
          options: ["who", "those", "they","whose"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'those' vì sử dụng Đại từ chỉ định (those) trong Inverted Structure (Among those evaluated). Ngữ pháp: Inverted Structure đảo chủ ngữ; Passive Voice (were evaluated). Collocation: 'evaluate options'."
        },
        {
          id: 23,
          question: "We have reduced expenses __________ we started the cost-cutting program last year.",
          options: ["since", "during", "despite", "except"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'since' vì sử dụng Time Conjunctions (since) với Present Perfect (have reduced). Ngữ pháp: Since + Past Simple (started) cho mốc bắt đầu hành động kéo dài. Collocation: 'reduce expenses'."
        },
        {
          id: 24,
          question: "The team is __________ efficient in managing resources, leading to sustained growth.",
          options: ["high", "highly", "heights", "height"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'highly' vì sử dụng Trạng từ (highly) + Adjective (efficient). Ngữ pháp: Adverb bổ nghĩa tính từ; Word Forms: adverb từ adjective + -ly. Collocation: 'manage resources', 'sustain growth'."
        },
        {
          id: 25,
          question: "If the market expands, we __________ our products to new audiences.",
          options: ["will target", "targeted", "targets", "targeting"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'will target' vì sử dụng Future Simple (will + V) trong Conditional Sentences Type 1. Ngữ pháp: Type 1: If + Present Simple (expands), will + V (target). Collocation: 'target audiences'."
        },
        {
          id: 26,
          question: "The report __________ by the experts before being submitted.",
          options: ["has scrutinized", "has been scrutinized", "scrutinizing", "scrutinizes"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'has been scrutinized' vì sử dụng Present Perfect Passive (has been + V3). Ngữ pháp: Passive Voice; Time Conjunctions (before + V-ing). Collocation: 'scrutinize reports'."
        },
        {
          id: 27,
          question: "We look forward to __________ with you on this project despite the challenges.",
          options: ["collaborate", "collaborating", "collaboration", "collaborated"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'collaborating' vì sử dụng Pattern 1: Preposition + V-ing (look forward to + V-ing). Ngữ pháp: Gerund (V-ing) sau giới từ (to); Contrast Conjunctions (despite). Collocation: 'collaborate closely'."
        },
        {
          id: 28,
          question: "The manager, __________ oversees the team, has decided to delegate responsibilities.",
          options: ["which", "that", "whose", "who"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'who' vì sử dụng Relative Pronoun (who) cho người (manager). Ngữ pháp: Who cho chủ ngữ người; Present Perfect (has decided). Collocation: 'delegate responsibilities'."
        },
        {
          id: 29,
          question: "Under no circumstances __________ we ignore the risks that have been assessed.",
          options: ["should", "will", "did", "have"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'should' vì sử dụng Inverted Structure (Under no circumstances should we). Ngữ pháp: Đảo ngữ với modal (should + S + V) sau cụm phủ định. Collocation: 'assess risks'."
        },
        {
          id: 30,
          question: "__________ efficient use of resources is crucial for the company's success.",
          options: ["An", "No article", "A", "The"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'The' vì sử dụng Articles (The) cho danh từ cụ thể (efficient use). Ngữ pháp: The + Adjective + Noun (The efficient use). Collocation: 'utilize resources'."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D). Câu 31-36: Điền từ thích hợp. Câu 37-40: Đọc hiểu.",
      type: "reading",
      text: `To: All Staff
From: HR Rep, InnovateCorp
Subject: New Training Program Announcement
Dear Colleagues,
We are excited to announce a new training program designed to develop skills and enhance efficiency across all departments. This initiative, which has been planned for months, will begin next quarter. Participation is mandatory for those who wish to take advantage of career advancement opportunities.
To ensure smooth implementation, we will organize events where staff can share information and generate ideas. The program has been developed in collaboration with external experts (31) our internal resources optimally.
Although there may be initial challenges, we believe that by fostering teamwork and providing feedback, we can overcome them. The sessions will focus on practical skills, such as how to handle complaints and negotiate terms effectively.
If you register early, you (32) priority access to the workshops. Please note that attendance will be tracked, and certificates will be issued upon completion.
We encourage everyone to participate actively, as this will help us build relationships and achieve success together. For more details, contact the HR department (33) any questions you may have.
The program will include modules on leadership, where participants learn to demonstrate leadership and empower employees. After completing the training, staff (34) better equipped to face challenges in their roles.
In addition, we will conduct research to evaluate the program's impact, ensuring that it meets deadlines and delivers results. Your input is valuable, so please provide feedback (35) the sessions.
Finally, we appreciate your commitment to professional growth. Together, we can promote innovation and sustain growth for the company. If there are any concerns, do not hesitate to reach out (36) us directly.
Best regards,
HR Rep
InnovateCorp`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "The program has been developed in collaboration with external experts (31) our internal resources optimally.",
          options: ["utilize", "utilizing", "to utilize", "utilized"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'to utilize' vì sử dụng Pattern 2: Verb + to V (developed to utilize) để diễn tả mục đích. Ngữ pháp: Infinitive (to + V) sau động từ; Adverb (optimally) bổ nghĩa. Collocation: 'utilize resources'."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "If you register early, you (32) priority access to the workshops.",
          options: ["had", "has", "will have", "have had"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'will have' vì sử dụng Future Simple (will have) trong Conditional Sentences Type 1. Ngữ pháp: Type 1: If + Present (register), will + V (have). Collocation: 'take advantage of'."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "For more details, contact the HR department (33) any questions you may have.",
          options: ["for", "about", "on", "with"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'about' vì sử dụng Preposition (about) trong 'questions about'. Ngữ pháp: Giới từ sau danh từ chỉ chủ đề. Collocation: 'provide feedback'."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "After completing the training, staff (34) better equipped to face challenges in their roles.",
          options: ["has been", "will be", "is", "was"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'will be' vì sử dụng Future Simple Passive (will be + V3) sau Time Conjunctions (After). Ngữ pháp: Passive Voice; After + V-ing. Collocation: 'face challenges'."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "Your input is valuable, so please provide feedback (35) the sessions.",
          options: ["during", "although", "unless", "despite"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'during' vì sử dụng Time Conjunctions (during) chỉ thời gian. Ngữ pháp: During + danh từ (the sessions). Collocation: 'provide feedback'."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "If there are any concerns, do not hesitate to reach out (36) us directly.",
          options: ["to", "for", "about", "with"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'to' vì sử dụng 'reach out to' là cụm động từ. Ngữ pháp: Infinitive (to reach) sau hesitate; Giới từ (to us). Collocation: 'reach an agreement'."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - When will the training program begin?",
          options: ["Last quarter", "Next quarter", "Next year", "This month"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'Next quarter' vì email đề cập 'will begin next quarter'. Ngữ pháp: Future Simple (will begin). Kỹ năng đọc hiểu: Xác định thời gian."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the main purpose of this message?",
          options: ["To request feedback only", "To announce a new training program", "To cancel a program", "To discuss challenges"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì tiêu đề và nội dung tập trung vào 'announce a new training program'. Kỹ năng đọc hiểu: Mục đích từ Subject."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - Who is the sender of this message?",
          options: ["A manager", "HR Rep", "A staff member", "An external expert"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'HR Rep' vì từ 'From: HR Rep'. Kỹ năng đọc hiểu: Xác định người gửi."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - What will participants receive upon completion?",
          options: ["Feedback", "Certificates", "Challenges", "Priority access"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'Certificates' vì 'certificates will be issued'. Ngữ pháp: Passive Voice (will be issued). Kỹ năng đọc hiểu: Trích dẫn thông tin."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**TechSolutions Advertisement**
Professional IT Services to Streamline Operations and Optimize Processes
At TechSolutions, we help businesses integrate technologies and mitigate risks. Our services have been utilized by over 500 companies to accelerate growth and benchmark performance.
Services Include:
1. System Updates – We update systems efficiently to ensure security.
2. Risk Assessment – Identify and assess risks that could impact your business.
3. Technology Integration – Seamlessly integrate new technologies.
4. Training Sessions – Train staff to utilize resources effectively.
Contact us at info@techsolutions.com for a free consultation. We will respond within 48 hours to discuss how we can leverage expertise for your needs.
---
**Email Message**
To: info@techsolutions.com
From: a.smith@globalenterprises.com
Date: November 15, 2025
Subject: Inquiry for Services
I saw your advertisement online and am interested in your IT services for my company. We have faced challenges with outdated systems and need to update them urgently. Could you provide a consultation to assess risks and integrate technologies? We also want to train our staff after the updates.
Please contact me at 555-1234 between 9 AM and 5 PM. I look forward to hearing from you soon.
Regards,
Anna Smith
Global Enterprises
123 Business Ave, New York, NY`,
      questions: [
        {
          id: 41,
          question: "According to the advertisement, what does TechSolutions help with?",
          options: ["Design logos", "Integrate technologies", "Hire staff", "Sell products"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì quảng cáo nêu 'integrate technologies'. Ngữ pháp: Verb (integrate) theo ngữ cảnh IT. Collocation: 'integrate technologies'. Kỹ năng đọc hiểu: Xác định dịch vụ chính."
        },
        {
          id: 42,
          question: "What is suggested about TechSolutions?",
          options: ["It advertises online.", "It specializes in marketing.", "It has 500 employees.", "It is new."],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì email 'I saw your advertisement online'. Ngữ pháp: Present Perfect Passive (have been utilized). Collocation: 'streamline operations'. Kỹ năng đọc hiểu: Suy luận."
        },
        {
          id: 43,
          question: "Who most likely is Anna Smith?",
          options: ["An IT expert", "A business owner", "A trainer", "A voice actor"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email từ công ty và yêu cầu dịch vụ. Ngữ pháp: Articles (my company). Collocation: 'face challenges'. Kỹ năng đọc hiểu: Suy luận vai trò."
        },
        {
          id: 44,
          question: "What service does Anna NOT request?",
          options: ["Staff hiring", "System updates", "Technology integration", "Risk assessment"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì không đề cập hiring. Email chỉ yêu cầu: system updates, risk assessment, technology integration, training. Collocation: 'assess risks'. Kỹ năng đọc hiểu: Xác định thông tin bị thiếu."
        },
        {
          id: 45,
          question: "What will Anna most likely receive within 48 hours?",
          options: ["A training session", "A response", "A risk report", "A system update"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'We will respond within 48 hours'. Ngữ pháp: Future Simple (will respond). Kỹ năng đọc hiểu: Suy luận từ thông tin quảng cáo."
        },
        {
          id: 46,
          question: "How many companies have utilized TechSolutions?",
          options: ["Over 500", "Unknown", "Under 500", "Exactly 500"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'over 500 companies'. Ngữ pháp: Present Perfect Passive (have been utilized). Kỹ năng đọc hiểu: Trích dẫn số liệu."
        },
        {
          id: 47,
          question: "What type of business does Anna operate?",
          options: ["Advertising", "Global Enterprises", "Training", "IT services"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì chữ ký 'Global Enterprises'. Kỹ năng đọc hiểu: Xác định tên công ty."
        },
        {
          id: 48,
          question: "What does Anna specifically request after updates?",
          options: ["Technology integration", "Train staff", "Free consultation", "Risk assessment"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'train our staff after the updates'. Ngữ pháp: Time Conjunctions (after). Kỹ năng đọc hiểu: Trình tự hành động."
        },
        {
          id: 49,
          question: "When does Anna prefer to be contacted?",
          options: ["Between 9 AM and 5 PM", "On weekends", "Anytime", "After 5 PM"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'between 9 AM and 5 PM'. Kỹ năng đọc hiểu: Xác định thời gian liên hệ."
        },
        {
          id: 50,
          question: "Why does Anna need services?",
          options: ["Outdated systems", "Hiring", "Marketing", "New products"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'faced challenges with outdated systems'. Kỹ năng đọc hiểu: Xác định lý do chính."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Tom (09:00): Flight to Tokyo delayed due to weather – arriving at 14:00 instead of 13:00. Sorry!
Lisa (09:05): Okay, I'll check the schedule. We can still make the meeting if we leave immediately after.
Tom (09:10): Yes, we have navigated challenges before. The client, who we met last year, expects us.
Lisa (09:20): Despite the delay, we'll arrive on time. Parking at the airport might be limited.
Tom (14:05): Landed. See you soon!`,
      questions: [
        {
          id: 51,
          question: "What is suggested about Tom?",
          options: ["He is on vacation.", "He is on a business trip.", "He is a pilot.", "He works in Tokyo."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'make the meeting' và 'client'. Collocation: 'navigate challenges'. Kỹ năng đọc hiểu: Suy luận tình huống."
        },
        {
          id: 52,
          question: "At 09:05, what does Lisa mean by 'Okay'?",
          options: ["She cancels the meeting.", "She accepts the delay.", "She changes flights.", "She is angry."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì đáp lại delay một cách tích cực. Ngữ pháp: Conditional Sentences (if we leave). Kỹ năng đọc hiểu: Suy luận ý định."
        },
        {
          id: 53,
          question: "Why was the flight delayed?",
          options: ["Due to weather.", "Client request.", "Schedule change.", "Missed connection."],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'due to weather'. Kỹ năng đọc hiểu: Xác định lý do."
        },
        {
          id: 54,
          question: "What time is the new arrival?",
          options: ["09:00", "14:00", "14:05", "13:00"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'arriving at 14:00'. Kỹ năng đọc hiểu: Xác định thời gian."
        },
        {
          id: 55,
          question: "What does Lisa offer?",
          options: ["Cancel trip.", "Check schedule.", "Book hotel.", "Change meeting."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I'll check the schedule'. Kỹ năng đọc hiểu: Xác định hành động."
        },
        {
          id: 56,
          question: "What can be inferred about Tom and Lisa?",
          options: ["They are colleagues.", "They are strangers.", "They are competitors.", "They are family."],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'we can still make the meeting'. Ngữ pháp: Relative Pronouns (who we met). Kỹ năng đọc hiểu: Suy luận mối quan hệ."
        },
        {
          id: 57,
          question: "Why does Tom mention 'navigated challenges before'?",
          options: ["To cancel.", "To reassure.", "To apologize again.", "To complain."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì nhấn mạnh kinh nghiệm và khả năng xử lý. Ngữ pháp: Present Perfect (have navigated). Kỹ năng đọc hiểu: Suy luận mục đích."
        },
        {
          id: 58,
          question: "What does Lisa mean by 'Despite the delay'?",
          options: ["They won't arrive.", "They will arrive on time.", "They cancel.", "They will be late."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'we'll arrive on time'. Ngữ pháp: Contrast Conjunctions (Despite). Kỹ năng đọc hiểu: Suy luận ý nghĩa."
        },
        {
          id: 59,
          question: "What is implied about the airport?",
          options: ["Limited parking.", "Easy access.", "Closed.", "No parking."],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'Parking... might be limited'. Kỹ năng đọc hiểu: Xác định thông tin ngụ ý."
        },
        {
          id: 60,
          question: "What does Tom express in the final message?",
          options: ["Cancellation.", "Arrival confirmation.", "Delay again.", "Frustration."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Landed. See you soon!' thể hiện xác nhận hạ cánh. Kỹ năng đọc hiểu: Xác định cảm xúc/ý định."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam12.js">
export const EXAM12_DATA = {
  title: "Listening & Notetaking Skills 1 Practice - Exam 12 (Based on Book)",
  description: "Full practice test with Listening (4 parts, 20 questions) and Reading (4 parts, 40 questions). Designed to review the entire book with focus on videos and expansion. Options are shuffled to prevent guessing. Listening scripts improved for natural flow.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Listen to the natural conversations about topics from the book. Choose the best answer (A, B, C, D) for each question.",
      type: "listening",
      script: "Man: Hey, have you heard about tidal waves? What exactly are they?\nWoman: Oh, tidal waves, or tsunamis, are massive waves usually triggered by earthquakes under the ocean. They can be devastating when they hit land.\n\nMan: So, how do levels of language differ?\nWoman: Well, formal language is what you'd use in a job interview or a business meeting, while informal is more like chatting with friends over coffee.\n\nWoman: Tell me about power and how it's abused.\nMan: Power is like control over others, and it's often abused in politics, where leaders might use it for personal gain rather than for the good of the people.\n\nWoman: What's the deal with Asian and African elephants? Are they pretty similar?\nMan: Yeah, both are huge herbivores that live in groups, but African ones have bigger ears and tusks on both males and females, unlike Asians.\n\nMan: Those coincidences between Lincoln and Kennedy are wild, right?\nWoman: Totally! Both got elected to Congress 100 years apart, became president the same way, and were assassinated on Fridays, with successors named Johnson.",      questions: [
        {
          id: 1,
          options: [
            "A river wave.",
            "A small wave in the ocean.",
            "A wave from the moon.",
            "A very large wave caused by earthquake."
          ],
          correct: 3,
          explanation: "**Đáp án đúng là D.** Trong hội thoại, người phụ nữ nói: 'tidal waves, or tsunamis, are massive waves usually triggered by earthquakes under the ocean.' Từ khóa **'massive waves'** (sóng khổng lồ) và **'triggered by earthquakes'** (gây ra bởi động đất) xác nhận đây là những con sóng rất lớn do động đất. \n- A sai vì sóng triều không phải chỉ là sóng sông.\n- B sai vì từ 'small' (nhỏ) trái ngược với 'massive'.\n- C sai vì nguyên nhân ở đây là 'earthquakes' (động đất) chứ không phải 'moon' (mặt trăng).\n**Mẹo:** Nghe kỹ các từ mô tả đặc điểm và nguyên nhân."
        },
        {
          id: 2,
          options: [
            "Formal language is casual.",
            "Used in professional settings.",
            "Used in casual settings.",
            "Informal language is professional."
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** Người phụ nữ định nghĩa: 'formal language is what you'd use in a job interview or a business meeting.' Từ khóa **'job interview'** và **'business meeting'** đều là những tình huống chuyên nghiệp (professional settings). \n- A sai vì 'formal' (trang trọng) không thể là 'casual' (thông thường).\n- C mô tả informal language, không phải formal.\n- D sai vì 'informal language' (ngôn ngữ không trang trọng) không dùng trong môi trường chuyên nghiệp.\n**Mẹo:** Chú ý nghe ví dụ cụ thể để xác định ngữ cảnh sử dụng."
        },
        {
          id: 3,
          options: [
            "Power is abused in politics.",
            "Power is always good.",
            "Power is only physical.",
            "Power is never abused."
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** Người đàn ông nói: 'Power is often abused in politics, where leaders might use it for personal gain.' Từ khóa **'abused in politics'** (bị lạm dụng trong chính trị) cho thấy quyền lực có thể bị dùng sai mục đích trong lĩnh vực này. \n- B sai vì 'always good' (luôn tốt) trái với ý 'abused'.\n- C sai vì 'only physical' (chỉ về thể chất) không được đề cập.\n- D sai vì 'never abused' (không bao giờ bị lạm dụng) trái với thông tin.\n**Mẹo:** Nghe các động từ thể hiện hành động tiêu cực như 'abused'."
        },
        {
          id: 4,
          options: [
            "They are solitary animals.",
            "They have same ears and tusks.",
            "Both live in herds and are herbivores.",
            "They are small carnivores."
          ],
          correct: 2,
          explanation: "**Đáp án đúng là C.** Người đàn ông nói: 'both are huge herbivores that live in groups.' Từ khóa **'herbivores'** (động vật ăn cỏ) và **'live in groups'** (sống theo nhóm, tức là herds) là điểm tương đồng. \n- A sai vì 'solitary' (sống đơn độc) trái với 'live in groups'.\n- B sai vì chính sự khác biệt về tai và ngà là điểm phân biệt được nói đến sau đó.\n- D sai vì chúng không 'small' (nhỏ) mà 'huge' (khổng lồ) và không phải 'carnivores' (ăn thịt).\n**Mẹo:** Tập trung vào thông tin về chế độ ăn và tập tính sống."
        },
        {
          id: 5,
          options: [
            "No similarities.",
            "Both were kings.",
            "Both assassinated on Friday, succeeded by Johnson.",
            "Both lived in the same era."
          ],
          correct: 2,
          explanation: "**Đáp án đúng là C.** Người phụ nữ nói: 'both... were assassinated on Fridays, with successors named Johnson.' Đây là hai chi tiết cụ thể được liệt kê. \n- A sai vì có rất nhiều điểm tương đồng.\n- B sai vì họ là tổng thống, không phải vua.\n- D sai vì họ sống cách nhau 100 năm.\n**Mẹo:** Ghi chú nhanh các con số và tên riêng khi nghe."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 questions - A natural conversation about Lincoln and Kennedy coincidences. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Woman: You know, it's crazy how Abraham Lincoln and John F. Kennedy had so many parallels in their lives. For starters, Lincoln got elected to Congress in 1846, and Kennedy exactly 100 years later in 1946. Then, Lincoln became President in 1860, Kennedy in 1960. Both were really passionate about civil rights, and sadly, both their wives lost a child while in the White House. They were both shot on a Friday, right in the head. Get this, Lincoln's secretary was named Kennedy, and Kennedy's was named Lincoln. Both assassins were Southerners, and both presidents were succeeded by Southerners named Johnson. Andrew Johnson, Lincoln's successor, was born in 1808, and Lyndon Johnson in 1908. The assassins, John Wilkes Booth born in 1839, Lee Harvey Oswald in 1939. Both known by three names, each with 15 letters. Booth ran from a theater to a warehouse, Oswald from a warehouse to a theater. And both were killed before trial. Oh, and a week before their deaths, Lincoln was in Monroe, Maryland, Kennedy with Marilyn Monroe. Isn't that eerie?",
      questions: [
        {
          id: 6,
          question: "When was Lincoln elected to Congress?",
          options: ["1946", "1846", "1860", "1908"],
          correct: 1,
          explanation: "**Đáp án đúng là B (1846).** Người nói nói rõ: 'Lincoln got elected to Congress in 1846.' Đây là thông tin trực tiếp. \n- A (1946) là năm Kennedy được bầu, một sự trùng hợp 100 năm sau.\n- C (1860) là năm Lincoln trở thành Tổng thống.\n- D (1908) là năm sinh của Lyndon Johnson.\n**Mẹo:** Cẩn thận với các con số dễ nhầm lẫn, đặc biệt khi có sự so sánh."
        },
        {
          id: 7,
          question: "What day were both presidents shot?",
          options: ["Sunday", "Monday", "Friday", "Wednesday"],
          correct: 2,
          explanation: "**Đáp án đúng là C (Friday).** Thông tin được nêu rõ: 'They were both shot on a Friday.' \n- Các đáp án khác không được đề cập.\n**Mẹo:** Các ngày trong tuần là thông tin cần ghi nhớ chính xác."
        },
        {
          id: 8,
          question: "Who succeeded both presidents?",
          options: [
            "Southerners named Johnson",
            "Easterners named Kennedy",
            "Westerners named Oswald",
            "Northerners named Booth"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** Người nói khẳng định: 'both presidents were succeeded by Southerners named Johnson.' Từ khóa **'Southerners'** và **'Johnson'**. \n- B, C, D đều sai vì sai họ (Kennedy, Oswald, Booth) hoặc vùng miền.\n**Mẹo:** Chú ý đến tính từ mô tả (Southerners) và họ của người kế nhiệm."
        },
        {
          id: 9,
          question: "How many letters in assassins' names?",
          options: ["Ten", "Fifteen", "Twenty", "Five"],
          correct: 1,
          explanation: "**Đáp án đúng là B (Fifteen).** Thông tin chi tiết: 'each with 15 letters.' (John Wilkes Booth và Lee Harvey Oswald). \n- Các số khác không đúng.\n**Mẹo:** Ghi chú lại các chi tiết số học hoặc chữ cái trong tên."
        },
        {
          id: 10,
          question: "Where was Lincoln a week before shot?",
          options: [
            "Dallas, Texas",
            "Marilyn Monroe",
            "Ford's Theater",
            "Monroe, Maryland"
          ],
          correct: 3,
          explanation: "**Đáp án đúng là D (Monroe, Maryland).** Đây là thông tin cuối cùng được đưa ra: 'Lincoln was in Monroe, Maryland.' \n- A là nơi Kennedy bị ám sát.\n- B là tên một người (diễn viên) liên quan đến Kennedy.\n- C là nơi Lincoln bị ám sát.\n**Mẹo:** Phân biệt rõ thông tin của từng nhân vật, tránh bị lẫn lộn."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 questions - A natural talk about Asian and African Elephants. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Hey everyone, let's chat about Asian and African elephants today – they're fascinating creatures, and there are some cool similarities and differences between them. Starting with what they have in common, both are the biggest animals on land, right? They're herbivores, munching on plants all day, and they stick together in herds for safety and social reasons. They're super smart, with great memories, and sadly, both are endangered because of poaching for ivory and losing their homes to human development. Now, on the flip side, African elephants are generally bigger – they can weigh up to 7 tons, while Asian ones top out at about 5 tons. Those iconic large ears on African elephants? They're shaped like the continent of Africa and help with cooling down, whereas Asian elephants have smaller, rounder ears. Their heads are different too: Africans have a more rounded dome, Asians have a twin-domed look. Tusks? Both male and female Africans have them, but in Asians, it's mostly the males, and sometimes not even all of them. The trunks have more rings in Africans for better grip, and their skin is wrinklier. Habitat-wise, Africans roam savannas and forests in Africa, Asians prefer forests and grasslands in Asia. No matter what, we need to protect these amazing animals – they're vital to their ecosystems.",      questions: [
        {
          id: 11,
          question: "The lecture is about __________.",
          options: [
            "elephant poaching",
            "only African elephants",
            "similarities and differences of elephants",
            "elephant habitats"
          ],
          correct: 2,
          explanation: "**Đáp án đúng là C.** Câu mở đầu bài nói: 'let's chat about Asian and African elephants today – they're fascinating creatures, and there are some cool similarities and differences between them.' Đây là chủ đề chính. \n- A, B, D chỉ là các khía cạnh nhỏ được đề cập trong bài, không phải trọng tâm.\n**Mẹo:** Luôn chú ý đến câu đầu tiên để nắm được ý chính của bài nghe."
        },
        {
          id: 12,
          question: "What is a similarity between both elephants?",
          options: [
            "They are herbivores living in herds.",
            "They are not endangered.",
            "They have same ear sizes.",
            "They are small animals."
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** Bài nói liệt kê: 'both are the biggest animals on land... herbivores... stick together in herds.' \n- B sai vì cả hai loài đều 'sadly... are endangered'.\n- C sai vì kích thước tai là một điểm *khác biệt*.\n- D sai vì chúng là 'biggest animals'.\n**Mẹo:** Phân biệt rõ phần thông tin nói về 'similarities' và 'differences'."
        },
        {
          id: 13,
          question: "How do African elephants differ in size?",
          options: [
            "Same as Asian.",
            "Larger, up to 7 tons.",
            "Up to 10 tons.",
            "Smaller, up to 5 tons."
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** Bài nói so sánh: 'African elephants are generally bigger – they can weigh up to 7 tons, while Asian ones top out at about 5 tons.' \n- A sai vì kích thước khác nhau.\n- C sai vì không có thông tin 10 tấn.\n- D mô tả kích thước của voi châu Á.\n**Mẹo:** So sánh thường có các từ như 'bigger', 'while', 'whereas'. Hãy ghi nhớ số liệu đi kèm với mỗi đối tượng."
        },
        {
          id: 14,
          question: "What about tusks?",
          options: [
            "Only females have tusks.",
            "Both sexes African have, some male Asian.",
            "All have small tusks.",
            "No tusks in either."
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** Bài nói giải thích: 'both male and female Africans have them, but in Asians, it's mostly the males, and sometimes not even all of them.' \n- A sai vì voi châu Phi cả đực và cái đều có.\n- C sai vì không phải 'all' và không nhắc đến kích thước 'small'.\n- D sai hoàn toàn.\n**Mẹo:** Chú ý đến từ 'but' để nhận biết sự tương phản trong thông tin."
        },
        {
          id: 15,
          question: "African ears are __________.",
          options: [
            "pointy",
            "smaller and round",
            "same as Asian",
            "larger, shaped like Africa"
          ],
          correct: 3,
          explanation: "**Đáp án đúng là D.** Bài nói mô tả: 'Those iconic large ears on African elephants? They're shaped like the continent of Africa... whereas Asian elephants have smaller, rounder ears.' \n- A không được mô tả.\n- B là đặc điểm của tai voi châu Á.\n- C sai vì chúng khác nhau.\n**Mẹo:** Ghi nhớ đặc điểm nổi bật và dễ hình dung nhất của mỗi loài."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 questions - A natural long talk about why dinosaurs disappeared. Listen and choose the best answer (A, B, C, D).",
      type: "listening",
      script: "Good morning, class. So, one of the biggest mysteries in paleontology is what happened to the dinosaurs – they vanished about 65 million years ago at the end of the Cretaceous period, and there are a few theories, but let's dive into the most popular one first. The leading idea is that a huge asteroid slammed into Earth, right near what's now Mexico, leaving behind the massive Chicxulub crater. Imagine the chaos: enormous fires breaking out, giant tsunamis crashing shores, and a thick dust cloud blanketing the sky, blocking sunlight for months or even years. This led to what's called a 'nuclear winter' – temperatures plummeted, plants couldn't photosynthesize and died off, which meant herbivores starved, and then carnivores followed suit. The evidence? There's this thin layer of iridium in rocks all over the world from that time, and iridium is rare on Earth but common in asteroids. Another angle is massive volcanic activity – think the Deccan Traps in India, where volcanoes erupted for thousands of years, spewing out lava and gases that could have caused global warming, acid rain, and toxic atmospheres. Maybe it was a combo of the asteroid and volcanoes that sealed the deal. Other ideas, like widespread disease wiping them out, don't hold up because it wouldn't affect all species so uniformly. Or small mammals eating their eggs, but dinosaurs coexisted with mammals for ages without issue. Sea levels changing and altering habitats is another, but not as convincing. Ultimately, the asteroid theory has the strongest support. Interestingly, not all dinosaurs went extinct – birds are actually their living descendants. And this mass extinction paved the way for mammals, including us, to dominate. Pretty wild, huh?",      questions: [
        {
          id: 16,
          question: "The main theory for dinosaur extinction is __________.",
          options: [
            "mammals eating eggs",
            "disease",
            "asteroid impact",
            "sea level changes"
          ],
          correct: 2,
          explanation: "**Đáp án đúng là C.** Người nói khẳng định: 'The leading idea is that a huge asteroid slammed into Earth.' Cụm từ **'leading idea'** (ý tưởng hàng đầu) cho thấy đây là giả thuyết chính. \n- A, B, D là các giả thuyết khác được đề cập sau với độ tin cậy thấp hơn ('don't hold up', 'not as convincing').\n**Mẹo:** Chú ý đến các từ chỉ mức độ quan trọng như 'leading', 'main', 'most popular'."
        },
        {
          id: 17,
          question: "Where did the asteroid hit?",
          options: [
            "In Africa.",
            "Near Mexico, Chicxulub crater.",
            "In Australia.",
            "In India."
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** Thông tin chi tiết: 'a huge asteroid slammed into Earth, right near what's now Mexico, leaving behind the massive Chicxulub crater.' \n- A, C không được nhắc đến.\n- D là địa điểm của núi lửa Deccan Traps.\n**Mẹo:** Ghi nhớ tên riêng (Chicxulub) và vị trí địa lý đi kèm."
        },
        {
          id: 18,
          question: "What is evidence for asteroid?",
          options: [
            "Iridium layer in rocks.",
            "Mammal fossils.",
            "Volcanoes in India.",
            "Bird descendants."
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** Người nói đưa ra bằng chứng: 'There's this thin layer of iridium in rocks all over the world from that time, and iridium is rare on Earth but common in asteroids.' \n- B, C, D không phải là bằng chứng trực tiếp cho vụ va chạm thiên thạch.\n**Mẹo:** Chú ý phần thông tin giải thích 'The evidence?' thường nêu ra dẫn chứng."
        },
        {
          id: 19,
          question: "Another theory is __________.",
          options: [
            "volcanism in Deccan Traps",
            "asteroid only",
            "egg eating",
            "disease widespread"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** Sau khi trình bày giả thuyết chính, người nói chuyển sang: 'Another angle is massive volcanic activity – think the Deccan Traps in India.' \n- B không phải là 'another theory' (giả thuyết khác).\n- C, D là các giả thuyết yếu hơn được nhắc đến sau.\n**Mẹo:** Từ 'another' báo hiệu sự chuyển sang một ý/giả thuyết khác."
        },
        {
          id: 20,
          question: "What survived the extinction?",
          options: [
            "All dinosaurs.",
            "Only mammals.",
            "Birds as dinosaur descendants.",
            "No animals."
          ],
          correct: 2,
          explanation: "**Đáp án đúng là C.** Thông tin thú vị cuối bài: 'Interestingly, not all dinosaurs went extinct – birds are actually their living descendants.' \n- A sai vì chỉ một nhánh nhỏ sống sót.\n- B không đầy đủ vì nhiều loài khác cũng sống sót, và chim cũng là động vật.\n- D sai hoàn toàn.\n**Mẹo:** Nghe kỹ phần kết luận, thường chứa thông tin tổng kết hoặc mở rộng."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 questions - Choose the best word/phrase to complete each sentence. No audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "Scientific reviews indicate that many species are often unnecessarily _______.",
          options: ["Endangered", "Endanger", "Endangering", "Endangers"],
          correct: 0,
          explanation: "**Đáp án đúng là A (Endangered).** \n- **Ngữ pháp:** Sau động từ to be ('are') và trạng từ ('unnecessarily'), chúng ta cần một **tính từ** hoặc **phân từ II** để hoàn thành cấu trúc bị động/trạng thái. 'Endangered' là tính từ/participle II có nghĩa 'đang bị đe dọa'. \n- **Tại sao sai?** \n  - B (Endanger) là động từ nguyên thể.\n  - C (Endangering) là V-ing/gerund.\n  - D (Endangers) là động từ chia ở ngôi thứ ba số ít.\n**Mẹo:** Xác định vị trí cần điền (sau be + adv) => cần tính từ."
        },
        {
          id: 22,
          question: "Among ________ recognized at the science awards ceremony were scientists Darwin and Einstein.",
          options: ["who", "those", "they", "whose"],
          correct: 1,
          explanation: "**Đáp án đúng là B (those).** \n- **Ngữ pháp:** Đây là cấu trúc đảo ngữ. 'Among those recognized...' = 'Trong số những người được công nhận...'. 'Those' là đại từ thay thế cho danh từ số nhiều chỉ người (scientists). 'Recognized' là phân từ II rút gọn mệnh đề quan hệ (who were recognized). \n- **Tại sao sai?**\n  - A (who): Thiếu đại từ đứng trước, nếu dùng 'who' phải viết đầy đủ '...among scientists who were recognized...'\n  - C (they): Không dùng trong cấu trúc này.\n  - D (whose): Là đại từ quan hệ sở hữu, không phù hợp nghĩa.\n**Mẹo:** 'Among' + đại từ/ danh từ số nhiều."
        },
        {
          id: 23,
          question: "Climate change has received global attention _______ the industrial revolution.",
          options: ["during", "despite", "except", "since"],
          correct: 3,
          explanation: "**Đáp án đúng là D (since).** \n- **Ngữ pháp:** Thì Hiện tại hoàn thành ('has received') thường đi với 'since' + mốc thời gian để chỉ sự việc bắt đầu từ quá khứ và kéo dài đến hiện tại. \n- **Tại sao sai?**\n  - A (during): + danh từ chỉ khoảng thời gian, không phải mốc sự kiện.\n  - B (despite): + N/V-ing, có nghĩa 'mặc dù', không hợp nghĩa.\n  - C (except): + N, có nghĩa 'ngoại trừ', không hợp nghĩa.\n**Mẹo:** Has/have + V3/ed => thường đi với 'since' hoặc 'for'."
        },
        {
          id: 24,
          question: "All fossils found in digs are from natural causes and contain no __________ alterations.",
          options: ["synthetic", "assumed", "immediate", "reasonable"],
          correct: 0,
          explanation: "**Đáp án đúng là A (synthetic).** \n- **Từ vựng & Ngữ cảnh:** Câu nói về hóa thạch tự nhiên, vì vậy chúng không chứa sự thay đổi 'nhân tạo' (synthetic alterations). 'Synthetic' = man-made. \n- **Tại sao sai?**\n  - B (assumed): được cho là, giả định.\n  - C (immediate): ngay lập tức.\n  - D (reasonable): hợp lý.\nCác từ này không đối lập với 'natural causes' (nguyên nhân tự nhiên) một cách rõ ràng.\n**Mẹo:** Tìm từ trái nghĩa với 'natural' trong ngữ cảnh khoa học."
        },
        {
          id: 25,
          question: "The conservation policy states that _______ monitoring species enhances protection and focus.",
          options: ["regularly", "regular", "regularity", "regulate"],
          correct: 1,
          explanation: "**Đáp án đúng là B (regular).** \n- **Ngữ pháp:** Trước cụm danh từ 'monitoring species' (việc giám sát loài), chúng ta cần một **tính từ** để bổ nghĩa. 'Regular' là tính từ. \n- **Tại sao sai?**\n  - A (regularly) là trạng từ, thường bổ nghĩa cho động từ.\n  - C (regularity) là danh từ.\n  - D (regulate) là động từ.\n**Mẹo:** Xác định từ loại cần thiết: Tính từ + Danh từ/ Danh động từ (V-ing)."
        },
        {
          id: 26,
          question: "The new lecture on volcanoes will begin at 9 a.m. and will _______ an overview of eruptions.",
          options: ["include", "including", "included", "includes"],
          correct: 0,
          explanation: "**Đáp án đúng là A (include).** \n- **Ngữ pháp:** Sau trợ động từ 'will', động từ phải ở dạng **nguyên thể không 'to'** (bare infinitive). \n- **Tại sao sai?**\n  - B (including) là giới từ/V-ing.\n  - C (included) là quá khứ phân từ.\n  - D (includes) là chia ngôi thứ ba số ít hiện tại.\n**Mẹo:** Will/Can/Should... + V (nguyên thể)."
        },
        {
          id: 27,
          question: "To ensure accuracy, all data must be thoroughly checked _______ being published.",
          options: ["during", "before", "between", "unless"],
          correct: 1,
          explanation: "**Đáp án đúng là B (before).** \n- **Ngữ nghĩa & Logic:** Dữ liệu cần được kiểm tra kỹ **trước khi** (before) được xuất bản để đảm bảo tính chính xác. Đây là trình tự hợp lý. \n- **Tại sao sai?**\n  - A (during): trong khi.\n  - C (between): giữa (hai thứ).\n  - D (unless): trừ khi.\nCác từ này không thể hiện mối quan hệ thời gian 'trước-sau' phù hợp.\n**Mẹo:** Xem xét logic của hành động: kiểm tra (check) -> xuất bản (publish)."
        },
        {
          id: 28,
          question: "The research department is seeking a scientist who can work _______ and meet deadlines.",
          options: ["independently", "independence", "independent", "dependently"],
          correct: 0,
          explanation: "**Đáp án đúng là A (independently).** \n- **Ngữ pháp:** Sau động từ 'work', chúng ta cần một **trạng từ** để bổ nghĩa cho cách thức làm việc. 'Independently' là trạng từ. \n- **Tại sao sai?**\n  - B (independence) là danh từ.\n  - C (independent) là tính từ.\n  - D (dependently) là trạng từ nhưng có nghĩa trái ngược ('phụ thuộc'), không hợp ngữ cảnh.\n**Mẹo:** Động từ + Trạng từ (chỉ cách thức)."
        },
        {
          id: 29,
          question: "Because of the eruption, the event has been _______ until further notice.",
          options: ["postpone", "postpones", "postponed", "postponing"],
          correct: 2,
          explanation: "**Đáp án đúng là C (postponed).** \n- **Ngữ pháp:** Cấu trúc bị động thì Hiện tại hoàn thành: has/have + been + V3/ed. Sự kiện 'đã bị hoãn'. \n- **Tại sao sai?**\n  - A (postpone): nguyên thể.\n  - B (postpones): hiện tại ngôi ba số ít.\n  - D (postponing): V-ing.\n**Mẹo:** Has been/Have been + V3/ed => Thể bị động."
        },
        {
          id: 30,
          question: "The teacher reminded the students that attention and collaboration are key in maintaining a positive _______.",
          options: ["environment", "advertisement", "appointment", "equipment"],
          correct: 0,
          explanation: "**Đáp án đúng là A (environment).** \n- **Từ vựng & Collocation:** 'Positive environment' (môi trường tích cực) là cụm từ cố định phổ biến, đặc biệt trong ngữ cảnh giáo dục và làm việc nhóm. \n- **Tại sao sai?**\n  - B (advertisement): quảng cáo.\n  - C (appointment): cuộc hẹn.\n  - D (equipment): thiết bị.\nCác từ này không kết hợp với 'positive' một cách tự nhiên trong ngữ cảnh này.\n**Mẹo:** Học các collocation (cụm từ cố định) thông dụng."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 questions - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: "To: All Science Department Staff\nFrom: Dr. Elena Rossi, Science Director\nSubject: Upcoming Lecture on Natural Disasters\n\nDear Team,\nAs you all know, we are preparing for the official lecture on natural disasters, such as tidal waves, scheduled for early next quarter. In order to ensure a successful presentation, we will begin a series of meetings next week to finalize the discussion strategy. Each team member will be assigned specific responsibilities to (31) smooth coordination between sections.\n\nOur primary objective is to increase awareness of disaster events and attract potential students through both online and offline channels. The media team will focus on digital promotion, while the research team will create visual materials to (32) our educational image.\n\nAdditionally, we will collaborate closely with our guest speakers to collect feedback from attendees. This will help us make any necessary adjustments before the official event. Please note that all suggestions should be submitted to my office no later than Friday, March 22, so that we have enough time to review and (33) them.\n\nThe official conference will take place at our campus on April 5. We expect several major experts to attend, so everyone must be prepared to present our topics in the most professional manner possible. A rehearsal session will be held two days before the event to (34) that all participants are comfortable with their roles.\n\nFor those who are new to the team, we will organize a short orientation program to explain our teaching policies and internal communication procedures. Attendance is highly encouraged, as this session will provide essential information on how to (35) with other departments effectively.\n\nWe truly appreciate everyone’s dedication and teamwork during this busy time. Your hard work and creativity will certainly make this lecture a success. If you have any questions or concerns, please don’t hesitate to (36) me directly.\n\nThank you once again for your continued commitment to excellence. I am confident that, together, we will achieve outstanding results.\nBest regards,\nDr. Elena Rossi\nScience Director",      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "Each team member will be assigned specific responsibilities to (31) smooth coordination between sections.",
          options: ["remind", "ensure", "suggest", "describe"],
          correct: 1,
          explanation: "**Đáp án đúng là B (ensure).** \n- **Ngữ nghĩa:** Mục đích của việc giao trách nhiệm cụ thể là để **đảm bảo** (ensure) sự phối hợp diễn ra trơn tru. 'Ensure' có nghĩa là chắc chắn hóa, bảo đảm điều gì xảy ra. \n- **Tại sao sai?**\n  - A (remind): nhắc nhở (về điều gì đó).\n  - C (suggest): đề nghị, gợi ý.\n  - D (describe): mô tả.\nCác động từ này không thể hiện mục đích 'bảo đảm kết quả'.\n**Mẹo:** To + V (để làm gì) => chọn động từ thể hiện mục đích hoặc kết quả mong muốn."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "The research team will create visual materials to (32) our educational image.",
          options: ["prevent", "improve", "reinforce", "attend"],
          correct: 2,
          explanation: "**Đáp án đúng là C (reinforce).** \n- **Ngữ nghĩa & Collocation:** 'Reinforce our image' (củng cố hình ảnh) là một collocation tốt. Tài liệu trực quan giúp làm mạnh thêm, củng cố hình ảnh giáo dục đã có. \n- **Tại sao sai?**\n  - A (prevent): ngăn chặn (hình ảnh) => tiêu cực, không hợp lý.\n  - B (improve): cải thiện. Từ này cũng có thể dùng được, nhưng 'reinforce' (làm cho vững chắc thêm) phù hợp hơn khi nói về hình ảnh đã có sẵn.\n  - D (attend): tham dự, chăm sóc => không đi với 'image'.\n**Mẹo:** Đọc kỹ ngữ cảnh và lựa chọn từ có sắc thái nghĩa phù hợp nhất."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "So that we have enough time to review and (33) them.",
          options: ["transfer", "implement", "reject", "decline"],
          correct: 1,
          explanation: "**Đáp án đúng là B (implement).** \n- **Ngữ nghĩa & Logic:** Quy trình thông thường: Xem xét (review) các gợi ý, sau đó **thực hiện** (implement) những gợi ý phù hợp. 'Implement' có nghĩa là đưa vào thực tế, thực thi. \n- **Tại sao sai?**\n  - A (transfer): chuyển giao.\n  - C (reject): từ chối.\n  - D (decline): từ chối, suy giảm.\nC và D có nghĩa tiêu cực, không phù hợp với mục đích tích cực của việc thu thập góp ý.\n**Mẹo:** 'Review and...' thường là một cặp hành động tích cực, mang tính xây dựng."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "A rehearsal session will be held to (34) that all participants are comfortable.",
          options: ["announce", "warn", "ensure", "require"],
          correct: 2,
          explanation: "**Đáp án đúng là C (ensure).** \n- **Ngữ nghĩa:** Mục đích của buổi diễn tập là để **đảm bảo chắc chắn rằng** (ensure that) mọi người đều cảm thấy thoải mái. Từ này lặp lại ý của câu 31, thể hiện mục đích bảo đảm. \n- **Tại sao sai?**\n  - A (announce): thông báo.\n  - B (warn): cảnh báo.\n  - D (require): yêu cầu.\nCác từ này không thể hiện mục đích 'bảo đảm một trạng thái'.\n**Mẹo:** To ensure that + clause (đảm bảo rằng...) là cấu trúc phổ biến."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "Information on how to (35) with other departments effectively.",
          options: ["cooperate", "complain", "compare", "compete"],
          correct: 0,
          explanation: "**Đáp án đúng là A (cooperate).** \n- **Ngữ nghĩa & Collocation:** Trong môi trường làm việc, để hiệu quả, các phòng ban cần **hợp tác** (cooperate) với nhau. 'Cooperate with' là cụm từ cố định. \n- **Tại sao sai?**\n  - B (complain): phàn nàn.\n  - C (compare): so sánh.\n  - D (compete): cạnh tranh.\nCác từ này thường không mang lại hiệu quả tích cực trong việc phối hợp nội bộ.\n**Mẹo:** Chọn từ tích cực phù hợp với văn hóa làm việc nhóm."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "Please don’t hesitate to (36) me directly.",
          options: ["delay", "ignore", "push", "reach"],
          correct: 3,
          explanation: "**Đáp án đúng là D (reach).** \n- **Ngữ nghĩa & Collocation:** 'Reach someone' (liên lạc với ai đó) là cách diễn đạt trang trọng và phổ biến trong email công việc. 'Don't hesitate to reach out/contact me' là mẫu câu thông dụng. \n- **Tại sao sai?**\n  - A (delay): trì hoãn.\n  - B (ignore): phớt lờ.\n  - C (push): thúc ép, đẩy.\nCác từ này đều có nghĩa tiêu cực, không phù hợp với lời mời liên hệ.\n**Mẹo:** Học các cách diễn đạt lịch sự trong email: 'feel free to contact', 'don't hesitate to reach out'."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - The lecture on tidal waves will most likely be held (37).",
          options: [
            "early next quarter",
            "by the end of the year",
            "next week",
            "after the conference"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Thông tin trong văn bản:** Dòng đầu tiên của email: 'we are preparing for the official lecture on natural disasters, such as tidal waves, **scheduled for early next quarter.**' \n- Các đáp án khác không được nhắc đến.\n**Mẹo:** Tìm kiếm thông tin cụ thể về thời gian thường nằm ở phần đầu của thông báo."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the main purpose of this message?",
          options: [
            "To request attendee feedback after the event",
            "To introduce a new teaching policy",
            "To announce the cancellation of a session",
            "To inform staff of lecture preparations"
          ],
          correct: 3,
          explanation: "**Đáp án đúng là D.** \n- **Ý chính:** Toàn bộ email thông báo về kế hoạch chuẩn bị cho bài giảng sắp tới: lịch họp, phân công, mục tiêu, diễn tập, v.v. \n- **Tại sao sai?**\n  - A: Phản hồi từ người tham dự được nhắc đến như một phần của quy trình, không phải mục đích chính.\n  - B: Chính sách giảng dạy chỉ được nhắc đến cho nhân viên mới, là chi tiết nhỏ.\n  - C: Không có thông tin hủy buổi nào.\n**Mẹo:** Xác định mục đích chính bằng cách đọc tiêu đề và câu đầu tiên của email."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - Who is the sender of this message?",
          options: [
            "The science director",
            "A guest speaker",
            "The chief academic officer",
            "A research manager"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Thông tin trong văn bản:** Phần 'From:' ghi rõ: 'Dr. Elena Rossi, **Science Director**.' \n- Các chức danh khác không được đề cập.\n**Mẹo:** Luôn kiểm tra phần tiêu đề (From/To/Subject) của email để biết thông tin người gửi/người nhận."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - When will the rehearsal for the conference take place?",
          options: ["April 3", "The following week", "March 22", "April 5"],
          correct: 0,
          explanation: "**Đáp án đúng là A (April 3).** \n- **Thông tin & Tính toán:** Email nói: 'The official conference will take place... on **April 5**.' và 'A rehearsal session will be held **two days before** the event.' \n  - Hai ngày trước ngày 5 tháng 4 là ngày **3 tháng 4**. \n- **Tại sao sai?**\n  - B: 'The following week' (tuần sau) không chính xác.\n  - C (March 22): là hạn chót nộp gợi ý.\n  - D (April 5): là ngày diễn ra hội nghị chính thức.\n**Mẹo:** Với câu hỏi tính toán ngày tháng, hãy tìm hai thông tin liên quan (ngày chính + khoảng thời gian trước/sau) và thực hiện phép tính đơn giản."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 questions - Read the magazine advertisement and e-mail. Choose the best answer (A, B, C, D).",
      type: "reading",
      text: "http://www.scienceaudiopro.com\n\n**Science Audio Pro**\n\nEnhance Your Learning with Professionally Recorded Science Lectures\n\nA professional, personalized audio lecture creates an excellent learning impression. Science Audio Pro meets your specifications to record a customized science greeting within three business days!\n\n**Services We Offer:**\n1. **Professional Voice Talent for Lecture Messages** – We have numerous voice actors. Visit scienceaudiopro.com to hear examples.\n2. **On-Hold Messages** – Professional on-hold messages.\n3. **Customized Script Writing** – Craft personalized messages.\n4. **Multilingual Voice Production** – Services in multiple languages.\n\nSend e-mail to inquiry@scienceaudiopro.com. A representative will call within 24 hours.\n\nTo: inquiry@scienceaudiopro.com\nFrom: j.annesly@sciencedata.com\nDate: June 25\nSubject: Request\n\nI found your notice in the newspaper and wish to use your services for my science-processing business. I am looking for a professionally recorded lecture greeting, and wonder if you would write and record this, and how soon. Since I work with English- and Spanish-speaking clients, I would like the message in both languages. Please reach out at my mobile between 10:00 A.M. and 5:00 P.M.\n\nThank you,\nJody Annesly\nScience Data\n512-555-6879\n342 Maymill Road, Fort Worth, TX 70609",
      questions: [
        {
          id: 41,
          question: "According to the advertisement, why should customers visit the Science Audio Pro Web site?",
          options: [
            "To submit a credit card payment",
            "To request recording equipment",
            "To hear lecture samples",
            "To add a new subscription number"
          ],
          correct: 2,
          explanation: "**Đáp án đúng là C.** \n- **Thông tin trong quảng cáo:** Dịch vụ đầu tiên được liệt kê: '1. Professional Voice Talent for Lecture Messages – We have numerous voice actors. **Visit scienceaudiopro.com to hear examples.**' \n- Các hành động khác không được đề cập trong quảng cáo.\n**Mẹo:** Scan nhanh các bullet points (gạch đầu dòng) để tìm thông tin chi tiết."
        },
        {
          id: 42,
          question: "What is suggested about Science Audio Pro?",
          options: [
            "It specializes in historical lectures.",
            "It has recently expanded its business.",
            "It fills orders once a week.",
            "It advertises in the newspaper."
          ],
          correct: 3,
          explanation: "**Đáp án đúng là D.** \n- **Thông tin liên kết giữa hai văn bản:** Trong email của Ms. Annesly, cô ấy viết: 'I found your **notice in the newspaper**...' Điều này ngụ ý rằng Science Audio Pro có đăng quảng cáo trên báo. \n- Các đáp án A, B, C không có thông tin ủng hộ trong cả hai văn bản.\n**Mẹo:** Câu hỏi 'suggested' (được gợi ý) thường yêu cầu suy luận từ thông tin gián tiếp hoặc kết hợp cả hai văn bản."
        },
        {
          id: 43,
          question: "Who most likely is Ms. Annesly?",
          options: [
            "A science teacher",
            "An actor",
            "A script writer",
            "A sales associate"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Suy luận từ ngữ cảnh:** Cô ấy có doanh nghiệp 'science-processing business', muốn thuê ghi âm một 'lecture greeting' (lời chào bài giảng) cho khách hàng nói tiếng Anh và Tây Ban Nha. Điều này gợi ý cô ấy có thể là một giáo viên khoa học hoặc người tổ chức các khóa học khoa học, cần tài liệu âm thanh chuyên nghiệp. \n- Các nghề nghiệp khác không phù hợp với nhu cầu sử dụng 'lecture greeting'.\n**Mẹo:** Dựa vào loại dịch vụ được yêu cầu để suy đoán nghề nghiệp của khách hàng."
        },
        {
          id: 44,
          question: "What service does Ms. Annesly NOT request from Science Audio Pro?",
          options: [
            "Multilingual audio production",
            "Professional voice talent",
            "On-hold messages",
            "Customized script writing"
          ],
          correct: 2,
          explanation: "**Đáp án đúng là C (On-hold messages).** \n- **Phân tích email yêu cầu:** Ms. Annesly nói: 'I am looking for a professionally recorded lecture greeting, and wonder if you would write and record this... in both languages.' \n  - 'Professionally recorded' ~ Professional voice talent (B).\n  - 'Write and record' ~ Customized script writing (D).\n  - 'In both languages' ~ Multilingual audio production (A).\n- **Dịch vụ không được yêu cầu:** 'On-hold messages' là một dịch vụ khác được liệt kê trong quảng cáo, nhưng không được Ms. Annesly nhắc đến.\n**Mẹo:** Đối chiếu từng yêu cầu trong email với các dịch vụ được quảng cáo."
        },
        {
          id: 45,
          question: "What will Ms. Annesly most likely do within 24 hours?",
          options: [
            "Visit a recording studio",
            "Meet with an actor",
            "Write a script",
            "Speak with a representative"
          ],
          correct: 3,
          explanation: "**Đáp án đúng là D.** \n- **Thông tin trong quảng cáo:** Dòng cuối của quảng cáo: 'A representative will call within 24 hours.' Vì Ms. Annesly đã gửi email hỏi, cô ấy có thể sẽ nhận được cuộc gọi từ đại diện công ty. \n- Các hành động khác có thể xảy ra sau, nhưng không chắc chắn trong vòng 24 giờ.\n**Mẹo:** Kết hợp thông tin về chính sách của công ty (từ quảng cáo) với tình huống cụ thể của khách hàng (từ email)."
        },
        {
          id: 46,
          question: "According to the advertisement, Science Audio Pro will respond to customer inquiries within",
          options: ["12 hours", "three business days", "48 hours", "24 hours"],
          correct: 3,
          explanation: "**Đáp án đúng là D (24 hours).** \n- **Thông tin trực tiếp trong quảng cáo:** Câu cuối cùng: 'A representative will call within **24 hours**.' \n- Các mốc thời gian khác không được đề cập. 'Three business days' là thời gian giao sản phẩm (customized science greeting), không phải thời gian phản hồi.\n**Mẹo:** Phân biệt giữa 'response time' (thời gian phản hồi) và 'production/delivery time' (thời gian sản xuất/giao hàng)."
        },
        {
          id: 47,
          question: "What can be inferred about Science Audio Pro’s services?",
          options: [
            "They are limited to English-speaking clients.",
            "They can accommodate different languages.",
            "They require customers to visit the office in person.",
            "They are available only on weekends."
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** \n- **Thông tin trong quảng cáo:** Một trong các dịch vụ được liệt kê là '4. **Multilingual Voice Production** – Services in multiple languages.' Điều này cho thấy họ có thể đáp ứng nhu cầu về nhiều ngôn ngữ. \n- **Tại sao sai?**\n  - A: Trái ngược với dịch vụ đa ngôn ngữ.\n  - C & D: Không có thông tin nào cho thấy điều này.\n**Mẹo:** 'Can be inferred' (có thể suy ra) => tìm thông tin được ngụ ý mạnh mẽ từ một chi tiết có sẵn."
        },
        {
          id: 48,
          question: "What does Ms. Annesly specifically request in her message?",
          options: [
            "A newspaper advertisement",
            "A bilingual lecture recording",
            "A sample of recorded music",
            "A refund for a previous order"
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** \n- **Thông tin trực tiếp trong email:** 'I would like the message **in both languages**.' (English và Spanish). Đây là một yêu cầu cụ thể và rõ ràng. \n- Các đáp án khác không được yêu cầu.\n**Mẹo:** Câu hỏi 'specifically request' (yêu cầu cụ thể) thường tìm thông tin trực tiếp trong phần thân email."
        },
        {
          id: 49,
          question: "What detail does Ms. Annesly include to make communication easier?",
          options: [
            "Her client list",
            "Her preferred calling hours",
            "Her company’s website link",
            "Her office address"
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** \n- **Thông tin trong email:** Dòng cuối email của cô ấy: 'Please reach out at my mobile **between 10:00 A.M. and 5:00 P.M.**' Cô ấy chỉ ra khung giờ liên lạc thuận tiện để công ty dễ dàng gọi lại. \n- Cô ấy có để số điện thoại và địa chỉ, nhưng 'preferred calling hours' là chi tiết tạo điều kiện giao tiếp dễ dàng hơn.\n**Mẹo:** Tìm chi tiết thể hiện sự chủ động và tạo điều kiện cho đối phương."
        },
        {
          id: 50,
          question: "What is the likely next step for Science Audio Pro?",
          options: [
            "Calling Ms. Annesly to discuss her project and pricing",
            "Sending Ms. Annesly a contract to sign",
            "Visiting Ms. Annesly’s office for recording",
            "Posting a new advertisement in the newspaper"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Suy luận từ quy trình:** Theo quảng cáo, sau khi nhận được yêu cầu, đại diện sẽ gọi trong vòng 24 giờ. Email của Ms. Annesly là một yêu cầu rõ ràng. Bước tiếp theo hợp lý nhất là công ty sẽ gọi điện để thảo luận chi tiết dự án và báo giá. \n- Các bước B và C thường diễn ra sau khi đã thảo luận và thống nhất. D không liên quan đến yêu cầu cụ thể này.\n**Mẹo:** Suy nghĩ về quy trình kinh doanh thông thường: Liên hệ -> Thảo luận chi tiết -> Thống nhất -> Ký kết/Thực hiện."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 questions - Read the text message chain about a trip to a historical site. Choose the best answer (A, B, C, D).",
      type: "reading",
      text: "SAM BACH (11:59): My first flight was delayed, so I missed my connection in Beijing.\nSAM BACH(12:00):So now, I'm going to be on a flight arriving in Naples at 18:00.\n\nAKIRA OTANI (12:05): OK. Same airline?\n\nSAM BACH (12:06): It's still Fly Right Airlines. It will be later in the day but still in time for our client meeting.\n\nAKIRA OTANI (12:06): I'll confirm the arrival time. Do you have any checked bags?\n\nSAM BACH (12:10): I do. Would you mind meeting me at the door after I go through customs?\n\nAKIRA OTANI (12:15): Sure thing. Parking spots can be hard to find, but now I'll have extra time to drive around and look.\n\nSAM BACH (12:16): Yes, sorry about that. See you then!",      questions: [
        {
          id: 51,
          question: "What is suggested about Mr. Bach?",
          options: [
            "He has been to Pompeii more than once.",
            "He is on a business trip.",
            "He currently works in Naples.",
            "He works for Fly Right Airlines."
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** \n- **Suy luận từ ngữ cảnh:** Mr. Bach nhắc đến 'our client meeting' (cuộc họp với khách hàng của chúng ta). Điều này gợi ý rằng chuyến đi này là vì công việc (business trip). \n- **Tại sao sai?**\n  - A: Không có thông tin về việc anh ấy đã từng đến Pompeii.\n  - C: Anh ấy đang bay đến Naples, không nhất thiết là làm việc ở đó.\n  - D: Anh ấy bay bằng hãng Fly Right, không phải làm việc cho họ.\n**Mẹo:** Từ khóa 'client meeting' là dấu hiệu rõ ràng nhất của một chuyến công tác."
        },
        {
          id: 52,
          question: "At 12:15, what does Mr. Otani mean when he writes, “Sure thing”?",
          options: [
            "He knows Mr. Bach must pass through customs.",
            "He agrees to wait at the door near the customs area.",
            "He has confirmed the arrival time of a flight.",
            "He is certain he will be able to find a parking place."
          ],
          correct: 1,
          explanation: "**Đáp án đúng là B.** \n- **Ngữ cảnh hội thoại:** Mr. Bach hỏi: 'Would you mind meeting me at the door after I go through customs?' Mr. Otani trả lời ngay: 'Sure thing.' 'Sure thing' là cách nói thân mật của 'Of course' hoặc 'Certainly', thể hiện sự đồng ý. \n- A và C là những việc khác đã được nhắc đến, không phải là nội dung của lời đồng ý này. D là một nhận xét riêng sau đó.\n**Mẹo:** Luôn đọc câu hỏi và câu trả lời liền kề để hiểu ngữ cảnh của cụm từ."
        },
        {
          id: 53,
          question: "Why was Mr. Bach’s flight delayed?",
          options: [
            "He missed his connection in Beijing.",
            "The airline changed the departure time.",
            "There was bad weather in Naples.",
            "He forgot to check in early."
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Thông tin trực tiếp:** Tin nhắn đầu tiên của Mr. Bach: 'My first flight was delayed, **so I missed my connection in Beijing.**' \n- Các lý do B, C, D không được đề cập.\n**Mẹo:** Câu hỏi 'why' thường có câu trả lời trực tiếp trong văn bản, thường đi sau từ 'so', 'because', 'due to'."
        },
        {
          id: 54,
          question: "What time is Mr. Bach’s new flight expected to arrive?",
          options: ["18:00", "11:59", "20:15", "12:06"],
          correct: 0,
          explanation: "**Đáp án đúng là A (18:00).** \n- **Thông tin trực tiếp:** Tin nhắn của Mr. Bach: 'I'm going to be on a flight arriving in Naples at **18:00**.' \n- Các mốc thời gian khác là thời gian gửi tin nhắn hoặc không liên quan.\n**Mẹo:** Chú ý đến các con số chỉ giờ và sân bay."
        },
        {
          id: 55,
          question: "What does Mr. Otani offer to do for Mr. Bach?",
          options: [
            "Pick him up at the airport",
            "Help carry his luggage",
            "Change his flight booking",
            "Drive him to the hotel"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Hành động được đồng ý:** Mr. Otani đồng ý 'meeting me at the door after I go through customs.' Hành động này tương đương với việc đến đón (pick up) tại sân bay. \n- Không có thông tin về việc mang hành lý (B), đổi vé (C) hay chở đến khách sạn (D).\n**Mẹo:** 'Pick someone up at the airport' bao gồm việc đến và gặp họ tại khu vực đến."
        },
        {
          id: 56,
          question: "What can be inferred about the two men?",
          options: [
            "They are colleagues attending the same meeting.",
            "They are family members traveling together.",
            "They have never met before.",
            "They both work for Fly Right Airlines."
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Suy luận từ nhiều manh mối:** Họ nói về 'our client meeting', Mr. Otani chủ động hỏi về hành lý và đồng ý đi đón. Điều này cho thấy họ có mối quan hệ công việc và sẽ cùng tham dự một cuộc họp. \n- **Tại sao sai?**\n  - B: Giọng điệu và nội dung trao đổi mang tính công việc, không thân mật như gia đình.\n  - C: Họ dường như đã biết nhau và có kế hoạch chung.\n  - D: Chỉ Mr. Bach là người bay với hãng đó.\n**Mẹo:** Kết hợp tất cả thông tin về mục đích chuyến đi và sự tương tác để suy ra mối quan hệ."
        },
        {
          id: 57,
          question: "At 12:06, why does Mr. Bach mention “still in time for our client meeting”?",
          options: [
            "To confirm he will not be late",
            "To apologize for missing the meeting",
            "To cancel his attendance",
            "To ask about the meeting location"
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Mục đích giao tiếp:** Mr. Bach thông báo chuyến bay mới sẽ đến muộn hơn, nhưng ngay lập tức ông trấn an Mr. Otani rằng 'It will be later in the day **but still in time for our client meeting.**' Đây là cách xác nhận rằng sự chậm trễ sẽ không ảnh hưởng đến cuộc họp quan trọng. \n- Ông không xin lỗi vì bỏ lỡ cuộc họp (B), không hủy (C), cũng không hỏi địa điểm (D).\n**Mẹo:** Chú ý từ 'but' để thấy sự tương phản và mục đích trấn an/thuyết phục."
        },
        {
          id: 58,
          question: "What does Mr. Otani mean when he writes, “I’ll confirm the arrival time”?",
          options: [
            "He plans to check the airline’s schedule.",
            "He needs to contact the travel agent.",
            "He will change the meeting time.",
            "He will book another ticket for Mr. Bach."
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Ngữ cảnh:** Mr. Bach vừa thông báo giờ đến mới (18:00). Mr. Otani nói 'I'll confirm the arrival time.' Hành động hợp lý nhất là anh ấy sẽ tự kiểm tra lại lịch trình chuyến bay trên website hoặc app của hãng hàng không để chắc chắn. \n- Không có dấu hiệu cho thấy anh ấy sẽ liên hệ đại lý (B), thay đổi giờ họp (C), hay đặt vé mới (D).\n**Mẹo:** 'Confirm' (xác nhận) thường là kiểm tra lại thông tin đã có cho chính xác."
        },
        {
          id: 59,
          question: "What is implied about Mr. Otani’s travel to the airport?",
          options: [
            "He expects heavy traffic or limited parking.",
            "He works at the airport.",
            "He plans to take public transportation.",
            "He has never been to Naples Airport before."
          ],
          correct: 0,
          explanation: "**Đáp án đúng là A.** \n- **Thông tin ngầm hiểu:** Mr. Otani nói: 'Parking spots can be hard to find, but now I'll have extra time to drive around and look.' Câu này ngụ ý rằng việc tìm chỗ đỗ xe ở sân bay thường khó khăn (do đông đúc). Việc chuyến bay đến muộn cho anh ấy thêm thời gian để xoay sở với vấn đề này. \n- Không có thông tin cho thấy B, C, D.\n**Mẹo:** Câu nói về một khó khăn tiềm ẩn ('can be hard') cho thấy người nói đang dự đoán/lo lắng về điều đó."
        },
        {
          id: 60,
          question: "What does Mr. Bach express in his final message?",
          options: [
            "Regret about missing the meeting",
            "Request for flight confirmation",
            "Frustration with the airline",
            "Thanks for the help"
          ],
          correct: 3,
          explanation: "**Đáp án đúng là D.** \n- **Hàm ý văn hóa:** Mr. Bach viết: 'Yes, sorry about that. See you then!' 'Sorry about that' là lời xin lỗi vì sự bất tiện gây ra cho Mr. Otani (phải đợi lâu hơn, phải tìm chỗ đỗ). Trong bối cảnh này, nó cũng hàm chứa lời cảm ơn ngầm vì sự giúp đỡ và thông cảm của Mr. Otani. 'See you then!' là lời kết thúc tích cực. \n- Anh không bày tỏ hối tiếc vì bỏ lỡ cuộc họp (A), không yêu cầu xác nhận chuyến bay (B), và không tỏ ra tức giận với hãng hàng không (C).\n**Mẹo:** Trong giao tiếp, một lời xin lỗi về rắc rối gây ra cho người khác thường cũng mang sắc thái cảm ơn."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam2.js">
export const EXAM2_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 2 (Chủ Đề: Du Lịch & Công Việc)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT, tập trung vào chủ đề Du Lịch & Công Việc. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài giữa đồng nghiệp về chuyến công tác để luyện nghe chi tiết.",
  parts: {
    // Listening Parts - Part 1: 1 hội thoại chung cho 5 câu hỏi, chủ đề công tác
   part1: {
  title: "PART 1: Short Conversations",
  description: "Nghe đoạn hội thoại giữa Mark và Sarah về kế hoạch công tác. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
  type: "listening",
  script: "Mark: Hey Sarah, excited for our business trip to Singapore next week?\nSarah: Absolutely, Mark. It's my first time leading a client meeting abroad. I've booked the flight for early morning departure to avoid traffic, but I worry about the long layover in Hong Kong.\nMark: Don't stress. The layover is only two hours—plenty of time for a quick coffee. What about accommodations? Did you confirm the hotel near the conference center?\nSarah: Yes, it's a five-star place with great reviews, but it's pricey. I negotiated a corporate rate, though. Oh, and I packed light: just carry-on to save time at check-in.\nMark: Smart move. Last time I overpacked and missed my gate because of baggage claim delays. Let's review the agenda—focus on the Q&A session, as that's where deals close.",
  questions: [
    {
      id: 1,
      question: "What is Sarah's experience with leading client meetings abroad?",
      options: [
        "(A) She has led many client meetings abroad.",
        "(B) It's her first time leading a client meeting abroad.",
        "(C) She has never led a meeting.",
        "(D) She led a meeting in Hong Kong."
      ],
      correct: 1,
      explanation: "Sarah nói rõ ràng: 'It's **my first time leading a client meeting abroad.**' (Đây là lần đầu tiên tôi dẫn dắt cuộc họp khách hàng ở nước ngoài.) Từ khóa chính: 'first time' chỉ đây là kinh nghiệm mới. Cấu trúc 'It is my first time + V-ing' diễn tả một hoạt động lần đầu tiên được thực hiện, thường có tính chất mới mẻ hoặc gây lo lắng. Phân tích các đáp án sai: (A) 'many times' hoàn toàn trái ngược với 'first time', (C) 'never led' cũng sai vì cô ấy sắp dẫn dắt lần đầu chứ không phải chưa bao giờ, (D) 'in Hong Kong' chỉ là nơi dừng chân chuyến bay, không phải nơi họp khách."
    },
    {
      id: 2,
      question: "How long is the layover in Hong Kong?",
      options: [
        "(A) The layover is five hours long.",
        "(B) The layover is two hours long.",
        "(C) There is no layover.",
        "(D) The layover is in Singapore."
      ],
      correct: 1,
      explanation: "Mark trả lời trực tiếp: 'The layover is **only two hours**—plenty of time for a quick coffee.' (Dừng chân chỉ hai giờ—đủ thời gian cho một tách cà phê nhanh.) Từ khóa chính: 'only two hours' chỉ rõ thời lượng. Từ 'only' (chỉ, không quá) nhấn mạnh thời gian ngắn hơn dự kiến. Lưu ý: Trước đó Sarah nói 'I worry about the **long layover**' nhưng Mark đã xoa dịu lo lắng của cô. Phân tích các đáp án sai: (A) 'five hours' là giá trị sai hoàn toàn, (C) 'no layover' mâu thuẫn với thông tin, (D) layover ở Hong Kong, không phải Singapore."
    },
    {
      id: 3,
      question: "What is mentioned about Sarah's hotel booking?",
      options: [
        "(A) The hotel is budget-friendly.",
        "(B) The hotel has poor reviews.",
        "(C) The hotel is near the conference center.",
        "(D) There is no hotel booking."
      ],
      correct: 2,
      explanation: "Sarah nói: 'Yes, it's a five-star place with great reviews, but it's pricey. I negotiated a corporate rate, though. ... Did you confirm the **hotel near the conference center?**' (Vâng, nó là một nơi năm sao với đánh giá tuyệt vời, nhưng đắt. Tôi đã thương lượng tỷ lệ công ty. ... Bạn đã xác nhận khách sạn gần trung tâm hội nghị?) Từ khóa chính: 'near the conference center' - vị trí khách sạn. Giới từ 'near' chỉ vị trí địa lý rất quan trọng cho du lịch công tác (tiết kiệm thời gian đi lại). Phân tích các đáp án sai: (A) 'budget-friendly' hoàn toàn trái ngược với 'five-star' và 'pricey' trong bài, (B) 'poor reviews' mâu thuẫn với 'great reviews', (D) đã xác nhận nên không phải 'no booking'."
    },
    {
      id: 4,
      question: "How did Sarah pack for the trip?",
      options: [
        "(A) She packed heavy luggage.",
        "(B) She packed light with carry-on.",
        "(C) She forgot to pack.",
        "(D) She overpacked last time."
      ],
      correct: 1,
      explanation: "Sarah nói: 'Oh, and **I packed light: just carry-on** to save time at check-in.' (Ôi, và tôi đóng gói nhẹ: chỉ hành lý xách tay để tiết kiệm thời gian check-in.) Từ khóa chính: 'packed light' (đóng gói nhẹ) và 'just carry-on' (chỉ hành lý xách tay). Cấu trúc 'to + V nguyên thể' (to save time) chỉ mục đích của hành động. Từ 'just' nhấn mạnh sự đơn giản, giảm thiểu. Phân tích các đáp án sai: (A) 'heavy luggage' trái ngược hoàn toàn với 'packed light', (C) 'forgot to pack' là logic sai, (D) 'overpacked last time' - đây là kinh nghiệm của **Mark**, không phải Sarah. Mark nói 'Last time **I** overpacked' để giải thích tại sao ông ấy đồng ý với chiến lược của Sarah."
    },
    {
      id: 5,
      question: "What should they focus on during the meeting?",
      options: [
        "(A) Focus on the opening remarks.",
        "(B) Focus on the Q&A session.",
        "(C) Avoid the agenda review.",
        "(D) Skip the client meeting."
      ],
      correct: 1,
      explanation: "Mark nói: 'Let's review the agenda—**focus on the Q&A session, as that's where deals close.**' (Hãy xem lại chương trình—tập trung vào phần Q&A, vì đó là nơi chốt hợp đồng.) Từ khóa chính: 'Q&A session' (phần hỏi đáp) và 'as that's where deals close' (vì đó là nơi chốt hợp đồng). Cấu trúc 'as + clause' chỉ lý do hoặc nguyên nhân (tương đương 'because'). Thì hiện tại đơn 'that's where deals close' mô tả sự thật chung trong kinh doanh - vòng Q&A thường là nơi quyết định cuối cùng. Phân tích các đáp án sai: (A) 'opening remarks' không được nhấn mạnh, (C) 'avoid the agenda review' mâu thuẫn với 'Let's review', (D) 'skip the client meeting' là logic điên rồ và hoàn toàn trái ngược mục đích chuyến đi."
    }
  ]
},
   part2: {
  title: "PART 2: Longer Conversation",
  description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người tại sân bay về lịch trình công tác. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Narrator: At the airport lounge.\nTravel Agent: Good morning, Mr. Ben and Ms. Anna. Your connecting flight to Paris departs in 45 minutes. Any last-minute changes to the itinerary?\nBen: No changes, thanks. But Anna, did you email the Paris office about our delayed arrival due to the storm?\nAnna: Yes, I did. They understand and rescheduled the factory tour for the afternoon. Mike, our colleague, will join us there—he's flying in from London separately.\nTravel Agent: Excellent. Here's your boarding passes. Remember, the lounge offers free Wi-Fi for work emails.\nBen: Appreciate it. Anna, after Paris, we're heading to Berlin for the trade fair. I hope the train connection isn't as chaotic as last year.\nAnna: It shouldn't be. I booked first-class seats for comfort during the three-hour ride. Let's grab coffee before boarding.",
  questions: [
    {
      id: 6,
      question: "How soon does the flight to Paris depart?",
      options: [
        "In 15 minutes",
        "In 45 minutes",
        "In one hour",
        "In two hours"
      ],
      correct: 1,
      explanation: "✅ Đáp án: **B - In 45 minutes**\n\n📍 **Từ khóa cần nghe:** Travel Agent nói rõ: 'Your connecting flight to Paris **departs in 45 minutes**.'\n\n💡 **Mẹo làm bài:** Tập trung nghe con số thời gian ngay sau động từ 'departs in'. Đây là thông tin được nói trực tiếp ở đầu đoạn hội thoại.\n\n⚠️ **Lưu ý ngữ pháp:** 'Departs in + khoảng thời gian' dùng thì hiện tại đơn để diễn tả lịch trình tương lai đã được lên kế hoạch cố định (scheduled future), thường gặp với phương tiện giao thông công cộng."
    },
    {
      id: 7,
      question: "Why was the arrival in Paris delayed?",
      options: [
        "Due to traffic",
        "Due to a storm",
        "Due to booking errors",
        "Due to colleague's flight"
      ],
      correct: 1,
      explanation: "✅ Đáp án: **B - Due to a storm**\n\n📍 **Từ khóa cần nghe:** Ben hỏi Anna: 'Did you email the Paris office about our **delayed arrival due to the storm**?'\n\n💡 **Mẹo làm bài:** Chú ý cụm từ 'due to' (do, bởi vì) - đây là tín hiệu ngữ pháp chỉ nguyên nhân. Nghe từ ngay sau 'due to' là đáp án.\n\n🎯 **Cấu trúc quan trọng:** 'due to + danh từ/cụm danh từ' = 'because of' (chỉ nguyên nhân). Ví dụ: delayed due to bad weather, cancelled due to technical issues.\n\n⚠️ **Cẩn thận:** Các đáp án nhiễu như 'traffic', 'booking errors' không được nhắc đến trong đoạn hội thoại."
    },
    {
      id: 8,
      question: "What will be rescheduled in Paris?",
      options: [
        "The coffee break",
        "The factory tour",
        "The email session",
        "The boarding pass"
      ],
      correct: 1,
      explanation: "✅ Đáp án: **B - The factory tour**\n\n📍 **Từ khóa cần nghe:** Anna trả lời: 'They understand and **rescheduled the factory tour** for the afternoon.'\n\n💡 **Mẹo làm bài:** Động từ 'reschedule' (dời lịch) là từ khóa quan trọng. Nghe xem cái gì được 'reschedule' - đó chính là đáp án.\n\n🎯 **Phân tích ngữ pháp:** 'Rescheduled' (thì quá khứ đơn) cho thấy việc thay đổi lịch trình đã được thực hiện xong. Cụm 'for the afternoon' bổ sung thông tin thời gian mới.\n\n⚠️ **Tránh nhầm lẫn:** 'Coffee break', 'email session', 'boarding pass' đều được nhắc đến nhưng KHÔNG được reschedule. Chỉ có 'factory tour' mới bị thay đổi lịch."
    },
    {
      id: 9,
      question: "Where is Mike flying from?",
      options: [
        "From Singapore",
        "From Hong Kong",
        "From London",
        "From Berlin"
      ],
      correct: 2,
      explanation: "✅ Đáp án: **C - From London**\n\n📍 **Từ khóa cần nghe:** Anna nói: 'Mike, our colleague, will join us there—**he's flying in from London** separately.'\n\n💡 **Mẹo làm bài:** Tập trung vào cụm 'from + địa điểm' sau động từ chỉ di chuyển. 'Flying from' chỉ nơi xuất phát.\n\n🎯 **Cấu trúc thì:** 'He's flying in' = 'He is flying in' (hiện tại tiếp diễn) diễn tả kế hoạch tương lai gần đã sắp xếp. Trong ngữ cảnh công tác, thì này thể hiện hành trình đang được thực hiện.\n\n📝 **Lưu ý:** Từ 'separately' (riêng biệt) cho biết Mike bay một mình, không cùng chuyến với Ben và Anna.\n\n⚠️ **Cẩn thận:** Berlin được nhắc đến nhưng là điểm ĐẾN tiếp theo của nhóm, không phải nơi Mike bay từ đó."
    },
    {
      id: 10,
      question: "What did Anna book for the trip to Berlin?",
      options: [
        "Economy seats",
        "First-class seats",
        "No seats",
        "Hotel rooms only"
      ],
      correct: 1,
      explanation: "✅ Đáp án: **B - First-class seats**\n\n📍 **Từ khóa cần nghe:** Anna nói: 'I **booked first-class seats** for comfort during the three-hour ride.'\n\n💡 **Mẹo làm bài:** Nghe động từ 'book' (đặt) kết hợp với loại ghế (first-class/economy). Đây là thông tin cụ thể về việc chuẩn bị chuyến đi.\n\n🎯 **Phân tích ngữ pháp:** \n- 'Booked' (quá khứ đơn) → hành động đặt chỗ đã hoàn tất\n- 'For comfort' → cụm giới từ chỉ mục đích (để thoải mái)\n- 'During the three-hour ride' → cụm chỉ thời gian, nhấn mạnh lý do chọn first-class cho chuyến đi dài\n\n📝 **Ngữ cảnh:** Trong công tác, việc chọn first-class thay vì economy cho thấy ưu tiên sự thoải mái và khả năng làm việc trên đường.\n\n⚠️ **Tránh nhầm lẫn:** 'Hotel rooms' được nhắc đến nhưng không phải là thứ Anna đã book trong câu này."
    }
  ]
},
   part3: {
  title: "PART 3: Monologue",
  description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn) của quản lý về chính sách du lịch công tác. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Manager: Hello, team. Today, we're discussing our company's travel policy updates. All business trips must be approved in advance to control expenses—nothing over budget without HR sign-off. Last quarter, we saved 15% on flights by opting for economy class unless the journey exceeds eight hours. For accommodations, prioritize hotels with reliable Wi-Fi and proximity to client sites; luxury suites are reserved for executive-level visits only. Remember, expense reports are due within 72 hours of return, or reimbursements will be delayed. Emma, our top traveler, always submits on time and maximizes mileage points for future trips. If you're heading to Tokyo next, book through our preferred agency for seamless visa support.",
  questions: [
    { 
      id: 11, 
      question: "All business trips must be __________.", 
      options: ["(A) spontaneous", "(B) approved in advance", "(C) expensive", "(D) delayed"], 
      correct: 1,
      explanation: "✅ Đáp án: **(B) approved in advance**\n\n📍 **Từ khóa cần nghe:** Manager nói rõ: 'All business trips **must be approved in advance** to control expenses.'\n\n💡 **Mẹo làm bài:** Chú ý cấu trúc 'must be + V3' - đây là dạng bị động diễn tả quy định bắt buộc. Nghe từ ngay sau 'must be' là đáp án.\n\n🎯 **Phân tích ngữ pháp:**\n- 'Must be + past participle' → thể bị động chỉ nghĩa vụ (obligation)\n- 'In advance' = trước, trước khi xảy ra → nhấn mạnh tính kế hoạch\n- Mục đích: 'to control expenses' (để kiểm soát chi phí)\n\n📝 **Ngữ cảnh công ty:** Đây là quy trình hành chính tiêu chuẩn - mọi chuyến công tác đều cần được phê duyệt trước, không được tự ý đi.\n\n⚠️ **Tránh nhầm lẫn:** \n- (A) spontaneous (tự phát) → NGƯỢC LẠI với 'in advance'\n- (C) expensive (đắt) → không liên quan đến yêu cầu\n- (D) delayed (trì hoãn) → không được nhắc đến"
    },
    { 
      id: 12, 
      question: "We saved 15% on flights by __________.", 
      options: ["(A) choosing luxury options", "(B) opting for economy class", "(C) flying first class", "(D) avoiding travel"], 
      correct: 1,
      explanation: "✅ Đáp án: **(B) opting for economy class**\n\n📍 **Từ khóa cần nghe:** 'We saved 15% on flights **by opting for economy class** unless the journey exceeds eight hours.'\n\n💡 **Mẹo làm bài:** Cụm 'by + V-ing' luôn chỉ PHƯƠNG PHÁP/CÁCH THỨC. Nghe động từ V-ing ngay sau 'by' là đáp án.\n\n🎯 **Phân tích ngữ pháp:**\n- 'By + V-ing' → chỉ phương tiện, cách thức (HOW)\n- 'Opt for' = choose, select (lựa chọn)\n- 'Unless + clause' → điều kiện ngoại lệ (= except if)\n\n📊 **Con số quan trọng:** 15% savings - cho thấy hiệu quả của chính sách\n\n📝 **Quy định thực tế:** Hạng phổ thông cho chuyến bay dưới 8 giờ, hạng cao hơn cho chuyến dài (nhân văn + tiết kiệm).\n\n⚠️ **Cẩn thận với đáp án nhiễu:**\n- (A) luxury options → NGƯỢC LẠI với tiết kiệm\n- (C) first class → NGƯỢC LẠI với economy\n- (D) avoiding travel → không bay thì không tiết kiệm 15% ON FLIGHTS được"
    },
    { 
      id: 13, 
      question: "For accommodations, prioritize hotels with __________.", 
      options: ["(A) no Wi-Fi", "(B) reliable Wi-Fi and proximity", "(C) high prices", "(D) distance from sites"], 
      correct: 1,
      explanation: "✅ Đáp án: **(B) reliable Wi-Fi and proximity**\n\n📍 **Từ khóa cần nghe:** 'Prioritize hotels with **reliable Wi-Fi and proximity to client sites**.'\n\n💡 **Mẹo làm bài:** Động từ 'prioritize' (ưu tiên) + 'with' → sau đó là TIÊU CHÍ quan trọng nhất. Đây là câu hỏi về yêu cầu chất lượng.\n\n🎯 **Phân tích ngữ pháp:**\n- 'Prioritize + danh từ' → động từ mệnh lệnh (imperative)\n- 'With + danh từ' → chỉ đặc điểm, tính chất\n- 'Proximity to' = nearness to (gần với)\n- Dùng thì hiện tại đơn cho quy định chung\n\n📝 **Hai tiêu chí vàng trong công tác:**\n1. Reliable Wi-Fi → làm việc hiệu quả\n2. Proximity to client sites → tiết kiệm thời gian di chuyển\n\n💼 **Bổ sung:** Luxury suites CHỈ dành cho executive-level (cấp cao) - phân biệt cấp bậc.\n\n⚠️ **Tất cả đáp án khác đều TRÁI NGƯỢC:**\n- (A) no Wi-Fi → không thể làm việc\n- (C) high prices → không được khuyến khích\n- (D) distance from sites → lãng phí thời gian"
    },
    { 
      id: 14, 
      question: "Emma always __________.", 
      options: ["(A) submits expense reports on time", "(B) exceeds budget", "(C) avoids travel", "(D) forgets visas"], 
      correct: 0,
      explanation: "✅ Đáp án: **(A) submits expense reports on time**\n\n📍 **Từ khóa cần nghe:** 'Emma, our top traveler, **always submits on time** and maximizes mileage points.'\n\n💡 **Mẹo làm bài:** Trạng từ tần suất 'always' (luôn luôn) → chỉ THÓI QUEN TÍCH CỰC. Đây là khen ngợi, không phải chỉ trích.\n\n🎯 **Phân tích ngữ pháp:**\n- 'Always' + thì hiện tại đơn → diễn tả thói quen lặp đi lặp lại\n- Vị trí: Always đứng TRƯỚC động từ thường\n- 'Submit on time' = nộp đúng hạn (phrasal verb)\n- 'And' nối hai hành động song song: submits + maximizes\n\n🏆 **Emma là tấm gương:**\n- Top traveler (nhân viên đi công tác nhiều nhất)\n- Luôn nộp báo cáo đúng hạn (theo quy định 72 giờ)\n- Tận dụng điểm dặm (mileage points) cho chuyến sau\n\n📝 **Liên hệ quy định:** Câu trước Manager nói 'expense reports are due within 72 hours' - Emma làm gương về điều này.\n\n⚠️ **Các đáp án sai đều mang tính TIÊU CỰC:**\n- (B) exceeds budget → vi phạm quy định\n- (C) avoids travel → mâu thuẫn với 'top traveler'\n- (D) forgets visas → vô trách nhiệm"
    },
    { 
      id: 15, 
      question: "If heading to Tokyo, book through __________.", 
      options: ["(A) any agency", "(B) our preferred agency", "(C) no agency", "(D) HR only"], 
      correct: 1,
      explanation: "✅ Đáp án: **(B) our preferred agency**\n\n📍 **Từ khóa cần nghe:** 'Book through **our preferred agency** for seamless visa support.'\n\n💡 **Mẹo làm bài:** Động từ 'book through' (đặt qua) → sau đó là KÊNH/ĐẠI LÝ cụ thể. Chú ý tính từ sở hữu 'our' - nhấn mạnh đây là đại lý của công ty.\n\n🎯 **Phân tích ngữ pháp:**\n- 'Book through + danh từ' → cấu trúc mệnh lệnh (imperative)\n- 'For + danh từ' → chỉ MỤC ĐÍCH, lợi ích\n- 'Seamless' (adj) = smooth, without problems (suôn sẻ, liền mạch)\n- 'Preferred' (adj) = được ưu tiên, được chọn trước\n\n🌏 **Tại sao Tokyo đặc biệt?**\n- Cần visa support (hỗ trợ visa) → thủ tục phức tạp\n- Preferred agency có kinh nghiệm và quan hệ tốt\n- Đảm bảo quy trình seamless (không vấn đề)\n\n📝 **Quy trình công ty:** Có đại lý đối tác cố định → tiết kiệm thời gian, chi phí, tránh rủi ro.\n\n⚠️ **Tại sao các đáp án khác SAI:**\n- (A) any agency → không đảm bảo chất lượng, mất kiểm soát\n- (C) no agency → không thể tự xin visa phức tạp\n- (D) HR only → HR không làm visa, chỉ phê duyệt chi phí"
    }
  ]
},

part4: {
  title: "PART 4: Extended Conversation",
  description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn) giữa khách và nhân viên khách sạn về đặt phòng công tác. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Client 1: Hello, I'd like to check in for my reservation under John. It's for a three-night business stay.\nHR Rep: Welcome, Mr. John. I see your booking for the executive suite—arriving today and departing Friday. Any issues with the room?\nClient 1: Actually, yes. The conference is across town, so I need a shuttle service. Also, can you confirm late checkout on Friday due to my 2 p.m. flight?\nHR Rep: Understood. Our shuttle runs every hour to the convention center; I'll add you to the schedule. For late checkout, it's available until 1 p.m. for a small fee, as we're at high occupancy this week.\nClient 1: That's fine. Last trip here, the Wi-Fi was spotty—has it been upgraded?\nHR Rep: Yes, we installed fiber optic last month. To assist further, would you like a wake-up call for your early meetings? We aim to make your work trip stress-free.",
  questions: [
    { 
      id: 16, 
      question: "The reservation is for __________.", 
      options: ["(A) a three-night business stay", "(B) a weekend vacation", "(C) one night only", "(D) a family room"], 
      correct: 0,
      explanation: "✅ Đáp án: **(A) a three-night business stay**\n\n📍 **Từ khóa cần nghe:** Client nói: 'It's for **a three-night business stay**.'\n\n💡 **Mẹo làm bài:** Câu hỏi về THÔNG TIN ĐẶT PHÒNG - nghe ngay câu đầu tiên khi khách giới thiệu. Hai yếu tố: thời gian (three-night) + mục đích (business).\n\n🎯 **Phân tích ngữ pháp:**\n- 'For + danh từ/cụm danh từ' → chỉ mục đích\n- 'Three-night' → tính từ ghép (compound adjective) mô tả thời lượng\n- Cấu trúc: số đếm + danh từ thời gian + danh từ (three-night stay)\n\n📝 **Xác nhận thêm:** HR Rep nhắc lại 'arriving today and departing Friday' → 3 đêm (Wed-Thu-Fri hoặc tương tự).\n\n💼 **Phân biệt loại đặt phòng:**\n- Business stay → executive suite, Wi-Fi tốt, shuttle service\n- Vacation → pool, spa, sightseeing\n\n⚠️ **Loại trừ đáp án sai:**\n- (B) weekend vacation → đây là BUSINESS, không phải vacation\n- (C) one night only → sai số đêm (3 chứ không phải 1)\n- (D) a family room → không có thông tin về gia đình"
    },
    { 
      id: 17, 
      question: "The client needs a shuttle because __________.", 
      options: ["(A) the conference is across town", "(B) the flight is delayed", "(C) the room is far", "(D) the fee is high"], 
      correct: 0,
      explanation: "✅ Đáp án: **(A) the conference is across town**\n\n📍 **Từ khóa cần nghe:** Client nói: '**The conference is across town, so** I need a shuttle service.'\n\n💡 **Mẹo làm bài:** Câu hỏi WHY (tại sao) → tìm NGUYÊN NHÂN. Liên từ 'so' (vì vậy) nối nguyên nhân → kết quả. Phần TRƯỚC 'so' là nguyên nhân = đáp án.\n\n🎯 **Phân tích ngữ pháp quan trọng:**\n- Câu gốc: 'The conference is across town, **SO** I need a shuttle.'\n- Cấu trúc: [Nguyên nhân], SO [Kết quả]\n- 'Across town' = ở phía bên kia thành phố (xa)\n- Thì hiện tại đơn 'is' → vị trí cố định\n\n📝 **Giải thích logic:**\n- Hội nghị ở xa (across town)\n- → Vì vậy (so) cần shuttle\n- Câu hỏi: WHY cần shuttle? → VÌ hội nghị ở xa\n\n🔄 **Viết lại với BECAUSE:** 'The client needs a shuttle **BECAUSE** the conference is across town.'\n\n⚠️ **Phân tích đáp án nhiễu:**\n- (B) the flight is delayed → KHÔNG được nhắc đến. Client nói flight lúc 2 p.m. (scheduled), không delay\n- (C) the room is far → SAI. Room không liên quan đến việc cần shuttle đến CONFERENCE\n- (D) the fee is high → VÔ LÝ. Phí cao không phải lý do cần shuttle, mà là rào cản"
    },
    { 
      id: 18, 
      question: "Late checkout is available until __________.", 
      options: ["(A) noon", "(B) 1 p.m.", "(C) 2 p.m.", "(D) 3 p.m."], 
      correct: 1,
      explanation: "✅ Đáp án: **(B) 1 p.m.**\n\n📍 **Từ khóa cần nghe:** HR Rep nói: 'Late checkout is available **until 1 p.m.** for a small fee.'\n\n💡 **Mẹo làm bài:** Câu hỏi về THỜI GIAN CỤ THỂ → nghe giờ (clock time) sau 'until'. Đây là câu hỏi chi tiết, dễ nhầm nếu không tập trung.\n\n🎯 **Phân tích ngữ pháp:**\n- 'Be available until + thời gian' → giới hạn thời gian dịch vụ\n- 'Until' = cho đến (giờ cuối cùng có thể sử dụng)\n- 'For a small fee' → có tính phí nhỏ\n\n📝 **Ngữ cảnh bổ sung:**\n- Client yêu cầu late checkout vì flight lúc 2 p.m.\n- Late checkout đến 1 p.m. → đủ thời gian\n- Lý do có phí: 'high occupancy this week' (khách sạn đầy)\n\n⏰ **Tính toán thời gian:**\n- Flight: 2 p.m.\n- Checkout: 1 p.m.\n- Có 1 giờ để di chuyển đến sân bay → hợp lý\n\n⚠️ **Cẩn thận với số liệu nhiễu:**\n- (A) noon = 12 p.m. → gần đúng nhưng SAI\n- (C) 2 p.m. → đây là giờ bay, KHÔNG phải giờ checkout\n- (D) 3 p.m. → không được nhắc đến\n\n🎧 **Lưu ý khi nghe:** Phát âm 'one p.m.' /wʌn piː em/ - đừng nhầm với 'two p.m.'"
    },
    { 
      id: 19, 
      question: "What was the issue on the client's last trip? __________", 
      options: ["(A) Spotty Wi-Fi", "(B) No shuttle", "(C) Early checkout", "(D) No upgrade"], 
      correct: 0,
      explanation: "✅ Đáp án: **(A) Spotty Wi-Fi**\n\n📍 **Từ khóa cần nghe:** Client nói: 'Last trip here, **the Wi-Fi was spotty**—has it been upgraded?'\n\n💡 **Mẹo làm bài:** Cụm 'Last trip' (chuyến trước) → chuyển sang THÌ QUÁ KHỨ. Đây là câu hỏi về VẤN ĐỀ CŨ (past problem).\n\n🎯 **Phân tích ngữ pháp:**\n- 'Last trip' → thời điểm quá khứ cụ thể\n- 'Was' → thì quá khứ đơn (mô tả tình trạng)\n- 'Spotty' (adj) = unreliable, inconsistent (không ổn định, lúc có lúc không)\n- 'Has it been upgraded?' → present perfect passive (hỏi về thay đổi gần đây)\n\n📱 **Vấn đề nghiêm trọng trong công tác:**\n- Wi-Fi không ổn → không thể làm việc, họp online\n- Client hỏi 'has it been upgraded?' → thể hiện sự quan tâm/lo lắng\n\n✅ **Giải pháp đã thực hiện:** HR Rep trả lời: 'We installed fiber optic last month' → đã nâng cấp.\n\n📝 **Từ vựng quan trọng:**\n- Spotty = patchy, unreliable (UK/US slang)\n- Fiber optic = cáp quang (công nghệ tốt nhất)\n\n⚠️ **Loại trừ đáp án sai:**\n- (B) No shuttle → không được nhắc đến trong 'last trip', chỉ trong THIS trip\n- (C) Early checkout → không có vấn đề này\n- (D) No upgrade → không phải vấn đề, 'upgrade' ở đây là GIẢI PHÁP cho Wi-Fi"
    },
    { 
      id: 20, 
      question: "The HR Rep offers a __________ for early meetings.", 
      options: ["(A) shuttle schedule", "(B) wake-up call", "(C) fee waiver", "(D) room upgrade"], 
      correct: 1,
      explanation: "✅ Đáp án: **(B) wake-up call**\n\n📍 **Từ khóa cần nghe:** HR Rep hỏi: 'Would you like **a wake-up call** for your early meetings?'\n\n💡 **Mẹo làm bài:** Câu hỏi về DỊCH VỤ ĐỀ NGHỊ → nghe động từ 'offer', 'would you like'. Đây là câu cuối cùng, dễ bỏ sót.\n\n🎯 **Phân tích ngữ pháp:**\n- 'Would you like + danh từ?' → câu hỏi lịch sự đề nghị dịch vụ (polite offer)\n- 'For + danh từ' → chỉ mục đích\n- 'Early meetings' → cuộc họp sớm (cần dậy sớm)\n\n⏰ **Wake-up call là gì?**\n- Dịch vụ: Khách sạn gọi điện thoại vào phòng để đánh thức khách\n- Mục đích: Đảm bảo không ngủ quên cuộc họp quan trọng\n- Phổ biến trong business travel\n\n📝 **Liên hệ ngữ cảnh:**\n- Client đi công tác → có early meetings\n- HR Rep muốn 'make your work trip stress-free' → chủ động đề nghị hỗ trợ\n- Thể hiện dịch vụ chu đáo của khách sạn\n\n💼 **Các dịch vụ đã cung cấp trước đó:**\n- Shuttle service → giải quyết\n- Late checkout → giải quyết  \n- Wi-Fi upgrade → đã làm\n- Wake-up call → đang đề nghị\n\n⚠️ **Phân tích đáp án sai:**\n- (A) shuttle schedule → đã xử lý TRƯỚC ĐÓ, không phải offer mới này\n- (C) fee waiver → không được nhắc đến (late checkout VẪN có phí)\n- (D) room upgrade → client ĐÃ có executive suite rồi"
    }
  ]
},
    // Reading Parts - Thêm 5 câu hỏi mở rộng cho Part 5 để cân bằng, chủ đề Du Lịch & Công Việc
   part5: {
  title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
  description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
  type: "reading",
  questions: [
    {
      id: 21,
      question: "The annual sales conference will be held in Barcelona, where the team can network with international __________.",
      options: ["colleague", "colleagues", "colleagued", "colleague's"],
      correct: 1,
      explanation: "Đáp án đúng: (B) 'colleagues'. Trong câu này, chúng ta cần một **danh từ số nhiều** vì 'international colleagues' chỉ nhiều đồng nghiệp quốc tế mà đội ngũ sẽ kết nối. Sau giới từ 'with', ta cần danh từ làm tân ngữ.\n\n**Lưu ý:**\n- (A) 'colleague' là số ít - không phù hợp vì không thể chỉ một người\n- (C) 'colleagued' **không tồn tại** trong tiếng Anh\n- (D) 'colleague's' là **dạng sở hữu cách** - không phù hợp ngữ pháp ở vị trí này"
    },
    {
      id: 22,
      question: "Due to the merger, employees are required to attend mandatory training sessions __________ the new corporate policies.",
      options: ["about", "at", "on", "with"],
      correct: 2,
      explanation: "Đáp án đúng: (C) 'on'. Khi nói về các buổi đào tạo, hội thảo hoặc khóa học VỀ một chủ đề cụ thể, chúng ta dùng giới từ **'on'**: **'training sessions ON something'** (các buổi đào tạo về điều gì đó). Đây là cách dùng cố định trong tiếng Anh.\n\n**So sánh:**\n- 'about' có thể dùng nhưng mang tính chung chung hơn và **không chính thức bằng 'on'** trong ngữ cảnh công việc\n- 'at' chỉ địa điểm\n- 'with' chỉ công cụ hoặc đồng hành"
    },
    {
      id: 23,
      question: "The travel itinerary includes a guided tour of the factory, __________ has been operational since 1995.",
      options: ["that", "which", "who", "where"],
      correct: 1,
      explanation: "Đáp án đúng: (B) 'which'. Đây là **mệnh đề quan hệ không xác định** (non-defining relative clause) bổ sung thông tin cho 'the factory'. Khi có **dấu phẩy (,)** trước đại từ quan hệ và danh từ đứng trước là **VẬT**, ta dùng **'which'**.\n\n**Lưu ý:**\n- 'that' **KHÔNG bao giờ** dùng sau dấu phẩy\n- 'who' chỉ dùng cho người\n- 'where' dùng cho địa điểm nhưng không phù hợp cấu trúc câu này vì sau nó cần một mệnh đề hoàn chỉnh có chủ ngữ riêng"
    },
    {
      id: 24,
      question: "Business travelers often prefer airlines that offer flexible __________ options to accommodate last-minute changes.",
      options: ["schedule", "scheduling", "scheduled", "schedules"],
      correct: 3,
      explanation: "Đáp án đúng: (D) 'schedules'. Trong câu này, ta cần một **DANH TỪ SỐ NHIỀU** để bổ nghĩa cho 'options' (các lựa chọn). **'Flexible schedule options'** = các lựa chọn lịch trình linh hoạt. Vì nói về nhiều lựa chọn nên danh từ phải ở dạng số nhiều.\n\n**So sánh:**\n- (A) 'schedule' là số ít\n- (B) 'scheduling' là danh động từ - không tự nhiên trong ngữ cảnh này\n- (C) 'scheduled' là tính từ - có thể dùng nhưng ý nghĩa khác (scheduled = đã lên lịch sẵn)"
    },
    {
      id: 25,
      question: "By negotiating bulk discounts with hotels, the company __________ significant savings on employee accommodations.",
      options: ["achieve", "achieves", "achieved", "achieving"],
      correct: 1,
      explanation: "Đáp án đúng: (B) 'achieves'. Câu này diễn tả một **sự thật chung chung** hoặc thói quen: 'Bằng cách đàm phán giảm giá hàng loạt với khách sạn, công ty ĐẠT ĐƯỢC khoản tiết kiệm đáng kể'. Đây là **thì hiện tại đơn** vì nói về một hành động lặp đi lặp lại hoặc một chân lý. Chủ ngữ 'the company' là **số ít** nên động từ phải thêm **'s/es'**.\n\n**Lưu ý:** Cụm **'By negotiating...'** là cụm giới từ chỉ **PHƯƠNG THỨC/CÁCH THỨC**, không phải mệnh đề thời gian quá khứ. Nếu dùng 'achieved' (quá khứ), câu sẽ thiếu ngữ cảnh thời gian cụ thể trong quá khứ."
    },
    {
      id: 26,
      question: "The consultant recommended that the team __________ the client's feedback before finalizing the proposal.",
      options: ["incorporate", "incorporates", "incorporated", "incorporating"],
      correct: 0,
      explanation: "Đáp án đúng: (A) 'incorporate'. Đây là cấu trúc **SUBJUNCTIVE (giả định thức)** trong tiếng Anh: **'recommend/suggest/insist/require + that + S + ĐỘNG TỪ NGUYÊN MẪU (không chia)'**. Cấu trúc này dùng để đưa ra lời khuyên, yêu cầu hoặc đề nghị một cách trang trọng. Động từ sau 'that' luôn ở **dạng nguyên mẫu, không chia** theo chủ ngữ hay thì.\n\n**Ví dụ tương tự:** 'The doctor recommended that he **take** medicine' (không phải 'takes')."
    },
    {
      id: 27,
      question: "Remote work policies have __________ the need for frequent business travel in many industries.",
      options: ["reduce", "reduced", "reducing", "reduces"],
      correct: 1,
      explanation: "Đáp án đúng: (B) 'reduced'. Câu này dùng **thì HIỆN TẠI HOÀN THÀNH:** **'have/has + V3/past participle'**. Thì này diễn tả một hành động bắt đầu trong quá khứ và có **ảnh hưởng/kết quả kéo dài đến hiện tại**. 'Các chính sách làm việc từ xa ĐÃ GIẢM (và vẫn đang giảm) nhu cầu đi công tác thường xuyên'. Chủ ngữ 'policies' là **số nhiều** nên dùng **'have'** (không phải 'has').\n\n**Lưu ý:**\n- 'reduce' là động từ nguyên mẫu\n- 'reducing' là V-ing\n- 'reduces' là thì hiện tại đơn\n→ Đều không phù hợp với cấu trúc **'have + V3'**"
    },
    {
      id: 28,
      question: "During the trade fair, exhibitors must __________ their booths by 9 a.m. to ensure smooth operations.",
      options: ["set up", "set", "sets up", "setting"],
      correct: 0,
      explanation: "Đáp án đúng: (A) 'set up'. Đây là **PHRASAL VERB (cụm động từ):** **'set up'** = lắp đặt, thiết lập, sắp xếp. Sau động từ khiếm khuyết 'must', ta luôn dùng **ĐỘNG TỪ NGUYÊN MẪU** (infinitive without 'to'). **'Set up'** là một cụm động từ **không thể tách rời** - phải giữ nguyên cả cụm.\n\n**Lưu ý:**\n- (B) 'set' nghĩa khác (đặt, để)\n- (C) 'sets up' là thì hiện tại đơn - **không dùng sau 'must'**\n- (D) 'setting' là V-ing - không dùng sau động từ khiếm khuyết"
    },
    {
      id: 29,
      question: "The executive's presentation on global markets was so engaging that it __________ the audience's attention throughout.",
      options: ["hold", "holds", "held", "holding"],
      correct: 2,
      explanation: "Đáp án đúng: (C) 'held'. Đây là cấu trúc **'SO... THAT'** (quá... đến nỗi) với **thì QUÁ KHỨ ĐƠN**. Vì động từ 'was' ở mệnh đề chính đã chia quá khứ, động từ trong mệnh đề kết quả 'that...' cũng phải chia quá khứ để đảm bảo **SỰ HÒA HỢP VỀ THÌ** (sequence of tenses). 'Bài thuyết trình quá hấp dẫn đến nỗi nó ĐÃ GIỮ CHÂN sự chú ý của khán giả suốt buổi'.\n\n**Lưu ý:**\n- (A) 'hold' là nguyên mẫu\n- (B) 'holds' là hiện tại đơn\n- (D) 'holding' là V-ing\n→ Đều không phù hợp với ngữ cảnh quá khứ"
    },
    {
      id: 30,
      question: "To comply with visa requirements, applicants should submit their documents __________ least two weeks in advance.",
      options: ["at", "in", "on", "with"],
      correct: 0,
      explanation: "Đáp án đúng: (A) 'at'. Đây là **CỤM CỐ ĐỊNH 'AT LEAST'** = ít nhất, tối thiểu. **'At least'** là một cụm thành ngữ **không thể thay đổi**, dùng để chỉ số lượng/thời gian tối thiểu. Câu có nghĩa: 'Để tuân thủ yêu cầu visa, người nộp đơn nên nộp hồ sơ **ÍT NHẤT** hai tuần trước'.\n\n**Lưu ý:** 'in advance' (trước, sớm) cũng là một cụm cố định khác trong câu. **Không thể dùng** 'in/on/with least' vì không có các cụm này trong tiếng Anh."
    }
  ]
},
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email về sắp xếp công tác. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `To: All Sales Team Members
From: Lisa Chen, Sales Director  
Subject: Business Trip to Tokyo - Preparation Guidelines


Dear Sales Team,

I am writing to outline the preparations for our upcoming business trip to Tokyo, scheduled from May 10 to May 14. This trip is crucial for strengthening client relationships and exploring new partnership opportunities in the Asian market. To maximize productivity, please adhere to the following guidelines.

First, all flight bookings must be made through our corporate travel portal by April 25 to (31) the best available rates and seating arrangements. Economy class is standard, but upgrades may be approved for flights longer than six hours.

Upon arrival, we will convene for a team briefing at the hotel conference room at 8:00 a.m. on May 11. The agenda includes client meetings with key accounts, followed by a networking dinner. Each member is expected to prepare a brief presentation on their assigned clients to (32) effective discussions.

For accommodations, we have reserved rooms at the Tokyo Business Hotel, which offers complimentary breakfast and high-speed internet. If you have special dietary needs, notify me by May 5 so we can (33) accordingly.

Expense reimbursements will be processed only for pre-approved items. Keep all receipts and submit your report within 48 hours of return. This ensures prompt (34) and compliance with company policy.

We look forward to a successful trip that will drive our quarterly goals. If you have any questions, feel free to schedule a one-on-one with me before departure.

Best regards,

Lisa Chen
Sales Director
Global Trade Inc.`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "All flight bookings must be made... by April 25 to (31) the best available rates...",
          options: ["secure", "delay", "cancel", "ignore"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'secure' vì nghĩa 'đảm bảo', phù hợp 'to secure the best rates' (để đảm bảo giá tốt nhất). Kiến thức ngữ pháp: Động từ 'secure' + tân ngữ (rates) trong cấu trúc mục đích 'to + V'; 'delay' (trì hoãn), 'cancel' (hủy), 'ignore' (bỏ qua) không liên quan đến đặt chỗ."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "...prepare a brief presentation... to (32) effective discussions.",
          options: ["hinder", "facilitate", "postpone", "avoid"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'facilitate' vì nghĩa 'thúc đẩy', phù hợp 'to facilitate effective discussions' (để thúc đẩy thảo luận hiệu quả). Kiến thức từ vựng: Động từ 'facilitate' chỉ hỗ trợ quá trình; 'hinder' (cản trở), 'postpone' (hoãn), 'avoid' (tránh) mang nghĩa tiêu cực."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "If you have special dietary needs, notify me... so we can (33) accordingly.",
          options: ["adjust", "reject", "duplicate", "complicate"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'adjust' vì nghĩa 'điều chỉnh', phù hợp 'adjust accordingly' (điều chỉnh phù hợp). Kiến thức ngữ pháp: Động từ 'adjust' + trạng từ 'accordingly' trong 'so + clause' chỉ kết quả; 'reject' (từ chối), 'duplicate' (nhân đôi), 'complicate' (phức tạp hóa) không phù hợp."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "This ensures prompt (34) and compliance with company policy.",
          options: ["payment", "reimbursement", "booking", "meeting"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'reimbursement' vì nghĩa 'hoàn tiền', phù hợp ngữ cảnh chi phí. Kiến thức từ vựng: Danh từ 'reimbursement' sau 'prompt' (nhanh chóng); 'payment' (thanh toán), 'booking' (đặt chỗ), 'meeting' (cuộc họp) không khớp với 'expense reports'."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp (thêm cho cân bằng)",
          context: "The trip is crucial for strengthening client relationships and exploring new __________ opportunities.",
          options: ["personal", "partnership", "leisure", "local"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'partnership' vì nghĩa 'hợp tác', phù hợp 'new partnership opportunities' (cơ hội hợp tác mới). Kiến thức từ vựng: Danh từ 'partnership' chỉ quan hệ kinh doanh; 'personal' (cá nhân), 'leisure' (giải trí), 'local' (địa phương) không liên quan đến mục tiêu công tác."
        },
        {
          id: 36,
          type: "comprehension",
          question: "(36) - The business trip to Tokyo is scheduled from ___.",
          options: ["April 10 to 14", "May 10 to May 14", "June 10 to 14", "May 1 to 5"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email nêu 'from May 10 to May 14' (từ 10 đến 14 tháng 5). Kiến thức đọc hiểu: Xác định ngày tháng từ phần mở đầu để nắm lịch trình chính."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - What is the deadline for flight bookings?",
          options: ["April 15", "April 25", "May 5", "May 10"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'by April 25' (trước 25 tháng 4). Kiến thức đọc hiểu: Trích dẫn hạn chót từ hướng dẫn đặt vé để đảm bảo chuẩn bị kịp thời."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What time does the team briefing start?",
          options: ["7:00 a.m.", "8:00 a.m.", "9:00 a.m.", "Noon"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'at 8:00 a.m. on May 11' (8 giờ sáng ngày 11/5). Kiến thức đọc hiểu: Xác định thời gian sự kiện từ agenda để lập kế hoạch."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - What must team members prepare?",
          options: ["A full report", "A brief presentation on clients", "Dietary lists only", "Expense receipts"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'prepare a brief presentation on their assigned clients' (chuẩn bị bài thuyết trình ngắn về khách hàng). Kiến thức đọc hiểu: Tập trung vào trách nhiệm cá nhân từ phần agenda."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - Within how many hours after return must expense reports be submitted?",
          options: ["24 hours", "48 hours", "72 hours", "One week"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'within 48 hours of return' (trong 48 giờ sau khi về). Kiến thức đọc hiểu: Kiểm tra quy định hoàn tiền để tuân thủ chính sách."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo đại lý du lịch và email yêu cầu, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**Global Exec Travel Advertisement**

  Seamless Business Travel Solutions for Professionals

  At Global Exec Travel, we specialize in crafting customized itineraries for corporate clients worldwide. Whether you're attending a conference in Europe or closing deals in Asia, our expert agents ensure hassle-free journeys.

  **Key Services:**
  1. **Visa & Documentation Assistance** – Fast-track processing for business visas in over 50 countries. Submit your details online, and we'll handle the rest.

  2. **Priority Flight Bookings** – Access to premium economy seats and lounge access for long-haul flights.

  3. **Hotel & Ground Transport** – Partnerships with luxury chains for discounted rates and chauffeured transfers.

  4. **24/7 Concierge Support** – Emergency assistance and real-time itinerary adjustments.

  Contact us at info@globalexectravel.com or call 1-800-EXEC-TRIP for a free consultation. Response within 2 business hours!

  ---

  **Email Message**

  **To:** info@globalexectravel.com
  **From:** tom.wilson@techinnovate.com
  **Date:** April 18
  **Subject:** Inquiry for Tokyo Business Trip

  Dear Global Exec Travel Team,

  I came across your ad in Business Weekly and am interested in your services for an upcoming work trip to Tokyo from May 10-14. As a project manager at TechInnovate, I'll be meeting with suppliers and attending the Asia Tech Expo. Could you assist with a full package: business visa (I'm a U.S. citizen), flights from New York with layover preferences, and a central hotel near the expo venue? Budget is flexible but prefer value-for-money options. Also, include airport transfers.

  Please provide options and quotes by April 22. Available for a call Tuesday afternoon.

  Regards,
  Tom Wilson
  Project Manager, TechInnovate
  212-555-0198 (office)
  45 Innovation Blvd, New York, NY 10001`,
      questions: [
        {
          id: 41,
          question: "According to the advertisement, what is the response time for inquiries?",
          options: ["Within 1 hour", "Within 2 business hours", "Within 24 hours", "Within 1 week"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Response within 2 business hours' (Phản hồi trong 2 giờ làm việc). Kiến thức đọc hiểu: Trích dẫn thời gian từ phần liên hệ để đánh giá tốc độ dịch vụ."
        },
        {
          id: 42,
          question: "How did Mr. Wilson learn about Global Exec Travel?",
          options: ["From a colleague", "From an online search", "From a newspaper ad", "From Business Weekly magazine"],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì 'I came across your ad in Business Weekly' (Tôi thấy quảng cáo của bạn trên Business Weekly). Kiến thức suy luận: Kết nối nguồn quảng cáo từ email để xác định kênh tiếp thị."
        },
        {
          id: 43,
          question: "What is Mr. Wilson's profession?",
          options: ["Sales director", "Travel agent", "Project manager", "Hotel manager"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'As a project manager at TechInnovate' (Là quản lý dự án tại TechInnovate). Kiến thức đọc hiểu: Xác định vai trò từ phần giới thiệu trong email."
        },
        {
          id: 44,
          question: "Which service does Mr. Wilson NOT mention in his request?",
          options: ["Visa assistance", "Flight bookings", "Hotel reservations", "Emergency concierge support"],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì email yêu cầu visa, flights, hotel, transfers nhưng không đề cập emergency support. Kiến thức đọc hiểu: So sánh yêu cầu với danh sách dịch vụ quảng cáo."
        },
        {
          id: 45,
          question: "What nationality is Mr. Wilson?",
          options: ["Canadian", "U.S.", "Japanese", "British"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'business visa (I'm a U.S. citizen)' (visa kinh doanh, tôi là công dân Mỹ). Kiến thức đọc hiểu: Chi tiết quốc tịch từ yêu cầu visa để hiểu nhu cầu hỗ trợ."
        },
        {
          id: 46,
          question: "When does Mr. Wilson want options and quotes by?",
          options: ["April 20", "April 22", "April 25", "May 5"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'by April 22' (trước 22/4). Kiến thức đọc hiểu: Hạn chót từ email để đánh giá tính cấp bách."
        },
        {
          id: 47,
          question: "What event is Mr. Wilson attending in Tokyo?",
          options: ["A sales conference", "Asia Tech Expo", "A training seminar", "A networking dinner"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'attending the Asia Tech Expo' (tham dự Asia Tech Expo). Kiến thức đọc hiểu: Sự kiện chính từ phần mô tả chuyến đi."
        },
        {
          id: 48,
          question: "What type of hotel location does Mr. Wilson prefer?",
          options: ["Near the airport", "In a quiet suburb", "Central near the expo venue", "Luxury downtown only"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'a central hotel near the expo venue' (khách sạn trung tâm gần địa điểm expo). Kiến thức đọc hiểu: Ưu tiên vị trí từ yêu cầu package."
        },
        {
          id: 49,
          question: "When is Mr. Wilson available for a call?",
          options: ["Monday morning", "Tuesday afternoon", "Wednesday evening", "Anytime"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Available for a call Tuesday afternoon' (Có sẵn cho cuộc gọi chiều thứ Ba). Kiến thức đọc hiểu: Khung giờ từ email để sắp xếp tư vấn."
        },
        {
          id: 50,
          question: "From where is Mr. Wilson flying?",
          options: ["Los Angeles", "New York", "London", "Paris"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'flights from New York' (chuyến bay từ New York). Kiến thức đọc hiểu: Điểm xuất phát từ địa chỉ và yêu cầu flights."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn về chậm trễ công tác, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Dr. Smith (14:22): Stuck in traffic en route to the airport—might miss the 15:00 flight to Frankfurt. Updating you now.
  Interviewer 1 (14:25): Understood, Dr. Smith. I'll notify the client about potential delay in your arrival for tomorrow's workshop.
  Dr. Smith (14:28): Thanks. The merger meeting is critical; aim to reschedule if needed. Flight is non-refundable, though.
  Interviewer 2 (14:35): No worries—I've checked alternatives: next flight at 17:30, arrives midnight. Hotel confirmed for late check-in.
  Dr. Smith (16:45): Made it to gate just in time! Boarding now. See you at the venue tomorrow AM.`,
      questions: [
        {
          id: 51,
          question: "What is causing Dr. Smith's delay?",
          options: ["Flight cancellation", "Traffic", "Meeting overrun", "Visa issues"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Stuck in traffic en route to the airport' (Kẹt xe trên đường đến sân bay). Kiến thức đọc hiểu: Lý do trực tiếp từ tin nhắn đầu tiên."
        },
        {
          id: 52,
          question: "What does Interviewer 1 plan to do?",
          options: ["Reschedule the flight", "Notify the client", "Book a hotel", "Cancel the workshop"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I'll notify the client about potential delay' (Tôi sẽ thông báo khách hàng về chậm trễ tiềm năng). Kiến thức suy luận: Hành động hỗ trợ từ phản hồi ngay lập tức."
        },
        {
          id: 53,
          question: "Why is the merger meeting important?",
          options: ["It's optional", "It's critical", "It's canceled", "It's rescheduled already"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'The merger meeting is critical' (Cuộc họp sáp nhập rất quan trọng). Kiến thức đọc hiểu: Mức độ ưu tiên từ ngữ cảnh công việc."
        },
        {
          id: 54,
          question: "What is the departure time of the original flight?",
          options: ["14:00", "15:00", "17:30", "Midnight"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'might miss the 15:00 flight' (có thể lỡ chuyến 15:00). Kiến thức đọc hiểu: Thời gian ban đầu từ lo ngại chậm trễ."
        },
        {
          id: 55,
          question: "What alternative flight does Interviewer 2 suggest?",
          options: ["At 15:00", "At 17:30", "Next morning", "No alternative"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'next flight at 17:30' (chuyến tiếp theo lúc 17:30). Kiến thức đọc hiểu: Lựa chọn thay thế từ kiểm tra lịch bay."
        },
        {
          id: 56,
          question: "What has been confirmed for late arrival?",
          options: ["Flight upgrade", "Hotel check-in", "Client meeting", "Car rental"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Hotel confirmed for late check-in' (Khách sạn xác nhận check-in muộn). Kiến thức đọc hiểu: Hỗ trợ logistics từ phản hồi."
        },
        {
          id: 57,
          question: "What is the arrival time of the alternative flight?",
          options: ["Evening", "Midnight", "Morning", "Afternoon"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'arrives midnight' (đến nửa đêm). Kiến thức đọc hiểu: Thời gian đến từ gợi ý chuyến bay thay thế."
        },
        {
          id: 58,
          question: "What does Dr. Smith update in the last message?",
          options: ["Missed the flight", "Boarding now", "Rescheduled meeting", "Canceled trip"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Made it to gate just in time! Boarding now' (Đến cổng kịp giờ! Đang lên máy bay). Kiến thức suy luận: Kết quả tích cực từ cập nhật cuối."
        },
        {
          id: 59,
          question: "What can be inferred about the workshop?",
          options: ["It's canceled", "It's tomorrow AM at the venue", "It's in New York", "It's optional"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'See you at the venue tomorrow AM' (Gặp tại địa điểm sáng mai). Kiến thức suy luận: Thời gian và địa điểm từ kế hoạch tiếp theo."
        },
        {
          id: 60,
          question: "What is noted about the original flight?",
          options: ["Refundable", "Non-refundable", "Upgradable", "Delayed already"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Flight is non-refundable' (Chuyến bay không hoàn tiền). Kiến thức đọc hiểu: Đặc điểm vé từ lo ngại thay đổi."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam8.js">
export const EXAM8_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 8 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài để luyện nghe chi tiết.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Emma và Tom về kế hoạch du lịch. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Emma: Hey Tom, have you decided on our summer vacation spot yet?\nTom: Not quite, Emma. I was thinking about Bali, but the flight tickets are way too expensive right now. We might have to save up a bit more.\nEmma: That's disappointing. Last year in Paris, everything was so romantic, but the crowds were overwhelming. I prefer somewhere quieter this time.\nTom: Totally agree. How about a cozy cabin in the mountains? It'd be peaceful, and we could hike every day.\nEmma: Sounds perfect, but is it accessible by public transport? I don't want to rent a car again like in Paris—it was stressful driving on the wrong side.",
      questions: [
        {
          id: 1,
          options: [
            "The flight tickets are way too expensive.",
            "She prefers crowded places.",
            "They have enough money saved.",
            "The tickets are too cheap."
          ],
          correct: 0,
          explanation: "Tom nói: 'I was thinking about Bali, but the flight tickets are way too expensive right now.' (Tôi nghĩ về Bali, nhưng vé máy bay quá đắt lúc này.)"
        },
        {
          id: 2,
          options: [
            "She enjoyed the romance but not the crowds.",
            "She wants to go back to Paris.",
            "Driving was easy in Paris.",
            "The mountains were too quiet last year."
          ],
          correct: 0,
          explanation: "Emma nói: 'Last year in Paris, everything was so romantic, but the crowds were overwhelming.' (Năm ngoái ở Paris, mọi thứ rất lãng mạn, nhưng đám đông quá áp đảo.)"
        },
        {
          id: 3,
          options: [
            "Public transport is not an option.",
            "She doesn't want to rent a car again.",
            "They plan to rent a car.",
            "Hiking requires a private vehicle."
          ],
          correct: 1,
          explanation: "Emma nói: 'I don't want to rent a car again like in Paris—it was stressful driving on the wrong side.' (Tôi không muốn thuê xe lần nữa như ở Paris—lái xe bên đường sai quá căng thẳng.)"
        },
        {
          id: 4,
          options: [
            "Somewhere with more crowds.",
            "A cabin in the mountains for peace.",
            "Bali in winter for better weather.",
            "Paris again for romance."
          ],
          correct: 1,
          explanation: "Tom nói: 'How about a cozy cabin in the mountains? It'd be peaceful, and we could hike every day.' (Thế còn cabin ấm cúng ở núi? Sẽ yên bình, và chúng ta có thể đi bộ đường dài mỗi ngày.)"
        },
        {
          id: 5,
          options: [
            "They need to save more money.",
            "Public transport is unavailable.",
            "Bali is the final choice.",
            "Driving is preferable now."
          ],
          correct: 0,
          explanation: "Tom nói: 'We might have to save up a bit more.' (Chúng ta có lẽ phải tiết kiệm thêm một chút.)"
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người ở văn phòng. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: In the office break room.\nLisa: Morning, everyone! Coffee's fresh—help yourselves.\nBen: Thanks, Lisa. I need it after that late meeting yesterday.\nAnna: Me three. John, you're looking sharp today. New suit?\nJohn: Yeah, Anna. Tailored for the big presentation next week. But I'm nervous—it's my first time leading one.\nLisa: You'll crush it, John. Remember that team-building retreat last month? You organized the whole schedule flawlessly.\nBen: True. Speaking of which, has anyone heard from the HR rep about the new wellness program? I signed up for yoga classes.\nAnna: I did too—it's starting Monday. Great for stress relief before deadlines.\nJohn: Good idea. For the presentation, any tips on handling tough questions from the board?",
      questions: [
        {
          id: 6,
          question: "How many people are having coffee?",
          options: [
            "One",
            "Three",
            "Four",
            "Two"
          ],
          correct: 1,
          explanation: "Lisa mời 'everyone' (mọi người), và Ben, Anna, John đều ngụ ý tham gia (Ben cần coffee, Anna 'me three' ám chỉ cần coffee như Ben và Lisa)."
        },
        {
          id: 7,
          question: "Why is John wearing a new suit?",
          options: [
            "To impress HR.",
            "For the big presentation next week.",
            "After the team-building retreat.",
            "For a casual Friday."
          ],
          correct: 1,
          explanation: "John nói: 'Tailored for the big presentation next week.' (May đo cho bài thuyết trình lớn tuần tới.)"
        },
        {
          id: 8,
          question: "What did John do well at the retreat?",
          options: [
            "Handled board questions.",
            "Organized the schedule.",
            "Led yoga classes.",
            "Signed up for wellness."
          ],
          correct: 1,
          explanation: "Lisa nói: 'You organized the whole schedule flawlessly.' (Bạn tổ chức toàn bộ lịch trình hoàn hảo.)"
        },
        {
          id: 9,
          question: "What program did Ben and Anna sign up for?",
          options: [
            "Coffee breaks.",
            "New wellness program with yoga.",
            "Team-building retreat.",
            "Presentation training."
          ],
          correct: 1,
          explanation: "Ben và Anna nói: 'I signed up for yoga classes... it's starting Monday.' (Tôi đăng ký lớp yoga... bắt đầu thứ Hai.)"
        },
        {
          id: 10,
          question: "What is John nervous about?",
          options: [
            "Tough coffee conversations.",
            "Leading his first big presentation.",
            "The wellness program.",
            "The team retreat."
          ],
          correct: 1,
          explanation: "John nói: 'I'm nervous—it's my first time leading one.' (Tôi lo lắng—lần đầu dẫn dắt.)"
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Dr. Chen: Hello, class. Today we're discussing environmental policies in urban planning. This topic is crucial for sustainable cities, though implementation can be challenging. I've reviewed your midterm essays—average score is 7.2, solid progress. Extensions for assignments require prior approval; otherwise, penalties apply, as seen with last semester's group. On a lighter note, the campus cafe offers eco-friendly options: organic teas, vegan snacks, and zero-waste packaging—ideal for post-lecture breaks.",
      questions: [
        {
          id: 11,
          question: "The topic is __________ for sustainable cities.",
          options: ["(A) boring", "(B) irrelevant", "(C) crucial", "(D) optional"],
          correct: 2,
          explanation: "Dr. Chen: 'This topic is crucial for sustainable cities.' (Chủ đề này rất quan trọng cho thành phố bền vững.) - Luyện nghe đánh giá tầm quan trọng."
        },
        {
          id: 12,
          question: "I have reviewed __________. ",
          options: ["(A) late policies", "(B) the campus menu", "(C) your midterm essays", "(D) your excuses"],
          correct: 2,
          explanation: "Dr. Chen: 'I've reviewed your midterm essays—average score is 7.2.' (Tôi đã xem bài luận giữa kỳ—điểm trung bình 7.2.) - Luyện nghe hành động đánh giá gần đây."
        },
        {
          id: 13,
          question: "Extensions require __________.",
          options: ["(A) extra fees", "(B) prior approval", "(C) group vote", "(D) no approval"],
          correct: 1,
          explanation: "Dr. Chen: 'Extensions for assignments require prior approval.' (Gia hạn bài tập cần phê duyệt trước.) - Luyện nghe quy định học tập."
        },
        {
          id: 14,
          question: "Last semester's group __________ penalties.",
          options: ["(A) avoided", "(B) applied for", "(C) saw", "(D) ignored"],
          correct: 2,
          explanation: "Dr. Chen: 'Penalties apply, as seen with last semester's group.' (Như nhóm kỳ trước đã thấy.) - Luyện nghe ví dụ hậu quả."
        },
        {
          id: 15,
          question: "The campus cafe offers __________.",
          options: ["(A) meat dishes", "(B) solar-powered chargers", "(C) eco-friendly options", "(D) all of the above"],
          correct: 2,
          explanation: "Dr. Chen: 'The campus cafe offers eco-friendly options: organic teas, vegan snacks, and zero-waste packaging.' (Quán cà phê trường cung cấp lựa chọn thân thiện môi trường.) - Luyện nghe mô tả tiện ích."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Client 1: Excuse me, I'm interested in the laptop upgrade service. This is for my work computer.\nSales Associate: Of course. When did you purchase it originally?\nClient 1: About six months ago from your online store.\nSales Associate: Understood. Any issues with performance?\nClient 1: It's slowing down during video calls—no receipt handy, but I have the order confirmation email.\nSales Associate: That should suffice for verification. However, upgrades beyond warranty might incur a fee. We can check your serial number.\nClient 1: Fair enough. Can we schedule it for tomorrow?\nSales Associate: Absolutely, to avoid further delays.",
      questions: [
        {
          id: 16,
          question: "The laptop is for __________.",
          options: ["(A) school", "(B) personal use", "(C) work", "(D) gaming"],
          correct: 2,
          explanation: "Client 1: 'This is for my work computer.' (Đây là cho máy tính làm việc của tôi.) - Luyện nghe mục đích sử dụng."
        },
        {
          id: 17,
          question: "The purchase was __________.",
          options: ["(A) tomorrow", "(B) six months ago", "(C) last year", "(D) recently"],
          correct: 1,
          explanation: "Client 1: 'About six months ago.' (Khoảng sáu tháng trước.) - Luyện nghe thời gian mua."
        },
        {
          id: 18,
          question: "The client has __________.",
          options: ["(A) the serial number", "(B) no proof", "(C) the order email", "(D) the receipt"],
          correct: 2,
          explanation: "Client 1: 'No receipt handy, but I have the order confirmation email.' (Không có biên lai, nhưng có email xác nhận đơn hàng.) - Luyện nghe phương tiện xác thực."
        },
        {
          id: 19,
          question: "Upgrades beyond warranty __________.",
          options: ["(A) require new purchase", "(B) might incur a fee", "(C) are unavailable", "(D) are free"],
          correct: 1,
          explanation: "Sales Associate: 'Upgrades beyond warranty might incur a fee.' (Nâng cấp ngoài bảo hành có thể mất phí.) - Luyện nghe điều khoản dịch vụ."
        },
        {
          id: 20,
          question: "The associate suggests __________.",
          options: ["(A) ignoring the issue", "(B) checking the serial number", "(C) buying a new laptop", "(D) delaying the service"],
          correct: 1,
          explanation: "Sales Associate: 'We can check your serial number.' (Chúng tôi có thể kiểm tra số serial.) - Luyện nghe giải pháp hỗ trợ."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The conference agenda includes sessions on digital marketing, which has become increasingly __________ in recent years.",
          options: ["imports", "import", "importance", "important"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'important' vì đây là tính từ bổ nghĩa cho danh từ 'marketing'. Kiến thức ngữ pháp: Tính từ 'important' (quan trọng) đứng trước danh từ; không dùng danh từ (A), động từ (C), hoặc danh từ số nhiều (D)."
        },
        {
          id: 22,
          question: "The research team __________ data from various sources before drawing conclusions.",
          options: ["analyzing", "analyzes", "had analyzed", "analyze"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'had analyzed' vì thì quá khứ hoàn thành trước thời điểm quá khứ. Kiến thức ngữ pháp: 'By the time + past, past perfect'; không dùng hiện tại (A,B), V-ing (D)."
        },
        {
          id: 23,
          question: "Despite the challenges, the project was completed __________ schedule.",
          options: ["at", "on", "by", "in"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'on' vì cụm từ cố định 'on schedule' (đúng hạn). Kiến thức ngữ pháp: Giới từ 'on' với 'schedule'; 'in' (trong), 'at' (tại), 'by' (bằng) không phù hợp."
        },
        {
          id: 24,
          question: "Employees are encouraged to participate in volunteer activities to foster a sense of __________. ",
          options: ["community", "communicate", "commune", "communal"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'community' vì đây là danh từ chỉ 'cộng đồng'. Kiến thức từ vựng: Danh từ 'community' (cộng đồng) sau 'sense of'; tính từ (B), danh từ khác (C), động từ (D) không khớp."
        },
        {
          id: 25,
          question: "The CEO announced that the company __________ expanding its operations internationally next year.",
          options: ["is", "been", "be", "are"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'is' vì chủ ngữ 'company' số ít, thì hiện tại tiếp diễn 'is expanding'. Kiến thức ngữ pháp: Động từ 'to be' số ít 'is' + V-ing cho tương lai gần; 'are' (số nhiều), 'be' (nguyên thể), 'been' (quá khứ phân từ) sai."
        },
        {
          id: 26,
          question: "Please ensure that all documents are __________ prior to the meeting.",
          options: ["prepares", "preparing", "prepared", "prepare"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'prepared' vì dạng quá khứ phân từ trong cấu trúc bị động 'are prepared'. Kiến thức ngữ pháp: Bị động hiện tại 'are + V3' (prepared = chuẩn bị); không dùng nguyên thể (A), V-ing (B), ngôi thứ ba (D)."
        },
        {
          id: 27,
          question: "The workshop will cover advanced techniques __________ improving productivity.",
          options: ["by", "for", "with", "on"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'for' vì cụm 'techniques for improving' (kỹ thuật để cải thiện). Kiến thức ngữ pháp: Giới từ 'for' chỉ mục đích; 'on' (về), 'with' (với), 'by' (bằng) không phù hợp."
        },
        {
          id: 28,
          question: "She works __________ as a freelance consultant, allowing flexibility in her schedule.",
          options: ["independence", "independently", "independent", "depend"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'independently' vì trạng từ bổ nghĩa động từ 'works'. Kiến thức ngữ pháp: Trạng từ 'independently' (một cách độc lập); tính từ (A), danh từ (C), động từ sai (D) không đúng."
        },
        {
          id: 29,
          question: "Due to budget cuts, the event has been __________ to a virtual format.",
          options: ["changes", "changing", "changed", "change"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'changed' vì thì hiện tại hoàn thành thụ động 'has been changed'. Kiến thức ngữ pháp: Bị động 'has been + V3'; không dùng nguyên thể (A), V-ing (B), ngôi thứ ba (D)."
        },
        {
          id: 30,
          question: "Innovation and adaptability are essential __________ navigating market changes.",
          options: ["to", "in", "for", "at"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'to' vì cụm 'essential to' (thiết yếu cho). Kiến thức ngữ pháp: 'Essential to + V-ing' chỉ mục đích; 'for' (cho), 'in' (trong), 'at' (tại) không khớp."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `To: All Sales Team Members
  From: Mark Thompson, Sales Manager
  Subject: Quarterly Goals and Training Update
  Dear Team,
  I hope this email finds you well. As we approach the end of the quarter, it's time to review our progress toward the sales targets set at the beginning of the period. Our goal is to exceed last quarter's performance by 15%, which requires focused efforts from everyone. To support this, we have scheduled mandatory training sessions starting next Monday to (31) key selling techniques.
  The training will include role-playing exercises and case studies from recent successful deals. This is designed to (32) your confidence when dealing with challenging clients. Additionally, we will introduce a new customer relationship management (CRM) tool that streamlines data entry and reporting.
  Please submit your individual sales forecasts by end of day Thursday, April 10, so we can align them with the team objectives and (33) any gaps early. Remember, collaboration is key—feel free to (36) best practices during our weekly check-ins.
  The quarterly review meeting is set for April 20 at 2 p.m. in the conference room. We anticipate participation from senior leadership, so prepare to showcase your achievements. A preparation guide will be sent out tomorrow to (34) you get ready effectively.
  For new hires, a buddy system has been implemented to pair you with experienced colleagues. This will help you (35) faster and contribute sooner to our goals.
  Thank you for your unwavering commitment. Your efforts are vital to our success, and I look forward to celebrating our wins together.
  Best,
  Mark Thompson
  Sales Manager
  Global Solutions Inc.`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "...mandatory training sessions starting next Monday to (31) key selling techniques.",
          options: ["delay", "reinforce", "ignore", "review"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'reinforce' vì nó nghĩa là 'củng cố', phù hợp với 'to reinforce key selling techniques' (để củng cố kỹ thuật bán hàng chính). Kiến thức ngữ pháp: Động từ 'reinforce' + tân ngữ trong mục đích; 'review' (xem lại), 'ignore' (bỏ qua), 'delay' (trì hoãn) không phù hợp."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "This is designed to (32) your confidence when dealing with challenging clients.",
          options: ["lose", "build", "test", "reduce"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'build' vì nó nghĩa là 'xây dựng', phù hợp với 'to build your confidence' (xây dựng sự tự tin). Kiến thức từ vựng: Động từ tích cực 'build' trong ngữ cảnh đào tạo; 'reduce' (giảm), 'test' (kiểm tra), 'lose' (mất) mang nghĩa tiêu cực."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...so we can align them with the team objectives and (33) any gaps early.",
          options: ["hide", "identify", "create", "fill"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'identify' vì nó nghĩa là 'xác định', phù hợp với 'identify any gaps' (xác định khoảng trống). Kiến thức ngữ pháp: Động từ 'identify' + tân ngữ trong cấu trúc phát hiện vấn đề; 'create' (tạo), 'hide' (che giấu), 'fill' (điền) không khớp."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "A preparation guide will be sent out tomorrow to (34) you get ready effectively.",
          options: ["prevent", "help", "force", "stop"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'help' vì nó nghĩa là 'giúp', phù hợp với 'to help you get ready' (giúp bạn chuẩn bị). Kiến thức ngữ pháp: Động từ 'help' + tân ngữ + V nguyên thể; 'stop' (dừng), 'force' (buộc), 'prevent' (ngăn) không phù hợp."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "This will help you (35) faster and contribute sooner to our goals.",
          options: ["hesitate", "integrate", "leave", "struggle"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'integrate' vì nó nghĩa là 'hòa nhập', phù hợp với 'integrate faster' (hòa nhập nhanh hơn). Kiến thức từ vựng: Động từ 'integrate' chỉ quá trình thích nghi nhóm; 'struggle' (vật lộn), 'leave' (rời), 'hesitate' (do dự) tiêu cực."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "Remember, collaboration is key—feel free to (36) best practices during our weekly check-ins.",
          options: ["avoid", "limit", "postpone", "promote"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'promote' vì ngữ cảnh nhấn mạnh 'collaboration is key' và 'share best practices' ngụ ý 'promote' (thúc đẩy) chia sẻ. Kiến thức suy luận: Động từ tích cực phù hợp với tinh thần đội nhóm; các lựa chọn khác tiêu cực."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - The sales target is to exceed last quarter by ___.",
          options: ["10%", "15%", "5%", "20%"],
          correct: 1,
          explanation: "Đáp án đúng là (B) '15%' vì email nêu 'exceed last quarter's performance by 15%'. Kiến thức đọc hiểu: Trích dẫn trực tiếp mục tiêu từ phần review."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the primary focus of the training sessions?",
          options: ["Vacation scheduling", "Role-playing and case studies", "Hiring new staff", "Budget planning"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'The training will include role-playing exercises and case studies'. Kiến thức đọc hiểu: Xác định nội dung chính từ phần training."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - When must sales forecasts be submitted?",
          options: ["Next Monday", "April 20", "April 10", "End of quarter"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'by end of day Thursday, April 10'. Kiến thức đọc hiểu: Thời hạn cụ thể từ phần submit."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - What system is implemented for new hires?",
          options: ["Remote training", "A buddy system", "Salary review", "Independent assignments"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'a buddy system has been implemented to pair you with experienced colleagues'. Kiến thức đọc hiểu: Hệ thống hỗ trợ từ phần new hires."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**EcoTravel Adventures Advertisement**
    Discover Hidden Gems with Guided Eco-Tours
    Experience nature responsibly with our expert-led tours to pristine destinations. Book now and receive a 10% discount on your first adventure! Tours depart weekly.
    **What We Provide:**
    1. **Certified Guides** – Our team of knowledgeable naturalists ensures safe and educational outings. Check ecotraveladventures.com for guide profiles and tour itineraries.
    2. **Sustainable Transport** – Electric vans and bikes minimize environmental impact.
    3. **Custom Itineraries** – Tailor your trip with add-ons like birdwatching or photography workshops.
    4. **Group Discounts** – Save more when traveling with friends or family.
    Contact us at info@ecotraveladventures.com with your preferences. We'll respond within 48 hours with options and pricing.
    ---
    **Email Message**
    **To:** info@ecotraveladventures.com
    **From:** emma.wilson@email.com
    **Date:** July 15
    **Subject:** Inquiry for Family Tour
    I saw your ad on social media and am interested in a guided eco-tour for my family of four (two adults, two kids aged 8 and 10). We'd like a three-day trip focused on wildlife viewing, preferably in a coastal area. Can you customize it to include kid-friendly activities? We're flexible on dates but available after August 1. Please call me at 555-123-4567 after 6:00 P.M. weekdays.
    Regards,
    Emma Wilson
    123 Ocean Drive, Miami, FL 33101`,
      questions: [
        {
          id: 41,
          question: "Why should customers visit the EcoTravel Adventures website?",
          options: ["To pay discounts", "To view guide profiles", "To join social media", "To book transport"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Check ecotraveladventures.com for guide profiles and tour itineraries'. Kiến thức đọc hiểu: Mục đích từ phần Certified Guides."
        },
        {
          id: 42,
          question: "How was the advertisement discovered by Ms. Wilson?",
          options: ["Via email.", "On social media.", "At a travel agency.", "In a magazine."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I saw your ad on social media'. Kiến thức suy luận: Kênh quảng cáo từ email."
        },
        {
          id: 43,
          question: "Who is Ms. Wilson planning the tour for?",
          options: ["Birdwatchers only", "Her family of four", "A business group", "Solo travelers"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'for my family of four (two adults, two kids)'. Kiến thức đọc hiểu: Số lượng và thành viên từ email."
        },
        {
          id: 44,
          question: "What does Ms. Wilson NOT mention in her email?",
          options: ["Sustainable transport", "Group discounts", "Custom itineraries", "Kid-friendly activities"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email không đề cập group discounts, dù quảng cáo có; tập trung vào customize và activities. Kiến thức đọc hiểu: So sánh yêu cầu email với dịch vụ."
        },
        {
          id: 45,
          question: "What will Ms. Wilson likely receive within 48 hours?",
          options: ["A phone call", "Options and pricing", "A tour discount code", "Guide profiles only"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'We'll respond within 48 hours with options and pricing'. Kiến thức suy luận: Quy trình từ quảng cáo."
        },
        {
          id: 46,
          question: "What discount is offered in the advertisement?",
          options: ["Weekly specials", "10% on first adventure", "5% off", "Free transport"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'receive a 10% discount on your first adventure'. Kiến thức đọc hiểu: Ưu đãi trực tiếp."
        },
        {
          id: 47,
          question: "What is the focus of Ms. Wilson's requested tour?",
          options: ["Photography workshops", "Coastal wildlife viewing", "Electric bike tours", "Birdwatching add-ons"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'focused on wildlife viewing, preferably in a coastal area'. Kiến thức đọc hiểu: Yêu cầu chính từ email."
        },
        {
          id: 48,
          question: "When is Ms. Wilson available for the tour?",
          options: ["Weekdays only", "After August 1", "Before August 1", "Weekends preferred"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'available after August 1'. Kiến thức đọc hiểu: Thời gian linh hoạt từ email."
        },
        {
          id: 49,
          question: "What time does Ms. Wilson prefer to be called?",
          options: ["Mornings only", "After 6:00 P.M. weekdays", "Before 6:00 P.M.", "Weekends anytime"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'call me... after 6:00 P.M. weekdays'. Kiến thức đọc hiểu: Khung giờ từ email."
        },
        {
          id: 50,
          question: "How many days is the requested trip?",
          options: ["Two days", "Three days", "A full week", "One day"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'a three-day trip'. Kiến thức đọc hiểu: Độ dài tour từ email."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Sarah (14:22): Stuck in traffic—meeting starts at 3, right? Running 20 mins late.
    Mike (14:23): Yes, 3 p.m. sharp. No worries, I'll update the team.
    Sarah (14:25): Thanks! Client's presentation is key—don't want to miss the Q&A.
    Mike (14:30): Got it. Weather's the culprit; roads are jammed.
    Sarah (15:10): Almost there. Save me a seat?`,
      questions: [
        {
          id: 51,
          question: "What is implied about Sarah?",
          options: ["She works in traffic control.", "She is attending a client meeting.", "She is leading the meeting.", "She canceled the Q&A."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Client's presentation... don't want to miss the Q&A' ngụ ý tham gia họp khách hàng. Kiến thức suy luận: Ngữ cảnh business meeting."
        },
        {
          id: 52,
          question: "What does Mike mean by 'No worries'?",
          options: ["He doubts her excuse.", "He will handle the update.", "He plans to reschedule.", "He is annoyed by the delay."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I'll update the team' sau 'No worries'. Kiến thức suy luận: Cụm từ trấn an kết nối với hành động hỗ trợ."
        },
        {
          id: 53,
          question: "Why is Sarah delayed?",
          options: [
            "She overslept.",
            "Bad weather and traffic.",
            "Client rescheduled.",
            "Car breakdown."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Stuck in traffic... Weather's the culprit; roads are jammed'. Kiến thức đọc hiểu: Lý do trực tiếp từ tin nhắn."
        },
        {
          id: 54,
          question: "What time does the meeting start?",
          options: [
            "14:22",
            "3 p.m.",
            "15:10",
            "2 p.m."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'meeting starts at 3, right? Yes, 3 p.m.'. Kiến thức đọc hiểu: Thời gian xác nhận."
        },
        {
          id: 55,
          question: "What does Sarah ask Mike to do last?",
          options: [
            "Check the weather",
            "Save her a seat",
            "Start without her",
            "Update the client"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Save me a seat?'. Kiến thức đọc hiểu: Yêu cầu cuối cùng."
        },
        {
          id: 56,
          question: "What can be inferred about Mike and Sarah?",
          options: [
            "They are competitors.",
            "They are colleagues.",
            "They are family.",
            "They are strangers."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì ngữ cảnh họp team và hỗ trợ lẫn nhau. Kiến thức suy luận: Mối quan hệ đồng nghiệp từ 'update the team'."
        },
        {
          id: 57,
          question: "Why does Sarah mention the Q&A?",
          options: [
            "To blame the client.",
            "It's important to her.",
            "To end early.",
            "To skip it."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'don't want to miss the Q&A'. Kiến thức suy luận: Nhấn mạnh phần quan trọng."
        },
        {
          id: 58,
          question: "What does Mike attribute the delay to?",
          options: [
            "Client demands.",
            "Heavy traffic from weather.",
            "Meeting location.",
            "Sarah's poor planning."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Weather's the culprit; roads are jammed'. Kiến thức suy luận: Giải thích nguyên nhân."
        },
        {
          id: 59,
          question: "What is suggested about the roads?",
          options: [
            "They are empty.",
            "They are jammed.",
            "They are closed.",
            "They are clear."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'roads are jammed'. Kiến thức suy luận: Tình trạng giao thông."
        },
        {
          id: 60,
          question: "What does Sarah express in her first message?",
          options: [
            "Complaint about Mike",
            "Apology for lateness",
            "Excitement for the meeting",
            "Request to cancel"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Running 20 mins late' ngụ ý xin lỗi gián tiếp. Kiến thức suy luận: Giọng điệu thông báo và xác nhận."
        }
      ]
    }
  }
};
</file>

<file path="Backend/chat-server.js">
// Backend/chat-server.js
import express from 'express';
import http from 'http';
import { Server } from 'socket.io';
import cors from 'cors';

// Import routes
import chatRoutes from './routes/chat.js';

// Import controllers
import { 
  handleUserJoin, 
  handleSendMessage, 
  handleDeleteMessage, 
  handleUserDisconnect 
} from './controllers/chatController.js';

// Import Firestore
import { initializeFirestore } from './firebase-config.js';

const app = express();
const server = http.createServer(app);

// ============================================
// CORS Configuration
// ============================================

// Parse allowed origins from environment variable
const allowedOrigins = process.env.FRONTEND_URL 
  ? process.env.FRONTEND_URL.split(',').map(url => url.trim())
  : ['http://localhost:5173'];

console.log('🌐 Allowed CORS origins:', allowedOrigins);

// CORS options với wildcard support
const corsOptions = {
  origin: function (origin, callback) {
    // Allow requests with no origin (mobile apps, Postman, curl)
    if (!origin) {
      console.log('✅ Request with no origin allowed');
      return callback(null, true);
    }
    
    // Check exact match first
    if (allowedOrigins.includes(origin)) {
      console.log('✅ CORS allowed (exact match):', origin);
      return callback(null, true);
    }
    
    // Check wildcard patterns (*.vercel.app, *.onrender.com)
    const wildcardMatch = allowedOrigins.some(allowedOrigin => {
      if (allowedOrigin.includes('*')) {
        // Convert wildcard to regex pattern
        const pattern = allowedOrigin
          .replace(/\./g, '\\.')  // Escape dots
          .replace(/\*/g, '.*');  // Replace * with .*
        const regex = new RegExp(`^${pattern}$`);
        return regex.test(origin);
      }
      return false;
    });
    
    if (wildcardMatch) {
      console.log('✅ CORS allowed (wildcard match):', origin);
      return callback(null, true);
    }
    
    // Origin not allowed
    console.warn('❌ CORS blocked origin:', origin);
    console.warn('   Allowed origins:', allowedOrigins);
    callback(new Error('Not allowed by CORS'));
  },
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
  allowedHeaders: ['Content-Type', 'Authorization']
};

// ============================================
// Socket.IO Configuration
// ============================================

const io = new Server(server, {
  cors: corsOptions,
  pingTimeout: 60000,
  pingInterval: 25000,
  transports: ['websocket', 'polling']
});

// ============================================
// Middleware
// ============================================

app.use(cors(corsOptions));
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Request logging middleware
app.use((req, res, next) => {
  console.log(`📨 ${req.method} ${req.path} - Origin: ${req.get('origin') || 'no origin'}`);
  next();
});

// ============================================
// Initialize Firestore
// ============================================

console.log('🔄 Initializing Firestore...');
try {
  await initializeFirestore();
  console.log('✅ Firestore initialization complete');
} catch (error) {
  console.error('❌ Failed to initialize Firestore:', error);
  console.error('   Server will continue but database features may not work');
  // Don't exit - let server run for health checks
}

// ============================================
// Routes
// ============================================

// Root endpoint
app.get('/', (req, res) => {
  res.json({ 
    message: '🎉 HUFLIT Chat Server',
    status: 'running',
    version: '1.0.0',
    timestamp: new Date().toISOString(),
    environment: process.env.NODE_ENV || 'development'
  });
});

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({ 
    status: '✅ Server is running',
    timestamp: new Date().toISOString(),
    uptime: Math.floor(process.uptime()),
    memory: {
      used: Math.round(process.memoryUsage().heapUsed / 1024 / 1024),
      total: Math.round(process.memoryUsage().heapTotal / 1024 / 1024)
    },
    environment: process.env.NODE_ENV || 'development'
  });
});

// API routes
app.use('/api/chat', chatRoutes(io));

// 404 handler
app.use((req, res) => {
  res.status(404).json({ 
    error: 'Not Found',
    path: req.path,
    message: 'The requested endpoint does not exist'
  });
});

// Error handler
app.use((err, req, res, next) => {
  console.error('❌ Server error:', err);
  res.status(err.status || 500).json({
    error: err.message || 'Internal Server Error',
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
});

// ============================================
// Socket.IO Connection Handling
// ============================================

io.on('connection', (socket) => {
  console.log('✅ User connected:', socket.id);
  console.log('   Transport:', socket.conn.transport.name);
  console.log('   Total connections:', io.engine.clientsCount);

  // User join room
  socket.on('user-join', (data) => {
    try {
      console.log('👤 User joining:', data);
      handleUserJoin(socket, io, data);
    } catch (error) {
      console.error('❌ Error in user-join:', error);
      socket.emit('error', { message: 'Failed to join chat' });
    }
  });

  // Send message
  socket.on('send-message', (data) => {
    try {
      console.log('💬 Message received:', { from: data.username, length: data.message?.length });
      handleSendMessage(socket, io, data);
    } catch (error) {
      console.error('❌ Error in send-message:', error);
      socket.emit('error', { message: 'Failed to send message' });
    }
  });

  // Delete message
  socket.on('delete-message', (messageId) => {
    try {
      console.log('🗑️ Deleting message:', messageId);
      handleDeleteMessage(socket, io, messageId);
    } catch (error) {
      console.error('❌ Error in delete-message:', error);
      socket.emit('error', { message: 'Failed to delete message' });
    }
  });

  // Handle typing indicator
  socket.on('typing', (data) => {
    socket.broadcast.emit('user-typing', data);
  });

  socket.on('stop-typing', (data) => {
    socket.broadcast.emit('user-stop-typing', data);
  });

  // User disconnect
  socket.on('disconnect', (reason) => {
    console.log('⚪ User disconnected:', socket.id);
    console.log('   Reason:', reason);
    console.log('   Remaining connections:', io.engine.clientsCount);
    
    try {
      handleUserDisconnect(socket, io);
    } catch (error) {
      console.error('❌ Error in disconnect handler:', error);
    }
  });

  // Handle errors
  socket.on('error', (error) => {
    console.error('❌ Socket error:', socket.id, error);
  });
});

// Socket.IO error handling
io.engine.on('connection_error', (err) => {
  console.error('❌ Socket.IO connection error:', err);
});

// ============================================
// Graceful Shutdown
// ============================================

const gracefulShutdown = async (signal) => {
  console.log(`\n📴 ${signal} received: closing server gracefully...`);
  
  // Stop accepting new connections
  server.close(() => {
    console.log('✅ HTTP server closed');
  });

  // Close all socket connections
  io.close(() => {
    console.log('✅ Socket.IO server closed');
  });

  // Give existing connections time to finish
  setTimeout(() => {
    console.log('⏱️ Forcing shutdown after timeout');
    process.exit(0);
  }, 10000);
};

process.on('SIGTERM', () => gracefulShutdown('SIGTERM'));
process.on('SIGINT', () => gracefulShutdown('SIGINT'));

// Handle uncaught errors
process.on('uncaughtException', (error) => {
  console.error('❌ Uncaught Exception:', error);
  process.exit(1);
});

process.on('unhandledRejection', (reason, promise) => {
  console.error('❌ Unhandled Rejection at:', promise, 'reason:', reason);
  process.exit(1);
});

// ============================================
// Export
// ============================================

export { app, server, io };
export default server;
</file>

<file path="Backend/index.js">
// backend/index.js
import dotenv from 'dotenv';
dotenv.config();

import app from './chat-server.js';

const PORT = process.env.PORT || 5000;

const server = app.listen(PORT, () => {
  console.log(`🚀 Server running at http://localhost:${PORT}`);
  console.log(`📡 Socket.IO ready for connections`);
});

// Graceful shutdown
process.on('SIGTERM', () => {
  console.log('SIGTERM signal received: closing HTTP server');
  server.close(() => {
    console.log('HTTP server closed');
  });
});

export default app;
</file>

<file path="src/components/common/LoadingSpinner.jsx">
import React, { memo } from 'react';

const LoadingSpinner = memo(({ message = "Loading..." }) => {
  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-blue-900 via-purple-900 to-blue-900">
      <style>{`
        @keyframes startround {
          0% {
            filter: brightness(5);
            box-shadow: none;
          }
          70% {
            filter: brightness(5);
            box-shadow: none;
          }
          100% {
            filter: brightness(1);
            box-shadow: inset 0 0.5em rgba(255, 255, 255, 0.25),
                        inset 0 -0.5em rgba(0, 0, 0, 0.25);
          }
        }

        @keyframes round1 {
          0% {
            left: -2em;
            opacity: 1;
          }
          30% {
            left: -6em;
            opacity: 1;
            transform: skewX(-25deg) rotate(25deg);
          }
          31% {
            opacity: 0;
          }
          35% {
            left: 7em;
            opacity: 0;
          }
          45% {
            left: 7em;
            opacity: 1;
            transform: skewX(25deg) rotate(-25deg);
          }
          100% {
            left: -2em;
            opacity: 1;
            transform: skewX(0deg) rotate(0deg);
          }
        }

        @keyframes round2 {
          0% {
            left: 5em;
            opacity: 1;
          }
          75% {
            left: -7em;
            opacity: 1;
            transform: skewX(-25deg) rotate(25deg);
          }
          76% {
            opacity: 0;
          }
          77% {
            left: 8em;
            opacity: 0;
          }
          80% {
            left: 8em;
            opacity: 1;
            transform: skewX(25deg) rotate(-25deg);
          }
          100% {
            left: 5em;
            opacity: 1;
            transform: skewX(0deg) rotate(0deg);
          }
        }

        .earth-loader {
          position: relative;
          width: 6rem;
          height: 6rem;
          background-color: #3344c1;
          border-radius: 50%;
          overflow: hidden;
          border: 3px solid white;
          box-shadow: inset 0 0.5em rgba(255, 255, 255, 0.25),
                      inset 0 -0.5em rgba(0, 0, 0, 0.25);
          animation: startround 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
          transform: translate3d(0, 0, 0);
          backface-visibility: hidden;
        }

        @media (min-width: 640px) {
          .earth-loader {
            width: 7.5rem;
            height: 7.5rem;
          }
        }

        @media (min-width: 768px) {
          .earth-loader {
            width: 8.5rem;
            height: 8.5rem;
          }
        }

        .land-mass-1,
        .land-mass-2,
        .land-mass-3,
        .land-mass-4 {
          position: absolute;
          width: 7em;
          height: auto;
          will-change: transform, opacity;
          transform: translate3d(0, 0, 0);
          backface-visibility: hidden;
        }

        .land-mass-1 {
          bottom: -2em;
          animation: round1 5s linear infinite 2.75s;
        }

        .land-mass-2 {
          top: -3em;
          animation: round1 5s linear infinite 2s;
        }

        .land-mass-3 {
          top: -2.5em;
          animation: round2 5s linear infinite 2s;
        }

        .land-mass-4 {
          bottom: -2.2em;
          animation: round2 5s linear infinite 2.75s;
        }

        @media (prefers-reduced-motion: reduce) {
          .earth-loader,
          .land-mass-1,
          .land-mass-2,
          .land-mass-3,
          .land-mass-4 {
            animation: none !important;
          }
        }
      `}</style>

      <div className="flex flex-col items-center justify-center gap-4">
        {/* Earth Loader */}
        <div className="earth-loader">
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            viewBox="0 0 200 200" 
            className="land-mass-1"
            aria-hidden="true"
            role="presentation"
          >
            <path
              transform="translate(100 100)"
              d="M29.4,-17.4C33.1,1.8,27.6,16.1,11.5,31.6C-4.7,47,-31.5,63.6,-43,56C-54.5,48.4,-50.7,16.6,-41,-10.9C-31.3,-38.4,-15.6,-61.5,-1.4,-61C12.8,-60.5,25.7,-36.5,29.4,-17.4Z"
              fill="#7CC133"
            />
          </svg>

          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            viewBox="0 0 200 200" 
            className="land-mass-2"
            aria-hidden="true"
            role="presentation"
          >
            <path
              transform="translate(100 100)"
              d="M31.7,-55.8C40.3,-50,45.9,-39.9,49.7,-29.8C53.5,-19.8,55.5,-9.9,53.1,-1.4C50.6,7.1,43.6,14.1,41.8,27.6C40.1,41.1,43.4,61.1,37.3,67C31.2,72.9,15.6,64.8,1.5,62.2C-12.5,59.5,-25,62.3,-31.8,56.7C-38.5,51.1,-39.4,37.2,-49.3,26.3C-59.1,15.5,-78,7.7,-77.6,0.2C-77.2,-7.2,-57.4,-14.5,-49.3,-28.4C-41.2,-42.4,-44.7,-63,-38.5,-70.1C-32.2,-77.2,-16.1,-70.8,-2.3,-66.9C11.6,-63,23.1,-61.5,31.7,-55.8Z"
              fill="#7CC133"
            />
          </svg>

          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            viewBox="0 0 200 200" 
            className="land-mass-3"
            aria-hidden="true"
            role="presentation"
          >
            <path
              transform="translate(100 100)"
              d="M30.6,-49.2C42.5,-46.1,57.1,-43.7,67.6,-35.7C78.1,-27.6,84.6,-13.8,80.3,-2.4C76.1,8.9,61.2,17.8,52.5,29.1C43.8,40.3,41.4,53.9,33.7,64C26,74.1,13,80.6,2.2,76.9C-8.6,73.1,-17.3,59,-30.6,52.1C-43.9,45.3,-61.9,45.7,-74.1,38.2C-86.4,30.7,-92.9,15.4,-88.6,2.5C-84.4,-10.5,-69.4,-20.9,-60.7,-34.6C-52.1,-48.3,-49.8,-65.3,-40.7,-70C-31.6,-74.8,-15.8,-67.4,-3.2,-61.8C9.3,-56.1,18.6,-52.3,30.6,-49.2Z"
              fill="#7CC133"
            />
          </svg>

          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            viewBox="0 0 200 200" 
            className="land-mass-4"
            aria-hidden="true"
            role="presentation"
          >
            <path
              transform="translate(100 100)"
              d="M39.4,-66C48.6,-62.9,51.9,-47.4,52.9,-34.3C53.8,-21.3,52.4,-10.6,54.4,1.1C56.3,12.9,61.7,25.8,57.5,33.2C53.2,40.5,39.3,42.3,28.2,46C17,49.6,8.5,55.1,1.3,52.8C-5.9,50.5,-11.7,40.5,-23.6,37.2C-35.4,34,-53.3,37.5,-62,32.4C-70.7,27.4,-70.4,13.7,-72.4,-1.1C-74.3,-15.9,-78.6,-31.9,-73.3,-43C-68.1,-54.2,-53.3,-60.5,-39.5,-60.9C-25.7,-61.4,-12.9,-56,1.1,-58C15.1,-59.9,30.2,-69.2,39.4,-66Z"
              fill="#7CC133"
            />
          </svg>
        </div>

        {/* Loading Text */}
        <p className="text-white text-base sm:text-lg md:text-xl font-semibold tracking-wide animate-pulse">
          {message}
        </p>
      </div>
    </div>
  );
});

LoadingSpinner.displayName = 'LoadingSpinner';

export { LoadingSpinner };
export default LoadingSpinner;
</file>

<file path="src/config/firebase.js">
// src/firebase.js
import { initializeApp } from "firebase/app";
import { getAuth, connectAuthEmulator } from "firebase/auth";
import { getFirestore, connectFirestoreEmulator } from "firebase/firestore";
import { getStorage, connectStorageEmulator } from "firebase/storage";
import { getDatabase } from "firebase/database";

const firebaseConfig = {
  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
  appId: import.meta.env.VITE_FIREBASE_APP_ID,
  databaseURL: "https://huflit-test-4ce25-default-rtdb.asia-southeast1.firebasedatabase.app/", // ✅ THÊM
};

if (!firebaseConfig.apiKey) {
  console.warn('Firebase config is missing. Check your .env file.');
}

const app = initializeApp(firebaseConfig);

export const auth = getAuth(app);
export const db = getFirestore(app);
export const storage = getStorage(app);
export const rtdb = getDatabase(app); // Bây giờ có URL → hoạt động!

// Emulator
if (process.env.NODE_ENV === 'development' && import.meta.env.VITE_USE_EMULATOR === 'true') {
  try {
    connectAuthEmulator(auth, 'http://localhost:9099', { disableWarnings: true });
    connectFirestoreEmulator(db, 'localhost', 8080);
    connectStorageEmulator(storage, 'localhost', 9199);
    // Không cần connect RTDB emulator nếu dùng production URL
    console.log('Connected to Firebase Emulators');
  } catch (error) {
    console.log('Firebase Emulators not available');
  }
}

export default app;
</file>

<file path="src/data/exams/exam3.js">
export const EXAM3_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 3 (Chủ Đề: Giáo Dục & Sức Khỏe)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài để luyện nghe chi tiết, tập trung vào giao tiếp giáo dục và tư vấn sức khỏe.",
  parts: {
    // Listening Parts - Part 1 cập nhật: 1 hội thoại chung cho 5 câu hỏi
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Professor và Student về chương trình học sức khỏe. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Professor: Hello, Emma. How are you finding the Health Education course so far?\nEmma: It's fascinating, Professor. I enrolled because I want to learn about preventive medicine, but the workload is intense. We have three assignments due next week, including a research paper on nutrition.\nProfessor: That's standard for upper-level classes. Have you chosen your topic yet? Last semester, Lisa did hers on balanced diets and got an A.\nEmma: I'm leaning towards mental health benefits of exercise. Do you recommend any specific resources?\nProfessor: Absolutely. Start with the university library's online journals—they're free for students. Also, attend the guest lecture on stress management next Thursday; it's highly relevant.",
      questions: [
        {
          id: 1,
          options: [
            "She enrolled to study surgery.",
            "She enrolled to learn about preventive medicine.",
            "She enrolled for easy workload.",
            "She enrolled by mistake."
          ],
          correct: 1,
          explanation: "Emma nói: 'I enrolled because I want to learn about preventive medicine.' (Tôi đăng ký vì muốn học về y học phòng ngừa.) Kiến thức ngữ pháp: Cấu trúc 'because + clause' chỉ lý do (reason clause), sử dụng thì hiện tại đơn 'want' để diễn tả mong muốn hiện tại; 'enrolled' ở thì quá khứ đơn cho hành động đăng ký hoàn tất."
        },
        {
          id: 2,
          options: [
            "One assignment due next week.",
            "Three assignments due next week.",
            "No assignments due.",
            "Assignments due next month."
          ],
          correct: 1,
          explanation: "Emma nói: 'We have three assignments due next week.' (Chúng tôi có ba bài tập đến hạn tuần tới.) Kiến thức ngữ pháp: Cấu trúc 'have + số + danh từ số nhiều' chỉ số lượng sở hữu; 'due + thời gian' là cụm từ chỉ hạn chót, với thì hiện tại đơn 'have' mô tả tình huống hiện tại."
        },
        {
          id: 3,
          options: [
            "Lisa's topic was on surgery.",
            "Lisa's topic was on balanced diets.",
            "Lisa got a C.",
            "Lisa did not submit."
          ],
          correct: 1,
          explanation: "Professor nói: 'Lisa did hers on balanced diets and got an A.' (Lisa làm về chế độ ăn cân bằng và được A.) Kiến thức ngữ pháp: Đại từ 'hers' thay thế 'her paper' để tránh lặp; 'on + danh từ' chỉ chủ đề, với thì quá khứ đơn 'did' và 'got' song song cho chuỗi sự kiện quá khứ."
        },
        {
          id: 4,
          options: [
            "Mental health benefits of travel.",
            "Mental health benefits of exercise.",
            "Mental health benefits of diet.",
            "No topic chosen."
          ],
          correct: 1,
          explanation: "Emma nói: 'I'm leaning towards mental health benefits of exercise.' (Tôi đang nghiêng về lợi ích sức khỏe tâm thần của tập thể dục.) Kiến thức ngữ pháp: Cụm 'leaning towards + danh từ' chỉ xu hướng lựa chọn (tendency); thì hiện tại tiếp diễn 'I'm leaning' nhấn mạnh quá trình quyết định đang diễn ra."
        },
        {
          id: 5,
          options: [
            "Buy books from a store.",
            "Use university library's online journals.",
            "Skip the guest lecture.",
            "Attend a lecture next month."
          ],
          correct: 1,
          explanation: "Professor nói: 'Start with the university library's online journals—they're free for students.' (Bắt đầu với tạp chí trực tuyến của thư viện đại học—chúng miễn phí cho sinh viên.) Kiến thức ngữ pháp: Cấu trúc mệnh lệnh 'start with + danh từ' để gợi ý; sở hữu 'library's' với dấu nháy đơn chỉ sở hữu, và mệnh đề quan hệ rút gọn 'they're free' bổ nghĩa."
        }
      ]
    },
   part2: {
  title: "PART 2: Longer Conversation",
  description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người tại phòng khám về giáo dục sức khỏe. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Narrator: At the clinic waiting room.\nDoctor Chen: Good morning, John and Mike. You're here for the wellness workshop signup?\nJohn: Yes, Doctor. Mike's been having sleep issues, so we're interested in the session on healthy habits.\nMike: Exactly. I work late shifts and struggle with insomnia. Does the workshop cover relaxation techniques?\nDoctor Chen: It does—mindfulness and yoga basics. Sarah, our nutritionist, leads it; she emphasizes balanced meals to improve sleep quality.\nJohn: Sounds perfect. When is the next one? We both need to fit it into our schedules.\nMike: Also, any prerequisites? Like a doctor's note?\nDoctor Chen: None required. It's open to all staff and students. Sign up online by Friday to secure spots.",
  questions: [
    {
      id: 6,
      question: "Why are the men at the clinic?",
      options: [
        "For a routine checkup",
        "For wellness workshop signup",
        "For medication refill",
        "For surgery consultation"
      ],
      correct: 1,
      explanation: "Doctor Chen nói: 'You're here for the wellness workshop signup?' (Các anh đến để đăng ký hội thảo sức khỏe?) Kiến thức ngữ pháp: Câu hỏi yes/no với 'be + here for + danh từ' chỉ mục đích; thì hiện tại đơn 'are' cho tình huống hiện tại, nhấn mạnh ngữ cảnh giáo dục sức khỏe."
    },
    {
      id: 7,
      question: "What problem does Mike have?",
      options: [
        "Overeating",
        "Sleep issues",
        "High energy",
        "Early shifts"
      ],
      correct: 1,
      explanation: "John nói: 'Mike's been having sleep issues.' (Mike đang gặp vấn đề giấc ngủ.) Kiến thức ngữ pháp: Thì hiện tại hoàn thành tiếp diễn 'has been having' chỉ vấn đề kéo dài từ quá khứ đến hiện tại; sở hữu 'Mike's' rút gọn 'Mike has' để mượt mà."
    },
    {
      id: 8,
      question: "What does the workshop cover?",
      options: [
        "Only nutrition",
        "Relaxation techniques",
        "Surgery basics",
        "No techniques"
      ],
      correct: 1,
      explanation: "Doctor Chen nói: 'It does—mindfulness and yoga basics.' (Nó có—chánh niệm và cơ bản yoga.) Kiến thức ngữ pháp: Câu trả lời ngắn 'It does' xác nhận câu hỏi trước; liệt kê song song 'mindfulness and yoga basics' với 'and' nối hai danh từ chỉ kỹ thuật thư giãn."
    },
    {
      id: 9,
      question: "Who leads the workshop?",
      options: [
        "Doctor Chen",
        "John",
        "Sarah, the nutritionist",
        "Mike"
      ],
      correct: 2,
      explanation: "Doctor Chen nói: 'Sarah, our nutritionist, leads it.' (Sarah, chuyên gia dinh dưỡng của chúng tôi, dẫn dắt nó.) Kiến thức ngữ pháp: Appositive phrase 'our nutritionist' bổ nghĩa 'Sarah' (ngắt bằng dấu phẩy); thì hiện tại đơn 'leads' chỉ vai trò thường xuyên."
    },
    {
      id: 10,
      question: "What is required to sign up?",
      options: [
        "A doctor's note",
        "Online signup by Friday",
        "Payment",
        "Prerequisites"
      ],
      correct: 1,
      explanation: "Doctor Chen nói: 'Sign up online by Friday to secure spots.' (Đăng ký trực tuyến trước thứ Sáu để giữ chỗ.) Kiến thức ngữ pháp: Cấu trúc mệnh lệnh 'sign up + trạng từ' chỉ hành động cần làm; 'to + V nguyên thể' chỉ mục đích (to secure), với 'by + thời gian' chỉ hạn chót."
    }
  ]
},
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn) của giảng viên về giáo dục sức khỏe. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Counselor: Welcome to today's seminar on student wellness. Education isn't just academics—it's about holistic health too. Studies show that regular exercise reduces stress by 30%, yet only 40% of students meet the recommended activity levels. If you're feeling overwhelmed, our counseling center offers free sessions; book via the app to avoid wait times. Remember, poor sleep affects cognitive function, so aim for seven to nine hours nightly. Anna, a former student, transformed her grades by prioritizing self-care routines. For more, join our peer support group starting next week.",
      questions: [
        { 
          id: 11, 
          question: "Education includes __________.", 
          options: ["(A) only academics", "(B) holistic health", "(C) no health", "(D) sports only"], 
          correct: 1,
          explanation: "Counselor: 'Education isn't just academics—it's about holistic health too.' (Giáo dục không chỉ học thuật—nó về sức khỏe toàn diện nữa.) - Kiến thức ngữ pháp: Cấu trúc 'not just A—it's about B too' với dấu gạch ngang chỉ giải thích; thì hiện tại đơn 'isn't' và 'is' đối lập để nhấn mạnh phạm vi rộng."
        },
        { 
          id: 12, 
          question: "Regular exercise reduces stress by __________.", 
          options: ["(A) 10%", "(B) 30%", "(C) 50%", "(D) 70%"], 
          correct: 1,
          explanation: "Counselor: 'Studies show that regular exercise reduces stress by 30%.' (Nghiên cứu cho thấy tập thể dục đều đặn giảm stress 30%.) - Kiến thức ngữ pháp: Mệnh đề quan hệ 'that + clause' sau 'show'; cụm 'reduce by + phần trăm' chỉ mức độ thay đổi, với thì hiện tại đơn 'reduces' cho sự thật chung."
        },
        { 
          id: 13, 
          question: "Only __________ of students meet activity levels.", 
          options: ["(A) 10%", "(B) 40%", "(C) 60%", "(D) 90%"], 
          correct: 1,
          explanation: "Counselor: 'Only 40% of students meet the recommended activity levels.' (Chỉ 40% sinh viên đạt mức hoạt động khuyến nghị.) - Kiến thức ngữ pháp: 'Only + số % + of + danh từ' chỉ tỷ lệ hạn chế; thì hiện tại đơn 'meet' mô tả tình trạng hiện tại dựa trên dữ liệu."
        },
        { 
          id: 14, 
          question: "Anna transformed her grades by __________.", 
          options: ["(A) ignoring self-care", "(B) prioritizing self-care", "(C) skipping classes", "(D) no routines"], 
          correct: 1,
          explanation: "Counselor: 'Anna... transformed her grades by prioritizing self-care routines.' (Anna cải thiện điểm số bằng cách ưu tiên thói quen tự chăm sóc.) - Kiến thức ngữ pháp: 'By + V-ing' chỉ phương tiện (means); thì quá khứ đơn 'transformed' cho thay đổi hoàn tất, với 'prioritizing' song song."
        },
        { 
          id: 15, 
          question: "Aim for __________ hours of sleep nightly.", 
          options: ["(A) five to six", "(B) seven to nine", "(C) ten to twelve", "(D) no aim"], 
          correct: 1,
          explanation: "Counselor: 'Aim for seven to nine hours nightly.' (Nhắm đến bảy đến chín giờ mỗi đêm.) - Kiến thức ngữ pháp: Cấu trúc mệnh lệnh 'aim for + khoảng số + danh từ' chỉ lời khuyên; 'to + số' chỉ phạm vi, với trạng từ 'nightly' chỉ tần suất thường xuyên."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn) giữa bệnh nhân và bác sĩ về giáo dục dinh dưỡng. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Student: Hi, Smith. I'm here for advice on my diet—I've been feeling fatigued lately.\nSmith: I see, Ben. Fatigue often stems from nutritional gaps. Have you been eating balanced meals?\nStudent: Not really. I skip breakfast and rely on fast food for lunch. My schedule is packed with classes.\nSmith: That's common among students. Let's create a plan: incorporate fruits and veggies daily. Also, hydrate—aim for eight glasses of water. If symptoms persist, we'll test for deficiencies.\nStudent: Will this help with focus in lectures?\nSmith: Definitely. Proper nutrition enhances concentration. Follow up in two weeks; I'll review your progress.",
      questions: [
        { 
          id: 16, 
          question: "The student feels __________.", 
          options: ["(A) energetic", "(B) fatigued", "(C) hungry", "(D) relaxed"], 
          correct: 1,
          explanation: "Student: 'I've been feeling fatigued lately.' (Tôi đang cảm thấy mệt mỏi gần đây.) - Kiến thức ngữ pháp: Thì hiện tại hoàn thành tiếp diễn 'have been feeling' chỉ trạng thái kéo dài; trạng từ 'lately' chỉ khoảng thời gian gần đây liên quan đến sức khỏe."
        },
        { 
          id: 17, 
          question: "Fatigue often stems from __________.", 
          options: ["(A) too much sleep", "(B) nutritional gaps", "(C) no classes", "(D) excess water"], 
          correct: 1,
          explanation: "Smith: 'Fatigue often stems from nutritional gaps.' (Mệt mỏi thường xuất phát từ khoảng trống dinh dưỡng.) - Kiến thức ngữ pháp: Động từ 'stem from + danh từ' chỉ nguồn gốc (originate from); trạng từ 'often' chỉ tần suất, với thì hiện tại đơn 'stems' cho sự thật chung."
        },
        { 
          id: 18, 
          question: "The student skips __________.", 
          options: ["(A) dinner", "(B) breakfast", "(C) snacks", "(D) all meals"], 
          correct: 1,
          explanation: "Student: 'I skip breakfast and rely on fast food for lunch.' (Tôi bỏ bữa sáng và dựa vào đồ ăn nhanh cho bữa trưa.) - Kiến thức ngữ pháp: Động từ 'skip + danh từ' chỉ bỏ qua; 'and' nối hai hành động song song, với thì hiện tại đơn 'skip' và 'rely' mô tả thói quen."
        },
        { 
          id: 19, 
          question: "Incorporate __________ daily.", 
          options: ["(A) fast food", "(B) fruits and veggies", "(C) no food", "(D) only water"], 
          correct: 1,
          explanation: "Smith: 'Incorporate fruits and veggies daily.' (Kết hợp trái cây và rau củ hàng ngày.) - Kiến thức ngữ pháp: Động từ 'incorporate + danh từ' chỉ thêm vào; trạng từ 'daily' chỉ tần suất, trong cấu trúc gợi ý ngầm với thì hiện tại đơn cho lời khuyên chung."
        },
        { 
          id: 20, 
          question: "Follow up in __________ weeks.", 
          options: ["(A) one", "(B) two", "(C) three", "(D) no follow-up"], 
          correct: 1,
          explanation: "Smith: 'Follow up in two weeks.' (Theo dõi sau hai tuần.) - Kiến thức ngữ pháp: Cấu trúc mệnh lệnh 'follow up + in + thời gian' chỉ lịch hẹn tương lai; thì hiện tại đơn 'follow' cho hành động dự định, nhấn mạnh theo dõi tiến độ sức khỏe."
        }
      ]
    },
    // Reading Parts - Giữ nguyên cấu trúc, thêm chi tiết ngữ pháp
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "Regular physical activity is essential for maintaining good cardiovascular __________. ",
          options: ["healthy", "health", "healthier", "healthily"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'health' vì đây là danh từ chỉ 'sức khỏe tim mạch', phù hợp sau 'cardiovascular'. Kiến thức ngữ pháp: Danh từ 'health' làm tân ngữ của 'maintaining'; phân biệt tính từ (A), so sánh hơn (C), trạng từ (D) không phù hợp vị trí này."
        },
       {
        id: 22,
        question: "The university offers a variety of elective courses __________ students can choose based on their interests.",
        options: ["that", "where", "who", "what"],
        correct: 0,
        explanation:
          "Chọn **that** vì cần một đại từ quan hệ chỉ *vật* (courses) làm tân ngữ cho động từ 'choose'.\n\n" +
          "- 'that' → đúng: courses that students can choose\n" +
          "- 'where' → sai: chỉ nơi chốn\n" +
          "- 'who' → sai: chỉ người\n" +
          "- 'what' → sai: không dùng nối mệnh đề như đại từ quan hệ"
      },
        {
          id: 23,
          question: "Since the pandemic, online learning platforms __________ become increasingly popular among educators.",
          options: ["have", "has", "had", "having"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'have' vì chủ ngữ số nhiều 'platforms' yêu cầu động từ số nhiều trong thì hiện tại hoàn thành. Kiến thức ngữ pháp: 'Since + mốc thời gian' + hiện tại hoàn thành 'have + V3' chỉ hành động từ quá khứ đến nay; 'has' (số ít), 'had' (quá khứ), 'having' (V-ing) không khớp."
        },
        {
          id: 24,
          question: "To promote mental well-being, the school counselor recommends practicing mindfulness __________.",
          options: ["technique", "techniques", "technical", "technically"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'techniques' vì danh từ số nhiều chỉ 'các kỹ thuật' đa dạng. Kiến thức ngữ pháp: Danh từ số nhiều sau 'practicing' (gerund); 'technique' (số ít), 'technical' (tính từ), 'technically' (trạng từ) không phù hợp làm tân ngữ."
        },
        {
          id: 25,
          question: "The research findings suggest that adequate sleep __________ cognitive performance in adolescents.",
          options: ["improve", "improves", "improved", "improving"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'improves' vì chủ ngữ số ít 'sleep' yêu cầu động từ ngôi thứ ba số ít thì hiện tại đơn. Kiến thức ngữ pháp: Cấu trúc 'suggest that + S + V (số ít)' cho sự thật; 'improve' (nguyên thể), 'improved' (quá khứ), 'improving' (V-ing) không phù hợp."
        },
        {
          id: 26,
          question: "Before enrolling in advanced biology, students must complete the prerequisite __________ course.",
          options: ["foundational", "foundation", "founded", "founding"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'foundational' vì tính từ chỉ 'cơ bản' mô tả 'course'. Kiến thức ngữ pháp: Tính từ 'foundational' đứng trước danh từ; 'foundation' (danh từ), 'founded' (quá khứ), 'founding' (V-ing) không làm modifier."
        },
        {
          id: 27,
          question: "The health fair will feature workshops on nutrition, __________ participants can learn practical meal-planning skills.",
          options: ["after", "before", "where", "unless"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'where' vì chỉ nơi chốn/ ngữ cảnh học hỏi (tại hội chợ). Kiến thức ngữ pháp: Đại từ quan hệ 'where' giới thiệu mệnh đề quan hệ cho 'workshops'; 'after/before' (thời gian), 'unless' (điều kiện) không phù hợp."
        },
        {
          id: 28,
          question: "Educators should encourage students to adopt healthy habits __________ an early age.",
          options: ["in", "on", "at", "from"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'from' vì cụm 'from an early age' chỉ thời điểm bắt đầu. Kiến thức ngữ pháp: Giới từ 'from + thời điểm' chỉ nguồn gốc thời gian; 'in/on/at' dùng cho khoảng/giờ/điểm cụ thể, không phù hợp với 'age' trừu tượng."
        },
        {
          id: 29,
          question: "The yoga class has been postponed __________ next Tuesday due to instructor illness.",
          options: ["until", "during", "by", "for"],
          correct: 0,
          explanation: "**Đáp án đúng:** (A) 'until'\n\nCâu này sử dụng **THÌ HIỆN TẠI HOÀN THÀNH BỊ ĐỘNG** với giới từ **'until'** để chỉ **THỜI ĐIỂM HOÃN LẠI**.\n\n**Cấu trúc:** **'postpone + UNTIL + thời gian'** = hoãn lại ĐẾN KHI (thời điểm trong tương lai)\n\n**Ý nghĩa:**\n- **'Postponed until next Tuesday'** = bị hoãn lại **đến** thứ Ba tuần sau\n- Nghĩa: Lớp học sẽ KHÔNG diễn ra trước thứ Ba, và có thể diễn ra VÀO hoặc SAU thứ Ba\n- → Lớp học bị GÁC LẠI cho đến khi đạt mốc thời gian 'next Tuesday'\n\n**So sánh các đáp án:**\n\n**(A) 'until' → ĐÚNG!**\n- Nghĩa: **ĐẾN KHI** (up to the time when)\n- Dùng để chỉ một hành động kéo dài/trì hoãn CHO ĐẾN một thời điểm\n- \"Postponed **until** Tuesday\" = hoãn **đến** thứ Ba (có thể diễn ra vào hoặc sau thứ Ba)\n\n**(B) 'during' → SAI**\n- Nghĩa: **TRONG SUỐT** (throughout a period)\n- Dùng để chỉ một hành động diễn ra TRONG khoảng thời gian\n- \"During Tuesday\" = suốt ngày thứ Ba → KHÔNG hợp lý với 'postponed'\n\n**(C) 'by' → SAI** (đã thay thế 'to' để rõ ràng hơn)\n- Nghĩa: **TRƯỚC/CHẬM NHẤT** (not later than)\n- Dùng để chỉ DEADLINE (hạn chót)\n- \"Postponed **by** Tuesday\" → Không tự nhiên, 'by' thường dùng với 'complete/finish', không dùng với 'postpone'\n- Ví dụ đúng: \"The report must be submitted **by** Friday.\" ✓\n\n**(D) 'for' → SAI**\n- Nghĩa: **TRONG KHOẢNG** (duration)\n- Dùng để chỉ KHOẢNG THỜI GIAN (for 3 days, for a week)\n- \"Postponed **for** next Tuesday\" → SAI ngữ pháp (phải là 'for + khoảng thời gian', không phải 'for + thời điểm cụ thể')\n- Ví dụ đúng: \"Postponed **for** two weeks.\""
        },
        {
          id: 30,
          question: "Balanced nutrition plays a crucial role in supporting overall student __________ and academic success.",
          options: ["develop", "development", "developed", "developing"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'development' vì danh từ chỉ 'sự phát triển'. Kiến thức ngữ pháp: Danh từ 'development' sau 'student' (sở hữu ngầm); 'develop' (động từ), 'developed' (quá khứ), 'developing' (V-ing) không làm tân ngữ của 'supporting'."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email về hội thảo giáo dục sức khỏe. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `To: All Faculty and Students
From: Dr. Anna Lee, Wellness Coordinator  
Subject: Upcoming Health Education Seminar Series


Dear Campus Community,

We are excited to announce the launch of our new Health Education Seminar Series, beginning on March 15. This initiative aims to empower participants with knowledge on preventive care and mental resilience, addressing common challenges faced by students and staff alike.

The first seminar, "Nutrition for Optimal Learning," will be held in Lecture Hall A at 2:00 p.m. Led by nutrition expert Sarah Kim, it will explore how dietary choices (31) academic performance. Attendance is free, but pre-registration is required to (32) limited seating.

Subsequent sessions include "Stress Management Techniques" on March 22 and "Physical Fitness in Academic Life" on March 29. Each seminar lasts 90 minutes (34) includes interactive Q&A. Materials will be provided to help attendees (33) what they've learned into daily routines.

For those unable to attend in person, recordings will be available on the wellness portal within 48 hours. We encourage departments to promote these events (35) consider group attendance for team-building.

If you have suggestions for future topics, please reply to this email. Together, we can foster a healthier, more supportive learning environment.

Best regards,

Dr. Anna Lee
Wellness Coordinator
University Health Services`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "...explore how dietary choices (31) academic performance.",
          options: ["affect", "ignore", "delay", "avoid"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'affect' vì nghĩa 'ảnh hưởng', phù hợp 'how dietary choices affect' (cách lựa chọn ăn uống ảnh hưởng). Kiến thức ngữ pháp: Động từ 'affect' + tân ngữ (performance) trong mệnh đề quan hệ 'how + clause'; thì hiện tại đơn cho sự thật chung."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "...pre-registration is required to (32) limited seating.",
          options: ["fill", "secure", "waste", "expand"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'secure' vì nghĩa 'đảm bảo', phù hợp 'to secure limited seating' (để giữ chỗ hạn chế). Kiến thức ngữ pháp: 'To + V nguyên thể' chỉ mục đích sau 'required'; 'secure' + tân ngữ chỉ bảo đảm."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...help attendees (33) what they've learned into daily routines.",
          options: ["apply", "forget", "repeat", "store"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'apply' vì nghĩa 'áp dụng', phù hợp 'apply what they've learned' (áp dụng những gì đã học). Kiến thức ngữ pháp: 'Apply + tân ngữ' trong cấu trúc 'help + to V' (có thể bỏ 'to'); mệnh đề quan hệ 'what they've learned' làm tân ngữ."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "Each seminar lasts 90 minutes (34) includes interactive Q&A.",
          options: ["but", "and", "or", "so"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'and' vì nối hai hành động song song (lasts and includes). Kiến thức ngữ pháp: Liên từ 'and' nối hai mệnh đề độc lập; 'but' (tương phản), 'or' (lựa chọn), 'so' (kết quả) không phù hợp ngữ cảnh mô tả."
        },
        {
        id: 35,
        question:
          "We encourage departments to promote these events ___ consider group attendance for team-building.",
        options: ["and", "but", "or", "so"],
        correct: 0,
        explanation:
          "Đáp án đúng: (A) and.\nHai hành động 'promote these events' và 'consider group attendance' song song, nên cần liên từ nối hai động từ cùng chức năng."
      },
        {
          id: 36,
          type: "comprehension",
          question: "(36) - The first seminar is on ___.",
          options: ["Stress management", "Nutrition for Optimal Learning", "Physical fitness", "Mental resilience"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'The first seminar, \"Nutrition for Optimal Learning\"' (Hội thảo đầu tiên về Dinh dưỡng cho Học tập Tối ưu). Kiến thức đọc hiểu: Xác định chủ đề từ phần mở đầu."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - What is required for attendance?",
          options: ["Payment", "Pre-registration", "Department approval", "Doctor's note"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'pre-registration is required' (cần đăng ký trước). Kiến thức đọc hiểu: Yêu cầu từ phần đăng ký."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - How long does each seminar last?",
          options: ["60 minutes", "90 minutes", "120 minutes", "Not specified"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Each seminar lasts 90 minutes' (Mỗi hội thảo kéo dài 90 phút). Kiến thức đọc hiểu: Thời lượng từ mô tả sự kiện."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - When will recordings be available?",
          options: ["Immediately", "Within 48 hours", "Next week", "Not available"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'within 48 hours' (trong 48 giờ). Kiến thức đọc hiểu: Thời gian từ phần hỗ trợ trực tuyến."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - Who leads the first seminar?",
          options: ["Dr. Anna Lee", "Sarah Kim", "Wellness Coordinator", "Faculty member"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Led by nutrition expert Sarah Kim' (Do chuyên gia dinh dưỡng Sarah Kim dẫn dắt). Kiến thức đọc hiểu: Người dẫn từ phần mô tả."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo khóa học sức khỏe và email đăng ký, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**Mindful Learning Academy Advertisement**

  Empower Your Mind: Online Courses in Health and Education

  Discover transformative online courses designed for busy professionals and students. Our certified programs blend education psychology with wellness strategies.

  **Featured Courses:**
  1. **Stress Reduction for Students** – Learn evidence-based techniques to balance academics and mental health. 8 weeks, $199.

  2. **Nutrition Essentials for Learners** – Understand how diet fuels cognitive function. Includes meal plans and quizzes.

  3. **Holistic Wellness Certification** – Comprehensive training in physical and emotional health. CE credits available for educators.

  Enroll today at mindfullearning.com. Flexible pacing, 24/7 access, and a 30-day money-back guarantee. Join thousands who've improved their well-being!

  ---

  **Email Message**

  **To:** enroll@mindfullearning.com
  **From:** lisa.parker@eduuniversity.edu
  **Date:** February 10
  **Subject:** Course Enrollment Inquiry

  Hello Mindful Learning Team,

  I saw your ad on the Education Today blog and am a high school teacher interested in your offerings. I'd like to enroll in "Stress Reduction for Students" to better support my classes. As an educator, do you offer discounts or CE credits? My budget is around $150, and I need to start soon for the spring semester. Also, is the course fully asynchronous?

  Please send details and enrollment steps. Available for a quick call Thursday morning.

  Thank you,
  Lisa Parker
  History Teacher, EduUniversity
  555-0123 (school)
  123 Scholar Lane, Boston, MA 02115`,
      questions: [
        {
          id: 41,
          question: "According to the advertisement, what is the cost of the Stress Reduction course?",
          options: ["$99", "$149", "$199", "$299"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì '8 weeks, $199' (8 tuần, 199 đô). Kiến thức đọc hiểu: Giá từ phần mô tả khóa học."
        },
        {
          id: 42,
          question: "How did Ms. Parker learn about the academy?",
          options: ["From a friend", "From TV", "From Education Today blog", "From email"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'I saw your ad on the Education Today blog' (Tôi thấy quảng cáo trên blog Education Today). Kiến thức suy luận: Nguồn từ email."
        },
        {
          id: 43,
          question: "What is Ms. Parker's profession?",
          options: ["College professor", "High school teacher", "Nutritionist", "Student"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'a high school teacher' (giáo viên trung học). Kiến thức đọc hiểu: Vai trò từ phần giới thiệu."
        },
        {
          id: 44,
          question: "Which course does Ms. Parker want to enroll in?",
          options: ["Nutrition Essentials", "Holistic Wellness", "Stress Reduction for Students", "All courses"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì '\"Stress Reduction for Students\"' (Giảm stress cho sinh viên). Kiến thức đọc hiểu: Khóa học cụ thể từ yêu cầu."
        },
        {
          id: 45,
          question: "What does Ms. Parker ask about CE credits?",
          options: ["For students", "For educators", "Not mentioned", "For nutritionists"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'do you offer... CE credits? As an educator' (có cung cấp tín chỉ CE không? Là giáo viên). Kiến thức đọc hiểu: Yêu cầu từ ngữ cảnh nghề nghiệp."
        },
        {
          id: 46,
          question: "What is Ms. Parker's budget?",
          options: ["$100", "$150", "$200", "Unlimited"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'My budget is around $150' (Ngân sách khoảng 150 đô). Kiến thức đọc hiểu: Giới hạn tài chính từ email."
        },
        {
          id: 47,
          question: "When does Ms. Parker need to start?",
          options: ["Summer", "Fall semester", "Spring semester", "Next year"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'start soon for the spring semester' (bắt đầu sớm cho học kỳ xuân). Kiến thức đọc hiểu: Thời gian từ lý do cấp bách."
        },
        {
          id: 48,
          question: "Is the course asynchronous according to the inquiry?",
          options: ["She asks if it's fully asynchronous", "It's synchronous", "Not mentioned", "It's hybrid"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'is the course fully asynchronous?' (khóa học có hoàn toàn không đồng bộ?). Kiến thức đọc hiểu: Câu hỏi từ email."
        },
        {
          id: 49,
          question: "When is Ms. Parker available for a call?",
          options: ["Wednesday afternoon", "Thursday morning", "Friday evening", "Anytime"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Available for a quick call Thursday morning' (Có sẵn thứ Năm sáng). Kiến thức đọc hiểu: Lịch từ email."
        },
        {
          id: 50,
          question: "What guarantee does the advertisement offer?",
          options: ["Lifetime access", "30-day money-back", "Free enrollment", "No guarantee"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì '30-day money-back guarantee' (bảo đảm hoàn tiền 30 ngày). Kiến thức đọc hiểu: Lợi ích từ quảng cáo."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn về tư vấn sức khỏe học đường, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Parent (09:15): Hi Counselor, my daughter Anna is struggling with anxiety before exams. Any advice?
  Counselor (09:20): Hello! Common issue. Suggest deep breathing exercises daily. Resources on school portal.
  Parent (09:25): Thanks. She's also skipping meals. Nutrition link?
  Counselor (09:30): Yes, check "Healthy Eating Guide" PDF. Hydrate too—stress dehydrates.
  Parent (14:45): Tried breathing; helped a bit. Workshop signup?
  Counselor (14:50): Great progress! Next teen wellness workshop: March 5, 4pm. Link: bit.ly/schoolwellness.`,
      questions: [
        {
          id: 51,
          question: "What is Anna struggling with?",
          options: ["Good grades", "Anxiety before exams", "Too much sleep", "Overeating"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'struggling with anxiety before exams' (đang gặp khó khăn với lo lắng trước kỳ thi). Kiến thức suy luận: Vấn đề chính từ tin nhắn đầu."
        },
        {
          id: 52,
          question: "What does the counselor suggest first?",
          options: ["Skip school", "Deep breathing exercises", "Eat junk food", "No resources"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Suggest deep breathing exercises daily' (Gợi ý bài tập thở sâu hàng ngày). Kiến thức đọc hiểu: Lời khuyên ban đầu."
        },
        {
          id: 53,
          question: "Where are resources located?",
          options: ["Email", "School portal", "Bookstore", "Not specified"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Resources on school portal' (Tài nguyên trên cổng trường). Kiến thức đọc hiểu: Vị trí từ phản hồi."
        },
        {
          id: 54,
          question: "What else is Anna doing?",
          options: ["Eating well", "Skipping meals", "Exercising daily", "Sleeping enough"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'She's also skipping meals' (Cô ấy cũng bỏ bữa). Kiến thức đọc hiểu: Vấn đề thứ hai từ phụ huynh."
        },
        {
          id: 55,
          question: "What PDF is recommended?",
          options: ["Exercise Guide", "Healthy Eating Guide", "Anxiety Workbook", "Sleep Tips"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì '\"Healthy Eating Guide\" PDF' (Hướng dẫn Ăn uống Lành mạnh). Kiến thức đọc hiểu: Tài liệu cụ thể."
        },
        {
          id: 56,
          question: "What helped a bit?",
          options: ["Meals", "Breathing exercises", "Workshop", "Hydration"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Tried breathing; helped a bit' (Thử thở; giúp một chút). Kiến thức suy luận: Tiến bộ từ cập nhật."
        },
        {
          id: 57,
          question: "When is the next workshop?",
          options: ["March 5, 4pm", "March 15, 2pm", "April 1, noon", "Not dated"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'Next teen wellness workshop: March 5, 4pm' (Hội thảo sức khỏe thiếu niên tiếp theo: 5/3, 4h chiều). Kiến thức đọc hiểu: Lịch từ gợi ý."
        },
        {
          id: 58,
          question: "What does stress do according to the counselor?",
          options: ["Increases energy", "Dehydrates", "Improves focus", "Reduces anxiety"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'stress dehydrates' (stress gây mất nước). Kiến thức đọc hiểu: Lời khuyên bổ sung."
        },
        {
          id: 59,
          question: "What is provided for the workshop?",
          options: ["No link", "Signup link", "Fee info", "Location only"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Link: bit.ly/schoolwellness' (Liên kết đăng ký). Kiến thức suy luận: Hỗ trợ tham gia."
        },
        {
          id: 60,
          question: "What is the counselor's response to progress?",
          options: ["Ignore it", "Great progress!", "Too late", "Cancel"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Great progress!' (Tiến bộ tuyệt vời!). Kiến thức đọc hiểu: Phản ứng tích cực."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam4.js">
export const EXAM4_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 4 (Chủ Đề: Môi Trường & Xã Hội)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài để luyện nghe chi tiết, tập trung vào các vấn đề môi trường và xã hội.",
  parts: {
    // Listening Parts - Part 1 cập nhật: 1 hội thoại chung cho 5 câu hỏi
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Mark và Sarah về chiến dịch bảo vệ môi trường. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Mark: Sarah, have you joined the community clean-up drive this weekend?\nSarah: Not yet, Mark. I'm organizing the recycling workshop instead—it's about reducing plastic waste in our neighborhood. We expect over 50 volunteers.\nMark: That's vital. Last year's event collected tons of litter from the riverbank. What's the focus this time?\nSarah: Educating on sustainable habits, like composting. I hope it raises awareness about climate change impacts locally.\nMark: Excellent. I'll promote it on social media; community engagement is key to social change.",
      questions: [
        {
          id: 1,
          options: [
            "She joined the clean-up drive.",
            "She is organizing the recycling workshop.",
            "She is avoiding events.",
            "She expects no volunteers."
          ],
          correct: 1,
          explanation: "Sarah nói: 'I'm organizing the recycling workshop instead.' (Tôi đang tổ chức hội thảo tái chế thay vì.) Kiến thức ngữ pháp: Thì hiện tại tiếp diễn 'am organizing' chỉ hành động đang diễn ra và kế hoạch tương lai; 'instead' là trạng từ chỉ sự thay thế, nối với mệnh đề trước bằng ngầm hiểu."
        },
        {
          id: 2,
          options: [
            "Reducing paper waste.",
            "Reducing plastic waste.",
            "Increasing litter.",
            "Ignoring neighborhood."
          ],
          correct: 1,
          explanation: "Sarah nói: 'It's about reducing plastic waste in our neighborhood.' (Nó về việc giảm chất thải nhựa ở khu phố chúng ta.) Kiến thức ngữ pháp: Cấu trúc 'be about + V-ing' chỉ mục đích hoặc nội dung; thì hiện tại đơn 'is' mô tả sự thật chung, với giới từ 'in + danh từ' chỉ vị trí xã hội."
        },
        {
          id: 3,
          options: [
            "Under 20 volunteers.",
            "Over 50 volunteers.",
            "No volunteers expected.",
            "Only 10 volunteers."
          ],
          correct: 1,
          explanation: "Sarah nói: 'We expect over 50 volunteers.' (Chúng tôi mong đợi hơn 50 tình nguyện viên.) Kiến thức ngữ pháp: Động từ 'expect + tân ngữ' ở thì hiện tại đơn chỉ kỳ vọng tương lai; 'over + số' chỉ vượt quá, với chủ ngữ số nhiều 'we' phù hợp động từ số nhiều ngầm."
        },
        {
          id: 4,
          options: [
            "Collected from parks.",
            "Collected tons of litter from the riverbank.",
            "Collected no litter.",
            "Collected paper only."
          ],
          correct: 1,
          explanation: "Mark nói: 'Last year's event collected tons of litter from the riverbank.' (Sự kiện năm ngoái thu gom hàng tấn rác từ bờ sông.) Kiến thức ngữ pháp: Thì quá khứ đơn 'collected' cho hành động hoàn tất; cụm 'tons of + danh từ không đếm được' chỉ lượng lớn, với 'from + nơi' chỉ nguồn gốc."
        },
        {
          id: 5,
          options: [
            "Educating on sustainable habits.",
            "Ignoring climate change.",
            "Focusing on travel.",
            "Reducing volunteers."
          ],
          correct: 0,
          explanation: "Sarah nói: 'Educating on sustainable habits, like composting.' (Giáo dục về thói quen bền vững, như ủ phân.) Kiến thức ngữ pháp: Gerund 'educating + on + danh từ' làm tân ngữ; ví dụ 'like + danh từ' chỉ minh họa, với thì hiện tại phân từ 'like' song song."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người tại hội nghị xã hội về bảo vệ môi trường. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: At the environmental forum.\nClient 1: Good afternoon, Ben and Anna. Are you attending the panel on social equity in climate action?\nBen: We are, Client 1. It's crucial—marginalized communities suffer most from pollution.\nAnna: True. Last panel discussed renewable energy subsidies, but equity was overlooked. John, pass the agenda.\nClient 1: Here. Today's focus: community-led conservation. Volunteers from local NGOs will share success stories.\nBen: Inspiring. After this, we're joining the protest against deforestation.\nAnna: Yes, to amplify voices for indigenous rights.",
      questions: [
        {
          id: 6,
          question: "What is the panel about?",
          options: [
            "Economic growth",
            "Social equity in climate action",
            "Travel subsidies",
            "No panel"
          ],
          correct: 1,
          explanation: "Client 1 nói: 'The panel on social equity in climate action.' (Bảng điều khiển về công bằng xã hội trong hành động khí hậu.) Kiến thức ngữ pháp: Giới từ 'on + danh từ' chỉ chủ đề; thì hiện tại đơn 'is' cho lịch trình cố định, với cụm 'social equity in + lĩnh vực' chỉ phạm vi xã hội-môi trường."
        },
        {
          id: 7,
          question: "Who suffers most from pollution?",
          options: [
            "Wealthy areas",
            "Marginalized communities",
            "Tourists",
            "No one"
          ],
          correct: 1,
          explanation: "Ben nói: 'Marginalized communities suffer most from pollution.' (Cộng đồng bị thiệt thòi chịu ảnh hưởng nặng nề nhất từ ô nhiễm.) Kiến thức ngữ pháp: Thì hiện tại đơn 'suffer' cho sự thật chung; 'most from + danh từ' chỉ mức độ cao nhất, với tính từ 'marginalized' mô tả nhóm xã hội."
        },
        {
          id: 8,
          question: "What was overlooked in the last panel?",
          options: [
            "Renewable energy",
            "Equity",
            "Success stories",
            "Protests"
          ],
          correct: 1,
          explanation: "Anna nói: 'Equity was overlooked.' (Công bằng bị bỏ qua.) Kiến thức ngữ pháp: Thì quá khứ đơn bị động 'was overlooked' chỉ hành động bị bỏ sót; danh từ 'equity' làm chủ ngữ, nhấn mạnh vấn đề xã hội trong ngữ cảnh môi trường."
        },
        {
          id: 9,
          question: "Today's focus is on __________.",
          options: [
            "Economic subsidies",
            "Community-led conservation",
            "Deforestation promotion",
            "No focus"
          ],
          correct: 1,
          explanation: "Client 1 nói: 'Today's focus: community-led conservation.' (Trọng tâm hôm nay: bảo tồn do cộng đồng dẫn dắt.) Kiến thức ngữ pháp: Cấu trúc danh từ 'today's focus' với dấu hai chấm giới thiệu giải thích; tính từ ghép 'community-led' mô tả phương pháp xã hội."
        },
        {
          id: 10,
          question: "What are they joining after the panel?",
          options: [
            "A party",
            "The protest against deforestation",
            "A subsidy meeting",
            "Nothing"
          ],
          correct: 1,
          explanation: "Ben nói: 'We're joining the protest against deforestation.' (Chúng tôi tham gia biểu tình chống phá rừng.) Kiến thức ngữ pháp: Thì hiện tại tiếp diễn 'are joining' chỉ kế hoạch tương lai; giới từ 'against + danh từ' chỉ mục tiêu phản đối, với đại từ 'we're' rút gọn."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn) của diễn giả về trách nhiệm xã hội môi trường. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: Now, a talk on environmental justice. Society must address how pollution disproportionately affects low-income areas—data shows 70% higher exposure there. Corporate accountability is essential; fines for violations encourage compliance. If we ignore this, inequality worsens. Emma, our activist, led a campaign that planted 500 trees in urban spaces last year. Join us in advocating for policy changes to build resilient communities.",
      questions: [
        { 
          id: 11, 
          question: "Pollution affects __________ areas disproportionately.", 
          options: ["(A) high-income", "(B) low-income", "(C) rural", "(D) no areas"], 
          correct: 1,
          explanation: "Narrator: 'Pollution disproportionately affects low-income areas.' (Ô nhiễm ảnh hưởng không cân xứng đến khu vực thu nhập thấp.) - Kiến thức ngữ pháp: Trạng từ 'disproportionately' bổ nghĩa động từ 'affects'; thì hiện tại đơn 'affects' cho sự thật xã hội, với tính từ 'low-income' làm cụm danh từ."
        },
        { 
          id: 12, 
          question: "Data shows __________ higher exposure.", 
          options: ["(A) 30%", "(B) 70%", "(C) 90%", "(D) 10%"], 
          correct: 1,
          explanation: "Narrator: 'Data shows 70% higher exposure there.' (Dữ liệu cho thấy tiếp xúc cao hơn 70% ở đó.) - Kiến thức ngữ pháp: Cấu trúc 'show + số % + so sánh hơn + danh từ' chỉ mức độ; thì hiện tại đơn 'shows' cho dữ liệu chung, với 'higher' so sánh với ngầm hiểu."
        },
        { 
          id: 13, 
          question: "Corporate __________ is essential.", 
          options: ["(A) avoidance", "(B) accountability", "(C) expansion", "(D) fines"], 
          correct: 1,
          explanation: "Narrator: 'Corporate accountability is essential.' (Trách nhiệm doanh nghiệp là thiết yếu.) - Kiến thức ngữ pháp: Danh từ 'accountability' làm chủ ngữ; thì hiện tại đơn 'is' với tính từ 'essential' mô tả tính cần thiết xã hội-môi trường."
        },
        { 
          id: 14, 
          question: "Emma led a campaign that planted __________ trees.", 
          options: ["(A) 100", "(B) 500", "(C) 1000", "(D) none"], 
          correct: 1,
          explanation: "Narrator: 'Emma... led a campaign that planted 500 trees.' (Emma dẫn dắt chiến dịch trồng 500 cây.) - Kiến thức ngữ pháp: Mệnh đề quan hệ 'that + V quá khứ' chỉ hành động của campaign; thì quá khứ đơn 'planted' cho sự kiện hoàn tất."
        },
        { 
          id: 15, 
          question: "Join us in __________ for policy changes.", 
          options: ["(A) ignoring", "(B) advocating", "(C) worsening", "(D) building"], 
          correct: 1,
          explanation: "Narrator: 'Join us in advocating for policy changes.' (Tham gia chúng tôi vận động cho thay đổi chính sách.) - Kiến thức ngữ pháp: Giới từ 'in + V-ing' chỉ hoạt động; 'for + danh từ' chỉ mục tiêu, với thì hiện tại phân từ 'advocating' làm tân ngữ của 'join'."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn) giữa thành viên cộng đồng về vấn đề xã hội môi trường. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Older Woman: Hello, Lisa. Concerned about the new factory's emissions affecting our air quality?\nLisa: Very much, Older Woman. It's impacting vulnerable residents—asthma cases are rising. We need to petition local council.\nOlder Woman: Agreed. Last month, similar issue in the next town led to regulations. Gather signatures online.\nLisa: I'll start a social media drive. Equity demands we protect all, especially the elderly and children.\nOlder Woman: Wise. If ignored, social divides deepen. Let's meet tomorrow to draft the letter.",
      questions: [
        { 
          id: 16, 
          question: "The factory's emissions affect __________.", 
          options: ["(A) air quality", "(B) water only", "(C) soil", "(D) no quality"], 
          correct: 0,
          explanation: "Older Woman: 'The new factory's emissions affecting our air quality.' (Khí thải nhà máy mới ảnh hưởng chất lượng không khí.) - Kiến thức ngữ pháp: Phân từ hiện tại 'affecting' làm bổ ngữ; sở hữu 'factory's' chỉ nguồn, với thì hiện tại tiếp diễn ngầm chỉ tác động đang diễn ra."
        },
        { 
          id: 17, 
          question: "Asthma cases are __________.", 
          options: ["(A) decreasing", "(B) rising", "(C) stable", "(D) none"], 
          correct: 1,
          explanation: "Lisa: 'Asthma cases are rising.' (Các ca hen suyễn đang tăng.) - Kiến thức ngữ pháp: Thì hiện tại tiếp diễn 'are rising' chỉ xu hướng đang xảy ra; chủ ngữ số nhiều 'cases' phù hợp động từ số nhiều."
        },
        { 
          id: 18, 
          question: "What to do about the issue?",
          options: ["(A) Ignore it", "(B) Petition local council", "(C) Build factory", "(D) No action"],
          correct: 1,
          explanation: "Lisa: 'We need to petition local council.' (Chúng ta cần kiến nghị hội đồng địa phương.) - Kiến thức ngữ pháp: Cấu trúc 'need to + V nguyên thể' chỉ nhu cầu; thì hiện tại đơn 'need' cho hành động cần thiết xã hội."
        },
        { 
          id: 19, 
          question: "What happened last month in the next town?",
          options: ["(A) No regulations", "(B) Led to regulations", "(C) Increased emissions", "(D) Closed factory"],
          correct: 1,
          explanation: "Older Woman: 'Similar issue... led to regulations.' (Vấn đề tương tự dẫn đến quy định.) - Kiến thức ngữ pháp: Thì quá khứ đơn 'led' chỉ nguyên nhân-kết quả; mệnh đề quan hệ rút gọn bổ nghĩa 'issue'."
        },
        { 
          id: 20, 
          question: "Social media drive to __________.",
          options: ["(A) Gather signatures", "(B) Deepen divides", "(C) Protect elderly only", "(D) No drive"],
          correct: 0,
          explanation: "Lisa: 'Gather signatures online.' (Thu thập chữ ký trực tuyến.) - Kiến thức ngữ pháp: Động từ nguyên thể 'gather' sau 'I'll start a ... drive' chỉ mục đích; trạng từ 'online' chỉ phương tiện xã hội."
        }
      ]
    },
    // Reading Parts
  part5: {
  title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
  description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
  type: "reading",
  questions: [
    {
      id: 21,
      question:
        "Global warming poses significant threats to coastal communities, __________ rising sea levels and extreme weather events.",
      options: ["such as", "despite", "unless", "although"],
      correct: 0,
      explanation:
        "Đáp án đúng là (A) 'such as'. Cụm 'such as + danh từ' dùng để đưa ra ví dụ minh họa. Câu đang liệt kê các mối đe dọa (rising sea levels, extreme weather events). Các từ còn lại đều mang nghĩa đối lập hoặc điều kiện, không phù hợp."
    },
    {
      id: 22,
      question:
        "The nonprofit organization __________ volunteers to clean up polluted beaches every weekend.",
      options: ["rely on", "relies on", "relied on", "relying on"],
      correct: 1,
      explanation:
        "Đáp án đúng là (B) 'relies on' vì chủ ngữ 'organization' là danh từ số ít → động từ phải chia ngôi thứ ba số ít. Thì hiện tại đơn dùng để mô tả hoạt động thường xuyên. 'Rely on' là cụm động từ chỉ sự phụ thuộc."
    },
    {
      id: 23,
      question:
        "Since implementing recycling programs, the city __________ reduced its waste by 25%.",
      options: ["have", "has", "had", "having"],
      correct: 1,
      explanation:
        "Đáp án đúng là (B) 'has'. Chủ ngữ 'city' là số ít nên dùng 'has'. Câu có 'since + V-ing' hàm ý hành động bắt đầu trong quá khứ và tiếp tục đến hiện tại → dùng thì hiện tại hoàn thành 'has + V3'."
    },
    {
      id: 24,
      question:
        "Social media campaigns have raised awareness about environmental issues __________ engaging young audiences.",
      options: ["by", "with", "on", "at"],
      correct: 0,
      explanation:
        "Đáp án đúng là (A) 'by'. Cấu trúc 'by + V-ing' diễn tả cách thức thực hiện hành động. Ý câu: các chiến dịch mạng xã hội nâng cao nhận thức *bằng cách* thu hút giới trẻ. Các giới từ còn lại không mang nghĩa chỉ phương tiện."
    },
    {
      id: 25,
      question:
        "The report highlights the need for immediate action to __________ biodiversity loss.",
      options: ["prevent", "prevents", "prevented", "preventing"],
      correct: 0,
      explanation:
        "Đáp án là (A) 'prevent'. Sau 'to' là động từ nguyên thể không chia. Câu mang nghĩa: cần hành động để ngăn chặn sự suy giảm đa dạng sinh học."
    },
    {
      id: 26,
      question:
        "Community gardens not only provide fresh produce but also foster social __________ among neighbors.",
      options: ["interact", "interaction", "interactive", "interacting"],
      correct: 1,
      explanation:
        "Đáp án là (B) 'interaction'. Sau tính từ 'social' cần một danh từ. Cụm 'social interaction' (sự tương tác xã hội) là một collocation chuẩn. Các từ còn lại không đúng dạng từ."
    },
    {
      id: 27,
      question:
        "Unless governments enforce stricter regulations, deforestation will continue __________ an alarming rate.",
      options: ["at", "in", "on", "with"],
      correct: 0,
      explanation:
        "Đáp án đúng là (A) 'at'. Cụm cố định 'at + rate' (ở mức độ/tốc độ). 'At an alarming rate' là một collocation rất phổ biến trong môi trường – dễ gây nhầm nếu không quen. 'Unless' mang nghĩa 'trừ khi', mở đầu mệnh đề điều kiện."
    },
    {
      id: 28,
      question:
        "Activists are __________ petitions to urge policymakers to address climate inequality.",
      options: ["circulate", "circulates", "circulated", "circulating"],
      correct: 3,
      explanation:
        "Đáp án đúng là (D) 'circulating'. Dạng tiếp diễn 'are + V-ing' diễn tả hành động đang diễn ra trong hiện tại. Các nhà hoạt động đang thu thập/chia sẻ đơn kiến nghị."
    },
    {
      id: 29,
      question:
        "The sustainable development goals aim __________ eradicating poverty while protecting the environment.",
      options: ["at", "for", "in", "on"],
      correct: 0,
      explanation:
        "Đáp án là (A) 'at'. Cấu trúc 'aim at + V-ing' diễn tả mục tiêu của một hành động/chính sách. 'Eradicating poverty' là danh động từ V-ing đóng vai trò tân ngữ."
    },
    {
      id: 30,
      question:
        "Renewable energy sources, __________ solar and wind power, are key to mitigating climate change.",
      options: ["such as", "despite", "unless", "although"],
      correct: 0,
      explanation:
        "Đáp án là (A) 'such as'. Câu dùng để *liệt kê ví dụ* cho 'renewable energy sources'. Dấu phẩy trước 'such as' giúp tách phần ví dụ (solar, wind power) khỏi mệnh đề chính."
    }
  ]
},
        part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email về chiến dịch môi trường xã hội. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `To: Community Members
    From: Emma Rodriguez, Environmental Advocate  
    Subject: Join Our Urban Greening Initiative


    Dear Neighbors,

    We are launching the Urban Greening Initiative to combat climate change effects in our city. This community-driven project (31) planting trees and creating green spaces in underserved areas, promoting both environmental health and social cohesion.

    The kickoff event is on April 10 at Central Park, starting at 10 a.m. (34) volunteers will receive tools and guidance; no experience necessary. By participating, you'll help (32) air quality and provide shade for vulnerable populations.

    Future activities include workshops (35) sustainable gardening on April 17 and a neighborhood forum on eco-justice on April 24. These sessions aim to (33) residents with knowledge for long-term impact.

    To sign up, visit our website or reply to this email. Together, we can build a greener, more equitable society.

    Best regards,

    Emma Rodriguez
    Environmental Advocate
    GreenCity Network`,
      "questions": [
    {
      "id": 31,
      "type": "fill",
      "question": "(31) - Điền từ thích hợp",
      "context": "This community-driven project (31) planting trees...",
      "options": [
        "involves",
        "avoids",
        "delays",
        "ignores"
      ],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) 'involves'** (bao gồm). Ngữ pháp yêu cầu một động từ ở thì Hiện tại Đơn (vì chủ ngữ là 'project' số ít) và phải đi với Gerund ('planting'). 'Involves' có nghĩa là 'bao gồm, có liên quan', rất phù hợp để mô tả các hoạt động của một dự án. Các từ khác ('avoids' - tránh, 'delays' - trì hoãn, 'ignores' - phớt lờ) mang nghĩa tiêu cực và không hợp ngữ cảnh."
    },
    {
      "id": 32,
      "type": "fill",
      "question": "(32) - Điền từ thích hợp",
      "context": "By participating, you'll help (32) air quality...",
      "options": [
        "worsen",
        "improve",
        "maintain",
        "ignore"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 'improve'** (cải thiện). Mục tiêu của việc trồng cây và tạo không gian xanh là **cải thiện** chất lượng không khí ('air quality'). Cấu trúc 'help + V nguyên mẫu' (giúp làm gì) được sử dụng. Các từ khác ('worsen' - làm tồi tệ hơn, 'ignore' - phớt lờ) trái nghĩa, còn 'maintain' (duy trì) không thể hiện tác động tích cực của việc trồng cây."
    },
    {
      "id": 33,
      "type": "fill",
      "question": "(33) - Điền từ thích hợp",
      "context": "These sessions aim to (33) residents with knowledge...",
      "options": [
        "deprive",
        "burden",
        "equip",
        "confuse"
      ],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'equip'** (trang bị). Cấu trúc **'equip somebody with something'** (trang bị cho ai cái gì) là một collocation (kết hợp từ) cố định. Ở đây, mục tiêu là trang bị cho cư dân ('residents') **kiến thức** ('knowledge') để tạo ra tác động lâu dài. Các từ còn lại ('deprive' - tước đoạt, 'burden' - gây gánh nặng, 'confuse' - gây bối rối) đều mang nghĩa tiêu cực và sai cấu trúc."
    },
    {
      "id": 34,
      "type": "fill",
      "question": "(34) - Điền từ thích hợp",
      "context": "The kickoff event is on April 10 at Central Park, starting at 10 a.m. (34) volunteers will receive tools...",
      "options": [
        "however",
        "besides",
        "therefore",
        "and"
      ],
      "correct": 3,
      "explanation": "Đáp án đúng là **(D) 'and'** (và). Trong ngữ cảnh này, dấu chấm câu (period) trước khoảng trống đã được sử dụng như một phép nối đơn giản để giới thiệu mệnh đề tiếp theo, cung cấp thêm thông tin về sự kiện. Liên từ **'And'** là lựa chọn tự nhiên và trung lập nhất để thêm thông tin rằng 'tình nguyện viên sẽ nhận dụng cụ'. Các từ nối khác ('however' - tuy nhiên, 'therefore' - do đó) chỉ mối quan hệ tương phản hoặc nguyên nhân-kết quả và không phù hợp."
    },
    {
      "id": 35,
      "type": "fill",
      "question": "(35) - Điền từ thích hợp",
      "context": "Future activities include workshops (35) sustainable gardening...",
      "options": [
        "at",
        "with",
        "on",
        "for"
      ],
      "correct": 2,
      "explanation": "Đáp án đúng là **(C) 'on'** (về, về chủ đề). Giới từ **'on'** thường được dùng để chỉ **chủ đề** của một buổi hội thảo, bài giảng, hoặc cuộc thảo luận. 'Workshops **on** sustainable gardening' có nghĩa là 'các buổi hội thảo về chủ đề làm vườn bền vững'."
    },
    {
      "id": 36,
      "type": "comprehension",
      "question": "(36) - The initiative focuses on __________.",
      "options": [
        "Planting trees and green spaces",
        "Building factories",
        "Reducing volunteers",
        "No focus"
      ],
      "correct": 0,
      "explanation": "Đáp án đúng là **(A) Planting trees and green spaces**. Câu đầu tiên của đoạn 2 nêu rõ: 'This community-driven project involves **planting trees and creating green spaces** in underserved areas...'"
    },
    {
      "id": 37,
      "type": "comprehension",
      "question": "(37) - When is the kickoff event?",
      "options": [
        "March 10",
        "April 10",
        "May 10",
        "Not specified"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) April 10**. Câu đầu tiên của đoạn 3 thông báo: 'The kickoff event is **on April 10** at Central Park...'"
    },
    {
      "id": 38,
      "type": "comprehension",
      "question": "(38) - What is required for volunteers?",
      "options": [
        "Experience",
        "Tools and guidance",
        "Payment",
        "Nothing"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Tools and guidance**. Đoạn 3 nói: 'volunteers will **receive tools and guidance; no experience necessary**.' Điều này ngụ ý rằng họ cần nhận công cụ và hướng dẫn (chứ không phải tự mang theo) và không cần kinh nghiệm."
    },
    {
      "id": 39,
      "type": "comprehension",
      "question": "(39) - What is the workshop on April 17?",
      "options": [
        "Eco-justice",
        "Sustainable gardening",
        "Air quality",
        "Tree planting"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Sustainable gardening**. Đoạn 4 liệt kê: 'Future activities include workshops **on sustainable gardening on April 17**...'"
    },
    {
      "id": 40,
      "type": "comprehension",
      "question": "(40) - How to sign up?",
      "options": [
        "In person only",
        "Visit website or reply email",
        "No signup",
        "By phone"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Visit website or reply email**. Câu cuối cùng của đoạn 4 hướng dẫn: 'To sign up, **visit our website or reply to this email**.'"
    }
  ]
},
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo chiến dịch xã hội và email tham gia, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**EcoJustice Network Advertisement**

  Fight for a Fairer Planet: Join Our Advocacy Campaign

  EcoJustice Network empowers communities to tackle environmental racism and inequality. Through petitions, protests, and policy advocacy, we ensure voices from affected areas are heard.

  **Our Impact:**
  1. **Policy Wins** – Successfully lobbied for clean air standards in 5 cities.

  2. **Community Training** – Free workshops on legal rights and organizing.

  3. **Youth Engagement** – Programs for students to lead local initiatives.

  Donate or volunteer at ecojustice.org. Your support drives systemic change!

  ---

  **Email Message**

  **To:** info@ecojustice.org
  **From:** john.miller@communityaid.org
  **Date:** May 5
  **Subject:** Interest in Volunteering

  Dear EcoJustice Team,

  I read your ad in the Green Living magazine and work as a social worker in a low-income neighborhood hit hard by industrial pollution. I'd like to volunteer for your community training workshops to empower residents. Do you have openings for facilitators? I'm available weekends and can commit 10 hours monthly. Also, interested in youth programs for my after-school group.

  Please advise on next steps. Looking forward to contributing.

  Sincerely,
  John Miller
  Social Worker, Community Aid
  713-555-2345
  456 Equity St, Houston, TX 77002`,
     "questions": [
    {
      "id": 41,
      "question": "What does the advertisement focus on?",
      "options": [
        "Economic growth",
        "Environmental racism and inequality",
        "Travel advocacy",
        "No focus"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Environmental racism and inequality**. Câu đầu tiên trong nội dung quảng cáo nêu rõ mục tiêu: 'EcoJustice Network empowers communities to tackle **environmental racism and inequality**.' (Mạng lưới EcoJustice trao quyền cho cộng đồng để giải quyết vấn nạn phân biệt chủng tộc và bất bình đẳng môi trường)."
    },
    {
      "id": 42,
      "question": "How did Mr. Miller learn about EcoJustice?",
      "options": [
        "From a friend",
        "From Green Living magazine",
        "From TV",
        "From email"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) From Green Living magazine**. Trong email, John Miller nói: 'I read your ad in the **Green Living magazine**'. Đây là thông tin quan trọng nối giữa hai văn bản (ad và email)."
    },
    {
      "id": 43,
      "question": "What is Mr. Miller's job?",
      "options": [
        "Lawyer",
        "Social worker",
        "Teacher",
        "Doctor"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Social worker**. Thông tin được tìm thấy trong phần mở đầu thư ('work as a **social worker**') và phần chữ ký ('Social Worker, Community Aid')."
    },
    {
      "id": 44,
      "question": "What does Mr. Miller want to volunteer for?",
      "options": [
        "Donations only",
        "Community training workshops",
        "Policy lobbying",
        "Youth protests"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Community training workshops**. John Miller viết: 'I'd like to volunteer for your **community training workshops** to empower residents.' (Tôi muốn tình nguyện tham gia hội thảo đào tạo cộng đồng của các bạn...). Mặc dù EcoJustice làm nhiều việc, đây là yêu cầu tình nguyện cụ thể của anh ấy."
    },
    {
      "id": 45,
      "question": "What is Mr. Miller's neighborhood affected by?",
      "options": [
        "Clean air",
        "Industrial pollution",
        "Green spaces",
        "No issues"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Industrial pollution**. John Miller mô tả khu vực mình làm việc là: 'a low-income neighborhood **hit hard by industrial pollution**.' (một khu thu nhập thấp bị ảnh hưởng nặng nề bởi ô nhiễm công nghiệp)."
    },
    {
      "id": 46,
      "question": "How many hours can Mr. Miller commit monthly?",
      "options": [
        "5 hours",
        "10 hours",
        "20 hours",
        "Full-time"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) 10 hours**. John Miller cam kết thời gian: 'I can **commit 10 hours monthly**.'"
    },
    {
      "id": 47,
      "question": "When is Mr. Miller available?",
      "options": [
        "Weekdays",
        "Weekends",
        "Evenings only",
        "Not available"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Weekends**. Anh ấy nói: 'I'm **available weekends**'."
    },
    {
      "id": 48,
      "question": "What else interests Mr. Miller?",
      "options": [
        "Donating money",
        "Youth programs",
        "Legal training only",
        "No other"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Youth programs**. Sau khi đề cập đến hội thảo, anh ấy nói thêm: 'Also, interested in **youth programs** for my after-school group.'."
    },
    {
      "id": 49,
      "question": "What has EcoJustice achieved?",
      "options": [
        "No wins",
        "Policy wins in 5 cities",
        "Closed factories",
        "Reduced donations"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Policy wins in 5 cities**. Phần 'Our Impact' trong quảng cáo liệt kê thành tích số 1 là: 'Successfully lobbied for clean air standards in **5 cities**' (Vận động thành công tiêu chuẩn không khí sạch ở 5 thành phố)."
    },
    {
      "id": 50,
      "question": "How to get involved per the ad?",
      "options": [
        "Email only",
        "Donate or volunteer at ecojustice.org",
        "In person",
        "No way"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Donate or volunteer at ecojustice.org**. Phần cuối của quảng cáo là lời kêu gọi hành động: 'Donate or **volunteer at ecojustice.org**.' (Quyên góp hoặc tình nguyện tại ecojustice.org)."
    }
  ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn về tổ chức sự kiện môi trường xã hội, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Tom (10:05): Hey Doctor Chen, ready for the eco-forum setup? Need more banners?
  Doctor Chen (10:10): Yes, Tom. Focus on diversity themes—equity in sustainability.
  Tom (10:15): Got it. Also, youth group wants a slot for their anti-plastic talk.
  Doctor Chen (10:20): Approve. Schedule after lunch. Promote on community board.
  Tom (15:30): Setup done. Attendance looks high—over 100 RSVPs!
  Doctor Chen (15:35): Excellent. Let's ensure inclusive discussions for all voices.`,
      "questions": [
    {
      "id": 51,
      "question": "What is the event?",
      "options": [
        "Party",
        "Eco-forum",
        "Wedding",
        "No event"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Eco-forum**. Tom hỏi: 'ready for the **eco-forum setup**?' (sẵn sàng cho việc thiết lập diễn đàn sinh thái chưa?). Đây là từ khóa xác định loại sự kiện."
    },
    {
      "id": 52,
      "question": "What themes to focus on?",
      "options": [
        "Profit",
        "Diversity—equity in sustainability",
        "Sports",
        "Food"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Diversity—equity in sustainability**. Doctor Chen hướng dẫn: 'Focus on **diversity themes—equity in sustainability**.' (Tập trung vào chủ đề đa dạng—công bằng trong bền vững). Đây là chỉ đạo về nội dung."
    },
    {
      "id": 53,
      "question": "What does the youth group want?",
      "options": [
        "Banners",
        "A slot for anti-plastic talk",
        "Lunch",
        "No slot"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) A slot for anti-plastic talk**. Tom thông báo: 'youth group wants a **slot for their anti-plastic talk**.' ('slot' ở đây là 'khe thời gian')."
    },
    {
      "id": 54,
      "question": "When to schedule the talk?",
      "options": [
        "Morning",
        "After lunch",
        "Evening",
        "No schedule"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) After lunch**. Doctor Chen trả lời yêu cầu của Tom: 'Schedule **after lunch**.' (Lập lịch sau bữa trưa)."
    },
    {
      "id": 55,
      "question": "Where to promote?",
      "options": [
        "TV",
        "Community board",
        "Radio",
        "No promotion"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Community board**. Doctor Chen chỉ thị: 'Promote on **community board**.' (Quảng bá trên bảng cộng đồng)."
    },
    {
      "id": 56,
      "question": "What is done by 15:30?",
      "options": [
        "Nothing",
        "Setup done",
        "Talk started",
        "Banners removed"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Setup done**. Tom gửi cập nhật vào 15:30: '**Setup done**.' (Thiết lập đã hoàn tất)."
    },
    {
      "id": 57,
      "question": "How many RSVPs?",
      "options": [
        "Under 50",
        "Over 100",
        "Exactly 100",
        "None"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Over 100**. Tom báo cáo: 'Attendance looks high—**over 100 RSVPs**!' (Hơn 100 người đã đăng ký xác nhận tham dự)."
    },
    {
      "id": 58,
      "question": "What to ensure in discussions?",
      "options": [
        "Exclusion",
        "Inclusive for all voices",
        "Short talks",
        "No discussions"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Inclusive for all voices**. Doctor Chen dặn dò: 'Let's ensure **inclusive discussions for all voices**.' (Hãy đảm bảo các cuộc thảo luận bao quát cho mọi tiếng nói). Đây là mục tiêu quan trọng về mặt công bằng xã hội."
    },
    {
      "id": 59,
      "question": "What is the response to setup?",
      "options": [
        "Poor",
        "Excellent",
        "Delayed",
        "Canceled"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Excellent**. Khi Tom báo cáo setup đã xong và có nhiều RSVP, Doctor Chen phản hồi: '**Excellent**.' (Tuyệt vời), thể hiện sự hài lòng với tiến độ."
    },
    {
      "id": 60,
      "question": "What does the youth talk address?",
      "options": [
        "Pro-plastic",
        "Anti-plastic",
        "Banners",
        "Lunch"
      ],
      "correct": 1,
      "explanation": "Đáp án đúng là **(B) Anti-plastic**. Tom đề cập đến: 'slot for their **anti-plastic talk**.' (khe thời gian cho bài nói chống nhựa)."
    }
  ]
    }
  }
};
</file>

<file path="src/data/exams/exam5.js">
export const EXAM5_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 5 (Công Nghệ & Kinh Doanh)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Tập trung vào chủ đề Công Nghệ & Kinh Doanh. Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Anna và Ben về công ty công nghệ. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Anna: Ben, have you heard about the new AI project our company is launching next quarter?\nBen: Yes, I attended the presentation yesterday. The development team has been working on it for over six months. They're using machine learning algorithms to optimize our customer service operations.\nAnna: That's impressive! I heard we're investing nearly $2 million in this initiative. The CEO believes it will increase our efficiency by at least 40%.\nBen: Absolutely. But we'll need extensive training for all staff members. The HR department is already preparing a comprehensive program that will start next month.\nAnna: Speaking of training, I'm concerned about the cybersecurity aspects. With all this new technology, we need to ensure our data protection measures are robust.\nBen: Good point. The IT security team has assured management that they've implemented multiple layers of protection, including advanced encryption and regular security audits.",
     questions: [
        { id: 1, options: ["For one year", "For over six months", "For three months", "For two years"], correct: 1, explanation: "Ben nói rõ luôn: 'đội phát triển đã làm hơn 6 tháng rồi' → chọn ngay B nha các em, đừng lạc sang năm!" },
        { id: 2, options: ["$3 million", "$2 million", "$1 million", "$4 million"], correct: 1, explanation: "Anna nói 'nearly $2 million' = gần 2 triệu đô → chính xác là B, đừng chọn 3 hay 4 triệu nhé!" },
        { id: 3, options: ["30%", "20%", "40%", "50%"], correct: 2, explanation: "Anna nói 'tăng hiệu suất ít nhất 40%' → C là đáp án ngon lành luôn!" },
        { id: 4, options: ["In three months", "Next month", "Next week", "Next year"], correct: 1, explanation: "Ben nói chương trình đào tạo 'sẽ bắt đầu tháng tới' → B chính xác 100%!" },
        { id: 5, options: ["Budget constraints", "Cybersecurity aspects", "Customer satisfaction", "Staff recruitment"], correct: 1, explanation: "Anna lo lắng về 'an ninh mạng' = cybersecurity → B là đáp án duy nhất đúng!" }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài trong cuộc họp kinh doanh. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening", 
      script: "Manager: Good morning team. Let's start with the quarterly financial report. Sarah, could you begin?\nSarah: Thank you, Tom. Our revenue increased by 15% this quarter, primarily due to successful product launches in the Asian market. However, operating costs rose by 8% because of higher raw material prices.\nTom: Interesting. Mike, what's the marketing team's analysis of these numbers?\nMike: We've seen excellent response to our digital campaigns. Social media engagement is up 60%, and website traffic has grown by 45%. The new influencer partnerships are performing particularly well.\nSarah: That's encouraging. On the operational side, we've reduced production time by 20% through automation. But we're facing challenges with supply chain delays from our European suppliers.\nTom: Understood. Lisa, any updates from the R&D department?\nLisa: Yes, we're making good progress on the new eco-friendly product line. We expect to complete testing by the end of next month and begin production in Q3.\nTom: Excellent work everyone. Let's focus on addressing the supply chain issues in our next meeting.",
      questions: [
       { 
  id: 6,
  question: "What was the revenue increase this quarter?",
  options: ["20%", "15%", "8%", "45%"],
  correct: 1,
  explanation: "Sarah nói rất rõ: 'Our revenue increased by 15% this quarter.' → Con số 15% được nhắc trực tiếp, nên B là đúng."
},
{
  id: 7,
  question: "Why did operating costs increase?",
  options: ["Increased staff salaries", "New equipment purchases", "Higher raw material prices", "Higher marketing expenses"],
  correct: 2,
  explanation: "Sarah giải thích chi phí vận hành tăng vì 'higher raw material prices' (giá nguyên liệu thô tăng). Đây là lý do duy nhất được nêu rõ trong đoạn nghe."
},
{
  id: 8,
  question: "How much has social media engagement increased?",
  options: ["75%", "60%", "45%", "90%"],
  correct: 1,
  explanation: "Mike nói: “Social media engagement is up 60%.” Đây là số liệu cụ thể duy nhất được nhắc tới → chọn 60%."
},
{
  id: 9,
  question: "What operational improvement was mentioned?",
  options: ["Improved product quality", "Increased customer satisfaction", "Reduced production time by 20%", "Reduced staff turnover"],
  correct: 2,
  explanation: "Sarah cho biết họ đã 'reduced production time by 20%'. Đây là cải thiện về vận hành (operations) nên C là đáp án chính xác."
},
{
  id: 10,
  question: "When does R&D expect to begin production of the new product line?",
  options: ["Q2", "Next month", "Q3", "Next year"],
  correct: 2,
  explanation: "Lisa nói họ sẽ hoàn tất thử nghiệm vào cuối tháng tới và 'begin production in Q3'. Vậy thời điểm bắt đầu sản xuất là Quý 3 → chọn C."
}
]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một bài thuyết trình về công nghệ blockchain. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Professor: Good afternoon, students. Today we're discussing blockchain technology and its business applications. Blockchain is essentially a decentralized digital ledger that records transactions across multiple computers. This technology offers three key benefits: enhanced security through cryptography, increased transparency as all participants can view transactions, and reduced costs by eliminating intermediaries. Major corporations like IBM and Walmart are already using blockchain for supply chain management. For instance, Walmart reduced food traceability time from seven days to just 2.2 seconds using blockchain. However, challenges remain, including scalability issues and regulatory uncertainty. As future business leaders, understanding this technology will be crucial for your careers. The potential applications extend beyond cryptocurrency to areas like smart contracts, voting systems, and digital identity verification.",
       questions: [
        {
          id: 11,
          question: "What is blockchain described as?",
          options: [
            "A type of cryptocurrency",
            "A centralized database",
            "A decentralized digital ledger",
            "A financial intermediary"
          ],
          correct: 2,
          explanation: "Giáo sư nói: 'Blockchain is essentially a decentralized digital ledger' (Blockchain về cơ bản là một sổ cái kỹ thuật số phi tập trung). Đây là định nghĩa chính xác được giáo sư đưa ra ngay từ đầu bài thuyết trình. Một blockchain hoạt động độc lập, không cần sự kiểm soát của một tổ chức tập trung. Nó ghi lại các giao dịch trên nhiều máy tính khác nhau, tạo ra tính minh bạch và bảo mật cao."
        },
        {
          id: 12,
          question: "How many key benefits of blockchain are mentioned?",
          options: [
            "Four",
            "Three",
            "Two",
            "Five"
          ],
          correct: 1,
          explanation: "Giáo sư rõ ràng nói: 'This technology offers three key benefits' (Công nghệ này mang lại ba lợi ích chính). Ba lợi ích được liệt kê là: (1) Enhanced security through cryptography - bảo mật nâng cao thông qua mã hóa, (2) Increased transparency as all participants can view transactions - tính minh bạch tăng lên khi tất cả người tham gia có thể xem các giao dịch, và (3) Reduced costs by eliminating intermediaries - giảm chi phí bằng cách loại bỏ các trung gian."
        },
        {
          id: 13,
          question: "Which company was mentioned as using blockchain for supply chain?",
          options: [
            "Google",
            "Microsoft",
            "IBM",
            "Amazon"
          ],
          correct: 2,
          explanation: "Giáo sư nói: 'Major corporations like IBM and Walmart are already using blockchain for supply chain management' (Các tập đoàn lớn như IBM và Walmart đang sử dụng blockchain cho quản lý chuỗi cung ứng). Cả IBM và Walmart đều được đề cập, nhưng trong các lựa chọn, chỉ có IBM xuất hiện. Điều này cho thấy các công ty lớn đang áp dụng blockchain để cải thiện hiệu quả và độ tin cậy trong hoạt động chuỗi cung ứng của họ."
        },
        {
          id: 14,
          question: "How much did Walmart reduce food traceability time?",
          options: [
            "From 3 days to 10 minutes",
            "From 7 days to 2.2 seconds",
            "From 5 days to 1 hour",
            "From 10 days to 5 seconds"
          ],
          correct: 1,
          explanation: "Giáo sư đưa ra con số cụ thể: 'Walmart reduced food traceability time from seven days to just 2.2 seconds using blockchain' (Walmart giảm thời gian truy xuất nguồn gốc thực phẩm từ bảy ngày xuống chỉ 2.2 giây bằng blockchain). Đây là một ví dụ thực tế chứng minh sức mạnh của blockchain - quá trình truy xuất nguồn gốc thực phẩm được tăng tốc độ một cách đáng kể, từ một tuần còn lại chỉ 2.2 giây, điều này rất quan trọng đối với an toàn thực phẩm."
        },
        {
          id: 15,
          question: "What challenge was NOT mentioned about blockchain?",
          options: [
            "Technical complexity",
            "Regulatory uncertainty",
            "Scalability issues",
            "High energy consumption"
          ],
          correct: 0,
          explanation: "Giáo sư chỉ đề cập hai thách thức: 'However, challenges remain, including scalability issues and regulatory uncertainty' (Tuy nhiên, những thách thức vẫn còn tồn tại, bao gồm vấn đề khả năng mở rộng và sự không chắc chắn về quy định). Các thách thức được nhắc đến là scalability issues (vấn đề khả năng mở rộng) và regulatory uncertainty (sự không chắc chắn về quy định). Giáo sư không đề cập đến 'technical complexity' (độ phức tạp kỹ thuật) hay 'high energy consumption' (tiêu thụ năng lượng cao). Đáp án A - Technical complexity không được nhắc đến trong bài thuyết trình."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một cuộc phỏng vấn kinh doanh. Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Interviewer 1: Welcome to our final round interview, Emma. We're impressed with your background in digital marketing.\nEmma: Thank you, I'm excited to be here and learn more about the Growth Marketing Manager position.\nInterviewer 2: Let's start with your experience. Could you tell us about a successful campaign you led?\nEmma: Certainly. At my previous company, I developed a comprehensive social media strategy that increased our online engagement by 150% over six months. We focused on creating valuable content and building authentic relationships with our audience.\nInterviewer 1: That's impressive. How do you stay updated with the latest marketing trends?\nEmma: I regularly attend industry conferences, participate in webinars, and I'm part of several professional marketing groups. I also believe in continuous learning through online courses.\nInterviewer 2: What would be your approach to developing our brand presence in new international markets?\nEmma: I would begin with thorough market research to understand cultural nuances, then develop localized content strategies while maintaining our core brand identity. Building partnerships with local influencers would also be key.\nInterviewer 1: Excellent. One final question - how do you measure campaign success beyond basic metrics?\nEmma: Beyond clicks and conversions, I look at customer lifetime value, brand sentiment analysis, and the quality of engagement. Sustainable growth requires understanding the long-term impact on brand perception.",
      questions: [
        {
          id: 16,
          question: "What position is Emma applying for?",
          options: [
            "Marketing Director",
            "Social Media Manager",
            "Growth Marketing Manager",
            "Digital Marketing Specialist"
          ],
          correct: 2,
          explanation: "Emma rõ ràng nói: 'I'm excited to be here and learn more about the Growth Marketing Manager position' (Tôi rất vui mừng ở đây và muốn tìm hiểu thêm về vị trí Quản lý Marketing Tăng trưởng). Đây là lần đầu tiên vị trí được nhắc đến trong cuộc phỏng vấn, cho thấy Emma đang phỏng vấn cho một vị trí tập trung vào chiến lược tăng trưởng kinh doanh. Vị trí này khác với các chức vụ khác như Marketing Director (Giám đốc Marketing) hay Social Media Manager (Quản lý Phương tiện Xã hội)."
        },
        {
          id: 17,
          question: "How much did Emma increase online engagement in her previous campaign?",
          options: [
            "175%",
            "125%",
            "150%",
            "100%"
          ],
          correct: 2,
          explanation: "Emma nói một cách rõ ràng: 'I developed a comprehensive social media strategy that increased our online engagement by 150% over six months' (Tôi đã phát triển một chiến lược phương tiện xã hội toàn diện tăng tương tác trực tuyến 150% trong sáu tháng). Con số 150% cho thấy kết quả rất ấn tượng từ chiến dịch của cô ấy - tương tác tăng gấp 2.5 lần. Đây là một thành tích đáng chú ý trong lĩnh vực tiếp thị kỹ thuật số."
        },
        {
          id: 18,
          question: "How does Emma stay updated with marketing trends?",
          options: [
            "By following competitors",
            "Only through online courses",
            "Through conferences, webinars, and professional groups",
            "By reading books"
          ],
          correct: 2,
          explanation: "Emma giải thích chi tiết về phương pháp học tập của cô ấy: 'I regularly attend industry conferences, participate in webinars, and I'm part of several professional marketing groups. I also believe in continuous learning through online courses' (Tôi thường xuyên tham dự hội nghị ngành, tham gia hội thảo trực tuyến, và là thành viên của nhiều nhóm marketing chuyên nghiệp. Tôi cũng tin vào học tập liên tục thông qua các khóa học trực tuyến). Emma sử dụng một cách tiếp cận đa chiều để cập nhật kiến thức, bao gồm các sự kiện trực tiếp, hội thảo trực tuyến, cộng đồng chuyên nghiệp, và khóa học online."
        },
        {
          id: 19,
          question: "What would be Emma's first step in international market expansion?",
          options: [
            "Setting up local offices",
            "Developing advertising campaigns",
            "Conducting thorough market research",
            "Hiring local staff"
          ],
          correct: 2,
          explanation: "Emma trả lời: 'I would begin with thorough market research to understand cultural nuances, then develop localized content strategies while maintaining our core brand identity' (Tôi sẽ bắt đầu với nghiên cứu thị trường kỹ lưỡng để hiểu các sắc thái văn hóa, sau đó phát triển các chiến lược nội dung được bản địa hóa trong khi duy trì nhận dạng thương hiệu cốt lõi). Cô ấy làm rõ rằng bước đầu tiên là nghiên cứu, chứ không phải thiết lập văn phòng hoặc tuyển dụng nhân viên. Điều này cho thấy một cách tiếp cận chiến lược có tính kế hoạch tốt."
        },
        {
          id: 20,
          question: "What advanced metric does Emma consider for campaign success?",
          options: [
            "Email open rates",
            "Website traffic volume",
            "Customer lifetime value",
            "Number of social media followers"
          ],
          correct: 2,
          explanation: "Emma nói: 'Beyond clicks and conversions, I look at customer lifetime value, brand sentiment analysis, and the quality of engagement. Sustainable growth requires understanding the long-term impact on brand perception' (Ngoài số nhấp chuột và chuyển đổi, tôi xem xét giá trị trọn đời của khách hàng, phân tích cảm tính thương hiệu, và chất lượng của tương tác. Tăng trưởng bền vững yêu cầu hiểu biết về tác động dài hạn đối với nhận thức thương hiệu). Emma không chỉ nhìn vào các số liệu cơ bản như lượt nhấp và chuyển đổi, mà còn xem xét giá trị trọn đời của khách hàng (CLV), đây là một chỉ số tiên tiến cho thấy sự hiểu biết sâu sắc về marketing hiệu suất cao."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu về chủ đề công nghệ và kinh doanh.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The new software update significantly ________ the company's data processing capabilities.",
          options: ["enhancement", "enhances", "enhance", "enhancing"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'enhances' vì chủ ngữ 'update' số ít cần động từ chia ngôi thứ ba số ít. Kiến thức ngữ pháp: Chủ ngữ số ít (software update) + động từ thêm 's'."
        },
        {
          id: 22,
          question: "Despite the economic challenges, the startup managed to ________ its quarterly targets.",
          options: ["exceeding", "exceed", "exceeded", "exceeds"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'exceed' vì đây là động từ nguyên thể sau 'managed to'. Kiến thức ngữ pháp: Cấu trúc 'manage to + V nguyên thể'."
        },
        {
          id: 23,
          question: "The marketing team is developing a new strategy to ________ younger demographics.",
          options: ["targeted", "targets", "target", "targeting"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'target' vì đây là động từ nguyên thể sau 'to'. Kiến thức ngữ pháp: 'to + V nguyên thể' để chỉ mục đích."
        },
        {
          id: 24,
          question: "Our company's ________ to digital transformation has been remarkably successful.",
          options: ["adapts", "adaptive", "adaptation", "adapt"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'adaptation' vì cần danh từ sau tính từ sở hữu 'company's'. Kiến thức từ vựng: 'adaptation' (sự thích ứng) là danh từ phù hợp ngữ cảnh."
        },
        {
          id: 25,
          question: "The CEO emphasized the ________ of innovation in maintaining competitive advantage.",
          options: ["importantly", "importance", "important", "importing"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'importance' vì cần danh từ sau mạo từ 'the'. Kiến thức ngữ pháp: 'the + danh từ + of'."
        },
        {
          id: 26,
          question: "All employees are required to ________ the new cybersecurity protocols immediately.",
          options: ["implementation", "implements", "implementing", "implement"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'implement' vì đây là động từ nguyên thể sau 'to'. Kiến thức ngữ pháp: 'are required to + V nguyên thể'."
        },
        {
          id: 27,
          question: "The research and development department ________ made significant progress this year.",
          options: ["to have", "has", "having", "have"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'has' vì 'department' là chủ ngữ số ít. Kiến thức ngữ pháp: Danh từ tập thể xem như số ít cần động từ số ít."
        },
        {
          id: 28,
          question: "We need to analyze the data more ________ before making final decisions.",
          options: ["carefulness", "careful", "caring", "carefully"],
          correct: 3,
          explanation: "Đáp án đúng là (D) 'carefully' vì cần trạng từ bổ nghĩa cho động từ 'analyze'. Kiến thức ngữ pháp: Trạng từ bổ nghĩa cho động từ."
        },
        {
          id: 29,
          question: "The company's expansion into Asian markets ________ completed ahead of schedule.",
          options: ["been", "were", "was", "being"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'was' vì chủ ngữ 'expansion' số ít trong câu bị động. Kiến thức ngữ pháp: Chủ ngữ số ít + was + V3."
        },
        {
          id: 30,
          question: "Effective communication is ________ for successful project management.",
          options: ["essence", "essentially", "essential", "essentialize"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'essential' vì cần tính từ sau 'is'. Kiến thức từ vựng: 'essential' (thiết yếu) là tính từ phù hợp ngữ cảnh."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Business Email)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email về chiến lược kinh doanh.",
      type: "reading",
      text: `To: All Department Heads
From: David Chen, CEO
Subject: Q4 Strategic Initiatives and Digital Transformation Update

Dear Team,

I am writing to provide an update on our strategic initiatives for the fourth quarter and outline our progress in digital transformation. As we approach the final quarter of the year, it is crucial that we maintain our momentum and (31) focused on our key objectives.

Our digital transformation efforts have yielded significant results. We have successfully (32) our customer relationship management system, which has improved our response times by 40%. The new AI-powered analytics platform is providing valuable insights that help us make data-driven decisions more (33).

However, we must remain vigilant about cybersecurity. The IT department will be conducting mandatory security training for all employees next month. Please ensure your team members (34) this training seriously, as it is essential for protecting our company's sensitive information.

Looking ahead to Q4, our primary goals include:
- Increasing market share in the Southeast Asian region by 15%
- Launching three new eco-friendly product lines
- Improving customer satisfaction scores by 20 points

To achieve these targets, we need full cooperation and innovative thinking from every department. I am confident that with our team's expertise and dedication, we will (35) these ambitious goals.

Please schedule a meeting with your teams to discuss how these objectives align with your departmental plans. I look forward to hearing your innovative ideas and strategies.

Best regards,

David Chen
CEO`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "It is crucial that we maintain our momentum and (31) focused on our key objectives.",
          options: ["remained", "remain", "remaining", "remains"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'remain' vì đây là động từ nguyên thể trong cấu trúc song song với 'maintain'. Kiến thức ngữ pháp: Cấu trúc song song 'maintain... and remain...'."
        },
        {
          id: 32,
          type: "fill", 
          question: "(32) - Điền từ thích hợp",
          context: "We have successfully (32) our customer relationship management system...",
          options: ["implementing", "implements", "implemented", "implement"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'implemented' vì cần quá khứ phân từ trong thì hiện tại hoàn thành. Kiến thức ngữ pháp: 'have + V3' trong thì hiện tại hoàn thành."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp", 
          context: "...which helps us make data-driven decisions more (33).",
          options: ["efficiencies", "efficiently", "efficient", "efficiency"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'efficiently' vì cần trạng từ bổ nghĩa cho cụm động từ 'make decisions'. Kiến thức ngữ pháp: Trạng từ bổ nghĩa cho động từ."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "Please ensure your team members (34) this training seriously...",
          options: ["took", "takes", "take", "taking"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'take' vì chủ ngữ 'members' số nhiều cần động từ nguyên thể trong câu mệnh lệnh gián tiếp. Kiến thức ngữ pháp: 'ensure + (that) + S + V' với S số nhiều."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "I am confident that... we will (35) these ambitious goals.",
          options: ["achieving", "achieves", "achieve", "achieved"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'achieve' vì đây là động từ nguyên thể sau 'will'. Kiến thức ngữ pháp: 'will + V nguyên thể'."
        },
        {
          id: 36,
          type: "comprehension",
          question: "(36) - What is the main purpose of this email?",
          options: ["To introduce new team members", "To provide updates on strategic initiatives", "To announce employee layoffs", "To complain about poor performance"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email bắt đầu với 'provide an update on our strategic initiatives'. Kiến thức đọc hiểu: Xác định mục đích chính từ câu mở đầu."
        },
        {
          id: 37,
          type: "comprehension", 
          question: "(37) - How much has response time improved with the new system?",
          options: ["30%", "50%", "40%", "20%"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì email nói 'improved our response times by 40%'. Kiến thức đọc hiểu: Tìm thông tin số liệu cụ thể trong văn bản."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What training will be conducted next month?",
          options: ["Leadership development training", "Sales techniques training", "Security training", "Customer service training"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì email nói 'The IT department will be conducting mandatory security training'. Kiến thức đọc hiểu: Xác định loại hình đào tạo từ ngữ cảnh."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - What is the target for market share increase in Southeast Asia?",
          options: ["20%", "25%", "15%", "10%"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì email nói 'Increasing market share... by 15%'. Kiến thức đọc hiểu: Tìm thông tin số liệu trong mục tiêu."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - Who is the sender of this email?",
          options: ["Marketing Head", "IT Director", "HR Manager", "CEO"],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì email từ 'David Chen, CEO'. Kiến thức đọc hiểu: Xác định người gửi từ phần thông tin."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Business Report + Chart Analysis)",
      description: "10 câu hỏi - Đọc báo cáo kinh doanh và phân tích biểu đồ, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading", 
      text: `**Quarterly Business Performance Report - TechSolutions Inc.**

**Executive Summary**
TechSolutions Inc. demonstrated strong performance in Q3 2024, with total revenue reaching $45 million, representing a 22% increase compared to the same period last year. The company's strategic focus on cloud computing services and AI solutions has driven this growth, accounting for 65% of total revenue.

**Key Performance Indicators**
- Revenue: $45 million (22% increase YoY)
- Net Profit: $8.5 million (18% increase YoY) 
- Customer Acquisition: 15,000 new clients
- Customer Retention Rate: 92%
- Employee Satisfaction: 88%

**Department Performance**
The Research & Development department successfully launched two new AI products, contributing significantly to revenue growth. The Marketing department expanded our presence in European markets, resulting in a 35% increase in international sales. Operations improved efficiency by implementing automation, reducing costs by 12%.

**Challenges and Opportunities**
While supply chain disruptions affected hardware delivery times, our software services continued to perform exceptionally well. The growing demand for cybersecurity solutions presents a significant opportunity for Q4.

---

**Revenue Distribution by Product Category - Q3 2024**

Cloud Services: $18 million (40%)
AI Solutions: $11.25 million (25%)
Cybersecurity: $9 million (20%)
Hardware: $4.5 million (10%)
Consulting: $2.25 million (5%)

Total: $45 million (100%)`,
      questions: [
        {
          id: 41,
          question: "What was TechSolutions Inc.'s total revenue in Q3 2024?",
          options: ["$40 million", "$50 million", "$45 million", "$35 million"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nêu 'total revenue reaching $45 million'. Kiến thức đọc hiểu: Tìm thông tin số liệu chính xác từ báo cáo."
        },
        {
          id: 42,
          question: "Which product category generated the highest revenue?",
          options: ["Cybersecurity", "AI Solutions", "Cloud Services", "Hardware"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì biểu đồ cho thấy Cloud Services chiếm 40% ($18 million). Kiến thức đọc hiểu: So sánh các phần trăm trong biểu đồ phân phối."
        },
        {
          id: 43,
          question: "What percentage of total revenue came from AI solutions and cloud services combined?",
          options: ["70%", "60%", "65%", "50%"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Cloud Services (40%) + AI Solutions (25%) = 65%. Kiến thức tính toán: Cộng các phần trăm từ biểu đồ."
        },
        {
          id: 44,
          question: "What was the customer retention rate?",
          options: ["90%", "85%", "92%", "88%"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nêu 'Customer Retention Rate: 92%'. Kiến thức đọc hiểu: Tìm thông tin số liệu từ chỉ số hiệu suất."
        },
        {
          id: 45,
          question: "Which department was mentioned for expanding European market presence?",
          options: ["Operations", "R&D", "Marketing", "Sales"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nói 'The Marketing department expanded our presence in European markets'. Kiến thức đọc hiểu: Xác định bộ phận từ mô tả thành tích."
        },
        {
          id: 46,
          question: "How much did operations reduce costs through automation?",
          options: ["10%", "15%", "12%", "8%"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nói 'reducing costs by 12%'. Kiến thức đọc hiểu: Tìm thông tin số liệu cụ thể về cải tiến."
        },
        {
          id: 47,
          question: "What challenge did the company face regarding hardware?",
          options: ["Poor quality", "Low demand", "Supply chain disruptions", "High production costs"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nói 'supply chain disruptions affected hardware delivery times'. Kiến thức đọc hiểu: Xác định thách thức từ phần vấn đề."
        },
        {
          id: 48,
          question: "What opportunity is mentioned for Q4?",
          options: ["Developing mobile applications", "Acquiring competitors", "Growing demand for cybersecurity", "Expanding to Asian markets"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nói 'The growing demand for cybersecurity solutions presents a significant opportunity'. Kiến thức đọc hiểu: Xác định cơ hội từ phần kết luận."
        },
        {
          id: 49,
          question: "How many new clients were acquired in Q3?",
          options: ["18,000", "12,000", "15,000", "20,000"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nêu 'Customer Acquisition: 15,000 new clients'. Kiến thức đọc hiểu: Tìm thông tin số liệu từ chỉ số hiệu suất."
        },
        {
          id: 50,
          question: "What was the net profit increase compared to last year?",
          options: ["20%", "22%", "18%", "15%"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì báo cáo nêu 'Net Profit: $8.5 million (18% increase YoY)'. Kiến thức đọc hiểu: Tìm thông tin phần trăm tăng trưởng."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Mr. Smith (11:59): Our software development meeting has been rescheduled to 2 PM tomorrow due to the client's request.\nMr. Johnson (12:01): Understood. Should I inform the QA team about this change?\nMr. Smith (12:03): Yes, please. Also, remind them about the deadline for the beta testing report.\nMr. Johnson (12:05): Will do. By the way, the new project manager from the Berlin office will be joining us virtually.\nMr. Smith (12:07): Excellent. Make sure the video conferencing equipment is properly set up in Conference Room B.\nMr. Johnson (12:10): I've already checked it this morning. Everything is working perfectly.\nMr. Smith (12:12): Great. Don't forget to share the updated agenda with all team members by end of day.\nMr. Johnson (12:15): I'll send it out right after I finish reviewing the budget projections.`,
      questions: [
        {
          id: 51,
          question: "Why was the meeting rescheduled?",
          options: [
            "Due to technical issues",
            "Because of the client's request",
            "Due to room unavailability",
            "Because team members were sick"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Mr. Smith nói: 'due to the client's request' (do yêu cầu của khách hàng). Kiến thức đọc hiểu: Xác định lý do từ thông tin trực tiếp trong tin nhắn."
        },
        {
          id: 52,
          question: "What does Mr. Smith ask Mr. Johnson to remind the QA team about?",
          options: [
            "The video conferencing setup",
            "The new project manager",
            "The deadline for the beta testing report",
            "The budget projections"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Mr. Smith nói: 'remind them about the deadline for the beta testing report' (nhắc họ về hạn chót cho báo cáo kiểm thử beta). Kiến thức đọc hiểu: Tìm thông tin cụ thể về nhiệm vụ được giao."
        },
        {
          id: 53,
          question: "Where is the new project manager from?",
          options: [
            "Tokyo office",
            "London office",
            "Berlin office",
            "New York office"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Mr. Johnson nói: 'the new project manager from the Berlin office' (quản lý dự án mới từ văn phòng Berlin). Kiến thức đọc hiểu: Xác định địa điểm từ thông tin chi tiết."
        },
        {
          id: 54,
          question: "Which conference room will be used for the meeting?",
          options: [
            "Conference Room A",
            "Main Conference Hall",
            "Conference Room C",
            "Conference Room B"
          ],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì Mr. Smith nói: 'video conferencing equipment is properly set up in Conference Room B' (thiết bị hội nghị truyền hình được thiết lập đúng ở Phòng họp B). Kiến thức đọc hiểu: Xác định địa điểm cụ thể từ chỉ dẫn."
        },
        {
          id: 55,
          question: "What did Mr. Johnson check this morning?",
          options: [
            "The beta testing report",
            "The meeting agenda",
            "The video conferencing equipment",
            "The budget projections"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Mr. Johnson nói: 'I've already checked it this morning. Everything is working perfectly.' (Tôi đã kiểm tra nó sáng nay. Mọi thứ đang hoạt động hoàn hảo.) - ám chỉ thiết bị hội nghị truyền hình. Kiến thức suy luận: Hiểu ngữ cảnh từ các tin nhắn trước đó."
        },
        {
          id: 56,
          question: "When should the updated agenda be shared with team members?",
          options: [
            "By lunch time",
            "Tomorrow morning",
            "By end of day",
            "Immediately"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Mr. Smith nói: 'share the updated agenda with all team members by end of day' (chia sẻ chương trình làm việc đã cập nhật với tất cả thành viên nhóm trước cuối ngày). Kiến thức đọc hiểu: Xác định thời hạn từ chỉ dẫn cụ thể."
        },
        {
          id: 57,
          question: "What is Mr. Johnson doing before sending out the agenda?",
          options: [
            "Contacting the QA team",
            "Setting up the conference room",
            "Reviewing the budget projections",
            "Preparing the beta report"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Mr. Johnson nói: 'I'll send it out right after I finish reviewing the budget projections' (Tôi sẽ gửi nó ngay sau khi tôi hoàn thành việc xem xét các dự báo ngân sách). Kiến thức đọc hiểu: Xác định hành động hiện tại từ kế hoạch công việc."
        },
        {
          id: 58,
          question: "How will the new project manager join the meeting?",
          options: [
            "By telephone",
            "Will not join",
            "In person",
            "Virtually"
          ],
          correct: 3,
          explanation: "Đáp án đúng là (D) vì Mr. Johnson nói: 'will be joining us virtually' (sẽ tham gia với chúng ta một cách ảo). Kiến thức đọc hiểu: Hiểu từ ngữ chỉ phương thức tham gia."
        },
        {
          id: 59,
          question: "What was the original time of the meeting?",
          options: [
            "11:59 AM",
            "Not mentioned in the messages",
            "12:00 PM",
            "2:00 PM"
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì tin nhắn chỉ đề cập thời gian mới (2 PM tomorrow) mà không nói thời gian gốc. Kiến thức suy luận: Nhận biết thông tin không được cung cấp."
        },
        {
          id: 60,
          question: "What is the main topic of this text conversation?",
          options: [
            "Client presentation",
            "Budget planning",
            "Meeting preparation",
            "Team building activities"
          ],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì toàn bộ cuộc trò chuyện xoay quanh việc chuẩn bị cho cuộc họp (lịch trình, thiết bị, thông báo). Kiến thức tổng hợp: Xác định chủ đề chính từ nội dung tổng thể."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam7.js">
export const EXAM7_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 7",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT.",
  parts: {
    part1: {
  title: "PART 1: Short Conversations",
  description: "Nghe đoạn hội thoại giữa Emma và Tom về kỳ nghỉ. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
  type: "listening",
  script: "Tom: Hey Emma! I heard you just got back from your trip to South Korea. How was it?\n\nEmma: It was fantastic, Tom! I stayed there for three weeks exploring Seoul and Busan. The cities were amazing and so modern. I really wanted to try all the street food, especially the famous Korean fried chicken and tteokbokki that everyone raves about. But honestly, most of it was too spicy for me. I have a pretty low tolerance for spicy food, so I ended up eating at restaurants with milder options instead. I found some great Korean barbecue places and bibimbap restaurants that weren't too hot.\n\nTom: Oh, that's too bad you couldn't enjoy all the street food. But at least you found some good alternatives! What about your visit to Thailand last summer? I remember you mentioned planning to go there for quite a while.\n\nEmma: Yes! I absolutely loved Bangkok and Chiang Mai. The culture, the temples, the people – everything was wonderful. The only regret I have is that I went during the rainy season. It rained almost every afternoon, which limited some of our outdoor activities. Many people told me that the best time to visit Thailand is during the cool season from November to February when the weather is perfect for outdoor activities and sightseeing. I wish I had known that before booking my trip.\n\nTom: That's good advice for next time. How did you find getting around in Bangkok? I've heard the traffic can be crazy and quite overwhelming for tourists.\n\nEmma: Well, I'd say it was moderately easy to navigate. The BTS and MRT systems are quite efficient once you understand the routes and figure out which lines go where. The trains are clean, air-conditioned, and relatively affordable. However, I wouldn't describe it as 'very easy' – you definitely need to plan your journeys carefully, study the map beforehand, and allow extra time during rush hours when the trains can get extremely crowded.",
  questions: [
    {
      id: 1,
      options: [
        "She found most food too spicy for her taste.",
        "She bought many Korean snacks to take home.",
        "She didn't like any Korean food at all.",
        "She ate street food every single day."
      ],
      correct: 0,
      explanation: "Emma nói: 'Most of it was too spicy for me, so I ended up eating at restaurants with milder options instead.' (Hầu hết món ăn quá cay đối với tôi, nên tôi ăn ở nhà hàng với lựa chọn nhẹ hơn)."
    },
    {
      id: 2,
      options: [
        "She stayed for two weeks.",
        "She stayed for several months.",
        "She stayed for three weeks.",
        "She stayed for one month."
      ],
      correct: 2,
      explanation: "Emma nói: 'I stayed there for three weeks exploring Seoul and Busan.' (Tôi ở đó ba tuần khám phá Seoul và Busan)."
    },
    {
      id: 3,
      options: [
        "She ate at restaurants with milder food options.",
        "She didn't eat anything because of allergies.",
        "She only ate international fast food chains.",
        "She cooked all her meals at the hotel."
      ],
      correct: 0,
      explanation: "Emma nói: 'I ended up eating at restaurants with milder options instead.' (Tôi ăn ở nhà hàng với lựa chọn nhẹ hơn thay thế)."
    },
    {
      id: 4,
      options: [
        "People recommended visiting during summer.",
        "People suggested the rainy season is best.",
        "People advised visiting during the cool season.",
        "Nobody gave her any travel advice."
      ],
      correct: 2,
      explanation: "Emma nói: 'Many people told me that the best time to visit Thailand is during the cool season from November to February.' (Nhiều người nói thời điểm tốt nhất để đi Thái Lan là mùa mát từ tháng 11 đến tháng 2)."
    },
    {
      id: 5,
      options: [
        "She found it very difficult to get around.",
        "She found it moderately easy to navigate.",
        "She found it impossible without a tour guide.",
        "She thought it was extremely easy to navigate."
      ],
      correct: 1,
      explanation: "Emma nói: 'I'd say it was moderately easy to navigate. The BTS and MRT systems are quite efficient.' (Tôi sẽ nói nó khá dễ di chuyển. Hệ thống BTS và MRT khá hiệu quả)."
    }
  ]
},

part2: {
  title: "PART 2: Longer Conversation",
  description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người tại một cuộc họp. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Narrator: At the office meeting room.\n\nManager: Good morning, everyone. Thank you for coming to our team meeting today. Let's start our discussion. But first, what would you like to drink? We have coffee, tea, or water available.\n\nAnna: I'll have a green tea, please. I need something refreshing this morning.\n\nBen: Same for me, a green tea would be perfect.\n\nLisa: I'd also like a green tea, thank you. It's my favorite.\n\nManager: Alright, that's three green teas. I'll have someone bring them in shortly.\n\nAnna: Lisa, I noticed you skipped breakfast this morning when we were in the cafeteria. Are you feeling okay? You're usually the first one to grab something to eat.\n\nLisa: I'm fine, thanks for asking. I actually had a big dinner last night with my family, and I've been trying to practice intermittent fasting lately. It's supposed to have health benefits, so I'm skipping breakfast on purpose as part of my eating schedule. I'll eat lunch later though.\n\nBen: That's interesting! Speaking of changes, did you hear that Doctor Chen left his position at the hospital? I saw him last week and he mentioned he's doing something different now. What's he up to?\n\nAnna: Oh yes, I heard about that! He still runs his private clinic on the weekends, but now he's also teaching medical students at the university downtown during the weekdays. He told me he's really enjoying mentoring the next generation of doctors. It's quite a career shift for him.\n\nLisa: That's wonderful! He was always such a great doctor and teacher. By the way, I wanted to let you know that my mother and your aunt Maria are planning to visit us for dinner this weekend. Yes, your mother's sister will be joining us too. It should be a nice family gathering.\n\nBen: Oh, that reminds me – for Michael's graduation next month, what should we give him as a gift? We need to decide soon so we have time to order or purchase it.\n\nAnna: I think cash would be practical. He can use it for whatever he needs.\n\nLisa: Maybe a nice watch? Something he can keep and remember this milestone.\n\nBen: How about a new laptop? He'll need one for graduate school.\n\nAnna: Those are all good ideas. Let's discuss it more tonight when we have more time to think about what would be most meaningful for him.",
  questions: [
    {
      id: 6,
      question: "How many people ordered green tea?",
      options: [
        "Two",
        "Four",
        "Three",
        "One"
      ],
      correct: 2,
      explanation: "Manager nói: 'That's three green teas.' (Đó là ba trà xanh.) Anna, Ben, và Lisa đều gọi green tea."
    },
    {
      id: 7,
      question: "Why didn't Lisa eat breakfast?",
      options: [
        "She's practicing intermittent fasting.",
        "She doesn't like breakfast food.",
        "She was running late for work.",
        "The cafeteria was closed."
      ],
      correct: 0,
      explanation: "Lisa nói: 'I've been trying to practice intermittent fasting lately, so I'm skipping breakfast on purpose.' (Tôi đang thực hành nhịn ăn gián đoạn gần đây, nên tôi cố tình bỏ bữa sáng)."
    },
    {
      id: 8,
      question: "What does Doctor Chen do now?",
      options: [
        "He only works at his private clinic.",
        "He teaches medical students at the university.",
        "He retired from medicine completely.",
        "He works full-time at the hospital."
      ],
      correct: 1,
      explanation: "Anna nói: 'He still runs his private clinic, but now he's also teaching medical students at the university downtown.' (Ông vẫn điều hành phòng khám riêng, nhưng giờ còn dạy sinh viên y khoa ở trường đại học)."
    },
    {
      id: 9,
      question: "Who is coming to dinner this weekend?",
      options: [
        "Ben's mother and his aunt.",
        "Lisa's sister and her mother-in-law.",
        "Lisa's mother and Ben's aunt Maria.",
        "Ben's grandmother and his cousin."
      ],
      correct: 2,
      explanation: "Lisa nói: 'My mother and your aunt Maria are planning to visit us for dinner this weekend.' (Mẹ tôi và dì Maria của anh dự định đến ăn tối cuối tuần này)."
    },
    {
      id: 10,
      question: "What will they give Michael for his graduation?",
      options: [
        "Cash",
        "They haven't decided yet.",
        "A watch",
        "A laptop"
      ],
      correct: 1,
      explanation: "Anna nói: 'Those are all good ideas. Let's discuss it more tonight.' (Đó đều là ý tưởng hay. Hãy thảo luận thêm tối nay.) Họ đã đề xuất tiền, đồng hồ và laptop nhưng chưa quyết định."
    }
  ]
},

part3: {
  title: "PART 3: Monologue",
  description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Counselor: Good afternoon, students. Welcome to this career counseling session. I'm Ms. Rodriguez, and I'll be your career advisor for this semester.\n\nLet me start by talking about our program. The quality of this program is satisfactory for most participants, though we're always striving to improve and make it even better for future students. We value your feedback and use it to enhance our services.\n\nI've just received your career assessment results from the evaluation you completed last week – and I'm pleased to say that the majority of you scored between 75-80 points out of 100, which indicates a solid understanding of your strengths, interests, and potential career paths. This is a good foundation to build upon as we move forward.\n\nHowever, I need to emphasize something very important about deadlines in this program. Please remember that if you fail to submit your career plan by the deadline your counselor has given you, you'll receive an incomplete grade for this course. This is a firm policy, and no extensions will be granted unless you provide proper documentation such as a medical certificate or official letter explaining your circumstances.\n\nLet me share an example to illustrate why we take deadlines so seriously. Jessica was an outstanding student here last semester. She participated actively in all our sessions, achieved top marks on her assessments, and showed tremendous potential. But unfortunately, she learned a difficult lesson about time management when she missed one critical deadline for her final career plan submission. Despite her excellent work throughout the semester, that incomplete grade affected her overall record. So please, I encourage all of you to take these deadlines seriously and plan your time wisely.\n\nOn a different note, I know some of you will want to grab something to eat or drink between sessions. The new cafe on campus just opened last month, and it has an excellent menu with healthy options, delicious coffee, and plenty of choices for students with dietary restrictions – whether you're vegetarian, vegan, or have food allergies. It's definitely worth checking out during your break.",
  questions: [
    { 
      id: 11, 
      question: "The program is described as __________.", 
      options: [
        "(A) perfect",
        "(B) disappointing", 
        "(C) satisfactory",
        "(D) outstanding"
      ], 
      correct: 2,
      explanation: "Counselor: 'The quality of this program is satisfactory for most participants.' (Chất lượng chương trình này thỏa đáng cho hầu hết người tham gia)."
    },
    { 
      id: 12, 
      question: "The counselor has just __________.", 
      options: [
        "(A) started a new job",
        "(B) finished teaching a class",
        "(C) received the career assessment results",
        "(D) scheduled individual meetings"
      ], 
      correct: 2,
      explanation: "Counselor: 'I've just received your career assessment results.' (Tôi vừa nhận kết quả đánh giá nghề nghiệp của các bạn)."
    },
    { 
      id: 13, 
      question: "If students miss the deadline, they __________.", 
      options: [
        "(A) can request a one-week extension",
        "(B) will receive partial credit",
        "(C) will receive an incomplete grade",
        "(D) must retake the entire course"
      ], 
      correct: 2,
      explanation: "Counselor: 'If you fail to submit your career plan by the deadline, you'll receive an incomplete grade.' (Nếu bạn không nộp kế hoạch nghề nghiệp đúng hạn, bạn sẽ nhận điểm chưa hoàn thành)."
    },
    { 
      id: 14, 
      question: "Jessica was __________.", 
      options: [
        "(A) a new transfer student",
        "(B) an outstanding student last semester",
        "(C) expelled from the program",
        "(D) a career counselor assistant"
      ], 
      correct: 1,
      explanation: "Counselor: 'Jessica was an outstanding student here last semester; she achieved top marks.' (Jessica là sinh viên xuất sắc ở đây kỳ trước; cô ấy đạt điểm cao nhất)."
    },
    { 
      id: 15, 
      question: "The new cafe on campus __________.", 
      options: [
        "(A) only serves coffee",
        "(B) is too expensive for students",
        "(C) has limited menu options",
        "(D) has excellent menu with healthy options"
      ], 
      correct: 3,
      explanation: "Counselor: 'The new cafe on campus has an excellent menu with healthy options, delicious coffee, and plenty of choices.' (Quán cà phê mới trong campus có thực đơn xuất sắc với lựa chọn lành mạnh, cà phê ngon và nhiều sự lựa chọn)."
    }
  ]
},

part4: {
  title: "PART 4: Extended Conversation",
  description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Client 1: Hello, I'd like to return these headphones, please. They were a gift from my colleague for my work anniversary last month.\n\nSales Associate: Certainly, I'd be happy to help you with that. When were they purchased exactly?\n\nClient 1: About three weeks ago, I believe. Maybe around the middle of last month.\n\nSales Associate: I see. Is there something wrong with the product? Are they defective or not working properly?\n\nClient 1: No, they work fine actually. The sound quality is good and there are no technical issues. They're just not the style I prefer. I usually like over-ear headphones, but these are in-ear ones. Unfortunately, I don't have the receipt with me – my colleague probably threw it away after wrapping them as a gift. However, all the original packaging and tags are intact. You can see the box is unopened and all the accessories are still sealed.\n\nSales Associate: I understand your situation, and I appreciate you bringing everything back in good condition. However, our store policy requires a receipt for cash refunds. Without the original receipt, I'm unable to process a full monetary return to your credit card or give you cash back. The policy is quite strict about this.\n\nClient 1: But look, everything is here! The box is perfect, the warranty card is included, even the price tag from your store is still attached! Doesn't that prove I bought it here?\n\nSales Associate: I completely understand your frustration, and I can see that you've taken good care of everything. However, the packaging and tags alone aren't sufficient proof of purchase according to our system. I apologize for the inconvenience. To help resolve this situation and find a solution that works for you, I can offer you a store credit for the full amount instead of a cash refund. That way, you can use it to purchase something else you'd prefer – perhaps those over-ear headphones you mentioned. Alternatively, you could check with your colleague to see if they still have the credit card statement showing the purchase, and then we could process a proper refund.",
  questions: [
    { 
      id: 16, 
      question: "The headphones were __________.", 
      options: [
        "(A) a wedding gift",
        "(B) purchased by the customer himself",
        "(C) a work anniversary gift",
        "(D) bought during a sale"
      ], 
      correct: 2,
      explanation: "Client 1: 'They were a gift from my colleague for my work anniversary.' (Chúng là quà từ đồng nghiệp cho kỷ niệm công tác của tôi)."
    },
    { 
      id: 17, 
      question: "The headphones were purchased __________.", 
      options: [
        "(A) yesterday",
        "(B) one month ago",
        "(C) about three weeks ago",
        "(D) six months ago"
      ], 
      correct: 2,
      explanation: "Client 1: 'About three weeks ago, I believe.' (Khoảng ba tuần trước, tôi nghĩ vậy)."
    },
    { 
      id: 18, 
      question: "When requesting a refund, the customer __________.", 
      options: [
        "(A) brought the receipt but lost the box",
        "(B) had both receipt and packaging",
        "(C) didn't have the receipt",
        "(D) refused to show any proof of purchase"
      ], 
      correct: 2,
      explanation: "Client 1: 'Unfortunately, I don't have the receipt – my colleague probably threw it away.' (Thật không may, tôi không có biên lai – đồng nghiệp tôi có thể đã vứt nó đi)."
    },
    { 
      id: 19, 
      question: "The sales associate couldn't give a cash refund because __________.", 
      options: [
        "(A) the headphones were damaged",
        "(B) the customer was rude",
        "(C) it's against her personal preference",
        "(D) store policy requires a receipt"
      ], 
      correct: 3,
      explanation: "Sales Associate: 'Our store policy requires a receipt for cash refunds. Without it, I'm unable to process a full monetary return.' (Chính sách cửa hàng yêu cầu biên lai cho hoàn tiền mặt)."
    },
    { 
      id: 20, 
      question: "The sales associate tries to __________.", 
      options: [
        "(A) refuse any solution",
        "(B) offer an alternative solution",
        "(C) argue with the customer",
        "(D) call security"
      ], 
      correct: 1,
      explanation: "Sales Associate: 'To help resolve this situation, I can offer you a store credit for the full amount instead.' (Để giúp giải quyết tình huống này, tôi có thể cấp tín dụng cửa hàng với số tiền đầy đủ thay thế)."
    }
  ]
},
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The new software system has proven to be _______ efficient than the previous version.",
          options: ["significance more", "significant most", "significantly more", "more significantly"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'significantly more' vì đây là cấu trúc so sánh hơn với trạng từ 'significantly' bổ nghĩa cho 'more efficient'. Kiến thức ngữ pháp: Trạng từ + so sánh hơn (adverb + comparative form)."
        },
        {
          id: 22,
          question: "_______ participated in the training workshop gained valuable skills for their professional development.",
          options: ["Whoever", "Those who", "Anyone", "That"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'Those who' vì đây là đại từ quan hệ số nhiều thay thế cho danh từ người trong mệnh đề chủ ngữ. Kiến thức ngữ pháp: Đại từ quan hệ 'Those who' + động từ số nhiều."
        },
        {
          id: 23,
          question: "The marketing team has been working on the campaign _______ the project was approved last month.",
          options: ["although", "since", "unless", "whereas"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'since' vì nó chỉ mốc thời gian bắt đầu hành động với thì hiện tại hoàn thành tiếp diễn. Kiến thức ngữ pháp: 'Since' + mốc thời gian + present perfect continuous."
        },
        {
          id: 24,
          question: "All participants must complete the registration form and submit _______ identification documents.",
          options: ["validate", "valid", "validity", "validly"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'valid' vì đây là tính từ bổ nghĩa cho danh từ 'identification documents'. Kiến thức ngữ pháp: Tính từ đứng trước danh từ để mô tả (valid documents = giấy tờ hợp lệ)."
        },
        {
          id: 25,
          question: "The company's new policy emphasizes that _______ communication improves workplace productivity.",
          options: ["effect", "effective", "effectively", "effectiveness"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'effective' vì đây là tính từ bổ nghĩa cho danh từ 'communication'. Kiến thức ngữ pháp: Tính từ 'effective' (hiệu quả) đứng trước danh từ."
        },
        {
          id: 26,
          question: "Employees are encouraged to _______ their ideas during the monthly brainstorming sessions.",
          options: ["sharing", "shares", "share", "shared"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'share' vì đây là động từ nguyên thể sau 'to' trong cấu trúc 'be encouraged to + V'. Kiến thức ngữ pháp: 'to + V nguyên thể' sau động từ khuyến khích."
        },
        {
          id: 27,
          question: "_______ receiving customer feedback, the product development team made several improvements.",
          options: ["After", "Despite", "Although", "Unless"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'After' vì nó chỉ thứ tự thời gian và đi với V-ing. Kiến thức ngữ pháp: 'After + V-ing' để diễn tả hành động xảy ra sau."
        },
        {
          id: 28,
          question: "The research team is looking for candidates who can analyze data _______ and draw meaningful conclusions.",
          options: ["accuracy", "accurate", "accurately", "accurateness"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'accurately' vì đây là trạng từ bổ nghĩa cho động từ 'analyze'. Kiến thức ngữ pháp: Trạng từ 'accurately' (một cách chính xác) bổ nghĩa động từ."
        },
        {
          id: 29,
          question: "Due to the unexpected power outage, the conference has been _______ to next Tuesday.",
          options: ["rescheduled", "rescheduling", "reschedule", "reschedules"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'rescheduled' vì đây là dạng quá khứ phân từ trong thì hiện tại hoàn thành thụ động (has been + V3). Kiến thức ngữ pháp: Cấu trúc bị động 'has been rescheduled'."
        },
        {
          id: 30,
          question: "The supervisor emphasized that attention to detail and creativity are essential qualities for maintaining high _______.",
          options: ["standards", "schedules", "expenses", "locations"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'standards' vì nó chỉ 'tiêu chuẩn cao', phù hợp với ngữ cảnh chất lượng công việc. Kiến thức từ vựng: 'High standards' (tiêu chuẩn cao) là cụm từ cố định trong quản lý chất lượng."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `To: All Research and Development Staff
From: Dr. Michael Chen, R&D Director  
Subject: Innovation Lab Project Launch


Dear Colleagues,

I am pleased to announce that our company will be launching a groundbreaking Innovation Lab initiative, set to begin operations in the second quarter of this year. This ambitious project aims to foster creativity and accelerate the development of cutting-edge solutions for our clients. To ensure seamless implementation, we will conduct a series of planning meetings starting next month. Each department member will receive specific assignments to (31) effective collaboration across all divisions.

Our main goal is to enhance our competitive advantage and establish ourselves as industry leaders in technological innovation. The engineering team will concentrate on prototype development, while the design specialists will create user-friendly interfaces to (32) our product quality and user experience.

Furthermore, we will work in close partnership with our quality assurance team to gather comprehensive testing data. This information will enable us to make critical refinements before the public launch. Please remember that all proposals must be delivered to the project coordinator by Friday, April 19, allowing sufficient time for thorough evaluation and (33).

The official unveiling ceremony will be held at our central facility on May 15. We anticipate attendance from prominent industry experts and media representatives, so all team members should be ready to demonstrate our innovations with utmost professionalism. A comprehensive preparation workshop will occur three days prior to the ceremony to (34) everyone feels confident in their presentations.

For newly hired staff members, we will arrange a detailed orientation program covering our innovation protocols and interdepartmental communication guidelines. Participation is strongly recommended, as this training will provide crucial insights into how to (35) with colleagues from various departments productively.

We sincerely value each person's enthusiasm and collaborative spirit during this exciting period. Your innovation and commitment will undoubtedly contribute to making this initiative a tremendous success. Should you have any inquiries or suggestions, please feel free to (36) me at any time.

Thank you for your ongoing dedication to excellence. I am optimistic that, working together, we will accomplish remarkable achievements.

Warm regards,

Dr. Michael Chen
R&D Director
TechVision Industries`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "Each department member will receive specific assignments to (31) effective collaboration across all divisions.",
          options: ["complicate", "facilitate", "eliminate", "postpone"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'facilitate' vì nó nghĩa là 'tạo điều kiện thuận lợi', phù hợp với 'assignments to facilitate effective collaboration' (nhiệm vụ để tạo điều kiện cho sự hợp tác hiệu quả)."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "...while the design specialists will create user-friendly interfaces to (32) our product quality and user experience.",
          options: ["reduce", "enhance", "diminish", "ignore"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'enhance' vì nó nghĩa là 'nâng cao', phù hợp với 'create interfaces to enhance product quality' (tạo giao diện để nâng cao chất lượng sản phẩm)."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...allowing sufficient time for thorough evaluation and (33).",
          options: ["approval", "rejection", "cancellation", "confusion"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'approval' vì nó nghĩa là 'phê duyệt', phù hợp với 'evaluation and approval' (đánh giá và phê duyệt)."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "A comprehensive preparation workshop will occur three days prior to the ceremony to (34) everyone feels confident in their presentations.",
          options: ["prevent", "doubt", "ensure", "confuse"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'ensure' vì nó nghĩa là 'đảm bảo', phù hợp với 'to ensure everyone feels confident' (để đảm bảo mọi người tự tin)."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "...provide crucial insights into how to (35) with colleagues from various departments productively.",
          options: ["argue", "collaborate", "compete", "disagree"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'collaborate' vì nó nghĩa là 'cộng tác', phù hợp với 'how to collaborate with colleagues productively' (cách cộng tác với đồng nghiệp một cách hiệu quả)."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "Should you have any inquiries or suggestions, please feel free to (36) me at any time.",
          options: ["contact", "avoid", "interrupt", "disregard"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'contact' vì nó nghĩa là 'liên hệ', phù hợp với 'feel free to contact me' (hãy thoải mái liên hệ với tôi)."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - The Innovation Lab will most likely begin operations ___.",
          options: ["next month", "in three months", "in the second quarter", "next year"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'in the second quarter' vì email đề cập 'set to begin operations in the second quarter of this year' (dự kiến bắt đầu hoạt động trong quý hai năm nay)."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the primary purpose of this message?",
          options: ["To announce the Innovation Lab project launch", "To cancel an existing research program", "To introduce a new company policy", "To request budget approval"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì toàn bộ email tập trung vào 'launching a groundbreaking Innovation Lab initiative' (ra mắt sáng kiến phòng thí nghiệm đổi mới đột phá)."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - Who sent this message?",
          options: ["The HR manager", "The R&D Director", "A project coordinator", "The CEO"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email từ 'Dr. Michael Chen, R&D Director' (Tiến sĩ Michael Chen, Giám đốc R&D)."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - When will the preparation workshop take place?",
          options: ["April 19", "May 12", "May 15", "Next month"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'A comprehensive preparation workshop will occur three days prior to the ceremony' và ceremony là 'May 15', vậy 3 ngày trước là May 12."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**Professional Translation Services International**

Transform Your Global Communication with Expert Translation Solutions

Quality translation services are essential for businesses expanding into international markets. Professional Translation Services International delivers accurate, culturally appropriate translations within five business days!

**Our Comprehensive Services:**
1. **Certified Document Translation** – We employ experienced translators specializing in legal, medical, technical, and business documents. Visit ptstranslate.com to review our translators' credentials and select the specialist best suited for your project.

2. **Website Localization** – We provide complete website translation and cultural adaptation services to help your business connect with global audiences effectively.

3. **Professional Editing and Proofreading** – Our expert editors ensure your translated content maintains the highest standards of accuracy and readability.

4. **Interpretation Services** – For businesses requiring real-time language support, we offer professional interpretation for meetings, conferences, and business negotiations in over 50 languages.

Contact us via email (services@ptstranslate.com) with your project details and contact information. Our client relations specialist will respond within 48 hours to discuss your requirements and provide a comprehensive quote.

---

**Email Message**

**To:** services@ptstranslate.com
**From:** r.martinez@globaltechsolutions.com
**Date:** September 18
**Subject:** Translation Service Inquiry

I discovered your advertisement in the Business Weekly magazine and am interested in using your translation services for my technology consulting firm. Specifically, I need certified translation of our company's technical documentation and user manuals from English into Mandarin Chinese and Japanese. These documents will be used for our expansion into Asian markets.

I'm wondering about your turnaround time and whether your team has experience with technical terminology in the software industry. Additionally, I would appreciate information about your quality assurance process for technical translations.

Please contact me via email during business hours, as I frequently travel for work. I would like to begin this project as soon as possible, ideally within the next two weeks.

Thank you for your assistance,
Robert Martinez
Global Tech Solutions
r.martinez@globaltechsolutions.com
1600 Innovation Drive, San Jose, CA 95110`,
      
      questions: [
        {
          id: 41,
          question: "According to the advertisement, why should clients visit the company website?",
          options: ["To schedule an interpretation session", "To pay for translation services online", "To review translators' credentials", "To download free translation software"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì quảng cáo nêu 'Visit ptstranslate.com to review our translators' credentials' (Truy cập để xem thông tin chuyên môn của đội ngũ dịch giả)."
        },
        {
          id: 42,
          question: "What is indicated about Professional Translation Services International?",
          options: ["It advertises in Business Weekly magazine.", "It only translates legal documents.", "It completes all projects in 24 hours.", "It has offices in over 50 countries."],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì email đề cập 'I discovered your advertisement in the Business Weekly magazine' (Tôi phát hiện quảng cáo của bạn trên tạp chí Business Weekly)."
        },
        {
          id: 43,
          question: "Who most likely is Mr. Martinez?",
          options: ["A freelance translator", "A magazine editor", "A business owner in the technology sector", "An interpretation specialist"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì email từ 'r.martinez@globaltechsolutions.com' và nội dung 'my technology consulting firm' (công ty tư vấn công nghệ của tôi)."
        },
        {
          id: 44,
          question: "Which service does Mr. Martinez NOT mention needing?",
          options: ["Certified document translation", "Website localization", "Technical translation into Asian languages", "Quality assurance for translations"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email chỉ yêu cầu 'certified translation of technical documentation and user manuals' (dịch thuật có chứng nhận tài liệu kỹ thuật), không đề cập website localization."
        },
        {
          id: 45,
          question: "What will Mr. Martinez most likely receive within 48 hours?",
          options: ["Completed translated documents", "A response from a client relations specialist", "A list of available translators", "An invitation to visit the office"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì quảng cáo nêu 'Our client relations specialist will respond within 48 hours' (Chuyên viên quan hệ khách hàng sẽ phản hồi trong 48 giờ)."
        },
        {
          id: 46,
          question: "According to the advertisement, how long does the company typically take to complete translations?",
          options: ["Within 48 hours", "Within five business days", "Within two weeks", "Within one month"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì quảng cáo nêu 'delivers accurate, culturally appropriate translations within five business days' (cung cấp bản dịch chính xác trong năm ngày làm việc)."
        },
        {
          id: 47,
          question: "What type of documents does Mr. Martinez need translated?",
          options: ["Legal contracts and agreements", "Medical research papers", "Technical documentation and user manuals", "Marketing brochures"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì email nêu 'certified translation of our company's technical documentation and user manuals' (dịch có chứng nhận tài liệu kỹ thuật và hướng dẫn sử dụng)."
        },
        {
          id: 48,
          question: "Into which languages does Mr. Martinez want his documents translated?",
          options: ["Spanish and Portuguese", "French and German", "Mandarin Chinese and Japanese", "Korean and Vietnamese"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì email nêu 'from English into Mandarin Chinese and Japanese' (từ tiếng Anh sang tiếng Trung Quốc phổ thông và tiếng Nhật)."
        },
        {
          id: 49,
          question: "How does Mr. Martinez prefer to be contacted?",
          options: ["By phone during business hours", "Via email", "Through video conference", "By postal mail"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email nêu 'Please contact me via email during business hours' (Vui lòng liên hệ tôi qua email trong giờ làm việc)."
        },
        {
          id: 50,
          question: "What is Mr. Martinez's timeline for starting the project?",
          options: ["Within the next month", "As soon as possible, within two weeks", "After reviewing multiple quotes", "No specific timeline mentioned"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email nêu 'I would like to begin this project as soon as possible, ideally within the next two weeks' (Tôi muốn bắt đầu dự án càng sớm càng tốt, lý tưởng trong hai tuần tới)."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Doctor Chen (09:45): Morning Anna! My train from Boston is running late – expected arrival at Penn Station 10:20 instead of 10:00. Apologies!
Anna (09:47): No worries at all! I'll check the updated schedule and meet you at the main entrance.
Doctor Chen (09:50): Perfect, we should still make it to our client presentation on time. Track maintenance caused the delay.
Anna (10:05): Understood. The conference room parking might be limited today, but I'll find a spot.
Doctor Chen (14:30): Just arrived! Looking forward to seeing you shortly!`,
      questions: [
        {
          id: 51,
          question: "What can be inferred about Doctor Chen?",
          options: ["He is traveling for business purposes.", "He works permanently in Boston.", "He missed his train completely.", "He is meeting a new client for the first time."],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì đề cập 'our client presentation' (bài thuyết trình khách hàng của chúng ta) và chuyến tàu từ Boston đến Penn Station."
        },
        {
          id: 52,
          question: "At 10:05, what does Anna mean when she writes, 'Understood'?",
          options: ["She has confirmed the train's new arrival time.", "She knows why the delay occurred.", "She will definitely find parking easily.", "She agrees to cancel the presentation."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Understood' đáp lại lời giải thích về nguyên nhân chậm trễ (track maintenance)."
        },
        {
          id: 53,
          question: "Why was Doctor Chen's train delayed?",
          options: ["Bad weather conditions", "Track maintenance work", "Mechanical problems with the train", "Overcrowding at the station"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Doctor Chen nói 'Track maintenance caused the delay' (Bảo trì đường ray gây ra sự chậm trễ)."
        },
        {
          id: 54,
          question: "What is Doctor Chen's updated arrival time?",
          options: ["09:45", "10:00", "10:20", "14:30"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì Doctor Chen nói 'expected arrival at Penn Station 10:20 instead of 10:00' (dự kiến đến Penn Station 10:20 thay vì 10:00)."
        },
        {
          id: 55,
          question: "What does Anna offer to do for Doctor Chen?",
          options: ["Book a hotel room", "Meet him at Penn Station", "Reschedule the presentation", "Drive him to Boston"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Anna nói 'meet you at the main entrance' (gặp bạn ở lối vào chính của Penn Station)."
        },
        {
          id: 56,
          question: "What is the relationship between Doctor Chen and Anna?",
          options: [
            "They are family members.", 
            "They are colleagues working together.", 
            "They are client and consultant.", 
            "They have never met before."
          ],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'our client presentation' (bài thuyết trình khách hàng của chúng ta) ngụ ý họ cùng làm việc."
        },
        {
          id: 57,
          question: "At 09:50, why does Doctor Chen mention 'we should still make it to our client presentation on time'?",
          options: ["To cancel the meeting", "To reassure Anna about the schedule", "To request a delay in the presentation", "To complain about the train service"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì mục đích là trấn an Anna rằng dù chậm 20 phút vẫn kịp giờ thuyết trình."
        },
        {
          id: 58,
          question: "What does Anna mean when she writes 'I'll check the updated schedule'?",
          options: ["She will reschedule the client meeting.", "She will verify the train's new arrival time.", "She will check her personal calendar.", "She will contact the train company."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'check the updated schedule' sau khi biết giờ tàu mới là 10:20."
        },
        {
          id: 59,
          question: "What concern does Anna mention about the meeting location?",
          options: ["The room might be too small.", "Parking spaces might be limited.", "The building is difficult to find.", "The presentation equipment is broken."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì Anna nói 'The conference room parking might be limited today' (Chỗ đậu xe phòng hội nghị có thể hạn chế hôm nay)."
        },
        {
          id: 60,
          question: "What does Doctor Chen's final message at 14:30 indicate?",
          options: ["He is still on the train.", "He has arrived at the station.", "He is canceling the meeting.", "He is lost and needs directions."],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Just arrived!' (Vừa đến nơi!) cho thấy đã đến Penn Station."
        }
      ]
    }
  }
};
</file>

<file path="src/data/exams/exam9.js">
export const EXAM9_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 9 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài để luyện nghe chi tiết.",
  parts: {
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe đoạn hội thoại giữa Lisa và Ben về lớp học nấu ăn. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      script: "Lisa: Ben, are you still taking that Italian cooking class? How's it going?\nBen: It's fantastic, Lisa. Last session we made pasta from scratch—it took hours, but the taste was incredible. I wish we had more time to practice at home.\nLisa: Sounds fun. I tried baking bread once, but it turned out like a rock. Maybe I need a class like yours.\nBen: You should join! Next week is desserts—tiramisu and gelato. But the instructor said it's intense; beginners might struggle with the timing.\nLisa: Hmm, tempting, but I'm swamped with work. Is there an online version for busy people like me?",
      questions: [
        {
          id: 1,
          options: [
            "They practiced at home daily.",
            "The pasta was disappointing.",
            "They made pasta from scratch.",
            "It took minutes to make."
          ],
          correct: 2,
          explanation: "Ben nói: 'Last session we made pasta from scratch—it took hours, but the taste was incredible.' (Tuần trước chúng tôi làm pasta từ đầu—mất hàng giờ, nhưng vị ngon tuyệt). Đáp án đúng là (C). Ngữ pháp: Cấu trúc 'made from scratch' là cụm từ cố định nghĩa 'làm từ nguyên liệu cơ bản'. Thì quá khứ đơn (took) mô tả thời gian kéo dài. Collocation: 'make pasta from scratch', 'taste incredible'. Kỹ năng nghe: Xác định hành động hoàn thành."
        },
        {
          id: 2,
          options: [
            "She practices cooking often.",
            "Her bread turned out like a rock.",
            "She wants to join the class.",
            "Baking bread was easy for her."
          ],
          correct: 1,
          explanation: "Lisa nói: 'I tried baking bread once, but it turned out like a rock.' (Tôi thử nướng bánh mì một lần, nhưng nó cứng như đá). Đáp án đúng là (B). Ngữ pháp: 'Tried + V-ing' để chỉ việc thử nghiệm hoạt động. 'Turned out like' là cụm từ mô tả kết quả bất ngờ. Collocation: 'try baking bread', 'turned out like a rock'. Kỹ năng nghe: Xác định kết quả."
        },
        {
          id: 3,
          options: [
            "Next week is savory dishes.",
            "The class is only for experts.",
            "Next week is desserts like tiramisu.",
            "Desserts are easy for beginners."
          ],
          correct: 2,
          explanation: "Ben nói: 'Next week is desserts—tiramisu and gelato.' (Tuần sau là món tráng miệng—tiramisu và gelato). Đáp án đúng là (C). Ngữ pháp: Thì hiện tại đơn (is) cho lịch trình tương lai đã lên kế hoạch. Dấu gạch ngang (—) liệt kê ví dụ. Collocation: 'tiramisu and gelato', 'next week'. Kỹ năng nghe: Xác định nội dung lớp học."
        },
        {
          id: 4,
          options: [
            "Work is not an issue for her.",
            "Beginners might struggle with timing.",
            "It's only online now.",
            "The class is relaxed."
          ],
          correct: 1,
          explanation: "Ben nói: 'The instructor said it's intense; beginners might struggle with the timing.' (Giảng viên nói nó căng thẳng; người mới có thể gặp khó với thời gian). Đáp án đúng là (B). Ngữ pháp: Modal 'might' + động từ chỉ khả năng thấp. Dấu chấm phẩy (;) nối hai mệnh đề liên quan. Collocation: 'struggle with timing', 'beginners might struggle'. Kỹ năng nghe: Xác định thách thức."
        },
        {
          id: 5,
          options: [
            "Online versions are unavailable.",
            "She is swamped with work.",
            "She prefers in-person classes.",
            "She has free time soon."
          ],
          correct: 1,
          explanation: "Lisa nói: 'I'm swamped with work.' (Tôi bận rộn với công việc). Đáp án đúng là (B). Ngữ pháp: 'Swamped with' là cụm từ idiomatic nghĩa 'bận rộn quá tải'. Thì hiện tại tiếp diễn (I'm) nhấn mạnh tình trạng hiện tại. Collocation: 'swamped with work'. Kỹ năng nghe: Xác định lý do phiền muộn."
        }
      ]
    },
    part2: {
      title: "PART 2: Longer Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người về lập kế hoạch sự kiện từ thiện. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Narrator: At a community center.\nAnna: Hi team, let's brainstorm the charity fundraiser. Theme: eco-awareness.\nMark: Great, Anna. I suggest a recycling workshop—people bring items to upcycle.\nSarah: Love it. For food, vegan potluck to tie in sustainability. Who's volunteering to cook?\nMark: I'll handle desserts—plant-based treats. But venue: the park or indoor hall?\nAnna: Park for eco-vibe, but check weather. Last year's rain was a disaster.\nSarah: True. Budget: we have $500—prioritize flyers and prizes.\nMark: Agreed. Let's assign tasks now to meet the deadline.",
      questions: [
        {
          id: 6,
          question: "What is the theme of the fundraiser?",
          options: [
            "Art and crafts",
            "Eco-awareness",
            "Health and fitness",
            "Music festival"
          ],
          correct: 1,
          explanation: "Anna nói: 'Theme: eco-awareness.' (Chủ đề: nhận thức về môi trường). Đáp án đúng là (B). Ngữ pháp: Cấu trúc 'Theme: eco-awareness' là dạng rút gọn với dấu hai chấm (:). 'Let's brainstorm' sử dụng 'let's + V' để đề xuất hành động nhóm. Collocation: 'eco-awareness theme'. Kỹ năng nghe: Xác định chủ đề chính."
        },
        {
          id: 7,
          question: "What does Mark suggest for activities?",
          options: [
            "A book sale",
            "A recycling workshop",
            "A yoga session",
            "A cooking demo"
          ],
          correct: 1,
          explanation: "Mark nói: 'I suggest a recycling workshop—people bring items to upcycle.' (Tôi gợi ý hội thảo tái chế—mọi người mang đồ để tái sử dụng). Đáp án đúng là (B). Ngữ pháp: 'I suggest + noun phrase'. Dấu gạch ngang (—) giải thích thêm với 'to upcycle' động từ nguyên thể chỉ mục đích. Collocation: 'recycling workshop', 'upcycle items'. Kỹ năng nghe: Xác định đề xuất hoạt động."
        },
        {
          id: 8,
          question: "What will the food be?",
          options: [
            "No food",
            "Vegan potluck",
            "Fast food",
            "Barbecue"
          ],
          correct: 1,
          explanation: "Sarah nói: 'For food, vegan potluck to tie in sustainability.' (Đồ ăn: potluck chay để liên kết với bền vững). Đáp án đúng là (B). Ngữ pháp: 'To tie in' động từ nguyên thể chỉ mục đích. 'For food' giới từ 'for' giới thiệu chủ đề. Collocation: 'vegan potluck', 'tie in sustainability'. Kỹ năng nghe: Xác định lựa chọn thực phẩm."
        },
        {
          id: 9,
          question: "What will Mark handle?",
          options: [
            "Weather check",
            "Plant-based desserts",
            "Venue booking",
            "Flyers"
          ],
          correct: 1,
          explanation: "Mark nói: 'I'll handle desserts—plant-based treats.' (Tôi lo tráng miệng—món chay). Đáp án đúng là (B). Ngữ pháp: 'I'll handle' thì tương lai đơn (will + V) cam kết. Dấu gạch ngang (—) giới thiệu ví dụ. 'Plant-based' tính từ ghép mô tả đặc tính. Collocation: 'handle desserts', 'plant-based treats'. Kỹ năng nghe: Xác định trách nhiệm."
        },
        {
          id: 10,
          question: "What was a problem last year?",
          options: [
            "No volunteers",
            "Rain disaster",
            "Budget overrun",
            "Low attendance"
          ],
          correct: 1,
          explanation: "Anna nói: 'Last year's rain was a disaster.' (Mưa năm ngoái là thảm họa). Đáp án đúng là (B). Ngữ pháp: 'Last year's rain' sở hữu cách ('s). Thì quá khứ đơn (was) mô tả sự kiện. 'But' nối ý cảnh báo (check weather). Collocation: 'rain was a disaster'. Kỹ năng nghe: Xác định vấn đề quá khứ."
        }
      ]
    },
    part3: {
      title: "PART 3: Monologue",
      description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Professor A: Good morning, students. Our lecture today covers renewable energy sources, vital for combating climate change despite high initial costs. Your quiz results are in—class average 8.1, excellent work. Extensions for assignments require prior approval; otherwise, penalties apply, as seen with last semester's group. On a lighter note, the library's new green corner features solar-powered chargers and recycled furniture—perfect for sustainable study sessions.",
      questions: [
        {
          id: 11,
          question: "Renewable energy is __________ for climate change.",
          options: ["(A) expensive", "(B) harmful", "(C) vital", "(D) optional"],
          correct: 2,
          explanation: "Professor A: 'Vital for combating climate change.' (Quan trọng để chống biến đổi khí hậu). Đáp án đúng là (C). Ngữ pháp: 'Vital for + V-ing' giới từ 'for' theo sau tính từ. 'Despite high initial costs' cụm giới từ chỉ sự nhượng bộ. Collocation: 'vital for', 'combating climate change'. Kỹ năng nghe: Xác định tầm quan trọng."
        },
        {
          id: 12,
          question: "Your __________ are in.",
          options: ["(A) penalties", "(B) books", "(C) quiz results", "(D) excuses"],
          correct: 2,
          explanation: "Professor A: 'Your quiz results are in—class average 8.1.' (Kết quả bài kiểm tra của các bạn đã có). Đáp án đúng là (C). Ngữ pháp: 'Are in' cụm động từ nghĩa 'đã có sẵn'. Dấu gạch ngang (—) giới thiệu chi tiết bổ sung. Collocation: 'quiz results are in', 'class average'. Kỹ năng nghe: Xác định thông báo kết quả."
        },
        {
          id: 13,
          question: "Extensions require __________.",
          options: ["(A) group vote", "(B) prior approval", "(C) extra fees", "(D) no approval"],
          correct: 1,
          explanation: "Professor A: 'Extensions for assignments require prior approval.' (Gia hạn bài tập cần phê duyệt trước). Đáp án đúng là (B). Ngữ pháp: 'Require + noun' chỉ yêu cầu cần thiết. 'Prior approval' tính từ 'prior' + danh từ, 'for assignments' giới từ 'for'. Collocation: 'require prior approval'. Kỹ năng nghe: Xác định quy định."
        },
        {
          id: 14,
          question: "Last semester's group __________ penalties.",
          options: ["(A) ignored", "(B) applied for", "(C) saw", "(D) avoided"],
          correct: 2,
          explanation: "Professor A: 'Penalties apply, as seen with last semester's group.' (Như nhóm kỳ trước đã thấy). Đáp án đúng là (C). Ngữ pháp: 'As seen with' cụm từ giới thiệu ví dụ. 'Penalties apply' thì hiện tại đơn chỉ quy tắc. Dấu chấm phẩy (;) nối với 'otherwise'. Collocation: 'saw penalties', 'penalties apply'. Kỹ năng nghe: Xác định hậu quả."
        },
        {
          id: 15,
          question: "The library's green corner features __________.",
          options: ["(A) plastic furniture", "(B) solar-powered chargers", "(C) noisy areas", "(D) all of the above"],
          correct: 1,
          explanation: "Professor A: 'Solar-powered chargers and recycled furniture.' (Sạc năng lượng mặt trời và đồ nội thất tái chế). Đáp án đúng là (B). Ngữ pháp: 'Features + noun' nghĩa 'có đặc điểm'. 'Solar-powered' và 'recycled' tính từ ghép (past participle + noun). 'On a lighter note' cụm từ chuyển tiếp. Collocation: 'solar-powered chargers', 'recycled furniture'. Kỹ năng nghe: Xác định tiện ích bền vững."
        }
      ]
    },
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "Student B: Hi, I'd like to enroll in the advanced yoga course. It's for stress management.\nCounselor: Welcome. When did you complete the beginner level?\nStudent B: Three months ago online.\nCounselor: Good. Any health concerns?\nStudent B: Minor back pain from desk work—no doctor's note, but I have my progress log.\nCounselor: The log works for us. Advanced sessions are vigorous; fees apply if beyond the trial period. We can verify your certification.\nStudent B: Understood. Can I start next session?\nCounselor: Yes, to build momentum quickly.",
      questions: [
        {
          id: 16,
          question: "The course is for __________.",
          options: ["(A) competition", "(B) fun", "(C) stress management", "(D) weight loss"],
          correct: 2,
          explanation: "Student B: 'It's for stress management.' (Nó để quản lý căng thẳng). Đáp án đúng là (C). Ngữ pháp: 'It's for + noun' giới từ 'for' chỉ mục đích. 'I'd like to enroll' dùng 'would like + to V' để diễn tả mong muốn. Collocation: 'stress management', 'enroll in course'. Kỹ năng nghe: Xác định mục đích đăng ký."
        },
        {
          id: 17,
          question: "The beginner level was completed __________.",
          options: ["(A) in person", "(B) three months ago", "(C) last year", "(D) tomorrow"],
          correct: 1,
          explanation: "Student B: 'Three months ago online.' (Ba tháng trước trực tuyến). Đáp án đúng là (B). Ngữ pháp: 'Three months ago' cụm thời gian quá khứ với thì quá khứ đơn. 'Online' trạng từ chỉ cách thức. Collocation: 'complete level', 'three months ago'. Kỹ năng nghe: Xác định thời gian hoàn thành."
        },
        {
          id: 18,
          question: "The student has __________.",
          options: ["(A) fees paid", "(B) no proof", "(C) a progress log", "(D) a doctor's note"],
          correct: 2,
          explanation: "Student B: 'No doctor's note, but I have my progress log.' (Không có giấy bác sĩ, nhưng có nhật ký tiến độ). Đáp án đúng là (C). Ngữ pháp: 'But' nối hai mệnh đề đối lập: phủ định (no doctor's note) và khẳng định (I have). 'From desk work' giới từ 'from' chỉ nguyên nhân. Collocation: 'progress log', 'back pain from desk work'. Kỹ năng nghe: Xác định tài liệu hỗ trợ."
        },
        {
          id: 19,
          question: "Advanced sessions are __________.",
          options: ["(A) online only", "(B) vigorous", "(C) free always", "(D) relaxed"],
          correct: 1,
          explanation: "Counselor: 'Advanced sessions are vigorous.' (Buổi nâng cao rất mạnh mẽ). Đáp án đúng là (B). Ngữ pháp: 'Are vigorous' thì hiện tại đơn mô tả đặc tính. Dấu chấm phẩy (;) nối các ý: mô tả (vigorous) và điều kiện (fees apply if...). 'If beyond' mệnh đề điều kiện loại 1. Collocation: 'vigorous sessions'. Kỹ năng nghe: Xác định mức độ khóa học."
        },
        {
          id: 20,
          question: "The counselor suggests __________.",
          options: ["(A) refunding fees", "(B) verifying certification", "(C) skipping trial", "(D) delaying start"],
          correct: 1,
          explanation: "Counselor: 'We can verify your certification.' (Chúng tôi có thể xác minh chứng chỉ của bạn). Đáp án đúng là (B). Ngữ pháp: 'Can verify' modal 'can' + V nguyên thể chỉ khả năng. 'To build momentum' động từ nguyên thể chỉ mục đích của 'start next session'. Collocation: 'verify certification', 'build momentum'. Kỹ năng nghe: Xác định quy trình kiểm tra."
        }
      ]
    },
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "The seminar on leadership skills emphasized the importance of __________ decision-making in high-pressure situations.",
          options: ["quickness", "quicker", "quickly", "quick"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'quickly' vì trạng từ (adverb) bổ nghĩa cho danh từ 'decision-making' để mô tả cách thức. Ngữ pháp: Cấu trúc 'the importance of + adverb + decision-making' sử dụng trạng từ để mô tả tốc độ. Collocation: 'quick decision-making'. Từ vựng: 'quickness' là danh từ không phù hợp; 'quicker' là tính từ so sánh; 'quick' là tính từ không phù hợp vị trí."
        },
        {
          id: 22,
          question: "By the time the report was due, the analyst __________ all the financial data twice for accuracy.",
          options: ["verifying", "verifies", "had verified", "verify"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'had verified' vì thì quá khứ hoàn thành (had + V3) chỉ hành động hoàn thành trước thời điểm khác trong quá khứ. Ngữ pháp: Cấu trúc 'By the time + simple past, past perfect' nhấn mạnh thứ tự hành động. Present Perfect (have verified) để chỉ hành động bắt đầu từ quá khứ ảnh hưởng hiện tại. Collocation: 'verify data for accuracy'. Từ vựng: 'verifying' là V-ing, không phù hợp; 'verifies' là hiện tại đơn."
        },
        {
          id: 23,
          question: "The policy change affected all departments __________ the marketing team the most.",
          options: ["among", "except", "including", "besides"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'including' vì giới từ này chỉ việc bao gồm tất cả các bộ phận với marketing bị ảnh hưởng nhiều nhất. Ngữ pháp: 'Including' dùng để liệt kê ví dụ hoặc nhấn mạnh, ở đây chỉ marketing nằm trong 'all departments' nhưng bị ảnh hưởng nhiều. Collocation: 'affected all departments including'. Từ vựng: 'among' nghĩa 'giữa'; 'except' nghĩa 'trừ ra', trái nghĩa; 'besides' nghĩa 'ngoài ra'."
        },
        {
          id: 24,
          question: "Renewable resources play a crucial role in __________ long-term environmental sustainability.",
          options: ["achieves", "achieved", "achieving", "achieve"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'achieving' vì V-ing (gerund) sau giới từ 'in'. Ngữ pháp: Cấu trúc 'play a role in + V-ing' là mẫu cố định, 'in' giới từ yêu cầu danh động từ. Present Participle (achieving) sau 'in'. Collocation: 'play a role in achieving', 'environmental sustainability'. Từ vựng: 'achieves' là hiện tại đơn; 'achieved' là quá khứ phân từ; 'achieve' là nguyên thể."
        },
        {
          id: 25,
          question: "The board __________ that the merger would benefit shareholders in the coming years.",
          options: ["agreeing", "agrees", "agreed", "agree"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'agreed' vì thì quá khứ đơn (simple past) chỉ hành động hoàn thành trong quá khứ với mệnh đề 'that' báo cáo. Ngữ pháp: Cấu trúc 'subject + verb + that-clause' với 'agreed' ở quá khứ. Mệnh đề 'that the merger would benefit' sử dụng thì quá khứ tương lai (would + V) để backshift. Collocation: 'agreed that', 'benefit shareholders'. Từ vựng: 'agreeing' là V-ing; 'agrees' là hiện tại đơn; 'agree' là nguyên thể."
        },
        {
          id: 26,
          question: "All participants must register __________ to receive the workshop materials.",
          options: ["advanced", "in advance", "advancing", "advance"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'in advance' vì đây là cụm giới từ cố định nghĩa 'trước/trước thời hạn'. Ngữ pháp: 'In advance' idiom với 'in' giới từ + 'advance' danh từ, dùng làm trạng từ chỉ thời gian. Collocation: 'register in advance'. Từ vựng: 'advanced' là tính từ; 'advance' là danh từ đơn lẻ, thiếu 'in'; 'advancing' là V-ing."
        },
        {
          id: 27,
          question: "The experiment was conducted __________ strict safety protocols to minimize risks.",
          options: ["under", "for", "by", "with"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'under' vì giới từ này nghĩa 'dưới/theo' quy trình hoặc điều kiện. Ngữ pháp: 'Conducted under + noun' chỉ cách thức hoặc điều kiện. 'Was conducted' thì quá khứ bị động (was + V3). Collocation: 'conducted under safety protocols'. Từ vựng: 'for' chỉ mục đích; 'by' chỉ phương tiện; 'with' chỉ công cụ."
        },
        {
          id: 28,
          question: "He spoke so __________ that the audience could barely follow his technical jargon.",
          options: ["rapidity", "rapid", "rapidly", "rapidly"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'rapidly' vì trạng từ bổ nghĩa động từ 'spoke' để chỉ cách thức. Ngữ pháp: Cấu trúc 'so + adverb + that' chỉ mức độ dẫn đến kết quả. 'Rapidly' từ tính từ 'rapid' + '-ly'. Collocation: 'spoke rapidly', 'could barely follow'. Từ vựng: 'rapidity' là danh từ; 'rapid' là tính từ; Lưu ý: (D) là lặp lại (C)."
        },
        {
          id: 29,
          question: "The proposal __________ by the committee after careful review last Friday.",
          options: ["approves", "approving", "was approved", "approve"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'was approved' vì thì quá khứ bị động (was + V3) nhấn mạnh đối tượng 'proposal' bị hành động. Ngữ pháp: Cấu trúc bị động khi chủ ngữ thực hiện không quan trọng, 'by the committee' chỉ tác nhân. 'After careful review' cụm giới từ chỉ thời gian. Collocation: 'proposal was approved'. Từ vựng: 'approves' là hiện tại đơn; 'approving' là V-ing; 'approve' là nguyên thể."
        },
        {
          id: 30,
          question: "Global trade agreements are designed to __________ economic disparities between nations.",
          options: ["reduce", "reduces", "reduced", "reducing"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'reduce' vì động từ nguyên thể (infinitive) sau 'to' chỉ mục đích. Ngữ pháp: Cấu trúc 'be designed to + V nguyên thể' nghĩa 'được thiết kế để'. 'Are designed' hiện tại bị động (passive). Collocation: 'designed to reduce disparities', 'between nations'. Từ vựng: 'reduces' là hiện tại đơn; 'reduced' là quá khứ phân từ; 'reducing' là V-ing."
        }
      ]
    },
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D). Câu 31-36: Điền từ thích hợp. Câu 37-40: Đọc hiểu.",
      type: "reading",
      text: `To: All Faculty and Staff
From: Doctor Chen, Dean of Faculty Development
Subject: Professional Development Workshop Series
Dear Colleagues,
We are pleased to announce the continuation of our Professional Development Workshop Series this academic year. These sessions are designed to support faculty in enhancing instructional practices and integrating new technologies into the classroom. The updated schedule includes eight workshops, each focusing on a specific area of teaching innovation. The opening session, scheduled for October 12, will (31) an overview of evidence-based teaching methods and recent research findings.
Each workshop will include guided discussions, demonstration activities, and collaborative tasks to (32) deeper engagement among participants. Faculty members who complete at least 75% of the workshops will receive an official certificate of participation. This certificate may be used as part of the annual performance review to (33) professional growth and continued learning.
Workshops will be held in Room A201 unless otherwise noted. To ensure adequate seating and materials, please register using the online form provided below no later than October 5. Early registration helps us (34) resources efficiently and arrange appropriate support for hybrid attendance.
We also encourage departments to review the workshop topics and (35) conversation about how best practices can be implemented within individual programs. Feedback collected from last year's participants enabled us to (36) the workshop structure and introduce more interactive components this year.
If you have any questions or require accommodations, please contact the Faculty Development Office. We look forward to seeing many of you at the upcoming sessions.
Sincerely,
Doctor Chen
Dean of Faculty Development
University of Excellence`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "...opening session... will (31) an overview...",
          options: ["limit", "provide", "remove", "reject"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'provide' vì 'provide an overview' là cụm từ cố định nghĩa 'cung cấp cái nhìn tổng quan'. Ngữ pháp: 'Will provide' thì tương lai đơn (will + V nguyên thể) chỉ kế hoạch tương lai. Collocation: 'provide overview', 'evidence-based teaching methods'. Từ vựng: 'limit' nghĩa 'hạn chế'; 'remove' nghĩa 'loại bỏ'; 'reject' nghĩa 'từ chối'."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "...tasks to (32) deeper engagement among participants.",
          options: ["prohibit", "discourage", "facilitate", "prevent"],
          correct: 2,
          explanation: "Đáp án đúng là (C) 'facilitate' nghĩa 'thúc đẩy/tạo điều kiện'. Ngữ pháp: 'To facilitate' infinitive of purpose chỉ mục đích của 'tasks'. Collocation: 'facilitate engagement', 'among participants'. Từ vựng: 'prohibit' nghĩa 'cấm'; 'discourage' nghĩa 'làm nản lòng'; 'prevent' nghĩa 'ngăn chặn', gần nhưng 'facilitate' tự nhiên hơn."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...certificate may be used... to (33) professional growth...",
          options: ["demonstrate", "replace", "reduce", "prevent"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'demonstrate' nghĩa 'minh chứng/chứng minh'. Ngữ pháp: 'To demonstrate' infinitive of purpose chỉ mục đích của 'used'. Collocation: 'demonstrate professional growth'. Từ vựng: 'replace' nghĩa 'thay thế'; 'reduce' nghĩa 'giảm'; 'prevent' nghĩa 'ngăn chặn'."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "Early registration helps us (34) resources efficiently...",
          options: ["allocate", "deny", "overuse", "ignore"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'allocate' nghĩa 'phân bổ'. Ngữ pháp: 'Helps us allocate' với 'help + object + V nguyên thể' (không 'to') chỉ sự hỗ trợ. Collocation: 'allocate resources efficiently'. Từ vựng: 'deny' nghĩa 'từ chối'; 'overuse' nghĩa 'lạm dụng'; 'ignore' nghĩa 'bỏ qua'."
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "...departments to review the workshop topics and (35) conversation...",
          options: ["delay", "promote", "limit", "avoid"],
          correct: 1,
          explanation: "Đáp án đúng là (B) 'promote' nghĩa 'thúc đẩy'. Ngữ pháp: 'Encourage ... to review ... and promote' với 'encourage + object + to V' và 'and' nối hai động từ song song. Collocation: 'promote conversation'. Từ vựng: 'delay' nghĩa 'trì hoãn'; 'limit' nghĩa 'hạn chế'; 'avoid' nghĩa 'tránh'."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "Feedback... enabled us to (36) the workshop structure...",
          options: ["refine", "pause", "ignore", "cancel"],
          correct: 0,
          explanation: "Đáp án đúng là (A) 'refine' nghĩa 'tinh chỉnh/cải thiện'. Ngữ pháp: 'Enabled us to refine' với 'enable + object + to V' chỉ cho phép/khả năng. Collocation: 'refine structure', 'introduce components'. Từ vựng: 'pause' nghĩa 'tạm dừng'; 'ignore' nghĩa 'bỏ qua'; 'cancel' nghĩa 'hủy'."
        },
        {
          id: 37,
          type: "comprehension",
          question: "(37) - What is the main purpose of the workshop series?",
          options: [
            "To replace outdated university policies",
            "To improve teaching practices and integrate new technologies",
            "To evaluate faculty performance",
            "To train new administrative staff"
          ],
          correct: 1,
          explanation: "Email nêu rõ: hỗ trợ cải thiện phương pháp giảng dạy và tích hợp công nghệ. Ngữ pháp: 'Are designed to support' sử dụng bị động + infinitive of purpose chỉ mục đích chính. Collocation: 'support faculty in enhancing', 'integrating new technologies'. Kỹ năng đọc hiểu: Xác định mục đích chính từ câu đầu tiên."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is required to receive the certificate?",
          options: [
            "Teach a demonstration class",
            "Complete at least 75% of the workshops",
            "Submit a final report",
            "Attend every session"
          ],
          correct: 1,
          explanation: "Email ghi: 'complete at least 75% of the workshops'. Ngữ pháp: 'Who complete' là mệnh đề quan hệ (relative clause) với 'who' chỉ người (faculty members), 'at least' nghĩa 'ít nhất'. Collocation: 'complete workshops', 'receive certificate'. Kỹ năng đọc hiểu: Xác định yêu cầu cụ thể từ đoạn thứ hai."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - Why is early registration important?",
          options: [
            "It provides discounts for attendees",
            "It helps the team allocate resources efficiently",
            "It confirms attendance for grading purposes",
            "It guarantees a certificate"
          ],
          correct: 1,
          explanation: "Email: Early registration helps 'allocate resources efficiently'. Ngữ pháp: 'Helps us allocate' sử dụng 'help + object + V nguyên thể' (không 'to'). Collocation: 'early registration helps allocate resources'. Kỹ năng đọc hiểu: Xác định lợi ích từ câu giải thích."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - Which of the following was improved this year based on feedback?",
          options: [
            "The number of required assignments",
            "Interactive components and structure",
            "Room assignments",
            "Workshop duration"
          ],
          correct: 1,
          explanation: "Email: feedback enabled them to refine structure and add more interactive components. Ngữ pháp: 'Enabled us to refine' với 'enable + to V' chỉ kết quả từ feedback. 'Collected from' là past participle làm tính từ bổ nghĩa. Collocation: 'interactive components', 'refine structure'. Kỹ năng đọc hiểu: Xác định cải thiện từ đoạn cuối cùng của email."
        }
      ]
    },
    part7: {
      title: "PART 7: Multiple Texts (Advertisement + Email)",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**GreenLife Fitness Advertisement**
Transform Your Wellness with Personalized Training Plans
Achieve your fitness goals sustainably with our certified trainers. New clients get a free initial consultation! Programs start weekly.
**Our Services:**
1. **Custom Workout Designs** – Tailored plans based on your goals and health history. Visit greenlifefitness.com for sample routines and trainer bios.
2. **Nutrition Guidance** – Balanced meal plans integrated with exercise.
3. **Virtual Sessions** – Flexible online coaching for busy lifestyles.
4. **Group Challenges** – Join community events for motivation and fun.
Email us at contact@greenlifefitness.com with your details. Expect a reply within 24 hours to customize your plan.
---
**Email Message**
**To:** contact@greenlifefitness.com
**From:** john.doe@email.com
**Date:** September 5
**Subject:** Interest in Personalized Training
I came across your ad in a health magazine and would like to start a training program for weight management and better sleep. I'm a 35-year-old office worker with no prior experience. Could you include nutrition tips? Available for virtual sessions evenings after 7:00 P.M. Please email back with options.
Best,
John Doe
456 Health St., Austin, TX 78701
555-987-6543`,
      questions: [
        {
          id: 41,
          question: "Why visit the GreenLife Fitness website?",
          options: ["To join challenges", "To see sample routines", "To pay fees", "To book nutrition"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Visit... for sample routines and trainer bios'. Ngữ pháp: 'Visit ... for + noun' dùng giới từ 'for' chỉ mục đích. 'Based on' cụm giới từ chỉ cơ sở. Collocation: 'sample routines', 'trainer bios'. Kỹ năng đọc hiểu: Mục đích từ phần Custom Workout."
        },
        {
          id: 42,
          question: "How did Mr. Doe find the advertisement?",
          options: ["From a friend", "Via email", "In a health magazine", "Online"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'your ad in a health magazine'. Ngữ pháp: 'Came across' là phrasal verb nghĩa 'tình cờ gặp', 'in a health magazine' giới từ 'in' chỉ vị trí. Collocation: 'came across ad', 'health magazine'. Kỹ năng đọc hiểu: Nguồn từ email."
        },
        {
          id: 43,
          question: "What are Mr. Doe's goals?",
          options: ["Team sports", "Weight management and sleep", "Marathon training", "Muscle building"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'weight management and better sleep'. Ngữ pháp: 'For weight management and better sleep' giới từ 'for' chỉ mục đích, 'and' nối hai danh từ song song. Collocation: 'weight management', 'better sleep'. Kỹ năng đọc hiểu: Mục tiêu từ email."
        },
        {
          id: 44,
          question: "What does Mr. Doe NOT request?",
          options: ["Initial consultation", "Group challenges", "Virtual sessions", "Nutrition tips"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì email không đề cập group challenges; tập trung cá nhân hóa. Ngữ pháp: 'Could you include' modal 'could' + V nguyên thể chỉ yêu cầu lịch sự. Collocation: 'group challenges'. Kỹ năng đọc hiểu: So sánh yêu cầu giữa ad và email."
        },
        {
          id: 45,
          question: "What will Mr. Doe likely get within 24 hours?",
          options: ["Group event invite", "A reply with plan", "A free consultation", "Payment details"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Expect a reply within 24 hours to customize your plan'. Ngữ pháp: 'To customize' infinitive of purpose chỉ mục đích, 'within 24 hours' giới từ 'within' chỉ khoảng thời gian. Collocation: 'reply within 24 hours', 'customize plan'. Kỹ năng đọc hiểu: Dự đoán từ thông tin ad."
        },
        {
          id: 46,
          question: "What is offered to new clients?",
          options: ["Extra sessions", "Free initial consultation", "Lifetime membership", "Discounted gear"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'New clients get a free initial consultation'. Ngữ pháp: 'Get a free ...' thì hiện tại đơn chỉ ưu đãi chung, 'initial' tính từ bổ nghĩa 'consultation'. Collocation: 'free initial consultation'. Kỹ năng đọc hiểu: Ưu đãi trực tiếp từ ad."
        },
        {
          id: 47,
          question: "What is Mr. Doe's availability?",
          options: ["Anytime", "Weekends", "Evenings after 7:00 P.M.", "Mornings"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'virtual sessions evenings after 7:00 P.M.'. Ngữ pháp: 'Available for + noun' giới từ 'for' chỉ sẵn sàng, 'after 7:00 P.M.' giới từ 'after' chỉ thời gian. Collocation: 'available for sessions', 'after 7:00 P.M.'. Kỹ năng đọc hiểu: Lịch trình từ email."
        },
        {
          id: 48,
          question: "Mr. Doe has __________ experience.",
          options: ["Professional", "No prior", "Extensive", "Years of"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'no prior experience'. Ngữ pháp: 'With no prior experience' giới từ 'with' chỉ tình trạng, 'prior' tính từ nghĩa 'trước đó'. Collocation: 'no prior experience'. Kỹ năng đọc hiểu: Nền tảng từ email."
        },
        {
          id: 49,
          question: "What does Mr. Doe prefer for sessions?",
          options: ["Recorded", "Group", "Virtual", "In-person"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Available for virtual sessions'. Ngữ pháp: 'Available for virtual sessions' giới từ 'for' chỉ loại, 'virtual' tính từ bổ nghĩa 'sessions'. Collocation: 'virtual sessions', 'online coaching'. Kỹ năng đọc hiểu: Định dạng từ email."
        },
        {
          id: 50,
          question: "What service integrates with exercise?",
          options: ["Sample routines", "Nutrition guidance", "Community events", "Trainer bios"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Nutrition Guidance – Balanced meal plans integrated with exercise'. Ngữ pháp: 'Integrated with' past participle + giới từ 'with' chỉ sự kết hợp, làm tính từ bổ nghĩa 'meal plans'. Collocation: 'integrated with exercise', 'nutrition guidance'. Kỹ năng đọc hiểu: Dịch vụ từ ad."
        }
      ]
    },
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `Emma (09:15): Dentist appt at 10—can you cover my shift start?
Tom (09:16): Sure, Emma. I'll handle until noon. Emergency?
Emma (09:18): Routine checkup, but better safe. Thanks—coffee run later?
Tom (09:20): Deal. Traffic light today?
Emma (10:45): All good, no cavities! Back by 11:30.`,
      questions: [
        {
          id: 51,
          question: "What is Emma doing at 10?",
          options: ["Traffic check", "Dentist appointment", "Shift work", "Coffee run"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Dentist appt at 10'. Ngữ pháp: 'Can you cover' modal 'can' + V nguyên thể chỉ yêu cầu, dấu gạch ngang (—) nối câu hỏi. Collocation: 'dentist appointment', 'cover shift'. Kỹ năng đọc hiểu: Lịch hẹn từ tin đầu."
        },
        {
          id: 52,
          question: "What does Tom offer?",
          options: ["Buy coffee", "Cover shift until noon", "Join the checkup", "Cancel the appt"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'I'll handle until noon'. Ngữ pháp: 'I'll handle' thì tương lai đơn (will + V) chỉ cam kết, 'until noon' giới từ 'until' chỉ thời gian kết thúc. Collocation: 'handle shift', 'until noon'. Kỹ năng đọc hiểu: Hỗ trợ từ phản hồi."
        },
        {
          id: 53,
          question: "What is the appointment for?",
          options: ["Promotion", "Routine checkup", "Vacation planning", "Emergency"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Routine checkup'. Ngữ pháp: 'But better safe' mệnh đề tỉnh lược (but it's better to be safe), 'but' đối lập. Collocation: 'routine checkup', 'better safe'. Kỹ năng đọc hiểu: Loại hẹn từ tin Emma."
        },
        {
          id: 54,
          question: "When will Emma return?",
          options: ["09:15", "10:45", "11:30", "Noon"],
          correct: 2,
          explanation: "Đáp án đúng là (C) vì 'Back by 11:30'. Ngữ pháp: 'Back by 11:30' giới từ 'by' chỉ thời hạn tối đa, dấu chấm than (!) nhấn mạnh tích cực. Collocation: 'back by time', 'no cavities'. Kỹ năng đọc hiểu: Thời gian trở lại từ tin cuối."
        },
        {
          id: 55,
          question: "What does Emma offer later?",
          options: ["Traffic update", "Coffee run", "Dentist referral", "Shift extension"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'coffee run later?'. Ngữ pháp: 'Coffee run later?' câu hỏi tỉnh lược, dấu gạch ngang (—) nối lời cảm ơn. Collocation: 'coffee run', 'later'. Kỹ năng đọc hiểu: Đề nghị từ tin Emma."
        },
        {
          id: 56,
          question: "What can be inferred about Tom and Emma?",
          options: ["Dentist colleagues", "Work partners", "Boss-employee", "Strangers"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì ngữ cảnh shift cover và casual 'Deal'. Ngữ pháp: Trong tin nhắn ngắn gọn, sử dụng từ viết tắt 'appt' (appointment). Collocation: 'cover shift', 'coffee run'. Kỹ năng đọc hiểu: Mối quan hệ đồng nghiệp từ ngữ cảnh."
        },
        {
          id: 57,
          question: "Why does Emma go to the dentist?",
          options: ["Vacation prep", "Better safe", "Promotion req", "Pain"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'better safe'. Ngữ pháp: 'Better safe' tỉnh lược từ 'it's better to be safe', 'but' nối ý chính. Collocation: 'routine checkup', 'better safe'. Kỹ năng đọc hiểu: Lý do phòng ngừa từ email."
        },
        {
          id: 58,
          question: "What does Tom ask about?",
          options: ["Coffee type", "Traffic", "Shift end", "Cavities"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'Traffic light today?'. Ngữ pháp: 'Traffic light today?' câu hỏi tỉnh lược, 'light' tính từ nghĩa 'ít tắc nghẽn'. Collocation: 'traffic light', 'today'. Kỹ năng đọc hiểu: Câu hỏi từ tin Tom."
        },
        {
          id: 59,
          question: "What is the result of the appointment?",
          options: ["Emergency", "All good", "Rescheduled", "Cavities found"],
          correct: 1,
          explanation: "Đáp án đúng là (B) vì 'All good, no cavities!'. Ngữ pháp: 'All good, no cavities!' dấu phẩy (,) nối hai cụm tích cực, 'no' phủ định danh từ. Collocation: 'no cavities', 'all good'. Kỹ năng đọc hiểu: Kết quả từ tin cuối."
        },
        {
          id: 60,
          question: "What does 'Deal' mean in Tom's reply?",
          options: ["Agreement to coffee", "Delay", "Question", "Refusal"],
          correct: 0,
          explanation: "Đáp án đúng là (A) vì 'Deal' đáp lại coffee offer. Ngữ pháp: 'Deal.' từ đơn lẻ nghĩa 'đồng ý', thường dùng trong giao tiếp thân mật. Collocation: 'Deal', 'sure'. Kỹ năng đọc hiểu: Suy luận ý nghĩa từ ngữ cảnh."
        }
      ]
    }
  }
};
</file>

<file path="src/hooks/useOnlineUsers.js">
// src/hooks/useOnlineUsers.js
import { useEffect, useState, useRef } from 'react';
import { onValue, ref, query, limitToLast } from 'firebase/database';
import { onSnapshot, doc } from 'firebase/firestore';
import { rtdb, db } from '../config/firebase.js';

/**
 * Hook useOnlineUsers – Theo dõi số lượng người dùng online (RTDB) và tổng người dùng (Firestore)
 * 
 * - onlineCount: Số người dùng hiện đang online (dựa trên /presence, online: true)
 * - totalUsers: Tổng số người dùng duy nhất (lấy từ Firestore /stats/appUsage)
 * 
 * Tối ưu:
 * - Chỉ lắng nghe thay đổi cần thiết
 * - Tránh re-render không cần thiết bằng useRef
 * - Xử lý lỗi và trạng thái loading
 * - Hỗ trợ cả production và emulator
 */
export const useOnlineUsers = () => {
  const [onlineCount, setOnlineCount] = useState(0);
  const [totalUsers, setTotalUsers] = useState(0);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // useRef để lưu unsubscribe functions, tránh memory leak
  const unsubscribers = useRef([]);

  useEffect(() => {
    let isMounted = true;
    setLoading(true);
    setError(null);

    // === 1. Lắng nghe số người online từ Realtime Database (/presence) ===
    try {
      const presenceRef = ref(rtdb, 'presence');
      // Dùng query để tối ưu (nếu dữ liệu lớn, chỉ lấy 1000 bản ghi gần nhất)
      const presenceQuery = query(presenceRef, limitToLast(1000));

      const unsubscribePresence = onValue(
        presenceQuery,
        (snapshot) => {
          if (!isMounted) return;

          const data = snapshot.val();
          if (data && typeof data === 'object') {
            const count = Object.values(data).filter(
              (user) => user?.online === true && 
                        user?.lastSeen && 
                        // Optional: chỉ tính người online trong 2 phút gần nhất
                        Date.now() - new Date(user.lastSeen).getTime() < 2 * 60 * 1000
            ).length;
            setOnlineCount(count);
          } else {
            setOnlineCount(0);
          }
          setLoading(false);
        },
        (err) => {
          if (!isMounted) return;
          console.error('Lỗi lắng nghe presence:', err);
          setError(err.message);
          setOnlineCount(0);
          setLoading(false);
        }
      );

      unsubscribers.current.push(unsubscribePresence);
    } catch (err) {
      console.error('Khởi tạo presence listener thất bại:', err);
      setError(err.message);
    }

    // === 2. Lắng nghe tổng người dùng từ Firestore (/stats/appUsage) ===
    try {
      const statsDocRef = doc(db, 'stats', 'appUsage');

      const unsubscribeStats = onSnapshot(
        statsDocRef,
        (docSnap) => {
          if (!isMounted) return;

          if (docSnap.exists()) {
            const data = docSnap.data();
            const total = data?.totalUsers ?? 0;
            setTotalUsers(Number(total));
          } else {
            setTotalUsers(0);
          }
          setLoading(false);
        },
        (err) => {
          if (!isMounted) return;
          console.error('Lỗi lắng nghe appUsage:', err);
          setError(err.message);
          setTotalUsers(0);
          setLoading(false);
        }
      );

      unsubscribers.current.push(unsubscribeStats);
    } catch (err) {
      console.error('Khởi tạo stats listener thất bại:', err);
      setError(err.message);
    }

    // === Cleanup khi component unmount ===
    return () => {
      isMounted = false;
      unsubscribers.current.forEach(unsub => {
        try { unsub?.(); } catch (e) {}
      });
      unsubscribers.current = [];
    };
  }, []);

  return {
    onlineCount,
    totalUsers,
    loading,
    error,
    // Helper: reload thủ công (nếu cần)
    refetch: () => {
      // Kích hoạt lại bằng cách clear cache (không cần thiết với onValue/onSnapshot)
    }
  };
};
</file>

<file path="vite.config.js">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    strictPort: false,
    open: true,
    cors: true,
  },
  build: {
    outDir: 'dist',
    sourcemap: false,
    target: 'esnext',
    minify: 'terser',
    commonjsOptions: {
      transformMixedEsModules: true,
    },
  },
  optimizeDeps: {
    exclude: ['firebase', 'firebase/app', 'firebase/auth', 'firebase/firestore', 'firebase/storage'],
  },
})
</file>

<file path="src/components/footer/Footer.jsx">
import React, { useState, useCallback, useMemo, memo } from 'react';
import {
  Mail, Phone, MapPin, Facebook, Youtube, MessageCircle,
  BookOpen, Zap, Users, HelpCircle, Send,
  ChevronRight, Heart, TrendingUp, Award, Github,
  Sparkles, ExternalLink, Rocket, AlertCircle
} from 'lucide-react';

// --- SUB-COMPONENTS (MEMOIZED) ---

const FooterCard = memo(({ title, children, icon: Icon }) => (
  <div className="flex flex-col gap-6 animate-in fade-in duration-500">
    <div className="flex items-center gap-3">
      <div className="p-2 bg-blue-100 rounded-lg text-blue-600">
        <Icon size={20} strokeWidth={2.5} />
      </div>
      <h3 className="text-lg font-bold text-slate-800 tracking-tight">{title}</h3>
    </div>
    <div className="flex flex-col gap-3">{children}</div>
  </div>
));

FooterCard.displayName = 'FooterCard';

const SmartLink = memo(({ label, href, icon: Icon }) => (
  <a
    href={href}
    className="group flex items-center justify-between p-3 rounded-xl hover:bg-white hover:shadow-md transition-all duration-300 border border-transparent hover:border-blue-50 cursor-pointer"
  >
    <div className="flex items-center gap-3">
      <div className="w-8 h-8 rounded-full bg-slate-100 group-hover:bg-blue-600 flex items-center justify-center transition-colors duration-300">
        <Icon size={14} className="text-slate-500 group-hover:text-white" />
      </div>
      <span className="text-sm font-semibold text-slate-600 group-hover:text-blue-700">{label}</span>
    </div>
    <ChevronRight size={14} className="opacity-0 group-hover:opacity-100 text-blue-400 transition-all duration-300" />
  </a>
));

SmartLink.displayName = 'SmartLink';

const SocialButton = memo(({ href, icon: Icon, bgGradient, title }) => (
  <a 
    href={href} 
    className={`w-11 h-11 rounded-full ${bgGradient} text-white flex items-center justify-center shadow-lg hover:shadow-xl hover:scale-110 transition-transform duration-300`}
    title={title}
  >
    <Icon size={20} />
  </a>
));

SocialButton.displayName = 'SocialButton';

const StatusMessage = memo(({ message, type }) => (
  <div
    className={`flex items-center gap-3 text-sm px-5 py-3.5 rounded-xl font-semibold transition-all border-2 animate-in fade-in duration-300 ${
      type === 'success'
        ? 'bg-green-50 text-green-700 border-green-300'
        : type === 'error'
        ? 'bg-red-50 text-red-700 border-red-300'
        : 'bg-blue-50 text-blue-700 border-blue-300'
    }`}
  >
    <AlertCircle size={18} className="flex-shrink-0" />
    <span>{message}</span>
  </div>
));

StatusMessage.displayName = 'StatusMessage';

const ContactInfo = memo(() => (
  <div className="p-6 bg-[#00358E] rounded-[24px] text-white space-y-4 shadow-xl">
    <div className="flex items-center gap-4 group cursor-pointer hover:opacity-80 transition-opacity">
      <div className="w-10 h-10 rounded-full bg-blue-800 group-hover:bg-[#FF7D00] flex items-center justify-center transition-colors duration-300">
        <Mail size={18} />
      </div>
      <div>
        <p className="text-[10px] uppercase font-bold text-blue-300">Email hỗ trợ</p>
        <p className="text-sm font-bold">lekhoale3009@gmail.com</p>
      </div>
    </div>
    <div className="flex items-center gap-4 group cursor-pointer hover:opacity-80 transition-opacity">
      <div className="w-10 h-10 rounded-full bg-blue-800 group-hover:bg-[#FF7D00] flex items-center justify-center transition-colors duration-300">
        <Phone size={18} />
      </div>
      <div>
        <p className="text-[10px] uppercase font-bold text-blue-300">Hotline</p>
        <p className="text-sm font-bold">+84 383 196 830</p>
      </div>
    </div>
  </div>
));

ContactInfo.displayName = 'ContactInfo';

const DiscordForm = memo(({ isSubmitting, discord, setDiscord, message, setMessage, discordStatus, onSubmit }) => (
  <div className="lg:col-span-7 bg-gradient-to-br from-white via-blue-50 to-white p-8 rounded-[32px] shadow-2xl shadow-blue-100/50 border border-blue-100 relative overflow-hidden animate-in fade-in duration-500">
    {/* Decorative background elements */}
    <div className="absolute -top-20 -right-20 w-40 h-40 bg-blue-200 rounded-full blur-3xl opacity-20 pointer-events-none" />
    <div className="absolute -bottom-20 -left-20 w-40 h-40 bg-orange-200 rounded-full blur-3xl opacity-10 pointer-events-none" />
    
    <div className="relative z-10 space-y-6">
      {/* Header with Icon */}
      <div className="flex items-center justify-center gap-4 pb-2">
        <div className="p-4 bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl shadow-lg shadow-blue-300/50 hover:scale-110 transition-transform duration-300">
          <MessageCircle className="w-7 h-7 text-yellow-300" />
        </div>
        <div>
          <h3 className="text-2xl font-black text-[#00358E]">Trao Đổi & Kết Nối</h3>
          <p className="text-xs text-slate-500 font-semibold">Liên hệ trực tiếp với đội ngũ</p>
        </div>
      </div>

      {/* Subtitle */}
      <p className="text-center text-slate-600 text-sm leading-relaxed px-2">
        Có câu hỏi hoặc đề xuất? Gửi tin nhắn trực tiếp đến đội ngũ HUFLIT Exam qua Discord ngay!
      </p>

      {/* Form Fields */}
      <div className="space-y-3 pt-2">
        {/* Discord Username Input */}
        <div className="relative animate-in fade-in duration-500" style={{ animationDelay: '100ms' }}>
          <label className="block text-xs font-bold text-slate-700 mb-2 uppercase tracking-wide">
            👤 Discord Username
          </label>
          <input
            type="text"
            value={discord}
            onChange={(e) => setDiscord(e.target.value)}
            placeholder="Ví dụ: user#1234"
            disabled={isSubmitting}
            className="w-full px-5 py-3.5 rounded-xl bg-white border-2 border-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed placeholder:text-slate-400"
          />
        </div>

        {/* Message Textarea */}
        <div className="relative animate-in fade-in duration-500" style={{ animationDelay: '200ms' }}>
          <label className="block text-xs font-bold text-slate-700 mb-2 uppercase tracking-wide">
            💬 Tin Nhắn Của Bạn
          </label>
          <textarea
            value={message}
            onChange={(e) => setMessage(e.target.value)}
            placeholder="Chia sẻ tâm sự, góp ý hoặc đặt câu hỏi của bạn... (Tối thiểu 10 ký tự)"
            disabled={isSubmitting}
            className="w-full px-5 py-3.5 rounded-xl bg-white border-2 border-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm font-medium transition-all duration-300 resize-none h-24 disabled:opacity-50 disabled:cursor-not-allowed placeholder:text-slate-400"
          />
          <div className="absolute bottom-3 right-3 text-xs font-semibold text-slate-400">
            {message.length}/10
          </div>
        </div>
        
        {/* Submit Button */}
        <button
          onClick={onSubmit}
          disabled={isSubmitting}
          className="w-full py-4 bg-gradient-to-r from-[#00358E] to-blue-700 hover:from-blue-800 hover:to-blue-900 disabled:from-slate-400 disabled:to-slate-500 text-white rounded-xl font-bold flex items-center justify-center gap-3 shadow-xl shadow-blue-300/50 transition-all duration-300 disabled:cursor-not-allowed text-base active:scale-95 animate-in fade-in duration-500"
          style={{ animationDelay: '300ms' }}
        >
          {isSubmitting ? (
            <>
              <div className="w-5 h-5 border-2.5 border-white border-t-transparent rounded-full animate-spin"></div>
              <span>Đang gửi...</span>
            </>
          ) : (
            <>
              <Send size={20} />
              <span>Gửi Tin Nhắn</span>
            </>
          )}
        </button>
      </div>

      {/* Status Message with Animation */}
      {discordStatus.message && (
        <StatusMessage message={discordStatus.message} type={discordStatus.type} />
      )}

      {/* Social Links */}
      <div className="pt-4 border-t border-slate-200 flex justify-center gap-4">
        <SocialButton href="#" icon={Facebook} bgGradient="bg-gradient-to-br from-[#1877F2] to-blue-700" title="Facebook" />
        <SocialButton href="#" icon={Github} bgGradient="bg-gradient-to-br from-[#24292F] to-black" title="Github" />
        <SocialButton href="#" icon={Youtube} bgGradient="bg-gradient-to-br from-[#FF0000] to-red-700" title="Youtube" />
      </div>
    </div>
  </div>
));

DiscordForm.displayName = 'DiscordForm';

const TopSection = memo(({ isSubmitting, discord, setDiscord, message, setMessage, discordStatus, onSubmit }) => (
  <div className="grid grid-cols-1 lg:grid-cols-12 gap-12 mb-20 items-center">
    <div className="lg:col-span-5 space-y-6">
      <div className="inline-flex items-center gap-2 px-4 py-2 bg-blue-50 rounded-full border border-blue-100 text-blue-700 font-bold text-xs uppercase tracking-widest animate-in fade-in duration-500">
        <Rocket size={14} /> Chinh phục điểm cao ngay hôm nay
      </div>
      <h2 className="text-4xl md:text-5xl font-black text-[#00358E] leading-tight animate-in fade-in duration-500" style={{ animationDelay: '100ms' }}>
        Nâng tầm kỹ năng <br /> 
        <span className="text-[#FF7D00] relative">
          Toeic & English
          <svg className="absolute -bottom-2 left-0 w-full" height="8" viewBox="0 0 100 8" preserveAspectRatio="none">
            <path d="M0 7C25 2 75 2 100 7" stroke="#FF7D00" strokeWidth="3" fill="none" opacity="0.3" />
          </svg>
        </span>
      </h2>
      <p className="text-slate-500 text-lg max-w-md animate-in fade-in duration-500" style={{ animationDelay: '200ms' }}>
        Hệ thống luyện thi thông minh giúp bạn tối ưu hóa thời gian và đạt kết quả mong muốn với lộ trình cá nhân hóa.
      </p>
    </div>

    <DiscordForm 
      isSubmitting={isSubmitting}
      discord={discord}
      setDiscord={setDiscord}
      message={message}
      setMessage={setMessage}
      discordStatus={discordStatus}
      onSubmit={onSubmit}
    />
  </div>
));

TopSection.displayName = 'TopSection';

const BottomSection = memo(() => (
  <div className="pt-8 border-t border-slate-200 flex flex-col md:flex-row justify-between items-center gap-6">
    <div className="flex items-center gap-2">
      <div className="w-8 h-8 bg-[#00358E] rounded-lg flex items-center justify-center text-white font-black text-xs">H</div>
      <span className="text-slate-400 text-sm font-medium">© 2026 <span className="text-slate-900">HUFLIT Exam</span>. All rights reserved.</span>
    </div>

    <div className="flex items-center gap-8">
      {['Điều khoản', 'Bảo mật', 'Cookies'].map((item, i) => (
        <a key={i} href="#" className="text-sm text-slate-500 hover:text-blue-600 font-semibold transition-colors duration-300">{item}</a>
      ))}
    </div>

    <div className="flex items-center gap-1 text-slate-400 text-sm font-medium">
      Crafted with <Heart size={14} className="text-red-500 fill-red-500 animate-pulse" /> by <span className="text-slate-900 font-bold ml-1">Khoale</span>
    </div>
  </div>
));

BottomSection.displayName = 'BottomSection';

// --- MAIN COMPONENT ---
const Footer = memo(() => {
  const [discord, setDiscord] = useState('');
  const [message, setMessage] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [discordStatus, setDiscordStatus] = useState({ type: null, message: '' });

  // Handle form submission with Discord webhook integration
  const handleDiscordSubmit = useCallback(async (e) => {
    e?.preventDefault();
    
    // Validate inputs
    if (!discord.trim()) {
      setDiscordStatus({ type: 'error', message: 'Vui lòng nhập Discord username' });
      return;
    }
    
    if (message.length < 10) {
      setDiscordStatus({ type: 'error', message: 'Tin nhắn phải có ít nhất 10 ký tự' });
      return;
    }

    setIsSubmitting(true);
    setDiscordStatus({ type: 'info', message: 'Đang gửi...' });

    try {
      // Send message to Discord webhook
      const webhookUrl = 'https://discord.com/api/webhooks/1456551898457833564/Mp-FcK12R8udXBLjEtNCnWcC71hX8aYuj00m_PwmoFPzuiY7wejp9_q7qYCvP-u0LWiH';
      
      const response = await fetch(webhookUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          username: 'HUFLIT Exam System',
          avatar_url: 'https://cdn-icons-png.flaticon.com/512/3588/3588592.png',
          embeds: [
            {
              color: 0x00358E,
              title: '📬 Tin Nhắn Mới Từ Khách Hàng',
              fields: [
                {
                  name: '👤 Discord Username',
                  value: discord,
                  inline: true,
                },
                {
                  name: '🕐 Thời gian',
                  value: new Date().toLocaleString('vi-VN'),
                  inline: true,
                },
                {
                  name: '💬 Tin Nhắn',
                  value: message,
                  inline: false,
                },
              ],
              footer: {
                text: 'HUFLIT Exam - Discord Integration',
              },
              timestamp: new Date().toISOString(),
            },
          ],
        }),
      });

      if (!response.ok) {
        throw new Error('Failed to send message');
      }
      
      // Success feedback
      setDiscordStatus({ type: 'success', message: 'Tin nhắn đã được gửi thành công! Cảm ơn bạn 🎉' });
      setDiscord('');
      setMessage('');
      
      // Clear success message after 5 seconds
      setTimeout(() => setDiscordStatus({ type: null, message: '' }), 5000);
    } catch (error) {
      console.error('Discord submission error:', error);
      setDiscordStatus({ type: 'error', message: 'Có lỗi xảy ra, vui lòng thử lại' });
    } finally {
      setIsSubmitting(false);
    }
  }, [discord, message]);

  // Memoize link data
  const learningLinks = useMemo(() => [
    { label: 'Thư viện đề thi', icon: Sparkles },
    { label: 'Lộ trình học tập', icon: TrendingUp },
    { label: 'Mẹo làm bài thi', icon: Zap },
  ], []);

  const supportLinks = useMemo(() => [
    { label: 'Cộng đồng thảo luận', icon: MessageCircle },
    { label: 'Câu hỏi thường gặp', icon: HelpCircle },
    { label: 'Vinh danh thủ khoa', icon: Award },
  ], []);

  return (
    <footer className="relative bg-[#F8FAFC] pt-24 pb-12 overflow-hidden border-t border-slate-200">
      {/* Background Decorative Elements */}
      <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-20 pointer-events-none" />
      <div className="absolute -top-24 -left-24 w-64 h-64 bg-blue-200 rounded-full blur-[100px] opacity-30 pointer-events-none" />
      <div className="absolute top-1/2 -right-24 w-64 h-64 bg-orange-200 rounded-full blur-[100px] opacity-20 pointer-events-none" />

      <div className="max-w-7xl mx-auto px-6 relative z-10">
        
        {/* TOP SECTION */}
        <TopSection 
          isSubmitting={isSubmitting}
          discord={discord}
          setDiscord={setDiscord}
          message={message}
          setMessage={setMessage}
          discordStatus={discordStatus}
          onSubmit={handleDiscordSubmit}
        />

        {/* MIDDLE SECTION: LINKS GRID */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16 mb-20">
          <FooterCard title="Tài Nguyên Học Tập" icon={BookOpen}>
            {learningLinks.map((link, i) => (
              <SmartLink key={i} label={link.label} href="#" icon={link.icon} />
            ))}
          </FooterCard>

          <FooterCard title="Hỗ Trợ Thành Viên" icon={Users}>
            {supportLinks.map((link, i) => (
              <SmartLink key={i} label={link.label} href="#" icon={link.icon} />
            ))}
          </FooterCard>

          <FooterCard title="Liên Hệ Trực Tiếp" icon={Phone}>
            <ContactInfo />
          </FooterCard>
        </div>

        {/* BOTTOM SECTION */}
        <BottomSection />
      </div>
    </footer>
  );
});

Footer.displayName = 'Footer';

export default Footer;
</file>

<file path="src/components/FullExam/FullExamMode.jsx">
import React, { useState, useEffect, useCallback, useMemo, memo, useRef } from 'react';
import { Clock, Play, Pause, AlertCircle, BookOpen, ChevronRight, ChevronLeft, Trophy, Zap, CheckCircle, XCircle, Target, TrendingUp, Award, FileText, ChevronDown, Headphones, Send, ArrowRight, Flag, RotateCcw, Lock } from 'lucide-react';
import ContentDisplay from '../Display/ContentDisplay';
import { EXAM_LIST, getExamById } from '../../data/examData';
import { useUserProgress } from '../../hooks/useUserProgress';
import { useAutoSaveProgress } from '../../hooks/useAutoSaveProgress';

// ===== THEME =====
const COLORS = {
  blue: '#0066CC',
  darkBlue: '#004399',
  lightBlue: '#E6F2FF',
  orange: '#FF8C42',
  lightOrange: '#FFF3E6',
  slate: '#6B7280',
  success: '#059669',
  danger: '#DC2626',
  white: '#FFFFFF',
};

// ===== EXAM CONFIGURATION =====
const EXAM_STRUCTURE = {
  listening: {
    title: 'LISTENING',
    totalTime: 1800,
    parts: 4,
    questionsPerPart: 5,
    totalQuestions: 20,
    totalPoints: 100,
    pointsPerQuestion: 5,
    listenings: 2,
  },
  reading: {
    title: 'READING',
    totalTime: 3600,
    parts: 4,
    questionsPerPart: 10,
    totalQuestions: 40,
    totalPoints: 100,
    pointsPerQuestion: 2.5,
  }
};

const getCEFRLevel = (score) => {
  if (score >= 75) return { level: 'C1', label: 'Advanced', color: '#059669', range: '75-100' };
  if (score >= 50) return { level: 'B2', label: 'Upper Intermediate', color: '#0066CC', range: '50-74' };
  if (score >= 25) return { level: 'B1', label: 'Intermediate', color: '#FF8C42', range: '25-49' };
  if (score >= 15) return { level: 'A2', label: 'Elementary', color: '#F59E0B', range: '15-24' };
  return { level: 'A1', label: 'Beginner', color: '#DC2626', range: '0-14' };
};

const READING_TIME = 3600;
const LISTENING_TIME = 1800;
const WARNING_TIME = 300;

// ===== MODERN DROPDOWN COMPONENT =====
const ModernDropdown = memo(({ examId, setExamId, isOpen, setIsOpen }) => {
  const selectedExam = useMemo(() => EXAM_LIST.find(e => e.id === examId), [examId]);

  return (
    <div className="relative">
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="w-full px-5 py-3.5 bg-white border-2 border-slate-200 rounded-xl text-left font-semibold flex items-center justify-between hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 ease-out"
        style={{ 
          borderColor: isOpen ? COLORS.blue : '#e5e7eb',
          boxShadow: isOpen ? `0 0 0 3px ${COLORS.blue}20` : 'none'
        }}
        aria-expanded={isOpen}
        aria-haspopup="listbox"
      >
        <span className="text-slate-900 font-medium">{selectedExam?.title || 'Chọn bài thi'}</span>
        <ChevronDown className={`w-5 h-5 text-slate-500 transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} />
      </button>

      {isOpen && (
        <div 
          className="absolute top-full left-0 right-0 mt-3 bg-white border-2 rounded-xl shadow-2xl z-50 overflow-hidden backdrop-blur-sm"
          style={{ 
            borderColor: COLORS.blue,
            animation: 'slideDown 0.2s ease-out'
          }}
          role="listbox"
        >
          <div className="max-h-64 overflow-y-auto scrollbar-hide">
            {EXAM_LIST.map((exam, idx) => (
              <button
                key={exam.id}
                onClick={() => {
                  setExamId(exam.id);
                  setIsOpen(false);
                }}
                className="w-full px-5 py-3.5 text-left hover:bg-slate-50 flex items-center justify-between transition-colors duration-150 ease-out border-b border-slate-100 last:border-b-0 group"
                role="option"
                aria-selected={examId === exam.id}
              >
                <div className="flex-1">
                  <span className="font-medium text-slate-900 group-hover:text-blue-600 transition-colors">{exam.title}</span>
                  <p className="text-xs text-slate-500 mt-0.5">Cập nhật gần đây</p>
                </div>
                {examId === exam.id && (
                  <div className="ml-3 flex-shrink-0 animate-in fade-in duration-200">
                    <CheckCircle className="w-5 h-5" style={{ color: COLORS.blue }} />
                  </div>
                )}
              </button>
            ))}
          </div>
        </div>
      )}

      <style>{`
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `}</style>
    </div>
  );
});

ModernDropdown.displayName = 'ModernDropdown';

// ===== QUESTION CARD =====
const QuestionCard = memo(({ 
  question, 
  questionNum, 
  selectedAnswer, 
  onAnswerSelect, 
  questionKey 
}) => {
  const qText = question?.question || question?.text || '';
  const opts = question?.options || [];

  return (
    <div className="bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg hover:border-slate-300 transition-all duration-300 ease-out">
      <div className="flex items-start justify-between mb-5">
        <h4 className="text-base font-semibold text-slate-900 flex-1">
          <span className="font-bold" style={{ color: COLORS.blue }}>Q{questionNum}:</span> {qText}
        </h4>
        {selectedAnswer !== undefined && (
          <span 
            className="text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 ml-4 flex-shrink-0 animate-in fade-in duration-300" 
            style={{ backgroundColor: `${COLORS.blue}15`, color: COLORS.blue }}
          >
            <CheckCircle className="w-3.5 h-3.5" /> Done
          </span>
        )}
      </div>
      
      <div className="space-y-3">
        {opts.map((opt, i) => {
          const selected = selectedAnswer === i;
          const letter = String.fromCharCode(65 + i);
          
          return (
            <label 
              key={i} 
              className={`flex items-start cursor-pointer p-4 rounded-lg transition-all duration-200 ease-out group ${
                selected 
                  ? 'bg-blue-50 border-2 border-blue-500 shadow-md' 
                  : 'bg-slate-50 border-2 border-slate-200 hover:border-slate-300 hover:bg-slate-100'
              }`}
            >
              <input
                type="radio"
                name={questionKey}
                checked={selected}
                onChange={() => onAnswerSelect(questionNum, i)}
                className="sr-only"
              />
              <div 
                className={`w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold flex-shrink-0 transition-all duration-200 ${
                  selected 
                    ? 'text-white shadow-md' 
                    : 'text-slate-700 border-2 border-slate-300 group-hover:border-slate-400'
                }`}
                style={{
                  backgroundColor: selected ? COLORS.blue : 'transparent',
                  borderColor: selected ? COLORS.blue : '#d1d5db'
                }}
              >
                {selected ? '✓' : letter}
              </div>
              <span className={`ml-4 text-sm font-medium leading-relaxed transition-colors duration-200 ${
                selected ? 'text-slate-900 font-semibold' : 'text-slate-700 group-hover:text-slate-900'
              }`}>
                {opt}
              </span>
            </label>
          );
        })}
      </div>
    </div>
  );
}, (p, n) => p.selectedAnswer === n.selectedAnswer && p.questionNum === n.questionNum);

QuestionCard.displayName = 'QuestionCard';

// ===== PART NAVIGATION =====
const PartNavigation = memo(({ 
  currentPart, parts, answers, currentSection, questionsPerPart, onPartChange, lockedParts = []
}) => {
  const partStats = useMemo(() => {
    const stats = {};
    for (let i = 1; i <= parts; i++) {
      const partNum = currentSection === 'listening' ? i : i + 4;
      const count = Object.keys(answers).filter(key => key.startsWith(`${currentSection}-part${partNum}-`)).length;
      stats[partNum] = count;
    }
    return stats;
  }, [answers, currentSection, parts]);

  return (
    <div className="bg-white rounded-xl border border-slate-200 p-6 shadow-sm">
      <p className="text-xs font-bold text-slate-600 uppercase tracking-widest mb-5">Part Navigation</p>
      <div className="grid grid-cols-4 gap-3">
        {Array.from({ length: parts }, (_, i) => {
          const partNum = currentSection === 'listening' ? i + 1 : i + 5;
          const answered = partStats[partNum] || 0;
          const isCurrent = currentPart === partNum;
          const isComplete = answered === questionsPerPart;
          const isLocked = lockedParts.includes(partNum);
          
          return (
            <button
              key={partNum}
              onClick={() => !isLocked && onPartChange(partNum)}
              disabled={isLocked}
              className={`py-4 px-3 rounded-lg font-bold text-sm transition-all duration-200 ease-out border-2 text-center hover:shadow-md active:scale-95 relative ${
                isLocked 
                  ? 'opacity-50 cursor-not-allowed'
                  : isCurrent 
                  ? 'text-white border-blue-600 shadow-lg scale-100' 
                  : isComplete 
                  ? 'text-white border-blue-600 opacity-80' 
                  : 'text-slate-700 border-slate-200 hover:border-slate-300'
              }`}
              style={{
                backgroundColor: isLocked ? '#d1d5db' : (isCurrent || isComplete ? COLORS.blue : COLORS.white),
              }}
              title={isLocked ? 'Không thể quay lại part đã nghe' : `Part ${partNum}`}
            >
              {isLocked && <Lock className="w-3 h-3 absolute top-1 right-1" />}
              <div className="font-bold">P{partNum}</div>
              <div className="text-xs opacity-75 mt-1">{answered}/{questionsPerPart}</div>
            </button>
          );
        })}
      </div>
    </div>
  );
}, (p, n) => p.currentPart === n.currentPart && Object.keys(p.answers).length === Object.keys(n.answers).length);

PartNavigation.displayName = 'PartNavigation';

// ===== ANSWER REVIEW =====
const SimpleAnswerReview = memo(({ examData, answers, sectionType, startPart, endPart }) => {
  const [expandedParts, setExpandedParts] = useState(new Set([startPart]));

  const reviewData = useMemo(() => {
    const data = [];
    for (let part = startPart; part <= endPart; part++) {
      const partData = examData?.parts?.[`part${part}`];
      if (!partData?.questions) continue;
      partData.questions.forEach((q, i) => {
        const key = `${sectionType}-part${part}-q${i + 1}`;
        data.push({
          partNum: part,
          qNum: i + 1,
          q,
          userAns: answers[key],
          correct: answers[key] === q.correct,
          key
        });
      });
    }
    return data;
  }, [examData, answers, sectionType, startPart, endPart]);

  const togglePart = useCallback((partNum) => {
    setExpandedParts(p => {
      const n = new Set(p);
      n.has(partNum) ? n.delete(partNum) : n.add(partNum);
      return n;
    });
  }, []);

  const parts = useMemo(() => [...new Set(reviewData.map(d => d.partNum))], [reviewData]);

  return (
    <div className="space-y-3">
      {parts.map(part => {
        const partItems = reviewData.filter(d => d.partNum === part);
        const correct = partItems.filter(d => d.correct).length;
        const isOpen = expandedParts.has(part);

        return (
          <div key={part} className="bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-md transition-shadow duration-300">
            <button
              onClick={() => togglePart(part)}
              className="w-full p-5 flex items-center justify-between hover:bg-slate-50 transition-colors duration-200 ease-out"
            >
              <span className="font-semibold text-slate-900">
                Part {part} <span className="text-sm font-normal text-slate-600">({correct}/{partItems.length} correct)</span>
              </span>
              <ChevronDown className={`w-5 h-5 text-slate-400 transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} />
            </button>
            
            {isOpen && (
              <div className="p-5 space-y-3 bg-slate-50 border-t border-slate-200 animate-in fade-in duration-200">
                {partItems.map((item) => (
                  <div key={item.key} className={`p-4 rounded-lg border-l-4 transition-colors duration-200 ${
                    item.correct 
                      ? 'bg-emerald-50 border-l-emerald-500' 
                      : 'bg-rose-50 border-l-rose-500'
                  }`}>
                    <p className="font-medium text-sm text-slate-900 mb-2">Q{item.qNum}: {item.q.question}</p>
                    <div className="space-y-1 text-xs">
                      <p className={item.correct ? 'text-emerald-700' : 'text-rose-700'}>
                        <span className="font-semibold">Your answer:</span> {item.userAns !== undefined ? String.fromCharCode(65 + item.userAns) + '. ' + item.q.options[item.userAns] : '(Not answered)'}
                      </p>
                      {!item.correct && (
                        <p className="text-emerald-700 font-semibold">
                          <span className="font-semibold">Correct:</span> {String.fromCharCode(65 + item.q.correct)}. {item.q.options[item.q.correct]}
                        </p>
                      )}
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        );
      })}
    </div>
  );
});

SimpleAnswerReview.displayName = 'SimpleAnswerReview';

// ===== MAIN COMPONENT =====
const FullExamMode = ({ onComplete }) => {
  const { saveProgress, currentUser, loading: progressLoading } = useUserProgress();
  const [mode, setMode] = useState('setup');
  const [section, setSection] = useState('listening');
  const [part, setPart] = useState(1);
  const [answers, setAnswers] = useState({});
  const [timeLeft, setTimeLeft] = useState(0);
  const [isPaused, setIsPaused] = useState(false);
  const [showWarning, setShowWarning] = useState(false);
  const [examId, setExamId] = useState('exam1');
  const [saved, setSaved] = useState(false);
  const [examData, setExamData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [isOpen, setIsOpen] = useState(false);
  const [listeningPartsTouched, setListeningPartsTouched] = useState(new Set()); // Track parts that user played audio
  
  const audioEndCallbackRef = useRef(null);

  const cfg = EXAM_STRUCTURE[section];

  const fmt = useCallback((sec) => {
    const mins = Math.floor(sec / 60);
    const secs = sec % 60;
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
  }, []);

  const handleAns = useCallback((qNum, opt) => {
    const key = `${section}-part${part}-q${qNum}`;
    setAnswers(p => ({ ...p, [key]: opt }));
  }, [section, part]);

  const nextSec = useCallback(() => {
    if (section === 'listening') {
      setSection('reading');
      setPart(5);
      setTimeLeft(READING_TIME);
    } else {
      setMode('results');
    }
  }, [section]);

  // Handle auto move to next part when audio ends
  const handleAudioEnd = useCallback(() => {
    if (section === 'listening') {
      // Mark current part as touched
      setListeningPartsTouched(prev => new Set([...prev, part]));

      // Move to next part or finish listening
      if (part < 4) {
        setPart(part + 1);
      } else {
        // Auto move to reading section
        setSection('reading');
        setPart(5);
        setTimeLeft(READING_TIME);
      }
    }
  }, [section, part]);

  // Inject callback into ContentDisplay
  useEffect(() => {
    audioEndCallbackRef.current = handleAudioEnd;
  }, [handleAudioEnd]);

  const calcResults = useCallback(() => {
    const res = {
      listeningByPart: {},
      readingByPart: {},
      listening: { correct: 0, total: 20, points: 0 },
      reading: { correct: 0, total: 40, points: 0 },
      totalScore: 0,
      averageScore: 0,
      cefr: null,
    };

    if (!examData) return res;

    [1,2,3,4].forEach(p => {
      const qs = examData.parts?.[`part${p}`]?.questions || [];
      let cnt = 0;
      qs.forEach((q, i) => {
        if (answers[`listening-part${p}-q${i + 1}`] === q.correct) {
          res.listening.correct++;
          cnt++;
        }
      });
      res.listeningByPart[p] = cnt;
    });

    [5,6,7,8].forEach(p => {
      const qs = examData.parts?.[`part${p}`]?.questions || [];
      let cnt = 0;
      qs.forEach((q, i) => {
        if (answers[`reading-part${p}-q${i + 1}`] === q.correct) {
          res.reading.correct++;
          cnt++;
        }
      });
      res.readingByPart[p - 4] = cnt;
    });

    res.listening.points = res.listening.correct * 5;
    res.reading.points = res.reading.correct * 2.5;
    res.totalScore = res.listening.points + res.reading.points;
    res.averageScore = res.totalScore / 2;
    res.cefr = getCEFRLevel(res.averageScore);

    return res;
  }, [examData, answers]);

  const partData = useMemo(() => examData?.parts?.[`part${part}`] || null, [examData, part]);
  const answeredCount = useMemo(() => Object.keys(answers).filter(k => k.startsWith(`${section}-`)).length, [answers, section]);
  const progress = (answeredCount / cfg.totalQuestions) * 100;

  useEffect(() => {
    if (mode === 'setup') return;
    setLoading(true);
    getExamById(examId).then(data => {
      setExamData(data);
      setLoading(false);
    }).catch(() => setLoading(false));
  }, [examId, mode]);

  useEffect(() => {
    if (mode !== 'exam' || isPaused) return;
    const interval = setInterval(() => {
      setTimeLeft(prev => {
        const newTime = prev - 1;
        if (newTime === WARNING_TIME) setShowWarning(true);
        if (newTime <= 0) {
          if (section === 'listening') {
            setSection('reading');
            setPart(5);
            setTimeLeft(READING_TIME);
          } else {
            setMode('results');
          }
          return 0;
        }
        return newTime;
      });
    }, 1000);
    return () => clearInterval(interval);
  }, [mode, isPaused, section]);

  useEffect(() => {
    if (mode === 'exam') {
      setTimeLeft(section === 'listening' ? LISTENING_TIME : READING_TIME);
      setPart(section === 'listening' ? 1 : 5);
      setIsPaused(false);
    }
  }, [mode, section]);

  useEffect(() => {
    if (mode !== 'results' || !currentUser || saved || progressLoading) return;
    
    const results = calcResults();
    
    saveProgress({
      exam: examId,
      part: 'full',
      score: results.averageScore,
      answers,
      correctAnswers: results.listening.correct + results.reading.correct,
      listeningScore: results.listening.points,
      readingScore: results.reading.points,
      testType: 'full-exam',
      listeningCorrect: results.listening.correct,
      readingCorrect: results.reading.correct,
      totalQuestions: 60,
      totalScore: results.totalScore,
      cefrLevel: results.cefr.level,
      isDraft: false,
    }).then(() => setSaved(true)).catch(err => console.error('Save failed:', err));
  }, [mode, currentUser, saved, progressLoading, examId]);

  // ===== SETUP SCREEN (unchanged) =====
  if (mode === 'setup') {
    return (
      <div className="min-h-screen" style={{ backgroundColor: '#f0f9ff' }}>
        <div className="absolute inset-0 overflow-hidden pointer-events-none">
          <div 
            className="absolute top-0 right-1/4 w-96 h-96 rounded-full opacity-10"
            style={{ backgroundColor: COLORS.blue, filter: 'blur(40px)' }}
          />
          <div 
            className="absolute -bottom-32 left-1/3 w-80 h-80 rounded-full opacity-10"
            style={{ backgroundColor: COLORS.orange, filter: 'blur(40px)' }}
          />
        </div>

        <div className="relative max-w-5xl mx-auto p-6">
          <div className="text-center mb-12 pt-8">
            <h1 className="text-5xl font-black mb-3" style={{ color: COLORS.darkBlue }}>
              Chuẩn Đầu Ra HUFLIT
            </h1>
            <p className="text-lg font-semibold text-slate-600 flex items-center justify-center gap-2">
              <Clock className="w-5 h-5" />
              <span>90 phút</span>
              <span>•</span>
              <span>60 câu hỏi</span>
              <span>•</span>
              <span>Kiểm tra đầy đủ</span>
            </p>
          </div>

          <div className="bg-white rounded-2xl shadow-xl overflow-hidden mb-8 border border-slate-100">
            <div className="h-1.5" style={{ backgroundColor: `linear-gradient(90deg, ${COLORS.blue} 0%, ${COLORS.orange} 100%)` }} />
            
            <div className="p-8">
              <div className="grid grid-cols-4 gap-4 mb-8">
                {[
                  { num: '8', label: 'Parts' },
                  { num: '60', label: 'Questions' },
                  { num: '90', label: 'Minutes' },
                  { num: '200', label: 'Max Points' }
                ].map((item, idx) => (
                  <div 
                    key={idx}
                    className="p-6 rounded-xl border border-slate-200 text-center hover:shadow-lg hover:border-slate-300 transition-all duration-300 ease-out hover:-translate-y-1"
                  >
                    <div className="text-3xl font-black" style={{ color: COLORS.blue }}>{item.num}</div>
                    <p className="text-xs font-semibold text-slate-600 mt-3 uppercase tracking-wide">{item.label}</p>
                  </div>
                ))}
              </div>

              <div className="mb-8">
                <label className="block text-sm font-bold text-slate-700 mb-3 uppercase tracking-wide">Chọn Bài Thi</label>
                <ModernDropdown 
                  examId={examId} 
                  setExamId={setExamId} 
                  isOpen={isOpen} 
                  setIsOpen={setIsOpen}
                />
              </div>

              <div className="grid grid-cols-2 gap-6 mb-8">
                <div className="p-6 rounded-xl border-2 border-slate-200 hover:border-slate-300 hover:shadow-lg transition-all duration-300 ease-out hover:-translate-y-0.5">
                  <div className="flex items-center gap-3 mb-4">
                    <Headphones className="w-6 h-6" style={{ color: COLORS.blue }} />
                    <h3 className="font-bold text-slate-900 uppercase tracking-wide">Listening</h3>
                  </div>
                  <div className="space-y-2.5 text-sm text-slate-600">
                    <p className="flex items-center gap-2">
                      <Clock className="w-4 h-4" />
                      30 phút
                    </p>
                    <p className="flex items-center gap-2">
                      <FileText className="w-4 h-4" />
                      20 câu (5 câu/part)
                    </p>
                    <p className="flex items-center gap-2">
                      <Zap className="w-4 h-4" />
                      Nghe 1 lần
                    </p>
                    <p className="flex items-center gap-2">
                      <Trophy className="w-4 h-4" />
                      100 điểm (5 điểm/câu)
                    </p>
                  </div>
                </div>
                <div className="p-6 rounded-xl border-2 border-slate-200 hover:border-slate-300 hover:shadow-lg transition-all duration-300 ease-out hover:-translate-y-0.5">
                  <div className="flex items-center gap-3 mb-4">
                    <BookOpen className="w-6 h-6" style={{ color: COLORS.blue }} />
                    <h3 className="font-bold text-slate-900 uppercase tracking-wide">Reading</h3>
                  </div>
                  <div className="space-y-2.5 text-sm text-slate-600">
                    <p className="flex items-center gap-2">
                      <Clock className="w-4 h-4" />
                      60 phút
                    </p>
                    <p className="flex items-center gap-2">
                      <FileText className="w-4 h-4" />
                      40 câu (10 câu/part)
                    </p>
                    <p className="flex items-center gap-2">
                      <BookOpen className="w-4 h-4" />
                      Đọc hiểu
                    </p>
                    <p className="flex items-center gap-2">
                      <Trophy className="w-4 h-4" />
                      100 điểm (2.5 điểm/câu)
                    </p>
                  </div>
                </div>
              </div>

              <div className="mb-8 p-6 rounded-xl bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200">
                <h3 className="font-bold text-slate-900 mb-4 uppercase tracking-wide flex items-center gap-2">
                  <Award className="w-5 h-5" style={{ color: COLORS.blue }} />
                  Chuẩn CEFR
                </h3>
                <div className="grid grid-cols-5 gap-3 text-sm">
                  {[
                    { level: 'A1', range: '0-14', color: '#DC2626' },
                    { level: 'A2', range: '15-24', color: '#F59E0B' },
                    { level: 'B1', range: '25-49', color: COLORS.orange },
                    { level: 'B2', range: '50-74', color: COLORS.blue },
                    { level: 'C1', range: '75-100', color: '#059669' }
                  ].map((item, idx) => (
                    <div 
                      key={idx}
                      className="text-center p-3 rounded-lg border border-slate-200 hover:shadow-md hover:-translate-y-0.5 transition-all duration-300 ease-out"
                      style={{ backgroundColor: item.color + '10' }}
                    >
                      <p className="font-bold" style={{ color: item.color }}>{item.level}</p>
                      <p className="text-xs mt-1" style={{ color: item.color + 'cc' }}>{item.range}</p>
                    </div>
                  ))}
                </div>
              </div>

              <button
                onClick={() => setMode('exam')}
                disabled={!examId || loading}
                className="w-full py-4 rounded-xl font-bold text-white text-lg transition-all duration-300 ease-out hover:shadow-xl active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wide flex items-center justify-center gap-3"
                style={{
                  backgroundColor: loading ? '#9ca3af' : '#FF7D00',
                  background: loading 
                    ? '#9ca3af' 
                    : `linear-gradient(135deg, #FF7D00 0%, #E67E00 100%)`,
                }}
              >
                {loading ? (
                  <>
                    <Clock className="w-5 h-5 animate-spin" />
                    <span>Đang tải...</span>
                  </>
                ) : (
                  <>
                    <Zap className="w-5 h-5" />
                    <span>Bắt đầu</span>
                  </>
                )}
              </button>
            </div>
          </div>
        </div>

        <style>{`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }

          body {
            animation: fadeIn 0.3s ease-out;
          }
        `}</style>
      </div>
    );
  }

  // ===== EXAM SCREEN =====
  if (mode === 'exam') {
    return (
      <div className="min-h-screen" style={{ backgroundColor: '#f8fafc' }}>
        {/* Sticky Header */}
        <div className="sticky top-0 z-50 bg-white border-b border-slate-200 shadow-sm">
          <div className="max-w-6xl mx-auto p-4">
            <div className="flex items-center justify-between mb-4">
              <div>
                <h2 className="font-bold text-lg text-slate-900 flex items-center gap-2">
                  {section === 'listening' ? (
                    <>
                      <Headphones className="w-5 h-5" style={{ color: COLORS.blue }} />
                      <span>LISTENING</span>
                    </>
                  ) : (
                    <>
                      <BookOpen className="w-5 h-5" style={{ color: COLORS.blue }} />
                      <span>READING</span>
                    </>
                  )}
                </h2>
                <p className="text-xs text-slate-600">Part {part} / {cfg.parts}</p>
              </div>
              <div className="text-right">
                <div 
                  className="text-3xl font-black transition-colors duration-500"
                  style={{ color: timeLeft < 300 ? COLORS.orange : COLORS.blue }}
                >
                  {fmt(timeLeft)}
                </div>
              </div>
            </div>

            {/* Progress Bar */}
            <div className="space-y-2">
              <div className="flex justify-between text-xs font-semibold text-slate-600">
                <span>Tiến độ</span>
                <span>{answeredCount}/{cfg.totalQuestions}</span>
              </div>
              <div className="w-full h-2.5 bg-slate-200 rounded-full overflow-hidden">
                <div 
                  className="h-full transition-all duration-500 ease-out" 
                  style={{ width: `${progress}%`, backgroundColor: COLORS.blue }} 
                />
              </div>
            </div>

            {/* Controls */}
            <div className="mt-4 flex gap-2">
              <button
                onClick={() => setIsPaused(!isPaused)}
                className="px-5 py-2.5 rounded-lg font-semibold text-white flex items-center gap-2 text-sm transition-all duration-200 ease-out hover:shadow-lg active:scale-95"
                style={{ backgroundColor: COLORS.blue }}
              >
                {isPaused ? <Play className="w-4 h-4" /> : <Pause className="w-4 h-4" />}
                {isPaused ? 'Tiếp tục' : 'Tạm dừng'}
              </button>
            </div>
          </div>
        </div>

        {showWarning && (
          <div className="max-w-6xl mx-auto p-4 mt-4 animate-in fade-in duration-300">
            <div 
              className="p-4 bg-orange-50 border-l-4 rounded-lg shadow-md flex items-center gap-3"
              style={{ borderLeftColor: COLORS.orange }}
            >
              <AlertCircle className="w-5 h-5 text-orange-600 flex-shrink-0" />
              <p className="font-bold text-orange-700">Chỉ còn 5 phút!</p>
            </div>
          </div>
        )}

        {/* Main Content */}
        <div className="max-w-6xl mx-auto p-4 space-y-6 pb-32">
          {/* Content Display */}
          {partData && (
            <div className="relative z-20">
              <ContentDisplay
                partData={partData}
                selectedPart={`part${part}`}
                currentQuestionIndex={0}
                testType={section}
                examId={examId}
                onAudioEnd={section === 'listening' && !listeningPartsTouched.has(part) ? handleAudioEnd : null}
              />
            </div>
          )}

          {/* Questions */}
          <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-100">
            <h3 className="font-bold text-lg mb-6 text-slate-900">
              Part {part}: Câu {(part - (section === 'listening' ? 1 : 5)) * cfg.questionsPerPart + 1} - {(part - (section === 'listening' ? 0 : 4)) * cfg.questionsPerPart}
            </h3>
            <div className="space-y-4">
              {partData?.questions?.map((q, i) => (
                <QuestionCard
                  key={`${section}-part${part}-q${i + 1}`}
                  question={q}
                  questionNum={i + 1}
                  selectedAnswer={answers[`${section}-part${part}-q${i + 1}`]}
                  onAnswerSelect={handleAns}
                  questionKey={`${section}-part${part}-q${i + 1}`}
                />
              ))}
            </div>
          </div>

          {/* Part Navigation */}
          <PartNavigation
            currentPart={part}
            parts={cfg.parts}
            answers={answers}
            currentSection={section}
            questionsPerPart={cfg.questionsPerPart}
            onPartChange={setPart}
            lockedParts={section === 'listening' ? Array.from(listeningPartsTouched) : []}
          />

          {/* Navigation Buttons */}
          <div className="flex gap-4">
            <button
              onClick={() => {
                if (section === 'listening') {
                  // Cannot go back to previous listening parts once audio has been played
                  if (listeningPartsTouched.has(part - 1)) {
                    alert('Bạn không thể quay lại part đã nghe');
                    return;
                  }
                }
                setPart(p => Math.max(section === 'listening' ? 1 : 5, p - 1));
              }}
              disabled={part === (section === 'listening' ? 1 : 5) || (section === 'listening' && listeningPartsTouched.has(part - 1))}
              className="flex-1 py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 disabled:opacity-50 text-white transition-all duration-200 ease-out hover:shadow-lg active:scale-95"
              style={{ backgroundColor: COLORS.blue }}
            >
              <ChevronLeft className="w-5 h-5" /> 
              <span>Phần trước</span>
            </button>
            <button
              onClick={part === (section === 'listening' ? 4 : 8) ? nextSec : () => setPart(p => p + 1)}
              className="flex-1 py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 text-white transition-all duration-200 ease-out hover:shadow-lg active:scale-95"
              style={{ backgroundColor: part === (section === 'listening' ? 4 : 8) && section === 'reading' ? '#10B981' : (part === (section === 'listening' ? 4 : 8) ? '#FF7D00' : COLORS.blue) }}
            >
              {part === (section === 'listening' ? 4 : 8) 
                ? (section === 'listening' 
                  ? <>
                      <ArrowRight className="w-5 h-5" /> 
                      <span>Sang Reading</span>
                    </>
                  : <>
                      <Flag className="w-5 h-5" /> 
                      <span>Nộp bài</span>
                    </>
                )
                : <>
                    <span>Tiếp theo</span>
                    <ChevronRight className="w-5 h-5" />
                  </>
              }
            </button>
          </div>
        </div>
      </div>
    );
  }

  // ===== RESULTS SCREEN (unchanged) =====
  if (mode === 'results') {
    const res = calcResults();
    const percentage = ((res.listening.correct + res.reading.correct) / 60) * 100;

    return (
      <div className="min-h-screen" style={{ backgroundColor: '#f0f9ff' }}>
        {/* Gradient Background */}
        <div className="absolute inset-0 overflow-hidden pointer-events-none">
          <div 
            className="absolute top-0 right-1/4 w-96 h-96 rounded-full opacity-10"
            style={{ backgroundColor: COLORS.blue, filter: 'blur(40px)' }}
          />
        </div>

        <div className="relative max-w-4xl mx-auto p-6">
          {/* Results Header */}
          <div className="bg-white rounded-2xl shadow-xl overflow-hidden mb-8 border border-slate-100">
            <div className="h-1.5" style={{ backgroundColor: `linear-gradient(90deg, ${COLORS.blue} 0%, ${COLORS.orange} 100%)` }} />
            <div className="text-center py-12 px-6 animate-in fade-in duration-500">
              <div className="inline-flex items-center justify-center mb-4">
                <Trophy className="w-16 h-16" style={{ color: COLORS.orange }} />
              </div>
              <h1 className="text-4xl font-black text-slate-900 mb-2">Hoàn thành bài thi!</h1>
              <p className="text-slate-600">Chuẩn đầu ra HUFLIT</p>
              {saved && (
                <p className="text-sm text-emerald-600 font-semibold mt-3 animate-in fade-in duration-500 flex items-center justify-center gap-2">
                  <CheckCircle className="w-4 h-4" />
                  <span>Kết quả đã được lưu</span>
                </p>
              )}
            </div>
          </div>

          {/* Main Score Card */}
          <div 
            className="bg-white rounded-2xl shadow-xl overflow-hidden mb-8 border-t-4"
            style={{ borderTopColor: res.cefr.color }}
          >
            <div className="p-8 text-center">
              <p className="text-sm font-bold text-slate-600 uppercase tracking-wide mb-2">Điểm trung bình</p>
              <div 
                className="text-6xl font-black text-slate-900 mb-6 animate-in fade-in duration-700"
              >
                {res.averageScore.toFixed(1)}
              </div>
              <div className="flex items-center justify-center gap-6">
                <div className="text-center">
                  <div 
                    className="w-16 h-16 rounded-full flex items-center justify-center font-black text-white text-2xl mb-3 shadow-lg"
                    style={{ backgroundColor: res.cefr.color }}
                  >
                    {res.cefr.level}
                  </div>
                  <p className="text-lg font-bold text-slate-900">{res.cefr.label}</p>
                  <p className="text-sm text-slate-600">({res.cefr.range})</p>
                </div>
              </div>
            </div>
          </div>

          {/* Score Breakdown */}
          <div className="grid grid-cols-3 gap-4 mb-8">
            {[
              { label: 'Listening', points: res.listening.points.toFixed(0), correct: res.listening.correct, total: 20, pointPerQ: '5 điểm/câu' },
              { label: 'Reading', points: res.reading.points.toFixed(0), correct: res.reading.correct, total: 40, pointPerQ: '2.5 điểm/câu' },
              { label: 'Tổng điểm', points: res.totalScore.toFixed(0), correct: null, total: 200, pointPerQ: `(Trung bình: ${res.averageScore.toFixed(1)})`, isTotal: true }
            ].map((item, idx) => (
              <div 
                key={idx}
                className="bg-white rounded-xl p-6 border-t-4 shadow-sm hover:shadow-lg transition-shadow duration-300"
                style={{ borderTopColor: item.isTotal ? COLORS.orange : COLORS.blue }}
              >
                <p className="text-xs font-bold text-slate-600 uppercase tracking-wide mb-3">{item.label}</p>
                <div 
                  className="text-3xl font-black text-slate-900 mb-2"
                  style={{ color: item.isTotal ? COLORS.blue : 'inherit' }}
                >
                  {item.points}
                </div>
                <p className="text-sm text-slate-600">
                  {item.correct !== null ? `${item.correct}/${item.total} câu` : `/${item.total} điểm`}
                </p>
                <p className="text-xs text-slate-500 mt-2">({item.pointPerQ})</p>
              </div>
            ))}
          </div>

          {/* Overall Progress */}
          <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-100 mb-8">
            <p className="text-sm font-bold text-slate-700 mb-4 uppercase tracking-wide">Tỷ lệ câu đúng</p>
            <div className="w-full h-4 bg-slate-200 rounded-full overflow-hidden mb-3">
              <div 
                className="h-full transition-all duration-1000 ease-out" 
                style={{ width: `${percentage}%`, backgroundColor: COLORS.blue }} 
              />
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm font-semibold text-slate-600">{percentage.toFixed(0)}%</span>
              <span className="text-sm font-semibold text-slate-600">{res.listening.correct + res.reading.correct}/60 câu</span>
            </div>
          </div>

          {/* Detailed Reviews */}
          <div className="space-y-6 mb-8">
            <div className="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-100">
              <div className="p-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-transparent flex items-center gap-3">
                <TrendingUp className="w-5 h-5" style={{ color: COLORS.blue }} />
                <h3 className="font-bold text-lg text-slate-900">Chi tiết Listening</h3>
              </div>
              <div className="p-6">
                <SimpleAnswerReview examData={examData} answers={answers} sectionType="listening" startPart={1} endPart={4} />
              </div>
            </div>

            <div className="bg-white rounded-xl shadow-sm overflow-hidden border border-slate-100">
              <div className="p-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-transparent flex items-center gap-3">
                <TrendingUp className="w-5 h-5" style={{ color: COLORS.blue }} />
                <h3 className="font-bold text-lg text-slate-900">Chi tiết Reading</h3>
              </div>
              <div className="p-6">
                <SimpleAnswerReview examData={examData} answers={answers} sectionType="reading" startPart={5} endPart={8} />
              </div>
            </div>
          </div>

          {/* Action Buttons */}
          <div className="flex gap-4">
            <button
              onClick={() => {
                setMode('setup');
                setAnswers({});
                setSection('listening');
                setPart(1);
                setSaved(false);
                setListeningPartsTouched(new Set());
              }}
              className="flex-1 py-4 rounded-xl font-bold text-white transition-all duration-200 ease-out hover:shadow-lg active:scale-95 uppercase tracking-wide flex items-center justify-center gap-2"
              style={{ backgroundColor: COLORS.blue, background: `linear-gradient(135deg, ${COLORS.blue} 0%, ${COLORS.darkBlue} 100%)` }}
            >
              <RotateCcw className="w-5 h-5" />
              <span>Làm lại</span>
            </button>
            <button
              onClick={() => {
                setMode('setup');
                setAnswers({});
                setSection('listening');
                setPart(1);
                setSaved(false);
                setListeningPartsTouched(new Set());
                onComplete?.();
              }}
              className="flex-1 py-4 rounded-xl font-bold text-slate-900 bg-white border-2 border-slate-300 transition-all duration-200 ease-out hover:bg-slate-50 hover:shadow-lg active:scale-95 uppercase tracking-wide flex items-center justify-center gap-2"
            >
              <ChevronLeft className="w-5 h-5" />
              <span>Quay lại</span>
            </button>
          </div>
        </div>

        <style>{`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }

          @keyframes slideDown {
            from {
              opacity: 0;
              transform: translateY(-8px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }

          .animate-in {
            animation: fadeIn 0.4s ease-out;
          }
        `}</style>
      </div>
    );
  }

  return null;
};

export default FullExamMode;
</file>

<file path="src/index.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ======================================================= */
/* 🚀 SCROLLBAR STYLING - Optimized */
/* ======================================================= */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.7);
  border-radius: 12px;
  border: 1px solid rgba(249, 115, 22, 0.05);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #fb923c 0%, #f59e0b 100%);
  border-radius: 12px;
  border: 3px solid transparent;
  background-clip: padding-box;
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #ea580c 0%, #d97706 100%);
  box-shadow: 0 0 10px rgba(234, 88, 12, 0.5);
}

/* Firefox scrollbar */
* {
  scrollbar-color: #f59e0b rgba(255, 255, 255, 0.7);
  scrollbar-width: thin;
}

/* Thin scrollbar variant */
.scrollbar-thin::-webkit-scrollbar {
  width: 8px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: rgba(243, 244, 246, 0.5);
  border-radius: 10px;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, #f97316, #facc15);
  border-radius: 10px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(to bottom, #ea580c, #d97706);
}

/* ======================================================= */
/* 🌐 GLOBAL BASE STYLES */
/* ======================================================= */
html {
  scroll-behavior: smooth;
  @apply font-sans;
  font-size: clamp(13px, 2vw, 16px);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  @apply antialiased text-gray-800 box-border;
  background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 50%, #fde68a 100%);
  min-height: 100vh;
  margin: 0;
  padding: 0;
  width: 100%;
  overflow-x: hidden;
  position: relative;
}

/* ✅ Optimized background - Removed animation */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    radial-gradient(circle at 10% 80%, rgba(254, 215, 170, 0.3) 0%, transparent 60%),
    radial-gradient(circle at 90% 20%, rgba(255, 243, 220, 0.4) 0%, transparent 60%),
    radial-gradient(circle at 50% 50%, rgba(249, 115, 22, 0.03) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
  opacity: 0.8;
}

/* ======================================================= */
/* ✍️ TEXT SELECTION */
/* ======================================================= */
::selection {
  @apply bg-orange-300/60 text-orange-900;
}

::-moz-selection {
  @apply bg-orange-300/60 text-orange-900;
}

/* ======================================================= */
/* 📝 HEADINGS */
/* ======================================================= */
h1, h2, h3, h4 {
  overflow-wrap: break-word;
}

h1 {
  font-size: clamp(1.5rem, 5vw, 3rem);
  @apply font-extrabold text-center mb-3 sm:mb-4 tracking-tighter;
  line-height: 1.2;
}

h2 {
  font-size: clamp(1.25rem, 4vw, 2rem);
  @apply font-extrabold text-gray-900 tracking-tight;
}

h3 {
  font-size: clamp(1rem, 3.5vw, 1.5rem);
  @apply font-bold text-gray-900 tracking-tight;
}

h4 {
  font-size: clamp(0.875rem, 2.5vw, 1.125rem);
  @apply font-semibold text-gray-900;
}

/* ======================================================= */
/* 🖼️ CUSTOM COMPONENTS */
/* ======================================================= */
@layer components {
  /* Main App Container */
  .app {
    @apply min-h-screen relative z-10 overflow-x-hidden;
    padding: max(0.75rem, clamp(0.75rem, 3vw, 1.25rem));
    width: 100%;
  }

  /* ✅ Main Container - Optimized shadow and transitions */
  .container {
    @apply max-w-6xl w-full mx-auto relative overflow-hidden rounded-3xl bg-white/95 backdrop-blur-xl shadow-lg border;
    padding: max(1.5rem, 2rem);
    border-color: rgba(254, 215, 170, 0.5);
    box-shadow:
      0 20px 40px rgba(249, 115, 22, 0.15),
      inset 0 1px 2px rgba(0, 0, 0, 0.05);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
  }

  .container:hover {
    box-shadow:
      0 25px 50px rgba(249, 115, 22, 0.2),
      inset 0 1px 2px rgba(0, 0, 0, 0.05);
    transform: translateY(-2px);
  }

  /* ✅ Container top border - Simplified */
  .container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #f97316 0%, #facc15 50%, #f97316 100%);
    border-radius: 30px 30px 0 0;
  }

  /* Utility Classes */
  .subtitle {
    @apply text-center text-gray-600 mb-8 sm:mb-12 font-medium leading-relaxed;
    font-size: clamp(0.875rem, 2.5vw, 1.125rem);
  }

  .section-title {
    font-size: clamp(1.25rem, 3.5vw, 1.75rem);
    @apply text-gray-900 mb-4 sm:mb-6 pb-2 sm:pb-3 font-extrabold tracking-tight border-b-2;
    border-image: linear-gradient(90deg, #ea580c, #f97316, #facc15) 1;
    transition: color 0.3s ease;
  }

  /* ✅ Buttons - Consolidated */
  .btn-primary {
    @apply px-4 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-orange-600 to-amber-500 text-white rounded-xl font-extrabold uppercase tracking-wider cursor-pointer shadow-lg border-b-4 border-orange-800 transition-all duration-200 active:shadow-md active:border-b-2 active:translate-y-0.5;
    min-height: 44px;
    font-size: clamp(0.7rem, 1.5vw, 0.875rem);
  }

  .btn-primary:hover {
    @apply -translate-y-1 shadow-xl;
  }

  .btn-secondary {
    @apply px-4 sm:px-6 py-2.5 sm:py-3 bg-gray-700 text-white rounded-xl font-bold cursor-pointer shadow-lg border-b-4 border-gray-900 transition-all duration-200 active:border-b-2 active:translate-y-0.5;
    min-height: 44px;
    font-size: clamp(0.7rem, 1.5vw, 0.875rem);
  }

  .btn-secondary:hover {
    @apply bg-gray-800 shadow-xl -translate-y-0.5;
  }

  /* ✅ Play Button - Optimized */
  .btn-play {
    @apply bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-full font-bold cursor-pointer relative overflow-hidden inline-flex items-center justify-center transition-all duration-200;
    min-height: 44px;
    padding: clamp(0.65rem, 1.5vw, 0.875rem);
    font-size: clamp(0.8rem, 2vw, 1rem);
    box-shadow: 0 6px 16px rgba(249, 115, 22, 0.3);
  }

  .btn-play::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease-out, height 0.6s ease-out;
  }

  .btn-play:hover::before {
    width: 300px;
    height: 300px;
  }

  .btn-play:hover {
    @apply -translate-y-0.5;
    box-shadow: 0 8px 24px rgba(249, 115, 22, 0.45);
  }

  /* Cards */
  .premium-card {
    @apply bg-white rounded-3xl p-4 sm:p-8 shadow-lg border border-orange-200 transition-all duration-300 hover:border-orange-400 hover:shadow-xl hover:-translate-y-2;
  }

  .premium-card:hover {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 250, 235, 0.85));
  }

  /* ✅ Badges - Consolidated */
  .badge-orange, .badge-success {
    @apply inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full font-bold border transition-all duration-200;
    font-size: clamp(0.65rem, 1.2vw, 0.8rem);
  }

  .badge-orange {
    @apply bg-gradient-to-r from-orange-100 to-amber-100 text-orange-900 border-orange-300;
  }

  .badge-success {
    @apply bg-gradient-to-r from-green-100 to-emerald-100 text-green-900 border-green-300;
  }

  /* Status */
  .status {
    @apply text-center p-3 sm:p-6 rounded-2xl mb-4 sm:mb-6 font-bold border-2 backdrop-blur-xl tracking-tight;
    font-size: clamp(0.9rem, 2vw, 1.125rem);
    transition: all 0.3s ease;
  }

  .status.playing {
    @apply bg-gradient-to-r from-green-100 to-emerald-100 text-green-900 border-emerald-400;
    box-shadow: 0 2px 12px rgba(16, 185, 129, 0.2);
    animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .status.paused {
    @apply bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-900 border-amber-400;
    box-shadow: 0 2px 12px rgba(217, 119, 6, 0.15);
  }

  .status.stopped {
    @apply bg-gradient-to-r from-red-100 to-rose-100 text-red-900 border-rose-400;
    box-shadow: 0 2px 12px rgba(220, 38, 38, 0.15);
  }

  /* Progress Bar */
  .progress-bar {
    @apply w-full h-4 bg-gradient-to-r from-orange-100 to-amber-100 rounded-full overflow-hidden mb-4 sm:mb-6 shadow-inner border border-orange-200;
  }

  .progress {
    @apply h-full transition-all duration-500;
    background: linear-gradient(90deg, #f97316 0%, #eab308 50%, #f97316 100%);
    background-size: 200% 100%;
    animation: progressShine 4s linear infinite;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  /* Info Box */
  .info-box {
    @apply rounded-3xl p-4 sm:p-8 mb-6 sm:mb-8 relative overflow-hidden border-l-[6px] border-orange-500 bg-gradient-to-br from-orange-50 to-amber-50 shadow-md;
  }

  .info-box h3 {
    @apply text-orange-900 mb-2 sm:mb-3 relative z-10 font-bold;
    font-size: clamp(0.95rem, 2.5vw, 1.25rem);
  }

  .info-box.warning {
    @apply border-l-amber-500 bg-gradient-to-r from-amber-50 to-yellow-50;
  }

  .info-box.warning h3 {
    @apply text-amber-900;
  }

  .info-box ul {
    @apply ml-6 text-gray-800 leading-7 sm:leading-8 relative z-10 font-medium;
    font-size: clamp(0.825rem, 2vw, 1rem);
  }

  .info-box li {
    @apply mb-2;
  }

  .info-box::after {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 150px;
    height: 150px;
    background: radial-gradient(circle, rgba(249, 115, 22, 0.1), transparent);
    border-radius: 50%;
  }

  /* Questions */
  .questions-container {
    @apply bg-gradient-to-br from-orange-50 to-amber-50 p-4 sm:p-8 rounded-2xl mb-4 sm:mb-6 border-2 border-orange-200 shadow-md;
  }

  .question-item {
    @apply bg-white p-4 sm:p-7 rounded-2xl mb-4 sm:mb-6 shadow-lg border-2 border-orange-100 transition-all duration-200 cursor-pointer hover:shadow-xl hover:border-orange-400 hover:-translate-y-1;
  }

  .question-item h4 {
    @apply text-gray-900 mb-3 sm:mb-5 leading-relaxed font-bold;
    font-size: clamp(0.95rem, 2.2vw, 1.125rem);
  }

  /* Options */
  .options {
    @apply flex flex-col gap-3;
  }

  .option {
    @apply flex items-start p-4 border-2 border-orange-200 rounded-2xl cursor-pointer transition-all duration-200 bg-gradient-to-r from-white to-orange-50 hover:from-orange-50 hover:to-yellow-50 hover:border-orange-400 hover:translate-x-1 hover:shadow-md;
  }

  .option input[type="radio"] {
    @apply mr-3 mt-0.5 cursor-pointer w-5 h-5 flex-shrink-0;
    accent-color: #f97316;
  }

  .option span {
    @apply flex-1 leading-7 text-gray-800 font-semibold;
    font-size: clamp(0.825rem, 1.8vw, 1rem);
  }

  .option input[type="radio"]:checked + span {
    @apply text-orange-700 font-bold;
  }

  /* Part Info */
  .part-info {
    @apply bg-gradient-to-r from-orange-50 to-amber-50 p-4 sm:p-7 rounded-2xl mt-3 sm:mt-5 border-l-[5px] border-orange-500 relative overflow-hidden shadow-md;
  }

  .part-info h3 {
    @apply text-orange-800 mb-3 relative z-10 font-bold;
    font-size: clamp(0.95rem, 2vw, 1.125rem);
  }

  .part-info p {
    @apply text-gray-800 leading-7 relative z-10 font-medium;
    font-size: clamp(0.825rem, 1.8vw, 1rem);
  }

  .part-info::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 180px;
    height: 180px;
    background: #f97316;
    border-radius: 50%;
    opacity: 0.06;
  }

  /* Question Navigation */
  .question-nav {
    @apply flex gap-3 flex-wrap justify-center;
  }

  .question-nav-btn {
    @apply px-6 py-3 border-2 border-orange-300 bg-white text-gray-800 rounded-2xl cursor-pointer font-bold transition-all duration-200 shadow-sm hover:bg-gradient-to-r hover:from-orange-400 hover:to-amber-400 hover:text-white hover:border-transparent hover:-translate-y-0.5 hover:shadow-lg;
    font-size: clamp(0.7rem, 1.5vw, 0.875rem);
    min-width: 40px;
    min-height: 40px;
  }

  .question-nav-btn.active {
    @apply bg-gradient-to-r from-orange-500 to-amber-500 text-white border-transparent -translate-y-0.5 shadow-lg;
    animation: glow 3s ease-in-out infinite;
  }

  /* Script Content */
  .script-content {
    @apply bg-gradient-to-br from-orange-50 to-amber-50 p-4 sm:p-7 rounded-2xl border-2 border-orange-200 overflow-y-auto leading-7 text-gray-900 shadow-inner font-medium;
    font-size: clamp(0.8rem, 2vw, 1rem);
    max-height: 50vh;
  }

  /* Results */
  .results {
    @apply bg-gradient-to-br from-orange-50 to-amber-50 p-4 sm:p-9 rounded-3xl shadow-2xl border border-orange-200;
  }

  .score-summary {
    @apply bg-white/95 p-4 sm:p-10 rounded-3xl text-center mb-6 sm:mb-10 shadow-2xl border-2 border-orange-300;
  }

  .score-summary h3 {
    font-size: clamp(2.5rem, 7vw, 4rem);
    @apply font-extrabold mb-4;
    background: linear-gradient(135deg, #f97316 0%, #eab308 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .score-summary p {
    @apply text-gray-700 mb-6 font-bold;
    font-size: clamp(0.95rem, 2.5vw, 1.375rem);
  }

  .score-bar {
    @apply w-full h-10 bg-gradient-to-r from-orange-100 to-amber-100 rounded-full overflow-hidden shadow-inner border border-orange-200;
  }

  .score-fill {
    @apply h-full transition-all flex items-center justify-center text-white font-black tracking-tight;
    font-size: clamp(0.7rem, 1.5vw, 0.875rem);
    animation: scoreShine 2s ease infinite;
    background: linear-gradient(90deg, #f97316 0%, #eab308 50%, #f97316 100%);
    background-size: 200% 100%;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .answers-review {
    @apply bg-white p-4 sm:p-8 rounded-3xl mb-4 sm:mb-6 shadow-md border border-orange-200;
  }

  .answers-review h4 {
    @apply text-gray-900 mb-4 sm:mb-6 pb-3 font-bold;
    font-size: clamp(1.1rem, 2.5vw, 1.5rem);
    border-bottom: 2px solid;
    border-image: linear-gradient(90deg, #f97316, #eab308) 1;
  }

  /* Answer Item */
  .answer-item {
    @apply p-3 sm:p-6 rounded-2xl mb-3 sm:mb-4 border-l-[5px] transition-all duration-200 hover:translate-x-1.5 hover:shadow-xl cursor-pointer;
  }

  .answer-item.correct {
    @apply bg-gradient-to-r from-green-100 to-emerald-50 border-l-green-500;
  }

  .answer-item.incorrect {
    @apply bg-gradient-to-r from-red-100 to-rose-50 border-l-red-500;
  }

  .answer-item p {
    @apply mb-2 leading-8 font-medium text-gray-900;
    font-size: clamp(0.825rem, 1.8vw, 1rem);
  }

  .answer-item strong {
    @apply text-gray-900 font-bold;
  }

  .correct-answer {
    @apply text-green-700 font-bold;
    font-size: clamp(0.7rem, 1.2vw, 0.875rem);
  }

  /* Forms */
  .controls {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }

  .control-group {
    @apply flex flex-col gap-2;
  }

  label {
    @apply text-gray-800 font-bold tracking-tight;
    font-size: clamp(0.75rem, 1.5vw, 0.875rem);
  }

  select,
  input[type="range"],
  .part-select {
    @apply p-3 border-2 border-orange-300 rounded-2xl bg-white transition-all duration-200 font-semibold text-gray-800 shadow-sm w-full;
    font-size: clamp(0.825rem, 2vw, 1rem);
  }

  select:hover,
  input[type="range"]:hover,
  .part-select:hover {
    @apply border-orange-500 shadow-md -translate-y-0.5;
  }

  select:focus,
  .part-select:focus {
    @apply outline-none border-orange-600;
    box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.25);
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    @apply w-6 h-6 bg-white rounded-full border-4 border-orange-500 cursor-pointer transition-all duration-200;
    box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
  }

  input[type="range"]::-webkit-slider-thumb:hover {
    @apply scale-110;
    box-shadow: 0 4px 16px rgba(249, 115, 22, 0.4);
  }

  input[type="range"]::-moz-range-thumb {
    @apply w-6 h-6 bg-white rounded-full border-4 border-orange-500 cursor-pointer;
    box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
  }

  /* Button Group */
  .button-group {
    @apply gap-5 mb-4 sm:mb-6;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  }

  button {
    @apply p-4 border-none rounded-xl text-base font-extrabold cursor-pointer transition-all shadow-lg tracking-tight;
    min-height: 44px;
  }

  button:active {
    @apply shadow-md;
    transform: scale(0.98);
  }

  /* Responsive */
  @screen xl {
    .container {
      @apply max-w-7xl;
    }
  }

  @screen lg {
    .container {
      @apply max-w-5xl;
    }
  }

  @screen md {
    .controls {
      grid-template-columns: 1fr;
    }
  }
}

/* ======================================================= */
/* ✨ KEYFRAME ANIMATIONS - Optimized */
/* ======================================================= */
@keyframes progressShine {
  0% { background-position: 0% 50%; }
  100% { background-position: 300% 50%; }
}

@keyframes scoreShine {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 150% 50%; }
}

@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 12px rgba(255, 165, 0, 0.5), 0 0 20px rgba(249, 115, 22, 0.3);
  }
  50% {
    box-shadow: 0 0 18px rgba(255, 165, 0, 0.7), 0 0 35px rgba(249, 115, 22, 0.5);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.9;
    transform: scale(1.01);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px) rotate(0.1deg);
  }
  50% {
    transform: translateY(-4px) rotate(-0.1deg);
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ======================================================= */
/* 🎨 UTILITY CLASSES */
/* ======================================================= */
@layer utilities {
  .tracking-tighter {
    letter-spacing: -0.8px;
  }

  .slide-in-up {
    animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
  }

  .fade-in-scale {
    animation: fadeInScale 0.7s ease-out both;
  }

  .animate-messageSlideIn {
    animation: messageSlideIn 0.4s ease-out;
  }

  .animate-slideIn {
    animation: slideIn 0.4s ease-out;
  }

  .animate-fadeIn {
    animation: fadeIn 0.4s ease-in-out;
  }
}

/* Thêm vào index.css */
html {
  scroll-behavior: auto; /* Không smooth-scroll */
}

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Bỏ position: relative trên các parent nếu có */
}

* {
  /* Tránh sử dụng will-change quá nhiều */
}
</file>

<file path="src/main.jsx">
import React, { Suspense, StrictMode } from 'react';
import ReactDOM from 'react-dom/client';
import { LoadingSpinner } from './components/common/LoadingSpinner';
import './index.css';

// ✅ Lazy load App and AuthProvider
const App = React.lazy(() => import('./App'));
const AuthProvider = React.lazy(() => 
  import('./contexts/AuthContext').then(module => ({ 
    default: module.AuthProvider 
  }))
);

// ✅ Loading Fallback - Keep it simple and fast
const RootFallback = () => (
  <div className="flex items-center justify-center h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50">
    <LoadingSpinner />
  </div>
);

// ✅ Root Component - Only wrap with StrictMode in dev
const Root = () => {
  const isDev = process.env.NODE_ENV === 'development';
  
  const content = (
    <Suspense fallback={<RootFallback />}>
      <AuthProvider>
        <App />
      </AuthProvider>
    </Suspense>
  );

  return isDev ? <StrictMode>{content}</StrictMode> : content;
};

// ✅ Initialize React root with error handling
const rootElement = document.getElementById('root');

if (!rootElement) {
  throw new Error('Root element with id="root" not found in HTML');
}

const root = ReactDOM.createRoot(rootElement);
root.render(<Root />);

// ✅ Web Vitals monitoring (Production only)
if (process.env.NODE_ENV === 'production') {
  // Report Web Vitals for monitoring
  import('web-vitals')
    .then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      // Send to analytics (replace with your analytics service)
      getCLS(metric => console.log('CLS:', metric.value));
      getFID(metric => console.log('FID:', metric.value));
      getFCP(metric => console.log('FCP:', metric.value));
      getLCP(metric => console.log('LCP:', metric.value));
      getTTFB(metric => console.log('TTFB:', metric.value));
    })
    .catch(() => {
      // web-vitals not installed
    });

  // ✅ Long Task monitoring - only in production
  if ('PerformanceObserver' in window) {
    try {
      const observer = new PerformanceObserver((list) => {
        for (const entry of list.getEntries()) {
          // Log tasks longer than 50ms
          if (entry.duration > 50) {
            console.warn(`Long task detected: ${entry.duration.toFixed(2)}ms`, entry);
          }
        }
      });
      // Only observe 'longtask' in production
      observer.observe({ entryTypes: ['longtask'] });
    } catch (e) {
      // PerformanceObserver or longtask not supported
    }
  }

  // ✅ Handle unhandled promise rejections
  window.addEventListener('unhandledrejection', (event) => {
    console.error('Unhandled promise rejection:', event.reason);
    // Send to error tracking service (e.g., Sentry)
  });

  // ✅ Handle runtime errors
  window.addEventListener('error', (event) => {
    console.error('Runtime error:', event.error);
    // Send to error tracking service
  });
}
</file>

<file path="src/data/exams/exam6.js">
export const EXAM6_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 6 (Dựa trên Đề Thi Thử)",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu). Hỗ trợ ôn luyện toàn diện theo cấu trúc HUFLIT. Part 1 mở rộng: 5 câu hỏi từ 1 hội thoại dài để luyện nghe chi tiết.",
  parts: {
   part1: {
  title: "PART 1: Short Conversations",
  description: "Nghe đoạn hội thoại giữa Ben và Anna về các dự án công việc. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
  type: "listening",
  script: "Ben: Anna, how's the product redesign project coming along? I know you and your team have been working on it for several weeks now.\n\nAnna: It's progressing well, Ben. I'm happy to report that we've completed about sixty percent of the design work so far. The team has been working overtime, coming in early and staying late, to meet the deadline that management set for us. Everyone has been incredibly dedicated to this project.\n\nBen: That's impressive! I know it's been a challenging project with all the technical requirements. When do you expect to finish the remaining work?\n\nAnna: We should be done by the end of next month if everything stays on track and we don't encounter any unexpected obstacles. However, I have to be honest with you – we might need additional resources to ensure we maintain the quality standards we're known for. The current pace is unsustainable for the long term.\n\nBen: I understand your concerns. What kind of resources are you looking for specifically? Is it more budget, equipment, or personnel?\n\nAnna: Mainly, we need more graphic designers and a project coordinator to help manage workflows. The current team is stretched thin with multiple tasks happening simultaneously. We're juggling the design work, client feedback, revisions, and internal meetings all at once. Having a dedicated coordinator would help us stay organized and ensure nothing falls through the cracks.\n\nBen: That makes perfect sense. I'll speak to the manager about allocating budget for new hires. This project is important to the company, so I'm sure we can make it happen. By the way, how's your team morale holding up under all this pressure?\n\nAnna: Overall, it's good. People are tired from the heavy workload and the long hours, but everyone is committed to delivering excellence. They understand the importance of this redesign for our company's future. We just need some recognition for the hard work they're putting in. A simple thank you or acknowledgment from upper management would go a long way in keeping spirits high.",
  questions: [
    {
      id: 1,
      question: "How much of the design work has the team completed?",
      options: [
        "Half of the work",
        "Eighty percent",
        "Sixty percent",
        "Forty percent"
      ],
      correct: 2,
      explanation: "Anna nói: 'We've completed about sixty percent of the design work.' (Chúng tôi đã hoàn thành khoảng sáu mươi phần trăm công việc thiết kế.)"
    },
    {
      id: 2,
      question: "What is Anna's expected completion date?",
      options: [
        "By next quarter",
        "End of next month",
        "In two weeks",
        "Next week"
      ],
      correct: 1,
      explanation: "Anna nói: 'We should be done by the end of next month if everything stays on track.' (Chúng tôi nên hoàn thành vào cuối tháng tới nếu mọi thứ tiến hành đúng kế hoạch.)"
    },
    {
      id: 3,
      question: "What does Anna say about her team's current situation?",
      options: [
        "They completed their work early",
        "They are well-staffed and relaxed",
        "They are stretched thin with multiple tasks",
        "They have too many employees"
      ],
      correct: 2,
      explanation: "Anna nói: 'The current team is stretched thin with multiple tasks.' (Đội hiện tại được kéo căng với nhiều tác vụ.)"
    },
    {
      id: 4,
      question: "What additional resources does Anna request?",
      options: [
        "A longer project timeline",
        "Graphic designers and a project coordinator",
        "New office equipment",
        "More budget for marketing"
      ],
      correct: 1,
      explanation: "Anna nói: 'Mainly, we need more graphic designers and a project coordinator.' (Chủ yếu, chúng tôi cần thêm nhà thiết kế đồ họa và một điều phối viên dự án.)"
    },
    {
      id: 5,
      question: "How does Anna describe the team's morale?",
      options: [
        "Perfect with no issues",
        "Good overall, though tired from workload",
        "Very low and concerning",
        "Completely demoralized"
      ],
      correct: 1,
      explanation: "Anna nói: 'Overall, it's good. People are tired from the workload, but everyone is committed.' (Nói chung, nó tốt. Mọi người mệt mỏi từ khối lượng công việc, nhưng mọi người đều cam kết.)"
    }
  ]
},

part2: {
  title: "PART 2: Longer Conversation",
  description: "5 câu hỏi - Một đoạn hội thoại dài giữa ba người tại văn phòng. Nghe toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Narrator: At a corporate office.\n\nManager: Good morning, everyone. Thank you for joining today's quarterly review meeting. Let's discuss the quarterly sales report and analyze our performance. Tom, can you share the numbers with us? I know you've been preparing this presentation for a few days.\n\nTom: Of course, I'd be happy to. Overall, we had a strong quarter. Our Q3 revenue increased by fifteen percent compared to last year at this same time. This is a significant achievement considering the current economic climate and market challenges we've been facing. However, I do need to point out that we saw a decline in the eastern region due to increased competition from new market entrants. They've been offering aggressive pricing and promotional campaigns.\n\nEmma: That's concerning about the eastern region. What specific strategies are we implementing to address this decline and win back market share? We can't afford to lose ground in such an important territory.\n\nTom: Great question, Emma. We're planning to launch a targeted marketing campaign in that region next month. The campaign will focus on our unique value propositions and customer service excellence. Additionally, we're training sales staff on new product features so they can better communicate our competitive advantages to potential clients. We're also considering offering special promotional packages to attract new customers.\n\nManager: Those sound like solid initiatives. Emma, how are the customer satisfaction surveys looking? I know we sent those out about two weeks ago.\n\nEmma: The results are quite positive overall, which is encouraging. Eighty-five percent of customers rated us as excellent or very good across all categories we measured. That's actually up from last quarter's seventy-eight percent. However, some customers mentioned issues with delivery times, particularly in rural areas. They feel we could improve our logistics and shipping processes.\n\nTom: That's valuable feedback. We should coordinate with logistics to improve delivery efficiency. Maybe we can establish regional distribution centers or partner with faster shipping providers.\n\nManager: Agreed. Let's make that a priority for the next quarter. I'll schedule a meeting with the logistics team to discuss implementation strategies and budget requirements.",
  questions: [
    {
      id: 6,
      question: "By how much did Q3 revenue increase?",
      options: [
        "Five percent",
        "Fifteen percent",
        "Ten percent",
        "Twenty-five percent"
      ],
      correct: 1,
      explanation: "Tom nói: 'Our Q3 revenue increased by fifteen percent compared to last year.' (Doanh thu Q3 của chúng tôi tăng mười lăm phần trăm so với năm ngoái.)"
    },
    {
      id: 7,
      question: "Which region experienced a sales decline?",
      options: [
        "The central region",
        "The eastern region",
        "The northern region",
        "The western region"
      ],
      correct: 1,
      explanation: "Tom nói: 'However, we saw a decline in the eastern region due to increased competition.' (Tuy nhiên, chúng tôi thấy sự suy giảm ở khu vực phía đông do cạnh tranh gia tăng.)"
    },
    {
      id: 8,
      question: "What percentage of customers gave excellent or very good ratings?",
      options: [
        "Fifty percent",
        "Eighty-five percent",
        "Ninety percent",
        "Seventy percent"
      ],
      correct: 1,
      explanation: "Emma nói: 'Eighty-five percent of customers rated us as excellent or very good.' (Tám mươi lăm phần trăm khách hàng xếp chúng tôi là xuất sắc hoặc rất tốt.)"
    },
    {
      id: 9,
      question: "What issue did some customers mention?",
      options: [
        "Rude customer service",
        "Delivery time problems",
        "High prices",
        "Poor product quality"
      ],
      correct: 1,
      explanation: "Emma nói: 'However, some mentioned issues with delivery times.' (Tuy nhiên, một số đề cập đến vấn đề về thời gian giao hàng.)"
    },
    {
      id: 10,
      question: "What strategy is Tom proposing to address the regional decline?",
      options: [
        "Hiring new managers",
        "Launching a targeted marketing campaign",
        "Reducing product prices",
        "Closing the eastern region office"
      ],
      correct: 1,
      explanation: "Tom nói: 'We're planning to launch a targeted marketing campaign in that region next month.' (Chúng tôi đang lên kế hoạch để khởi động một chiến dịch tiếp thị có mục tiêu ở khu vực đó vào tháng tới.)"
    }
  ]
},

part3: {
  title: "PART 3: Monologue",
  description: "5 câu hỏi - Một đoạn độc thoại (bài nói ngắn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
  type: "listening",
  script: "Professor: Good afternoon, class. I'm Professor Martinez, and today I want to discuss a topic that's becoming increasingly important in the business world – the importance of sustainable business practices and environmental responsibility.\n\nIn today's world, companies must balance profit with environmental responsibility. This is no longer optional; it's becoming a necessity. Many organizations around the globe are now adopting green initiatives to reduce their carbon footprint and minimize their environmental impact. This includes using renewable energy sources such as solar and wind power, and implementing waste reduction programs throughout their operations.\n\nHowever, I want to address a common misconception. Some companies view these efforts as additional expenses rather than long-term investments. They see the upfront costs and become discouraged. But let me share some data with you that challenges this perspective.\n\nThe reality is that sustainable practices often lead to cost savings over time. Let me give you a concrete example. For example, companies that invest in solar panels initially spend more money on the installation and equipment. The upfront investment can be substantial – we're talking about tens or hundreds of thousands of dollars depending on the facility size. But here's the key point: they recover those costs within five to seven years through reduced energy bills. After that recovery period, they're essentially getting free electricity for the remaining lifespan of the solar panels, which can be twenty-five to thirty years.\n\nAdditionally, there's another important factor to consider. Consumers increasingly prefer to support businesses that demonstrate environmental commitment. This is especially true among younger generations who are more conscious about sustainability issues. They're willing to pay premium prices for products from companies that align with their values.\n\nTherefore, integrating sustainability into your business strategy is not just ethical—it's also financially smart. Companies that embrace these practices early will have a competitive advantage in the marketplace. They'll attract environmentally conscious consumers, reduce their operating costs over time, and build a positive brand reputation that can last for generations.",
  questions: [
    {
      id: 11,
      question: "According to the professor, what must companies balance?",
      options: [
        "Growth and stability",
        "Profit and environmental responsibility",
        "Marketing and sales",
        "Employee wages and benefits"
      ],
      correct: 1,
      explanation: "Professor nói: 'companies must balance profit with environmental responsibility.' (các công ty phải cân bằng lợi nhuận với trách nhiệm môi trường.)"
    },
    {
      id: 12,
      question: "What view do some companies hold about green initiatives?",
      options: [
        "They increase product sales",
        "They are additional expenses",
        "They reduce employee morale",
        "They are essential for survival"
      ],
      correct: 1,
      explanation: "Professor nói: 'some companies view these efforts as additional expenses rather than long-term investments.' (một số công ty xem những nỗ lực này như là chi phí bổ sung thay vì đầu tư dài hạn.)"
    },
    {
      id: 13,
      question: "In how many years do companies typically recover solar panel investments?",
      options: [
        "One to two years",
        "Five to seven years",
        "Ten to twelve years",
        "Two to three years"
      ],
      correct: 1,
      explanation: "Professor nói: 'they recover those costs within five to seven years through reduced energy bills.' (họ lấy lại những chi phí đó trong năm đến bảy năm thông qua hóa đơn tiền điện giảm.)"
    },
    {
      id: 14,
      question: "What does the professor say about consumer preferences?",
      options: [
        "Consumers don't care about business practices",
        "Consumers increasingly prefer environmentally committed businesses",
        "Consumers prefer the cheapest products",
        "Consumers ignore environmental issues"
      ],
      correct: 1,
      explanation: "Professor nói: 'consumers increasingly prefer to support businesses that demonstrate environmental commitment.' (người tiêu dùng ngày càng thích hỗ trợ các doanh nghiệp thể hiện cam kết môi trường.)"
    },
    {
      id: 15,
      question: "What does the professor say about the financial impact of sustainability?",
      options: [
        "It only benefits large corporations",
        "It can lead to cost savings over time",
        "It has no financial benefit",
        "It always increases costs"
      ],
      correct: 1,
      explanation: "Professor nói: 'sustainable practices often lead to cost savings over time.' (các hoạt động bền vững thường dẫn đến tiết kiệm chi phí theo thời gian.)"
    }
  ]
},
    part4: {
      title: "PART 4: Extended Conversation",
      description: "5 câu hỏi - Một đoạn hội thoại mở rộng (dài hơn). Nghe và chọn đáp án tốt nhất (A, B, C, D).",
      type: "listening",
      script: "HR Rep: Good morning, John. Thank you for coming in. I wanted to discuss your performance review and career development.\nCandidate: Thank you for the opportunity. I'm eager to hear your feedback.\nHR Rep: Overall, your performance has been excellent. Your project management skills are strong, and you've consistently met deadlines. However, we've noticed that you could improve your communication with other departments.\nCandidate: That's valuable feedback. I realize I should collaborate more openly with colleagues from other teams.\nHR Rep: Exactly. We're offering you a leadership training program to help develop those skills. Additionally, we'd like to promote you to Senior Project Manager effective next month.\nCandidate: That's wonderful news! I'm grateful for this opportunity.\nHR Rep: You've earned it. The promotion comes with a fifteen percent salary increase and expanded responsibilities. We expect you to mentor junior team members as well.\nCandidate: I'm ready for this challenge. Thank you again.",
      questions: [
        {
          id: 16,
          question: "What is John's greatest strength according to the review?",
          options: [
            "Customer service abilities",
            "Project management skills and meeting deadlines",
            "Sales performance",
            "Communication with other departments"
          ],
          correct: 1,
          explanation: "HR Rep nói: 'Your project management skills are strong, and you've consistently met deadlines.' (Kỹ năng quản lý dự án của bạn mạnh, và bạn luôn đáp ứng hạn chót.)"
        },
        {
          id: 17,
          question: "What area does the HR Rep suggest John needs to improve?",
          options: [
            "Leadership abilities",
            "Communication with other departments",
            "Technical skills",
            "Time management"
          ],
          correct: 1,
          explanation: "HR Rep nói: 'you could improve your communication with other departments.' (bạn có thể cải thiện giao tiếp với các bộ phận khác.)"
        },
        {
          id: 18,
          question: "What training program is being offered to John?",
          options: [
            "Customer service training",
            "Leadership training program",
            "Sales training",
            "Technical skills training"
          ],
          correct: 1,
          explanation: "HR Rep nói: 'We're offering you a leadership training program to help develop those skills.' (Chúng tôi đang cung cấp cho bạn chương trình đào tạo lãnh đạo để giúp phát triển các kỹ năng đó.)"
        },
        {
          id: 19,
          question: "What is John's new position?",
          options: [
            "Team Lead",
            "Senior Project Manager",
            "HR Manager",
            "Department Manager"
          ],
          correct: 1,
          explanation: "HR Rep nói: 'we'd like to promote you to Senior Project Manager effective next month.' (chúng tôi muốn thăng chức bạn lên Senior Project Manager có hiệu lực từ tháng tới.)"
        },
        {
          id: 20,
          question: "What percentage is John's salary increase?",
          options: [
            "Five percent",
            "Fifteen percent",
            "Ten percent",
            "Twenty percent"
          ],
          correct: 1,
          explanation: "HR Rep nói: 'The promotion comes with a fifteen percent salary increase.' (Sự thăng chức đi kèm với mức tăng lương mười lăm phần trăm.)"
        }
      ]
    },
     part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu. Không có audio.",
      type: "reading",
      questions: [
          {
          id: 21,
          question: "The new software system has been _______ to streamline our workflow and increase productivity.",
          options: [
            "Implements",
            "Implementation",
            "Implemented",
            "Implementing"
          ],
          correct: 2,
          explanation: `
        🧠 **Giải thích chi tiết:**

        Câu này dùng **thì hiện tại hoàn thành dạng bị động (Present Perfect Passive)**.  
        Cấu trúc của bị động hiện tại hoàn thành là:

        ➡️ **has/have + been + V3 (past participle)**

        Ta cần một **động từ dạng V3** để hoàn thành cấu trúc trên.

        ---

        🔍 **Phân tích từng đáp án:**

        1. **Implements** → động từ chia hiện tại đơn → ❌ không dùng sau "has been".
        2. **Implementation** → danh từ → ❌ không đứng sau "has been".
        3. **Implemented** → **V3 (quá khứ phân từ)** → ✔️ đúng dạng bị động.
        4. **Implementing** → V-ing → ❌ không đúng cấu trúc bị động.

        ---

        🟩 **Đáp án đúng: Implemented**

        **Dịch câu:**  
        “Hệ thống phần mềm mới đã được triển khai nhằm tối ưu quy trình làm việc và tăng năng suất.”

        **⇒ Lý do:** “Has been implemented” là cấu trúc bị động hoàn chỉnh và chính xác.
        `
        },
        {
          id: 22,
          question: "_______ participated in the training workshop gained valuable skills for their professional development.",
          options: [
            "That",
            "Those who",
            "Whoever",
            "Anyone"
          ],
          correct: 1,
          explanation: "👥 'Those who' là đại từ quan hệ số nhiều đúng ngữ pháp. Cấu trúc: THOSE WHO + VERB = những người mà... Câu đầy đủ: 'Những người THAM GIA buổi tập huấn ĐÃ thu được kỹ năng quý giá...'"
        },
        {
          id: 23,
          question: "The marketing team has been working on the campaign _______ the project was approved last month.",
          options: [
            "whereas",
            "since",
            "although",
            "unless"
          ],
          correct: 1,
          explanation: "⏰ 'Since' + mốc thời gian đi với thì hiện tại hoàn thành tiếp diễn (has been working). 'Since' ở đây có nghĩa 'kể từ khi'. Các từ nối khác không phù hợp: whereas (trong khi), although (mặc dù), unless (trừ khi)."
        },
        {
          id: 24,
          question: "All participants must complete the registration form and submit _______ identification documents.",
          options: [
            "validly",
            "valid",
            "validate",
            "validity"
          ],
          correct: 1,
          explanation: "📄 Tính từ 'valid' (hợp lệ) bổ nghĩa cho danh từ 'identification documents'. Vị trí này cần tính từ, không phải trạng từ (validly), động từ (validate), hay danh từ (validity)."
        },
        {
          id: 25,
          question: "The company's new policy emphasizes that _______ communication improves workplace productivity.",
          options: [
            "effectiveness",
            "effective",
            "effect",
            "effectively"
          ],
          correct: 1,
          explanation: "💬 Tương tự câu trên, chúng ta cần tính từ 'effective' (hiệu quả) để bổ nghĩa cho danh từ 'communication'. 'Effective communication' = giao tiếp hiệu quả - cụm từ rất phổ biến trong môi trường công sở."
        },
        {
          id: 26,
          question: "Employees are encouraged to _______ their ideas during the monthly brainstorming sessions.",
          options: [
            "shared",
            "shares",
            "share",
            "sharing"
          ],
          correct: 2,
          explanation: "🧠 Cấu trúc: be encouraged TO + V (nguyên thể). 'To share' là đúng ngữ pháp. Các dạng khác: shared (quá khứ), shares (số ít hiện tại), sharing (V-ing) đều không phù hợp sau 'to'."
        },
        {
          id: 27,
          question: "_______ receiving customer feedback, the product development team made several improvements.",
          options: [
            "Unless",
            "After",
            "Despite",
            "Although"
          ],
          correct: 1,
          explanation: "🔄 'After + V-ing' diễn tả hành động xảy ra sau. Ngữ cảnh: SAU KHI nhận phản hồi, đội ngũ đã cải tiến. Các từ khác: unless (trừ khi), despite (mặc dù), although (mặc dù) không hợp lý về nghĩa."
        },
        {
          id: 28,
          question: "The research team is looking for candidates who can analyze data _______ and draw meaningful conclusions.",
          options: [
            "accurateness",
            "accurate",
            "accurately",
            "accuracy"
          ],
          correct: 2,
          explanation: "🔍 Chúng ta cần trạng từ 'accurately' (một cách chính xác) để bổ nghĩa cho động từ 'analyze'. Cấu trúc: VERB + ADVERB. Các từ khác là danh từ (accurateness, accuracy) hoặc tính từ (accurate) không thể bổ nghĩa cho động từ."
        },
        {
          id: 29,
          question: "Due to the unexpected power outage, the conference has been _______ to next Tuesday.",
          options: [
            "reschedules",
            "rescheduling",
            "rescheduled",
            "reschedule"
          ],
          correct: 2,
          explanation: "📅 Cấu trúc bị động thì hiện tại hoàn thành: HAS BEEN + V3. 'Rescheduled' là quá khứ phân từ của 'reschedule' (dời lịch). Câu này dịch: 'Hội nghị đã ĐƯỢC dời sang thứ Ba tuần sau.'"
        },
        {
          id: 30,
          question: "The supervisor emphasized that attention to detail and creativity are essential qualities for maintaining high _______.",
          options: [
            "standards",
            "expenses",
            "schedules",
            "locations"
          ],
          correct: 0,
          explanation: "⭐ 'High standards' là collocation (cụm từ cố định) có nghĩa 'tiêu chuẩn cao'. Các từ khác không tạo thành cụm có nghĩa: high expenses (chi phí cao - không hợp lý), high schedules (lịch trình cao - vô nghĩa), high locations (địa điểm cao - vô nghĩa)."
        }
      ]
    },

    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email. Đọc toàn bộ và chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `To: All Department Heads
From: Sarah Chen, Chief Operating Officer
Subject: Strategic Initiative for Q4 Implementation

Dear Colleagues,

I am writing to inform you about an important strategic initiative that will be (31) _______ throughout the fourth quarter. This comprehensive program aims to enhance our operational capabilities and (32) _______ our competitiveness in the market.

Our primary objective is to modernize our internal systems and streamline processes across all departments. To achieve this, we will be implementing new technology solutions that have been carefully selected to (33) _______ our current infrastructure. Each department head is responsible for (34) _______ the transition smoothly within their teams.

We understand that organizational change can be challenging, so we are committed to (35) _______ complete support and resources throughout this process. Training sessions will be conducted for all staff members to ensure they are comfortable with the new systems. We strongly encourage everyone to attend these sessions, as they will provide essential information on how to (36) _______ effectively with the new technology.

Additionally, we have established a dedicated support team to address any technical issues or concerns that may arise during the implementation phase. Please don't (37) _______ to reach out to this team if you encounter any difficulties.

As we move forward, your feedback is invaluable. We welcome suggestions on how we can further improve our processes and systems. All feedback should be submitted to the Operations Team by December 15, and we will carefully consider all suggestions for future improvements.

I am confident that this initiative will bring significant benefits to our organization and strengthen our position in the market. Thank you for your cooperation and support during this exciting time of transformation.

Best regards,

Sarah Chen
Chief Operating Officer`,
      questions: [
        {
          id: 31,
          type: "fill",
          question: "(31) - Điền từ thích hợp",
          context: "This comprehensive program aims to enhance our operational capabilities and this initiative that will be (31) _______ throughout the fourth quarter.",
          options: [
            "Postponed",
            "Implemented",
            "Initiated",
            "Discussed"
          ],
          correct: 1,
          explanation: "🏢 'Implemented' (được triển khai) phù hợp nhất vì đây là sáng kiến chiến lược sẽ được thực hiện trong quý 4. Các từ khác: postponed (hoãn), initiated (khởi xướng), discussed (thảo luận) không phù hợp với ngữ cảnh triển khai kế hoạch."
        },
        {
          id: 32,
          type: "fill",
          question: "(32) - Điền từ thích hợp",
          context: "This comprehensive program aims to enhance our operational capabilities and (32) _______ our competitiveness in the market.",
          options: [
            "Limiting",
            "Strengthen",
            "Weakening",
            "Reduce"
          ],
          correct: 1,
          explanation: "💪 Cấu trúc song song: enhance... and strengthen... Cả hai động từ đều mang nghĩa tích cực. 'Strengthen our competitiveness' = tăng cường khả năng cạnh tranh. Các từ khác mang nghĩa tiêu cực, không phù hợp với mục tiêu của chương trình."
        },
        {
          id: 33,
          type: "fill",
          question: "(33) - Điền từ thích hợp",
          context: "...new technology solutions that have been carefully selected to (33) _______ our current infrastructure.",
          options: [
            "Ignore",
            "Complement",
            "Replace",
            "Eliminate"
          ],
          correct: 1,
          explanation: "🔄 'Complement' (bổ sung, làm hoàn thiện) phù hợp nhất vì giải pháp công nghệ mới được chọn để làm việc cùng với cơ sở hạ tầng hiện có, không phải để thay thế hoàn toàn. Các từ khác: ignore (bỏ qua), replace (thay thế), eliminate (loại bỏ) quá cực đoan."
        },
        {
          id: 34,
          type: "fill",
          question: "(34) - Điền từ thích hợp",
          context: "Each department head is responsible for (34) _______ the transition smoothly within their teams.",
          options: [
            "Manager",
            "Managing",
            "Managed",
            "Manage"
          ],
          correct: 1,
          explanation: "👨‍💼 Cấu trúc: responsible for + V-ing. 'Managing' là đúng ngữ pháp. Câu này dịch: 'Mỗi trưởng bộ phận chịu trách nhiệm QUẢN LÝ quá trình chuyển đổi...'"
        },
        {
          id: 35,
          type: "fill",
          question: "(35) - Điền từ thích hợp",
          context: "...so we are committed to (35) _______ complete support and resources throughout this process.",
          options: [
            "Providing",
            "Provided",
            "Provide",
            "Provider"
          ],
          correct: 0,
          explanation: "🤝 Cấu trúc: committed to + V-ing. 'Providing' là đúng ngữ pháp. 'Committed to providing' = cam kết cung cấp. Đây là cụm từ thông dụng trong văn viết công sở."
        },
        {
          id: 36,
          type: "fill",
          question: "(36) - Điền từ thích hợp",
          context: "...on how to (36) _______ effectively with the new technology.",
          options: [
            "Works",
            "Work",
            "Working",
            "Worked"
          ],
          correct: 1,
          explanation: "💻 Cấu trúc: how to + V (nguyên thể). 'Work' là đúng ngữ pháp. 'How to work effectively with' = cách làm việc hiệu quả với..."
        },
        {
          id: 37,
          type: "fill",
          question: "(37) - Điền từ thích hợp",
          context: "Please don't (37) _______ to reach out to this team if you encounter any difficulties.",
          options: [
            "Hesitate",
            "Hesitating",
            "Hesitates",
            "Hesitated"
          ],
          correct: 0,
          explanation: "📞 Cụm từ cố định: 'don't hesitate to' + V = đừng ngần ngại làm gì. Đây là cách diễn đạt lịch sự, khuyến khích mọi người liên hệ khi cần hỗ trợ."
        },
        {
          id: 38,
          type: "comprehension",
          question: "(38) - What is the main goal of this strategic initiative?",
          options: [
            "To move to a new office location",
            "To modernize systems and streamline processes",
            "To reduce the staff size",
            "To reduce the company's budget"
          ],
          correct: 1,
          explanation: "🎯 Email nêu rõ mục tiêu chính: 'modernize our internal systems and streamline processes' (hiện đại hóa hệ thống và hợp lý hóa quy trình). Các đáp án khác không được đề cập trong email."
        },
        {
          id: 39,
          type: "comprehension",
          question: "(39) - When is the deadline for submitting feedback?",
          options: [
            "November 30",
            "December 15",
            "December 1",
            "December 31"
          ],
          correct: 1,
          explanation: "📅 Thông tin cụ thể: 'All feedback should be submitted to the Operations Team by December 15.' Từ 'by' quan trọng - có nghĩa 'trước hoặc vào ngày'."
        },
        {
          id: 40,
          type: "comprehension",
          question: "(40) - Who should be responsible for managing the transition in each department?",
          options: [
            "The support team",
            "Each department head",
            "The IT department",
            "The HR team"
          ],
          correct: 1,
          explanation: "👑 Email chỉ định rõ: 'Each department head is responsible for managing the transition smoothly within their teams.' Đây là thông tin trực tiếp, không cần suy luận."
        }
      ]
    },

    part7: {
      title: "PART 7: Multiple Texts (Job Posting + Application)",
      description: "10 câu hỏi - Đọc tin tuyển dụng và đơn ứng tuyển, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `**JOB POSTING**

**POSITION AVAILABLE: Senior Data Analyst**

Company: TechVision Solutions

Location: New York, NY

Employment Type: Full-time

Salary: $85,000 - $105,000 per year

**About the Role:**

TechVision Solutions is seeking a highly skilled Senior Data Analyst to join our analytics team. You will be responsible for analyzing complex datasets, identifying trends, and providing actionable insights to support strategic decision-making across the organization. This role requires strong technical expertise, excellent communication skills, and the ability to work collaboratively with cross-functional teams.

**Key Responsibilities:**

1. **Develop and maintain dashboards** – Create interactive visualizations for stakeholders
2. **Conduct statistical analysis** – Analyze business data to drive decisions
3. **Collaborate with teams** – Work with IT and business teams on data requirements
4. **Present findings** – Deliver insights and recommendations to senior management
5. **Mentor junior analysts** – Guide team members on data analysis techniques

**Required Qualifications:**

Bachelor's degree in Mathematics, Statistics, Computer Science, or related field

5+ years of experience in data analysis

Proficiency in SQL, Python, and Tableau or similar visualization tools

Strong analytical and problem-solving skills

Excellent written and verbal communication skills

**Preferred Qualifications:**

Master's degree in a related field

Experience with machine learning

Knowledge of cloud-based data platforms

**To Apply:** Submit your resume, cover letter, and portfolio to careers@techvision.com

---

**To:** careers@techvision.com

**From:** m.smith@email.com

**Date:** November 8

**Subject:** Application for Senior Data Analyst Position

Dear Hiring Manager,

I am writing to express my strong interest in the Senior Data Analyst position at TechVision Solutions. With seven years of experience in data analysis and a passion for translating complex data into meaningful insights, I believe I am well-suited for this role.

In my current position at DataCorp Analytics, I have successfully led multiple projects involving large-scale data analysis, creating comprehensive dashboards using Tableau, and conducting statistical analyses that directly impacted business strategy. I am proficient in SQL, Python, and R, which exceeds the required technical skills. Additionally, I hold a Master's degree in Statistics, and I have recently completed advanced training in machine learning through a recognized online platform.

My key strengths include strong analytical capabilities, excellent communication with both technical and non-technical stakeholders, and a proven track record of mentoring junior team members. I am confident that my experience, skills, and commitment to excellence make me an ideal candidate for your team.

I have attached my resume, detailed portfolio of past projects, and a cover letter for your review. I am available for an interview at your earliest convenience and look forward to discussing how I can contribute to TechVision Solutions.

Thank you for considering my application.

Best regards,
Michael Smith
m.smith@email.com
(555) 123-4567`,
      questions: [
        {
          id: 41,
          question: "What is the minimum years of experience required for the Senior Data Analyst position?",
          options: [
            "Three years",
            "Seven years",
            "Two years",
            "Five years"
          ],
          correct: 3,
          explanation: "📊 Job posting ghi rõ: '5+ years of experience' - dấu '+' có nghĩa 'trở lên', vậy mức tối thiểu là 5 năm. Michael có 7 năm, vượt yêu cầu."
        },
        {
          id: 42,
          question: "Which of the following is listed as a preferred qualification?",
          options: [
            "Bachelor's degree in Mathematics",
            "Experience with machine learning",
            "Proficiency in Python",
            "Five years of data analysis experience"
          ],
          correct: 1,
          explanation: "⭐ Phần 'Preferred Qualifications' liệt kê 'Experience with machine learning' - đây là điểm cộng, không phải yêu cầu bắt buộc. Michael có điểm này nhờ 'advanced training in machine learning'."
        },
        {
          id: 43,
          question: "How many years of experience does Michael Smith have in data analysis?",
          options: [
            "Ten years",
            "Three years",
            "Seven years",
            "Five years"
          ],
          correct: 2,
          explanation: "🎯 Michael viết rõ: 'With seven years of experience in data analysis' - 7 năm kinh nghiệm, vượt yêu cầu tối thiểu 5 năm của công ty."
        },
        {
          id: 44,
          question: "What is Michael Smith's highest level of education?",
          options: [
            "Ph.D. in Data Science",
            "Master's degree in Statistics",
            "Bachelor's degree in Computer Science",
            "Bachelor's degree in Mathematics"
          ],
          correct: 1,
          explanation: "🎓 Michael nêu rõ: 'I hold a Master's degree in Statistics' - bằng Thạc sĩ Thống kê. Đây cũng là preferred qualification trong job posting."
        },
        {
          id: 45,
          question: "Which programming languages or tools is Michael Smith NOT proficient in?",
          options: [
            "R",
            "SQL",
            "Python",
            "Java"
          ],
          correct: 3,
          explanation: "💻 Michael liệt kê: 'proficient in SQL, Python, and R' - nhưng không đề cập Java. Job posting yêu cầu SQL, Python, Tableau - Michael đáp ứng đủ và còn biết thêm R."
        },
        {
          id: 46,
          question: "What is the salary range for this position?",
          options: [
            "$80,000 - $100,000",
            "$95,000 - $115,000",
            "$85,000 - $105,000",
            "$75,000 - $95,000"
          ],
          correct: 2,
          explanation: "💰 Thông tin lương được ghi rõ: '$85,000 - $105,000 per year'. Các em cần đọc kỹ thông tin số trong bài đọc."
        },
        {
          id: 47,
          question: "According to his application, what is one of Michael Smith's key strengths?",
          options: [
            "Sales experience",
            "Mentoring junior team members",
            "Marketing expertise",
            "Project management"
          ],
          correct: 1,
          explanation: "🌟 Michael tự giới thiệu: 'a proven track record of mentoring junior team members' - kinh nghiệm hướng dẫn nhân viên trẻ. Đây cũng là một trong các key responsibilities trong job posting."
        },
        {
          id: 48,
          question: "What does the job posting indicate Michael Smith should do to apply?",
          options: [
            "Contact the HR manager on LinkedIn",
            "Submit resume, cover letter, and portfolio to careers@techvision.com",
            "Visit the office in person",
            "Call the company directly"
          ],
          correct: 1,
          explanation: "📧 Hướng dẫn ứng tuyển rõ ràng: 'Submit your resume, cover letter, and portfolio to careers@techvision.com'. Michael đã làm đúng theo hướng dẫn này."
        },
        {
          id: 49,
          question: "Where does Michael Smith currently work?",
          options: [
            "Data Solutions Inc.",
            "Statistics Institute",
            "DataCorp Analytics",
            "TechVision Solutions"
          ],
          correct: 2,
          explanation: "🏢 Michael viết: 'In my current position at DataCorp Analytics' - hiện đang làm tại DataCorp Analytics. TechVision Solutions là nơi ông đang ứng tuyển."
        },
        {
          id: 50,
          question: "What additional training has Michael Smith completed recently?",
          options: [
            "Statistical analysis course",
            "Advanced training in machine learning",
            "Tableau certification",
            "Advanced SQL training"
          ],
          correct: 1,
          explanation: "🚀 Michael đề cập: 'recently completed advanced training in machine learning' - đào tạo nâng cao về machine learning. Đây là điểm cộng so với preferred qualifications."
        }
      ]
    },

    part8: {
      title: "PART 8: Social Media Exchange",
      description: "10 câu hỏi - Đọc chuỗi trao đổi trên mạng xã hội, chọn đáp án tốt nhất (A, B, C, D).",
      type: "reading",
      text: `LinkedIn Message Thread - November 10

Emma (11:30): Hi Tom! I saw your recent post about the new product launch. Congratulations! I'm impressed by the innovation and market strategy you've outlined. Would you be available for coffee this week to discuss potential collaboration opportunities?

Tom (14:15): Hi Emma! Thanks so much for reaching out. I'm thrilled you're interested. Yes, I'd love to chat about this. How about Wednesday at 3 PM at Central Café? Let me know if that works for you.

Emma (16:45): Wednesday at 3 PM sounds perfect! I'll bring some preliminary ideas for our partnership proposal. Looking forward to it. See you then!

Tom (17:00): Great! I'll prepare some market analysis data. This is going to be exciting. See you Wednesday!

Emma (10:00): Hi Tom, just sending a quick reminder about our meeting today. I'm running about 15 minutes late due to traffic, but I'm on my way!

Tom (10:02): No problem at all! I'll grab us a table and order some coffee. See you soon!

Tom (15:30): Hi Emma! Thanks again for the great meeting today. Your ideas were innovative and align well with our vision. I'd like to schedule a follow-up meeting with our executive team next week. Would Friday work for you?

Emma (16:00): Absolutely! Friday works great for me. I'll prepare a detailed presentation for the executive team. Thanks for the opportunity!

Tom (16:15): Perfect! I'll send you the meeting details by end of day. Excited about what's ahead!`,
      questions: [
        {
          id: 51,
          question: "What prompted Emma to reach out to Tom?",
          options: [
            "An industry conference",
            "Tom's recent post about a product launch",
            "A mutual friend's recommendation",
            "A job opportunity"
          ],
          correct: 1,
          explanation: "📱 Emma nói ngay trong tin nhắn đầu: 'I saw your recent post about the new product launch.' Bài đăng về ra mắt sản phẩm là lý do trực tiếp khiến Emma liên hệ."
        },
        {
          id: 52,
          question: "What time was their first meeting scheduled?",
          options: [
            "10:00 AM",
            "3:30 PM",
            "3:00 PM",
            "2:15 PM"
          ],
          correct: 2,
          explanation: "🕒 Tom đề xuất: 'How about Wednesday at 3 PM at Central Café?' và Emma đồng ý. Thời gian rõ ràng là 3:00 PM."
        },
        {
          id: 53,
          question: "Where did Emma and Tom plan to meet?",
          options: [
            "An online video call",
            "Emma's office",
            "Central Café",
            "Tom's office"
          ],
          correct: 2,
          explanation: "☕ Địa điểm được Tom đề xuất: 'at Central Café'. Đây là cuộc gặp mặt trực tiếp tại quán cà phê, không phải meeting online hay tại văn phòng."
        },
        {
          id: 54,
          question: "Why was Emma late to the meeting?",
          options: [
            "She was preparing her presentation",
            "She was running late due to traffic",
            "She had another appointment",
            "She forgot about the meeting"
          ],
          correct: 1,
          explanation: "🚗 Emma thông báo trực tiếp: 'I'm running about 15 minutes late due to traffic.' Lý do là tắc đường, không phải các lý do khác."
        },
        {
          id: 55,
          question: "What did Emma plan to bring to the first meeting?",
          options: [
            "Product samples",
            "Preliminary ideas for partnership proposal",
            "A detailed presentation",
            "Market analysis data"
          ],
          correct: 1,
          explanation: "💡 Emma nói: 'I'll bring some preliminary ideas for our partnership proposal.' Đây là ý tưởng ban đầu, chưa phải bài thuyết trình chi tiết (sẽ chuẩn bị cho meeting sau)."
        },
        {
          id: 56,
          question: "How did Tom respond when Emma informed him she'd be late?",
          options: [
            "He asked her to meet the next day",
            "He said it was no problem and would wait",
            "He expressed frustration",
            "He said he had to reschedule"
          ],
          correct: 1,
          explanation: "😊 Tom phản hồi rất tích cực: 'No problem at all! I'll grab us a table and order some coffee.' Ông không những không phiền mà còn chủ động chuẩn bị."
        },
        {
          id: 57,
          question: "What was Tom's feedback about Emma's ideas from the first meeting?",
          options: [
            "He was not interested in them",
            "They were innovative and aligned with his vision",
            "They needed significant changes",
            "They were not realistic"
          ],
          correct: 1,
          explanation: "🌟 Tom khen ngợi: 'Your ideas were innovative and align well with our vision.' Phản hồi rất tích cực, dẫn đến việc ông muốn tổ chức meeting tiếp theo với ban lãnh đạo."
        },
        {
          id: 58,
          question: "When is the follow-up meeting with the executive team scheduled?",
          options: [
            "Thursday",
            "Friday",
            "Wednesday",
            "Monday"
          ],
          correct: 1,
          explanation: "📅 Tom đề xuất: 'Would Friday work for you?' và Emma trả lời 'Friday works great.' Vậy meeting tiếp theo được sắp xếp vào thứ Sáu."
        },
        {
          id: 59,
          question: "What will Emma prepare for the follow-up meeting?",
          options: [
            "Market research",
            "A detailed presentation",
            "Preliminary ideas",
            "Product samples"
          ],
          correct: 1,
          explanation: "🎤 Emma nói: 'I'll prepare a detailed presentation for the executive team.' Bài thuyết trình chi tiết này khác với 'preliminary ideas' mà cô mang đến meeting đầu tiên."
        },
        {
          id: 60,
          question: "What can be inferred about the relationship between Emma and Tom?",
          options: [
            "They are family members discussing business",
            "They are professionals exploring a potential business partnership",
            "They are old colleagues reconnecting",
            "They are long-time competitors"
          ],
          correct: 1,
          explanation: "🤝 Từ ngữ cảnh: Emma thấy bài đăng của Tom → đề xuất hợp tác → meeting bàn về partnership → planning follow-up với executive team. Rõ ràng đây là hai chuyên gia đang khám phá cơ hội hợp tác kinh doanh."
        }
      ]
    }
  },
};
</file>

<file path="Backend/firebase-config.js">
// backend/firebase-config.js
import admin from 'firebase-admin';
import dotenv from 'dotenv';

dotenv.config();

let db;
let isFirebaseEnabled = false;

try {
  const firebaseEnv = process.env.FIREBASE_SERVICE_ACCOUNT;
  
  if (!firebaseEnv) {
    throw new Error('FIREBASE_SERVICE_ACCOUNT not provided');
  }
  
  let serviceAccount;
  
  // Parse JSON từ environment variable
  if (typeof firebaseEnv === 'string') {
    serviceAccount = JSON.parse(firebaseEnv);
  } else {
    serviceAccount = firebaseEnv;
  }
  
  // Validate credentials
  if (!serviceAccount.project_id || !serviceAccount.private_key) {
    throw new Error('Missing required Firebase credentials');
  }
  
  // Initialize Firebase Admin
  if (!admin.apps.length) {
    admin.initializeApp({
      credential: admin.credential.cert(serviceAccount),
    });
  }
  
  db = admin.firestore();
  isFirebaseEnabled = true;
  
  console.log('✅ Firebase Admin initialized:', serviceAccount.project_id);
  
} catch (error) {
  console.warn('⚠️ Firebase initialization failed:', error.message);
  console.warn('⚠️ Using mock Firestore storage (development mode)');
  
  // Mock Firestore object for development/testing
  db = {
    collection: (name) => ({
      doc: (id) => ({
        set: async (data) => {
          console.log(`📝 [Mock] Set ${name}/${id}:`, JSON.stringify(data).substring(0, 50));
          return Promise.resolve();
        },
        delete: async () => {
          console.log(`🗑️ [Mock] Delete ${name}/${id}`);
          return Promise.resolve();
        },
        get: async () => ({ exists: false, data: () => null }),
      }),
      where: (field, op, value) => ({
        get: async () => {
          console.log(`🔍 [Mock] Query ${name} where ${field} ${op} ${value}`);
          return Promise.resolve({ docs: [] });
        },
      }),
      orderBy: (field, direction = 'asc') => ({
        limit: (n) => ({
          get: async () => {
            console.log(`📊 [Mock] Get ${n} docs from ${name} ordered by ${field}`);
            return Promise.resolve({ docs: [] });
          },
        }),
        get: async () => {
          console.log(`📊 [Mock] Get all docs from ${name} ordered by ${field}`);
          return Promise.resolve({ docs: [] });
        },
      }),
      get: async () => {
        console.log(`📊 [Mock] Get all docs from ${name}`);
        return Promise.resolve({ docs: [] });
      },
      add: async (data) => {
        console.log(`➕ [Mock] Add to ${name}:`, JSON.stringify(data).substring(0, 50));
        return Promise.resolve({ id: Date.now().toString() });
      },
    }),
    batch: () => ({
      set: (ref, data) => console.log(`📝 [Mock Batch] Set`),
      delete: (ref) => console.log(`🗑️ [Mock Batch] Delete`),
      commit: async () => {
        console.log('✅ [Mock Batch] Committed');
        return Promise.resolve();
      },
    }),
  };
  
  isFirebaseEnabled = false;
}

/**
 * Initialize Firestore with cleanup job
 */
export const initializeFirestore = async () => {
  if (isFirebaseEnabled) {
    console.log('✅ Firestore initialized with auto-cleanup');
    // Schedule cleanup every hour
    setInterval(cleanupOldMessages, 60 * 60 * 1000);
  } else {
    console.log('ℹ️ Firestore mock mode - no auto-cleanup');
  }
};

/**
 * Auto-delete messages older than 24 hours
 */
export const cleanupOldMessages = async () => {
  if (!isFirebaseEnabled) {
    console.log('ℹ️ [Mock] Auto-cleanup skipped');
    return;
  }
  
  try {
    const twentyFourHoursAgo = new Date(Date.now() - 24 * 60 * 60 * 1000);
    
    const snapshot = await db.collection('messages')
      .where('timestamp', '<', admin.firestore.Timestamp.fromDate(twentyFourHoursAgo))
      .get();

    if (snapshot.docs.length > 0) {
      const batch = db.batch();
      
      snapshot.docs.forEach((doc) => {
        batch.delete(doc.ref);
      });
      
      await batch.commit();
      console.log(`🗑️ Cleaned up ${snapshot.docs.length} old messages`);
    }
  } catch (error) {
    console.error('❌ Error cleaning up messages:', error.message);
  }
};

export { isFirebaseEnabled };
export { db };
export default db;
</file>

<file path="src/data/examData.js">
// src/data/examData.js

  /**
   * Lazy Loading Exam Data
   * - Chỉ load exam khi người dùng chọn
   * - Giảm bundle size ban đầu
   * - Cache data sau lần load đầu tiên
   */

  // Metadata cho tất cả các exams (lightweight)
  const EXAM_METADATA = {};
  for (let i = 1; i <= 22; i++) {
    EXAM_METADATA[`exam${i}`] = {
      id: `exam${i}`,
      title: `Đề thi ${i}`,
      loaded: false,
      data: null,
      loading: false,
      loadPromise: null
    };
  }

  // Cache để tránh load lại
  const examCache = new Map();

  /**
   * Load exam data dynamically
   * @param {string} examId - ID của exam (exam1, exam2, ...)
   * @returns {Promise<Object>} Exam data
   */
  export const loadExamData = async (examId) => {
    // Kiểm tra cache trước
    if (examCache.has(examId)) {
      return examCache.get(examId);
    }

    const metadata = EXAM_METADATA[examId];
    if (!metadata) {
      console.warn(`⚠️ Exam "${examId}" không tồn tại`);
      return null;
    }

    // Nếu đang load, đợi promise hiện tại
    if (metadata.loading && metadata.loadPromise) {
      return metadata.loadPromise;
    }

    // Bắt đầu load
    metadata.loading = true;
    
    const examNumber = examId.replace('exam', '');
    
    metadata.loadPromise = import(`./exams/exam${examNumber}.js`)
      .then(module => {
        const dataKey = `EXAM${examNumber}_DATA`;
        const data = module[dataKey];
        
        if (!data) {
          throw new Error(`❌ Không tìm thấy ${dataKey} trong module`);
        }

        // Lưu vào cache
        examCache.set(examId, data);
        metadata.data = data;
        metadata.loaded = true;
        metadata.loading = false;
        
        console.log(`✅ Đã load ${examId}`);
        return data;
      })
      .catch(error => {
        console.error(`❌ Lỗi khi load ${examId}:`, error);
        metadata.loading = false;
        metadata.loadPromise = null;
        return null;
      });

    return metadata.loadPromise;
  };

  /**
   * Preload exam để tăng tốc (optional)
   * @param {string} examId 
   */
  export const preloadExamData = (examId) => {
    if (!examCache.has(examId)) {
      loadExamData(examId);
    }
  };

  /**
   * Get exam by ID (async)
   * @param {string} examId 
   * @returns {Promise<Object|null>}
   */
  export const getExamById = async (examId) => {
    return await loadExamData(examId);
  };

  /**
   * Get all exam metadata (synchronous - chỉ trả về thông tin cơ bản)
   * @returns {Array<Object>}
   */
  export const getAllExamMetadata = () => {
    return Object.values(EXAM_METADATA).map(({ id, title, loaded }) => ({
      id,
      title,
      loaded
    }));
  };

  /**
   * Get all loaded exams (synchronous)
   * @returns {Array<Object>}
   */
  export const getAllLoadedExams = () => {
    return Array.from(examCache.values());
  };

  /**
   * Get exam parts (async)
   * @param {string} examId 
   * @returns {Promise<Object>}
   */
  export const getExamParts = async (examId) => {
    const exam = await loadExamData(examId);
    return exam?.parts || {};
  };

  /**
   * Get exam questions (async)
   * @param {string} examId 
   * @param {string} partId 
   * @returns {Promise<Array>}
   */
  export const getExamQuestions = async (examId, partId) => {
    const exam = await loadExamData(examId);
    const part = exam?.parts?.[partId];
    return part?.questions || [];
  };

  /**
   * Clear cache (dùng khi cần reset)
   */
  export const clearExamCache = () => {
    examCache.clear();
    Object.values(EXAM_METADATA).forEach(meta => {
      meta.loaded = false;
      meta.data = null;
      meta.loading = false;
      meta.loadPromise = null;
    });
    console.log('🗑️ Đã xóa cache exams');
  };

  /**
   * Get cache stats (debug)
   */
  export const getCacheStats = () => {
    return {
      totalExams: Object.keys(EXAM_METADATA).length,
      loadedExams: examCache.size,
      exams: Array.from(examCache.keys())
    };
  };

  // Export metadata để dùng cho dropdown
  export const EXAM_LIST = getAllExamMetadata();
</file>

<file path="src/data/exams/exam1.js">
export const EXAM1_DATA = {
  title: "HUFLIT Listening & Reading Practice - Exam 1",
  description: "Bộ đề thi đầy đủ với Listening (4 parts, 20 câu) và Reading (4 parts, 40 câu)",
  
  metadata: {
    exam: "exam1",
    hasAudio: true,
    listeningAudioUrl: "/public/data/audio/exam1/listening/full.mp3",
  },

  parts: {
    // ==========================================
    // LISTENING PART 1
    // ==========================================
    part1: {
      title: "PART 1: Short Conversations",
      description: "Nghe 5 đoạn hội thoại ngắn. Chọn đáp án tốt nhất (A, B, C, D) cho mỗi câu hỏi.",
      type: "listening",
      audioUrl: "/public/data/audio/exam1/listening/part1.mp3",
      script: `Câu 01: Shopping Experience
Michael: Hi Sarah! I just got back from the shopping mall.

Sarah: Oh wonderful! Did you find anything nice?

Michael: Well, I went looking for a new jacket and some shoes, but honestly, I'm quite disappointed. The problem is the prices. Everything was just ridiculously expensive! I didn't buy anything in the end because the prices were way too high.

Sarah: Oh no, that's too bad.

---

Câu 02: Gap Year in Thailand
David: Jennifer, welcome back! How long were you in Thailand exactly?

Jennifer: Hi David! It was amazing. I spent seven months there altogether.

David: Seven months! That's quite a long time. What did you do all that time?

Jennifer: I taught English for five months, and then I traveled for the remaining two months.

---

Câu 03: Business Trip to Taipei
Robert: Hi Victoria! Did you do any shopping in Taipei?

Victoria: Yes, I did, but I didn't go crazy with it. I bought a few things - some local tea, a small jade bracelet, and a couple of books about Taiwan's history.

Robert: A few things, that's nice.

---

Câu 04: Planning a Trip to Japan
Andrew: Lisa, do you have any recommendations about when I should go to Japan?

Lisa: Oh, you should definitely go in spring!

Andrew: Why spring specifically?

Lisa: Well, all of my friends who've been to Japan told me that spring is the best time to visit. The cherry blossoms are beautiful.

---

Câu 05: Navigating Tokyo
Amanda: Christopher, how was Tokyo? Easy to navigate?

Christopher: Well, to be honest, no. It was pretty difficult to get around, actually.

Amanda: Really? I thought the public transportation was good.

Christopher: It is, but there are so many lines and stations. Everything is so confusing.`,

      questions: [
        {
          id: 1,
          question: "Why didn't Michael buy anything?",
          options: [
            "He didn't find anything beautiful.",
            "He found the prices too high.",
            "He bought a lot of things because they're really cheap.",
            "He didn't have enough time."
          ],
          correct: 1,
          explanation: "Michael nói: 'I didn't buy anything in the end because the prices were way too high.' → Anh không mua gì vì giá quá cao."
        },
        {
          id: 2,
          question: "How long did Jennifer spend in Thailand?",
          options: [
            "She spent one month there.",
            "She spent seven months there.",
            "She spent one week there.",
            "She spent several times there."
          ],
          correct: 1,
          explanation: "Jennifer nói: 'I spent seven months there altogether.' → Cô ấy ở Thái Lan 7 tháng."
        },
        {
          id: 3,
          question: "What did Victoria buy in Taipei?",
          options: [
            "She didn't buy anything in Taipei.",
            "She bought many things in Taipei.",
            "She bought a few things in Taipei.",
            "She bought a souvenir in Taipei."
          ],
          correct: 2,
          explanation: "Victoria nói: 'I bought a few things - some local tea, a small jade bracelet, and a couple of books' → Cô mua một vài món đồ."
        },
        {
          id: 4,
          question: "When should Andrew visit Japan according to Lisa?",
          options: [
            "People told him to visit in the summer.",
            "People didn't tell him to visit in the spring.",
            "People told him to visit in the spring.",
            "People told him to visit in the autumn."
          ],
          correct: 2,
          explanation: "Lisa nói: 'you should definitely go in spring! The cherry blossoms are beautiful.' → Nên đi vào mùa xuân."
        },
        {
          id: 5,
          question: "How does Christopher feel about navigating Tokyo?",
          options: [
            "He found that Tokyo was very easy to get around.",
            "He found that Tokyo was not easy to get around.",
            "He found that Tokyo was a little bit easy to get around.",
            "He found that Tokyo was too busy to get around."
          ],
          correct: 1,
          explanation: "Christopher nói: 'It was pretty difficult to get around' → Khó tìm đường."
        }
      ]
    },

    // ==========================================
    // LISTENING PART 2
    // ==========================================
    part2: {
      title: "PART 2: Conversation",
      description: "Nghe một đoạn hội thoại giữa 3 người tại quán cà phê. Chọn đáp án tốt nhất cho 5 câu hỏi.",
      type: "listening",
      audioUrl: "/public/data/audio/exam1/listening/part2.mp3",
      script: `MARK: Alright everyone, before we order, let's just check—who wants orange juice? I know I do.

LINDA: Same here. I really need something fresh today.

ROBERTSON: Me too. I'll have orange juice as well.

MARK: Okay, that's three so far. What about you, Linda?

LINDA: I already said yes, Mark. That makes three of us.

MARK: Right, sorry. So three orange juices. Got it. Are you sure you don't want anything to eat, Linda? The sandwiches here are pretty good.

LINDA: No, thanks. I'm really not hungry right now. I had a big breakfast this morning.

MARK: Fair enough.

ROBERTSON: This place reminds me of my old job, actually.

MARK: Oh really? I thought you owned a restaurant before.

ROBERTSON: I used to, years ago. But now I spend most of my time working with young players. I coach at a local sports academy.

MARK: That sounds rewarding.

By the way, my mother-in-law is coming to lunch tomorrow... and she's bringing her sister along.

MARK: Speaking of family, have you decided what to give your granddaughter for her birthday yet?

ROBERTSON: Honestly, we're still talking about it. My wife thinks clothes, I think money... we haven't made a final decision yet.`,

      questions: [
        {
          id: 6,
          question: "How many people want orange juice?",
          options: ["Two", "Three", "Four", "Five"],
          correct: 1,
          explanation: "Mark, Linda, và Robertson đều muốn nước cam. Mark xác nhận: 'So three orange juices.'"
        },
        {
          id: 7,
          question: "Why doesn't the woman (Linda) want anything to eat?",
          options: [
            "Because she's not hungry.",
            "Because she doesn't feel well.",
            "Because she's on a diet.",
            "Because the food is not good enough."
          ],
          correct: 0,
          explanation: "Linda nói: 'I'm really not hungry right now. I had a big breakfast this morning.'"
        },
        {
          id: 8,
          question: "What does Robertson do now?",
          options: [
            "He owns a restaurant.",
            "He works in Orlando.",
            "He works with young players.",
            "He works in a restaurant."
          ],
          correct: 2,
          explanation: "Robertson nói: 'now I spend most of my time working with young players. I coach at a local sports academy.'"
        },
        {
          id: 9,
          question: "Who's coming to lunch?",
          options: [
            "The man's mother-in-law and his sister.",
            "The man's mother and his sister-in-law.",
            "The man's mother-in-law and her sister.",
            "The man's sister-in-law and his sister."
          ],
          correct: 2,
          explanation: "Mark nói: 'my mother-in-law is coming to lunch tomorrow... and she's bringing her sister along.'"
        },
        {
          id: 10,
          question: "What are they going to give their granddaughter for her birthday?",
          options: [
            "Money",
            "Clothes",
            "A hat",
            "They can't decide."
          ],
          correct: 3,
          explanation: "Robertson nói: 'we're still talking about it... we haven't made a final decision yet.'"
        }
      ]
    },

    // ==========================================
    // LISTENING PART 3
    // ==========================================
    part3: {
      title: "PART 3: Monologue",
      description: "Nghe một bài nói độc thoại. Chọn đáp án tốt nhất cho 5 câu hỏi.",
      type: "listening",
      audioUrl: "/public/data/audio/exam1/listening/part3.mp3",
      script: `Hello everyone, and a very warm welcome back to the podcast! I'm your host, Angela Carter. I hope you're all having a fantastic week. Today, I've been doing a bit of soul-searching, and I wanted to share a quick reflection on my recent learning journey, along with a few personal stories that I think many of you might relate to.

First off, let's talk about that English course I finally wrapped up last week. You know how sometimes you sign up for a class and it's just... okay? Well, this wasn't that. I can honestly tell you, looking back, the class was a real success. It wasn't just 'acceptable' or 'good enough'—and thank goodness it was far from 'awful'! The energy in the room was electric, and the tutor really knew how to break down those complex grammar walls. By the final session, I walked out of there feeling like a different person.

And speaking of results, I have some major personal news to share with you all. It's been a week of nervous waiting, but I've just got the result of my English test! When I saw that email notification, my heart actually skipped a beat. After all those late nights and endless practice exercises, seeing the score was just so rewarding. It's a great reminder that the grind really does pay off.

However, it wasn't all sunshine and rainbows. Our tutor was legendary for being strict about one thing: accountability. She made it crystal clear from day one that if you miss a deadline she has set, you will only get fifty percent of your marks for that task. No excuses! While that 50% penalty felt a bit harsh at first, it actually forced me to stop procrastinating and finally master my calendar.

Reflecting on this made me think about my younger self. To be honest, I was a bit bored at my school back then. It wasn't that I was a poor student or lacked intelligence—far from it—but the traditional classroom just didn't spark anything in me. I often found the lessons repetitive and, frankly, struggled to see the point of it all. Funny how much things change when you're an adult and you actually choose what you want to learn, right?

Anyway, before I let you go, I have to give a shout-out to a little gem I found. Last weekend, I finally checked out that restaurant on Main Street a friend kept raving about. And wow—it has a great menu, the food is absolutely delicious, and what impressed me most was that it has lots of options for vegetarians. Usually, you only get one of those things, but this place had it all. It's definitely my new favorite spot.

Thanks so much for tuning in today. It's been a pleasure sharing these moments with you. Until next time, keep learning and keep exploring!`,

      questions: [
        {
          id: 11,
          question: "Angela describes the English class as __________.",
          options: [
            "good enough",
            "acceptable",
            "awful",
            "a real success"
          ],
          correct: 3,
          explanation: "Angela nói: 'the class was a real success. It wasn't just acceptable or good enough—and thank goodness it was far from awful!'"
        },
        {
          id: 12,
          question: "Angela has just __________.",
          options: [
            "done a master's",
            "got the result of my English test",
            "got 6.5",
            "get"
          ],
          correct: 1,
          explanation: "Angela nói: 'I've just got the result of my English test!'"
        },
        {
          id: 13,
          question: "If you miss a deadline your tutor has set, you __________.",
          options: [
            "will be given a zero",
            "will get 50% of your marks",
            "will be fined",
            "will get all marks"
          ],
          correct: 1,
          explanation: "Angela nói: 'if you miss a deadline she has set, you will only get fifty percent of your marks for that task.'"
        },
        {
          id: 14,
          question: "Angela was __________.",
          options: [
            "an intelligent kid in class",
            "a bit bored at her school",
            "an AI",
            "already"
          ],
          correct: 1,
          explanation: "Angela nói: 'I was a bit bored at my school back then' và giải thích 'the traditional classroom just didn't spark anything in me.'"
        },
        {
          id: 15,
          question: "The restaurant in the main street __________.",
          options: [
            "has a good menu",
            "has nice food",
            "has lots of options for vegetarians",
            "all correct"
          ],
          correct: 3,
          explanation: "Angela nói: 'it has a great menu, the food is absolutely delicious, and what impressed me most was that it has lots of options for vegetarians.'"
        }
      ]
    },

    // ==========================================
    // LISTENING PART 4
    // ==========================================
    part4: {
      title: "PART 4: Extended Conversation",
      description: "Nghe một đoạn hội thoại dài. Chọn đáp án tốt nhất cho 5 câu hỏi.",
      type: "listening",
      audioUrl: "/public/data/audio/exam1/listening/part4.mp3",
      script: `NARRATOR: A customer named Michael is at a men's clothing store asking to return a tie he bought.

MICHAEL: Hi, I need to return a tie. This tie was given to me as a birthday present from my wife. But then I also got the same tie as a Christmas present from my company. And my daughter just gave me the same tie as a gift too!

JESSICA: Oh wow! So the tie was a birthday present, a Christmas present, and a gift from your daughter?

MICHAEL: Exactly! I have three of the same tie now. I'd like to return one.

JESSICA: When did you receive the first tie?

MICHAEL: My wife gave me the first one about two weeks ago on my birthday. That's when she bought it from your store.

JESSICA: So the tie was purchased two weeks ago?

MICHAEL: Yes, two weeks ago. That's the one I want to return.

JESSICA: Do you have the receipt?

MICHAEL: No, I don't have the receipt. My wife bought it as a gift and didn't give me the receipt. I'm sorry, but the tie is definitely from your store. I remember the packaging.

JESSICA: Without a receipt, I need proof of purchase. Do you have it at home?

MICHAEL: I'm not sure if my wife kept it. It's been two weeks. I don't have the receipt.

MICHAEL: But why won't you help? I have the tie and it's from your store!

JESSICA: Without a receipt, I have no way to verify that this tie was purchased from our store. It could be from anywhere—another store, online, anywhere. Company policy requires proof of purchase. Without the receipt, the man couldn't prove that the tie was purchased from our store. I simply don't have the authority to process a refund without proof.

MICHAEL: So you don't believe me?

JESSICA: It's not about believing you. It's about having documentation. I cannot authorize a refund without proof. That's the policy.

MICHAEL: I'm frustrated. This doesn't seem fair.

JESSICA: I understand your frustration and I really want to help. Go home and look for the receipt. Check your email for a receipt confirmation. Check your wife's credit card statement. If you find any proof of purchase, bring it back and I'll process your return immediately.

MICHAEL: That's actually helpful. Thank you.

JESSICA: You're welcome. Let's stay positive. You've got this! Come back when you find the proof, and we'll take care of you.

NARRATOR: Michael left the store to search for the receipt. Jessica tried to help him by suggesting solutions, even though she couldn't process the return without proof of purchase.`,

      questions: [
        {
          id: 16,
          question: "The tie __________.",
          options: [
            "was a birthday present",
            "was a Christmas present",
            "was a gift of a boyfriend",
            "all correct"
          ],
          correct: 0,
          explanation: "Michael nói: 'This tie was given to me as a birthday present from my wife.'"
        },
        {
          id: 17,
          question: "The tie was purchased __________.",
          options: [
            "last week",
            "a few weeks ago",
            "two weeks ago",
            "two years ago"
          ],
          correct: 2,
          explanation: "Michael nói: 'My wife gave me the first one about two weeks ago on my birthday.'"
        },
        {
          id: 18,
          question: "When asking for refunding, the man __________.",
          options: [
            "had a receipt",
            "left his receipt at home",
            "didn't have receipt",
            "don't receipt"
          ],
          correct: 2,
          explanation: "Michael nói: 'No, I don't have the receipt. My wife bought it as a gift and didn't give me the receipt.'"
        },
        {
          id: 19,
          question: "She (the shop assistant) didn't agree to pay back money because __________.",
          options: [
            "she didn't believe in the man",
            "the man couldn't prove that the tie was purchased from her store",
            "she has no right to do so",
            "she hadn't believed"
          ],
          correct: 1,
          explanation: "Jessica nói: 'Without a receipt, I have no way to verify that this tie was purchased from our store. Company policy requires proof of purchase.'"
        },
        {
          id: 20,
          question: "The shop assistant tries to __________.",
          options: [
            "make the man angry",
            "calm the man down",
            "bother the man",
            "make the man happy"
          ],
          correct: 1,
          explanation: "Jessica nói: 'I understand your frustration and I really want to help... Let's stay positive. You've got this!'"
        }
      ]
    },

    // ==========================================
    // READING PART 5 - GRAMMAR/VOCABULARY
    // ==========================================
    part5: {
      title: "PART 5: Fill in the Blank (Grammar/Vocabulary)",
      description: "10 câu hỏi - Chọn từ/cụm từ phù hợp để hoàn thành câu.",
      type: "reading",
      questions: [
        {
          id: 21,
          question: "Customer reviews indicate that many modern mobile devices are often unnecessarily _______.",
          options: ["Complication", "Complicates", "Complicate", "Complicated"],
          correct: 3,
          explanation: "Cấu trúc: 'devices are _______' yêu cầu tính từ. 'Complicated' là đáp án đúng."
        },
        {
          id: 22,
          question: "Among ________ recognized at the company awards ceremony were senior business analyst Natalie Obi and sales associate Peter Comeau.",
          options: ["who", "whose", "they", "those"],
          correct: 3,
          explanation: "'Among those recognized... were [subject]' sử dụng 'those' làm đại từ."
        },
        {
          id: 23,
          question: "Jamal Nawzad has received top performance reviews _______ he joined the sales department two years ago.",
          options: ["despite", "except", "since", "during"],
          correct: 2,
          explanation: "'has received... since' là cấu trúc thì hiện tại hoàn thành đúng."
        },
        {
          id: 24,
          question: "All clothing sold in Develyn's Boutique is made from natural materials and contains no __________ dyes.",
          options: ["immediate", "synthetic", "reasonable", "assumed"],
          correct: 1,
          explanation: "'Synthetic dyes' (thuốc nhuộm nhân tạo) trái ngược với 'natural materials'."
        },
        {
          id: 25,
          question: "Gyeon Corporation's continuing education policy states that _______ learning new skills enhances creativity and focus.",
          options: ["regular", "regularity", "regulate", "regularly"],
          correct: 0,
          explanation: "'regular learning' cần tính từ để mô tả 'learning'."
        },
        {
          id: 26,
          question: "The new employee orientation will begin at 9 a.m. and will _______ an overview of company policies.",
          options: ["include", "includes", "included", "including"],
          correct: 0,
          explanation: "'will + V nguyên thể' là cấu trúc thì tương lai đơn."
        },
        {
          id: 27,
          question: "To ensure product quality, all items must be thoroughly tested _______ being shipped to customers.",
          options: ["before", "during", "between", "unless"],
          correct: 0,
          explanation: "'before + V-ing' chỉ hành động xảy ra trước một hành động khác."
        },
        {
          id: 28,
          question: "The marketing department is seeking a graphic designer who can work _______ and meet tight deadlines.",
          options: ["independence", "independently", "independent", "dependently"],
          correct: 1,
          explanation: "Sau động từ 'work' cần trạng từ 'independently'."
        },
        {
          id: 29,
          question: "Because of the heavy rain, the outdoor event has been _______ until next weekend.",
          options: ["postponed", "postponing", "postpone", "postpones"],
          correct: 0,
          explanation: "'has been + V3' là cấu trúc thì hiện tại hoàn thành bị động."
        },
        {
          id: 30,
          question: "The manager reminded the staff that punctuality and teamwork are key factors in maintaining a positive _______.",
          options: ["environment", "equipment", "advertisement", "appointment"],
          correct: 0,
          explanation: "'positive environment' (môi trường tích cực) là collocation phù hợp."
        }
      ]
    },

    // ==========================================
    // READING PART 6 - CLOZE TEXT
    // ==========================================
    part6: {
      title: "PART 6: Cloze Text (Email/Announcement)",
      description: "10 câu hỏi - Điền từ/cụm vào văn bản email.",
      type: "reading",
      text: `To: All Marketing Department Staff
From: Clara Lee, Marketing Director
Subject: Upcoming Product Launch Preparation

Dear Team,

As you all know, we are preparing for the official launch of our new product line, the EcoSmart Home Series, scheduled for early next quarter. In order to ensure a successful debut, we will begin a series of meetings next week to finalize the promotional strategy. Each team member will be assigned specific responsibilities to (31) smooth coordination between departments.

Our primary objective is to increase brand awareness and attract potential customers through both online and offline marketing channels. The social media team will focus on digital advertising, while the design team will create visual materials to (32) our brand image.

Additionally, we will collaborate closely with our sales representatives to collect feedback from clients. This will help us make any necessary adjustments before the official release. Please note that all suggestions should be submitted to my office no later than Friday, March 22, so that we have enough time to review and (33) them.

The official press conference will take place at our headquarters on April 5. We expect several major media outlets to attend, so everyone must be prepared to present our product in the most professional manner possible. A rehearsal session will be held two days before the event to (34) that all participants are comfortable with their roles.

For those who are new to the team, we will organize a short orientation program to explain our marketing policies and internal communication procedures. Attendance is highly encouraged, as this session will provide essential information on how to (35) with other departments effectively.

We truly appreciate everyone's dedication and teamwork during this busy time. Your hard work and creativity will certainly make this product launch a success. If you have any questions or concerns, please don't hesitate to (36) me directly.

Thank you once again for your continued commitment to excellence. I am confident that, together, we will achieve outstanding results.

Best regards,
Clara Lee
Marketing Director
InnovateTech Solutions`,

      questions: [
        {
          id: 31,
          question: "(31) - Điền từ thích hợp",
          options: ["ensure", "suggest", "describe", "remind"],
          correct: 0,
          explanation: "'ensure + noun' = 'đảm bảo rằng'."
        },
        {
          id: 32,
          question: "(32) - Điền từ thích hợp",
          options: ["attend", "improve", "reinforce", "prevent"],
          correct: 2,
          explanation: "'reinforce brand image' = 'tăng cường hình ảnh thương hiệu'."
        },
        {
          id: 33,
          question: "(33) - Điền từ thích hợp",
          options: ["reject", "implement", "transfer", "decline"],
          correct: 1,
          explanation: "'review and implement' = 'xem xét và triển khai'."
        },
        {
          id: 34,
          question: "(34) - Điền từ thích hợp",
          options: ["warn", "announce", "require", "ensure"],
          correct: 3,
          explanation: "'ensure + that + clause' = 'đảm bảo rằng'."
        },
        {
          id: 35,
          question: "(35) - Điền từ thích hợp",
          options: ["compete", "cooperate", "complain", "compare"],
          correct: 1,
          explanation: "'cooperate with other departments' = 'hợp tác với các phòng ban khác'."
        },
        {
          id: 36,
          question: "(36) - Điền từ thích hợp",
          options: ["reach", "push", "delay", "ignore"],
          correct: 0,
          explanation: "'reach me directly' = 'liên hệ với tôi trực tiếp'."
        }
      ]
    },

    // ==========================================
    // READING PART 7 - MULTIPLE TEXTS
    // ==========================================
    part7: {
      title: "PART 7: Multiple Texts",
      description: "10 câu hỏi - Đọc quảng cáo và email, chọn đáp án tốt nhất.",
      type: "reading",
      text: `http://www.businessaudiopro.com

BUSINESS AUDIO PRO
Enhance Your Company's Image with a Professionally Recorded Telephone Greeting

A professional, personalized voicemail message creates an excellent first impression. Business Audio Pro meets your specifications to record a customized telephone greeting within three business days!

SERVICES WE OFFER:

1. Professional Voice Talent for Voicemail Messages – We have numerous male and female voice actors with a wide range of tones, accents, and dialects. Visit businessaudiopro.com to hear examples of what each actor sounds like and choose the one that best suits your needs.

2. On-Hold Messages – We also create professional on-hold messages with pleasant music to enhance your customers' experience.

3. Customized Script Writing – Our experienced script writers can help you craft a personalized message that represents you and your business.

4. Multilingual Voice Production – For those with a multilingual customer base, we offer services in a wide range of languages.

Send us an e-mail (inquiry@businessaudiopro.com) with your contact information and your specific needs. A representative will call you within 24 hours to discuss your project and provide a price estimate.

---

To: inquiry@businessaudiopro.com
From: j.annesly@anneslydata.com
Date: June 25
Subject: Request

I found your notice in the newspaper and wish to use your services for my data-processing and transcription business. I am looking specifically for a professionally recorded voicemail greeting intended for my clients, and I wonder if you would be available to write and record this for me, and how soon. Since I work with English- and Spanish-speaking clients, I would like the message to be recorded in both languages. Please reach out to me at my mobile phone between the hours of 10:00 A.M. and 5:00 P.M. I hope to hear from you soon.

Thank you,
Jody Annesly
Annesly Data
512-555-6879 (mobile)
342 Maymill Road, Fort Worth, TX 70609`,

      questions: [
        {
          id: 41,
          question: "According to the advertisement, why should customers visit the Business Audio Pro Web site?",
          options: [
            "To hear voice samples",
            "To add a new phone number",
            "To submit a credit card payment",
            "To request recording equipment"
          ],
          correct: 0,
          explanation: "Quảng cáo nói: 'Visit businessaudiopro.com to hear examples of what each actor sounds like.'"
        },
        {
          id: 42,
          question: "What is suggested about Business Audio Pro?",
          options: [
            "It fills orders once a week.",
            "It advertises in the newspaper.",
            "It specializes in data-processing services.",
            "It has recently expanded its business."
          ],
          correct: 1,
          explanation: "Email từ Annesly: 'I found your notice in the newspaper' → Business Audio Pro quảng cáo trên báo."
        },
        {
          id: 43,
          question: "Who most likely is Ms. Annesly?",
          options: [
            "An actor",
            "A script writer",
            "A sales associate",
            "A business owner"
          ],
          correct: 3,
          explanation: "Email: 'my data-processing and transcription business' + chữ ký 'Annesly Data' → Cô là chủ doanh nghiệp."
        },
        {
          id: 44,
          question: "What service does Ms. Annesly NOT request from Business Audio Pro?",
          options: [
            "Professional voice talent",
            "On-hold messages",
            "Customized script writing",
            "Multilingual voice production"
          ],
          correct: 1,
          explanation: "Annesly yêu cầu: 'voicemail greeting', 'script writing', và 'both languages'. Cô không đề cập 'on-hold messages'."
        },
        {
          id: 45,
          question: "What will Ms. Annesly most likely receive within 24 hours?",
          options: [
            "A voice sample recording",
            "A phone call from a representative",
            "A written script",
            "A completed voicemail greeting"
          ],
          correct: 1,
          explanation: "Quảng cáo: 'A representative will call you within 24 hours.'"
        }
      ]
    },

    // ==========================================
    // READING PART 8 - TEXT MESSAGE CHAIN
    // ==========================================
    part8: {
      title: "PART 8: Text Message Chain",
      description: "10 câu hỏi - Đọc chuỗi tin nhắn, chọn đáp án tốt nhất.",
      type: "reading",
      text: `SAM BACH (11:59): My first flight was delayed, so I missed my connection in Beijing.
SAM BACH (12:00): So now, I'm going to be on a flight arriving in Kansai at 18:00.

AKIRA OTANI (12:05): OK. Same airline?

SAM BACH (12:06): It's still Fly Right Airlines. It will be later in the day but still in time for our client meeting.

AKIRA OTANI (12:06): I'll confirm the arrival time. Do you have any checked bags?

SAM BACH (12:10): I do. Would you mind meeting me at the door after I go through customs?

AKIRA OTANI (12:15): Sure thing. Parking spots can be hard to find, but now I'll have extra time to drive around and look.

SAM BACH (12:16): Yes, sorry about that. See you then!`,

      questions: [
        {
          id: 51,
          question: "What is suggested about Mr. Bach?",
          options: [
            "He has been to Kansai more than once.",
            "He currently works in Beijing.",
            "He is on a business trip.",
            "He works for Fly Right Airlines."
          ],
          correct: 2,
          explanation: "Bach nói 'our client meeting' → Anh ấy đang công tác kinh doanh."
        },
        {
          id: 52,
          question: "At 12:15, what does Mr. Otani mean when he writes, 'Sure thing'?",
          options: [
            "He has confirmed the arrival time of a flight.",
            "He is certain he will be able to find a parking place.",
            "He agrees to wait at the door near the customs area.",
            "He knows Mr. Bach must pass through customs."
          ],
          correct: 2,
          explanation: "'Sure thing' là phản ứng đồng ý với yêu cầu 'Would you mind meeting me at the door after I go through customs?'"
        },
        {
          id: 53,
          question: "Why was Mr. Bach's flight delayed?",
          options: [
            "There was bad weather in Kansai.",
            "He missed his connection in Beijing.",
            "The airline changed the departure time.",
            "He forgot to check in early."
          ],
          correct: 1,
          explanation: "Bach nói: 'My first flight was delayed, so I missed my connection in Beijing.'"
        },
        {
          id: 54,
          question: "What time is Mr. Bach's new flight expected to arrive?",
          options: [
            "11:59",
            "12:06",
            "18:00",
            "20:15"
          ],
          correct: 2,
          explanation: "Bach nói: 'I'm going to be on a flight arriving in Kansai at 18:00.'"
        },
        {
          id: 55,
          question: "What does Mr. Otani offer to do for Mr. Bach?",
          options: [
            "Drive him to the hotel",
            "Pick him up at the airport",
            "Change his flight booking",
            "Help carry his luggage"
          ],
          correct: 1,
          explanation: "Otani: 'I'll confirm the arrival time. Do you have any checked bags?' → Anh ta sẽ đón Bach tại sân bay."
        }
      ]
    }
  }
};

export default EXAM1_DATA;
</file>

<file path="src/components/layout/MainLayout.jsx">
// src/components/layout/MainLayout.jsx
import React from 'react';
import Navbar from '../Navbar';
import Footer from '../footer/Footer';

const MainLayout = ({ 
  children, 
  testType, 
  onTestTypeChange, 
  practiceType, 
  onPracticeTypeChange,
  user,
  onAuthClick,
  onChatClick,
  onProfileClick,
  viewMode,
  onlineCount,
  totalUsers,
  onAnswersClick
}) => {
  return (
    <div className="min-h-screen bg-gradient-to-br from-orange-50 via-yellow-50 to-amber-50 flex flex-col overflow-visible">
      
      {/* Navbar */}
      <Navbar
        testType={testType}
        onTestTypeChange={onTestTypeChange}
        practiceType={practiceType}
        onPracticeTypeChange={onPracticeTypeChange}
        user={user}
        onAuthClick={onAuthClick}
        onChatClick={onChatClick}
        onProfileClick={onProfileClick}
        viewMode={viewMode}
        onlineCount={onlineCount}
        totalUsers={totalUsers}
        onAnswersClick={onAnswersClick}
      />

      {/* Main Content - NO OVERFLOW RESTRICTIONS */}
      <main className="flex-1 pt-20 pb-16 px-3 sm:px-4 md:px-6 lg:px-8 overflow-visible w-full relative z-0">
        {children}
      </main>

      {/* Footer */}
      <Footer 
        onlineCount={onlineCount}
        totalUsers={totalUsers}
      />
      
    </div>
  );
};

export default MainLayout;
</file>

<file path="src/components/Navbar.jsx">
import React, { useState, useEffect, useCallback } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Headphones, BookOpen, GraduationCap, Sparkles, 
  ChevronDown, LogOut, User, Menu, X, Flame, Languages, Home
} from 'lucide-react';
import { useFirebaseAuth } from '../hooks/useFirebaseAuth';
import { useStreak } from './hooks/useStreak';
import { ROUTES } from '../config/routes';
import logo from '../assets/logo.png';

const Navbar = ({ testType, onTestTypeChange, practiceType, onPracticeTypeChange }) => {
  const navigate = useNavigate();
  const location = useLocation();
  const { user, isSignedIn, signInWithGoogle, signOut } = useFirebaseAuth();
  const { streak } = useStreak();
  
  const [isScrolled, setIsScrolled] = useState(false);
  const [mobileOpen, setMobileOpen] = useState(false);
  const [showProfileMenu, setShowProfileMenu] = useState(false);
  const [scrollDirection, setScrollDirection] = useState('up');
  const [lastScrollY, setLastScrollY] = useState(0);

  const menuItems = [
    { id: 'listening', label: 'Luyện Nghe', icon: Headphones, type: 'test', path: ROUTES.TEST },
    { id: 'reading', label: 'Luyện Đọc', icon: BookOpen, type: 'test', path: ROUTES.TEST },
    { id: 'full', label: 'Thi Thử', icon: GraduationCap, type: 'exam', path: ROUTES.FULL_EXAM },
    { id: 'grammar', label: 'Ngữ Pháp', icon: Sparkles, type: 'practice', path: ROUTES.GRAMMAR },
    { id: 'vocabulary', label: 'Từ Vựng', icon: Languages, type: 'practice', path: ROUTES.VOCABULARY },
  ];

  const bottomMenuItems = [
    { id: 'home', label: 'Trang chủ', icon: Home, path: ROUTES.HOME },
    ...menuItems.slice(0, 2),
  ];

  // Scroll effect - Navbar luôn hiển thị, không bị ẩn
  useEffect(() => {
    const handleScroll = () => {
      const currentScrollY = window.scrollY;
      
      // Kiểm tra nếu cuộn từ trên xuống hay từ dưới lên
      if (currentScrollY > lastScrollY && currentScrollY > 100) {
        setScrollDirection('down');
      } else {
        setScrollDirection('up');
      }
      
      setLastScrollY(currentScrollY);
      setIsScrolled(currentScrollY > 20);
    };

    window.addEventListener('scroll', handleScroll, { passive: true });
    return () => window.removeEventListener('scroll', handleScroll);
  }, [lastScrollY]);

  // Body overflow management
  useEffect(() => {
    document.body.style.overflow = mobileOpen ? 'hidden' : 'unset';
    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [mobileOpen]);

  const handleNavClick = useCallback((item) => {
    if (item.type === 'test') onTestTypeChange?.(item.id);
    if (item.type === 'practice') onPracticeTypeChange?.(item.id);
    navigate(item.path);
    setMobileOpen(false);
    setShowProfileMenu(false);
  }, [onTestTypeChange, onPracticeTypeChange, navigate]);

  const handleLogoClick = useCallback(() => {
    navigate(ROUTES.HOME);
    setMobileOpen(false);
  }, [navigate]);

  const isItemActive = (item) => {
    const pathMatch = location.pathname === item.path;
    if (item.type === 'test') return pathMatch && testType === item.id;
    if (item.type === 'practice') return pathMatch && practiceType === item.id;
    return pathMatch;
  };

  const handleSignOut = useCallback(() => {
    signOut();
    setShowProfileMenu(false);
    setMobileOpen(false);
  }, [signOut]);

  const handleProfileClick = useCallback(() => {
    navigate(ROUTES.PROFILE);
    setShowProfileMenu(false);
    setMobileOpen(false);
  }, [navigate]);

  const NavButton = ({ item, isActive, onClick }) => {
    const Icon = item.icon;
    return (
      <button
        onClick={onClick}
        className={`flex items-center gap-2 px-4 py-2.5 rounded-lg font-semibold text-sm transition-all whitespace-nowrap ${
          isActive
            ? 'bg-[#00358E] text-white shadow-md'
            : 'text-slate-700 hover:bg-slate-100'
        }`}
      >
        <Icon className="w-4 h-4 flex-shrink-0" />
        <span>{item.label}</span>
      </button>
    );
  };

  const BottomNavItem = ({ item, isActive, onClick }) => {
    const Icon = item.icon;
    return (
      <motion.button
        onClick={onClick}
        whileHover={{ scale: 1.08 }}
        whileTap={{ scale: 0.95 }}
        className={`flex flex-col items-center justify-center gap-1.5 py-2 px-3 rounded-xl transition-all relative group ${
          isActive
            ? 'text-[#00358E]'
            : 'text-slate-600 hover:text-[#00358E]'
        }`}
      >
        <div className={`p-2 rounded-lg transition-all ${
          isActive
            ? 'bg-blue-100'
            : 'group-hover:bg-slate-100'
        }`}>
          <Icon className="w-5 h-5" />
        </div>
        <span className="text-[10px] font-semibold text-center whitespace-nowrap">{item.label}</span>
        {isActive && (
          <motion.div
            layoutId="bottom-active"
            className="absolute bottom-0 h-1 w-8 bg-[#00358E] rounded-full"
          />
        )}
      </motion.button>
    );
  };

  return (
    <>
      {/* NAVBAR - LUÔN HIỂN THỊ, STICKY POSITION */}
      <nav
        className={`fixed top-0 left-0 right-0 z-40 transition-all duration-300 ${
          isScrolled
            ? 'bg-white/70 backdrop-blur-xl shadow-md border-b border-white/40'
            : 'bg-white/30 backdrop-blur-lg border-b border-white/20'
        }`}
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-between h-16 sm:h-20">
            {/* Logo */}
            <button 
              onClick={handleLogoClick}
              className="flex items-center gap-2 cursor-pointer group flex-shrink-0 hover:opacity-80 transition-opacity"
            >
              <div className="w-10 h-10 bg-[#00358E] rounded-lg flex items-center justify-center shadow-lg">
                <img src={logo} alt="Logo" className="w-6 h-6 object-contain" />
              </div>
              <div className="hidden sm:block">
                <h1 className="text-[#00358E] font-black text-lg leading-tight">HUFLIT</h1>
                <p className="text-[#FF7D00] text-xs font-bold tracking-wider uppercase">Exam Center</p>
              </div>
            </button>

            {/* Desktop Menu */}
            <div className="hidden lg:flex items-center gap-1 bg-slate-100 p-1 rounded-2xl">
              {menuItems.map((item) => (
                <NavButton
                  key={item.id}
                  item={item}
                  isActive={isItemActive(item)}
                  onClick={() => handleNavClick(item)}
                />
              ))}
            </div>

            {/* Right Actions */}
            <div className="flex items-center gap-2 sm:gap-3">
              {/* Streak Badge */}
              {isSignedIn && streak > 0 && (
                <motion.div 
                  initial={{ opacity: 0, scale: 0.5 }}
                  animate={{ opacity: 1, scale: 1 }}
                  className="hidden xs:flex items-center gap-1.5 bg-orange-50 px-3 py-1.5 rounded-full border border-orange-100"
                >
                  <Flame className="w-4 h-4 text-[#FF7D00] fill-[#FF7D00] animate-pulse" />
                  <span className="text-[#FF7D00] font-bold text-xs sm:text-sm">{streak} Ngày</span>
                </motion.div>
              )}

              {/* Auth Button / Profile */}
              {isSignedIn ? (
                <div className="relative">
                  <motion.button
                    whileHover={{ scale: 1.05 }}
                    whileTap={{ scale: 0.95 }}
                    onClick={() => setShowProfileMenu(!showProfileMenu)}
                    className="flex items-center gap-2 p-1 rounded-full hover:bg-slate-100 transition-colors"
                  >
                    <img
                      src={user?.photoURL}
                      alt="Profile"
                      className="w-8 h-8 rounded-full border-2 border-white shadow-sm object-cover"
                    />
                    <ChevronDown className="hidden sm:block w-4 h-4 text-slate-400" />
                  </motion.button>

                  {/* Profile Dropdown */}
                  <AnimatePresence>
                    {showProfileMenu && (
                      <>
                        <motion.div
                          initial={{ opacity: 0 }}
                          animate={{ opacity: 1 }}
                          exit={{ opacity: 0 }}
                          className="fixed inset-0 z-20"
                          onClick={() => setShowProfileMenu(false)}
                        />
                        <motion.div 
                          initial={{ opacity: 0, y: 10 }}
                          animate={{ opacity: 1, y: 0 }}
                          exit={{ opacity: 0, y: 10 }}
                          className="absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-200 p-2 z-30"
                        >
                          <button 
                            onClick={handleProfileClick}
                            className="w-full flex items-center gap-3 px-3 py-2.5 text-sm text-slate-700 hover:bg-blue-50 rounded-lg transition-colors font-medium"
                          >
                            <User className="w-4 h-4" />
                            <span>Trang cá nhân</span>
                          </button>
                          <div className="border-t border-slate-100 my-1" />
                          <button
                            onClick={handleSignOut}
                            className="w-full flex items-center gap-3 px-3 py-2.5 text-sm text-red-500 hover:bg-red-50 rounded-lg transition-colors font-medium"
                          >
                            <LogOut className="w-4 h-4" />
                            <span>Đăng xuất</span>
                          </button>
                        </motion.div>
                      </>
                    )}
                  </AnimatePresence>
                </div>
              ) : (
                <motion.button
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={signInWithGoogle}
                  className="bg-[#00358E] text-white px-4 sm:px-6 py-2 rounded-lg font-bold text-xs sm:text-sm hover:bg-[#002763] transition-all whitespace-nowrap"
                >
                  <span className="hidden sm:inline">Đăng nhập</span>
                  <span className="sm:hidden">Login</span>
                </motion.button>
              )}

              {/* Mobile Menu Button */}
              <motion.button
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.95 }}
                onClick={() => setMobileOpen(!mobileOpen)}
                className="lg:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors"
              >
                {mobileOpen ? (
                  <X className="w-5 h-5 text-slate-600" />
                ) : (
                  <Menu className="w-5 h-5 text-slate-600" />
                )}
              </motion.button>
            </div>
          </div>
        </div>
      </nav>

      {/* Mobile Menu Panel */}
      <AnimatePresence>
        {mobileOpen && (
          <>
            {/* Overlay */}
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              onClick={() => setMobileOpen(false)}
              className="fixed inset-0 bg-black/40 backdrop-blur-sm z-20 lg:hidden"
            />

            {/* Menu Panel */}
            <motion.div
              initial={{ x: '100%' }}
              animate={{ x: 0 }}
              exit={{ x: '100%' }}
              transition={{ type: 'spring', damping: 30, stiffness: 300 }}
              className="fixed right-0 top-0 h-full w-64 sm:w-72 bg-white/95 backdrop-blur-xl z-30 lg:hidden overflow-y-auto shadow-2xl"
            >
              {/* Header */}
              <div className="sticky top-0 flex items-center justify-between p-4 border-b border-slate-200 bg-white/95 backdrop-blur-sm">
                <h2 className="text-lg font-bold text-slate-800">Menu</h2>
                <motion.button
                  whileHover={{ scale: 1.1 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={() => setMobileOpen(false)}
                  className="p-1 hover:bg-slate-100 rounded-lg transition-colors"
                >
                  <X className="w-5 h-5 text-slate-600" />
                </motion.button>
              </div>

              {/* Menu Items */}
              <div className="p-3 space-y-1">
                {menuItems.map((item, index) => (
                  <motion.button
                    key={item.id}
                    initial={{ opacity: 0, x: 20 }}
                    animate={{ opacity: 1, x: 0 }}
                    transition={{ delay: index * 0.05 }}
                    onClick={() => handleNavClick(item)}
                    whileHover={{ x: 4 }}
                    whileTap={{ scale: 0.95 }}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all font-medium text-sm ${
                      isItemActive(item)
                        ? 'bg-gradient-to-r from-[#00358E] to-[#002763] text-white shadow-lg'
                        : 'text-slate-700 hover:bg-slate-100'
                    }`}
                  >
                    <item.icon className="w-5 h-5 flex-shrink-0" />
                    <span>{item.label}</span>
                  </motion.button>
                ))}
              </div>

              {/* User Section */}
              {isSignedIn && user && (
                <motion.div 
                  initial={{ opacity: 0, y: 10 }}
                  animate={{ opacity: 1, y: 0 }}
                  className="border-t border-slate-200 p-3 space-y-3"
                >
                  {/* User Card */}
                  <div className="flex items-center gap-3 px-4 py-3 rounded-xl bg-gradient-to-br from-blue-50 to-slate-50 border border-slate-200">
                    <img
                      src={user.photoURL}
                      alt="User"
                      className="w-10 h-10 rounded-full border-2 border-white shadow-md object-cover flex-shrink-0"
                    />
                    <div className="flex-1 min-w-0">
                      <p className="text-sm font-bold text-slate-800 truncate">
                        {user.displayName || 'User'}
                      </p>
                      <p className="text-xs text-slate-500 truncate">{user.email}</p>
                    </div>
                  </div>

                  {/* Streak Card */}
                  {streak > 0 && (
                    <motion.div 
                      initial={{ opacity: 0, scale: 0.9 }}
                      animate={{ opacity: 1, scale: 1 }}
                      className="flex items-center justify-center gap-2 bg-gradient-to-r from-orange-50 to-yellow-50 px-3 py-3 rounded-xl border border-orange-200"
                    >
                      <Flame className="w-5 h-5 text-[#FF7D00] fill-[#FF7D00] animate-pulse flex-shrink-0" />
                      <div className="text-center">
                        <p className="text-[#FF7D00] font-bold text-sm">{streak}</p>
                        <p className="text-[#FF7D00] text-xs font-semibold">ngày liên tiếp</p>
                      </div>
                    </motion.div>
                  )}

                  {/* Action Buttons */}
                  <motion.button 
                    whileHover={{ scale: 1.02 }}
                    whileTap={{ scale: 0.98 }}
                    onClick={handleProfileClick}
                    className="w-full flex items-center justify-center gap-2 px-4 py-2.5 text-slate-700 hover:bg-blue-100 rounded-lg transition-colors font-semibold text-sm"
                  >
                    <User className="w-4 h-4" />
                    <span>Trang cá nhân</span>
                  </motion.button>

                  <motion.button
                    whileHover={{ scale: 1.02 }}
                    whileTap={{ scale: 0.98 }}
                    onClick={handleSignOut}
                    className="w-full flex items-center justify-center gap-2 px-4 py-2.5 text-red-500 hover:bg-red-100 rounded-lg transition-colors font-semibold text-sm"
                  >
                    <LogOut className="w-4 h-4" />
                    <span>Đăng xuất</span>
                  </motion.button>
                </motion.div>
              )}
            </motion.div>
          </>
        )}
      </AnimatePresence>

      {/* Bottom Navigation for Mobile - Luôn hiển thị */}
      <motion.div 
        className="fixed bottom-0 left-0 right-0 sm:hidden bg-white/50 backdrop-blur-xl border-t border-white/30 shadow-lg z-30"
        animate={{ y: 0 }}
        transition={{ duration: 0.3 }}
      >
        <div className="flex items-center justify-around px-2 py-3">
          {bottomMenuItems.map((item) => (
            <BottomNavItem
              key={item.id}
              item={item}
              isActive={isItemActive(item)}
              onClick={() => handleNavClick(item)}
            />
          ))}
          {/* More Menu */}
          <motion.button
            whileHover={{ scale: 1.08 }}
            whileTap={{ scale: 0.95 }}
            onClick={() => setMobileOpen(true)}
            className="flex flex-col items-center justify-center gap-1.5 py-2 px-3 rounded-xl hover:bg-slate-100 transition-all"
          >
            <div className="p-2 rounded-lg hover:bg-slate-200">
              <Menu className="w-5 h-5 text-slate-600" />
            </div>
            <span className="text-[10px] font-semibold text-slate-600">Thêm</span>
          </motion.button>
        </div>
      </motion.div>

      {/* Spacer - Điều chỉnh theo navbar height */}
      <div className="h-16 sm:h-20" />
    </>
  );
};

export default Navbar;
</file>

<file path="src/config/voiceConfig.js">
// ==================== IMPROVED TTS CONFIGURATION ====================

/**
 * 🎯 Enhanced Gender Categories
 */
export const GENDER_CATEGORIES = {
  FEMALE: [
    'Woman', 'Sarah', 'Anna', 'Linda', 'Client 2', 'Sales Associate', 
    'Older Woman', 'Student B', 'Student 2', 'Counselor', 'Emma', 
    'Trang', 'Jennifer', 'Lisa', 'Doctor Chen'
  ],
  MALE: [
    'Man', 'Kevin', 'Mark', 'Dr.Chen', 'Ben', 'Client 1', 'Professor', 
    'John', 'Mike', 'Waiter', 'Customer', 'Manager', 'HR Rep', 
    'Interviewer 1', 'Interviewer 2', 'Candidate', 'Professor A', 
    'Student 1', 'Student', 'Parent', 'Travel Agent', 'Narrator', 
    'Dr. Harrison', 'Smith', 'Tom', 'Peter', 'Alex', 'Training', 
    'HR', 'Professor Mitchell'
  ],
  NEUTRAL: ['Narrator', 'System', 'AI Assistant']
};

/**
 * 🎤 Enhanced Voice Settings - Thêm emotional baseline + naturalness
 */
export const VOICE_SETTINGS = {
  // === MALE VOICES ===
  Mark: { pitch: 0.89, rate: 0.95, volume: 0.85, energy: 'medium', formality: 'professional' },
  Man: { pitch: 0.65, rate: 0.95, volume: 0.85, energy: 'medium', formality: 'casual' },
  Alex: { pitch: 0.88, rate: 0.95, volume: 0.85, energy: 'medium', formality: 'professional' },
  HR: { pitch: 0.45, rate: 0.95, volume: 0.85, energy: 'medium', formality: 'formal' },
  Training: { pitch: 0.87, rate: 0.95, volume: 0.85, energy: 'high', formality: 'professional' },
  Tom: { pitch: 1.06, rate: 0.95, volume: 0.85, energy: 'medium', formality: 'casual' },
  Peter: { pitch: 0.88, rate: 0.90, volume: 0.90, energy: 'low', formality: 'formal' },
  Kevin: { pitch: 0.85, rate: 0.95, volume: 0.85, energy: 'high', formality: 'casual' },
  John: { pitch: 0.82, rate: 0.88, volume: 0.90, energy: 'medium', formality: 'formal' },
  Ben: { pitch: 0.50, rate: 0.92, volume: 0.88, energy: 'high', formality: 'casual' },
  'Doctor Chen': { pitch: 0.38, rate: 0.90, volume: 0.85, energy: 'low', formality: 'formal' },
  'Professor Mitchell': { pitch: 0.45, rate: 0.88, volume: 0.87, energy: 'low', formality: 'formal' },
  'Dr. Harrison': { pitch: 0.87, rate: 0.88, volume: 0.87, energy: 'medium', formality: 'formal' },
  Mike: { pitch: 0.90, rate: 0.98, volume: 0.87, energy: 'high', formality: 'casual' },
  Professor: { pitch: 0.55, rate: 0.88, volume: 0.87, energy: 'low', formality: 'formal' },
  'Professor A': { pitch: 0.83, rate: 0.85, volume: 0.90, energy: 'low', formality: 'formal' },
  Waiter: { pitch: 0.92, rate: 0.95, volume: 0.85, energy: 'high', formality: 'casual' },
  Customer: { pitch: 0.88, rate: 0.98, volume: 0.88, energy: 'high', formality: 'casual' },
  Manager: { pitch: 0.80, rate: 0.90, volume: 0.92, energy: 'medium', formality: 'professional' },
  'HR Rep': { pitch: 0.88, rate: 0.92, volume: 0.86, energy: 'medium', formality: 'formal' },
  'Interviewer 1': { pitch: 0.86, rate: 0.92, volume: 0.87, energy: 'medium', formality: 'professional' },
  Candidate: { pitch: 0.92, rate: 0.95, volume: 0.84, energy: 'high', formality: 'formal' },
  'Client 1': { pitch: 0.87, rate: 0.95, volume: 0.86, energy: 'medium', formality: 'professional' },
  Parent: { pitch: 0.88, rate: 0.92, volume: 0.85, energy: 'medium', formality: 'casual' },
  'Travel Agent': { pitch: 0.90, rate: 0.95, volume: 0.87, energy: 'high', formality: 'professional' },
  Student: { pitch: 0.95, rate: 1.00, volume: 0.83, energy: 'high', formality: 'casual' },
  'Student 1': { pitch: 0.94, rate: 1.00, volume: 0.82, energy: 'high', formality: 'casual' },

  // === FEMALE VOICES ===
  Sarah: { pitch: 1.25, rate: 0.95, volume: 0.85, energy: 'high', formality: 'professional' },
  Trang: { pitch: 1.30, rate: 0.95, volume: 0.88, energy: 'medium', formality: 'casual' },
  Emma: { pitch: 1.28, rate: 0.92, volume: 0.90, energy: 'high', formality: 'casual' },
  Jennifer: { pitch: 1.28, rate: 0.92, volume: 0.90, energy: 'medium', formality: 'professional' },
  Anna: { pitch: 1.32, rate: 0.95, volume: 0.88, energy: 'high', formality: 'casual' },
  Linda: { pitch: 1.32, rate: 0.95, volume: 0.88, energy: 'medium', formality: 'professional' },
  Lisa: { pitch: 1.30, rate: 0.90, volume: 0.85, energy: 'medium', formality: 'formal' },
  'Sales Associate': { pitch: 1.28, rate: 0.98, volume: 0.88, energy: 'high', formality: 'casual' },
  'Interviewer 2': { pitch: 1.25, rate: 0.95, volume: 0.85, energy: 'medium', formality: 'professional' },
  Counselor: { pitch: 1.22, rate: 0.88, volume: 0.82, energy: 'low', formality: 'formal' },
  'Older Woman': { pitch: 1.20, rate: 0.85, volume: 0.80, energy: 'low', formality: 'formal' },
  'Client 2': { pitch: 1.28, rate: 0.95, volume: 0.87, energy: 'medium', formality: 'professional' },
  'Student 2': { pitch: 1.25, rate: 1.00, volume: 0.84, energy: 'high', formality: 'casual' },
  'Student B': { pitch: 1.25, rate: 1.00, volume: 0.84, energy: 'high', formality: 'casual' },

  // === NEUTRAL ===
  Narrator: { pitch: 1.0, rate: 0.95, volume: 0.90, energy: 'medium', formality: 'formal' },

  // === DEFAULT ===
  default: { pitch: 1.0, rate: 0.95, volume: 0.85, energy: 'medium', formality: 'neutral' }
};

/**
 * 📊 Emotion Adjustments - Áp dụng cho TTS
 * Web Speech API chỉ support pitch + rate + volume
 */
export const EMOTION_ADJUSTMENTS = {
  excited: {
    pitchMultiplier: 1.15,
    rateMultiplier: 1.15,
    volumeMultiplier: 1.1,
    pauseAfter: 200
  },
  happy: {
    pitchMultiplier: 1.08,
    rateMultiplier: 1.05,
    volumeMultiplier: 1.05,
    pauseAfter: 100
  },
  sad: {
    pitchMultiplier: 0.92,
    rateMultiplier: 0.85,
    volumeMultiplier: 0.95,
    pauseAfter: 300
  },
  angry: {
    pitchMultiplier: 1.05,
    rateMultiplier: 1.2,
    volumeMultiplier: 1.15,
    pauseAfter: 150
  },
  neutral: {
    pitchMultiplier: 1.0,
    rateMultiplier: 1.0,
    volumeMultiplier: 1.0,
    pauseAfter: 0
  }
};

/**
 * 🎨 Optimized Speaker Themes
 */
export const SPEAKER_THEMES = {
  Mark: { gradient: 'from-blue-50 to-blue-100', border: 'border-blue-400', text: 'text-blue-900' },
  'Dr.Chen': { gradient: 'from-blue-50 to-blue-100', border: 'border-blue-400', text: 'text-blue-900' },
  Sarah: { gradient: 'from-pink-50 to-rose-100', border: 'border-pink-400', text: 'text-pink-900' },
  Anna: { gradient: 'from-pink-50 to-rose-100', border: 'border-pink-400', text: 'text-pink-900' },
  Mike: { gradient: 'from-green-50 to-emerald-100', border: 'border-green-400', text: 'text-green-900' },
  'Client 1': { gradient: 'from-emerald-50 to-emerald-100', border: 'border-emerald-400', text: 'text-emerald-900' },
  John: { gradient: 'from-purple-50 to-violet-100', border: 'border-purple-400', text: 'text-purple-900' },
  Counselor: { gradient: 'from-purple-50 to-violet-100', border: 'border-purple-400', text: 'text-purple-900' },
  Waiter: { gradient: 'from-yellow-50 to-amber-100', border: 'border-yellow-400', text: 'text-yellow-900' },
  'Client 2': { gradient: 'from-amber-50 to-amber-100', border: 'border-amber-400', text: 'text-amber-900' },
  'Older Woman': { gradient: 'from-orange-50 to-orange-100', border: 'border-orange-400', text: 'text-orange-900' },
  Professor: { gradient: 'from-indigo-50 to-indigo-100', border: 'border-indigo-400', text: 'text-indigo-900' },
  'Professor A': { gradient: 'from-indigo-50 to-indigo-100', border: 'border-indigo-400', text: 'text-indigo-900' },
  Customer: { gradient: 'from-teal-50 to-teal-100', border: 'border-teal-400', text: 'text-teal-900' },
  'Student 1': { gradient: 'from-teal-50 to-teal-100', border: 'border-teal-400', text: 'text-teal-900' },
  'Travel Agent': { gradient: 'from-cyan-50 to-cyan-100', border: 'border-cyan-400', text: 'text-cyan-900' },
  'Student B': { gradient: 'from-cyan-50 to-cyan-100', border: 'border-cyan-400', text: 'text-cyan-900' },
  'Sales Associate': { gradient: 'from-rose-50 to-rose-100', border: 'border-rose-400', text: 'text-rose-900' },
  Manager: { gradient: 'from-slate-50 to-slate-100', border: 'border-slate-400', text: 'text-slate-900' },
  Narrator: { gradient: 'from-gray-50 to-gray-100', border: 'border-gray-400', text: 'text-gray-900' },
  'Interviewer 1': { gradient: 'from-sky-50 to-sky-100', border: 'border-sky-400', text: 'text-sky-900' },
  'Interviewer 2': { gradient: 'from-lime-50 to-lime-100', border: 'border-lime-400', text: 'text-lime-900' },
  Candidate: { gradient: 'from-fuchsia-50 to-fuchsia-100', border: 'border-fuchsia-400', text: 'text-fuchsia-900' },
  default: { gradient: 'from-gray-50 to-gray-100', border: 'border-gray-400', text: 'text-gray-900' }
};

/**
 * 🎭 Speaker Icons
 */
export const SPEAKER_ICONS = {
  'Travel Agent': '✈️', 'Client 1': '👨‍💼', 'Client 2': '👩‍💼', Manager: '💼',
  'HR Rep': '👔', 'Interviewer 1': '🎤', 'Interviewer 2': '📋', Candidate: '📝',
  Professor: '👨‍🏫', 'Professor A': '👨‍🏫', 'Professor Mitchell': '🔬', 'Dr. Harrison': '🧬',
  'Student 1': '🧑‍🎓', 'Student 2': '👩‍🎓', 'Student B': '🎓', Student: '📖',
  Waiter: '👨‍🍳', Customer: '🛒', 'Sales Associate': '🛍️',
  Counselor: '🧑‍⚕️', 'Doctor Chen': '👩‍⚕️',
  Mark: '🧑‍🔬', Sarah: '👩‍💻', Anna: '👩‍🎨', Ben: '👨', Alex: '🧑‍🏫',
  Mike: '👨‍💻', Kevin: '🧑‍🔧', John: '👨‍⚖️', Tom: '🧑‍🎓', Peter: '👨‍🎓',
  Emma: '👩‍🎤', Trang: '👩‍🌾', Lisa: '👩‍⚕️', Jennifer: '👩‍🏫', Linda: '👩‍💼',
  'Older Woman': '👵', Parent: '👪', Man: '👨', Woman: '👩',
  Narrator: '📖', HR: '🏢', Training: '🎓',
  default: '👤'
};

// ==================== ENHANCED UTILITY FUNCTIONS ====================

const voiceCache = new Map();
const themeCache = new Map();
const genderCache = new Map();
let allSpeakersCache = null;

export const getSpeakerVoice = (speakerName) => {
  if (voiceCache.has(speakerName)) {
    return voiceCache.get(speakerName);
  }
  const voice = VOICE_SETTINGS[speakerName] || VOICE_SETTINGS.default;
  voiceCache.set(speakerName, voice);
  return voice;
};

export const getSpeakerColor = (speakerName) => {
  if (themeCache.has(speakerName)) {
    return themeCache.get(speakerName);
  }
  const theme = SPEAKER_THEMES[speakerName] || SPEAKER_THEMES.default;
  const colorClass = `bg-gradient-to-br ${theme.gradient}`;
  themeCache.set(speakerName, colorClass);
  return colorClass;
};

export const getSpeakerIcon = (speakerName) => {
  return SPEAKER_ICONS[speakerName] || SPEAKER_ICONS.default;
};

/**
 * ✨ NEW: Apply emotion to voice settings
 */
export const applyEmotionToVoice = (speakerName, emotion = 'neutral') => {
  const baseVoice = getSpeakerVoice(speakerName);
  const emotionMod = EMOTION_ADJUSTMENTS[emotion] || EMOTION_ADJUSTMENTS.neutral;
  
  return {
    rate: Math.max(0.5, Math.min(2.0, baseVoice.rate * emotionMod.rateMultiplier)),
    pitch: Math.max(0.5, Math.min(2.0, baseVoice.pitch * emotionMod.pitchMultiplier)),
    volume: Math.max(0.0, Math.min(1.0, baseVoice.volume * emotionMod.volumeMultiplier)),
    pauseAfter: emotionMod.pauseAfter
  };
};

/**
 * ✨ NEW: Get TTS options with emotion support
 */
export const getSpeakerTTSOptions = (speakerName, emotion = 'neutral', rateMultiplier = 1.0, pitchMultiplier = 1.0) => {
  const voice = applyEmotionToVoice(speakerName, emotion);
  
  return {
    rate: Math.max(0.5, Math.min(2.0, voice.rate * rateMultiplier)),
    pitch: Math.max(0.5, Math.min(2.0, voice.pitch * pitchMultiplier)),
    volume: voice.volume,
    pauseAfter: voice.pauseAfter
  };
};

/**
 * ✨ NEW: Process text with natural pauses
 * Thêm pause trước question marks, dấu chấm, ellipsis
 */
export const processTextForNaturalSpeech = (text) => {
  return text
    .replace(/([.!?])\s+/g, '$1 <break time="300ms"/> ') // Pause after sentences
    .replace(/\.\.\./g, '<break time="200ms"/>') // Pause for ellipsis
    .replace(/,/g, '<break time="150ms"/>'); // Short pause for commas
};

/**
 * ✨ NEW: Detect and adjust for questions
 */
export const isQuestion = (text) => {
  return text.trim().endsWith('?');
};

/**
 * ✨ NEW: Analyze emotion from text
 */
export const analyzeTextEmotion = (text) => {
  if (!text || typeof text !== 'string') return 'neutral';
  
  const lower = text.toLowerCase();
  
  // Excited patterns
  if (/\b(wow|amazing|great|excellent|fantastic|awesome|incredible)\b/.test(lower) || 
      (text.match(/!/g) || []).length >= 2) {
    return 'excited';
  }
  
  // Angry patterns
  if (/\b(angry|mad|terrible|awful|horrible|hate)\b/.test(lower) || 
      (text.match(/!/g) || []).length >= 1 && text.length < 30) {
    return 'angry';
  }
  
  // Happy patterns
  if (/\b(happy|glad|love|wonderful|delighted)\b/.test(lower)) {
    return 'happy';
  }
  
  // Sad patterns
  if (/\b(sad|sorry|regret|disappointed|upset)\b/.test(lower)) {
    return 'sad';
  }
  
  return 'neutral';
};

export const isFemaleVoice = (speakerName) => {
  const cacheKey = `female_${speakerName}`;
  if (genderCache.has(cacheKey)) {
    return genderCache.get(cacheKey);
  }
  const result = GENDER_CATEGORIES.FEMALE.includes(speakerName);
  genderCache.set(cacheKey, result);
  return result;
};

export const isMaleVoice = (speakerName) => {
  const cacheKey = `male_${speakerName}`;
  if (genderCache.has(cacheKey)) {
    return genderCache.get(cacheKey);
  }
  const result = GENDER_CATEGORIES.MALE.includes(speakerName);
  genderCache.set(cacheKey, result);
  return result;
};

export const getAllSpeakers = () => {
  if (allSpeakersCache) {
    return allSpeakersCache;
  }
  allSpeakersCache = [
    ...GENDER_CATEGORIES.FEMALE,
    ...GENDER_CATEGORIES.MALE,
    ...GENDER_CATEGORIES.NEUTRAL
  ].filter((v, i, a) => a.indexOf(v) === i);
  return allSpeakersCache;
};

export const isValidVoiceSettings = (settings) => {
  if (!settings || typeof settings !== 'object') return false;
  const { pitch, rate, volume } = settings;
  return (
    typeof pitch === 'number' && pitch >= 0.5 && pitch <= 2.0 &&
    typeof rate === 'number' && rate >= 0.1 && rate <= 10.0 &&
    (!volume || (typeof volume === 'number' && volume >= 0.0 && volume <= 1.0))
  );
};

export const clearCaches = () => {
  voiceCache.clear();
  themeCache.clear();
  genderCache.clear();
  allSpeakersCache = null;
  console.log('✅ All caches cleared');
};

// ==================== USAGE EXAMPLE ====================

/**
 * 📝 Usage trong TTS synthesis:
 * 
 * const text = "This is amazing!";
 * const speaker = "Sarah";
 * const emotion = analyzeTextEmotion(text);
 * const options = getSpeakerTTSOptions(speaker, emotion);
 * 
 * const utterance = new SpeechSynthesisUtterance(text);
 * utterance.pitch = options.pitch;
 * utterance.rate = options.rate;
 * utterance.volume = options.volume;
 * 
 * if (isQuestion(text)) {
 *   utterance.pitch *= 1.05; // Slightly raise pitch for questions
 * }
 * 
 * window.speechSynthesis.speak(utterance);
 * 
 * if (options.pauseAfter) {
 *   setTimeout(() => {
 *     // Next speech or action
 *   }, options.pauseAfter);
 * }
 */

export default {
  GENDER_CATEGORIES,
  VOICE_SETTINGS,
  EMOTION_ADJUSTMENTS,
  SPEAKER_THEMES,
  SPEAKER_ICONS,
  getSpeakerVoice,
  getSpeakerColor,
  getSpeakerIcon,
  getSpeakerTTSOptions,
  applyEmotionToVoice,
  processTextForNaturalSpeech,
  isQuestion,
  analyzeTextEmotion,
  isFemaleVoice,
  isMaleVoice,
  getAllSpeakers,
  isValidVoiceSettings,
  clearCaches
};

export const VOICE_CONFIG = {
  FEMALE_SPEAKERS: GENDER_CATEGORIES.FEMALE,
  MALE_SPEAKERS: GENDER_CATEGORIES.MALE,
  SPEAKER_CONFIG: VOICE_SETTINGS
};

export const SPEAKER_STYLES = Object.fromEntries(
  Object.entries(SPEAKER_THEMES).map(([name, theme]) => [
    name,
    `bg-gradient-to-br ${theme.gradient} border ${theme.border} ${theme.text}`
  ])
);
</file>

<file path="package.json">
{
  "name": "listening",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "homepage": "https://khoale-dev-code.github.io/huflit-test/",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "start": "vite",
    "test": "echo \"Error: no test specified\" && exit 1",
    "eject": "echo \"Not supported in Vite\" && exit 1",
    "upload:all": "node scripts/uploadAllData.js",
    "upload:real": "node scripts/uploadRealData.js",
    "upload:vocabulary": "node scripts/uploadvocabularyData.js",
    "upload:grammar": "node scripts/uploadGrammarData.js",
    "upload:exam": "node scripts/uploadExamData.js",
    "firebase:deploy": "firebase deploy",
    "firebase:console": "start https://console.firebase.google.com/project/huflit-test-4ce25/overview",
    "firebase:hosting": "firebase open hosting",
    "preview": "vite preview",
    "deploy": "gh-pages -d dist",
    "create-admin": "node scripts/createAdmin.js"
  },
  "dependencies": {
    "@clerk/clerk-react": "^5.53.8",
    "@elevenlabs/elevenlabs-js": "^2.28.0",
    "@heroicons/react": "^2.2.0",
    "canvas-confetti": "^1.9.4",
    "dotenv": "^17.2.3",
    "file-saver": "^2.0.5",
    "firebase": "^12.6.0",
    "firebase-admin": "^13.6.0",
    "framer-motion": "^12.23.26",
    "jspdf": "^3.0.3",
    "jspdf-autotable": "^5.0.2",
    "lucide-react": "^0.563.0",
    "react": "^19.1.1",
    "react-audio-player": "^0.17.0",
    "react-dom": "^19.1.1",
    "react-icons": "^5.5.0",
    "react-markdown": "^10.1.0",
    "react-router-dom": "^6.30.2",
    "react-window": "^2.2.5",
    "recharts": "^3.4.1",
    "rehype-raw": "^7.0.0",
    "remark-gfm": "^4.0.1",
    "socket.io-client": "^4.8.1",
    "web-vitals": "^5.1.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.36.0",
    "@types/react": "^19.1.16",
    "@types/react-dom": "^19.1.9",
    "@vitejs/plugin-react": "^5.0.4",
    "autoprefixer": "^10.4.21",
    "baseline-browser-mapping": "^2.9.18",
    "eslint": "^9.36.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.22",
    "gh-pages": "^6.3.0",
    "globals": "^16.4.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.18",
    "terser": "^5.44.1",
    "vite": "^7.2.6"
  }
}
</file>

<file path="src/App.jsx">
import React, { useMemo, useState, lazy, Suspense, useCallback, memo, useEffect } from 'react';
import { BrowserRouter as Router, Routes, Route, useNavigate } from 'react-router-dom';
import { loadExamData, getAllExamMetadata } from './data/examData';
import { useAppState } from './hooks/useAppState';
import { useSplashScreen } from './hooks/useSplashScreen.js';
import MainLayout from './components/layout/MainLayout';
import { LoadingSpinner } from './components/common/LoadingSpinner';
import HeaderSection from './components/sections/HeaderSection';
import UserProfile from './components/Auth/UserProfile.jsx';
import PartSelector from './components/Display/PartSelector.jsx';
import ContentDisplay from './components/Display/ContentDisplay';
import QuestionDisplay from './components/Display/QuestionDisplay.jsx';
import ResultsDisplay from './components/Display/ResultsDisplay.jsx';
import VocabularyPractice from './components/Voca/VocabularyPractice.jsx';
import AuthModal from './components/Auth/AuthModal.jsx';
import { useOnlineUsers } from './hooks/useOnlineUsers.js';
import ExamAnswersPage from './components/pages/ExamAnswersPage.jsx';
import { ROUTES } from './config/routes';
import HomePage from './pages/HomePage.jsx';

const AdminApp = lazy(() => import('./admin/AdminApp'));
const NotFoundPage = lazy(() => import('./components/pages/NotFoundPage.jsx'));
const GrammarReview = lazy(() => import('./components/Grama/GrammarReview.jsx'));
const FullExamMode = lazy(() => import('./components/FullExam/FullExamMode.jsx'));

import { Trophy, FileText, Zap, BarChart3, ArrowLeft } from 'lucide-react';

// --- INFO BADGE & COMPONENTS ---
const InfoBadge = memo(({ icon: Icon, label, value, color = 'indigo' }) => {
  const colorMap = {
    indigo: 'bg-indigo-50 border-indigo-200 text-indigo-700',
    emerald: 'bg-emerald-50 border-emerald-200 text-emerald-700',
    amber: 'bg-amber-50 border-amber-200 text-amber-700',
    purple: 'bg-purple-50 border-purple-200 text-purple-700',
  };

  return (
    <div className={`flex items-center gap-2 px-3 py-2 rounded-lg border-2 ${colorMap[color]}`}>
      <Icon className="w-4 h-4 flex-shrink-0" strokeWidth={2} />
      <div className="flex-1 min-w-0">
        <p className="text-xs font-semibold uppercase tracking-wider">{label}</p>
        <p className="text-sm font-bold truncate">{value}</p>
      </div>
    </div>
  );
});

InfoBadge.displayName = 'InfoBadge';

const StatsGrid = memo(({ score, isSignedIn }) => {
  if (!isSignedIn || score.total === 0) return null;

  return (
    <div className="bg-gradient-to-br from-slate-50 to-white rounded-2xl border-2 border-slate-200 p-6 shadow-sm">
      <div className="flex items-center gap-3 mb-4">
        <div className="p-2 rounded-lg bg-indigo-100">
          <BarChart3 className="w-5 h-5 text-indigo-700" strokeWidth={2} />
        </div>
        <h3 className="text-lg font-bold text-slate-900">Kết quả</h3>
      </div>

      <div className="grid grid-cols-2 sm:grid-cols-4 gap-3">
        <InfoBadge 
          icon={FileText} 
          label="Tổng câu" 
          value={score.total}
          color="indigo"
        />
        <InfoBadge 
          icon={Trophy} 
          label="Câu đúng" 
          value={score.correct}
          color="emerald"
        />
        <InfoBadge 
          icon={FileText} 
          label="Câu sai" 
          value={score.total - score.correct}
          color="amber"
        />
        <InfoBadge 
          icon={Zap} 
          label="Tỉ lệ" 
          value={`${score.percentage.toFixed(0)}%`}
          color="purple"
        />
      </div>
    </div>
  );
});

StatsGrid.displayName = 'StatsGrid';

const BackButton = memo(({ onClick, show = true }) => {
  if (!show) return null;
  
  return (
    <button
      onClick={onClick}
      className="inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 border-2 border-slate-300 rounded-xl text-slate-700 hover:text-slate-900 font-semibold transition-all duration-200 active:scale-95"
    >
      <ArrowLeft className="w-4 h-4" strokeWidth={2} />
      <span>Quay lại</span>
    </button>
  );
});

BackButton.displayName = 'BackButton';

// --- MEMOIZED COMPONENTS ---
const MemoizedHeaderSection = memo(HeaderSection);
const MemoizedUserProfile = memo(UserProfile);
const MemoizedPartSelector = memo(PartSelector);
const MemoizedContentDisplay = memo(ContentDisplay);
const MemoizedQuestionDisplay = memo(QuestionDisplay);
const MemoizedResultsDisplay = memo(ResultsDisplay);

// --- PAGE COMPONENTS ---
const PartTestContent = memo(({
  isSignedIn,
  user,
  selectedExam,
  handleExamChange,
  testType,
  handleTestTypeChange,
  selectedPart,
  handlePartChange,
  partData,
  currentQuestionIndex,
  setCurrentQuestionIndex,
  answers,
  handleAnswerSelect,
  showResults,
  handleSubmit,
  handleReset,
  score,
}) => {
  const isSplitLayoutPart = testType === 'reading' && 
    (selectedPart === 'part6' || selectedPart === 'part7' || selectedPart === 'part8');

  return (
    <div className="space-y-6 w-full relative z-10">
      {/* ✅ REMOVE HeaderSection from here - it's in PartSelector */}
      {isSignedIn && <MemoizedUserProfile />}

      <div className="mt-3 w-full">
        <MemoizedPartSelector
          selectedExam={selectedExam}
          onExamChange={handleExamChange}
          testType={testType}
          onTestTypeChange={(e) => handleTestTypeChange(e.target.value)}
          selectedPart={selectedPart}
          onPartChange={handlePartChange}
        />
      </div>

      <div className="space-y-6 mt-6 w-full">
        {isSplitLayoutPart ? (
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 w-full">
            {/* Left Column - Content */}
            <div className="order-1 w-full">
              <div className="space-y-3 w-full">
                <div className="flex items-center gap-2 px-1">
                  <div className="w-1 h-6 rounded-full bg-indigo-600" />
                  <p className="text-xs font-bold text-slate-600 uppercase tracking-wider">Nội dung</p>
                </div>
                <div className="w-full relative z-20">
                  <MemoizedContentDisplay
                    partData={partData}
                    selectedPart={selectedPart}
                    currentQuestionIndex={currentQuestionIndex}
                    testType={testType}
                    examId={selectedExam}
                  />
                </div>
              </div>
            </div>
            
            {/* Right Column - Questions */}
            <div className="order-2 w-full">
              <div className="space-y-3 w-full">
                <MemoizedQuestionDisplay
                  selectedPart={selectedPart}
                  selectedExam={selectedExam}
                  partData={partData}
                  currentQuestionIndex={currentQuestionIndex}
                  onQuestionChange={setCurrentQuestionIndex}
                  answers={answers}
                  onAnswerSelect={handleAnswerSelect}
                  showResults={showResults}
                  onSubmit={handleSubmit}
                  testType={testType}
                />
              </div>
            </div>
          </div>
        ) : (
          <>
            {/* Full Width - Content */}
            <div className="space-y-3 w-full relative z-20">
              <MemoizedContentDisplay
                partData={partData}
                selectedPart={selectedPart}
                currentQuestionIndex={currentQuestionIndex}
                testType={testType}
                examId={selectedExam}
              />
            </div>

            {/* Full Width - Questions */}
            <div className="space-y-3 w-full">
              <MemoizedQuestionDisplay
                selectedPart={selectedPart}
                selectedExam={selectedExam}
                partData={partData}
                currentQuestionIndex={currentQuestionIndex}
                onQuestionChange={setCurrentQuestionIndex}
                answers={answers}
                onAnswerSelect={handleAnswerSelect}
                showResults={showResults}
                onSubmit={handleSubmit}
                testType={testType}
              />
            </div>
          </>
        )}
      </div>

      {showResults && (
        <div className="space-y-3 mt-6 w-full">
          <MemoizedResultsDisplay
            score={score}
            partData={partData}
            answers={answers}
            onReset={handleReset}
          />
        </div>
      )}

      <div className="mt-6 w-full">
        <StatsGrid score={score} isSignedIn={isSignedIn} />
      </div>
    </div>
  );
});

PartTestContent.displayName = 'PartTestContent';

const TestPage = memo(({
  isSignedIn,
  user,
  selectedExam,
  handleExamChange,
  testType,
  handleTestTypeChange,
  selectedPart,
  handlePartChange,
  partData,
  currentQuestionIndex,
  setCurrentQuestionIndex,
  answers,
  handleAnswerSelect,
  showResults,
  handleSubmit,
  handleReset,
  score,
}) => (
  <PartTestContent
    isSignedIn={isSignedIn}
    user={user}
    selectedExam={selectedExam}
    handleExamChange={handleExamChange}
    testType={testType}
    handleTestTypeChange={handleTestTypeChange}
    selectedPart={selectedPart}
    handlePartChange={handlePartChange}
    partData={partData}
    currentQuestionIndex={currentQuestionIndex}
    setCurrentQuestionIndex={setCurrentQuestionIndex}
    answers={answers}
    handleAnswerSelect={handleAnswerSelect}
    showResults={showResults}
    handleSubmit={handleSubmit}
    handleReset={handleReset}
    score={score}
  />
));

TestPage.displayName = 'TestPage';

const ProfilePage = memo(({ user, handleBackToTest }) => (
  <div className="space-y-6 w-full">
    <BackButton onClick={handleBackToTest} show={true} />
    <MemoizedUserProfile currentUser={user} />
  </div>
));

ProfilePage.displayName = 'ProfilePage';

const FullExamPage = memo(({ handleTestTypeChange }) => {
  const [examData, setExamData] = useState(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const loadAllExams = async () => {
      setIsLoading(true);
      try {
        const examList = getAllExamMetadata();
        const loadPromises = examList.map(exam => loadExamData(exam.id));
        const loadedExams = await Promise.all(loadPromises);
        
        const data = {};
        examList.forEach((exam, index) => {
          data[exam.id] = loadedExams[index];
        });
        
        setExamData(data);
      } catch (error) {
        console.error('Error loading exam data:', error);
      } finally {
        setIsLoading(false);
      }
    };

    loadAllExams();
  }, []);

  if (isLoading || !examData) {
    return <LoadingSpinner />;
  }

  return (
    <Suspense fallback={<LoadingSpinner />}>
      <FullExamMode
        examData={examData}
        onComplete={() => handleTestTypeChange('')}
      />
    </Suspense>
  );
});

FullExamPage.displayName = 'FullExamPage';

const GrammarPage = memo(({ answers, handleAnswerSelect, handleSubmit }) => (
  <Suspense fallback={<LoadingSpinner />}>
    <GrammarReview
      answers={answers}
      onAnswerSelect={handleAnswerSelect}
      onSubmit={handleSubmit}
    />
  </Suspense>
));

GrammarPage.displayName = 'GrammarPage';

const VocabularyPage = memo(() => <VocabularyPractice />);

VocabularyPage.displayName = 'VocabularyPage';

const AnswersPage = memo(({ handleBackToMain }) => (
  <div className="space-y-6 w-full">
    <BackButton onClick={handleBackToMain} show={true} />
    <ExamAnswersPage />
  </div>
));

AnswersPage.displayName = 'AnswersPage';

// --- MAIN APP CONTENT ---
const AppContent = memo(() => {
  const navigate = useNavigate();
  const [showAuthModal, setShowAuthModal] = useState(false);
  const [currentExamData, setCurrentExamData] = useState(null);

  const { onlineCount, totalUsers } = useOnlineUsers();

  const {
    selectedExam,
    testType,
    handleTestTypeChange,
    practiceType,
    handlePracticeTypeChange,
    selectedPart,
    currentQuestionIndex,
    setCurrentQuestionIndex,
    answers,
    handleAnswerSelect,
    handleSubmit,
    showResults,
    handleReset,
    handleExamChange,
    handlePartChange,
    isSignedIn,
    user,
  } = useAppState();

  useEffect(() => {
    const loadCurrentExam = async () => {
      if (!selectedExam) return;
      
      try {
        const data = await loadExamData(selectedExam);
        setCurrentExamData(data);
      } catch (error) {
        console.error('Error loading exam:', error);
        setCurrentExamData(null);
      }
    };

    loadCurrentExam();
  }, [selectedExam]);

  const handleAuthClose = useCallback(() => {
    setShowAuthModal(false);
  }, []);

  const handleAuthOpen = useCallback(() => {
    setShowAuthModal(true);
  }, []);

  const handleViewProfile = useCallback(() => {
    navigate(ROUTES.PROFILE);
  }, [navigate]);

  const handleBackToTest = useCallback(() => {
    navigate(ROUTES.TEST);
  }, [navigate]);

  const handleGoToAnswers = useCallback(() => {
    navigate(ROUTES.ANSWERS);
  }, [navigate]);

  const handleBackToMain = useCallback(() => {
    navigate(ROUTES.TEST);
  }, [navigate]);

  const partData = useMemo(() => {
    if (practiceType || !currentExamData) return null;
    return currentExamData.parts?.[selectedPart] || null;
  }, [practiceType, currentExamData, selectedPart]);

  const score = useMemo(() => {
    if (practiceType || !partData?.questions) {
      return { correct: 0, total: 0, percentage: 0 };
    }

    let correct = 0;
    const total = partData.questions.length;

    for (let i = 0; i < total; i++) {
      const q = partData.questions[i];
      if (answers[q.id] === q.correct) {
        correct++;
      }
    }

    return {
      correct,
      total,
      percentage: total > 0 ? (correct / total) * 100 : 0
    };
  }, [practiceType, partData, answers]);

  const layoutProps = useMemo(() => ({
    testType,
    onTestTypeChange: handleTestTypeChange,
    practiceType,
    onPracticeTypeChange: handlePracticeTypeChange,
    user,
    onAuthClick: handleAuthOpen,
    onProfileClick: handleViewProfile,
  }), [testType, handleTestTypeChange, practiceType, handlePracticeTypeChange, user, handleAuthOpen, handleViewProfile]);

  return (
    <MainLayout {...layoutProps}>
      <div className="relative z-10 w-full">
        <div className="max-w-7xl mx-auto px-3 sm:px-4 md:px-6 w-full">
          <Suspense fallback={<LoadingSpinner />}>
            <Routes>
              <Route path={ROUTES.HOME} element={<HomePage />} />
              <Route 
                path={ROUTES.TEST} 
                element={
                  <TestPage 
                    isSignedIn={isSignedIn} 
                    user={user} 
                    selectedExam={selectedExam} 
                    handleExamChange={handleExamChange} 
                    testType={testType} 
                    handleTestTypeChange={handleTestTypeChange} 
                    selectedPart={selectedPart} 
                    handlePartChange={handlePartChange} 
                    partData={partData} 
                    currentQuestionIndex={currentQuestionIndex} 
                    setCurrentQuestionIndex={setCurrentQuestionIndex} 
                    answers={answers} 
                    handleAnswerSelect={handleAnswerSelect} 
                    showResults={showResults} 
                    handleSubmit={handleSubmit} 
                    handleReset={handleReset} 
                    score={score} 
                  />
                } 
              />
              <Route path={ROUTES.FULL_EXAM} element={<FullExamPage handleTestTypeChange={handleTestTypeChange} />} />
              <Route path={ROUTES.GRAMMAR} element={<GrammarPage answers={answers} handleAnswerSelect={handleAnswerSelect} handleSubmit={handleSubmit} />} />
              <Route path={ROUTES.VOCABULARY} element={<VocabularyPage />} />
              <Route path={ROUTES.PROFILE} element={<ProfilePage user={user} handleBackToTest={handleBackToTest} />} />
              <Route path={ROUTES.ANSWERS} element={<AnswersPage handleBackToMain={handleBackToMain} />} />
              <Route path="*" element={<NotFoundPage />} />
            </Routes>
          </Suspense>
          {showAuthModal && <AuthModal onClose={handleAuthClose} />}
        </div>
      </div>
    </MainLayout>
  );
});

AppContent.displayName = 'AppContent';

// --- MAIN APP WITH SPLASH SCREEN ---
function App() {
  const showSplash = useSplashScreen(3000); // 3 giây splash screen

  if (showSplash) {
    return <LoadingSpinner message="Loading..." />;
  }

  return (
    <Router future={{ v7_startTransition: true, v7_relativeSplatPath: true }}>
      <Suspense fallback={<LoadingSpinner />}>
        <Routes>
          <Route path="/admin/*" element={<AdminApp />} />
          <Route path="/*" element={<AppContent />} />
          <Route path="*" element={<NotFoundPage />} />
        </Routes>
      </Suspense>
    </Router>
  );
}

export default App;
</file>

</files>
